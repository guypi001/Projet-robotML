"use strict";(()=>{var lhe=Object.defineProperty,che=(i,e,t)=>e in i?lhe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ml=(i,e,t)=>(che(i,typeof e!="symbol"?e+"":e,t),t);globalThis&&globalThis.__awaiter;var dhe=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function hhe(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,(n,o)=>{let r=o[0],s=e[r],a=n;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),dhe&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),t}function m(i,e,...t){return hhe(e,t)}var Cne=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(i){setTimeout(()=>{throw i.stack?vA.isErrorNoTelemetry(i)?new vA(i.message+`

`+i.stack):new Error(i.message+`

`+i.stack):i},0)}}emit(i){this.listeners.forEach(e=>{e(i)})}onUnexpectedError(i){this.unexpectedErrorHandler(i),this.emit(i)}onUnexpectedExternalError(i){this.unexpectedErrorHandler(i)}},yne=new Cne;function Ye(i){Ls(i)||yne.onUnexpectedError(i)}function Fn(i){Ls(i)||yne.onUnexpectedExternalError(i)}function VF(i){if(i instanceof Error){let{name:e,message:t}=i,n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:vA.isErrorNoTelemetry(i)}}return i}var rD="Canceled";function Ls(i){return i instanceof ya?!0:i instanceof Error&&i.name===rD&&i.message===rD}var ya=class extends Error{constructor(){super(rD),this.name=this.message}};function sD(){let i=new Error(rD);return i.name=i.message,i}function Nt(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function uhe(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}var UF=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},vA=class extends Error{constructor(i){super(i),this.name="ErrorNoTelemetry"}static fromError(i){if(i instanceof vA)return i;let e=new vA;return e.message=i.message,e.stack=i.stack,e}static isErrorNoTelemetry(i){return i.name==="ErrorNoTelemetry"}},QF=class i extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,i.prototype);debugger}};function Ql(i){let e=this,t=!1,n;return function(){return t||(t=!0,n=i.apply(e,arguments)),n}}var At;(function(i){function e(C){return C&&typeof C=="object"&&typeof C[Symbol.iterator]=="function"}i.is=e;let t=Object.freeze([]);function n(){return t}i.empty=n;function*o(C){yield C}i.single=o;function r(C){return C||t}i.from=r;function s(C){return!C||C[Symbol.iterator]().next().done===!0}i.isEmpty=s;function a(C){return C[Symbol.iterator]().next().value}i.first=a;function l(C,k){for(let L of C)if(k(L))return!0;return!1}i.some=l;function c(C,k){for(let L of C)if(k(L))return L}i.find=c;function*d(C,k){for(let L of C)k(L)&&(yield L)}i.filter=d;function*h(C,k){let L=0;for(let S of C)yield k(S,L++)}i.map=h;function*u(...C){for(let k of C)for(let L of k)yield L}i.concat=u;function*g(C){for(let k of C)for(let L of k)yield L}i.concatNested=g;function p(C,k,L){let S=L;for(let y of C)S=k(S,y);return S}i.reduce=p;function f(C,k){let L=0;for(let S of C)k(S,L++)}i.forEach=f;function*v(C,k,L=C.length){for(k<0&&(k+=C.length),L<0?L+=C.length:L>C.length&&(L=C.length);k<L;k++)yield C[k]}i.slice=v;function b(C,k=Number.POSITIVE_INFINITY){let L=[];if(k===0)return[L,C];let S=C[Symbol.iterator]();for(let y=0;y<k;y++){let M=S.next();if(M.done)return[L,i.empty()];L.push(M.value)}return[L,{[Symbol.iterator](){return S}}]}i.consume=b;function A(C){return b(C)[0]}i.collect=A;function w(C,k,L=(S,y)=>S===y){let S=C[Symbol.iterator](),y=k[Symbol.iterator]();for(;;){let M=S.next(),O=y.next();if(M.done!==O.done)return!1;if(M.done)return!0;if(!L(M.value,O.value))return!1}}i.equals=w})(At||(At={}));var jF=class extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}};function UG(i){return typeof i.dispose=="function"&&i.dispose.length===0}function st(i){if(At.is(i)){let e=[];for(let t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new jF(e);return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function ss(...i){return ct(()=>st(i))}function ct(i){return{dispose:Ql(()=>{i()})}}var ne=class i{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{st(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?i.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}};ne.DISABLE_DISPOSED_WARNING=!1;var J=class{constructor(){this._store=new ne,this._store}dispose(){this._store.dispose()}_register(i){if(i===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(i)}};J.None=Object.freeze({dispose(){}});var eo=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},KF=class{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}},qF=class{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0)},this}},$F=class{constructor(e){this.object=e}dispose(){}},rn=class{constructor(i){this.element=i,this.next=rn.Undefined,this.prev=rn.Undefined}};rn.Undefined=new rn(void 0);var ko=class{constructor(){this._first=rn.Undefined,this._last=rn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===rn.Undefined}clear(){let e=this._first;for(;e!==rn.Undefined;){let t=e.next;e.prev=rn.Undefined,e.next=rn.Undefined,e=t}this._first=rn.Undefined,this._last=rn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new rn(e);if(this._first===rn.Undefined)this._first=n,this._last=n;else if(t){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let o=!1;return()=>{o||(o=!0,this._remove(n))}}shift(){if(this._first!==rn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==rn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==rn.Undefined&&e.next!==rn.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===rn.Undefined&&e.next===rn.Undefined?(this._first=rn.Undefined,this._last=rn.Undefined):e.next===rn.Undefined?(this._last=this._last.prev,this._last.next=rn.Undefined):e.prev===rn.Undefined&&(this._first=this._first.next,this._first.prev=rn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==rn.Undefined;)yield e.element,e=e.next}},C2,Xv="en",aD=!1,lD=!1,SS=!1,Sne=!1,QG=!1,jG=!1,oy,DS=Xv,ghe,Kd,cn=typeof self=="object"?self:typeof global=="object"?global:{},Tr;typeof cn.vscode<"u"&&typeof cn.vscode.process<"u"?Tr=cn.vscode.process:typeof process<"u"&&(Tr=process);var phe=typeof((C2=Tr?.versions)===null||C2===void 0?void 0:C2.electron)=="string",mhe=phe&&Tr?.type==="renderer";if(typeof navigator=="object"&&!mhe)Kd=navigator.userAgent,aD=Kd.indexOf("Windows")>=0,lD=Kd.indexOf("Macintosh")>=0,jG=(Kd.indexOf("Macintosh")>=0||Kd.indexOf("iPad")>=0||Kd.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,SS=Kd.indexOf("Linux")>=0,QG=!0,m({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),oy=Xv,DS=oy;else if(typeof Tr=="object"){aD=Tr.platform==="win32",lD=Tr.platform==="darwin",SS=Tr.platform==="linux",SS&&Tr.env.SNAP&&Tr.env.SNAP_REVISION,Tr.env.CI||Tr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,oy=Xv,DS=Xv;let i=Tr.env.VSCODE_NLS_CONFIG;if(i)try{let e=JSON.parse(i),t=e.availableLanguages["*"];oy=e.locale,DS=t||Xv,ghe=e._translationsConfigFile}catch{}Sne=!0}else console.error("Unable to resolve platform.");var Mn=aD,gt=lD,go=SS,Ga=Sne,gc=QG,fhe=QG&&typeof cn.importScripts=="function",jl=jG,Kl=Kd,_he=DS,vhe=typeof cn.postMessage=="function"&&!cn.importScripts,Dne=(()=>{if(vhe){let i=[];cn.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,o=i.length;n<o;n++){let r=i[n];if(r.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),r.callback();return}}});let e=0;return t=>{let n=++e;i.push({id:n,callback:t}),cn.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})(),is=lD||jG?2:aD?1:3,kX=!0,EX=!1;function KG(){if(!EX){EX=!0;let i=new Uint8Array(2);i[0]=1,i[1]=2,kX=new Uint16Array(i.buffer)[0]===512+1}return kX}var qG=!!(Kl&&Kl.indexOf("Chrome")>=0),xne=!!(Kl&&Kl.indexOf("Firefox")>=0),kne=!!(!qG&&Kl&&Kl.indexOf("Safari")>=0),Ene=!!(Kl&&Kl.indexOf("Edg/")>=0);Kl&&Kl.indexOf("Android")>=0;var Ahe=cn.performance&&typeof cn.performance.now=="function",sr=class i{constructor(e){this._highResolution=Ahe&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new i(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?cn.performance.now():Date.now()}},Z;(function(i){i.None=()=>J.None;function e(L){return(S,y=null,M)=>{let O=!1,H;return H=L(D=>{if(!O)return H?H.dispose():O=!0,S.call(y,D)},null,M),O&&H.dispose(),H}}i.once=e;function t(L,S,y){return l((M,O=null,H)=>L(D=>M.call(O,S(D)),null,H),y)}i.map=t;function n(L,S,y){return l((M,O=null,H)=>L(D=>{S(D),M.call(O,D)},null,H),y)}i.forEach=n;function o(L,S,y){return l((M,O=null,H)=>L(D=>S(D)&&M.call(O,D),null,H),y)}i.filter=o;function r(L){return L}i.signal=r;function s(...L){return(S,y=null,M)=>ss(...L.map(O=>O(H=>S.call(y,H),null,M)))}i.any=s;function a(L,S,y,M){let O=y;return t(L,H=>(O=S(O,H),O),M)}i.reduce=a;function l(L,S){let y,M={onFirstListenerAdd(){y=L(O.fire,O)},onLastListenerRemove(){y?.dispose()}},O=new Q(M);return S?.add(O),O.event}function c(L,S,y=100,M=!1,O,H){let D,K,oe,ie=0,ce={leakWarningThreshold:O,onFirstListenerAdd(){D=L(_e=>{ie++,K=S(K,_e),M&&!oe&&(se.fire(K),K=void 0),clearTimeout(oe),oe=setTimeout(()=>{let Ve=K;K=void 0,oe=void 0,(!M||ie>1)&&se.fire(Ve),ie=0},y)})},onLastListenerRemove(){D.dispose()}},se=new Q(ce);return H?.add(se),se.event}i.debounce=c;function d(L,S=(M,O)=>M===O,y){let M=!0,O;return o(L,H=>{let D=M||!S(H,O);return M=!1,O=H,D},y)}i.latch=d;function h(L,S,y){return[i.filter(L,S,y),i.filter(L,M=>!S(M),y)]}i.split=h;function u(L,S=!1,y=[]){let M=y.slice(),O=L(K=>{M?M.push(K):D.fire(K)}),H=()=>{M?.forEach(K=>D.fire(K)),M=null},D=new Q({onFirstListenerAdd(){O||(O=L(K=>D.fire(K)))},onFirstListenerDidAdd(){M&&(S?setTimeout(H):H())},onLastListenerRemove(){O&&O.dispose(),O=null}});return D.event}i.buffer=u;class g{constructor(S){this.event=S,this.disposables=new ne}map(S){return new g(t(this.event,S,this.disposables))}forEach(S){return new g(n(this.event,S,this.disposables))}filter(S){return new g(o(this.event,S,this.disposables))}reduce(S,y){return new g(a(this.event,S,y,this.disposables))}latch(){return new g(d(this.event,void 0,this.disposables))}debounce(S,y=100,M=!1,O){return new g(c(this.event,S,y,M,O,this.disposables))}on(S,y,M){return this.event(S,y,M)}once(S,y,M){return e(this.event)(S,y,M)}dispose(){this.disposables.dispose()}}function p(L){return new g(L)}i.chain=p;function f(L,S,y=M=>M){let M=(...K)=>D.fire(y(...K)),O=()=>L.on(S,M),H=()=>L.removeListener(S,M),D=new Q({onFirstListenerAdd:O,onLastListenerRemove:H});return D.event}i.fromNodeEventEmitter=f;function v(L,S,y=M=>M){let M=(...K)=>D.fire(y(...K)),O=()=>L.addEventListener(S,M),H=()=>L.removeEventListener(S,M),D=new Q({onFirstListenerAdd:O,onLastListenerRemove:H});return D.event}i.fromDOMEventEmitter=v;function b(L){return new Promise(S=>e(L)(S))}i.toPromise=b;function A(L,S){return S(void 0),L(y=>S(y))}i.runAndSubscribe=A;function w(L,S){let y=null;function M(H){y?.dispose(),y=new ne,S(H,y)}M(void 0);let O=L(H=>M(H));return ct(()=>{O.dispose(),y?.dispose()})}i.runAndSubscribeWithStore=w;class C{constructor(S,y){this.obs=S,this._counter=0,this._hasChanged=!1;let M={onFirstListenerAdd:()=>{S.addObserver(this)},onLastListenerRemove:()=>{S.removeObserver(this)}};this.emitter=new Q(M),y&&y.add(this.emitter)}beginUpdate(S){this._counter++}handleChange(S,y){this._hasChanged=!0}endUpdate(S){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}function k(L,S){return new C(L,S).emitter.event}i.fromObservable=k})(Z||(Z={}));var cD=class i{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${i._idPool++}`}start(e){this._stopWatch=new sr(!0),this._listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};cD._idPool=0;var GF=class i{constructor(e){this.value=e}static create(){var e;return new i((e=new Error().stack)!==null&&e!==void 0?e:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},YF=class{constructor(e,t,n){this.callback=e,this.callbackThis=t,this.stack=n,this.subscription=new qF}invoke(e){this.callback.call(this.callbackThis,e)}},Q=class{constructor(i){var e,t;this._disposed=!1,this._options=i,this._leakageMon=void 0,this._perfMon=!((e=this._options)===null||e===void 0)&&e._profName?new cD(this._options._profName):void 0,this._deliveryQueue=(t=this._options)===null||t===void 0?void 0:t.deliveryQueue}dispose(){var i,e,t,n;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(i=this._deliveryQueue)===null||i===void 0||i.clear(this),(t=(e=this._options)===null||e===void 0?void 0:e.onLastListenerRemove)===null||t===void 0||t.call(e),(n=this._leakageMon)===null||n===void 0||n.dispose())}get event(){return this._event||(this._event=(i,e,t)=>{var n,o,r;this._listeners||(this._listeners=new ko);let s=this._listeners.isEmpty();s&&!((n=this._options)===null||n===void 0)&&n.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);let a,l;this._leakageMon&&this._listeners.size>=30&&(l=GF.create(),a=this._leakageMon.check(l,this._listeners.size+1));let c=new YF(i,e,l),d=this._listeners.push(c);s&&!((o=this._options)===null||o===void 0)&&o.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),!((r=this._options)===null||r===void 0)&&r.onListenerDidAdd&&this._options.onListenerDidAdd(this,i,e);let h=c.subscription.set(()=>{a?.(),this._disposed||(d(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return t instanceof ne?t.add(h):Array.isArray(t)&&t.push(h),h}),this._event}fire(i){var e,t;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new JF);for(let n of this._listeners)this._deliveryQueue.push(this,n,i);(e=this._perfMon)===null||e===void 0||e.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(t=this._perfMon)===null||t===void 0||t.stop()}}},dD=class{constructor(){this._queue=new ko}get size(){return this._queue.size}push(e,t,n){this._queue.push(new XF(e,t,n))}clear(e){let t=new ko;for(let n of this._queue)n.emitter!==e&&t.push(n);this._queue=t}deliver(){for(;this._queue.size>0;){let e=this._queue.shift();try{e.listener.invoke(e.event)}catch(t){Ye(t)}}}},JF=class extends dD{clear(e){this._queue.clear()}},XF=class{constructor(e,t,n){this.emitter=e,this.listener=t,this.event=n}},Bh=class extends Q{constructor(e){super(e),this._isPaused=0,this._eventQueue=new ko,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}},hD=class extends Bh{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}},v_=class{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,o)=>e(r=>{let s=this.buffers[this.buffers.length-1];s?s.push(()=>t.call(n,r)):t.call(n,r)},void 0,o)}bufferEvents(e){let t=[];this.buffers.push(t);let n=e();return this.buffers.pop(),t.forEach(o=>o()),n}},uD=class{constructor(){this.listening=!1,this.inputEvent=Z.None,this.inputEventListener=J.None,this.emitter=new Q({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}},AA=class{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}};AA.INSTANCE=new AA;var ZF=class extends J{constructor(){super(),this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;(t=this._mediaQueryList)===null||t===void 0||t.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}},eB=class extends J{constructor(){super(),this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();let e=this._register(new ZF);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}},tB=class{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new eB),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}};function bA(i,e){typeof i=="string"&&(i=window.matchMedia(i)),i.addEventListener("change",e)}var A_=new tB;function Lne(){return AA.INSTANCE.getZoomFactor()}var Z0=navigator.userAgent,as=Z0.indexOf("Firefox")>=0,Ch=Z0.indexOf("AppleWebKit")>=0,$G=Z0.indexOf("Chrome")>=0,bd=!$G&&Z0.indexOf("Safari")>=0,GG=!$G&&!bd&&Ch,bhe=Z0.indexOf("Electron/")>=0,Ine=Z0.indexOf("Android")>=0,iB=!1;if(window.matchMedia){let i=window.matchMedia("(display-mode: standalone)");iB=i.matches,bA(i,({matches:e})=>{iB=e})}function YG(){return iB}var whe=Object.freeze(Object.defineProperty({__proto__:null,addMatchMediaChangeListener:bA,PixelRatio:A_,getZoomFactor:Lne,isFirefox:as,isWebKit:Ch,isChrome:$G,isSafari:bd,isWebkitWebView:GG,isElectron:bhe,isAndroid:Ine,isStandalone:YG},Symbol.toStringTag,{value:"Module"}));function Gg(i){return Array.isArray(i)}function Ji(i){return typeof i=="string"}function jn(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function Che(i){let e=Object.getPrototypeOf(Uint8Array);return typeof i=="object"&&i instanceof e}function Xa(i){return typeof i=="number"&&!isNaN(i)}function LX(i){return!!i&&typeof i[Symbol.iterator]=="function"}function Tne(i){return i===!0||i===!1}function jo(i){return typeof i>"u"}function yhe(i){return!Uo(i)}function Uo(i){return jo(i)||i===null}function ai(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Zv(i){if(Uo(i))throw new Error("Assertion Failed: argument is undefined or null");return i}function gD(i){return typeof i=="function"}function She(i,e){let t=Math.min(i.length,e.length);for(let n=0;n<t;n++)Mne(i[n],e[n])}function Mne(i,e){if(Ji(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(gD(e)){try{if(i instanceof e)return}catch{}if(!Uo(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Dhe(i){let e=[],t=Object.getPrototypeOf(i);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function JG(i){let e=[];for(let t of Dhe(i))typeof i[t]=="function"&&e.push(t);return e}function xhe(i,e){let t=o=>function(){let r=Array.prototype.slice.call(arguments,0);return e(o,r)},n={};for(let o of i)n[o]=t(o);return n}function tr(i){return i===null?void 0:i}function _M(i,e="Unreachable"){throw new Error(e)}var XG={clipboard:{writeText:Ga||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Ga||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Ga||YG()?0:navigator.keyboard||bd?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)},wA=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},xS=new wA,nB=new wA,oB=new wA,Nne=new Array(230),khe=Object.create(null),Ehe=Object.create(null),ZG=[];for(let i=0;i<=193;i++)ZG[i]=-1;(function(){let i="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[0,1,1,"Hyper",0,i,0,i,i,i],[0,1,2,"Super",0,i,0,i,i,i],[0,1,3,"Fn",0,i,0,i,i,i],[0,1,4,"FnLock",0,i,0,i,i,i],[0,1,5,"Suspend",0,i,0,i,i,i],[0,1,6,"Resume",0,i,0,i,i,i],[0,1,7,"Turbo",0,i,0,i,i,i],[0,1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[0,1,9,"WakeUp",0,i,0,i,i,i],[31,0,10,"KeyA",31,"A",65,"VK_A",i,i],[32,0,11,"KeyB",32,"B",66,"VK_B",i,i],[33,0,12,"KeyC",33,"C",67,"VK_C",i,i],[34,0,13,"KeyD",34,"D",68,"VK_D",i,i],[35,0,14,"KeyE",35,"E",69,"VK_E",i,i],[36,0,15,"KeyF",36,"F",70,"VK_F",i,i],[37,0,16,"KeyG",37,"G",71,"VK_G",i,i],[38,0,17,"KeyH",38,"H",72,"VK_H",i,i],[39,0,18,"KeyI",39,"I",73,"VK_I",i,i],[40,0,19,"KeyJ",40,"J",74,"VK_J",i,i],[41,0,20,"KeyK",41,"K",75,"VK_K",i,i],[42,0,21,"KeyL",42,"L",76,"VK_L",i,i],[43,0,22,"KeyM",43,"M",77,"VK_M",i,i],[44,0,23,"KeyN",44,"N",78,"VK_N",i,i],[45,0,24,"KeyO",45,"O",79,"VK_O",i,i],[46,0,25,"KeyP",46,"P",80,"VK_P",i,i],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[48,0,27,"KeyR",48,"R",82,"VK_R",i,i],[49,0,28,"KeyS",49,"S",83,"VK_S",i,i],[50,0,29,"KeyT",50,"T",84,"VK_T",i,i],[51,0,30,"KeyU",51,"U",85,"VK_U",i,i],[52,0,31,"KeyV",52,"V",86,"VK_V",i,i],[53,0,32,"KeyW",53,"W",87,"VK_W",i,i],[54,0,33,"KeyX",54,"X",88,"VK_X",i,i],[55,0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[22,0,36,"Digit1",22,"1",49,"VK_1",i,i],[23,0,37,"Digit2",23,"2",50,"VK_2",i,i],[24,0,38,"Digit3",24,"3",51,"VK_3",i,i],[25,0,39,"Digit4",25,"4",52,"VK_4",i,i],[26,0,40,"Digit5",26,"5",53,"VK_5",i,i],[27,0,41,"Digit6",27,"6",54,"VK_6",i,i],[28,0,42,"Digit7",28,"7",55,"VK_7",i,i],[29,0,43,"Digit8",29,"8",56,"VK_8",i,i],[30,0,44,"Digit9",30,"9",57,"VK_9",i,i],[21,0,45,"Digit0",21,"0",48,"VK_0",i,i],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[10,1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,i,0,i,i,i],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[59,1,64,"F1",59,"F1",112,"VK_F1",i,i],[60,1,65,"F2",60,"F2",113,"VK_F2",i,i],[61,1,66,"F3",61,"F3",114,"VK_F3",i,i],[62,1,67,"F4",62,"F4",115,"VK_F4",i,i],[63,1,68,"F5",63,"F5",116,"VK_F5",i,i],[64,1,69,"F6",64,"F6",117,"VK_F6",i,i],[65,1,70,"F7",65,"F7",118,"VK_F7",i,i],[66,1,71,"F8",66,"F8",119,"VK_F8",i,i],[67,1,72,"F9",67,"F9",120,"VK_F9",i,i],[68,1,73,"F10",68,"F10",121,"VK_F10",i,i],[69,1,74,"F11",69,"F11",122,"VK_F11",i,i],[70,1,75,"F12",70,"F12",123,"VK_F12",i,i],[0,1,76,"PrintScreen",0,i,0,i,i,i],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",i,i],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[14,1,80,"Home",14,"Home",36,"VK_HOME",i,i],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[13,1,83,"End",13,"End",35,"VK_END",i,i],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",i,i],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",i,i],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",i,i],[3,1,94,"NumpadEnter",3,i,0,i,i,i],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",i,i],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",i,i],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",i,i],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",i,i],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",i,i],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",i,i],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",i,i],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",i,i],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",i,i],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",i,i],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",i,i],[58,1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[0,1,108,"Power",0,i,0,i,i,i],[0,1,109,"NumpadEqual",0,i,0,i,i,i],[71,1,110,"F13",71,"F13",124,"VK_F13",i,i],[72,1,111,"F14",72,"F14",125,"VK_F14",i,i],[73,1,112,"F15",73,"F15",126,"VK_F15",i,i],[74,1,113,"F16",74,"F16",127,"VK_F16",i,i],[75,1,114,"F17",75,"F17",128,"VK_F17",i,i],[76,1,115,"F18",76,"F18",129,"VK_F18",i,i],[77,1,116,"F19",77,"F19",130,"VK_F19",i,i],[0,1,117,"F20",0,i,0,"VK_F20",i,i],[0,1,118,"F21",0,i,0,"VK_F21",i,i],[0,1,119,"F22",0,i,0,"VK_F22",i,i],[0,1,120,"F23",0,i,0,"VK_F23",i,i],[0,1,121,"F24",0,i,0,"VK_F24",i,i],[0,1,122,"Open",0,i,0,i,i,i],[0,1,123,"Help",0,i,0,i,i,i],[0,1,124,"Select",0,i,0,i,i,i],[0,1,125,"Again",0,i,0,i,i,i],[0,1,126,"Undo",0,i,0,i,i,i],[0,1,127,"Cut",0,i,0,i,i,i],[0,1,128,"Copy",0,i,0,i,i,i],[0,1,129,"Paste",0,i,0,i,i,i],[0,1,130,"Find",0,i,0,i,i,i],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",i,i],[0,1,136,"KanaMode",0,i,0,i,i,i],[0,0,137,"IntlYen",0,i,0,i,i,i],[0,1,138,"Convert",0,i,0,i,i,i],[0,1,139,"NonConvert",0,i,0,i,i,i],[0,1,140,"Lang1",0,i,0,i,i,i],[0,1,141,"Lang2",0,i,0,i,i,i],[0,1,142,"Lang3",0,i,0,i,i,i],[0,1,143,"Lang4",0,i,0,i,i,i],[0,1,144,"Lang5",0,i,0,i,i,i],[0,1,145,"Abort",0,i,0,i,i,i],[0,1,146,"Props",0,i,0,i,i,i],[0,1,147,"NumpadParenLeft",0,i,0,i,i,i],[0,1,148,"NumpadParenRight",0,i,0,i,i,i],[0,1,149,"NumpadBackspace",0,i,0,i,i,i],[0,1,150,"NumpadMemoryStore",0,i,0,i,i,i],[0,1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[0,1,152,"NumpadMemoryClear",0,i,0,i,i,i],[0,1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[0,1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",i,i],[0,1,156,"NumpadClearEntry",0,i,0,i,i,i],[5,1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[4,1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[6,1,0,i,6,"Alt",18,"VK_MENU",i,i],[57,1,0,i,57,"Meta",0,"VK_COMMAND",i,i],[5,1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[4,1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[6,1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[57,1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[5,1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[4,1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[6,1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[57,1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[0,1,165,"BrightnessUp",0,i,0,i,i,i],[0,1,166,"BrightnessDown",0,i,0,i,i,i],[0,1,167,"MediaPlay",0,i,0,i,i,i],[0,1,168,"MediaRecord",0,i,0,i,i,i],[0,1,169,"MediaFastForward",0,i,0,i,i,i],[0,1,170,"MediaRewind",0,i,0,i,i,i],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",i,i],[0,1,174,"Eject",0,i,0,i,i,i],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[0,1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[0,1,180,"SelectTask",0,i,0,i,i,i],[0,1,181,"LaunchScreenSaver",0,i,0,i,i,i],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[0,1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[0,1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[0,1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[0,1,189,"ZoomToggle",0,i,0,i,i,i],[0,1,190,"MailReply",0,i,0,i,i,i],[0,1,191,"MailForward",0,i,0,i,i,i],[0,1,192,"MailSend",0,i,0,i,i,i],[109,1,0,i,109,"KeyInComposition",229,i,i,i],[111,1,0,i,111,"ABNT_C2",194,"VK_ABNT_C2",i,i],[91,1,0,i,91,"OEM_8",223,"VK_OEM_8",i,i],[0,1,0,i,0,i,0,"VK_KANA",i,i],[0,1,0,i,0,i,0,"VK_HANGUL",i,i],[0,1,0,i,0,i,0,"VK_JUNJA",i,i],[0,1,0,i,0,i,0,"VK_FINAL",i,i],[0,1,0,i,0,i,0,"VK_HANJA",i,i],[0,1,0,i,0,i,0,"VK_KANJI",i,i],[0,1,0,i,0,i,0,"VK_CONVERT",i,i],[0,1,0,i,0,i,0,"VK_NONCONVERT",i,i],[0,1,0,i,0,i,0,"VK_ACCEPT",i,i],[0,1,0,i,0,i,0,"VK_MODECHANGE",i,i],[0,1,0,i,0,i,0,"VK_SELECT",i,i],[0,1,0,i,0,i,0,"VK_PRINT",i,i],[0,1,0,i,0,i,0,"VK_EXECUTE",i,i],[0,1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[0,1,0,i,0,i,0,"VK_HELP",i,i],[0,1,0,i,0,i,0,"VK_APPS",i,i],[0,1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[0,1,0,i,0,i,0,"VK_PACKET",i,i],[0,1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_ATTN",i,i],[0,1,0,i,0,i,0,"VK_CRSEL",i,i],[0,1,0,i,0,i,0,"VK_EXSEL",i,i],[0,1,0,i,0,i,0,"VK_EREOF",i,i],[0,1,0,i,0,i,0,"VK_PLAY",i,i],[0,1,0,i,0,i,0,"VK_ZOOM",i,i],[0,1,0,i,0,i,0,"VK_NONAME",i,i],[0,1,0,i,0,i,0,"VK_PA1",i,i],[0,1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]],t=[],n=[];for(let o of e){let[r,s,a,l,c,d,h,u,g,p]=o;if(n[a]||(n[a]=!0,khe[l]=a,Ehe[l.toLowerCase()]=a,s&&(ZG[a]=c)),!t[c]){if(t[c]=!0,!d)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);xS.define(c,d),nB.define(c,g||d),oB.define(c,p||g||d)}h&&(Nne[h]=c)}})();var cg;(function(i){function e(a){return xS.keyCodeToStr(a)}i.toString=e;function t(a){return xS.strToKeyCode(a)}i.fromString=t;function n(a){return nB.keyCodeToStr(a)}i.toUserSettingsUS=n;function o(a){return oB.keyCodeToStr(a)}i.toUserSettingsGeneral=o;function r(a){return nB.strToKeyCode(a)||oB.strToKeyCode(a)}i.fromUserSettings=r;function s(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return xS.keyCodeToStr(a)}i.toElectronAccelerator=s})(cg||(cg={}));function xn(i,e){let t=(e&65535)<<16>>>0;return(i|t)>>>0}function rB(i,e){if(i===0)return null;let t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new b_([y2(t,e),y2(n,e)]):new b_([y2(t,e)])}function y2(i,e){let t=!!(i&2048),n=!!(i&256),o=e===2?n:t,r=!!(i&1024),s=!!(i&512),a=e===2?t:n,l=i&255;return new ql(o,r,s,a,l)}var ql=class{constructor(e,t,n,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=o,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new b_([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},b_=class{constructor(e){if(e.length===0)throw Nt("parts");this.parts=e}},sB=class{constructor(e,t,n,o,r,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=o,this.keyLabel=r,this.keyAriaLabel=s}},aB=class{};function Lhe(i){if(i.charCode){let t=String.fromCharCode(i.charCode).toUpperCase();return cg.fromString(t)}let e=i.keyCode;if(e===3)return 7;if(as){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(gt&&e===224)return 57}else if(Ch&&(e===91||gt&&e===93||!gt&&e===92))return 57;return Nne[e]||0}var Ihe=gt?256:2048,The=512,Mhe=1024,Nhe=gt?2048:256,ni=class{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=Lhe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Ihe),this.altKey&&(t|=The),this.shiftKey&&(t|=Mhe),this.metaKey&&(t|=Nhe),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new ql(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},IX=!1,mv=null;function Rhe(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return IX=!0,null}catch{return IX=!0,null}return i.parent}var lB=class{static getSameOriginWindowChain(){if(!mv){mv=[];let e=window,t;do t=Rhe(e),t?mv.push({window:e,iframeElement:e.frameElement||null}):mv.push({window:e,iframeElement:null}),e=t;while(e)}return mv.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,o=0,r=this.getSameOriginWindowChain();for(let s of r){if(n+=s.window.scrollY,o+=s.window.scrollX,s.window===t||!s.iframeElement)break;let a=s.iframeElement.getBoundingClientRect();n+=a.top,o+=a.left}return{top:n,left:o}}},sa=class{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=lB.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},Ph=class{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let o=e,r=e;if(typeof o.wheelDeltaY<"u")this.deltaY=o.wheelDeltaY/120;else if(typeof r.VERTICAL_AXIS<"u"&&r.axis===r.VERTICAL_AXIS)this.deltaY=-r.detail/3;else if(e.type==="wheel"){let s=e;s.deltaMode===s.DOM_DELTA_LINE?as&&!gt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")bd&&Mn?this.deltaX=-(o.wheelDeltaX/120):this.deltaX=o.wheelDeltaX/120;else if(typeof r.HORIZONTAL_AXIS<"u"&&r.axis===r.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let s=e;s.deltaMode===s.DOM_DELTA_LINE?as&&!gt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}};function Fhe(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var Bhe=Object.hasOwnProperty,TX=Object.setPrototypeOf,Phe=Object.isFrozen,Ohe=Object.getPrototypeOf,Hhe=Object.getOwnPropertyDescriptor,Hr=Object.freeze,wd=Object.seal,Whe=Object.create,Rne=typeof Reflect<"u"&&Reflect,pD=Rne.apply,cB=Rne.construct;pD||(pD=function(i,e,t){return i.apply(e,t)});Hr||(Hr=function(i){return i});wd||(wd=function(i){return i});cB||(cB=function(i,e){return new(Function.prototype.bind.apply(i,[null].concat(Fhe(e))))});var zhe=Za(Array.prototype.forEach),MX=Za(Array.prototype.pop),fv=Za(Array.prototype.push),Ou=Za(String.prototype.toLowerCase),NX=Za(String.prototype.match),Bd=Za(String.prototype.replace),Vhe=Za(String.prototype.indexOf),Uhe=Za(String.prototype.trim),Ac=Za(RegExp.prototype.test),RX=Qhe(TypeError);function Za(i){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return pD(i,e,n)}}function Qhe(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return cB(i,t)}}function si(i,e){TX&&TX(i,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var o=Ou(n);o!==n&&(Phe(e)||(e[t]=o),n=o)}i[n]=!0}return i}function xu(i){var e=Whe(null),t=void 0;for(t in i)pD(Bhe,i,[t])&&(e[t]=i[t]);return e}function ry(i,e){for(;i!==null;){var t=Hhe(i,e);if(t){if(t.get)return Za(t.get);if(typeof t.value=="function")return Za(t.value)}i=Ohe(i)}function n(o){return console.warn("fallback value for",o),null}return n}var FX=Hr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S2=Hr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D2=Hr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jhe=Hr(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),x2=Hr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Khe=Hr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),BX=Hr(["#text"]),PX=Hr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),k2=Hr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),OX=Hr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sy=Hr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qhe=wd(/\{\{[\s\S]*|[\s\S]*\}\}/gm),$he=wd(/<%[\s\S]*|[\s\S]*%>/gm),Ghe=wd(/^data-[\-\w.\u00B7-\uFFFF]/),Yhe=wd(/^aria-[\-\w]+$/),Jhe=wd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Xhe=wd(/^(?:\w+script|data):/i),Zhe=wd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function pl(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var eue=function(){return typeof window>"u"?null:window},tue=function(i,e){if((typeof i>"u"?"undefined":e1(i))!=="object"||typeof i.createPolicy!="function")return null;var t=null,n="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(n)&&(t=e.currentScript.getAttribute(n));var o="dompurify"+(t?"#"+t:"");try{return i.createPolicy(o,{createHTML:function(r){return r}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Fne(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eue(),e=function(U){return Fne(U)};if(e.version="2.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;var t=i.document,n=i.document,o=i.DocumentFragment,r=i.HTMLTemplateElement,s=i.Node,a=i.Element,l=i.NodeFilter,c=i.NamedNodeMap,d=c===void 0?i.NamedNodeMap||i.MozNamedAttrMap:c,h=i.Text,u=i.Comment,g=i.DOMParser,p=i.trustedTypes,f=a.prototype,v=ry(f,"cloneNode"),b=ry(f,"nextSibling"),A=ry(f,"childNodes"),w=ry(f,"parentNode");if(typeof r=="function"){var C=n.createElement("template");C.content&&C.content.ownerDocument&&(n=C.content.ownerDocument)}var k=tue(p,t),L=k&&$e?k.createHTML(""):"",S=n,y=S.implementation,M=S.createNodeIterator,O=S.createDocumentFragment,H=S.getElementsByTagName,D=t.importNode,K={};try{K=xu(n).documentMode?n.documentMode:{}}catch{}var oe={};e.isSupported=typeof w=="function"&&y&&typeof y.createHTMLDocument<"u"&&K!==9;var ie=qhe,ce=$he,se=Ghe,_e=Yhe,Ve=Xhe,Qe=Zhe,pt=Jhe,ke=null,xe=si({},[].concat(pl(FX),pl(S2),pl(D2),pl(x2),pl(BX))),Et=null,Ri=si({},[].concat(pl(PX),pl(k2),pl(OX),pl(sy))),ci=null,Dt=null,Fi=!0,Kt=!0,Ei=!1,Ue=!1,Yn=!1,ht=!1,Pn=!1,oo=!1,fn=!1,Bo=!0,$e=!1,X=!0,W=!0,R=!1,I={},T=null,F=si({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),V=null,ee=si({},["audio","video","img","source","image","track"]),Ce=null,ve=si({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Me="http://www.w3.org/1998/Math/MathML",at="http://www.w3.org/2000/svg",Je="http://www.w3.org/1999/xhtml",Ut=Je,Lt=!1,Pe=null,fi=n.createElement("form"),_i=function(U){Pe&&Pe===U||((!U||(typeof U>"u"?"undefined":e1(U))!=="object")&&(U={}),U=xu(U),ke="ALLOWED_TAGS"in U?si({},U.ALLOWED_TAGS):xe,Et="ALLOWED_ATTR"in U?si({},U.ALLOWED_ATTR):Ri,Ce="ADD_URI_SAFE_ATTR"in U?si(xu(ve),U.ADD_URI_SAFE_ATTR):ve,V="ADD_DATA_URI_TAGS"in U?si(xu(ee),U.ADD_DATA_URI_TAGS):ee,T="FORBID_CONTENTS"in U?si({},U.FORBID_CONTENTS):F,ci="FORBID_TAGS"in U?si({},U.FORBID_TAGS):{},Dt="FORBID_ATTR"in U?si({},U.FORBID_ATTR):{},I="USE_PROFILES"in U?U.USE_PROFILES:!1,Fi=U.ALLOW_ARIA_ATTR!==!1,Kt=U.ALLOW_DATA_ATTR!==!1,Ei=U.ALLOW_UNKNOWN_PROTOCOLS||!1,Ue=U.SAFE_FOR_TEMPLATES||!1,Yn=U.WHOLE_DOCUMENT||!1,oo=U.RETURN_DOM||!1,fn=U.RETURN_DOM_FRAGMENT||!1,Bo=U.RETURN_DOM_IMPORT!==!1,$e=U.RETURN_TRUSTED_TYPE||!1,Pn=U.FORCE_BODY||!1,X=U.SANITIZE_DOM!==!1,W=U.KEEP_CONTENT!==!1,R=U.IN_PLACE||!1,pt=U.ALLOWED_URI_REGEXP||pt,Ut=U.NAMESPACE||Je,Ue&&(Kt=!1),fn&&(oo=!0),I&&(ke=si({},[].concat(pl(BX))),Et=[],I.html===!0&&(si(ke,FX),si(Et,PX)),I.svg===!0&&(si(ke,S2),si(Et,k2),si(Et,sy)),I.svgFilters===!0&&(si(ke,D2),si(Et,k2),si(Et,sy)),I.mathMl===!0&&(si(ke,x2),si(Et,OX),si(Et,sy))),U.ADD_TAGS&&(ke===xe&&(ke=xu(ke)),si(ke,U.ADD_TAGS)),U.ADD_ATTR&&(Et===Ri&&(Et=xu(Et)),si(Et,U.ADD_ATTR)),U.ADD_URI_SAFE_ATTR&&si(Ce,U.ADD_URI_SAFE_ATTR),U.FORBID_CONTENTS&&(T===F&&(T=xu(T)),si(T,U.FORBID_CONTENTS)),W&&(ke["#text"]=!0),Yn&&si(ke,["html","head","body"]),ke.table&&(si(ke,["tbody"]),delete ci.tbody),Hr&&Hr(U),Pe=U)},Jn=si({},["mi","mo","mn","ms","mtext"]),N=si({},["foreignobject","desc","title","annotation-xml"]),de=si({},S2);si(de,D2),si(de,jhe);var He=si({},x2);si(He,Khe);var ei=function(U){var he=w(U);(!he||!he.tagName)&&(he={namespaceURI:Je,tagName:"template"});var Ae=Ou(U.tagName),ut=Ou(he.tagName);if(U.namespaceURI===at)return he.namespaceURI===Je?Ae==="svg":he.namespaceURI===Me?Ae==="svg"&&(ut==="annotation-xml"||Jn[ut]):!!de[Ae];if(U.namespaceURI===Me)return he.namespaceURI===Je?Ae==="math":he.namespaceURI===at?Ae==="math"&&N[ut]:!!He[Ae];if(U.namespaceURI===Je){if(he.namespaceURI===at&&!N[ut]||he.namespaceURI===Me&&!Jn[ut])return!1;var bt=si({},["title","style","font","a","script"]);return!He[Ae]&&(bt[Ae]||!de[Ae])}return!1},It=function(U){fv(e.removed,{element:U});try{U.parentNode.removeChild(U)}catch{try{U.outerHTML=L}catch{U.remove()}}},Li=function(U,he){try{fv(e.removed,{attribute:he.getAttributeNode(U),from:he})}catch{fv(e.removed,{attribute:null,from:he})}if(he.removeAttribute(U),U==="is"&&!Et[U])if(oo||fn)try{It(he)}catch{}else try{he.setAttribute(U,"")}catch{}},fo=function(U){var he=void 0,Ae=void 0;if(Pn)U="<remove></remove>"+U;else{var ut=NX(U,/^[\r\n\t ]+/);Ae=ut&&ut[0]}var bt=k?k.createHTML(U):U;if(Ut===Je)try{he=new g().parseFromString(bt,"text/html")}catch{}if(!he||!he.documentElement){he=y.createDocument(Ut,"template",null);try{he.documentElement.innerHTML=Lt?"":bt}catch{}}var Jt=he.body||he.documentElement;return U&&Ae&&Jt.insertBefore(n.createTextNode(Ae),Jt.childNodes[0]||null),Ut===Je?H.call(he,Yn?"html":"body")[0]:Yn?he.documentElement:Jt},qo=function(U){return M.call(U.ownerDocument||U,U,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},La=function(U){return U instanceof h||U instanceof u?!1:typeof U.nodeName!="string"||typeof U.textContent!="string"||typeof U.removeChild!="function"||!(U.attributes instanceof d)||typeof U.removeAttribute!="function"||typeof U.setAttribute!="function"||typeof U.namespaceURI!="string"||typeof U.insertBefore!="function"},cr=function(U){return(typeof s>"u"?"undefined":e1(s))==="object"?U instanceof s:U&&(typeof U>"u"?"undefined":e1(U))==="object"&&typeof U.nodeType=="number"&&typeof U.nodeName=="string"},dr=function(U,he,Ae){oe[U]&&zhe(oe[U],function(ut){ut.call(e,he,Ae,Pe)})},qs=function(U){var he=void 0;if(dr("beforeSanitizeElements",U,null),La(U)||NX(U.nodeName,/[\u0080-\uFFFF]/))return It(U),!0;var Ae=Ou(U.nodeName);if(dr("uponSanitizeElement",U,{tagName:Ae,allowedTags:ke}),!cr(U.firstElementChild)&&(!cr(U.content)||!cr(U.content.firstElementChild))&&Ac(/<[/\w]/g,U.innerHTML)&&Ac(/<[/\w]/g,U.textContent)||Ae==="select"&&Ac(/<template/i,U.innerHTML))return It(U),!0;if(!ke[Ae]||ci[Ae]){if(W&&!T[Ae]){var ut=w(U)||U.parentNode,bt=A(U)||U.childNodes;if(bt&&ut)for(var Jt=bt.length,_t=Jt-1;_t>=0;--_t)ut.insertBefore(v(bt[_t],!0),b(U))}return It(U),!0}return U instanceof a&&!ei(U)||(Ae==="noscript"||Ae==="noembed")&&Ac(/<\/no(script|embed)/i,U.innerHTML)?(It(U),!0):(Ue&&U.nodeType===3&&(he=U.textContent,he=Bd(he,ie," "),he=Bd(he,ce," "),U.textContent!==he&&(fv(e.removed,{element:U.cloneNode()}),U.textContent=he)),dr("afterSanitizeElements",U,null),!1)},vc=function(U,he,Ae){return!(X&&(he==="id"||he==="name")&&(Ae in n||Ae in fi)||!(Kt&&!Dt[he]&&Ac(se,he))&&!(Fi&&Ac(_e,he))&&(!Et[he]||Dt[he]||!Ce[he]&&!Ac(pt,Bd(Ae,Qe,""))&&!((he==="src"||he==="xlink:href"||he==="href")&&U!=="script"&&Vhe(Ae,"data:")===0&&V[U])&&!(Ei&&!Ac(Ve,Bd(Ae,Qe,"")))&&Ae))},$s=function(U){var he=void 0,Ae=void 0,ut=void 0,bt=void 0;dr("beforeSanitizeAttributes",U,null);var Jt=U.attributes;if(Jt){var _t={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Et};for(bt=Jt.length;bt--;){he=Jt[bt];var ui=he,ri=ui.name,x=ui.namespaceURI;if(Ae=Uhe(he.value),ut=Ou(ri),_t.attrName=ut,_t.attrValue=Ae,_t.keepAttr=!0,_t.forceKeepAttr=void 0,dr("uponSanitizeAttribute",U,_t),Ae=_t.attrValue,!_t.forceKeepAttr&&(Li(ri,U),!!_t.keepAttr)){if(Ac(/\/>/i,Ae)){Li(ri,U);continue}Ue&&(Ae=Bd(Ae,ie," "),Ae=Bd(Ae,ce," "));var Y=U.nodeName.toLowerCase();if(vc(Y,ut,Ae))try{x?U.setAttributeNS(x,ri,Ae):U.setAttribute(ri,Ae),MX(e.removed)}catch{}}}dr("afterSanitizeAttributes",U,null)}},G=function U(he){var Ae=void 0,ut=qo(he);for(dr("beforeSanitizeShadowDOM",he,null);Ae=ut.nextNode();)dr("uponSanitizeShadowNode",Ae,null),!qs(Ae)&&(Ae.content instanceof o&&U(Ae.content),$s(Ae));dr("afterSanitizeShadowDOM",he,null)};return e.sanitize=function(U,he){var Ae=void 0,ut=void 0,bt=void 0,Jt=void 0,_t=void 0;if(Lt=!U,Lt&&(U="<!-->"),typeof U!="string"&&!cr(U)){if(typeof U.toString!="function")throw RX("toString is not a function");if(U=U.toString(),typeof U!="string")throw RX("dirty is not a string, aborting")}if(!e.isSupported){if(e1(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof U=="string")return i.toStaticHTML(U);if(cr(U))return i.toStaticHTML(U.outerHTML)}return U}if(ht||_i(he),e.removed=[],typeof U=="string"&&(R=!1),!R)if(U instanceof s)Ae=fo("<!---->"),ut=Ae.ownerDocument.importNode(U,!0),ut.nodeType===1&&ut.nodeName==="BODY"||ut.nodeName==="HTML"?Ae=ut:Ae.appendChild(ut);else{if(!oo&&!Ue&&!Yn&&U.indexOf("<")===-1)return k&&$e?k.createHTML(U):U;if(Ae=fo(U),!Ae)return oo?null:L}Ae&&Pn&&It(Ae.firstChild);for(var ui=qo(R?U:Ae);bt=ui.nextNode();)bt.nodeType===3&&bt===Jt||qs(bt)||(bt.content instanceof o&&G(bt.content),$s(bt),Jt=bt);if(Jt=null,R)return U;if(oo){if(fn)for(_t=O.call(Ae.ownerDocument);Ae.firstChild;)_t.appendChild(Ae.firstChild);else _t=Ae;return Bo&&(_t=D.call(t,_t,!0)),_t}var ri=Yn?Ae.outerHTML:Ae.innerHTML;return Ue&&(ri=Bd(ri,ie," "),ri=Bd(ri,ce," ")),k&&$e?k.createHTML(ri):ri},e.setConfig=function(U){_i(U),ht=!0},e.clearConfig=function(){Pe=null,ht=!1},e.isValidAttribute=function(U,he,Ae){Pe||_i({});var ut=Ou(U),bt=Ou(he);return vc(ut,bt,Ae)},e.addHook=function(U,he){typeof he=="function"&&(oe[U]=oe[U]||[],fv(oe[U],he))},e.removeHook=function(U){oe[U]&&MX(oe[U])},e.removeHooks=function(U){oe[U]&&(oe[U]=[])},e.removeAllHooks=function(){oe={}},e}var pc=Fne();pc.version;pc.isSupported;var iue=pc.sanitize;pc.setConfig;pc.clearConfig;pc.isValidAttribute;var Bne=pc.addHook,Pne=pc.removeHook;pc.removeHooks;pc.removeAllHooks;var Pf;if(typeof cn.vscode<"u"&&typeof cn.vscode.process<"u"){let i=cn.vscode.process;Pf={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"?Pf={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Pf={get platform(){return Mn?"win32":gt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var dB=Pf.cwd,nue=Pf.env,Jp=Pf.platform,oue=65,rue=97,sue=90,aue=122,yh=46,Oo=47,Gr=92,Pd=58,lue=63,mD=class extends Error{constructor(e,t,n){let o;typeof t=="string"&&t.indexOf("not ")===0?(o="must not be",t=t.replace(/^not /,"")):o="must be";let r=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${r} ${o} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function zn(i,e){if(typeof i!="string")throw new mD(e,"string",i)}function Gt(i){return i===Oo||i===Gr}function hB(i){return i===Oo}function Od(i){return i>=oue&&i<=sue||i>=rue&&i<=aue}function fD(i,e,t,n){let o="",r=0,s=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=Oo}if(n(l)){if(!(s===c-1||a===1))if(a===2){if(o.length<2||r!==2||o.charCodeAt(o.length-1)!==yh||o.charCodeAt(o.length-2)!==yh){if(o.length>2){let d=o.lastIndexOf(t);d===-1?(o="",r=0):(o=o.slice(0,d),r=o.length-1-o.lastIndexOf(t)),s=c,a=0;continue}else if(o.length!==0){o="",r=0,s=c,a=0;continue}}e&&(o+=o.length>0?`${t}..`:"..",r=2)}else o.length>0?o+=`${t}${i.slice(s+1,c)}`:o=i.slice(s+1,c),r=c-s-1;s=c,a=0}else l===yh&&a!==-1?++a:a=-1}return o}function One(i,e){if(e===null||typeof e!="object")throw new mD("pathObject","Object",e);let t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}var Br={resolve(...i){let e="",t="",n=!1;for(let o=i.length-1;o>=-1;o--){let r;if(o>=0){if(r=i[o],zn(r,"path"),r.length===0)continue}else e.length===0?r=dB():(r=nue[`=${e}`]||dB(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===Gr)&&(r=`${e}\\`));let s=r.length,a=0,l="",c=!1,d=r.charCodeAt(0);if(s===1)Gt(d)&&(a=1,c=!0);else if(Gt(d))if(c=!0,Gt(r.charCodeAt(1))){let h=2,u=h;for(;h<s&&!Gt(r.charCodeAt(h));)h++;if(h<s&&h!==u){let g=r.slice(u,h);for(u=h;h<s&&Gt(r.charCodeAt(h));)h++;if(h<s&&h!==u){for(u=h;h<s&&!Gt(r.charCodeAt(h));)h++;(h===s||h!==u)&&(l=`\\\\${g}\\${r.slice(u,h)}`,a=h)}}}else a=1;else Od(d)&&r.charCodeAt(1)===Pd&&(l=r.slice(0,2),a=2,s>2&&Gt(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=fD(t,!n,"\\",Gt),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){zn(i,"path");let e=i.length;if(e===0)return".";let t=0,n,o=!1,r=i.charCodeAt(0);if(e===1)return hB(r)?"\\":i;if(Gt(r))if(o=!0,Gt(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Gt(i.charCodeAt(a));)a++;if(a<e&&a!==l){let c=i.slice(l,a);for(l=a;a<e&&Gt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Gt(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else Od(r)&&i.charCodeAt(1)===Pd&&(n=i.slice(0,2),t=2,e>2&&Gt(i.charCodeAt(2))&&(o=!0,t=3));let s=t<e?fD(i.slice(t),!o,"\\",Gt):"";return s.length===0&&!o&&(s="."),s.length>0&&Gt(i.charCodeAt(e-1))&&(s+="\\"),n===void 0?o?`\\${s}`:s:o?`${n}\\${s}`:`${n}${s}`},isAbsolute(i){zn(i,"path");let e=i.length;if(e===0)return!1;let t=i.charCodeAt(0);return Gt(t)||e>2&&Od(t)&&i.charCodeAt(1)===Pd&&Gt(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let r=0;r<i.length;++r){let s=i[r];zn(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,o=0;if(typeof t=="string"&&Gt(t.charCodeAt(0))){++o;let r=t.length;r>1&&Gt(t.charCodeAt(1))&&(++o,r>2&&(Gt(t.charCodeAt(2))?++o:n=!1))}if(n){for(;o<e.length&&Gt(e.charCodeAt(o));)o++;o>=2&&(e=`\\${e.slice(o)}`)}return Br.normalize(e)},relative(i,e){if(zn(i,"from"),zn(e,"to"),i===e)return"";let t=Br.resolve(i),n=Br.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let o=0;for(;o<i.length&&i.charCodeAt(o)===Gr;)o++;let r=i.length;for(;r-1>o&&i.charCodeAt(r-1)===Gr;)r--;let s=r-o,a=0;for(;a<e.length&&e.charCodeAt(a)===Gr;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Gr;)l--;let c=l-a,d=s<c?s:c,h=-1,u=0;for(;u<d;u++){let p=i.charCodeAt(o+u);if(p!==e.charCodeAt(a+u))break;p===Gr&&(h=u)}if(u!==d){if(h===-1)return n}else{if(c>d){if(e.charCodeAt(a+u)===Gr)return n.slice(a+u+1);if(u===2)return n.slice(a+u)}s>d&&(i.charCodeAt(o+u)===Gr?h=u:u===2&&(h=3)),h===-1&&(h=0)}let g="";for(u=o+h+1;u<=r;++u)(u===r||i.charCodeAt(u)===Gr)&&(g+=g.length===0?"..":"\\..");return a+=h,g.length>0?`${g}${n.slice(a,l)}`:(n.charCodeAt(a)===Gr&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string")return i;if(i.length===0)return"";let e=Br.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===Gr){if(e.charCodeAt(1)===Gr){let t=e.charCodeAt(2);if(t!==lue&&t!==yh)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Od(e.charCodeAt(0))&&e.charCodeAt(1)===Pd&&e.charCodeAt(2)===Gr)return`\\\\?\\${e}`;return i},dirname(i){zn(i,"path");let e=i.length;if(e===0)return".";let t=-1,n=0,o=i.charCodeAt(0);if(e===1)return Gt(o)?i:".";if(Gt(o)){if(t=n=1,Gt(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Gt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Gt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Gt(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else Od(o)&&i.charCodeAt(1)===Pd&&(t=e>2&&Gt(i.charCodeAt(2))?3:2,n=t);let r=-1,s=!0;for(let a=e-1;a>=n;--a)if(Gt(i.charCodeAt(a))){if(!s){r=a;break}}else s=!1;if(r===-1){if(t===-1)return".";r=t}return i.slice(0,r)},basename(i,e){e!==void 0&&zn(e,"ext"),zn(i,"path");let t=0,n=-1,o=!0,r;if(i.length>=2&&Od(i.charCodeAt(0))&&i.charCodeAt(1)===Pd&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let s=e.length-1,a=-1;for(r=i.length-1;r>=t;--r){let l=i.charCodeAt(r);if(Gt(l)){if(!o){t=r+1;break}}else a===-1&&(o=!1,a=r+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=r):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=t;--r)if(Gt(i.charCodeAt(r))){if(!o){t=r+1;break}}else n===-1&&(o=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){zn(i,"path");let e=0,t=-1,n=0,o=-1,r=!0,s=0;i.length>=2&&i.charCodeAt(1)===Pd&&Od(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){let l=i.charCodeAt(a);if(Gt(l)){if(!r){n=a+1;break}continue}o===-1&&(r=!1,o=a+1),l===yh?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||o===-1||s===0||s===1&&t===o-1&&t===n+1?"":i.slice(t,o)},format:One.bind(null,"\\"),parse(i){zn(i,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;let t=i.length,n=0,o=i.charCodeAt(0);if(t===1)return Gt(o)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(Gt(o)){if(n=1,Gt(i.charCodeAt(1))){let h=2,u=h;for(;h<t&&!Gt(i.charCodeAt(h));)h++;if(h<t&&h!==u){for(u=h;h<t&&Gt(i.charCodeAt(h));)h++;if(h<t&&h!==u){for(u=h;h<t&&!Gt(i.charCodeAt(h));)h++;h===t?n=h:h!==u&&(n=h+1)}}}}else if(Od(o)&&i.charCodeAt(1)===Pd){if(t<=2)return e.root=e.dir=i,e;if(n=2,Gt(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let r=-1,s=n,a=-1,l=!0,c=i.length-1,d=0;for(;c>=n;--c){if(o=i.charCodeAt(c),Gt(o)){if(!l){s=c+1;break}continue}a===-1&&(l=!1,a=c+1),o===yh?r===-1?r=c:d!==1&&(d=1):r!==-1&&(d=-1)}return a!==-1&&(r===-1||d===0||d===1&&r===a-1&&r===s+1?e.base=e.name=i.slice(s,a):(e.name=i.slice(s,r),e.base=i.slice(s,a),e.ext=i.slice(r,a))),s>0&&s!==n?e.dir=i.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Mi={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){let o=n>=0?i[n]:dB();zn(o,"path"),o.length!==0&&(e=`${o}/${e}`,t=o.charCodeAt(0)===Oo)}return e=fD(e,!t,"/",hB),t?`/${e}`:e.length>0?e:"."},normalize(i){if(zn(i,"path"),i.length===0)return".";let e=i.charCodeAt(0)===Oo,t=i.charCodeAt(i.length-1)===Oo;return i=fD(i,!e,"/",hB),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return zn(i,"path"),i.length>0&&i.charCodeAt(0)===Oo},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){let n=i[t];zn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Mi.normalize(e)},relative(i,e){if(zn(i,"from"),zn(e,"to"),i===e||(i=Mi.resolve(i),e=Mi.resolve(e),i===e))return"";let t=1,n=i.length,o=n-t,r=1,s=e.length-r,a=o<s?o:s,l=-1,c=0;for(;c<a;c++){let h=i.charCodeAt(t+c);if(h!==e.charCodeAt(r+c))break;h===Oo&&(l=c)}if(c===a)if(s>a){if(e.charCodeAt(r+c)===Oo)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else o>a&&(i.charCodeAt(t+c)===Oo?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===Oo)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(r+l)}`},toNamespacedPath(i){return i},dirname(i){if(zn(i,"path"),i.length===0)return".";let e=i.charCodeAt(0)===Oo,t=-1,n=!0;for(let o=i.length-1;o>=1;--o)if(i.charCodeAt(o)===Oo){if(!n){t=o;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&zn(e,"ext"),zn(i,"path");let t=0,n=-1,o=!0,r;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let s=e.length-1,a=-1;for(r=i.length-1;r>=0;--r){let l=i.charCodeAt(r);if(l===Oo){if(!o){t=r+1;break}}else a===-1&&(o=!1,a=r+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=r):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===Oo){if(!o){t=r+1;break}}else n===-1&&(o=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){zn(i,"path");let e=-1,t=0,n=-1,o=!0,r=0;for(let s=i.length-1;s>=0;--s){let a=i.charCodeAt(s);if(a===Oo){if(!o){t=s+1;break}continue}n===-1&&(o=!1,n=s+1),a===yh?e===-1?e=s:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:One.bind(null,"/"),parse(i){zn(i,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;let t=i.charCodeAt(0)===Oo,n;t?(e.root="/",n=1):n=0;let o=-1,r=0,s=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){let d=i.charCodeAt(l);if(d===Oo){if(!a){r=l+1;break}continue}s===-1&&(a=!1,s=l+1),d===yh?o===-1?o=l:c!==1&&(c=1):o!==-1&&(c=-1)}if(s!==-1){let d=r===0&&t?1:r;o===-1||c===0||c===1&&o===s-1&&o===r+1?e.base=e.name=i.slice(d,s):(e.name=i.slice(d,o),e.base=i.slice(d,s),e.ext=i.slice(o,s))}return r>0?e.dir=i.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Mi.win32=Br.win32=Br;Mi.posix=Br.posix=Mi;var eY=Jp==="win32"?Br.normalize:Mi.normalize,Hne=Jp==="win32"?Br.resolve:Mi.resolve,Wne=Jp==="win32"?Br.relative:Mi.relative,tY=Jp==="win32"?Br.dirname:Mi.dirname,Dg=Jp==="win32"?Br.basename:Mi.basename,cue=Jp==="win32"?Br.extname:Mi.extname,Ss=Jp==="win32"?Br.sep:Mi.sep,due=/^\w[\w\d+.-]*$/,hue=/^\//,uue=/^\/\//;function HX(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!due.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!hue.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(uue.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function gue(i,e){return!i&&!e?"file":i}function pue(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==Wa&&(e=Wa+e):e=Wa;break}return e}var on="",Wa="/",mue=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,$=class{constructor(i,e,t,n,o,r=!1){typeof i=="object"?(this.scheme=i.scheme||on,this.authority=i.authority||on,this.path=i.path||on,this.query=i.query||on,this.fragment=i.fragment||on):(this.scheme=gue(i,r),this.authority=e||on,this.path=pue(this.scheme,t||on),this.query=n||on,this.fragment=o||on,HX(this,r))}static isUri(i){return i instanceof $?!0:i?typeof i.authority=="string"&&typeof i.fragment=="string"&&typeof i.path=="string"&&typeof i.query=="string"&&typeof i.scheme=="string"&&typeof i.fsPath=="string"&&typeof i.with=="function"&&typeof i.toString=="function":!1}get fsPath(){return CA(this,!1)}with(i){if(!i)return this;let{scheme:e,authority:t,path:n,query:o,fragment:r}=i;return e===void 0?e=this.scheme:e===null&&(e=on),t===void 0?t=this.authority:t===null&&(t=on),n===void 0?n=this.path:n===null&&(n=on),o===void 0?o=this.query:o===null&&(o=on),r===void 0?r=this.fragment:r===null&&(r=on),e===this.scheme&&t===this.authority&&n===this.path&&o===this.query&&r===this.fragment?this:new Am(e,t,n,o,r)}static parse(i,e=!1){let t=mue.exec(i);return t?new Am(t[2]||on,ay(t[4]||on),ay(t[5]||on),ay(t[7]||on),ay(t[9]||on),e):new Am(on,on,on,on,on)}static file(i){let e=on;if(Mn&&(i=i.replace(/\\/g,Wa)),i[0]===Wa&&i[1]===Wa){let t=i.indexOf(Wa,2);t===-1?(e=i.substring(2),i=Wa):(e=i.substring(2,t),i=i.substring(t)||Wa)}return new Am("file",e,i,on,on)}static from(i){let e=new Am(i.scheme,i.authority,i.path,i.query,i.fragment);return HX(e,!0),e}static joinPath(i,...e){if(!i.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let t;return Mn&&i.scheme==="file"?t=$.file(Br.join(CA(i,!0),...e)).path:t=Mi.join(i.path,...e),i.with({path:t})}toString(i=!1){return uB(this,i)}toJSON(){return this}static revive(i){if(i){if(i instanceof $)return i;{let e=new Am(i);return e._formatted=i.external,e._fsPath=i._sep===zne?i.fsPath:null,e}}else return i}},zne=Mn?1:void 0,Am=class extends ${constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=CA(this,!1)),this._fsPath}toString(i=!1){return i?uB(this,!0):(this._formatted||(this._formatted=uB(this,!1)),this._formatted)}toJSON(){let i={$mid:1};return this._fsPath&&(i.fsPath=this._fsPath,i._sep=zne),this._formatted&&(i.external=this._formatted),this.path&&(i.path=this.path),this.scheme&&(i.scheme=this.scheme),this.authority&&(i.authority=this.authority),this.query&&(i.query=this.query),this.fragment&&(i.fragment=this.fragment),i}},Vne={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function WX(i,e){let t,n=-1;for(let o=0;o<i.length;o++){let r=i.charCodeAt(o);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47)n!==-1&&(t+=encodeURIComponent(i.substring(n,o)),n=-1),t!==void 0&&(t+=i.charAt(o));else{t===void 0&&(t=i.substr(0,o));let s=Vne[r];s!==void 0?(n!==-1&&(t+=encodeURIComponent(i.substring(n,o)),n=-1),t+=s):n===-1&&(n=o)}}return n!==-1&&(t+=encodeURIComponent(i.substring(n))),t!==void 0?t:i}function fue(i){let e;for(let t=0;t<i.length;t++){let n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=Vne[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function CA(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,Mn&&(t=t.replace(/\//g,"\\")),t}function uB(i,e){let t=e?fue:WX,n="",{scheme:o,authority:r,path:s,query:a,fragment:l}=i;if(o&&(n+=o,n+=":"),(r||o==="file")&&(n+=Wa,n+=Wa),r){let c=r.indexOf("@");if(c!==-1){let d=r.substr(0,c);r=r.substr(c+1),c=d.indexOf(":"),c===-1?n+=t(d,!1):(n+=t(d.substr(0,c),!1),n+=":",n+=t(d.substr(c+1),!1)),n+="@"}r=r.toLowerCase(),c=r.indexOf(":"),c===-1?n+=t(r,!1):(n+=t(r.substr(0,c),!1),n+=r.substr(c))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let c=s.charCodeAt(1);c>=65&&c<=90&&(s=`/${String.fromCharCode(c+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let c=s.charCodeAt(0);c>=65&&c<=90&&(s=`${String.fromCharCode(c+32)}:${s.substr(2)}`)}n+=t(s,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:WX(l,!1)),n}function Une(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+Une(i.substr(3)):i}}var zX=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ay(i){return i.match(zX)?i.replace(zX,e=>Une(e)):i}var Oe;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.vscodeUserData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebook="vscode-notebook",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls",i.vscodeSourceControl="vscode-scm"})(Oe||(Oe={}));var _ue="tkn",gB=class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${Oe.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);let t=e.authority,n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);let o=this._ports[t],r=this._connectionTokens[t],s=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(s+=`&${_ue}=${encodeURIComponent(r)}`),$.from({scheme:gc?this._preferredWebSchema:Oe.vscodeRemoteResource,authority:`${n}:${o}`,path:this._remoteResourcesPath,query:s})}},Qne=new gB,_D=class i{asBrowserUri(e,t){let n=this.toUri(e,t);return n.scheme===Oe.vscodeRemote?Qne.rewrite(n):n.scheme===Oe.file&&(Ga||fhe&&cn.origin===`${Oe.vscodeFileResource}://${i.FALLBACK_AUTHORITY}`)?n.with({scheme:Oe.vscodeFileResource,authority:n.authority||i.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return $.isUri(e)?e:$.parse(t.toUrl(e))}};_D.FALLBACK_AUTHORITY="vscode-app";var jne=new _D;function Sn(i){for(;i.firstChild;)i.firstChild.remove()}function iY(i){var e;return(e=i?.isConnected)!==null&&e!==void 0?e:!1}var vD=class{constructor(e,t,n,o){this._node=e,this._type=t,this._handler=n,this._options=o||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function le(i,e,t,n){return new vD(i,e,t,n)}function Kne(i){return function(e){return i(new sa(e))}}function vue(i){return function(e){return i(new ni(e))}}var Tn=function(i,e,t,n){let o=t;return e==="click"||e==="mousedown"?o=Kne(t):(e==="keydown"||e==="keypress"||e==="keyup")&&(o=vue(t)),le(i,e,o,n)},Aue=function(i,e,t){let n=Kne(e);return bue(i,n,t)};function bue(i,e,t){return le(i,jl&&XG.pointerEvents?Ee.POINTER_DOWN:Ee.MOUSE_DOWN,e,t)}function Ia(i,e,t){let n=null,o=l=>a.fire(l),r=()=>{n||(n=new vD(i,e,o,t))},s=()=>{n&&(n.dispose(),n=null)},a=new Q({onFirstListenerAdd:r,onLastListenerRemove:s});return a}var E2=null;function wue(i){if(!E2){let e=t=>setTimeout(()=>t(new Date().getTime()),0);E2=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return E2.call(self,i)}var qne,el,b1=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ye(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let i=[],e=null,t=!1,n=!1,o=()=>{for(t=!1,e=i,i=[],n=!0;e.length>0;)e.sort(b1.sort),e.shift().execute();n=!1};el=(r,s=0)=>{let a=new b1(r,s);return i.push(a),t||(t=!0,wue(o)),a},qne=(r,s)=>{if(n){let a=new b1(r,s);return e.push(a),a}else return el(r,s)}})();function vM(i){return document.defaultView.getComputedStyle(i,null)}function AM(i){if(i!==document.body)return new Si(i.clientWidth,i.clientHeight);if(jl&&window.visualViewport)return new Si(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Si(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Si(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Si(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}var Ar=class i{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let o=vM(e),r="0";return o&&(o.getPropertyValue?r=o.getPropertyValue(t):r=o.getAttribute(n)),i.convertToPixels(e,r)}static getBorderLeftWidth(e){return i.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return i.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return i.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return i.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return i.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return i.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return i.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return i.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return i.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return i.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return i.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return i.getDimension(e,"margin-bottom","marginBottom")}},Si=class i{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new i(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof i?e:new i(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};Si.None=new Si(0,0);function $ne(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==document.body&&i!==document.documentElement;){t-=i.scrollTop;let o=Yne(i)?null:vM(i);o&&(n-=o.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=Ar.getBorderLeftWidth(i),t+=Ar.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function Cue(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function Eo(i){let e=i.getBoundingClientRect();return{left:e.left+dd.scrollX,top:e.top+dd.scrollY,width:e.width,height:e.height}}function yue(i){let e=i,t=1;do{let n=vM(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==document.documentElement);return t}var dd=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Xs(i){let e=Ar.getMarginLeft(i)+Ar.getMarginRight(i);return i.offsetWidth+e}function L2(i){let e=Ar.getBorderLeftWidth(i)+Ar.getBorderRightWidth(i),t=Ar.getPaddingLeft(i)+Ar.getPaddingRight(i);return i.offsetWidth-e-t}function Sue(i){let e=Ar.getBorderTopWidth(i)+Ar.getBorderBottomWidth(i),t=Ar.getPaddingTop(i)+Ar.getPaddingBottom(i);return i.offsetHeight-e-t}function pB(i){let e=Ar.getMarginTop(i)+Ar.getMarginBottom(i);return i.offsetHeight+e}function hd(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function Gne(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function I2(i,e,t){return!!Gne(i,e,t)}function Yne(i){return i&&!!i.host&&!!i.mode}function yA(i){return!!Yg(i)}function Yg(i){for(;i.parentNode;){if(i===document.body)return null;i=i.parentNode}return Yne(i)?i:null}function Of(){let i=document.activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function ls(i=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",i.appendChild(e),e}var T2=null;function Jne(){return T2||(T2=ls()),T2}function Due(i){var e,t;return!((e=i?.sheet)===null||e===void 0)&&e.rules?i.sheet.rules:!((t=i?.sheet)===null||t===void 0)&&t.cssRules?i.sheet.cssRules:[]}function mB(i,e,t=Jne()){!t||!e||t.sheet.insertRule(i+"{"+e+"}",0)}function VX(i,e=Jne()){if(!e)return;let t=Due(e),n=[];for(let o=0;o<t.length;o++)t[o].selectorText.indexOf(i)!==-1&&n.push(o);for(let o=n.length-1;o>=0;o--)e.sheet.deleteRule(n[o])}function Xne(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}var Ee={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Ch?"webkitAnimationStart":"animationstart",ANIMATION_END:Ch?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Ch?"webkitAnimationIteration":"animationiteration"},ii={stop:function(i,e){i.preventDefault?i.preventDefault():i.returnValue=!1,e&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0)}};function xue(i){let e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function kue(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}var fB=class i extends J{constructor(e){super(),this._onDidFocus=this._register(new Q),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Q),this.onDidBlur=this._onDidBlur.event;let t=i.hasFocusWithin(e),n=!1,o=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{i.hasFocusWithin(e)!==t&&(t?r():o())},this._register(le(e,Ee.FOCUS,o,!0)),this._register(le(e,Ee.BLUR,r,!0)),this._register(le(e,Ee.FOCUS_IN,()=>this._refreshStateHandler())),this._register(le(e,Ee.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){let t=Yg(e),n=t?t.activeElement:document.activeElement;return hd(n,e)}};function Oh(i){return new fB(i)}function ae(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function Eue(i,e){return i.insertBefore(e,i.firstChild),e}function Hh(i,...e){i.innerText="",ae(i,...e)}var Lue=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/,SA;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(SA||(SA={}));function Zne(i,e,t,...n){let o=Lue.exec(e);if(!o)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let r=o[1]||"div",s;return i!==SA.HTML?s=document.createElementNS(i,r):s=document.createElement(r),o[3]&&(s.id=o[3]),o[4]&&(s.className=o[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{let l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?s[a]=l:a==="selected"?l&&s.setAttribute(a,"true"):s.setAttribute(a,l))}),s.append(...n),s}function ge(i,e,...t){return Zne(SA.HTML,i,e,...t)}ge.SVG=function(i,e,...t){return Zne(SA.SVG,i,e,...t)};function _r(...i){for(let e of i)e.style.display="",e.removeAttribute("aria-hidden")}function Xo(...i){for(let e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function Iue(i){return Array.prototype.slice.call(document.getElementsByTagName(i),0)}function UX(i){let e=window.devicePixelRatio*i;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function eoe(i){window.open(i,"_blank","noopener")}function Tue(i){let e=()=>{i(),t=el(e)},t=el(e);return ct(()=>t.dispose())}Qne.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function Jg(i){return i?`url('${jne.asBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function QX(i){return`'${i.replace(/'/g,"%27")}'`}function Mue(i,e=!1){let t=document.createElement("a");return Bne("afterSanitizeAttributes",n=>{for(let o of["href","src"])if(n.hasAttribute(o)){let r=n.getAttribute(o);if(o==="href"&&r.startsWith("#"))continue;if(t.href=r,!i.includes(t.protocol.replace(/:$/,""))){if(e&&o==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(o)}}}),ct(()=>{Pne("afterSanitizeAttributes")})}var DA=class i extends Q{constructor(){super(),this._subscriptions=new ne,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(le(window,"keydown",e=>{if(e.defaultPrevented)return;let t=new ni(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(le(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(le(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(le(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(le(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(le(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return i.instance||(i.instance=new i),i.instance}dispose(){super.dispose(),this._subscriptions.dispose()}},_B=class extends J{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(le(this.element,Ee.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register(le(this.element,Ee.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)===null||n===void 0||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(le(this.element,Ee.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register(le(this.element,Ee.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register(le(this.element,Ee.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}},jX=2e4,Ku,kS,vB,ES,AB;function Nue(i){Ku=document.createElement("div"),Ku.className="monaco-aria-container";let e=()=>{let n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),Ku.appendChild(n),n};kS=e(),vB=e();let t=()=>{let n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),Ku.appendChild(n),n};ES=t(),AB=t(),i.appendChild(Ku)}function co(i){Ku&&(kS.textContent!==i?(Sn(vB),bD(kS,i)):(Sn(kS),bD(vB,i)))}function AD(i){Ku&&(gt?co(i):ES.textContent!==i?(Sn(AB),bD(ES,i)):(Sn(ES),bD(AB,i)))}function bD(i,e){Sn(i),e.length>jX&&(e=e.substr(0,jX)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}var Va;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(Va||(Va={}));var tt=ze("instantiationService");function Rue(i,e,t){e[Va.DI_TARGET]===e?e[Va.DI_DEPENDENCIES].push({id:i,index:t}):(e[Va.DI_DEPENDENCIES]=[{id:i,index:t}],e[Va.DI_TARGET]=e)}function ze(i){if(Va.serviceIds.has(i))return Va.serviceIds.get(i);let e=function(t,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Rue(e,t,o)};return e.toString=()=>i,Va.serviceIds.set(i,e),e}var Ft=ze("codeEditorService"),q=class{constructor(i,e){this.lineNumber=i,this.column=e}with(i=this.lineNumber,e=this.column){return i===this.lineNumber&&e===this.column?this:new q(i,e)}delta(i=0,e=0){return this.with(this.lineNumber+i,this.column+e)}equals(i){return q.equals(this,i)}static equals(i,e){return!i&&!e?!0:!!i&&!!e&&i.lineNumber===e.lineNumber&&i.column===e.column}isBefore(i){return q.isBefore(this,i)}static isBefore(i,e){return i.lineNumber<e.lineNumber?!0:e.lineNumber<i.lineNumber?!1:i.column<e.column}isBeforeOrEqual(i){return q.isBeforeOrEqual(this,i)}static isBeforeOrEqual(i,e){return i.lineNumber<e.lineNumber?!0:e.lineNumber<i.lineNumber?!1:i.column<=e.column}static compare(i,e){let t=i.lineNumber|0,n=e.lineNumber|0;if(t===n){let o=i.column|0,r=e.column|0;return o-r}return t-n}clone(){return new q(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(i){return new q(i.lineNumber,i.column)}static isIPosition(i){return i&&typeof i.lineNumber=="number"&&typeof i.column=="number"}},li=ze("modelService"),io=ze("textModelService"),xA=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},ho=class extends J{constructor(e,t="",n="",o=!0,r){super(),this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=o,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return xA(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}},Wh=class extends J{constructor(){super(...arguments),this._onBeforeRun=this._register(new Q),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new Q),this.onDidRun=this._onDidRun.event}run(e,t){return xA(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(o){n=o}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return xA(this,void 0,void 0,function*(){yield e.run(t)})}},Lo=class i extends ho{constructor(e){super(i.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}};Lo.ID="vs.actions.separator";var Xg=class{constructor(e,t,n,o){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=o,this._actions=n}get actions(){return this._actions}dispose(){}run(){return xA(this,void 0,void 0,function*(){})}},wD=class i extends ho{constructor(){super(i.ID,m("submenu.empty","(empty)"),void 0,!1)}};wD.ID="vs.actions.empty";function KX(i){var e,t;return{id:i.id,label:i.label,class:void 0,enabled:(e=i.enabled)!==null&&e!==void 0?e:!0,checked:(t=i.checked)!==null&&t!==void 0?t:!1,run:()=>xA(this,void 0,void 0,function*(){return i.run()}),tooltip:i.label,dispose:()=>{}}}function Fue(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}var _=class i{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,i._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return i._allCodicons}};_._allCodicons=[];_.add=new _("add",{fontCharacter:"\\ea60"});_.plus=new _("plus",_.add.definition);_.gistNew=new _("gist-new",_.add.definition);_.repoCreate=new _("repo-create",_.add.definition);_.lightbulb=new _("lightbulb",{fontCharacter:"\\ea61"});_.lightBulb=new _("light-bulb",{fontCharacter:"\\ea61"});_.repo=new _("repo",{fontCharacter:"\\ea62"});_.repoDelete=new _("repo-delete",{fontCharacter:"\\ea62"});_.gistFork=new _("gist-fork",{fontCharacter:"\\ea63"});_.repoForked=new _("repo-forked",{fontCharacter:"\\ea63"});_.gitPullRequest=new _("git-pull-request",{fontCharacter:"\\ea64"});_.gitPullRequestAbandoned=new _("git-pull-request-abandoned",{fontCharacter:"\\ea64"});_.recordKeys=new _("record-keys",{fontCharacter:"\\ea65"});_.keyboard=new _("keyboard",{fontCharacter:"\\ea65"});_.tag=new _("tag",{fontCharacter:"\\ea66"});_.tagAdd=new _("tag-add",{fontCharacter:"\\ea66"});_.tagRemove=new _("tag-remove",{fontCharacter:"\\ea66"});_.person=new _("person",{fontCharacter:"\\ea67"});_.personFollow=new _("person-follow",{fontCharacter:"\\ea67"});_.personOutline=new _("person-outline",{fontCharacter:"\\ea67"});_.personFilled=new _("person-filled",{fontCharacter:"\\ea67"});_.gitBranch=new _("git-branch",{fontCharacter:"\\ea68"});_.gitBranchCreate=new _("git-branch-create",{fontCharacter:"\\ea68"});_.gitBranchDelete=new _("git-branch-delete",{fontCharacter:"\\ea68"});_.sourceControl=new _("source-control",{fontCharacter:"\\ea68"});_.mirror=new _("mirror",{fontCharacter:"\\ea69"});_.mirrorPublic=new _("mirror-public",{fontCharacter:"\\ea69"});_.star=new _("star",{fontCharacter:"\\ea6a"});_.starAdd=new _("star-add",{fontCharacter:"\\ea6a"});_.starDelete=new _("star-delete",{fontCharacter:"\\ea6a"});_.starEmpty=new _("star-empty",{fontCharacter:"\\ea6a"});_.comment=new _("comment",{fontCharacter:"\\ea6b"});_.commentAdd=new _("comment-add",{fontCharacter:"\\ea6b"});_.alert=new _("alert",{fontCharacter:"\\ea6c"});_.warning=new _("warning",{fontCharacter:"\\ea6c"});_.search=new _("search",{fontCharacter:"\\ea6d"});_.searchSave=new _("search-save",{fontCharacter:"\\ea6d"});_.logOut=new _("log-out",{fontCharacter:"\\ea6e"});_.signOut=new _("sign-out",{fontCharacter:"\\ea6e"});_.logIn=new _("log-in",{fontCharacter:"\\ea6f"});_.signIn=new _("sign-in",{fontCharacter:"\\ea6f"});_.eye=new _("eye",{fontCharacter:"\\ea70"});_.eyeUnwatch=new _("eye-unwatch",{fontCharacter:"\\ea70"});_.eyeWatch=new _("eye-watch",{fontCharacter:"\\ea70"});_.circleFilled=new _("circle-filled",{fontCharacter:"\\ea71"});_.primitiveDot=new _("primitive-dot",{fontCharacter:"\\ea71"});_.closeDirty=new _("close-dirty",{fontCharacter:"\\ea71"});_.debugBreakpoint=new _("debug-breakpoint",{fontCharacter:"\\ea71"});_.debugBreakpointDisabled=new _("debug-breakpoint-disabled",{fontCharacter:"\\ea71"});_.debugHint=new _("debug-hint",{fontCharacter:"\\ea71"});_.primitiveSquare=new _("primitive-square",{fontCharacter:"\\ea72"});_.edit=new _("edit",{fontCharacter:"\\ea73"});_.pencil=new _("pencil",{fontCharacter:"\\ea73"});_.info=new _("info",{fontCharacter:"\\ea74"});_.issueOpened=new _("issue-opened",{fontCharacter:"\\ea74"});_.gistPrivate=new _("gist-private",{fontCharacter:"\\ea75"});_.gitForkPrivate=new _("git-fork-private",{fontCharacter:"\\ea75"});_.lock=new _("lock",{fontCharacter:"\\ea75"});_.mirrorPrivate=new _("mirror-private",{fontCharacter:"\\ea75"});_.close=new _("close",{fontCharacter:"\\ea76"});_.removeClose=new _("remove-close",{fontCharacter:"\\ea76"});_.x=new _("x",{fontCharacter:"\\ea76"});_.repoSync=new _("repo-sync",{fontCharacter:"\\ea77"});_.sync=new _("sync",{fontCharacter:"\\ea77"});_.clone=new _("clone",{fontCharacter:"\\ea78"});_.desktopDownload=new _("desktop-download",{fontCharacter:"\\ea78"});_.beaker=new _("beaker",{fontCharacter:"\\ea79"});_.microscope=new _("microscope",{fontCharacter:"\\ea79"});_.vm=new _("vm",{fontCharacter:"\\ea7a"});_.deviceDesktop=new _("device-desktop",{fontCharacter:"\\ea7a"});_.file=new _("file",{fontCharacter:"\\ea7b"});_.fileText=new _("file-text",{fontCharacter:"\\ea7b"});_.more=new _("more",{fontCharacter:"\\ea7c"});_.ellipsis=new _("ellipsis",{fontCharacter:"\\ea7c"});_.kebabHorizontal=new _("kebab-horizontal",{fontCharacter:"\\ea7c"});_.mailReply=new _("mail-reply",{fontCharacter:"\\ea7d"});_.reply=new _("reply",{fontCharacter:"\\ea7d"});_.organization=new _("organization",{fontCharacter:"\\ea7e"});_.organizationFilled=new _("organization-filled",{fontCharacter:"\\ea7e"});_.organizationOutline=new _("organization-outline",{fontCharacter:"\\ea7e"});_.newFile=new _("new-file",{fontCharacter:"\\ea7f"});_.fileAdd=new _("file-add",{fontCharacter:"\\ea7f"});_.newFolder=new _("new-folder",{fontCharacter:"\\ea80"});_.fileDirectoryCreate=new _("file-directory-create",{fontCharacter:"\\ea80"});_.trash=new _("trash",{fontCharacter:"\\ea81"});_.trashcan=new _("trashcan",{fontCharacter:"\\ea81"});_.history=new _("history",{fontCharacter:"\\ea82"});_.clock=new _("clock",{fontCharacter:"\\ea82"});_.folder=new _("folder",{fontCharacter:"\\ea83"});_.fileDirectory=new _("file-directory",{fontCharacter:"\\ea83"});_.symbolFolder=new _("symbol-folder",{fontCharacter:"\\ea83"});_.logoGithub=new _("logo-github",{fontCharacter:"\\ea84"});_.markGithub=new _("mark-github",{fontCharacter:"\\ea84"});_.github=new _("github",{fontCharacter:"\\ea84"});_.terminal=new _("terminal",{fontCharacter:"\\ea85"});_.console=new _("console",{fontCharacter:"\\ea85"});_.repl=new _("repl",{fontCharacter:"\\ea85"});_.zap=new _("zap",{fontCharacter:"\\ea86"});_.symbolEvent=new _("symbol-event",{fontCharacter:"\\ea86"});_.error=new _("error",{fontCharacter:"\\ea87"});_.stop=new _("stop",{fontCharacter:"\\ea87"});_.variable=new _("variable",{fontCharacter:"\\ea88"});_.symbolVariable=new _("symbol-variable",{fontCharacter:"\\ea88"});_.array=new _("array",{fontCharacter:"\\ea8a"});_.symbolArray=new _("symbol-array",{fontCharacter:"\\ea8a"});_.symbolModule=new _("symbol-module",{fontCharacter:"\\ea8b"});_.symbolPackage=new _("symbol-package",{fontCharacter:"\\ea8b"});_.symbolNamespace=new _("symbol-namespace",{fontCharacter:"\\ea8b"});_.symbolObject=new _("symbol-object",{fontCharacter:"\\ea8b"});_.symbolMethod=new _("symbol-method",{fontCharacter:"\\ea8c"});_.symbolFunction=new _("symbol-function",{fontCharacter:"\\ea8c"});_.symbolConstructor=new _("symbol-constructor",{fontCharacter:"\\ea8c"});_.symbolBoolean=new _("symbol-boolean",{fontCharacter:"\\ea8f"});_.symbolNull=new _("symbol-null",{fontCharacter:"\\ea8f"});_.symbolNumeric=new _("symbol-numeric",{fontCharacter:"\\ea90"});_.symbolNumber=new _("symbol-number",{fontCharacter:"\\ea90"});_.symbolStructure=new _("symbol-structure",{fontCharacter:"\\ea91"});_.symbolStruct=new _("symbol-struct",{fontCharacter:"\\ea91"});_.symbolParameter=new _("symbol-parameter",{fontCharacter:"\\ea92"});_.symbolTypeParameter=new _("symbol-type-parameter",{fontCharacter:"\\ea92"});_.symbolKey=new _("symbol-key",{fontCharacter:"\\ea93"});_.symbolText=new _("symbol-text",{fontCharacter:"\\ea93"});_.symbolReference=new _("symbol-reference",{fontCharacter:"\\ea94"});_.goToFile=new _("go-to-file",{fontCharacter:"\\ea94"});_.symbolEnum=new _("symbol-enum",{fontCharacter:"\\ea95"});_.symbolValue=new _("symbol-value",{fontCharacter:"\\ea95"});_.symbolRuler=new _("symbol-ruler",{fontCharacter:"\\ea96"});_.symbolUnit=new _("symbol-unit",{fontCharacter:"\\ea96"});_.activateBreakpoints=new _("activate-breakpoints",{fontCharacter:"\\ea97"});_.archive=new _("archive",{fontCharacter:"\\ea98"});_.arrowBoth=new _("arrow-both",{fontCharacter:"\\ea99"});_.arrowDown=new _("arrow-down",{fontCharacter:"\\ea9a"});_.arrowLeft=new _("arrow-left",{fontCharacter:"\\ea9b"});_.arrowRight=new _("arrow-right",{fontCharacter:"\\ea9c"});_.arrowSmallDown=new _("arrow-small-down",{fontCharacter:"\\ea9d"});_.arrowSmallLeft=new _("arrow-small-left",{fontCharacter:"\\ea9e"});_.arrowSmallRight=new _("arrow-small-right",{fontCharacter:"\\ea9f"});_.arrowSmallUp=new _("arrow-small-up",{fontCharacter:"\\eaa0"});_.arrowUp=new _("arrow-up",{fontCharacter:"\\eaa1"});_.bell=new _("bell",{fontCharacter:"\\eaa2"});_.bold=new _("bold",{fontCharacter:"\\eaa3"});_.book=new _("book",{fontCharacter:"\\eaa4"});_.bookmark=new _("bookmark",{fontCharacter:"\\eaa5"});_.debugBreakpointConditionalUnverified=new _("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"});_.debugBreakpointConditional=new _("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"});_.debugBreakpointConditionalDisabled=new _("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"});_.debugBreakpointDataUnverified=new _("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"});_.debugBreakpointData=new _("debug-breakpoint-data",{fontCharacter:"\\eaa9"});_.debugBreakpointDataDisabled=new _("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"});_.debugBreakpointLogUnverified=new _("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"});_.debugBreakpointLog=new _("debug-breakpoint-log",{fontCharacter:"\\eaab"});_.debugBreakpointLogDisabled=new _("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"});_.briefcase=new _("briefcase",{fontCharacter:"\\eaac"});_.broadcast=new _("broadcast",{fontCharacter:"\\eaad"});_.browser=new _("browser",{fontCharacter:"\\eaae"});_.bug=new _("bug",{fontCharacter:"\\eaaf"});_.calendar=new _("calendar",{fontCharacter:"\\eab0"});_.caseSensitive=new _("case-sensitive",{fontCharacter:"\\eab1"});_.check=new _("check",{fontCharacter:"\\eab2"});_.checklist=new _("checklist",{fontCharacter:"\\eab3"});_.chevronDown=new _("chevron-down",{fontCharacter:"\\eab4"});_.dropDownButton=new _("drop-down-button",_.chevronDown.definition);_.chevronLeft=new _("chevron-left",{fontCharacter:"\\eab5"});_.chevronRight=new _("chevron-right",{fontCharacter:"\\eab6"});_.chevronUp=new _("chevron-up",{fontCharacter:"\\eab7"});_.chromeClose=new _("chrome-close",{fontCharacter:"\\eab8"});_.chromeMaximize=new _("chrome-maximize",{fontCharacter:"\\eab9"});_.chromeMinimize=new _("chrome-minimize",{fontCharacter:"\\eaba"});_.chromeRestore=new _("chrome-restore",{fontCharacter:"\\eabb"});_.circleOutline=new _("circle-outline",{fontCharacter:"\\eabc"});_.debugBreakpointUnverified=new _("debug-breakpoint-unverified",{fontCharacter:"\\eabc"});_.circleSlash=new _("circle-slash",{fontCharacter:"\\eabd"});_.circuitBoard=new _("circuit-board",{fontCharacter:"\\eabe"});_.clearAll=new _("clear-all",{fontCharacter:"\\eabf"});_.clippy=new _("clippy",{fontCharacter:"\\eac0"});_.closeAll=new _("close-all",{fontCharacter:"\\eac1"});_.cloudDownload=new _("cloud-download",{fontCharacter:"\\eac2"});_.cloudUpload=new _("cloud-upload",{fontCharacter:"\\eac3"});_.code=new _("code",{fontCharacter:"\\eac4"});_.collapseAll=new _("collapse-all",{fontCharacter:"\\eac5"});_.colorMode=new _("color-mode",{fontCharacter:"\\eac6"});_.commentDiscussion=new _("comment-discussion",{fontCharacter:"\\eac7"});_.compareChanges=new _("compare-changes",{fontCharacter:"\\eafd"});_.creditCard=new _("credit-card",{fontCharacter:"\\eac9"});_.dash=new _("dash",{fontCharacter:"\\eacc"});_.dashboard=new _("dashboard",{fontCharacter:"\\eacd"});_.database=new _("database",{fontCharacter:"\\eace"});_.debugContinue=new _("debug-continue",{fontCharacter:"\\eacf"});_.debugDisconnect=new _("debug-disconnect",{fontCharacter:"\\ead0"});_.debugPause=new _("debug-pause",{fontCharacter:"\\ead1"});_.debugRestart=new _("debug-restart",{fontCharacter:"\\ead2"});_.debugStart=new _("debug-start",{fontCharacter:"\\ead3"});_.debugStepInto=new _("debug-step-into",{fontCharacter:"\\ead4"});_.debugStepOut=new _("debug-step-out",{fontCharacter:"\\ead5"});_.debugStepOver=new _("debug-step-over",{fontCharacter:"\\ead6"});_.debugStop=new _("debug-stop",{fontCharacter:"\\ead7"});_.debug=new _("debug",{fontCharacter:"\\ead8"});_.deviceCameraVideo=new _("device-camera-video",{fontCharacter:"\\ead9"});_.deviceCamera=new _("device-camera",{fontCharacter:"\\eada"});_.deviceMobile=new _("device-mobile",{fontCharacter:"\\eadb"});_.diffAdded=new _("diff-added",{fontCharacter:"\\eadc"});_.diffIgnored=new _("diff-ignored",{fontCharacter:"\\eadd"});_.diffModified=new _("diff-modified",{fontCharacter:"\\eade"});_.diffRemoved=new _("diff-removed",{fontCharacter:"\\eadf"});_.diffRenamed=new _("diff-renamed",{fontCharacter:"\\eae0"});_.diff=new _("diff",{fontCharacter:"\\eae1"});_.discard=new _("discard",{fontCharacter:"\\eae2"});_.editorLayout=new _("editor-layout",{fontCharacter:"\\eae3"});_.emptyWindow=new _("empty-window",{fontCharacter:"\\eae4"});_.exclude=new _("exclude",{fontCharacter:"\\eae5"});_.extensions=new _("extensions",{fontCharacter:"\\eae6"});_.eyeClosed=new _("eye-closed",{fontCharacter:"\\eae7"});_.fileBinary=new _("file-binary",{fontCharacter:"\\eae8"});_.fileCode=new _("file-code",{fontCharacter:"\\eae9"});_.fileMedia=new _("file-media",{fontCharacter:"\\eaea"});_.filePdf=new _("file-pdf",{fontCharacter:"\\eaeb"});_.fileSubmodule=new _("file-submodule",{fontCharacter:"\\eaec"});_.fileSymlinkDirectory=new _("file-symlink-directory",{fontCharacter:"\\eaed"});_.fileSymlinkFile=new _("file-symlink-file",{fontCharacter:"\\eaee"});_.fileZip=new _("file-zip",{fontCharacter:"\\eaef"});_.files=new _("files",{fontCharacter:"\\eaf0"});_.filter=new _("filter",{fontCharacter:"\\eaf1"});_.flame=new _("flame",{fontCharacter:"\\eaf2"});_.foldDown=new _("fold-down",{fontCharacter:"\\eaf3"});_.foldUp=new _("fold-up",{fontCharacter:"\\eaf4"});_.fold=new _("fold",{fontCharacter:"\\eaf5"});_.folderActive=new _("folder-active",{fontCharacter:"\\eaf6"});_.folderOpened=new _("folder-opened",{fontCharacter:"\\eaf7"});_.gear=new _("gear",{fontCharacter:"\\eaf8"});_.gift=new _("gift",{fontCharacter:"\\eaf9"});_.gistSecret=new _("gist-secret",{fontCharacter:"\\eafa"});_.gist=new _("gist",{fontCharacter:"\\eafb"});_.gitCommit=new _("git-commit",{fontCharacter:"\\eafc"});_.gitCompare=new _("git-compare",{fontCharacter:"\\eafd"});_.gitMerge=new _("git-merge",{fontCharacter:"\\eafe"});_.githubAction=new _("github-action",{fontCharacter:"\\eaff"});_.githubAlt=new _("github-alt",{fontCharacter:"\\eb00"});_.globe=new _("globe",{fontCharacter:"\\eb01"});_.grabber=new _("grabber",{fontCharacter:"\\eb02"});_.graph=new _("graph",{fontCharacter:"\\eb03"});_.gripper=new _("gripper",{fontCharacter:"\\eb04"});_.heart=new _("heart",{fontCharacter:"\\eb05"});_.home=new _("home",{fontCharacter:"\\eb06"});_.horizontalRule=new _("horizontal-rule",{fontCharacter:"\\eb07"});_.hubot=new _("hubot",{fontCharacter:"\\eb08"});_.inbox=new _("inbox",{fontCharacter:"\\eb09"});_.issueClosed=new _("issue-closed",{fontCharacter:"\\eba4"});_.issueReopened=new _("issue-reopened",{fontCharacter:"\\eb0b"});_.issues=new _("issues",{fontCharacter:"\\eb0c"});_.italic=new _("italic",{fontCharacter:"\\eb0d"});_.jersey=new _("jersey",{fontCharacter:"\\eb0e"});_.json=new _("json",{fontCharacter:"\\eb0f"});_.kebabVertical=new _("kebab-vertical",{fontCharacter:"\\eb10"});_.key=new _("key",{fontCharacter:"\\eb11"});_.law=new _("law",{fontCharacter:"\\eb12"});_.lightbulbAutofix=new _("lightbulb-autofix",{fontCharacter:"\\eb13"});_.linkExternal=new _("link-external",{fontCharacter:"\\eb14"});_.link=new _("link",{fontCharacter:"\\eb15"});_.listOrdered=new _("list-ordered",{fontCharacter:"\\eb16"});_.listUnordered=new _("list-unordered",{fontCharacter:"\\eb17"});_.liveShare=new _("live-share",{fontCharacter:"\\eb18"});_.loading=new _("loading",{fontCharacter:"\\eb19"});_.location=new _("location",{fontCharacter:"\\eb1a"});_.mailRead=new _("mail-read",{fontCharacter:"\\eb1b"});_.mail=new _("mail",{fontCharacter:"\\eb1c"});_.markdown=new _("markdown",{fontCharacter:"\\eb1d"});_.megaphone=new _("megaphone",{fontCharacter:"\\eb1e"});_.mention=new _("mention",{fontCharacter:"\\eb1f"});_.milestone=new _("milestone",{fontCharacter:"\\eb20"});_.mortarBoard=new _("mortar-board",{fontCharacter:"\\eb21"});_.move=new _("move",{fontCharacter:"\\eb22"});_.multipleWindows=new _("multiple-windows",{fontCharacter:"\\eb23"});_.mute=new _("mute",{fontCharacter:"\\eb24"});_.noNewline=new _("no-newline",{fontCharacter:"\\eb25"});_.note=new _("note",{fontCharacter:"\\eb26"});_.octoface=new _("octoface",{fontCharacter:"\\eb27"});_.openPreview=new _("open-preview",{fontCharacter:"\\eb28"});_.package_=new _("package",{fontCharacter:"\\eb29"});_.paintcan=new _("paintcan",{fontCharacter:"\\eb2a"});_.pin=new _("pin",{fontCharacter:"\\eb2b"});_.play=new _("play",{fontCharacter:"\\eb2c"});_.run=new _("run",{fontCharacter:"\\eb2c"});_.plug=new _("plug",{fontCharacter:"\\eb2d"});_.preserveCase=new _("preserve-case",{fontCharacter:"\\eb2e"});_.preview=new _("preview",{fontCharacter:"\\eb2f"});_.project=new _("project",{fontCharacter:"\\eb30"});_.pulse=new _("pulse",{fontCharacter:"\\eb31"});_.question=new _("question",{fontCharacter:"\\eb32"});_.quote=new _("quote",{fontCharacter:"\\eb33"});_.radioTower=new _("radio-tower",{fontCharacter:"\\eb34"});_.reactions=new _("reactions",{fontCharacter:"\\eb35"});_.references=new _("references",{fontCharacter:"\\eb36"});_.refresh=new _("refresh",{fontCharacter:"\\eb37"});_.regex=new _("regex",{fontCharacter:"\\eb38"});_.remoteExplorer=new _("remote-explorer",{fontCharacter:"\\eb39"});_.remote=new _("remote",{fontCharacter:"\\eb3a"});_.remove=new _("remove",{fontCharacter:"\\eb3b"});_.replaceAll=new _("replace-all",{fontCharacter:"\\eb3c"});_.replace=new _("replace",{fontCharacter:"\\eb3d"});_.repoClone=new _("repo-clone",{fontCharacter:"\\eb3e"});_.repoForcePush=new _("repo-force-push",{fontCharacter:"\\eb3f"});_.repoPull=new _("repo-pull",{fontCharacter:"\\eb40"});_.repoPush=new _("repo-push",{fontCharacter:"\\eb41"});_.report=new _("report",{fontCharacter:"\\eb42"});_.requestChanges=new _("request-changes",{fontCharacter:"\\eb43"});_.rocket=new _("rocket",{fontCharacter:"\\eb44"});_.rootFolderOpened=new _("root-folder-opened",{fontCharacter:"\\eb45"});_.rootFolder=new _("root-folder",{fontCharacter:"\\eb46"});_.rss=new _("rss",{fontCharacter:"\\eb47"});_.ruby=new _("ruby",{fontCharacter:"\\eb48"});_.saveAll=new _("save-all",{fontCharacter:"\\eb49"});_.saveAs=new _("save-as",{fontCharacter:"\\eb4a"});_.save=new _("save",{fontCharacter:"\\eb4b"});_.screenFull=new _("screen-full",{fontCharacter:"\\eb4c"});_.screenNormal=new _("screen-normal",{fontCharacter:"\\eb4d"});_.searchStop=new _("search-stop",{fontCharacter:"\\eb4e"});_.server=new _("server",{fontCharacter:"\\eb50"});_.settingsGear=new _("settings-gear",{fontCharacter:"\\eb51"});_.settings=new _("settings",{fontCharacter:"\\eb52"});_.shield=new _("shield",{fontCharacter:"\\eb53"});_.smiley=new _("smiley",{fontCharacter:"\\eb54"});_.sortPrecedence=new _("sort-precedence",{fontCharacter:"\\eb55"});_.splitHorizontal=new _("split-horizontal",{fontCharacter:"\\eb56"});_.splitVertical=new _("split-vertical",{fontCharacter:"\\eb57"});_.squirrel=new _("squirrel",{fontCharacter:"\\eb58"});_.starFull=new _("star-full",{fontCharacter:"\\eb59"});_.starHalf=new _("star-half",{fontCharacter:"\\eb5a"});_.symbolClass=new _("symbol-class",{fontCharacter:"\\eb5b"});_.symbolColor=new _("symbol-color",{fontCharacter:"\\eb5c"});_.symbolCustomColor=new _("symbol-customcolor",{fontCharacter:"\\eb5c"});_.symbolConstant=new _("symbol-constant",{fontCharacter:"\\eb5d"});_.symbolEnumMember=new _("symbol-enum-member",{fontCharacter:"\\eb5e"});_.symbolField=new _("symbol-field",{fontCharacter:"\\eb5f"});_.symbolFile=new _("symbol-file",{fontCharacter:"\\eb60"});_.symbolInterface=new _("symbol-interface",{fontCharacter:"\\eb61"});_.symbolKeyword=new _("symbol-keyword",{fontCharacter:"\\eb62"});_.symbolMisc=new _("symbol-misc",{fontCharacter:"\\eb63"});_.symbolOperator=new _("symbol-operator",{fontCharacter:"\\eb64"});_.symbolProperty=new _("symbol-property",{fontCharacter:"\\eb65"});_.wrench=new _("wrench",{fontCharacter:"\\eb65"});_.wrenchSubaction=new _("wrench-subaction",{fontCharacter:"\\eb65"});_.symbolSnippet=new _("symbol-snippet",{fontCharacter:"\\eb66"});_.tasklist=new _("tasklist",{fontCharacter:"\\eb67"});_.telescope=new _("telescope",{fontCharacter:"\\eb68"});_.textSize=new _("text-size",{fontCharacter:"\\eb69"});_.threeBars=new _("three-bars",{fontCharacter:"\\eb6a"});_.thumbsdown=new _("thumbsdown",{fontCharacter:"\\eb6b"});_.thumbsup=new _("thumbsup",{fontCharacter:"\\eb6c"});_.tools=new _("tools",{fontCharacter:"\\eb6d"});_.triangleDown=new _("triangle-down",{fontCharacter:"\\eb6e"});_.triangleLeft=new _("triangle-left",{fontCharacter:"\\eb6f"});_.triangleRight=new _("triangle-right",{fontCharacter:"\\eb70"});_.triangleUp=new _("triangle-up",{fontCharacter:"\\eb71"});_.twitter=new _("twitter",{fontCharacter:"\\eb72"});_.unfold=new _("unfold",{fontCharacter:"\\eb73"});_.unlock=new _("unlock",{fontCharacter:"\\eb74"});_.unmute=new _("unmute",{fontCharacter:"\\eb75"});_.unverified=new _("unverified",{fontCharacter:"\\eb76"});_.verified=new _("verified",{fontCharacter:"\\eb77"});_.versions=new _("versions",{fontCharacter:"\\eb78"});_.vmActive=new _("vm-active",{fontCharacter:"\\eb79"});_.vmOutline=new _("vm-outline",{fontCharacter:"\\eb7a"});_.vmRunning=new _("vm-running",{fontCharacter:"\\eb7b"});_.watch=new _("watch",{fontCharacter:"\\eb7c"});_.whitespace=new _("whitespace",{fontCharacter:"\\eb7d"});_.wholeWord=new _("whole-word",{fontCharacter:"\\eb7e"});_.window=new _("window",{fontCharacter:"\\eb7f"});_.wordWrap=new _("word-wrap",{fontCharacter:"\\eb80"});_.zoomIn=new _("zoom-in",{fontCharacter:"\\eb81"});_.zoomOut=new _("zoom-out",{fontCharacter:"\\eb82"});_.listFilter=new _("list-filter",{fontCharacter:"\\eb83"});_.listFlat=new _("list-flat",{fontCharacter:"\\eb84"});_.listSelection=new _("list-selection",{fontCharacter:"\\eb85"});_.selection=new _("selection",{fontCharacter:"\\eb85"});_.listTree=new _("list-tree",{fontCharacter:"\\eb86"});_.debugBreakpointFunctionUnverified=new _("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"});_.debugBreakpointFunction=new _("debug-breakpoint-function",{fontCharacter:"\\eb88"});_.debugBreakpointFunctionDisabled=new _("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"});_.debugStackframeActive=new _("debug-stackframe-active",{fontCharacter:"\\eb89"});_.circleSmallFilled=new _("circle-small-filled",{fontCharacter:"\\eb8a"});_.debugStackframeDot=new _("debug-stackframe-dot",_.circleSmallFilled.definition);_.debugStackframe=new _("debug-stackframe",{fontCharacter:"\\eb8b"});_.debugStackframeFocused=new _("debug-stackframe-focused",{fontCharacter:"\\eb8b"});_.debugBreakpointUnsupported=new _("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"});_.symbolString=new _("symbol-string",{fontCharacter:"\\eb8d"});_.debugReverseContinue=new _("debug-reverse-continue",{fontCharacter:"\\eb8e"});_.debugStepBack=new _("debug-step-back",{fontCharacter:"\\eb8f"});_.debugRestartFrame=new _("debug-restart-frame",{fontCharacter:"\\eb90"});_.callIncoming=new _("call-incoming",{fontCharacter:"\\eb92"});_.callOutgoing=new _("call-outgoing",{fontCharacter:"\\eb93"});_.menu=new _("menu",{fontCharacter:"\\eb94"});_.expandAll=new _("expand-all",{fontCharacter:"\\eb95"});_.feedback=new _("feedback",{fontCharacter:"\\eb96"});_.groupByRefType=new _("group-by-ref-type",{fontCharacter:"\\eb97"});_.ungroupByRefType=new _("ungroup-by-ref-type",{fontCharacter:"\\eb98"});_.account=new _("account",{fontCharacter:"\\eb99"});_.bellDot=new _("bell-dot",{fontCharacter:"\\eb9a"});_.debugConsole=new _("debug-console",{fontCharacter:"\\eb9b"});_.library=new _("library",{fontCharacter:"\\eb9c"});_.output=new _("output",{fontCharacter:"\\eb9d"});_.runAll=new _("run-all",{fontCharacter:"\\eb9e"});_.syncIgnored=new _("sync-ignored",{fontCharacter:"\\eb9f"});_.pinned=new _("pinned",{fontCharacter:"\\eba0"});_.githubInverted=new _("github-inverted",{fontCharacter:"\\eba1"});_.debugAlt=new _("debug-alt",{fontCharacter:"\\eb91"});_.serverProcess=new _("server-process",{fontCharacter:"\\eba2"});_.serverEnvironment=new _("server-environment",{fontCharacter:"\\eba3"});_.pass=new _("pass",{fontCharacter:"\\eba4"});_.stopCircle=new _("stop-circle",{fontCharacter:"\\eba5"});_.playCircle=new _("play-circle",{fontCharacter:"\\eba6"});_.record=new _("record",{fontCharacter:"\\eba7"});_.debugAltSmall=new _("debug-alt-small",{fontCharacter:"\\eba8"});_.vmConnect=new _("vm-connect",{fontCharacter:"\\eba9"});_.cloud=new _("cloud",{fontCharacter:"\\ebaa"});_.merge=new _("merge",{fontCharacter:"\\ebab"});_.exportIcon=new _("export",{fontCharacter:"\\ebac"});_.graphLeft=new _("graph-left",{fontCharacter:"\\ebad"});_.magnet=new _("magnet",{fontCharacter:"\\ebae"});_.notebook=new _("notebook",{fontCharacter:"\\ebaf"});_.redo=new _("redo",{fontCharacter:"\\ebb0"});_.checkAll=new _("check-all",{fontCharacter:"\\ebb1"});_.pinnedDirty=new _("pinned-dirty",{fontCharacter:"\\ebb2"});_.passFilled=new _("pass-filled",{fontCharacter:"\\ebb3"});_.circleLargeFilled=new _("circle-large-filled",{fontCharacter:"\\ebb4"});_.circleLargeOutline=new _("circle-large-outline",{fontCharacter:"\\ebb5"});_.combine=new _("combine",{fontCharacter:"\\ebb6"});_.gather=new _("gather",{fontCharacter:"\\ebb6"});_.table=new _("table",{fontCharacter:"\\ebb7"});_.variableGroup=new _("variable-group",{fontCharacter:"\\ebb8"});_.typeHierarchy=new _("type-hierarchy",{fontCharacter:"\\ebb9"});_.typeHierarchySub=new _("type-hierarchy-sub",{fontCharacter:"\\ebba"});_.typeHierarchySuper=new _("type-hierarchy-super",{fontCharacter:"\\ebbb"});_.gitPullRequestCreate=new _("git-pull-request-create",{fontCharacter:"\\ebbc"});_.runAbove=new _("run-above",{fontCharacter:"\\ebbd"});_.runBelow=new _("run-below",{fontCharacter:"\\ebbe"});_.notebookTemplate=new _("notebook-template",{fontCharacter:"\\ebbf"});_.debugRerun=new _("debug-rerun",{fontCharacter:"\\ebc0"});_.workspaceTrusted=new _("workspace-trusted",{fontCharacter:"\\ebc1"});_.workspaceUntrusted=new _("workspace-untrusted",{fontCharacter:"\\ebc2"});_.workspaceUnspecified=new _("workspace-unspecified",{fontCharacter:"\\ebc3"});_.terminalCmd=new _("terminal-cmd",{fontCharacter:"\\ebc4"});_.terminalDebian=new _("terminal-debian",{fontCharacter:"\\ebc5"});_.terminalLinux=new _("terminal-linux",{fontCharacter:"\\ebc6"});_.terminalPowershell=new _("terminal-powershell",{fontCharacter:"\\ebc7"});_.terminalTmux=new _("terminal-tmux",{fontCharacter:"\\ebc8"});_.terminalUbuntu=new _("terminal-ubuntu",{fontCharacter:"\\ebc9"});_.terminalBash=new _("terminal-bash",{fontCharacter:"\\ebca"});_.arrowSwap=new _("arrow-swap",{fontCharacter:"\\ebcb"});_.copy=new _("copy",{fontCharacter:"\\ebcc"});_.personAdd=new _("person-add",{fontCharacter:"\\ebcd"});_.filterFilled=new _("filter-filled",{fontCharacter:"\\ebce"});_.wand=new _("wand",{fontCharacter:"\\ebcf"});_.debugLineByLine=new _("debug-line-by-line",{fontCharacter:"\\ebd0"});_.inspect=new _("inspect",{fontCharacter:"\\ebd1"});_.layers=new _("layers",{fontCharacter:"\\ebd2"});_.layersDot=new _("layers-dot",{fontCharacter:"\\ebd3"});_.layersActive=new _("layers-active",{fontCharacter:"\\ebd4"});_.compass=new _("compass",{fontCharacter:"\\ebd5"});_.compassDot=new _("compass-dot",{fontCharacter:"\\ebd6"});_.compassActive=new _("compass-active",{fontCharacter:"\\ebd7"});_.azure=new _("azure",{fontCharacter:"\\ebd8"});_.issueDraft=new _("issue-draft",{fontCharacter:"\\ebd9"});_.gitPullRequestClosed=new _("git-pull-request-closed",{fontCharacter:"\\ebda"});_.gitPullRequestDraft=new _("git-pull-request-draft",{fontCharacter:"\\ebdb"});_.debugAll=new _("debug-all",{fontCharacter:"\\ebdc"});_.debugCoverage=new _("debug-coverage",{fontCharacter:"\\ebdd"});_.runErrors=new _("run-errors",{fontCharacter:"\\ebde"});_.folderLibrary=new _("folder-library",{fontCharacter:"\\ebdf"});_.debugContinueSmall=new _("debug-continue-small",{fontCharacter:"\\ebe0"});_.beakerStop=new _("beaker-stop",{fontCharacter:"\\ebe1"});_.graphLine=new _("graph-line",{fontCharacter:"\\ebe2"});_.graphScatter=new _("graph-scatter",{fontCharacter:"\\ebe3"});_.pieChart=new _("pie-chart",{fontCharacter:"\\ebe4"});_.bracket=new _("bracket",_.json.definition);_.bracketDot=new _("bracket-dot",{fontCharacter:"\\ebe5"});_.bracketError=new _("bracket-error",{fontCharacter:"\\ebe6"});_.lockSmall=new _("lock-small",{fontCharacter:"\\ebe7"});_.azureDevops=new _("azure-devops",{fontCharacter:"\\ebe8"});_.verifiedFilled=new _("verified-filled",{fontCharacter:"\\ebe9"});_.newLine=new _("newline",{fontCharacter:"\\ebea"});_.layout=new _("layout",{fontCharacter:"\\ebeb"});_.layoutActivitybarLeft=new _("layout-activitybar-left",{fontCharacter:"\\ebec"});_.layoutActivitybarRight=new _("layout-activitybar-right",{fontCharacter:"\\ebed"});_.layoutPanelLeft=new _("layout-panel-left",{fontCharacter:"\\ebee"});_.layoutPanelCenter=new _("layout-panel-center",{fontCharacter:"\\ebef"});_.layoutPanelJustify=new _("layout-panel-justify",{fontCharacter:"\\ebf0"});_.layoutPanelRight=new _("layout-panel-right",{fontCharacter:"\\ebf1"});_.layoutPanel=new _("layout-panel",{fontCharacter:"\\ebf2"});_.layoutSidebarLeft=new _("layout-sidebar-left",{fontCharacter:"\\ebf3"});_.layoutSidebarRight=new _("layout-sidebar-right",{fontCharacter:"\\ebf4"});_.layoutStatusbar=new _("layout-statusbar",{fontCharacter:"\\ebf5"});_.layoutMenubar=new _("layout-menubar",{fontCharacter:"\\ebf6"});_.layoutCentered=new _("layout-centered",{fontCharacter:"\\ebf7"});_.layoutSidebarRightOff=new _("layout-sidebar-right-off",{fontCharacter:"\\ec00"});_.layoutPanelOff=new _("layout-panel-off",{fontCharacter:"\\ec01"});_.layoutSidebarLeftOff=new _("layout-sidebar-left-off",{fontCharacter:"\\ec02"});_.target=new _("target",{fontCharacter:"\\ebf8"});_.indent=new _("indent",{fontCharacter:"\\ebf9"});_.recordSmall=new _("record-small",{fontCharacter:"\\ebfa"});_.errorSmall=new _("error-small",{fontCharacter:"\\ebfb"});_.arrowCircleDown=new _("arrow-circle-down",{fontCharacter:"\\ebfc"});_.arrowCircleLeft=new _("arrow-circle-left",{fontCharacter:"\\ebfd"});_.arrowCircleRight=new _("arrow-circle-right",{fontCharacter:"\\ebfe"});_.arrowCircleUp=new _("arrow-circle-up",{fontCharacter:"\\ebff"});_.heartFilled=new _("heart-filled",{fontCharacter:"\\ec04"});_.map=new _("map",{fontCharacter:"\\ec05"});_.mapFilled=new _("map-filled",{fontCharacter:"\\ec06"});_.circleSmall=new _("circle-small",{fontCharacter:"\\ec07"});_.bellSlash=new _("bell-slash",{fontCharacter:"\\ec08"});_.bellSlashDot=new _("bell-slash-dot",{fontCharacter:"\\ec09"});_.commentUnresolved=new _("comment-unresolved",{fontCharacter:"\\ec0a"});_.gitPullRequestGoToChanges=new _("git-pull-request-go-to-changes",{fontCharacter:"\\ec0b"});_.gitPullRequestNewChanges=new _("git-pull-request-new-changes",{fontCharacter:"\\ec0c"});_.dialogError=new _("dialog-error",_.error.definition);_.dialogWarning=new _("dialog-warning",_.warning.definition);_.dialogInfo=new _("dialog-info",_.info.definition);_.dialogClose=new _("dialog-close",_.close.definition);_.treeItemExpanded=new _("tree-item-expanded",_.chevronDown.definition);_.treeFilterOnTypeOn=new _("tree-filter-on-type-on",_.listFilter.definition);_.treeFilterOnTypeOff=new _("tree-filter-on-type-off",_.listSelection.definition);_.treeFilterClear=new _("tree-filter-clear",_.close.definition);_.treeItemLoading=new _("tree-item-loading",_.loading.definition);_.menuSelection=new _("menu-selection",_.check.definition);_.menuSubmenu=new _("menu-submenu",_.chevronRight.definition);_.menuBarMore=new _("menubar-more",_.more.definition);_.scrollbarButtonLeft=new _("scrollbar-button-left",_.triangleLeft.definition);_.scrollbarButtonRight=new _("scrollbar-button-right",_.triangleRight.definition);_.scrollbarButtonUp=new _("scrollbar-button-up",_.triangleUp.definition);_.scrollbarButtonDown=new _("scrollbar-button-down",_.triangleDown.definition);_.toolBarMore=new _("toolbar-more",_.more.definition);_.quickInputBack=new _("quick-input-back",_.arrowLeft.definition);var ir;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";let e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(r){if(r instanceof _)return["codicon","codicon-"+r.id];let s=e.exec(r.id);if(!s)return t(_.error);let[,a,l]=s,c=["codicon","codicon-"+a];return l&&c.push("codicon-modifier-"+l.substr(1)),c}i.asClassNameArray=t;function n(r){return t(r).join(" ")}i.asClassName=n;function o(r){return"."+t(r).join(".")}i.asCSSSelector=o})(ir||(ir={}));var ji=ze("commandService"),ft=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Q,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){let s=[];for(let l of i.description.args)s.push(l.constraint);let a=i.handler;i.handler=function(l,...c){return She(c,s),a(l,...c)}}let{id:t}=i,n=this._commands.get(t);n||(n=new ko,this._commands.set(t,n));let o=n.unshift(i),r=ct(()=>{o();let s=this._commands.get(t);s!=null&&s.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(i,e){return ft.registerCommand(i,(t,...n)=>t.get(ji).executeCommand(e,...n))}getCommand(i){let e=this._commands.get(i);if(!(!e||e.isEmpty()))return At.first(e)}getCommands(){let i=new Map;for(let e of this._commands.keys()){let t=this.getCommand(e);t&&i.set(e,t)}return i}};ft.registerCommand("noop",()=>{});var CD=class{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){let t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}},yD=class{constructor(e){this.fn=e,this._map=new Map}get cachedValues(){return this._map}get(e){if(this._map.has(e))return this._map.get(e);let t=this.fn(e);return this._map.set(e,t),t}},tl=class{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}},toe;function SD(i){return!i||typeof i!="string"?!0:i.trim().length===0}var Bue=/{(\d+)}/g;function ws(i,...e){return e.length===0?i:i.replace(Bue,function(t,n){let o=parseInt(n,10);return isNaN(o)||o<0||o>=e.length?t:e[o]})}function nY(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function cs(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Pue(i,e=" "){let t=bM(i,e);return ioe(t,e)}function bM(i,e){if(!i||!e)return i;let t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function ioe(i,e){if(!i||!e)return i;let t=e.length,n=i.length;if(t===0||n===0)return i;let o=n,r=-1;for(;r=i.lastIndexOf(e,o-1),!(r===-1||r+t!==o);){if(r===0)return"";o=r}return i.substring(0,o)}function Oue(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function Hue(i){return i.replace(/\*/g,"")}function noe(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=cs(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function wM(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function LS(i){return(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")}function il(i){return i.split(/\r\n|\r|\n/)}function rr(i){for(let e=0,t=i.length;e<t;e++){let n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function hi(i,e=0,t=i.length){for(let n=e;n<t;n++){let o=i.charCodeAt(n);if(o!==32&&o!==9)return i.substring(e,n)}return i.substring(e,t)}function Ol(i,e=i.length-1){for(let t=e;t>=0;t--){let n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Is(i,e){return i<e?-1:i>e?1:0}function FC(i,e,t=0,n=i.length,o=0,r=e.length){for(;t<n&&o<r;t++,o++){let l=i.charCodeAt(t),c=e.charCodeAt(o);if(l<c)return-1;if(l>c)return 1}let s=n-t,a=r-o;return s<a?-1:s>a?1:0}function w_(i,e){return Xp(i,e,0,i.length,0,e.length)}function Xp(i,e,t=0,n=i.length,o=0,r=e.length){for(;t<n&&o<r;t++,o++){let l=i.charCodeAt(t),c=e.charCodeAt(o);if(l===c)continue;if(l>=128||c>=128)return FC(i.toLowerCase(),e.toLowerCase(),t,n,o,r);hh(l)&&(l-=32),hh(c)&&(c-=32);let d=l-c;if(d!==0)return d}let s=n-t,a=r-o;return s<a?-1:s>a?1:0}function ly(i){return i>=48&&i<=57}function hh(i){return i>=97&&i<=122}function Dl(i){return i>=65&&i<=90}function dg(i,e){return i.length===e.length&&Xp(i,e)===0}function oY(i,e){let t=e.length;return e.length>i.length?!1:Xp(i,e,0,t)===0}function Zg(i,e){let t=Math.min(i.length,e.length),n;for(n=0;n<t;n++)if(i.charCodeAt(n)!==e.charCodeAt(n))return n;return t}function kA(i,e){let t=Math.min(i.length,e.length),n,o=i.length-1,r=e.length-1;for(n=0;n<t;n++)if(i.charCodeAt(o-n)!==e.charCodeAt(r-n))return n;return t}function En(i){return 55296<=i&&i<=56319}function ep(i){return 56320<=i&&i<=57343}function rY(i,e){return(i-55296<<10)+(e-56320)+65536}function DD(i,e,t){let n=i.charCodeAt(t);if(En(n)&&t+1<e){let o=i.charCodeAt(t+1);if(ep(o))return rY(n,o)}return n}function Wue(i,e){let t=i.charCodeAt(e-1);if(ep(t)&&e>1){let n=i.charCodeAt(e-2);if(En(n))return rY(n,t)}return t}var EA=class{constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}get offset(){return this._offset}setOffset(e){this._offset=e}prevCodePoint(){let e=Wue(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=DD(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}},C_=class{constructor(e,t=0){this._iterator=new EA(e,t)}get offset(){return this._iterator.offset}nextGraphemeLength(){let e=IA.getInstance(),t=this._iterator,n=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let r=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(qX(o,s)){t.setOffset(r);break}o=s}return t.offset-n}prevGraphemeLength(){let e=IA.getInstance(),t=this._iterator,n=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let r=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(qX(s,o)){t.setOffset(r);break}o=s}return n-t.offset}eol(){return this._iterator.eol()}};function LA(i,e){return new C_(i,e).nextGraphemeLength()}function ooe(i,e){return new C_(i,e).prevGraphemeLength()}function zue(i,e){e>0&&ep(i.charCodeAt(e))&&e--;let t=e+LA(i,e);return[t-ooe(i,t),t]}var Vue=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function y_(i){return Vue.test(i)}var Uue=/^[\t\n\r\x20-\x7E]*$/;function CM(i){return Uue.test(i)}var roe=/[\u2028\u2029]/;function soe(i){return roe.test(i)}function zh(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function sY(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}var Que=String.fromCharCode(65279);function aY(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function jue(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function aoe(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function qX(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}var IA=class i{constructor(){this._data=Kue()}static getInstance(){return i._INSTANCE||(i._INSTANCE=new i),i._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,n=t.length/3,o=1;for(;o<=n;)if(e<t[3*o])o=2*o;else if(e>t[3*o+1])o=2*o+1;else return t[3*o+2];return 0}};IA._INSTANCE=null;function Kue(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function que(i,e){if(i===0)return 0;let t=$ue(i,e);if(t!==void 0)return t;let n=new EA(e,i);return n.prevCodePoint(),n.offset}function $ue(i,e){let t=new EA(e,i),n=t.prevCodePoint();for(;Gue(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!sY(n))return;let o=t.offset;return o>0&&t.prevCodePoint()===8205&&(o=t.offset),o}function Gue(i){return 127995<=i&&i<=127999}var Yue="\xA0",nl=class{constructor(i){this.confusableDictionary=i}static getInstance(i){return nl.cache.get(Array.from(i))}static getLocales(){return nl._locales.getValue()}isAmbiguous(i){return this.confusableDictionary.has(i)}getPrimaryConfusable(i){return this.confusableDictionary.get(i)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};toe=nl;nl.ambiguousCharacterData=new tl(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));nl.cache=new CD(i=>{function e(c){let d=new Map;for(let h=0;h<c.length;h+=2)d.set(c[h],c[h+1]);return d}function t(c,d){let h=new Map(c);for(let[u,g]of d)h.set(u,g);return h}function n(c,d){if(!c)return d;let h=new Map;for(let[u,g]of c)d.has(u)&&h.set(u,g);return h}let o=toe.ambiguousCharacterData.getValue(),r=i.filter(c=>!c.startsWith("_")&&c in o);r.length===0&&(r=["_default"]);let s;for(let c of r){let d=e(o[c]);s=n(s,d)}let a=e(o._common),l=t(a,s);return new nl(l)});nl._locales=new tl(()=>Object.keys(nl.ambiguousCharacterData.getValue()).filter(i=>!i.startsWith("_")));var Sh=class i{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(i.getRawData())),this._data}static isInvisibleCharacter(e){return i.getData().has(e)}static get codePoints(){return i.getData()}};Sh._data=void 0;var Mo=new Map;Mo.set("false",!1);Mo.set("true",!0);Mo.set("isMac",gt);Mo.set("isLinux",go);Mo.set("isWindows",Mn);Mo.set("isWeb",gc);Mo.set("isMacNative",gt&&!gc);Mo.set("isEdge",Ene);Mo.set("isFirefox",xne);Mo.set("isChrome",qG);Mo.set("isSafari",kne);var Jue=Object.prototype.hasOwnProperty,we=class{static has(e){return Vh.create(e)}static equals(e,t){return TA.create(e,t)}static regex(e,t){return MD.create(e,t)}static not(e){return S_.create(e)}static and(...e){return MA.create(e,null)}static or(...e){return D_.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return D_.create(n.map(o=>this._deserializeAndExpression(o,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return MA.create(n.map(o=>this._deserializeOne(o,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return lY.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return TA.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return MD.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" not in ")>=0){let n=e.split(" not in ");return kD.create(n[0].trim(),n[1].trim())}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return xD.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){let n=e.split(">=");return LD.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){let n=e.split(">");return ED.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){let n=e.split("<=");return TD.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){let n=e.split("<");return ID.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?S_.create(e.substr(1).trim()):Vh.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(SD(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),o=e.lastIndexOf("/");if(n===o||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let r=e.slice(n+1,o),s=e[o+1]==="i"?"i":"";try{return new RegExp(r,s)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}};function Xue(i,e){let t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function Hf(i,e){return i.cmp(e)}var ds=class{constructor(){this.type=0}cmp(i){return this.type-i.type}equals(i){return i.type===this.type}substituteConstants(){return this}evaluate(i){return!1}serialize(){return"false"}keys(){return[]}negate(){return Ts.INSTANCE}};ds.INSTANCE=new ds;var Ts=class{constructor(){this.type=1}cmp(i){return this.type-i.type}equals(i){return i.type===this.type}substituteConstants(){return this}evaluate(i){return!0}serialize(){return"true"}keys(){return[]}negate(){return ds.INSTANCE}};Ts.INSTANCE=new Ts;var Vh=class{constructor(i,e){this.key=i,this.negated=e,this.type=2}static create(i,e=null){let t=Mo.get(i);return typeof t=="boolean"?t?Ts.INSTANCE:ds.INSTANCE:new Vh(i,e)}cmp(i){return i.type!==this.type?this.type-i.type:coe(this.key,i.key)}equals(i){return i.type===this.type?this.key===i.key:!1}substituteConstants(){let i=Mo.get(this.key);return typeof i=="boolean"?i?Ts.INSTANCE:ds.INSTANCE:this}evaluate(i){return!!i.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=S_.create(this.key,this)),this.negated}},TA=class{constructor(i,e,t){this.key=i,this.value=e,this.negated=t,this.type=4}static create(i,e,t=null){if(typeof e=="boolean")return e?Vh.create(i,t):S_.create(i,t);let n=Mo.get(i);return typeof n=="boolean"?e===(n?"true":"false")?Ts.INSTANCE:ds.INSTANCE:new TA(i,e,t)}cmp(i){return i.type!==this.type?this.type-i.type:Zp(this.key,this.value,i.key,i.value)}equals(i){return i.type===this.type?this.key===i.key&&this.value===i.value:!1}substituteConstants(){let i=Mo.get(this.key);if(typeof i=="boolean"){let e=i?"true":"false";return this.value===e?Ts.INSTANCE:ds.INSTANCE}return this}evaluate(i){return i.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=lY.create(this.key,this.value,this)),this.negated}},xD=class i{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new i(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Zp(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?Jue.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=kD.create(this.key,this.valueKey)),this.negated}},kD=class i{constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=xD.create(e,t)}static create(e,t){return new i(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}},lY=class{constructor(i,e,t){this.key=i,this.value=e,this.negated=t,this.type=5}static create(i,e,t=null){if(typeof e=="boolean")return e?S_.create(i,t):Vh.create(i,t);let n=Mo.get(i);return typeof n=="boolean"?e===(n?"true":"false")?ds.INSTANCE:Ts.INSTANCE:new lY(i,e,t)}cmp(i){return i.type!==this.type?this.type-i.type:Zp(this.key,this.value,i.key,i.value)}equals(i){return i.type===this.type?this.key===i.key&&this.value===i.value:!1}substituteConstants(){let i=Mo.get(this.key);if(typeof i=="boolean"){let e=i?"true":"false";return this.value===e?ds.INSTANCE:Ts.INSTANCE}return this}evaluate(i){return i.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=TA.create(this.key,this.value,this)),this.negated}},S_=class{constructor(i,e){this.key=i,this.negated=e,this.type=3}static create(i,e=null){let t=Mo.get(i);return typeof t=="boolean"?t?ds.INSTANCE:Ts.INSTANCE:new S_(i,e)}cmp(i){return i.type!==this.type?this.type-i.type:coe(this.key,i.key)}equals(i){return i.type===this.type?this.key===i.key:!1}substituteConstants(){let i=Mo.get(this.key);return typeof i=="boolean"?i?ds.INSTANCE:Ts.INSTANCE:this}evaluate(i){return!i.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Vh.create(this.key,this)),this.negated}};function yM(i,e){if(typeof i=="string"){let t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):ds.INSTANCE}var ED=class i{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return yM(t,o=>new i(e,o,n))}cmp(e){return e.type!==this.type?this.type-e.type:Zp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=TD.create(this.key,this.value,this)),this.negated}},LD=class i{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return yM(t,o=>new i(e,o,n))}cmp(e){return e.type!==this.type?this.type-e.type:Zp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ID.create(this.key,this.value,this)),this.negated}},ID=class i{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return yM(t,o=>new i(e,o,n))}cmp(e){return e.type!==this.type?this.type-e.type:Zp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=LD.create(this.key,this.value,this)),this.negated}},TD=class i{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return yM(t,o=>new i(e,o,n))}cmp(e){return e.type!==this.type?this.type-e.type:Zp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ED.create(this.key,this.value,this)),this.negated}},MD=class i{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new i(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=bB.create(this)),this.negated}},bB=class i{constructor(e){this._actual=e,this.type=8}static create(e){return new i(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}};function loe(i){let e=null;for(let t=0,n=i.length;t<n;t++){let o=i[t].substituteConstants();if(i[t]!==o&&e===null){e=[];for(let r=0;r<t;r++)e[r]=i[r]}e!==null&&(e[t]=o)}return e===null?i:e}var MA=class i{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return i._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let o=Hf(this.expr[t],e.expr[t]);if(o!==0)return o}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=loe(this.expr);return e===this.expr?this:i.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){let n=[],o=!1;for(let r of e)if(r){if(r.type===1){o=!0;continue}if(r.type===0)return ds.INSTANCE;if(r.type===6){n.push(...r.expr);continue}n.push(r)}if(n.length===0&&o)return Ts.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(Hf);for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];for(;n.length>1;){let r=n[n.length-1];if(r.type!==9)break;n.pop();let s=n.pop(),a=n.length===0,l=D_.create(r.expr.map(c=>i.create([c,s],null)),null,a);l&&(n.push(l),n.sort(Hf))}return n.length===1?n[0]:new i(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=D_.create(e,this,!0)}return this.negated}},D_=class i{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return i._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let o=Hf(this.expr[t],e.expr[t]);if(o!==0)return o}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=loe(this.expr);return e===this.expr?this:i.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let o=[],r=!1;if(e){for(let s=0,a=e.length;s<a;s++){let l=e[s];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return Ts.INSTANCE;if(l.type===9){o=o.concat(l.expr);continue}o.push(l)}}if(o.length===0&&r)return ds.INSTANCE;o.sort(Hf)}if(o.length!==0){if(o.length===1)return o[0];for(let s=1;s<o.length;s++)o[s-1].equals(o[s])&&(o.splice(s,1),s--);if(o.length===1)return o[0];if(n){for(let s=0;s<o.length;s++)for(let a=s+1;a<o.length;a++)doe(o[s],o[a])&&(o.splice(a,1),a--);if(o.length===1)return o[0]}return new i(o,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){let t=e.shift(),n=e.shift(),o=[];for(let s of ND(t))for(let a of ND(n))o.push(MA.create([s,a],null));let r=e.length===0;e.unshift(i.create(o,null,r))}this.negated=e[0]}return this.negated}},Le=class extends Vh{constructor(i,e,t){super(i,null),this._defaultValue=e,typeof t=="object"?Le._info.push(Object.assign(Object.assign({},t),{key:i})):t!==!0&&Le._info.push({key:i,description:t,type:e!=null?typeof e:void 0})}static all(){return Le._info.values()}bindTo(i){return i.createKey(this.key,this._defaultValue)}getValue(i){return i.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(i){return TA.create(this.key,i)}};Le._info=[];var Ze=ze("contextKeyService"),Zue="setContext";function coe(i,e){return i<e?-1:i>e?1:0}function Zp(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function doe(i,e){if(e.type===6&&i.type!==9&&i.type!==6){for(let o of e.expr)if(i.equals(o))return!0}let t=i.negate(),n=ND(t).concat(ND(e));n.sort(Hf);for(let o=0;o<n.length;o++){let r=n[o].negate();for(let s=o+1;s<n.length;s++){let a=n[s];if(r.equals(a))return!0}}return!1}function ND(i){return i.type===9?i.expr:[i]}function vr(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}var wB=class{constructor(){this.data=new Map}add(e,t){vr(Ji(e)),vr(jn(t)),vr(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}},oi=new wB,Cs;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST_DARK="hcDark",i.HIGH_CONTRAST_LIGHT="hcLight"})(Cs||(Cs={}));function Io(i){return i===Cs.HIGH_CONTRAST_DARK||i===Cs.HIGH_CONTRAST_LIGHT}function NA(i){return i===Cs.DARK||i===Cs.HIGH_CONTRAST_DARK}var mi=ze("themeService"),CB;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(CB||(CB={}));function Xi(i){return{id:i}}var zt;(function(i){function e(c){return c&&typeof c=="object"&&typeof c.id=="string"&&(typeof c.color>"u"||CB.isThemeColor(c.color))}i.isThemeIcon=e;let t=new RegExp(`^\\$\\((${ir.iconNameExpression}(?:${ir.iconModifierExpression})?)\\)$`);function n(c){let d=t.exec(c);if(!d)return;let[,h]=d;return{id:h}}i.fromString=n;function o(c){return{id:c}}i.fromId=o;function r(c,d){let h=c.id,u=h.lastIndexOf("~");return u!==-1&&(h=h.substring(0,u)),d&&(h=`${h}~${d}`),{id:h}}i.modify=r;function s(c){let d=c.id.lastIndexOf("~");if(d!==-1)return c.id.substring(d+1)}i.getModifier=s;function a(c,d){var h,u;return c.id===d.id&&((h=c.color)===null||h===void 0?void 0:h.id)===((u=d.color)===null||u===void 0?void 0:u.id)}i.isEqual=a;function l(c,d){return{id:c.id,color:d?Xi(d):void 0}}i.asThemeIcon=l,i.asClassNameArray=ir.asClassNameArray,i.asClassName=ir.asClassName,i.asCSSSelector=ir.asCSSSelector})(zt||(zt={}));function RD(i){switch(i){case Cs.DARK:return"vs-dark";case Cs.HIGH_CONTRAST_DARK:return"hc-black";case Cs.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}var hoe={ThemingContribution:"base.contributions.theming"},yB=class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Q}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),ct(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}},uoe=new yB;oi.add(hoe.ThemingContribution,uoe);function xi(i){return uoe.onColorThemeChange(i)}var goe=class extends J{constructor(i){super(),this.themeService=i,this.theme=i.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(e=>this.onThemeChange(e)))}onThemeChange(i){this.theme=i,this.updateStyles()}updateStyles(){}},ege=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},$X=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function Jm(i){return i.command!==void 0}var z=class i{constructor(e){if(i._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);i._instances.set(e,this),this.id=e}};z._instances=new Map;z.CommandPalette=new z("CommandPalette");z.DebugBreakpointsContext=new z("DebugBreakpointsContext");z.DebugCallStackContext=new z("DebugCallStackContext");z.DebugConsoleContext=new z("DebugConsoleContext");z.DebugVariablesContext=new z("DebugVariablesContext");z.DebugWatchContext=new z("DebugWatchContext");z.DebugToolBar=new z("DebugToolBar");z.DebugToolBarStop=new z("DebugToolBarStop");z.EditorContext=new z("EditorContext");z.SimpleEditorContext=new z("SimpleEditorContext");z.EditorContextCopy=new z("EditorContextCopy");z.EditorContextPeek=new z("EditorContextPeek");z.EditorContextShare=new z("EditorContextShare");z.EditorTitle=new z("EditorTitle");z.EditorTitleRun=new z("EditorTitleRun");z.EditorTitleContext=new z("EditorTitleContext");z.EmptyEditorGroup=new z("EmptyEditorGroup");z.EmptyEditorGroupContext=new z("EmptyEditorGroupContext");z.ExplorerContext=new z("ExplorerContext");z.ExtensionContext=new z("ExtensionContext");z.GlobalActivity=new z("GlobalActivity");z.CommandCenter=new z("CommandCenter");z.LayoutControlMenuSubmenu=new z("LayoutControlMenuSubmenu");z.LayoutControlMenu=new z("LayoutControlMenu");z.MenubarMainMenu=new z("MenubarMainMenu");z.MenubarAppearanceMenu=new z("MenubarAppearanceMenu");z.MenubarDebugMenu=new z("MenubarDebugMenu");z.MenubarEditMenu=new z("MenubarEditMenu");z.MenubarCopy=new z("MenubarCopy");z.MenubarFileMenu=new z("MenubarFileMenu");z.MenubarGoMenu=new z("MenubarGoMenu");z.MenubarHelpMenu=new z("MenubarHelpMenu");z.MenubarLayoutMenu=new z("MenubarLayoutMenu");z.MenubarNewBreakpointMenu=new z("MenubarNewBreakpointMenu");z.MenubarPanelAlignmentMenu=new z("MenubarPanelAlignmentMenu");z.MenubarPanelPositionMenu=new z("MenubarPanelPositionMenu");z.MenubarPreferencesMenu=new z("MenubarPreferencesMenu");z.MenubarRecentMenu=new z("MenubarRecentMenu");z.MenubarSelectionMenu=new z("MenubarSelectionMenu");z.MenubarShare=new z("MenubarShare");z.MenubarSwitchEditorMenu=new z("MenubarSwitchEditorMenu");z.MenubarSwitchGroupMenu=new z("MenubarSwitchGroupMenu");z.MenubarTerminalMenu=new z("MenubarTerminalMenu");z.MenubarViewMenu=new z("MenubarViewMenu");z.MenubarHomeMenu=new z("MenubarHomeMenu");z.OpenEditorsContext=new z("OpenEditorsContext");z.ProblemsPanelContext=new z("ProblemsPanelContext");z.SCMChangeContext=new z("SCMChangeContext");z.SCMResourceContext=new z("SCMResourceContext");z.SCMResourceFolderContext=new z("SCMResourceFolderContext");z.SCMResourceGroupContext=new z("SCMResourceGroupContext");z.SCMSourceControl=new z("SCMSourceControl");z.SCMTitle=new z("SCMTitle");z.SearchContext=new z("SearchContext");z.StatusBarWindowIndicatorMenu=new z("StatusBarWindowIndicatorMenu");z.StatusBarRemoteIndicatorMenu=new z("StatusBarRemoteIndicatorMenu");z.TestItem=new z("TestItem");z.TestItemGutter=new z("TestItemGutter");z.TestPeekElement=new z("TestPeekElement");z.TestPeekTitle=new z("TestPeekTitle");z.TouchBarContext=new z("TouchBarContext");z.TitleBarContext=new z("TitleBarContext");z.TitleBarTitleContext=new z("TitleBarTitleContext");z.TunnelContext=new z("TunnelContext");z.TunnelPrivacy=new z("TunnelPrivacy");z.TunnelProtocol=new z("TunnelProtocol");z.TunnelPortInline=new z("TunnelInline");z.TunnelTitle=new z("TunnelTitle");z.TunnelLocalAddressInline=new z("TunnelLocalAddressInline");z.TunnelOriginInline=new z("TunnelOriginInline");z.ViewItemContext=new z("ViewItemContext");z.ViewContainerTitle=new z("ViewContainerTitle");z.ViewContainerTitleContext=new z("ViewContainerTitleContext");z.ViewTitle=new z("ViewTitle");z.ViewTitleContext=new z("ViewTitleContext");z.CommentThreadTitle=new z("CommentThreadTitle");z.CommentThreadActions=new z("CommentThreadActions");z.CommentTitle=new z("CommentTitle");z.CommentActions=new z("CommentActions");z.InteractiveToolbar=new z("InteractiveToolbar");z.InteractiveCellTitle=new z("InteractiveCellTitle");z.InteractiveCellDelete=new z("InteractiveCellDelete");z.InteractiveCellExecute=new z("InteractiveCellExecute");z.InteractiveInputExecute=new z("InteractiveInputExecute");z.NotebookToolbar=new z("NotebookToolbar");z.NotebookCellTitle=new z("NotebookCellTitle");z.NotebookCellDelete=new z("NotebookCellDelete");z.NotebookCellInsert=new z("NotebookCellInsert");z.NotebookCellBetween=new z("NotebookCellBetween");z.NotebookCellListTop=new z("NotebookCellTop");z.NotebookCellExecute=new z("NotebookCellExecute");z.NotebookCellExecutePrimary=new z("NotebookCellExecutePrimary");z.NotebookDiffCellInputTitle=new z("NotebookDiffCellInputTitle");z.NotebookDiffCellMetadataTitle=new z("NotebookDiffCellMetadataTitle");z.NotebookDiffCellOutputsTitle=new z("NotebookDiffCellOutputsTitle");z.NotebookOutputToolbar=new z("NotebookOutputToolbar");z.NotebookEditorLayoutConfigure=new z("NotebookEditorLayoutConfigure");z.NotebookKernelSource=new z("NotebookKernelSource");z.BulkEditTitle=new z("BulkEditTitle");z.BulkEditContext=new z("BulkEditContext");z.TimelineItemContext=new z("TimelineItemContext");z.TimelineTitle=new z("TimelineTitle");z.TimelineTitleContext=new z("TimelineTitleContext");z.TimelineFilterSubMenu=new z("TimelineFilterSubMenu");z.AccountsContext=new z("AccountsContext");z.PanelTitle=new z("PanelTitle");z.AuxiliaryBarTitle=new z("AuxiliaryBarTitle");z.TerminalInstanceContext=new z("TerminalInstanceContext");z.TerminalEditorInstanceContext=new z("TerminalEditorInstanceContext");z.TerminalNewDropdownContext=new z("TerminalNewDropdownContext");z.TerminalTabContext=new z("TerminalTabContext");z.TerminalTabEmptyAreaContext=new z("TerminalTabEmptyAreaContext");z.TerminalInlineTabContext=new z("TerminalInlineTabContext");z.WebviewContext=new z("WebviewContext");z.InlineCompletionsActions=new z("InlineCompletionsActions");z.NewFile=new z("NewFile");z.MergeToolbar=new z("MergeToolbar");z.MergeInput1Toolbar=new z("MergeToolbar1Toolbar");z.MergeInput2Toolbar=new z("MergeToolbar2Toolbar");var em=ze("menuService"),Ds=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Q,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:i=>i===z.CommandPalette}}addCommand(i){return this.addCommands(At.single(i))}addCommands(i){for(let e of i)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),ct(()=>{let e=!1;for(let t of i)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(i){return this._commands.get(i)}getCommands(){let i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){return this.appendMenuItems(At.single({id:i,item:e}))}appendMenuItems(i){let e=new Set,t=new ko;for(let{id:n,item:o}of i){let r=this._menuItems.get(n);r||(r=new ko,this._menuItems.set(n,r)),t.push(r.push(o)),e.add(n)}return this._onDidChangeMenu.fire(e),ct(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===z.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){let e=new Set;for(let t of i)Jm(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}},RA=class extends Xg{constructor(e,t,n,o){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=o}get actions(){let e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(let[,o]of n)o.length>0&&(e.push(...o),e.push(new Lo));return e.length&&e.pop(),e}},Uh=class poe{constructor(e,t,n,o,r,s){var a,l;if(this.hideActions=o,this._commandService=s,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){let c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}this.item=e,this.alt=t?new poe(t,void 0,n,o,r,s):void 0,this._options=n,zt.isThemeIcon(e.icon)&&(this.class=ir.asClassName(e.icon))}dispose(){}run(...e){var t,n;let o=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(o=[...o,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(o=[...o,...e]),this._commandService.executeCommand(this.id,...o)}};Uh=ege([$X(4,Ze),$X(5,ji)],Uh);var SB=class i{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(is===1){if(e&&e.win)return e.win}else if(is===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){let t=i.bindToCurrentPlatform(e);if(t&&t.primary){let n=rB(t.primary,is);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,o=t.secondary.length;n<o;n++){let r=t.secondary[n],s=rB(r,is);s&&this._registerDefaultKeybinding(s,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),ft.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&i._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,o,r,s){is===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:s,weight1:o,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(ige)),this._cachedMergedKeybindings.slice(0)}},Vr=new SB,tge={EditorModes:"platform.keybindingsRegistry"};oi.add(tge.EditorModes,Vr);function ige(i,e){if(i.weight1!==e.weight1)return i.weight1-e.weight1;if(i.command&&e.command){if(i.command<e.command)return-1;if(i.command>e.command)return 1}return i.weight2-e.weight2}var Vs=ze("telemetryService"),no=ze("logService"),aa;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(aa||(aa={}));var moe=aa.Info,nge=class extends J{constructor(){super(...arguments),this.level=moe,this._onDidChangeLogLevel=this._register(new Q)}setLevel(i){this.level!==i&&(this.level=i,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}},DB=class extends nge{constructor(e=moe){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=aa.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=aa.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=aa.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=aa.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}},cY=class extends J{constructor(i){super(),this.logger=i,this._register(i)}getLevel(){return this.logger.getLevel()}trace(i,...e){this.logger.trace(i,...e)}debug(i,...e){this.logger.debug(i,...e)}info(i,...e){this.logger.info(i,...e)}error(i,...e){this.logger.error(i,...e)}},SM=class{constructor(i){this.id=i.id,this.precondition=i.precondition,this._kbOpts=i.kbOpts,this._menuOpts=i.menuOpts,this._description=i.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let i=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let e of i){let t=e.kbExpr;this.precondition&&(t?t=we.and(t,this.precondition):t=this.precondition);let n={id:this.id,weight:e.weight,args:e.args,when:t,primary:e.primary,secondary:e.secondary,win:e.win,linux:e.linux,mac:e.mac};Vr.registerKeybindingRule(n)}}ft.registerCommand({id:this.id,handler:(i,e)=>this.runCommand(i,e),description:this._description})}_registerMenuItem(i){Ds.appendMenuItem(i.menuId,{group:i.group,command:{id:this.id,title:i.title,icon:i.icon,precondition:this.precondition},when:i.when,order:i.order})}},Qh=class extends SM{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((o,r)=>r.priority-o.priority),{dispose:()=>{for(let o=0;o<this._implementations.length;o++)if(this._implementations[o].implementation===n){this._implementations.splice(o,1);return}}}}runCommand(e,t){let n=e.get(no);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let o of this._implementations){let r=o.implementation(e,t);if(r)return n.trace(`Command '${this.id}' was handled by '${o.name}'.`),typeof r=="boolean"?void 0:r}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}},FD=class extends SM{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}},$n=class i extends SM{static bindToContribution(e){return class extends i{constructor(t){super(t),this._callback=t.handler}runEditorCommand(t,n,o){let r=e(n);r&&this._callback(r,o)}}}static runEditorCommand(e,t,n,o){let r=e.get(Ft),s=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(s)return s.invokeWithinContext(a=>{if(a.get(Ze).contextMatchesRules(tr(n)))return o(a,s,t)})}runCommand(e,t){return i.runEditorCommand(e,t,this.precondition,(n,o,r)=>this.runEditorCommand(n,o,r))}},Ie=class i extends $n{constructor(e){super(i.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(o){return o.menuId||(o.menuId=z.EditorContext),o.title||(o.title=e.label),o.when=we.and(e.precondition,o.when),o}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Vs).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}},BD=class extends Ie{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,o)=>o[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(let o of this._implementations){let r=o[1](e,t,n);if(r)return typeof r=="boolean"?void 0:r}}};function mc(i,e){ft.registerCommand(i,function(t,...n){let o=t.get(tt),[r,s]=n;ai($.isUri(r)),ai(q.isIPosition(s));let a=t.get(li).getModel(r);if(a){let l=q.lift(s);return o.invokeFunction(e,a,l,...n.slice(2))}return t.get(io).createModelReference(r).then(l=>new Promise((c,d)=>{try{let h=o.invokeFunction(e,l.object.textEditorModel,q.lift(s),n.slice(2));c(h)}catch(h){d(h)}}).finally(()=>{l.dispose()}))})}function pe(i){return Rr.INSTANCE.registerEditorCommand(i),i}function fe(i){let e=new i;return Rr.INSTANCE.registerEditorAction(e),e}function foe(i){return Rr.INSTANCE.registerEditorAction(i),i}function _oe(i){Rr.INSTANCE.registerEditorAction(i)}function Wt(i,e){Rr.INSTANCE.registerEditorContribution(i,e)}var xg;(function(i){function e(s){return Rr.INSTANCE.getEditorCommand(s)}i.getEditorCommand=e;function t(){return Rr.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Rr.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function o(s){return Rr.INSTANCE.getEditorContributions().filter(a=>s.indexOf(a.id)>=0)}i.getSomeEditorContributions=o;function r(){return Rr.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=r})(xg||(xg={}));var oge={EditorCommonContributions:"editor.contributions"},Rr=class{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};Rr.INSTANCE=new Rr;oi.add(oge.EditorCommonContributions,Rr.INSTANCE);function BC(i){return i.register(),i}var voe=BC(new Qh({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:z.MenubarEditMenu,group:"1_do",title:m({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:z.CommandPalette,group:"",title:m("undo","Undo"),order:1}]}));BC(new FD(voe,{id:"default:undo",precondition:void 0}));var Aoe=BC(new Qh({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:z.MenubarEditMenu,group:"1_do",title:m({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:z.CommandPalette,group:"",title:m("redo","Redo"),order:1}]}));BC(new FD(Aoe,{id:"default:redo",precondition:void 0}));var rge=BC(new Qh({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:z.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:z.CommandPalette,group:"",title:m("selectAll","Select All"),order:1}]})),E=class{constructor(i,e,t,n){i>t||i===t&&e>n?(this.startLineNumber=t,this.startColumn=n,this.endLineNumber=i,this.endColumn=e):(this.startLineNumber=i,this.startColumn=e,this.endLineNumber=t,this.endColumn=n)}isEmpty(){return E.isEmpty(this)}static isEmpty(i){return i.startLineNumber===i.endLineNumber&&i.startColumn===i.endColumn}containsPosition(i){return E.containsPosition(this,i)}static containsPosition(i,e){return!(e.lineNumber<i.startLineNumber||e.lineNumber>i.endLineNumber||e.lineNumber===i.startLineNumber&&e.column<i.startColumn||e.lineNumber===i.endLineNumber&&e.column>i.endColumn)}static strictContainsPosition(i,e){return!(e.lineNumber<i.startLineNumber||e.lineNumber>i.endLineNumber||e.lineNumber===i.startLineNumber&&e.column<=i.startColumn||e.lineNumber===i.endLineNumber&&e.column>=i.endColumn)}containsRange(i){return E.containsRange(this,i)}static containsRange(i,e){return!(e.startLineNumber<i.startLineNumber||e.endLineNumber<i.startLineNumber||e.startLineNumber>i.endLineNumber||e.endLineNumber>i.endLineNumber||e.startLineNumber===i.startLineNumber&&e.startColumn<i.startColumn||e.endLineNumber===i.endLineNumber&&e.endColumn>i.endColumn)}strictContainsRange(i){return E.strictContainsRange(this,i)}static strictContainsRange(i,e){return!(e.startLineNumber<i.startLineNumber||e.endLineNumber<i.startLineNumber||e.startLineNumber>i.endLineNumber||e.endLineNumber>i.endLineNumber||e.startLineNumber===i.startLineNumber&&e.startColumn<=i.startColumn||e.endLineNumber===i.endLineNumber&&e.endColumn>=i.endColumn)}plusRange(i){return E.plusRange(this,i)}static plusRange(i,e){let t,n,o,r;return e.startLineNumber<i.startLineNumber?(t=e.startLineNumber,n=e.startColumn):e.startLineNumber===i.startLineNumber?(t=e.startLineNumber,n=Math.min(e.startColumn,i.startColumn)):(t=i.startLineNumber,n=i.startColumn),e.endLineNumber>i.endLineNumber?(o=e.endLineNumber,r=e.endColumn):e.endLineNumber===i.endLineNumber?(o=e.endLineNumber,r=Math.max(e.endColumn,i.endColumn)):(o=i.endLineNumber,r=i.endColumn),new E(t,n,o,r)}intersectRanges(i){return E.intersectRanges(this,i)}static intersectRanges(i,e){let t=i.startLineNumber,n=i.startColumn,o=i.endLineNumber,r=i.endColumn,s=e.startLineNumber,a=e.startColumn,l=e.endLineNumber,c=e.endColumn;return t<s?(t=s,n=a):t===s&&(n=Math.max(n,a)),o>l?(o=l,r=c):o===l&&(r=Math.min(r,c)),t>o||t===o&&n>r?null:new E(t,n,o,r)}equalsRange(i){return E.equalsRange(this,i)}static equalsRange(i,e){return!!i&&!!e&&i.startLineNumber===e.startLineNumber&&i.startColumn===e.startColumn&&i.endLineNumber===e.endLineNumber&&i.endColumn===e.endColumn}getEndPosition(){return E.getEndPosition(this)}static getEndPosition(i){return new q(i.endLineNumber,i.endColumn)}getStartPosition(){return E.getStartPosition(this)}static getStartPosition(i){return new q(i.startLineNumber,i.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(i,e){return new E(this.startLineNumber,this.startColumn,i,e)}setStartPosition(i,e){return new E(i,e,this.endLineNumber,this.endColumn)}collapseToStart(){return E.collapseToStart(this)}static collapseToStart(i){return new E(i.startLineNumber,i.startColumn,i.startLineNumber,i.startColumn)}static fromPositions(i,e=i){return new E(i.lineNumber,i.column,e.lineNumber,e.column)}static lift(i){return i?new E(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):null}static isIRange(i){return i&&typeof i.startLineNumber=="number"&&typeof i.startColumn=="number"&&typeof i.endLineNumber=="number"&&typeof i.endColumn=="number"}static areIntersectingOrTouching(i,e){return!(i.endLineNumber<e.startLineNumber||i.endLineNumber===e.startLineNumber&&i.endColumn<e.startColumn||e.endLineNumber<i.startLineNumber||e.endLineNumber===i.startLineNumber&&e.endColumn<i.startColumn)}static areIntersecting(i,e){return!(i.endLineNumber<e.startLineNumber||i.endLineNumber===e.startLineNumber&&i.endColumn<=e.startColumn||e.endLineNumber<i.startLineNumber||e.endLineNumber===i.startLineNumber&&e.endColumn<=i.startColumn)}static compareRangesUsingStarts(i,e){if(i&&e){let t=i.startLineNumber|0,n=e.startLineNumber|0;if(t===n){let o=i.startColumn|0,r=e.startColumn|0;if(o===r){let s=i.endLineNumber|0,a=e.endLineNumber|0;if(s===a){let l=i.endColumn|0,c=e.endColumn|0;return l-c}return s-a}return o-r}return t-n}return(i?1:0)-(e?1:0)}static compareRangesUsingEnds(i,e){return i.endLineNumber===e.endLineNumber?i.endColumn===e.endColumn?i.startLineNumber===e.startLineNumber?i.startColumn-e.startColumn:i.startLineNumber-e.startLineNumber:i.endColumn-e.endColumn:i.endLineNumber-e.endLineNumber}static spansMultipleLines(i){return i.endLineNumber>i.startLineNumber}toJSON(){return this}},Se=class extends E{constructor(i,e,t,n){super(i,e,t,n),this.selectionStartLineNumber=i,this.selectionStartColumn=e,this.positionLineNumber=t,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(i){return Se.selectionsEqual(this,i)}static selectionsEqual(i,e){return i.selectionStartLineNumber===e.selectionStartLineNumber&&i.selectionStartColumn===e.selectionStartColumn&&i.positionLineNumber===e.positionLineNumber&&i.positionColumn===e.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(i,e){return this.getDirection()===0?new Se(this.startLineNumber,this.startColumn,i,e):new Se(i,e,this.startLineNumber,this.startColumn)}getPosition(){return new q(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new q(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(i,e){return this.getDirection()===0?new Se(i,e,this.endLineNumber,this.endColumn):new Se(this.endLineNumber,this.endColumn,i,e)}static fromPositions(i,e=i){return new Se(i.lineNumber,i.column,e.lineNumber,e.column)}static fromRange(i,e){return e===0?new Se(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):new Se(i.endLineNumber,i.endColumn,i.startLineNumber,i.startColumn)}static liftSelection(i){return new Se(i.selectionStartLineNumber,i.selectionStartColumn,i.positionLineNumber,i.positionColumn)}static selectionsArrEqual(i,e){if(i&&!e||!i&&e)return!1;if(!i&&!e)return!0;if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(!this.selectionsEqual(i[t],e[t]))return!1;return!0}static isISelection(i){return i&&typeof i.selectionStartLineNumber=="number"&&typeof i.selectionStartColumn=="number"&&typeof i.positionLineNumber=="number"&&typeof i.positionColumn=="number"}static createWithDirection(i,e,t,n,o){return o===0?new Se(i,e,t,n):new Se(t,n,i,e)}};function DM(i,e){let t=i.getCount(),n=i.findTokenIndexAtOffset(e),o=i.getLanguageId(n),r=n;for(;r+1<t&&i.getLanguageId(r+1)===o;)r++;let s=n;for(;s>0&&i.getLanguageId(s-1)===o;)s--;return new xB(i,o,s,r+1,i.getStartOffset(s),i.getEndOffset(r))}var xB=class{constructor(e,t,n,o,r,s){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=o,this.firstCharOffset=r,this._lastCharOffset=s}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}};function vl(i){return(i&3)!==0}var bn=class i{static _nextVisibleColumn(e,t,n){return e===9?i.nextRenderTabStop(t,n):zh(e)||sY(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){let o=Math.min(t-1,e.length),r=e.substring(0,o),s=new C_(r),a=0;for(;!s.eol();){let l=DD(r,o,s.offset);s.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;let o=e.length,r=new C_(e),s=0,a=1;for(;!r.eol();){let l=DD(e,o,r.offset);r.nextGraphemeLength();let c=this._nextVisibleColumn(l,s,n),d=r.offset+1;if(c>=t){let h=t-s;return c-t<h?d:a}s=c,a=d}return o+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}};function sge(i,e,t){let n=0;for(let r=0;r<i.length;r++)i.charAt(r)==="	"?n=bn.nextIndentTabStop(n,e):n++;let o="";if(!t){let r=Math.floor(n/e);n=n%e;for(let s=0;s<r;s++)o+="	"}for(let r=0;r<n;r++)o+=" ";return o}function PD(i,e,t){let n=rr(i);return n===-1&&(n=i.length),sge(i.substring(0,n),e,t)+i.substring(n)}var age=()=>!0,lge=()=>!1,cge=i=>i===" "||i==="	",Xd=class{constructor(e,t,n,o){this.languageConfigurationService=o,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;let r=n.options,s=r.get(133);this.readOnly=r.get(83),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(106),this.lineHeight=r.get(61),this.pageSize=Math.max(1,Math.floor(s.height/this.lineHeight)-2),this.useTabStops=r.get(118),this.wordSeparators=r.get(119),this.emptySelectionClipboard=r.get(33),this.copyWithSyntaxHighlighting=r.get(21),this.multiCursorMergeOverlapping=r.get(71),this.multiCursorPaste=r.get(73),this.autoClosingBrackets=r.get(5),this.autoClosingQuotes=r.get(8),this.autoClosingDelete=r.get(6),this.autoClosingOvertype=r.get(7),this.autoSurround=r.get(11),this.autoIndent=r.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();let a=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(a)for(let l of a)this.surroundingPairs[l.open]=l.close}static shouldRecreate(e){return e.hasChanged(133)||e.hasChanged(119)||e.hasChanged(33)||e.hasChanged(71)||e.hasChanged(73)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(118)||e.hasChanged(61)||e.hasChanged(83)}get electricChars(){var e;if(!this._electricChars){this._electricChars={};let t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(let n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){let o=DM(t,n-1),r=this.languageConfigurationService.getLanguageConfiguration(o.languageId).electricCharacter;return r?r.onElectricCharacter(e,o,n-o.firstCharOffset):null}normalizeIndentation(e){return PD(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return cge;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e);case"always":return age;case"never":return lge}}_getLanguageDefinedShouldAutoClose(e){let t=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet();return n=>t.indexOf(n)!==-1}visibleColumnFromColumn(e,t){return bn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){let o=bn.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),r=e.getLineMinColumn(t);if(o<r)return r;let s=e.getLineMaxColumn(t);return o>s?s:o}},wt=class{constructor(i,e){this._cursorStateBrand=void 0,this.modelState=i,this.viewState=e}static fromModelState(i){return new kB(i)}static fromViewState(i){return new EB(i)}static fromModelSelection(i){let e=Se.liftSelection(i),t=new yo(E.fromPositions(e.getSelectionStart()),0,e.getPosition(),0);return wt.fromModelState(t)}static fromModelSelections(i){let e=[];for(let t=0,n=i.length;t<n;t++)e[t]=this.fromModelSelection(i[t]);return e}equals(i){return this.viewState.equals(i.viewState)&&this.modelState.equals(i.modelState)}},kB=class{constructor(e){this.modelState=e,this.viewState=null}},EB=class{constructor(e){this.modelState=null,this.viewState=e}},yo=class i{constructor(e,t,n,o){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=o,this.selection=i._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,o){return e?new i(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new q(t,n),o):new i(new E(t,n,t,n),o,new q(t,n),o)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Se.fromPositions(e.getStartPosition(),t):Se.fromPositions(e.getEndPosition(),t)}},Ho=class{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}};function qd(i){return i==="'"||i==='"'||i==="`"}var qu=class i{static columnSelect(e,t,n,o,r,s){let a=Math.abs(r-n)+1,l=n>r,c=o>s,d=o<s,h=[];for(let u=0;u<a;u++){let g=n+(l?-u:u),p=e.columnFromVisibleColumn(t,g,o),f=e.columnFromVisibleColumn(t,g,s),v=e.visibleColumnFromColumn(t,new q(g,p)),b=e.visibleColumnFromColumn(t,new q(g,f));d&&(v>s||b<o)||c&&(b>o||v<s)||h.push(new yo(new E(g,p,g,p),0,new q(g,f),0))}if(h.length===0)for(let u=0;u<a;u++){let g=n+(l?-u:u),p=t.getLineMaxColumn(g);h.push(new yo(new E(g,p,g,p),0,new q(g,p),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:o,toLineNumber:r,toVisualColumn:s}}static columnSelectLeft(e,t,n){let o=n.toViewVisualColumn;return o>0&&o--,i.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,o)}static columnSelectRight(e,t,n){let o=0,r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),s=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=r;l<=s;l++){let c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new q(l,c));o=Math.max(o,d)}let a=n.toViewVisualColumn;return a<o&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,o){let r=o?e.pageSize:1,s=Math.max(1,n.toViewLineNumber-r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}static columnSelectDown(e,t,n,o){let r=o?e.pageSize:1,s=Math.min(t.getLineCount(),n.toViewLineNumber+r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}},Vn=class{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return Se.fromPositions(n.getEndPosition())}},LB=class{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return Se.fromRange(n,0)}},Xm=class{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return Se.fromPositions(n.getStartPosition())}},Wf=class{constructor(e,t,n,o,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=o,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return Se.fromPositions(n.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}},FA=class{constructor(e,t,n,o=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=o,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}},BA=class i{static whitespaceVisibleColumn(e,t,n){let o=e.length,r=0,s=-1,a=-1;for(let l=0;l<o;l++){if(l===t)return[s,a,r];switch(r%n===0&&(s=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=bn.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===o?[s,a,r]:[-1,-1,-1]}static atomicPosition(e,t,n,o){let r=e.length,[s,a,l]=i.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(o){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(s===-1)return-1;let u=a;for(let g=s;g<r;++g){if(u===a+n)return s;switch(e.charCodeAt(g)){case 32:u+=1;break;case 9:u=bn.nextRenderTabStop(u,n);break;default:return-1}}return u===a+n?s:-1}let d=bn.nextRenderTabStop(l,n),h=l;for(let u=t;u<r;u++){if(h===d)return u;switch(e.charCodeAt(u)){case 32:h+=1;break;case 9:h=bn.nextRenderTabStop(h,n);break;default:return-1}}return h===d?r:-1}},w1=class{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}},$i=class i{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-ooe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){let n=t.lineNumber-1;return new q(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){let o=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),s=BA.atomicPosition(r,t.column-1,n,0);if(s!==-1&&s+1>=o)return new q(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){let o=e.stickyTabStops?i.leftPositionAtomicSoftTabs(t,n,e.tabSize):i.leftPosition(t,n);return new w1(o.lineNumber,o.column,0)}static moveLeft(e,t,n,o,r){let s,a;if(n.hasSelection()&&!o)s=n.selection.startLineNumber,a=n.selection.startColumn;else{let l=n.position.delta(void 0,-(r-1)),c=t.normalizePosition(i.clipPositionColumn(l,t),0),d=i.left(e,t,c);s=d.lineNumber,a=d.column}return n.move(o,s,a,0)}static clipPositionColumn(e,t){return new q(e.lineNumber,i.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+LA(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new q(t,n)}static rightPositionAtomicSoftTabs(e,t,n,o,r){if(n<e.getLineIndentColumn(t)){let s=e.getLineContent(t),a=BA.atomicPosition(s,n-1,o,1);if(a!==-1)return new q(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){let o=e.stickyTabStops?i.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):i.rightPosition(t,n.lineNumber,n.column);return new w1(o.lineNumber,o.column,0)}static moveRight(e,t,n,o,r){let s,a;if(n.hasSelection()&&!o)s=n.selection.endLineNumber,a=n.selection.endColumn;else{let l=n.position.delta(void 0,r-1),c=t.normalizePosition(i.clipPositionColumn(l,t),1),d=i.right(e,t,c);s=d.lineNumber,a=d.column}return n.move(o,s,a,0)}static vertical(e,t,n,o,r,s,a,l){let c=bn.visibleColumnFromColumn(t.getLineContent(n),o,e.tabSize)+r,d=t.getLineCount(),h=n===1&&o===1,u=n===d&&o===t.getLineMaxColumn(n),g=s<n?h:u;if(n=s,n<1?(n=1,a?o=t.getLineMinColumn(n):o=Math.min(t.getLineMaxColumn(n),o)):n>d?(n=d,a?o=t.getLineMaxColumn(n):o=Math.min(t.getLineMaxColumn(n),o)):o=e.columnFromVisibleColumn(t,n,c),g?r=0:r=c-bn.visibleColumnFromColumn(t.getLineContent(n),o,e.tabSize),l!==void 0){let p=new q(n,o),f=t.normalizePosition(p,l);r=r+(o-f.column),n=f.lineNumber,o=f.column}return new w1(n,o,r)}static down(e,t,n,o,r,s,a){return this.vertical(e,t,n,o,r,n+s,a,4)}static moveDown(e,t,n,o,r){let s,a;n.hasSelection()&&!o?(s=n.selection.endLineNumber,a=n.selection.endColumn):(s=n.position.lineNumber,a=n.position.column);let l=i.down(e,t,s,a,n.leftoverVisibleColumns,r,!0);return n.move(o,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){let o=n.selection,r=i.down(e,t,o.selectionStartLineNumber,o.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=i.down(e,t,o.positionLineNumber,o.positionColumn,n.leftoverVisibleColumns,1,!1);return new yo(new E(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new q(s.lineNumber,s.column),s.leftoverVisibleColumns)}static up(e,t,n,o,r,s,a){return this.vertical(e,t,n,o,r,n-s,a,3)}static moveUp(e,t,n,o,r){let s,a;n.hasSelection()&&!o?(s=n.selection.startLineNumber,a=n.selection.startColumn):(s=n.position.lineNumber,a=n.position.column);let l=i.up(e,t,s,a,n.leftoverVisibleColumns,r,!0);return n.move(o,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let o=n.selection,r=i.up(e,t,o.selectionStartLineNumber,o.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=i.up(e,t,o.positionLineNumber,o.positionColumn,n.leftoverVisibleColumns,1,!1);return new yo(new E(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new q(s.lineNumber,s.column),s.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,o){let r=n.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return n.move(o,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,n,o){let r=t.getLineCount(),s=n.position.lineNumber;for(;s<r&&this._isBlankLine(t,s);)s++;for(;s<r&&!this._isBlankLine(t,s);)s++;return n.move(o,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,n,o){let r=n.position.lineNumber,s=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||s,l;return n.position.column===a?l=s:l=a,n.move(o,r,l,0)}static moveToEndOfLine(e,t,n,o,r){let s=n.position.lineNumber,a=t.getLineMaxColumn(s);return n.move(o,s,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,o){return n.move(o,1,1,0)}static moveToEndOfBuffer(e,t,n,o){let r=t.getLineCount(),s=t.getLineMaxColumn(r);return n.move(o,r,s,0)}},x_=class i{static deleteRight(e,t,n,o){let r=[],s=e!==3;for(let a=0,l=o.length;a<l;a++){let c=o[a],d=c;if(d.isEmpty()){let h=c.getPosition(),u=$i.right(t,n,h);d=new E(u.lineNumber,u.column,h.lineNumber,h.column)}if(d.isEmpty()){r[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(s=!0),r[a]=new Vn(d,"")}return[s,r]}static isAutoClosingPairDelete(e,t,n,o,r,s,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=s.length;l<c;l++){let d=s[l],h=d.getPosition();if(!d.isEmpty())return!1;let u=r.getLineContent(h.lineNumber);if(h.column<2||h.column>=u.length+1)return!1;let g=u.charAt(h.column-2),p=o.get(g);if(!p)return!1;if(qd(g)){if(n==="never")return!1}else if(t==="never")return!1;let f=u.charAt(h.column-1),v=!1;for(let b of p)b.open===g&&b.close===f&&(v=!0);if(!v)return!1;if(e==="auto"){let b=!1;for(let A=0,w=a.length;A<w;A++){let C=a[A];if(h.lineNumber===C.startLineNumber&&h.column===C.startColumn){b=!0;break}}if(!b)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let o=[];for(let r=0,s=n.length;r<s;r++){let a=n[r].getPosition(),l=new E(a.lineNumber,a.column-1,a.lineNumber,a.column+1);o[r]=new Vn(l,"")}return[!0,o]}static deleteLeft(e,t,n,o,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,o,r))return this._runAutoClosingPairDelete(t,n,o);let s=[],a=e!==2;for(let l=0,c=o.length;l<c;l++){let d=i.getDeleteRange(o[l],n,t);if(d.isEmpty()){s[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),s[l]=new Vn(d,"")}return[a,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;let o=e.getPosition();if(n.useTabStops&&o.column>1){let r=t.getLineContent(o.lineNumber),s=rr(r),a=s===-1?r.length+1:s+1;if(o.column<=a){let l=n.visibleColumnFromColumn(t,o),c=bn.prevIndentTabStop(l,n.indentSize),d=n.columnFromVisibleColumn(t,o.lineNumber,c);return new E(o.lineNumber,d,o.lineNumber,o.column)}}return E.fromPositions(i.getPositionAfterDeleteLeft(o,t),o)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){let n=que(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){let n=e.lineNumber-1;return new q(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let o=[],r=null;n.sort((s,a)=>q.compare(s.getStartPosition(),a.getEndPosition()));for(let s=0,a=n.length;s<a;s++){let l=n[s];if(l.isEmpty())if(e.emptySelectionClipboard){let c=l.getPosition(),d,h,u,g;c.lineNumber<t.getLineCount()?(d=c.lineNumber,h=1,u=c.lineNumber+1,g=1):c.lineNumber>1&&r?.endLineNumber!==c.lineNumber?(d=c.lineNumber-1,h=t.getLineMaxColumn(c.lineNumber-1),u=c.lineNumber,g=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,h=1,u=c.lineNumber,g=t.getLineMaxColumn(c.lineNumber));let p=new E(d,h,u,g);r=p,p.isEmpty()?o[s]=null:o[s]=new Vn(p,"")}else o[s]=null;else o[s]=new Vn(l,"")}return new Ho(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}};function OD(i){return i<0?0:i>255?255:i|0}function bm(i){return i<0?0:i>4294967295?4294967295:i|0}var k_=class i{constructor(e){let t=OD(e);this._defaultValue=t,this._asciiMap=i._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=OD(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}},uh=class{constructor(){this._actual=new k_(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}},IB=class extends k_{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}};function dge(i){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=i(t)),e[t])}var Ms=dge(i=>new IB(i)),Wn=class i{static _createWord(e,t,n,o,r){return{start:o,end:r,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let o=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(o,e,n)}static _doFindPreviousWordOnLine(e,t,n){let o=0;for(let r=n.column-2;r>=0;r--){let s=e.charCodeAt(r),a=t.get(s);if(a===0){if(o===2)return this._createWord(e,o,a,r+1,this._findEndOfWord(e,t,o,r+1));o=1}else if(a===2){if(o===1)return this._createWord(e,o,a,r+1,this._findEndOfWord(e,t,o,r+1));o=2}else if(a===1&&o!==0)return this._createWord(e,o,a,r+1,this._findEndOfWord(e,t,o,r+1))}return o!==0?this._createWord(e,o,1,0,this._findEndOfWord(e,t,o,0)):null}static _findEndOfWord(e,t,n,o){let r=e.length;for(let s=o;s<r;s++){let a=e.charCodeAt(s),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return s}return r}static _findNextWordOnLine(e,t,n){let o=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(o,e,n)}static _doFindNextWordOnLine(e,t,n){let o=0,r=e.length;for(let s=n.column-1;s<r;s++){let a=e.charCodeAt(s),l=t.get(a);if(l===0){if(o===2)return this._createWord(e,o,l,this._findStartOfWord(e,t,o,s-1),s);o=1}else if(l===2){if(o===1)return this._createWord(e,o,l,this._findStartOfWord(e,t,o,s-1),s);o=2}else if(l===1&&o!==0)return this._createWord(e,o,l,this._findStartOfWord(e,t,o,s-1),s)}return o!==0?this._createWord(e,o,1,this._findStartOfWord(e,t,o,r-1),r):null}static _findStartOfWord(e,t,n,o){for(let r=o;r>=0;r--){let s=e.charCodeAt(r),a=t.get(s);if(a===1||n===1&&a===2||n===2&&a===0)return r+1}return 0}static moveWordLeft(e,t,n,o){let r=n.lineNumber,s=n.column;s===1&&r>1&&(r=r-1,s=t.getLineMaxColumn(r));let a=i._findPreviousWordOnLine(e,t,new q(r,s));if(o===0)return new q(r,a?a.start+1:1);if(o===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=i._findPreviousWordOnLine(e,t,new q(r,a.start+1))),new q(r,a?a.start+1:1);if(o===3){for(;a&&a.wordType===2;)a=i._findPreviousWordOnLine(e,t,new q(r,a.start+1));return new q(r,a?a.start+1:1)}return a&&s<=a.end+1&&(a=i._findPreviousWordOnLine(e,t,new q(r,a.start+1))),new q(r,a?a.end+1:1)}static _moveWordPartLeft(e,t){let n=t.lineNumber,o=e.getLineMaxColumn(n);if(t.column===1)return n>1?new q(n-1,e.getLineMaxColumn(n-1)):t;let r=e.getLineContent(n);for(let s=t.column-1;s>1;s--){let a=r.charCodeAt(s-2),l=r.charCodeAt(s-1);if(a===95&&l!==95)return new q(n,s);if((hh(a)||ly(a))&&Dl(l))return new q(n,s);if(Dl(a)&&Dl(l)&&s+1<o){let c=r.charCodeAt(s);if(hh(c)||ly(c))return new q(n,s)}}return new q(n,1)}static moveWordRight(e,t,n,o){let r=n.lineNumber,s=n.column,a=!1;s===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,s=1);let l=i._findNextWordOnLine(e,t,new q(r,s));if(o===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=i._findNextWordOnLine(e,t,new q(r,l.end+1))),l?s=l.end+1:s=t.getLineMaxColumn(r);else if(o===3){for(a&&(s=0);l&&(l.wordType===2||l.start+1<=s);)l=i._findNextWordOnLine(e,t,new q(r,l.end+1));l?s=l.start+1:s=t.getLineMaxColumn(r)}else l&&!a&&s>=l.start+1&&(l=i._findNextWordOnLine(e,t,new q(r,l.end+1))),l?s=l.start+1:s=t.getLineMaxColumn(r);return new q(r,s)}static _moveWordPartRight(e,t){let n=t.lineNumber,o=e.getLineMaxColumn(n);if(t.column===o)return n<e.getLineCount()?new q(n+1,1):t;let r=e.getLineContent(n);for(let s=t.column+1;s<o;s++){let a=r.charCodeAt(s-2),l=r.charCodeAt(s-1);if(a!==95&&l===95)return new q(n,s);if((hh(a)||ly(a))&&Dl(l))return new q(n,s);if(Dl(a)&&Dl(l)&&s+1<o){let c=r.charCodeAt(s);if(hh(c)||ly(c))return new q(n,s)}}return new q(n,o)}static _deleteWordLeftWhitespace(e,t){let n=e.getLineContent(t.lineNumber),o=t.column-2,r=Ol(n,o);return r+1<o?new E(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){let n=e.wordSeparators,o=e.model,r=e.selection,s=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(x_.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){let h=e.selection.getPosition();return new E(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}let a=new q(r.positionLineNumber,r.positionColumn),l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(s){let h=this._deleteWordLeftWhitespace(o,a);if(h)return h}let d=i._findPreviousWordOnLine(n,o,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=o.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=i._findPreviousWordOnLine(n,o,new q(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=o.getLineMaxColumn(l))),new E(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;let o=new q(n.positionLineNumber,n.positionColumn);return this._deleteInsideWordWhitespace(t,o)||this._deleteInsideWordDetermineDeleteRange(e,t,o)}static _charAtIsWhitespace(e,t){let n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){let n=e.getLineContent(t.lineNumber),o=n.length;if(o===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,r))return null;let s=Math.min(t.column-1,o-1);if(!this._charAtIsWhitespace(n,s))return null;for(;r>0&&this._charAtIsWhitespace(n,r-1);)r--;for(;s+1<o&&this._charAtIsWhitespace(n,s+1);)s++;return new E(t.lineNumber,r+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){let o=t.getLineContent(n.lineNumber),r=o.length;if(r===0)return n.lineNumber>1?new E(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new E(n.lineNumber,1,n.lineNumber+1,1):new E(n.lineNumber,1,n.lineNumber,1);let s=h=>h.start+1<=n.column&&n.column<=h.end+1,a=(h,u)=>(h=Math.min(h,n.column),u=Math.max(u,n.column),new E(n.lineNumber,h,n.lineNumber,u)),l=h=>{let u=h.start+1,g=h.end+1,p=!1;for(;g-1<r&&this._charAtIsWhitespace(o,g-1);)p=!0,g++;if(!p)for(;u>1&&this._charAtIsWhitespace(o,u-2);)u--;return a(u,g)},c=i._findPreviousWordOnLine(e,t,n);if(c&&s(c))return l(c);let d=i._findNextWordOnLine(e,t,n);return d&&s(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;let n=t.getPosition(),o=i._moveWordPartLeft(e,n);return new E(n.lineNumber,n.column,o.lineNumber,o.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let o=t;o<n;o++){let r=e.charAt(o);if(r!==" "&&r!=="	")return o}return n}static _deleteWordRightWhitespace(e,t){let n=e.getLineContent(t.lineNumber),o=t.column-1,r=this._findFirstNonWhitespaceChar(n,o);return o+1<r?new E(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){let n=e.wordSeparators,o=e.model,r=e.selection,s=e.whitespaceHeuristics;if(!r.isEmpty())return r;let a=new q(r.positionLineNumber,r.positionColumn),l=a.lineNumber,c=a.column,d=o.getLineCount(),h=o.getLineMaxColumn(l);if(l===d&&c===h)return null;if(s){let g=this._deleteWordRightWhitespace(o,a);if(g)return g}let u=i._findNextWordOnLine(n,o,a);return t===2?u?c=u.end+1:c<h||l===d?c=h:(l++,u=i._findNextWordOnLine(n,o,new q(l,1)),u?c=u.start+1:c=o.getLineMaxColumn(l)):(u&&c>=u.start+1&&(u=i._findNextWordOnLine(n,o,new q(l,u.end+1))),u?c=u.start+1:c<h||l===d?c=h:(l++,u=i._findNextWordOnLine(n,o,new q(l,1)),u?c=u.start+1:c=o.getLineMaxColumn(l))),new E(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;let n=t.getPosition(),o=i._moveWordPartRight(e,n);return new E(n.lineNumber,n.column,o.lineNumber,o.column)}static _createWordAtPosition(e,t,n){let o=new E(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(o),startColumn:o.startColumn,endColumn:o.endColumn}}static getWordAtPosition(e,t,n){let o=Ms(t),r=i._findPreviousWordOnLine(o,e,n);if(r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end)return i._createWordAtPosition(e,n.lineNumber,r);let s=i._findNextWordOnLine(o,e,n);return s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end?i._createWordAtPosition(e,n.lineNumber,s):null}static word(e,t,n,o,r){let s=Ms(e.wordSeparators),a=i._findPreviousWordOnLine(s,t,r),l=i._findNextWordOnLine(s,t,r);if(!o){let g,p;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(g=a.start+1,p=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(g=l.start+1,p=l.end+1):(a?g=a.end+1:g=1,l?p=l.start+1:p=t.getLineMaxColumn(r.lineNumber)),new yo(new E(r.lineNumber,g,r.lineNumber,p),0,new q(r.lineNumber,p),0)}let c,d;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,d=l.end+1):(c=r.column,d=r.column);let h=r.lineNumber,u;if(n.selectionStart.containsPosition(r))u=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){u=c;let g=new q(h,u);n.selectionStart.containsPosition(g)&&(u=n.selectionStart.endColumn)}else{u=d;let g=new q(h,u);n.selectionStart.containsPosition(g)&&(u=n.selectionStart.startColumn)}return n.move(!0,h,u,0)}},E_=class extends Wn{static deleteWordPartLeft(e){let t=cy([Wn.deleteWordLeft(e,0),Wn.deleteWordLeft(e,2),Wn._deleteWordPartLeft(e.model,e.selection)]);return t.sort(E.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){let t=cy([Wn.deleteWordRight(e,0),Wn.deleteWordRight(e,2),Wn._deleteWordPartRight(e.model,e.selection)]);return t.sort(E.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){let o=cy([Wn.moveWordLeft(e,t,n,0),Wn.moveWordLeft(e,t,n,2),Wn._moveWordPartLeft(t,n)]);return o.sort(q.compare),o[2]}static moveWordPartRight(e,t,n){let o=cy([Wn.moveWordRight(e,t,n,0),Wn.moveWordRight(e,t,n,2),Wn._moveWordPartRight(t,n)]);return o.sort(q.compare),o[0]}};function cy(i){return i.filter(e=>!!e)}var kn=class{static addCursorDown(e,t,n){let o=[],r=0;for(let s=0,a=t.length;s<a;s++){let l=t[s];o[r++]=new wt(l.modelState,l.viewState),n?o[r++]=wt.fromModelState($i.translateDown(e.cursorConfig,e.model,l.modelState)):o[r++]=wt.fromViewState($i.translateDown(e.cursorConfig,e,l.viewState))}return o}static addCursorUp(e,t,n){let o=[],r=0;for(let s=0,a=t.length;s<a;s++){let l=t[s];o[r++]=new wt(l.modelState,l.viewState),n?o[r++]=wt.fromModelState($i.translateUp(e.cursorConfig,e.model,l.modelState)):o[r++]=wt.fromViewState($i.translateUp(e.cursorConfig,e,l.viewState))}return o}static moveToBeginningOfLine(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r];o[r]=this._moveToLineStart(e,a,n)}return o}static _moveToLineStart(e,t,n){let o=t.viewState.position.column,r=t.modelState.position.column,s=o===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!s&&o!==l?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return wt.fromViewState($i.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return wt.fromModelState($i.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,o){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=this._moveToLineEnd(e,l,n,o)}return r}static _moveToLineEnd(e,t,n,o){let r=t.viewState.position,s=e.getLineMaxColumn(r.lineNumber),a=r.column===s,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=s-r.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,n,o):this._moveToLineEndByView(e,t,n,o)}static _moveToLineEndByView(e,t,n,o){return wt.fromViewState($i.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,o))}static _moveToLineEndByModel(e,t,n,o){return wt.fromModelState($i.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,o))}static expandLineSelection(e,t){let n=[];for(let o=0,r=t.length;o<r;o++){let s=t[o],a=s.modelState.selection.startLineNumber,l=e.model.getLineCount(),c=s.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),n[o]=wt.fromModelState(new yo(new E(a,1,a,1),0,new q(c,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r];o[r]=wt.fromModelState($i.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return o}static moveToEndOfBuffer(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r];o[r]=wt.fromModelState($i.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return o}static selectAll(e,t){let n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return wt.fromModelState(new yo(new E(1,1,1,1),0,new q(n,o),0))}static line(e,t,n,o,r){let s=e.model.validatePosition(o),a=r?e.coordinatesConverter.validateViewPosition(new q(r.lineNumber,r.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n||!t.modelState.hasSelection()){let c=e.model.getLineCount(),d=s.lineNumber+1,h=1;return d>c&&(d=c,h=e.model.getLineMaxColumn(d)),wt.fromModelState(new yo(new E(s.lineNumber,1,d,h),0,new q(d,h),0))}let l=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<l)return wt.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(s.lineNumber>l){let c=e.getLineCount(),d=a.lineNumber+1,h=1;return d>c&&(d=c,h=e.getLineMaxColumn(d)),wt.fromViewState(t.viewState.move(t.modelState.hasSelection(),d,h,0))}else{let c=t.modelState.selectionStart.getEndPosition();return wt.fromModelState(t.modelState.move(t.modelState.hasSelection(),c.lineNumber,c.column,0))}}static word(e,t,n,o){let r=e.model.validatePosition(o);return wt.fromModelState(Wn.word(e.cursorConfig,e.model,t.modelState,n,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new wt(t.modelState,t.viewState);let n=t.viewState.position.lineNumber,o=t.viewState.position.column;return wt.fromViewState(new yo(new E(n,o,n,o),0,new q(n,o),0))}static moveTo(e,t,n,o,r){let s=e.model.validatePosition(o),a=r?e.coordinatesConverter.validateViewPosition(new q(r.lineNumber,r.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return wt.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,o,r,s){switch(n){case 0:return s===4?this._moveHalfLineLeft(e,t,o):this._moveLeft(e,t,o,r);case 1:return s===4?this._moveHalfLineRight(e,t,o):this._moveRight(e,t,o,r);case 2:return s===2?this._moveUpByViewLines(e,t,o,r):this._moveUpByModelLines(e,t,o,r);case 3:return s===2?this._moveDownByViewLines(e,t,o,r):this._moveDownByModelLines(e,t,o,r);case 4:return s===2?t.map(a=>wt.fromViewState($i.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,o))):t.map(a=>wt.fromModelState($i.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,o)));case 5:return s===2?t.map(a=>wt.fromViewState($i.moveToNextBlankLine(e.cursorConfig,e,a.viewState,o))):t.map(a=>wt.fromModelState($i.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,o)));case 6:return this._moveToViewMinColumn(e,t,o);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,o);case 8:return this._moveToViewCenterColumn(e,t,o);case 9:return this._moveToViewMaxColumn(e,t,o);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,o);default:return null}}static viewportMove(e,t,n,o,r){let s=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(n){case 11:{let l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],o,l,c)]}case 13:{let l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],o,l,c)]}case 12:{let l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],o,l,c)]}case 14:{let l=[];for(let c=0,d=t.length;c<d;c++){let h=t[c];l[c]=this.findPositionInViewportIfOutside(e,h,s,o)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,o){let r=t.viewState.position.lineNumber;if(n.startLineNumber<=r&&r<=n.endLineNumber-1)return new wt(t.modelState,t.viewState);{let s;r>n.endLineNumber-1?s=n.endLineNumber-1:r<n.startLineNumber?s=n.startLineNumber:s=r;let a=$i.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,s,!1);return wt.fromViewState(t.viewState.move(o,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let o=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(o)&&o++,Math.min(t.endLineNumber,o+n-1)}static _lastLineNumberInRange(e,t,n){let o=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(o)&&o++,Math.max(o,t.endLineNumber-n+1)}static _moveLeft(e,t,n,o){return t.map(r=>wt.fromViewState($i.moveLeft(e.cursorConfig,e,r.viewState,n,o)))}static _moveHalfLineLeft(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);o[r]=wt.fromViewState($i.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return o}static _moveRight(e,t,n,o){return t.map(r=>wt.fromViewState($i.moveRight(e.cursorConfig,e,r.viewState,n,o)))}static _moveHalfLineRight(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);o[r]=wt.fromViewState($i.moveRight(e.cursorConfig,e,a.viewState,n,c))}return o}static _moveDownByViewLines(e,t,n,o){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=wt.fromViewState($i.moveDown(e.cursorConfig,e,l.viewState,n,o))}return r}static _moveDownByModelLines(e,t,n,o){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=wt.fromModelState($i.moveDown(e.cursorConfig,e.model,l.modelState,n,o))}return r}static _moveUpByViewLines(e,t,n,o){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=wt.fromViewState($i.moveUp(e.cursorConfig,e,l.viewState,n,o))}return r}static _moveUpByModelLines(e,t,n,o){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=wt.fromModelState($i.moveUp(e.cursorConfig,e.model,l.modelState,n,o))}return r}static _moveToViewPosition(e,t,n,o,r){return wt.fromViewState(t.viewState.move(n,o,r,0))}static _moveToModelPosition(e,t,n,o,r){return wt.fromModelState(t.modelState.move(n,o,r,0))}static _moveToViewMinColumn(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);o[r]=this._moveToViewPosition(e,a,n,l,c)}return o}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);o[r]=this._moveToViewPosition(e,a,n,l,c)}return o}static _moveToViewCenterColumn(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);o[r]=this._moveToViewPosition(e,a,n,l,c)}return o}static _moveToViewMaxColumn(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);o[r]=this._moveToViewPosition(e,a,n,l,c)}return o}static _moveToViewLastNonWhitespaceColumn(e,t,n){let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);o[r]=this._moveToViewPosition(e,a,n,l,c)}return o}},HD;(function(i){let e=function(n){if(!jn(n))return!1;let o=n;return!(!Ji(o.to)||!jo(o.select)&&!Tne(o.select)||!jo(o.by)&&!Ji(o.by)||!jo(o.value)&&!Xa(o.value))};i.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let o;switch(n.to){case i.RawDirection.Left:o=0;break;case i.RawDirection.Right:o=1;break;case i.RawDirection.Up:o=2;break;case i.RawDirection.Down:o=3;break;case i.RawDirection.PrevBlankLine:o=4;break;case i.RawDirection.NextBlankLine:o=5;break;case i.RawDirection.WrappedLineStart:o=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:o=7;break;case i.RawDirection.WrappedLineColumnCenter:o=8;break;case i.RawDirection.WrappedLineEnd:o=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:o=10;break;case i.RawDirection.ViewPortTop:o=11;break;case i.RawDirection.ViewPortBottom:o=13;break;case i.RawDirection.ViewPortCenter:o=12;break;case i.RawDirection.ViewPortIfOutside:o=14;break;default:return null}let r=0;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Character:r=3;break;case i.RawUnit.HalfLine:r=4;break}return{direction:o,unit:r,select:!!n.select,value:n.value||1}}i.parse=t})(HD||(HD={}));var ln;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(ln||(ln={}));var C1=class{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;let n=e.findTokenIndexAtOffset(t-2),o=e.getStandardTokenType(n);return this.isOK(o)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){let o=String.fromCharCode(n);if(!this.open.includes(o)&&!this.close.includes(o))return o}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}},TB=class{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let t of e)_v(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),_v(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),_v(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),_v(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&_v(this.autoClosingPairsCloseSingleChar,t.close,t)}};function _v(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}var boe="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function hge(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let t of boe)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}var dY=hge();function hY(i){let e=dY;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}var woe=new ko;woe.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function L_(i,e,t,n,o){if(o||(o=At.first(woe)),t.length>o.maxLen){let c=i-o.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+o.maxLen/2),L_(i,e,t,n,o)}let r=Date.now(),s=i-1-n,a=-1,l=null;for(let c=1;!(Date.now()-r>=o.timeBudget);c++){let d=s-o.windowSize*c;e.lastIndex=Math.max(0,d);let h=uge(e,t,s,a);if(!h&&l||(l=h,d<=0))break;a=d}if(l){let c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function uge(i,e,t,n){let o;for(;o=i.exec(e);){let r=o.index||0;if(r<=t&&i.lastIndex>=t)return o;if(n>0&&r>n)return null}return null}var WD=class i{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new C1(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new C1({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){let t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new C1({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:i.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}};WD.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function ms(i,e=0){return i[i.length-(1+e)]}function gge(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function Zn(i,e,t=(n,o)=>n===o){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,o=i.length;n<o;n++)if(!t(i[n],e[n]))return!1;return!0}function pge(i,e){let t=i.length-1;e<t&&(i[e]=i[t]),i.pop()}function xM(i,e,t){return mge(i.length,n=>t(i[n],e))}function mge(i,e){let t=0,n=i-1;for(;t<=n;){let o=(t+n)/2|0,r=e(o);if(r<0)t=o+1;else if(r>0)n=o-1;else return o}return-(t+1)}function Coe(i,e){let t=0,n=i.length;if(n===0)return 0;for(;t<n;){let o=Math.floor((t+n)/2);e(i[o])?n=o:t=o+1}return t}function MB(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],o=[],r=[],s=[];for(let a of e){let l=t(a,n);l<0?o.push(a):l>0?r.push(a):s.push(a)}return i<o.length?MB(i,o,t):i<o.length+s.length?s[0]:MB(i-(o.length+s.length),r,t)}function GX(i,e){let t=[],n;for(let o of i.slice(0).sort(e))!n||e(n[0],o)!==0?(n=[o],t.push(n)):n.push(o);return t}function Ns(i){return i.filter(e=>!!e)}function kM(i){return!Array.isArray(i)||i.length===0}function Dn(i){return Array.isArray(i)&&i.length>0}function br(i,e=t=>t){let t=new Set;return i.filter(n=>{let o=e(n);return t.has(o)?!1:(t.add(o),!0)})}function zD(i,e){let t=fge(i,e);if(t!==-1)return i[t]}function fge(i,e){for(let t=i.length-1;t>=0;t--){let n=i[t];if(e(n))return t}return-1}function EM(i,e){return i.length>0?i[0]:e}function vo(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);let n=[];if(t<=e)for(let o=t;o<e;o++)n.push(o);else for(let o=t;o>e;o--)n.push(o);return n}function LM(i,e,t){let n=i.slice(0,e),o=i.slice(e);return n.concat(t,o)}function M2(i,e){let t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function dy(i,e){let t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function YX(i,e){for(let t of e)i.push(t)}function IM(i){return Array.isArray(i)?i:[i]}function _ge(i,e,t){let n=yoe(i,e),o=i.length,r=t.length;i.length=o+r;for(let s=o-1;s>=n;s--)i[s+r]=i[s];for(let s=0;s<r;s++)i[s+n]=t[s]}function JX(i,e,t,n){let o=yoe(i,e),r=i.splice(o,t);return _ge(i,o,n),r}function yoe(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}var XX;(function(i){function e(o){return o<0}i.isLessThan=e;function t(o){return o>0}i.isGreaterThan=t;function n(o){return o===0}i.isNeitherLessOrGreaterThan=n,i.greaterThan=1,i.lessThan=-1,i.neitherLessOrGreaterThan=0})(XX||(XX={}));function y1(i,e){return(t,n)=>e(i(t),i(n))}var vge=(i,e)=>i-e;function Soe(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){let o=i[n];e(o,t)>0&&(t=o)}return t}function Doe(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){let o=i[n];e(o,t)>=0&&(t=o)}return t}function Age(i,e){return Soe(i,(t,n)=>-e(t,n))}var tp=class{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}},ZX=typeof Buffer<"u",N2,Gi=class{constructor(i){this.buffer=i,this.byteLength=this.buffer.byteLength}static wrap(i){return ZX&&!Buffer.isBuffer(i)&&(i=Buffer.from(i.buffer,i.byteOffset,i.byteLength)),new Gi(i)}toString(){return ZX?this.buffer.toString():(N2||(N2=new TextDecoder),N2.decode(this.buffer))}};function bge(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function wge(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function Ra(i,e){return i[e]*Math.pow(2,24)+i[e+1]*Math.pow(2,16)+i[e+2]*Math.pow(2,8)+i[e+3]}function Fa(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function eZ(i,e){return i[e]}function tZ(i,e,t){i[t]=e}var R2;function xoe(){return R2||(R2=new TextDecoder("UTF-16LE")),R2}var F2;function Cge(){return F2||(F2=new TextDecoder("UTF-16BE")),F2}var B2;function koe(){return B2||(B2=KG()?xoe():Cge()),B2}var Eoe=typeof TextDecoder<"u",jh,NB;Eoe?(jh=i=>new RB(i),NB=yge):(jh=i=>new FB,NB=Loe);function yge(i,e,t){let n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?Loe(i,e,t):xoe().decode(n)}function Loe(i,e,t){let n=[],o=0;for(let r=0;r<t;r++){let s=bge(i,e);e+=2,n[o++]=String.fromCharCode(s)}return n.join("")}var RB=class{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";let e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return koe().decode(e)}_flushBuffer(){let e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){let t=this._capacity-this._bufferLength;t<=1&&(t===0||En(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){let t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}},FB=class{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}},BB=class i{constructor(e,t,n,o,r,s){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=o,this.forwardRegex=r,this.reversedRegex=s,this._openSet=i._toSet(this.open),this._closeSet=i._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let n of e)t.add(n);return t}};function Sge(i){let e=i.length;i=i.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);let t=[];for(let s=0;s<e;s++)t[s]=s;let n=(s,a)=>{let[l,c]=s,[d,h]=a;return l===d||l===h||c===d||c===h},o=(s,a)=>{let l=Math.min(s,a),c=Math.max(s,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let s=0;s<e;s++){let a=i[s];for(let l=s+1;l<e;l++){let c=i[l];n(a,c)&&o(t[s],t[l])}}let r=[];for(let s=0;s<e;s++){let a=[],l=[];for(let c=0;c<e;c++)if(t[c]===s){let[d,h]=i[c];a.push(d),l.push(h)}a.length>0&&r.push({open:a,close:l})}return r}var PB=class{constructor(e,t){this._richEditBracketsBrand=void 0;let n=Sge(t);this.brackets=n.map((o,r)=>new BB(e,r,o.open,o.close,Dge(o.open,o.close,n,r),xge(o.open,o.close,n,r))),this.forwardRegex=kge(this.brackets),this.reversedRegex=Ege(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let o of this.brackets){for(let r of o.open)this.textIsBracket[r]=o,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(let r of o.close)this.textIsBracket[r]=o,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}};function Ioe(i,e,t,n){for(let o=0,r=e.length;o<r;o++){if(o===t)continue;let s=e[o];for(let a of s.open)a.indexOf(i)>=0&&n.push(a);for(let a of s.close)a.indexOf(i)>=0&&n.push(a)}}function Toe(i,e){return i.length-e.length}function TM(i){if(i.length<=1)return i;let e=[],t=new Set;for(let n of i)t.has(n)||(e.push(n),t.add(n));return e}function Dge(i,e,t,n){let o=[];o=o.concat(i),o=o.concat(e);for(let r=0,s=o.length;r<s;r++)Ioe(o[r],t,n,o);return o=TM(o),o.sort(Toe),o.reverse(),MM(o)}function xge(i,e,t,n){let o=[];o=o.concat(i),o=o.concat(e);for(let r=0,s=o.length;r<s;r++)Ioe(o[r],t,n,o);return o=TM(o),o.sort(Toe),o.reverse(),MM(o.map(uY))}function kge(i){let e=[];for(let t of i){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=TM(e),MM(e)}function Ege(i){let e=[];for(let t of i){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=TM(e),MM(e.map(uY))}function Lge(i){let e=/^[\w ]+$/.test(i);return i=cs(i),e?`\\b${i}\\b`:i}function MM(i){let e=`(${i.map(Lge).join(")|(")})`;return noe(e,!0)}var uY=function(){function i(n){if(Eoe){let o=new Uint16Array(n.length),r=0;for(let s=n.length-1;s>=0;s--)o[r++]=n.charCodeAt(s);return koe().decode(o)}else{let o=[],r=0;for(let s=n.length-1;s>=0;s--)o[r++]=n.charAt(s);return o.join("")}}let e=null,t=null;return function(n){return e!==n&&(e=n,t=i(e)),t}}(),Jr=class{static _findPrevBracketInText(e,t,n,o){let r=n.match(e);if(!r)return null;let s=n.length-(r.index||0),a=r[0].length,l=o+s;return new E(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,o,r){let s=uY(n).substring(n.length-r,n.length-o);return this._findPrevBracketInText(e,t,s,o)}static findNextBracketInText(e,t,n,o){let r=n.match(e);if(!r)return null;let s=r.index||0,a=r[0].length;if(a===0)return null;let l=o+s;return new E(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,o,r){let s=n.substring(o,r);return this.findNextBracketInText(e,t,s,o)}},OB=class{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let n of t.close){let o=n.charAt(n.length-1);e.push(o)}return br(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let o=t.findTokenIndexAtOffset(n-1);if(vl(t.getStandardTokenType(o)))return null;let r=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=Jr.findPrevBracketInRange(r,1,s,0,s.length);if(!a)return null;let l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;let c=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(c)?{matchOpenBracket:l}:null}};function hy(i){return i.global&&(i.lastIndex=0),!0}var HB=class{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&hy(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&hy(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&hy(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&hy(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}},WB=class i{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{let n=i._createOpenBracketRegExp(t[0]),o=i._createCloseBracketRegExp(t[1]);n&&o&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:o})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,o){if(e>=3)for(let r=0,s=this._regExpRules.length;r<s;r++){let a=this._regExpRules[r];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:o},{reg:a.previousLineText,text:t}].every(l=>l.reg?(l.reg.lastIndex=0,l.reg.test(l.text)):!0))return a.action}if(e>=2&&n.length>0&&o.length>0)for(let r=0,s=this._brackets.length;r<s;r++){let a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(o))return{indentAction:ln.IndentOutdent}}if(e>=2&&n.length>0){for(let r=0,s=this._brackets.length;r<s;r++)if(this._brackets[r].openRegExp.test(n))return{indentAction:ln.Indent}}return null}static _createOpenBracketRegExp(e){let t=cs(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",i._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=cs(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,i._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ye(t),null}}},Ot=ze("configurationService");function Moe(i,e){let t=Object.create(null);for(let n in i)NM(t,n,i[n],e);return t}function NM(i,e,t,n){let o=e.split("."),r=o.pop(),s=i;for(let a=0;a<o.length;a++){let l=o[a],c=s[l];switch(typeof c){case"undefined":c=s[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${o.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}s=c}if(typeof s=="object"&&s!==null)try{s[r]=t}catch{n(`Ignoring ${e} as ${o.join(".")} is ${JSON.stringify(s)}`)}else n(`Ignoring ${e} as ${o.join(".")} is ${JSON.stringify(s)}`)}function Noe(i,e){let t=e.split(".");Roe(i,t)}function Roe(i,e){let t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){let n=i[t];typeof n=="object"&&!Array.isArray(n)&&(Roe(n,e),Object.keys(n).length===0&&delete i[t])}}function I_(i,e,t){function n(s,a){let l=s;for(let c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}let o=e.split("."),r=n(i,o);return typeof r>"u"?t:r}function Foe(i){return i.replace(/[\[\]]/g,"")}var ki=ze("languageService"),ea=class{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}},Boe=[];function Ke(i,e,t){e instanceof ea||(e=new ea(e,[],t)),Boe.push([i,e])}function zB(){return Boe}var nr=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),ev={JSONContribution:"base.contributions.json"};function Ige(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}var VB=class{constructor(){this._onDidChangeSchema=new Q,this.schemasById={}}registerSchema(e,t){this.schemasById[Ige(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}},Tge=new VB;oi.add(ev.JSONContribution,Tge);var Sa={Configuration:"base.contributions.configuration"},uy="vscode://schemas/settings/resourceLanguage",iZ=oi.as(ev.JSONContribution),Mge=class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Q,this._onDidUpdateConfiguration=new Q,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:m("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},iZ.registerSchema(uy,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(i,e=!0){this.registerConfigurations([i],e)}registerConfigurations(i,e=!0){let t=this.doRegisterConfigurations(i,e);iZ.registerSchema(uy,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}registerDefaultConfigurations(i){var e;let t=[],n=[];for(let{overrides:o,source:r}of i)for(let s in o)if(t.push(s),T_.test(s)){let a=this.configurationDefaultsOverrides.get(s),l=(e=a?.valuesSources)!==null&&e!==void 0?e:new Map;if(r)for(let u of Object.keys(o[s]))l.set(u,r);let c=Object.assign(Object.assign({},a?.value||{}),o[s]);this.configurationDefaultsOverrides.set(s,{source:r,value:c,valuesSources:l});let d=Foe(s),h={type:"object",default:c,description:m("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",d),$ref:uy,defaultDefaultValue:c,source:Ji(r)?void 0:r,defaultValueSource:r};n.push(...gY(s)),this.configurationProperties[s]=h,this.defaultLanguageConfigurationOverridesNode.properties[s]=h}else{this.configurationDefaultsOverrides.set(s,{value:o[s],source:r});let a=this.configurationProperties[s];a&&(this.updatePropertyDefaultValue(s,a),this.updateSchema(s,a))}this.registerOverrideIdentifiers(n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}registerOverrideIdentifiers(i){for(let e of i)this.overrideIdentifiers.add(e);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(i,e){let t=[];return i.forEach(n=>{t.push(...this.validateAndRegisterProperties(n,e,n.extensionInfo,n.restrictedProperties)),this.configurationContributors.push(n),this.registerJSONConfiguration(n)}),t}validateAndRegisterProperties(i,e=!0,t,n,o=3){var r;o=Uo(i.scope)?o:i.scope;let s=[],a=i.properties;if(a)for(let c in a){let d=a[c];if(e&&Fge(c,d)){delete a[c];continue}if(d.source=t,d.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,d),T_.test(c)?d.scope=void 0:(d.scope=Uo(d.scope)?o:d.scope,d.restricted=Uo(d.restricted)?!!(n!=null&&n.includes(c)):d.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c],!((r=a[c].policy)===null||r===void 0)&&r.name&&this.policyConfigurations.set(a[c].policy.name,c);!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),s.push(c)}let l=i.allOf;if(l)for(let c of l)s.push(...this.validateAndRegisterProperties(c,e,t,n,o));return s}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(i){let e=t=>{let n=t.properties;if(n)for(let r in n)this.updateSchema(r,n[r]);let o=t.allOf;o?.forEach(e)};e(i)}updateSchema(i,e){switch(e.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[i]=e;break}}updateOverridePropertyPatternKey(){for(let i of this.overrideIdentifiers.values()){let e=`[${i}]`,t={type:"object",description:m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:m("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:uy};this.updatePropertyDefaultValue(e,t)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),m("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(i,e){let t=this.configurationDefaultsOverrides.get(i),n=t?.value,o=t?.source;jo(n)&&(n=e.defaultDefaultValue,o=void 0),jo(n)&&(n=Rge(e.type)),e.default=n,e.defaultValueSource=o}},Poe="\\[([^\\]]+)\\]",nZ=new RegExp(Poe,"g"),Nge=`^(${Poe})+$`,T_=new RegExp(Nge);function gY(i){let e=[];if(T_.test(i)){let t=nZ.exec(i);for(;t!=null&&t.length;){let n=t[1].trim();n&&e.push(n),t=nZ.exec(i)}}return br(e)}function Rge(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var IS=new Mge;oi.add(Sa.Configuration,IS);function Fge(i,e){var t,n,o,r;return i.trim()?T_.test(i)?m("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):IS.getConfigurationProperties()[i]!==void 0?m("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):!((t=e.policy)===null||t===void 0)&&t.name&&IS.getPolicyConfigurations().get((n=e.policy)===null||n===void 0?void 0:n.name)!==void 0?m("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,(o=e.policy)===null||o===void 0?void 0:o.name,IS.getPolicyConfigurations().get((r=e.policy)===null||r===void 0?void 0:r.name)):null:m("config.property.empty","Cannot register an empty property")}var Bge={ModesRegistry:"editor.modesRegistry"},UB=class{constructor(){this._onDidChangeLanguages=new Q,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}},ud=new UB;oi.add(Bge.ModesRegistry,ud);var Pr="plaintext",Pge=".txt";ud.registerLanguage({id:Pr,extensions:[Pge],aliases:[m("plainText.alias","Plain Text"),"text"],mimetypes:[nr.text]});oi.as(Sa.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var QB=class{constructor(e,t){this.languageId=e;let n;t.colorizedBracketPairs?n=oZ(t.colorizedBracketPairs.map(s=>[s[0],s[1]])):t.brackets?n=oZ(t.brackets.map(s=>[s[0],s[1]]).filter(s=>!(s[0]==="<"&&s[1]===">"))):n=[];let o=new yD(s=>{let a=new Set;return{info:new jB(this,s,a),closing:a}}),r=new yD(s=>{let a=new Set;return{info:new KB(this,s,a),opening:a}});for(let[s,a]of n){let l=o.get(s),c=r.get(a);l.closing.add(c.info),c.opening.add(l.info)}this._openingBrackets=new Map([...o.cachedValues].map(([s,a])=>[s,a.info])),this._closingBrackets=new Map([...r.cachedValues].map(([s,a])=>[s,a.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}};function oZ(i){return i.filter(([e,t])=>e!==""&&t!=="")}var VD=class{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}},jB=class extends VD{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}},KB=class extends VD{constructor(e,t,n){super(e,t),this.closedBrackets=n,this.isOpeningBracket=!1}closes(e){if(e.languageId===this.languageId&&e.config!==this.config)throw new QF("Brackets from different language configuration cannot be used.");return this.closedBrackets.has(e)}getClosedBrackets(){return[...this.closedBrackets]}},Oge=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},rZ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},S1=class{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}},Yi=ze("languageConfigurationService"),qB=class extends J{constructor(i,e){super(),this.configurationService=i,this.languageService=e,this._registry=this._register(new YB),this.onDidChangeEmitter=this._register(new Q),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;let t=new Set(Object.values($B));this._register(this.configurationService.onDidChangeConfiguration(n=>{let o=n.change.keys.some(s=>t.has(s)),r=n.change.overrides.filter(([s,a])=>a.some(l=>t.has(l))).map(([s])=>s);if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new S1(void 0));else for(let s of r)this.languageService.isRegisteredLanguageId(s)&&(this.configurations.delete(s),this.onDidChangeEmitter.fire(new S1(s)))})),this._register(this._registry.onDidChange(n=>{this.configurations.delete(n.languageId),this.onDidChangeEmitter.fire(new S1(n.languageId))}))}register(i,e,t){return this._registry.register(i,e,t)}getLanguageConfiguration(i){let e=this.configurations.get(i);return e||(e=Hge(i,this._registry,this.configurationService,this.languageService),this.configurations.set(i,e)),e}};qB=Oge([rZ(0,Ot),rZ(1,ki)],qB);function Hge(i,e,t,n){let o=e.getLanguageConfiguration(i);if(!o){if(!n.isRegisteredLanguageId(i))throw new Error(`Language id "${i}" is not configured nor known`);o=new PA(i,{})}let r=Wge(o.languageId,t),s=Hoe([o.underlyingConfig,r]);return new PA(o.languageId,s)}var $B={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Wge(i,e){let t=e.getValue($B.brackets,{overrideIdentifier:i}),n=e.getValue($B.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:sZ(t),colorizedBracketPairs:sZ(n)}}function sZ(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function Ooe(i,e,t){let n=i.getLineContent(e),o=hi(n);return o.length>t-1&&(o=o.substring(0,t-1)),o}function zf(i,e,t){i.tokenization.forceTokenization(e);let n=i.tokenization.getLineTokens(e),o=typeof t>"u"?i.getLineMaxColumn(e)-1:t-1;return DM(n,o)}var GB=class{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){let n=new UD(e,t,++this._order);return this._entries.push(n),this._resolved=null,ct(()=>{for(let o=0;o<this._entries.length;o++)if(this._entries[o]===n){this._entries.splice(o,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new PA(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(UD.cmp),Hoe(this._entries.map(e=>e.configuration)))}};function Hoe(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}var UD=class{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}},QD=class{constructor(e){this.languageId=e}},YB=class extends J{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,this._register(this.register(Pr,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let o=this._entries.get(e);o||(o=new GB(e),this._entries.set(e,o));let r=o.register(t,n);return this._onDidChange.fire(new QD(e)),ct(()=>{r.dispose(),this._onDidChange.fire(new QD(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return t?.getResolvedConfiguration()||null}},PA=class i{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new WB(this.underlyingConfig):null,this.comments=i._handleComments(this.underlyingConfig),this.characterPair=new WD(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||dY,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new HB(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new QB(e,this.underlyingConfig)}getWordDefinition(){return hY(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new PB(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new OB(this.brackets)),this._electricCharacter}onEnter(e,t,n,o){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,o):null}getAutoClosingPairs(){return new TB(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet()}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[o,r]=t.blockComment;n.blockCommentStartToken=o,n.blockCommentEndToken=r}return n}};Ke(Yi,qB);function Vf(i,e,t,n){let o=zf(e,t.startLineNumber,t.startColumn),r=n.getLanguageConfiguration(o.languageId);if(!r)return null;let s=o.getLineContent(),a=s.substr(0,t.startColumn-1-o.firstCharOffset),l;t.isEmpty()?l=s.substr(t.startColumn-1-o.firstCharOffset):l=zf(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-o.firstCharOffset);let c="";if(t.startLineNumber>1&&o.firstCharOffset===0){let f=zf(e,t.startLineNumber-1);f.languageId===o.languageId&&(c=f.getLineContent())}let d=r.onEnter(i,c,a,l);if(!d)return null;let h=d.indentAction,u=d.appendText,g=d.removeText||0;u?h===ln.Indent&&(u="	"+u):h===ln.Indent||h===ln.IndentOutdent?u="	":u="";let p=Ooe(e,t.startLineNumber,t.startColumn);return g&&(p=p.substring(0,p.length-g)),{indentAction:h,appendText:u,removeText:g,indentation:p}}var zge=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Vge=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},P2=Object.create(null);function ku(i,e){if(e<=0)return"";P2[i]||(P2[i]=["",i]);let t=P2[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}var As=class JB{constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,o,r){let s=bn.visibleColumnFromColumn(e,t,n);if(r){let a=ku(" ",o),l=bn.prevIndentTabStop(s,o)/o;return ku(a,l)}else{let a="	",l=bn.prevRenderTabStop(s,n)/n;return ku(a,l)}}static shiftIndent(e,t,n,o,r){let s=bn.visibleColumnFromColumn(e,t,n);if(r){let a=ku(" ",o),l=bn.nextIndentTabStop(s,o)/o;return ku(a,l)}else{let a="	",l=bn.nextRenderTabStop(s,n)/n;return ku(a,l)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){let n=this._selection.startLineNumber,o=this._selection.endLineNumber;this._selection.endColumn===1&&n!==o&&(o=o-1);let{tabSize:r,indentSize:s,insertSpaces:a}=this._opts,l=n===o;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let h=n;h<=o;h++,c=d){d=0;let u=e.getLineContent(h),g=rr(u);if(this._opts.isUnshift&&(u.length===0||g===0)||!l&&!this._opts.isUnshift&&u.length===0)continue;if(g===-1&&(g=u.length),h>1&&bn.visibleColumnFromColumn(u,g+1,r)%s!==0&&e.tokenization.isCheapToTokenize(h-1)){let f=Vf(this._opts.autoIndent,e,new E(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)),this._languageConfigurationService);if(f){if(d=c,f.appendText)for(let v=0,b=f.appendText.length;v<b&&d<s&&f.appendText.charCodeAt(v)===32;v++)d++;f.removeText&&(d=Math.max(0,d-f.removeText));for(let v=0;v<d&&!(g===0||u.charCodeAt(g-1)!==32);v++)g--}}if(this._opts.isUnshift&&g===0)continue;let p;this._opts.isUnshift?p=JB.unshiftIndent(u,g+1,r,s,a):p=JB.shiftIndent(u,g+1,r,s,a),this._addEditOperation(t,new E(h,1,h,g+1),p),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=g+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);let c=a?ku(" ",s):"	";for(let d=n;d<=o;d++){let h=e.getLineContent(d),u=rr(h);if(!(this._opts.isUnshift&&(h.length===0||u===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(u===-1&&(u=h.length),!(this._opts.isUnshift&&u===0)))if(this._opts.isUnshift){u=Math.min(u,s);for(let g=0;g<u;g++)if(h.charCodeAt(g)===9){u=g+1;break}this._addEditOperation(t,new E(d,1,d,u+1),"")}else this._addEditOperation(t,new E(d,1,d,1),c),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let o=t.getInverseEditOperations()[0];return new Se(o.range.endLineNumber,o.range.endColumn,o.range.endLineNumber,o.range.endColumn)}let n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let o=this._selection.startColumn;return n.startColumn<=o?n:n.getDirection()===0?new Se(n.startLineNumber,o,n.endLineNumber,n.endColumn):new Se(n.endLineNumber,n.endColumn,n.startLineNumber,o)}return n}};As=zge([Vge(2,Yi)],As);var XB=class{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new E(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new E(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),o=n[0].range,r=n[1].range;return new Se(o.endLineNumber,o.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}},ZB=class{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new E(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new Se(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}};function Uge(i,e,t){let n=i.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let o,r=-1;for(o=e-1;o>=1;o--){if(i.tokenization.getLanguageIdAtPosition(o,0)!==n)return r;let s=i.getLineContent(o);if(t.shouldIgnore(s)||/^\s+$/.test(s)||s===""){r=o;continue}return o}}return-1}function RM(i,e,t,n=!0,o){if(i<4)return null;let r=o.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;if(t<=1)return{indentation:"",action:null};let s=Uge(e,t,r);if(s<0)return null;if(s<1)return{indentation:"",action:null};let a=e.getLineContent(s);if(r.shouldIncrease(a)||r.shouldIndentNextLine(a))return{indentation:hi(a),action:ln.Indent,line:s};if(r.shouldDecrease(a))return{indentation:hi(a),action:null,line:s};{if(s===1)return{indentation:hi(e.getLineContent(s)),action:null,line:s};let l=s-1,c=r.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let h=l-1;h>0;h--)if(!r.shouldIndentNextLine(e.getLineContent(h))){d=h;break}return{indentation:hi(e.getLineContent(d+1)),action:null,line:d+1}}if(n)return{indentation:hi(e.getLineContent(s)),action:null,line:s};for(let d=s;d>0;d--){let h=e.getLineContent(d);if(r.shouldIncrease(h))return{indentation:hi(h),action:ln.Indent,line:d};if(r.shouldIndentNextLine(h)){let u=0;for(let g=d-1;g>0;g--)if(!r.shouldIndentNextLine(e.getLineContent(d))){u=g;break}return{indentation:hi(e.getLineContent(u+1)),action:null,line:u+1}}else if(r.shouldDecrease(h))return{indentation:hi(h),action:null,line:d}}return{indentation:hi(e.getLineContent(1)),action:null,line:1}}}function D1(i,e,t,n,o,r){if(i<4)return null;let s=r.getLanguageConfiguration(t);if(!s)return null;let a=r.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;let l=RM(i,e,n,void 0,r),c=e.getLineContent(n);if(l){let d=l.line;if(d!==void 0){let h=s.onEnter(i,"",e.getLineContent(d),"");if(h){let u=hi(e.getLineContent(d));return h.removeText&&(u=u.substring(0,u.length-h.removeText)),h.indentAction===ln.Indent||h.indentAction===ln.IndentOutdent?u=o.shiftIndent(u):h.indentAction===ln.Outdent&&(u=o.unshiftIndent(u)),a.shouldDecrease(c)&&(u=o.unshiftIndent(u)),h.appendText&&(u+=h.appendText),hi(u)}}return a.shouldDecrease(c)?l.action===ln.Indent?l.indentation:o.unshiftIndent(l.indentation):l.action===ln.Indent?o.shiftIndent(l.indentation):l.indentation}return null}function Qge(i,e,t,n,o){if(i<4)return null;e.tokenization.forceTokenization(t.startLineNumber);let r=e.tokenization.getLineTokens(t.startLineNumber),s=DM(r,t.startColumn-1),a=s.getLineContent(),l=!1,c;s.firstCharOffset>0&&r.getLanguageId(0)!==s.languageId?(l=!0,c=a.substr(0,t.startColumn-1-s.firstCharOffset)):c=r.getLineContent().substring(0,t.startColumn-1);let d;t.isEmpty()?d=a.substr(t.startColumn-1-s.firstCharOffset):d=zf(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-s.firstCharOffset);let h=o.getLanguageConfiguration(s.languageId).indentRulesSupport;if(!h)return null;let u=c,g=hi(c),p={tokenization:{getLineTokens:A=>e.tokenization.getLineTokens(A),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(A,w)=>e.getLanguageIdAtPosition(A,w)},getLineContent:A=>A===t.startLineNumber?u:e.getLineContent(A)},f=hi(r.getLineContent()),v=RM(i,p,t.startLineNumber+1,void 0,o);if(!v){let A=l?f:g;return{beforeEnter:A,afterEnter:A}}let b=l?f:v.indentation;return v.action===ln.Indent&&(b=n.shiftIndent(b)),h.shouldDecrease(d)&&(b=n.unshiftIndent(b)),{beforeEnter:l?f:g,afterEnter:b}}function jge(i,e,t,n,o,r){if(i<4)return null;let s=zf(e,t.startLineNumber,t.startColumn);if(s.firstCharOffset)return null;let a=r.getLanguageConfiguration(s.languageId).indentRulesSupport;if(!a)return null;let l=s.getLineContent(),c=l.substr(0,t.startColumn-1-s.firstCharOffset),d;if(t.isEmpty()?d=l.substr(t.startColumn-1-s.firstCharOffset):d=zf(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-s.firstCharOffset),!a.shouldDecrease(c+d)&&a.shouldDecrease(c+n+d)){let h=RM(i,e,t.startLineNumber,!1,r);if(!h)return null;let u=h.indentation;return h.action!==ln.Indent&&(u=o.unshiftIndent(u)),u}return null}function Woe(i,e,t){let n=t.getLanguageConfiguration(i.getLanguageId()).indentRulesSupport;return!n||e<1||e>i.getLineCount()?null:n.getIndentMetadata(i.getLineContent(e))}var bs=class i{static indent(e,t,n){if(t===null||n===null)return[];let o=[];for(let r=0,s=n.length;r<s;r++)o[r]=new As(n[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return o}static outdent(e,t,n){let o=[];for(let r=0,s=n.length;r<s;r++)o[r]=new As(n[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return o}static shiftIndent(e,t,n){return n=n||1,As.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,As.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,o){let r=[];for(let s=0,a=n.length;s<a;s++)r[s]=new Vn(n[s],o[s]);return new Ho(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,o,r){let s=[];for(let a=0,l=n.length;a<l;a++){let c=n[a],d=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&o.indexOf(`
`)!==o.length-1&&(r=!1),r){let h=new E(d.lineNumber,1,d.lineNumber,1);s[a]=new FA(h,o,c,!0)}else s[a]=new Vn(c,o)}return new Ho(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,o,r){if(o||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let s=il(n);if(s.length===t.length)return s}return null}static paste(e,t,n,o,r,s){let a=this._distributePasteToCursors(e,n,o,r,s);return a?(n=n.sort(E.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,o,r)}static _goodIndentForLine(e,t,n){let o=null,r="",s=RM(e.autoIndent,t,n,!1,e.languageConfigurationService);if(s)o=s.action,r=s.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){let d=t.getLineContent(a);if(Ol(d)>=0)break}if(a<1)return null;let l=t.getLineMaxColumn(a),c=Vf(e.autoIndent,t,new E(a,l,a,l),e.languageConfigurationService);c&&(r=c.indentation+c.appendText)}return o&&(o===ln.Indent&&(r=i.shiftIndent(e,r)),o===ln.Outdent&&(r=i.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,o){let r="",s=n.getStartPosition();if(e.insertSpaces){let a=e.visibleColumnFromColumn(t,s),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)r+=" "}else r="	";return new Vn(n,r,o)}static tab(e,t,n){let o=[];for(let r=0,s=n.length;r<s;r++){let a=n[r];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";let d=e.normalizeIndentation(c);if(!l.startsWith(d)){o[r]=new Vn(new E(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}o[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){o[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}o[r]=new As(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return o}static compositionType(e,t,n,o,r,s,a,l){let c=o.map(d=>this._compositionType(n,d,r,s,a,l));return new Ho(4,c,{shouldPushStackElementBefore:gy(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,o,r,s){if(!t.isEmpty())return null;let a=t.getPosition(),l=Math.max(1,a.column-o),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),d=new E(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===n&&s===0?null:new Wf(d,n,0,s)}static _typeCommand(e,t,n){return n?new Xm(e,t,!0):new Vn(e,t,!0)}static _enter(e,t,n,o){if(e.autoIndent===0)return i._typeCommand(o,`
`,n);if(!t.tokenization.isCheapToTokenize(o.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(o.startLineNumber),c=hi(l).substring(0,o.startColumn-1);return i._typeCommand(o,`
`+e.normalizeIndentation(c),n)}let r=Vf(e.autoIndent,t,o,e.languageConfigurationService);if(r){if(r.indentAction===ln.None||r.indentAction===ln.Indent)return i._typeCommand(o,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===ln.IndentOutdent){let l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),d=`
`+c+`
`+l;return n?new Xm(o,d,!0):new Wf(o,d,-1,c.length-l.length,!0)}else if(r.indentAction===ln.Outdent){let l=i.unshiftIndent(e,r.indentation);return i._typeCommand(o,`
`+e.normalizeIndentation(l+r.appendText),n)}}let s=t.getLineContent(o.startLineNumber),a=hi(s).substring(0,o.startColumn-1);if(e.autoIndent>=4){let l=Qge(e.autoIndent,t,o,{unshiftIndent:c=>i.unshiftIndent(e,c),shiftIndent:c=>i.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,o.getEndPosition()),d=o.endColumn,h=t.getLineContent(o.endLineNumber),u=rr(h);if(u>=0?o=o.setEndPosition(o.endLineNumber,Math.max(o.endColumn,u+1)):o=o.setEndPosition(o.endLineNumber,t.getLineMaxColumn(o.endLineNumber)),n)return new Xm(o,`
`+e.normalizeIndentation(l.afterEnter),!0);{let g=0;return d<=u+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),g=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Wf(o,`
`+e.normalizeIndentation(l.afterEnter),0,g,!0)}}}return i._typeCommand(o,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let o=0,r=n.length;o<r;o++)if(!t.tokenization.isCheapToTokenize(n[o].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,o){let r=Ooe(t,n.startLineNumber,n.startColumn),s=jge(e.autoIndent,t,n,o,{shiftIndent:a=>i.shiftIndent(e,a),unshiftIndent:a=>i.unshiftIndent(e,a)},e.languageConfigurationService);if(s===null)return null;if(s!==e.normalizeIndentation(r)){let a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?i._typeCommand(new E(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(s)+o,!1):i._typeCommand(new E(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(s)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+o,!1)}return null}static _isAutoClosingOvertype(e,t,n,o,r){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let s=0,a=n.length;s<a;s++){let l=n[s];if(!l.isEmpty())return!1;let c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==r)return!1;let h=qd(r);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&h)return!1;if(e.autoClosingOvertype==="auto"){let u=!1;for(let g=0,p=o.length;g<p;g++){let f=o[g];if(c.lineNumber===f.startLineNumber&&c.column===f.startColumn){u=!0;break}}if(!u)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,o,r){let s=[];for(let a=0,l=o.length;a<l;a++){let c=o[a].getPosition(),d=new E(c.lineNumber,c.column,c.lineNumber,c.column+1);s[a]=new Vn(d,r)}return new Ho(4,s,{shouldPushStackElementBefore:gy(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){let n=t.charAt(0),o=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],s=o.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!s&&a}static _findAutoClosingPairOpen(e,t,n,o){let r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(o);if(!r)return null;let s=null;for(let a of r)if(s===null||a.open.length>s.open.length){let l=!0;for(let c of n)if(t.getValueInRange(new E(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+o!==a.open){l=!1;break}l&&(s=a)}return s}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;let n=t.close.charAt(t.close.length-1),o=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[],r=null;for(let s of o)s.open!==t.open&&t.open.includes(s.open)&&t.close.endsWith(s.close)&&(!r||s.open.length>r.open.length)&&(r=s);return r}static _getAutoClosingPairClose(e,t,n,o,r){let s=qd(o),a=s?e.autoClosingQuotes:e.autoClosingBrackets,l=s?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(let p of n)if(!p.isEmpty())return null;let c=n.map(p=>{let f=p.getPosition();return r?{lineNumber:f.lineNumber,beforeColumn:f.column-o.length,afterColumn:f.column}:{lineNumber:f.lineNumber,beforeColumn:f.column,afterColumn:f.column}}),d=this._findAutoClosingPairOpen(e,t,c.map(p=>new q(p.lineNumber,p.beforeColumn)),o);if(!d)return null;let h=this._findContainedAutoClosingPair(e,d),u=h?h.close:"",g=!0;for(let p of c){let{lineNumber:f,beforeColumn:v,afterColumn:b}=p,A=t.getLineContent(f),w=A.substring(0,v-1),C=A.substring(b-1);if(C.startsWith(u)||(g=!1),C.length>0){let y=C.charAt(0);if(!i._isBeforeClosingBrace(e,C)&&!l(y))return null}if(d.open.length===1&&(o==="'"||o==='"')&&a!=="always"){let y=Ms(e.wordSeparators);if(w.length>0){let M=w.charCodeAt(w.length-1);if(y.get(M)===0)return null}}if(!t.tokenization.isCheapToTokenize(f))return null;t.tokenization.forceTokenization(f);let k=t.tokenization.getLineTokens(f),L=DM(k,v-1);if(!d.shouldAutoClose(L,v-L.firstCharOffset))return null;let S=d.findNeutralCharacter();if(S){let y=t.tokenization.getTokenTypeIfInsertingCharacter(f,v,S);if(!d.isOK(y))return null}}return g?d.close.substring(0,d.close.length-u.length):d.close}static _runAutoClosingOpenCharType(e,t,n,o,r,s,a){let l=[];for(let c=0,d=o.length;c<d;c++){let h=o[c];l[c]=new jD(h,r,!s,a)}return new Ho(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return qd(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,o){if(!i._shouldSurroundChar(e,o)||!e.surroundingPairs.hasOwnProperty(o))return!1;let r=qd(o);for(let s of n){if(s.isEmpty())return!1;let a=!0;for(let l=s.startLineNumber;l<=s.endLineNumber;l++){let c=t.getLineContent(l),d=l===s.startLineNumber?s.startColumn-1:0,h=l===s.endLineNumber?s.endColumn-1:c.length,u=c.substring(d,h);if(/[^ \t]/.test(u)){a=!1;break}}if(a)return!1;if(r&&s.startLineNumber===s.endLineNumber&&s.startColumn+1===s.endColumn){let l=t.getValueInRange(s);if(qd(l))return!1}}return!0}static _runSurroundSelectionType(e,t,n,o,r){let s=[];for(let a=0,l=o.length;a<l;a++){let c=o[a],d=t.surroundingPairs[r];s[a]=new XB(c,r,d)}return new Ho(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,o,r){if(!t.electricChars.hasOwnProperty(r)||!o.isEmpty())return null;let s=o.getPosition();n.tokenization.forceTokenization(s.lineNumber);let a=n.tokenization.getLineTokens(s.lineNumber),l;try{l=t.onElectricCharacter(r,a,s.column)}catch(c){return Ye(c),null}if(!l)return null;if(l.matchOpenBracket){let c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:s.lineNumber,column:c},500);if(d){if(d.startLineNumber===s.lineNumber)return null;let h=n.getLineContent(d.startLineNumber),u=hi(h),g=t.normalizeIndentation(u),p=n.getLineContent(s.lineNumber),f=n.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,v=p.substring(f-1,s.column-1),b=g+v+r,A=new E(s.lineNumber,1,s.lineNumber,s.column),w=new Vn(A,b);return new Ho(O2(b,e),[w],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,o,r,s){if(!o)return null;let a=null;for(let h of o)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;let l=a,c=!1;for(let h of o)if(h.deletedText.length!==0){c=!0;break}if(c){if(!i._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;let h=qd(l);for(let p of o)if(p.deletedSelectionStart!==0||p.deletedSelectionEnd!==p.deletedText.length||/^[ \t]+$/.test(p.deletedText)||h&&qd(p.deletedText))return null;let u=[];for(let p of r){if(!p.isEmpty())return null;u.push(p.getPosition())}if(u.length!==o.length)return null;let g=[];for(let p=0,f=u.length;p<f;p++)g.push(new ZB(u[p],o[p].deletedText,l));return new Ho(4,g,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,r,s,l)){let h=r.map(u=>new Vn(new E(u.positionLineNumber,u.positionColumn,u.positionLineNumber,u.positionColumn+1),"",!1));return new Ho(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}let d=this._getAutoClosingPairClose(t,n,r,l,!0);return d!==null?this._runAutoClosingOpenCharType(e,t,n,r,l,!0,d):null}static typeWithInterceptors(e,t,n,o,r,s,a){if(!e&&a===`
`){let d=[];for(let h=0,u=r.length;h<u;h++)d[h]=i._enter(n,o,!1,r[h]);return new Ho(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,o,r)){let d=[],h=!1;for(let u=0,g=r.length;u<g;u++)if(d[u]=this._runAutoIndentType(n,o,r[u],a),!d[u]){h=!0;break}if(!h)return new Ho(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,o,r,s,a))return this._runAutoClosingOvertype(t,n,o,r,a);if(!e){let d=this._getAutoClosingPairClose(n,o,r,a,!1);if(d)return this._runAutoClosingOpenCharType(t,n,o,r,a,!1,d)}if(!e&&this._isSurroundSelectionType(n,o,r,a))return this._runSurroundSelectionType(t,n,o,r,a);if(!e&&this._isTypeInterceptorElectricChar(n,o,r)){let d=this._typeInterceptorElectricChar(t,n,o,r[0],a);if(d)return d}let l=[];for(let d=0,h=r.length;d<h;d++)l[d]=new Vn(r[d],a);let c=O2(a,t);return new Ho(c,l,{shouldPushStackElementBefore:gy(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,o,r){let s=[];for(let l=0,c=o.length;l<c;l++)s[l]=new Vn(o[l],r);let a=O2(r,e);return new Ho(a,s,{shouldPushStackElementBefore:gy(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let o=[];for(let r=0,s=n.length;r<s;r++){let a=n[r].positionLineNumber;if(a===1)o[r]=new Xm(new E(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);o[r]=this._enter(e,t,!1,new E(a,l,a,l))}}return o}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let o=[];for(let r=0,s=n.length;r<s;r++){let a=n[r].positionLineNumber,l=t.getLineMaxColumn(a);o[r]=this._enter(e,t,!1,new E(a,l,a,l))}return o}static lineBreakInsert(e,t,n){let o=[];for(let r=0,s=n.length;r<s;r++)o[r]=this._enter(e,t,!0,n[r]);return o}},jD=class extends Wf{constructor(e,t,n,o){super(e,(n?t:"")+o,0,-o.length),this._openCharacter=t,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new E(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new E(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),super.computeCursorState(e,t)}},eP=class{constructor(e,t,n,o,r,s){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=o,this.insertedSelectionStart=r,this.insertedSelectionEnd=s}};function O2(i,e){return i===" "?e===5||e===6?6:5:4}function gy(i,e){return lZ(i)&&!lZ(e)?!0:i===5?!1:aZ(i)!==aZ(e)}function aZ(i){return i===6||i===5?"space":i}function lZ(i){return i===4||i===5||i===6}var B;(function(i){i.editorSimpleInput=new Le("editorSimpleInput",!1,!0),i.editorTextFocus=new Le("editorTextFocus",!1,m("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new Le("editorFocus",!1,m("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new Le("textInputFocus",!1,m("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new Le("editorReadonly",!1,m("editorReadonly","Whether the editor is read only")),i.inDiffEditor=new Le("inDiffEditor",!1,m("inDiffEditor","Whether the context is a diff editor")),i.columnSelection=new Le("editorColumnSelection",!1,m("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new Le("editorHasSelection",!1,m("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new Le("editorHasMultipleSelections",!1,m("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new Le("editorTabMovesFocus",!1,m("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInWalkThroughSnippet=new Le("isInEmbeddedEditor",!1,!0),i.canUndo=new Le("canUndo",!1,!0),i.canRedo=new Le("canRedo",!1,!0),i.hoverVisible=new Le("editorHoverVisible",!1,m("editorHoverVisible","Whether the editor hover is visible")),i.inCompositeEditor=new Le("inCompositeEditor",void 0,m("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new Le("editorLangId","",m("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new Le("editorHasCompletionItemProvider",!1,m("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new Le("editorHasCodeActionsProvider",!1,m("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new Le("editorHasCodeLensProvider",!1,m("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new Le("editorHasDefinitionProvider",!1,m("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new Le("editorHasDeclarationProvider",!1,m("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new Le("editorHasImplementationProvider",!1,m("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new Le("editorHasTypeDefinitionProvider",!1,m("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new Le("editorHasHoverProvider",!1,m("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new Le("editorHasDocumentHighlightProvider",!1,m("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new Le("editorHasDocumentSymbolProvider",!1,m("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new Le("editorHasReferenceProvider",!1,m("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new Le("editorHasRenameProvider",!1,m("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new Le("editorHasSignatureHelpProvider",!1,m("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new Le("editorHasInlayHintsProvider",!1,m("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new Le("editorHasDocumentFormattingProvider",!1,m("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new Le("editorHasDocumentSelectionFormattingProvider",!1,m("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new Le("editorHasMultipleDocumentFormattingProvider",!1,m("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new Le("editorHasMultipleDocumentSelectionFormattingProvider",!1,m("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(B||(B={}));var Qt=0,qi=class extends $n{runEditorCommand(e,t,n){let o=t._getViewModel();o&&this.runCoreEditorCommand(o,n||{})}},KD;(function(i){let e=function(n){if(!jn(n))return!1;let o=n;return!(!Ji(o.to)||!jo(o.by)&&!Ji(o.by)||!jo(o.value)&&!Xa(o.value)||!jo(o.revealCursor)&&!Tne(o.revealCursor))};i.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Down:"down"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor"};function t(n){let o;switch(n.to){case i.RawDirection.Up:o=1;break;case i.RawDirection.Down:o=2;break;default:return null}let r;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Page:r=3;break;case i.RawUnit.HalfPage:r=4;break;case i.RawUnit.Editor:r=5;break;default:r=2}let s=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:o,unit:r,value:s,revealCursor:a,select:!!n.select}}i.parse=t})(KD||(KD={}));var Zm;(function(i){let e=function(t){if(!jn(t))return!1;let n=t;return!(!Xa(n.lineNumber)&&!Ji(n.lineNumber)||!jo(n.at)&&!Ji(n.at))};i.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Zm||(Zm={}));var OA=class{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{let o=t.get(Ft).getFocusedCodeEditor();return o&&o.hasTextFocus()?this._runEditorCommand(t,o,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{let o=document.activeElement;return o&&["input","textarea"].indexOf(o.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{let o=t.get(Ft).getActiveCodeEditor();return o?(o.focus(),this._runEditorCommand(t,o,n)):!1})}_runEditorCommand(e,t,n){return this.runEditorCommand(e,t,n)||!0}},Hn;(function(i){class e extends qi{constructor(A){super(A),this._minimalReveal=A.minimalReveal,this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,[kn.moveTo(A,A.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)])&&A.revealPrimaryCursor(w.source,!0,this._minimalReveal)}}i.MoveTo=pe(new e({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=pe(new e({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class t extends qi{runCoreEditorCommand(A,w){A.model.pushStackElement();let C=this._getColumnSelectResult(A,A.getPrimaryCursorState(),A.getCursorColumnSelectData(),w);A.setCursorStates(w.source,3,C.viewStates.map(k=>wt.fromViewState(k))),A.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:C.fromLineNumber,fromViewVisualColumn:C.fromVisualColumn,toViewLineNumber:C.toLineNumber,toViewVisualColumn:C.toVisualColumn}),C.reversed?A.revealTopMostCursor(w.source):A.revealBottomMostCursor(w.source)}}i.ColumnSelect=pe(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(b,A,w,C){let k=b.model.validatePosition(C.position),L=b.coordinatesConverter.validateViewPosition(new q(C.viewPosition.lineNumber,C.viewPosition.column),k),S=C.doColumnSelect?w.fromViewLineNumber:L.lineNumber,y=C.doColumnSelect?w.fromViewVisualColumn:C.mouseColumn-1;return qu.columnSelect(b.cursorConfig,b,S,y,L.lineNumber,C.mouseColumn-1)}}),i.CursorColumnSelectLeft=pe(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(b,A,w,C){return qu.columnSelectLeft(b.cursorConfig,b,w)}}),i.CursorColumnSelectRight=pe(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(b,A,w,C){return qu.columnSelectRight(b.cursorConfig,b,w)}});class n extends t{constructor(A){super(A),this._isPaged=A.isPaged}_getColumnSelectResult(A,w,C,k){return qu.columnSelectUp(A.cursorConfig,A,C,this._isPaged)}}i.CursorColumnSelectUp=pe(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=pe(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:3595,linux:{primary:0}}}));class o extends t{constructor(A){super(A),this._isPaged=A.isPaged}_getColumnSelectResult(A,w,C,k){return qu.columnSelectDown(A.cursorConfig,A,C,this._isPaged)}}i.CursorColumnSelectDown=pe(new o({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=pe(new o({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends qi{constructor(){super({id:"cursorMove",precondition:void 0,description:HD.description})}runCoreEditorCommand(A,w){let C=HD.parse(w);C&&this._runCursorMove(A,w.source,C)}_runCursorMove(A,w,C){A.model.pushStackElement(),A.setCursorStates(w,3,r._move(A,A.getCursorStates(),C)),A.revealPrimaryCursor(w,!0)}static _move(A,w,C){let k=C.select,L=C.value;switch(C.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return kn.simpleMove(A,w,C.direction,k,L,C.unit);case 11:case 13:case 12:case 14:return kn.viewportMove(A,w,C.direction,k,L);default:return null}}}i.CursorMoveImpl=r,i.CursorMove=pe(new r);class s extends qi{constructor(A){super(A),this._staticArgs=A.args}runCoreEditorCommand(A,w){let C=this._staticArgs;this._staticArgs.value===-1&&(C={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:w.pageSize||A.cursorConfig.pageSize}),A.model.pushStackElement(),A.setCursorStates(w.source,3,kn.simpleMove(A,A.getCursorStates(),C.direction,C.select,C.value,C.unit)),A.revealPrimaryCursor(w.source,!0)}}i.CursorLeft=pe(new s({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=pe(new s({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:1039}})),i.CursorRight=pe(new s({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=pe(new s({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:1041}})),i.CursorUp=pe(new s({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=pe(new s({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=pe(new s({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:11}})),i.CursorPageUpSelect=pe(new s({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:1035}})),i.CursorDown=pe(new s({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=pe(new s({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=pe(new s({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:12}})),i.CursorPageDownSelect=pe(new s({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:1036}})),i.CreateCursor=pe(new class extends qi{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(b,A){let w;A.wholeLine?w=kn.line(b,b.getPrimaryCursorState(),!1,A.position,A.viewPosition):w=kn.moveTo(b,b.getPrimaryCursorState(),!1,A.position,A.viewPosition);let C=b.getCursorStates();if(C.length>1){let k=w.modelState?w.modelState.position:null,L=w.viewState?w.viewState.position:null;for(let S=0,y=C.length;S<y;S++){let M=C[S];if(!(k&&!M.modelState.selection.containsPosition(k))&&!(L&&!M.viewState.selection.containsPosition(L))){C.splice(S,1),b.model.pushStackElement(),b.setCursorStates(A.source,3,C);return}}}C.push(w),b.model.pushStackElement(),b.setCursorStates(A.source,3,C)}}),i.LastCursorMoveToSelect=pe(new class extends qi{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(b,A){let w=b.getLastAddedCursorIndex(),C=b.getCursorStates(),k=C.slice(0);k[w]=kn.moveTo(b,C[w],!0,A.position,A.viewPosition),b.model.pushStackElement(),b.setCursorStates(A.source,3,k)}});class a extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,kn.moveToBeginningOfLine(A,A.getCursorStates(),this._inSelectionMode)),A.revealPrimaryCursor(w.source,!0)}}i.CursorHome=pe(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=pe(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,this._exec(A.getCursorStates())),A.revealPrimaryCursor(w.source,!0)}_exec(A){let w=[];for(let C=0,k=A.length;C<k;C++){let L=A[C],S=L.modelState.position.lineNumber;w[C]=wt.fromModelState(L.modelState.move(this._inSelectionMode,S,1,0))}return w}}i.CursorLineStart=pe(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=pe(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,kn.moveToEndOfLine(A,A.getCursorStates(),this._inSelectionMode,w.sticky||!1)),A.revealPrimaryCursor(w.source,!0)}}i.CursorEnd=pe(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Qt,kbExpr:B.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=pe(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Qt,kbExpr:B.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,this._exec(A,A.getCursorStates())),A.revealPrimaryCursor(w.source,!0)}_exec(A,w){let C=[];for(let k=0,L=w.length;k<L;k++){let S=w[k],y=S.modelState.position.lineNumber,M=A.model.getLineMaxColumn(y);C[k]=wt.fromModelState(S.modelState.move(this._inSelectionMode,y,M,0))}return C}}i.CursorLineEnd=pe(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=pe(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:0,mac:{primary:1315}}}));class h extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,kn.moveToBeginningOfBuffer(A,A.getCursorStates(),this._inSelectionMode)),A.revealPrimaryCursor(w.source,!0)}}i.CursorTop=pe(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=pe(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:3086,mac:{primary:3088}}}));class u extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,kn.moveToEndOfBuffer(A,A.getCursorStates(),this._inSelectionMode)),A.revealPrimaryCursor(w.source,!0)}}i.CursorBottom=pe(new u({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=pe(new u({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:3085,mac:{primary:3090}}}));class g extends qi{constructor(){super({id:"editorScroll",precondition:void 0,description:KD.description})}runCoreEditorCommand(A,w){let C=KD.parse(w);C&&this._runEditorScroll(A,w.source,C)}_runEditorScroll(A,w,C){let k=this._computeDesiredScrollTop(A,C);if(C.revealCursor){let L=A.getCompletelyVisibleViewRangeAtScrollTop(k);A.setCursorStates(w,3,[kn.findPositionInViewportIfOutside(A,A.getPrimaryCursorState(),L,C.select)])}A.viewLayout.setScrollPosition({scrollTop:k},0)}_computeDesiredScrollTop(A,w){if(w.unit===1){let L=A.getCompletelyVisibleViewRange(),S=A.coordinatesConverter.convertViewRangeToModelRange(L),y;w.direction===1?y=Math.max(1,S.startLineNumber-w.value):y=Math.min(A.model.getLineCount(),S.startLineNumber+w.value);let M=A.coordinatesConverter.convertModelPositionToViewPosition(new q(y,1));return A.viewLayout.getVerticalOffsetForLineNumber(M.lineNumber)}if(w.unit===5){let L=0;return w.direction===2&&(L=A.model.getLineCount()-A.cursorConfig.pageSize),A.viewLayout.getVerticalOffsetForLineNumber(L)}let C;w.unit===3?C=A.cursorConfig.pageSize*w.value:w.unit===4?C=Math.round(A.cursorConfig.pageSize/2)*w.value:C=w.value;let k=(w.direction===1?-1:1)*C;return A.viewLayout.getCurrentScrollTop()+k*A.cursorConfig.lineHeight}}i.EditorScrollImpl=g,i.EditorScroll=pe(new g),i.ScrollLineUp=pe(new class extends qi{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(b,A){i.EditorScroll._runEditorScroll(b,A.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageUp=pe(new class extends qi{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(b,A){i.EditorScroll._runEditorScroll(b,A.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),i.ScrollEditorTop=pe(new class extends qi{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus}})}runCoreEditorCommand(b,A){i.EditorScroll._runEditorScroll(b,A.source,{direction:1,unit:5,value:1,revealCursor:!1,select:!1})}}),i.ScrollLineDown=pe(new class extends qi{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(b,A){i.EditorScroll._runEditorScroll(b,A.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageDown=pe(new class extends qi{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(b,A){i.EditorScroll._runEditorScroll(b,A.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}}),i.ScrollEditorBottom=pe(new class extends qi{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus}})}runCoreEditorCommand(b,A){i.EditorScroll._runEditorScroll(b,A.source,{direction:2,unit:5,value:1,revealCursor:!1,select:!1})}});class p extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,[kn.word(A,A.getPrimaryCursorState(),this._inSelectionMode,w.position)]),A.revealPrimaryCursor(w.source,!0)}}i.WordSelect=pe(new p({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=pe(new p({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=pe(new class extends qi{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(b,A){let w=b.getLastAddedCursorIndex(),C=b.getCursorStates(),k=C.slice(0),L=C[w];k[w]=kn.word(b,L,L.modelState.hasSelection(),A.position),b.model.pushStackElement(),b.setCursorStates(A.source,3,k)}});class f extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){A.model.pushStackElement(),A.setCursorStates(w.source,3,[kn.line(A,A.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),A.revealPrimaryCursor(w.source,!1)}}i.LineSelect=pe(new f({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=pe(new f({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class v extends qi{constructor(A){super(A),this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,w){let C=A.getLastAddedCursorIndex(),k=A.getCursorStates(),L=k.slice(0);L[C]=kn.line(A,k[C],this._inSelectionMode,w.position,w.viewPosition),A.model.pushStackElement(),A.setCursorStates(w.source,3,L)}}i.LastCursorLineSelect=pe(new v({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=pe(new v({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.CancelSelection=pe(new class extends qi{constructor(){super({id:"cancelSelection",precondition:B.hasNonEmptySelection,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,A){b.model.pushStackElement(),b.setCursorStates(A.source,3,[kn.cancelSelection(b,b.getPrimaryCursorState())]),b.revealPrimaryCursor(A.source,!0)}}),i.RemoveSecondaryCursors=pe(new class extends qi{constructor(){super({id:"removeSecondaryCursors",precondition:B.hasMultipleSelections,kbOpts:{weight:Qt+1,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,A){b.model.pushStackElement(),b.setCursorStates(A.source,3,[b.getPrimaryCursorState()]),b.revealPrimaryCursor(A.source,!0),AD(m("removedCursor","Removed secondary cursors"))}}),i.RevealLine=pe(new class extends qi{constructor(){super({id:"revealLine",precondition:void 0,description:Zm.description})}runCoreEditorCommand(b,A){let w=A,C=w.lineNumber||0,k=typeof C=="number"?C+1:parseInt(C)+1;k<1&&(k=1);let L=b.model.getLineCount();k>L&&(k=L);let S=new E(k,1,k,b.model.getLineMaxColumn(k)),y=0;if(w.at)switch(w.at){case Zm.RawAtArgument.Top:y=3;break;case Zm.RawAtArgument.Center:y=1;break;case Zm.RawAtArgument.Bottom:y=4;break}let M=b.coordinatesConverter.convertModelRangeToViewRange(S);b.revealRange(A.source,!1,M,y,0)}}),i.SelectAll=new class extends OA{constructor(){super(rge)}runDOMCommand(){as&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(b,A,w){let C=A._getViewModel();C&&this.runCoreEditorCommand(C,w)}runCoreEditorCommand(b,A){b.model.pushStackElement(),b.setCursorStates("keyboard",3,[kn.selectAll(b,b.getPrimaryCursorState())])}},i.SetSelection=pe(new class extends qi{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(b,A){b.model.pushStackElement(),b.setCursorStates(A.source,3,[wt.fromModelSelection(A.selection)])}})})(Hn||(Hn={}));var Kge=we.and(B.textInputFocus,B.columnSelection);function tv(i,e){Vr.registerKeybindingRule({id:i,primary:e,when:Kge,weight:Qt+1})}tv(Hn.CursorColumnSelectLeft.id,1039);tv(Hn.CursorColumnSelectRight.id,1041);tv(Hn.CursorColumnSelectUp.id,1040);tv(Hn.CursorColumnSelectPageUp.id,1035);tv(Hn.CursorColumnSelectDown.id,1042);tv(Hn.CursorColumnSelectPageDown.id,1036);function cZ(i){return i.register(),i}var Uf;(function(i){class e extends $n{runEditorCommand(n,o,r){let s=o._getViewModel();s&&this.runCoreEditingCommand(o,s,r||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=pe(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:B.writable,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,o){t.pushUndoStop(),t.executeCommands(this.id,bs.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection)))}}),i.Outdent=pe(new class extends e{constructor(){super({id:"outdent",precondition:B.writable,kbOpts:{weight:Qt,kbExpr:we.and(B.editorTextFocus,B.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,o){t.pushUndoStop(),t.executeCommands(this.id,bs.outdent(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.Tab=pe(new class extends e{constructor(){super({id:"tab",precondition:B.writable,kbOpts:{weight:Qt,kbExpr:we.and(B.editorTextFocus,B.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,o){t.pushUndoStop(),t.executeCommands(this.id,bs.tab(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=pe(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,o){let[r,s]=x_.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,s),n.setPrevEditOperationType(2)}}),i.DeleteRight=pe(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Qt,kbExpr:B.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,o){let[r,s]=x_.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,s),n.setPrevEditOperationType(3)}}),i.Undo=new class extends OA{constructor(){super(voe)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,o){if(!(!n.hasModel()||n.getOption(83)===!0))return n.getModel().undo()}},i.Redo=new class extends OA{constructor(){super(Aoe)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,o){if(!(!n.hasModel()||n.getOption(83)===!0))return n.getModel().redo()}}})(Uf||(Uf={}));var qD=class extends SM{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){let n=e.get(Ft).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}};function tm(i,e){cZ(new qD("default:"+i,i)),cZ(new qD(i,i,e))}tm("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});tm("replacePreviousChar");tm("compositionType");tm("compositionStart");tm("compositionEnd");tm("paste");tm("cut");var pY=ze("markerDecorationsService"),qge=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},$ge=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},HA=class{constructor(i,e){}dispose(){}};HA.ID="editor.contrib.markerDecorations";HA=qge([$ge(1,pY)],HA);Wt(HA.ID,HA);function Co(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;let e=Array.isArray(i)?[]:{};return Object.keys(i).forEach(t=>{i[t]&&typeof i[t]=="object"?e[t]=Co(i[t]):e[t]=i[t]}),e}function mY(i){if(!i||typeof i!="object")return i;let e=[i];for(;e.length>0;){let t=e.shift();Object.freeze(t);for(let n in t)if(zoe.call(t,n)){let o=t[n];typeof o=="object"&&!Object.isFrozen(o)&&!Che(o)&&e.push(o)}}return i}var zoe=Object.prototype.hasOwnProperty;function WA(i,e){return tP(i,e,new Set)}function tP(i,e,t){if(Uo(i))return i;let n=e(i);if(typeof n<"u")return n;if(Gg(i)){let o=[];for(let r of i)o.push(tP(r,e,t));return o}if(jn(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);let o={};for(let r in i)zoe.call(i,r)&&(o[r]=tP(i[r],e,t));return t.delete(i),o}return i}function Ur(i,e,t=!0){return jn(i)?(jn(e)&&Object.keys(e).forEach(n=>{n in i?t&&(jn(i[n])&&jn(e[n])?Ur(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function yr(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!yr(i[t],e[t]))return!1}else{let o=[];for(n in i)o.push(n);o.sort();let r=[];for(n in e)r.push(n);if(r.sort(),!yr(o,r))return!1;for(t=0;t<o.length;t++)if(!yr(i[o[t]],e[o[t]]))return!1}return!0}var $D=class extends J{constructor(e,t){super(),this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,o=0;t?(n=t.width,o=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,o=this._referenceDomElement.clientHeight),n=Math.max(5,n),o=Math.max(5,o),(this._width!==n||this._height!==o)&&(this._width=n,this._height=o,e&&this._onDidChange.fire())}},GD=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=ml(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=ml(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=ml(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=ml(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=ml(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=ml(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=ml(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=ml(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=ml(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=ml(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function ml(i){return typeof i=="number"?`${i}px`:i}function Pt(i){return new GD(i)}function To(i,e){i instanceof GD?(i.setFontFamily(e.getMassagedFontFamily()),i.setFontWeight(e.fontWeight),i.setFontSize(e.fontSize),i.setFontFeatureSettings(e.fontFeatureSettings),i.setLineHeight(e.lineHeight),i.setLetterSpacing(e.letterSpacing)):(i.style.fontFamily=e.getMassagedFontFamily(),i.style.fontWeight=e.fontWeight,i.style.fontSize=e.fontSize+"px",i.style.fontFeatureSettings=e.fontFeatureSettings,i.style.lineHeight=e.lineHeight+"px",i.style.letterSpacing=e.letterSpacing+"px")}var iP=class{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}},nP=class i{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";let t=document.createElement("div");To(t,this._bareFontInfo),e.appendChild(t);let n=document.createElement("div");To(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);let o=document.createElement("div");To(o,this._bareFontInfo),o.style.fontStyle="italic",e.appendChild(o);let r=[];for(let s of this._requests){let a;s.type===0&&(a=t),s.type===2&&(a=n),s.type===1&&(a=o),a.appendChild(document.createElement("br"));let l=document.createElement("span");i._render(l,s),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let n="\xA0";for(let o=0;o<8;o++)n+=n;e.innerText=n}else{let n=t.chr;for(let o=0;o<8;o++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){let n=this._requests[e],o=this._testElements[e];n.fulfill(o.offsetWidth/256)}}};function Gge(i,e){new nP(i,e).read()}var xo={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},$d=8,YD=class{constructor(e){this._values=e}hasChanged(e){return this._values[e]}},JD=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},dn=class{constructor(e,t,n,o){this.id=e,this.name=t,this.defaultValue=n,this.schema=o}applyUpdate(e,t){return FM(e,t)}compute(e,t,n){return n}},kg=class{constructor(e,t){this.newValue=e,this.didChange=t}};function FM(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new kg(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){let n=Array.isArray(i)&&Array.isArray(e)&&Zn(i,e);return new kg(e,!n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){let o=FM(i[n],e[n]);o.didChange&&(i[n]=o.newValue,t=!0)}return new kg(i,t)}var Kh=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return FM(e,t)}validate(e){return this.defaultValue}},Cd=class{constructor(e,t,n,o){this.id=e,this.name=t,this.defaultValue=n,this.schema=o}applyUpdate(e,t){return FM(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}};function We(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}var yt=class extends Cd{constructor(e,t,n,o=void 0){typeof o<"u"&&(o.type="boolean",o.default=n),super(e,t,n,o)}validate(e){return We(e,this.defaultValue)}};function oP(i,e,t,n){if(typeof i>"u")return e;let o=parseInt(i,10);return isNaN(o)?e:(o=Math.max(t,o),o=Math.min(n,o),o|0)}var Ii=class i extends Cd{constructor(e,t,n,o,r,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=o,s.maximum=r),super(e,t,n,s),this.minimum=o,this.maximum=r}static clampedInt(e,t,n,o){return oP(e,t,n,o)}validate(e){return i.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}},Nl=class i extends Cd{constructor(e,t,n,o,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=o}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;let n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(i.float(e,this.defaultValue))}},Mr=class i extends Cd{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,o=void 0){typeof o<"u"&&(o.type="string",o.default=n),super(e,t,n,o)}validate(e){return i.string(e,this.defaultValue)}};function lo(i,e,t){return typeof i!="string"||t.indexOf(i)===-1?e:i}var hn=class extends Cd{constructor(e,t,n,o,r=void 0){typeof r<"u"&&(r.type="string",r.enum=o,r.default=n),super(e,t,n,r),this._allowedValues=o}validate(e){return lo(e,this.defaultValue,this._allowedValues)}},$u=class extends dn{constructor(e,t,n,o,r,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=o),super(e,t,n,a),this._allowedValues=r,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function Yge(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var rP=class extends dn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[m("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),m("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),m("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:m("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}},sP=class extends dn{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:m("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:m("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertSpace:We(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:We(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};function Jge(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Ln;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(Ln||(Ln={}));function Xge(i){switch(i){case"line":return Ln.Line;case"block":return Ln.Block;case"underline":return Ln.Underline;case"line-thin":return Ln.LineThin;case"block-outline":return Ln.BlockOutline;case"underline-thin":return Ln.UnderlineThin}}var aP=class extends Kh{constructor(){super(130)}compute(e,t,n){let o=["monaco-editor"];return t.get(35)&&o.push(t.get(35)),e.extraEditorClassName&&o.push(e.extraEditorClassName),t.get(68)==="default"?o.push("mouse-default"):t.get(68)==="copy"&&o.push("mouse-copy"),t.get(102)&&o.push("showUnused"),t.get(128)&&o.push("showDeprecated"),o.join(" ")}},lP=class extends yt{constructor(){super(33,"emptySelectionClipboard",!0,{description:m("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}},cP=class extends dn{constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(37,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:m("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[m("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),m("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),m("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:m("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[m("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),m("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),m("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:m("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:m("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:gt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:m("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:m("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{cursorMoveOnType:We(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":lo(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":lo(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:We(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:We(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:We(t.loop,this.defaultValue.loop)}}},$l=class i extends dn{constructor(){super(47,"fontLigatures",i.OFF,{anyOf:[{type:"boolean",description:m("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:m("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:m("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?i.OFF:e==="true"?i.ON:e:e?i.ON:i.OFF}};$l.OFF='"liga" off, "calt" off';$l.ON='"liga" on, "calt" on';var dP=class extends Kh{constructor(){super(46)}compute(e,t,n){return e.fontInfo}},hP=class extends Cd{constructor(){super(48,"fontSize",Or.fontSize,{type:"number",minimum:6,maximum:100,default:Or.fontSize,description:m("fontSize","Controls the font size in pixels.")})}validate(e){let t=Nl.float(e,this.defaultValue);return t===0?Or.fontSize:Nl.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}},M_=class i extends dn{constructor(){super(49,"fontWeight",Or.fontWeight,{anyOf:[{type:"number",minimum:i.MINIMUM_VALUE,maximum:i.MAXIMUM_VALUE,errorMessage:m("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:i.SUGGESTION_VALUES}],default:Or.fontWeight,description:m("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Ii.clampedInt(e,Or.fontWeight,i.MINIMUM_VALUE,i.MAXIMUM_VALUE))}};M_.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];M_.MINIMUM_VALUE=1;M_.MAXIMUM_VALUE=1e3;var uP=class extends dn{constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[m("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),m("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),m("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(53,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:m("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:m("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:m("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:m("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:m("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:m("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:m("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:m("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:m("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,o,r,s;if(!e||typeof e!="object")return this.defaultValue;let a=e;return{multiple:lo(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:lo(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:lo(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(o=a.multipleDeclarations)!==null&&o!==void 0?o:lo(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(r=a.multipleImplementations)!==null&&r!==void 0?r:lo(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(s=a.multipleReferences)!==null&&s!==void 0?s:lo(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Mr.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Mr.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Mr.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Mr.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Mr.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}},gP=class extends dn{constructor(){let e={enabled:!0,delay:300,sticky:!0,above:!0};super(55,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:m("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:m("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:m("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:m("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:We(t.enabled,this.defaultValue.enabled),delay:Ii.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:We(t.sticky,this.defaultValue.sticky),above:We(t.above,this.defaultValue.above)}}},XD=class i extends Kh{constructor(){super(133)}compute(e,t,n){return i.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,o=(e.viewLineCount+n)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:o,minimapLineCount:r}}static _computeMinimapLayout(e,t){let n=e.outerWidth,o=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*o),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:o};let s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters,u=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale,g=e.minimap.maxColumn,p=e.minimap.size,f=e.minimap.side,v=e.verticalScrollbarWidth,b=e.viewLineCount,A=e.remainingWidth,w=e.isViewportWrapping,C=h?2:3,k=Math.floor(r*o),L=k/r,S=!1,y=!1,M=C*u,O=u/r,H=1;if(p==="fill"||p==="fit"){let{typicalViewportLineCount:_e,extraLinesBeyondLastLine:Ve,desiredRatio:Qe,minimapLineCount:pt}=i.computeContainedMinimapLineCount({viewLineCount:b,scrollBeyondLastLine:d,height:o,lineHeight:l,pixelRatio:r});if(b/pt>1)S=!0,y=!0,u=1,M=1,O=u/r;else{let ke=!1,xe=u+1;if(p==="fit"){let Et=Math.ceil((b+Ve)*M);w&&a&&A<=t.stableFitRemainingWidth?(ke=!0,xe=t.stableFitMaxMinimapScale):ke=Et>k}if(p==="fill"||ke){S=!0;let Et=u;M=Math.min(l*r,Math.max(1,Math.floor(1/Qe))),w&&a&&A<=t.stableFitRemainingWidth&&(xe=t.stableFitMaxMinimapScale),u=Math.min(xe,Math.max(1,Math.floor(M/C))),u>Et&&(H=Math.min(2,u/Et)),O=u/r/H,k=Math.ceil(Math.max(_e,b+Ve)*M),w?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=A,t.stableFitMaxMinimapScale=u):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}let D=Math.floor(g*O),K=Math.min(D,Math.max(0,Math.floor((A-v-2)*O/(c+O)))+$d),oe=Math.floor(r*K),ie=oe/r;oe=Math.floor(oe*H);let ce=h?1:2,se=f==="left"?0:n-K-v;return{renderMinimap:ce,minimapLeft:se,minimapWidth:K,minimapHeightIsEditorHeight:S,minimapIsSampling:y,minimapScale:u,minimapLineHeight:M,minimapCanvasInnerWidth:oe,minimapCanvasInnerHeight:k,minimapCanvasOuterWidth:ie,minimapCanvasOuterHeight:L}}static computeLayout(e,t){let n=t.outerWidth|0,o=t.outerHeight|0,r=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,h=e.get(125),u=h==="inherit"?e.get(124):h,g=u==="inherit"?e.get(120):u,p=e.get(123),f=e.get(2),v=t.isDominatedByLongLines,b=e.get(52),A=e.get(62).renderType!==0,w=e.get(63),C=e.get(96),k=e.get(67),L=e.get(94),S=L.verticalScrollbarSize,y=L.verticalHasArrows,M=L.arrowSize,O=L.horizontalScrollbarSize,H=e.get(60),D=e.get(39),K=e.get(101)!=="never",oe;if(typeof H=="string"&&/^\d+(\.\d+)?ch$/.test(H)){let Kt=parseFloat(H.substr(0,H.length-2));oe=Ii.clampedInt(Kt*a,0,0,1e3)}else oe=Ii.clampedInt(H,0,0,1e3);D&&K&&(oe+=16);let ie=0;if(A){let Kt=Math.max(s,w);ie=Math.round(Kt*l)}let ce=0;b&&(ce=r);let se=0,_e=se+ce,Ve=_e+ie,Qe=Ve+oe,pt=n-ce-ie-oe,ke=!1,xe=!1,Et=-1;f!==2&&(u==="inherit"&&v?(ke=!0,xe=!0):g==="on"||g==="bounded"?xe=!0:g==="wordWrapColumn"&&(Et=p));let Ri=i._computeMinimapLayout({outerWidth:n,outerHeight:o,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:C,minimap:k,verticalScrollbarWidth:S,viewLineCount:d,remainingWidth:pt,isViewportWrapping:xe},t.memory||new JD);Ri.renderMinimap!==0&&Ri.minimapLeft===0&&(se+=Ri.minimapWidth,_e+=Ri.minimapWidth,Ve+=Ri.minimapWidth,Qe+=Ri.minimapWidth);let ci=pt-Ri.minimapWidth,Dt=Math.max(1,Math.floor((ci-S-2)/a)),Fi=y?M:0;return xe&&(Et=Math.max(1,Dt),g==="bounded"&&(Et=Math.min(Et,p))),{width:n,height:o,glyphMarginLeft:se,glyphMarginWidth:ce,lineNumbersLeft:_e,lineNumbersWidth:ie,decorationsLeft:Ve,decorationsWidth:oe,contentLeft:Qe,contentWidth:ci,minimap:Ri,viewportColumn:Dt,isWordWrapMinified:ke,isViewportWrapping:xe,wrappingColumn:Et,verticalScrollbarWidth:S,horizontalScrollbarHeight:O,overviewRuler:{top:Fi,width:S,height:o-2*Fi,right:0}}}},pP=class extends dn{constructor(){let e={enabled:!0};super(59,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:m("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:We(e.enabled,this.defaultValue.enabled)}}},mP=class extends dn{constructor(){let e={stickyScroll:{enabled:!1}};super(34,"experimental",e,{"editor.experimental.stickyScroll.enabled":{type:"boolean",default:e.stickyScroll.enabled,description:m("editor.experimental.stickyScroll","Shows the nested current scopes during the scroll at the top of the editor.")}})}validate(e){var t;return!e||typeof e!="object"?this.defaultValue:{stickyScroll:{enabled:We((t=e.stickyScroll)===null||t===void 0?void 0:t.enabled,this.defaultValue.stickyScroll.enabled)}}}},fP=class extends dn{constructor(){let e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(129,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:m("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[m("editor.inlayHints.on","Inlay hints are enabled"),m("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding `Ctrl+Alt`"),m("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding `Ctrl+Alt`"),m("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:m("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:m("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:m("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:lo(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ii.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Mr.string(t.fontFamily,this.defaultValue.fontFamily),padding:We(t.padding,this.defaultValue.padding)}}},_P=class extends Nl{constructor(){super(61,"lineHeight",Or.lineHeight,e=>Nl.clamp(e,0,150),{markdownDescription:m("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}},vP=class extends dn{constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(67,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:m("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:m("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[m("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),m("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),m("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:m("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:m("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:m("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:m("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:m("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:m("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:We(t.enabled,this.defaultValue.enabled),autohide:We(t.autohide,this.defaultValue.autohide),size:lo(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:lo(t.side,this.defaultValue.side,["right","left"]),showSlider:lo(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:We(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ii.clampedInt(t.scale,1,1,3),maxColumn:Ii.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}};function Zge(i){return i==="ctrlCmd"?gt?"metaKey":"ctrlKey":"altKey"}var AP=class extends dn{constructor(){super(77,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{top:Ii.clampedInt(t.top,0,0,1e3),bottom:Ii.clampedInt(t.bottom,0,0,1e3)}}},bP=class extends dn{constructor(){let e={enabled:!0,cycle:!1};super(78,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:m("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:m("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:We(t.enabled,this.defaultValue.enabled),cycle:We(t.cycle,this.defaultValue.cycle)}}},wP=class extends Kh{constructor(){super(131)}compute(e,t,n){return e.pixelRatio}},CP=class extends dn{constructor(){let e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[m("on","Quick suggestions show inside the suggest widget"),m("inline","Quick suggestions show as ghost text"),m("off","Quick suggestions are disabled")]}];super(81,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:m("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:m("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:m("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:m("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){let c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;let{other:t,comments:n,strings:o}=e,r=["on","inline","off"],s,a,l;return typeof t=="boolean"?s=t?"on":"off":s=lo(t,this.defaultValue.other,r),typeof n=="boolean"?a=n?"on":"off":a=lo(n,this.defaultValue.comments,r),typeof o=="boolean"?l=o?"on":"off":l=lo(o,this.defaultValue.strings,r),{other:s,comments:a,strings:l}}},yP=class extends dn{constructor(){super(62,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[m("lineNumbers.off","Line numbers are not rendered."),m("lineNumbers.on","Line numbers are rendered as absolute number."),m("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),m("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:m("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}};function ZD(i){let e=i.get(89);return e==="editable"?i.get(83):e!=="on"}var SP=class extends dn{constructor(){let e=[],t={type:"number",description:m("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(93,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:m("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:m("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:Ii.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){let o=n;t.push({column:Ii.clampedInt(o.column,0,0,1e4),color:o.color})}return t.sort((n,o)=>n.column-o.column),t}return this.defaultValue}};function dZ(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}var epe=class extends dn{constructor(){let i={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(94,"scrollbar",i,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),m("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),m("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),m("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),m("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:i.verticalScrollbarSize,description:m("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:i.horizontalScrollbarSize,description:m("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:i.scrollByPage,description:m("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(i){if(!i||typeof i!="object")return this.defaultValue;let e=i,t=Ii.clampedInt(e.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=Ii.clampedInt(e.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ii.clampedInt(e.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:dZ(e.vertical,this.defaultValue.vertical),horizontal:dZ(e.horizontal,this.defaultValue.horizontal),useShadows:We(e.useShadows,this.defaultValue.useShadows),verticalHasArrows:We(e.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:We(e.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:We(e.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:We(e.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:t,horizontalSliderSize:Ii.clampedInt(e.horizontalSliderSize,t,0,1e3),verticalScrollbarSize:n,verticalSliderSize:Ii.clampedInt(e.verticalSliderSize,n,0,1e3),scrollByPage:We(e.scrollByPage,this.defaultValue.scrollByPage)}}},Xr="inUntrustedWorkspace",mr={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},DP=class extends dn{constructor(){let e={nonBasicASCII:Xr,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Xr,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(115,"unicodeHighlight",e,{[mr.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Xr],default:e.nonBasicASCII,description:m("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[mr.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:m("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[mr.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:m("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[mr.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Xr],default:e.includeComments,description:m("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[mr.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Xr],default:e.includeStrings,description:m("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to unicode highlighting.")},[mr.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:m("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[mr.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:m("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(yr(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0)),t.allowedLocales&&e&&(yr(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),n=!0));let o=super.applyUpdate(e,t);return n?new kg(o.newValue,!0):o}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{nonBasicASCII:Qf(t.nonBasicASCII,Xr,[!0,!1,Xr]),invisibleCharacters:We(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:We(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Qf(t.includeComments,Xr,[!0,!1,Xr]),includeStrings:Qf(t.includeStrings,Xr,[!0,!1,Xr]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;let n={};for(let[o,r]of Object.entries(e))r===!0&&(n[o]=!0);return n}},xP=class extends dn{constructor(){let e={enabled:!0,mode:"subwordSmart"};super(57,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:m("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:We(t.enabled,this.defaultValue.enabled),mode:lo(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}},kP=class extends dn{constructor(){let e={enabled:xo.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:xo.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:m("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:We(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:We(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},EP=class extends dn{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairs.true","Enables bracket pair guides."),m("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),m("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:m("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),m("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),m("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:m("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:m("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:m("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[m("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),m("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),m("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:m("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{bracketPairs:Qf(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Qf(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:We(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:We(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Qf(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Qf(i,e,t){let n=t.indexOf(i);return n===-1?e:t[n]}var LP=class extends dn{constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(108,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[m("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),m("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:m("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:m("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:m("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:m("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:m("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:m("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:m("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:m("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:m("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:m("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:m("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertMode:lo(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:We(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:We(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:We(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:We(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:We(t.showIcons,this.defaultValue.showIcons),showStatusBar:We(t.showStatusBar,this.defaultValue.showStatusBar),preview:We(t.preview,this.defaultValue.preview),previewMode:lo(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:We(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:We(t.showMethods,this.defaultValue.showMethods),showFunctions:We(t.showFunctions,this.defaultValue.showFunctions),showConstructors:We(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:We(t.showDeprecated,this.defaultValue.showDeprecated),showFields:We(t.showFields,this.defaultValue.showFields),showVariables:We(t.showVariables,this.defaultValue.showVariables),showClasses:We(t.showClasses,this.defaultValue.showClasses),showStructs:We(t.showStructs,this.defaultValue.showStructs),showInterfaces:We(t.showInterfaces,this.defaultValue.showInterfaces),showModules:We(t.showModules,this.defaultValue.showModules),showProperties:We(t.showProperties,this.defaultValue.showProperties),showEvents:We(t.showEvents,this.defaultValue.showEvents),showOperators:We(t.showOperators,this.defaultValue.showOperators),showUnits:We(t.showUnits,this.defaultValue.showUnits),showValues:We(t.showValues,this.defaultValue.showValues),showConstants:We(t.showConstants,this.defaultValue.showConstants),showEnums:We(t.showEnums,this.defaultValue.showEnums),showEnumMembers:We(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:We(t.showKeywords,this.defaultValue.showKeywords),showWords:We(t.showWords,this.defaultValue.showWords),showColors:We(t.showColors,this.defaultValue.showColors),showFiles:We(t.showFiles,this.defaultValue.showFiles),showReferences:We(t.showReferences,this.defaultValue.showReferences),showFolders:We(t.showFolders,this.defaultValue.showFolders),showTypeParameters:We(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:We(t.showSnippets,this.defaultValue.showSnippets),showUsers:We(t.showUsers,this.defaultValue.showUsers),showIssues:We(t.showIssues,this.defaultValue.showIssues)}}},IP=class extends dn{constructor(){super(104,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:m("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:We(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}},TP=class extends Kh{constructor(){super(132)}compute(e,t,n){return t.get(83)?!0:e.tabFocusMode}};function tpe(i){switch(i){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}var MP=class extends Kh{constructor(){super(134)}compute(e,t,n){let o=t.get(133);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:o.isWordWrapMinified,isViewportWrapping:o.isViewportWrapping,wrappingColumn:o.wrappingColumn}}},NP=class extends dn{constructor(){let e={enabled:!0};super(32,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:We(e.enabled,this.defaultValue.enabled)}}},ipe="Consolas, 'Courier New', monospace",npe="Menlo, Monaco, 'Courier New', monospace",ope="'Droid Sans Mono', 'monospace', monospace",Or={fontFamily:gt?npe:go?ope:ipe,fontWeight:"normal",fontSize:gt?12:14,lineHeight:0,letterSpacing:0},ef=[];function me(i){return ef[i.id]=i,i}var ll={acceptSuggestionOnCommitCharacter:me(new yt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:m("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`; `) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:me(new hn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",m("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:m("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:me(new rP),accessibilityPageSize:me(new Ii(3,"accessibilityPageSize",10,1,1073741824,{description:m("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:me(new Mr(4,"ariaLabel",m("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:me(new hn(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),m("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:m("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:me(new hn(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:me(new hn(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:me(new hn(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),m("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:m("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:me(new $u(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Yge,{enumDescriptions:[m("editor.autoIndent.none","The editor will not insert indentation automatically."),m("editor.autoIndent.keep","The editor will keep the current line's indentation."),m("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),m("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),m("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:m("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:me(new yt(10,"automaticLayout",!1)),autoSurround:me(new hn(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[m("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),m("editor.autoSurround.quotes","Surround with quotes but not brackets."),m("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:m("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:me(new kP),bracketPairGuides:me(new EP),stickyTabStops:me(new yt(106,"stickyTabStops",!1,{description:m("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:me(new yt(14,"codeLens",!0,{description:m("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:me(new Mr(15,"codeLensFontFamily","",{description:m("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:me(new Ii(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:m("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:me(new yt(17,"colorDecorators",!0,{description:m("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:me(new yt(18,"columnSelection",!1,{description:m("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:me(new sP),contextmenu:me(new yt(20,"contextmenu",!0)),copyWithSyntaxHighlighting:me(new yt(21,"copyWithSyntaxHighlighting",!0,{description:m("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:me(new $u(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Jge,{description:m("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:me(new yt(23,"cursorSmoothCaretAnimation",!1,{description:m("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:me(new $u(24,"cursorStyle",Ln.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Xge,{description:m("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:me(new Ii(25,"cursorSurroundingLines",0,0,1073741824,{description:m("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:me(new hn(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[m("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),m("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:m("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:me(new Ii(27,"cursorWidth",0,0,1073741824,{markdownDescription:m("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:me(new yt(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:me(new yt(29,"disableMonospaceOptimizations",!1)),domReadOnly:me(new yt(30,"domReadOnly",!1)),dragAndDrop:me(new yt(31,"dragAndDrop",!0,{description:m("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:me(new lP),dropIntoEditor:me(new NP),experimental:me(new mP),extraEditorClassName:me(new Mr(35,"extraEditorClassName","")),fastScrollSensitivity:me(new Nl(36,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:m("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:me(new cP),fixedOverflowWidgets:me(new yt(38,"fixedOverflowWidgets",!1)),folding:me(new yt(39,"folding",!0,{description:m("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:me(new hn(40,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[m("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),m("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:m("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:me(new yt(41,"foldingHighlight",!0,{description:m("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:me(new yt(42,"foldingImportsByDefault",!1,{description:m("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:me(new Ii(43,"foldingMaximumRegions",5e3,10,65e3,{description:m("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:me(new yt(44,"unfoldOnClickAfterEndOfLine",!1,{description:m("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:me(new Mr(45,"fontFamily",Or.fontFamily,{description:m("fontFamily","Controls the font family.")})),fontInfo:me(new dP),fontLigatures2:me(new $l),fontSize:me(new hP),fontWeight:me(new M_),formatOnPaste:me(new yt(50,"formatOnPaste",!1,{description:m("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:me(new yt(51,"formatOnType",!1,{description:m("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:me(new yt(52,"glyphMargin",!0,{description:m("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:me(new uP),hideCursorInOverviewRuler:me(new yt(54,"hideCursorInOverviewRuler",!1,{description:m("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:me(new gP),inDiffEditor:me(new yt(56,"inDiffEditor",!1)),letterSpacing:me(new Nl(58,"letterSpacing",Or.letterSpacing,i=>Nl.clamp(i,-5,20),{description:m("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:me(new pP),lineDecorationsWidth:me(new Cd(60,"lineDecorationsWidth",10)),lineHeight:me(new _P),lineNumbers:me(new yP),lineNumbersMinChars:me(new Ii(63,"lineNumbersMinChars",5,1,300)),linkedEditing:me(new yt(64,"linkedEditing",!1,{description:m("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:me(new yt(65,"links",!0,{description:m("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:me(new hn(66,"matchBrackets","always",["always","near","never"],{description:m("matchBrackets","Highlight matching brackets.")})),minimap:me(new vP),mouseStyle:me(new hn(68,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:me(new Nl(69,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:m("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:me(new yt(70,"mouseWheelZoom",!1,{markdownDescription:m("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:me(new yt(71,"multiCursorMergeOverlapping",!0,{description:m("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:me(new $u(72,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],Zge,{markdownEnumDescriptions:[m("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:m({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:me(new hn(73,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[m("multiCursorPaste.spread","Each cursor pastes a single line of the text."),m("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:m("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:me(new yt(74,"occurrencesHighlight",!0,{description:m("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:me(new yt(75,"overviewRulerBorder",!0,{description:m("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:me(new Ii(76,"overviewRulerLanes",3,0,3)),padding:me(new AP),parameterHints:me(new bP),peekWidgetDefaultFocus:me(new hn(79,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[m("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),m("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:m("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:me(new yt(80,"definitionLinkOpensInPeek",!1,{description:m("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:me(new CP),quickSuggestionsDelay:me(new Ii(82,"quickSuggestionsDelay",10,0,1073741824,{description:m("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:me(new yt(83,"readOnly",!1)),renameOnType:me(new yt(84,"renameOnType",!1,{description:m("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:m("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:me(new yt(85,"renderControlCharacters",!0,{description:m("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:me(new yt(86,"renderFinalNewline",!0,{description:m("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:me(new hn(87,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",m("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:m("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:me(new yt(88,"renderLineHighlightOnlyWhenFocus",!1,{description:m("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:me(new hn(89,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:me(new hn(90,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",m("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),m("renderWhitespace.selection","Render whitespace characters only on selected text."),m("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:m("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:me(new Ii(91,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:me(new yt(92,"roundedSelection",!0,{description:m("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:me(new SP),scrollbar:me(new epe),scrollBeyondLastColumn:me(new Ii(95,"scrollBeyondLastColumn",4,0,1073741824,{description:m("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:me(new yt(96,"scrollBeyondLastLine",!0,{description:m("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:me(new yt(97,"scrollPredominantAxis",!0,{description:m("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:me(new yt(98,"selectionClipboard",!0,{description:m("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:go})),selectionHighlight:me(new yt(99,"selectionHighlight",!0,{description:m("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:me(new yt(100,"selectOnLineNumbers",!0)),showFoldingControls:me(new hn(101,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[m("showFoldingControls.always","Always show the folding controls."),m("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),m("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:m("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:me(new yt(102,"showUnused",!0,{description:m("showUnused","Controls fading out of unused code.")})),showDeprecated:me(new yt(128,"showDeprecated",!0,{description:m("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:me(new fP),snippetSuggestions:me(new hn(103,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[m("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),m("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),m("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),m("snippetSuggestions.none","Do not show snippet suggestions.")],description:m("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:me(new IP),smoothScrolling:me(new yt(105,"smoothScrolling",!1,{description:m("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:me(new Ii(107,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:me(new LP),inlineSuggest:me(new xP),suggestFontSize:me(new Ii(109,"suggestFontSize",0,0,1e3,{markdownDescription:m("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:me(new Ii(110,"suggestLineHeight",0,0,1e3,{markdownDescription:m("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:me(new yt(111,"suggestOnTriggerCharacters",!0,{description:m("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:me(new hn(112,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[m("suggestSelection.first","Always select the first suggestion."),m("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),m("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:m("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:me(new hn(113,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[m("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),m("tabCompletion.off","Disable tab completions."),m("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:m("tabCompletion","Enables tab completions.")})),tabIndex:me(new Ii(114,"tabIndex",0,-1,1073741824)),unicodeHighlight:me(new DP),unusualLineTerminators:me(new hn(116,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[m("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),m("unusualLineTerminators.off","Unusual line terminators are ignored."),m("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:m("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:me(new yt(117,"useShadowDOM",!0)),useTabStops:me(new yt(118,"useTabStops",!0,{description:m("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:me(new Mr(119,"wordSeparators",boe,{description:m("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:me(new hn(120,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),m({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:m({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:me(new Mr(121,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:me(new Mr(122,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:me(new Ii(123,"wordWrapColumn",80,1,1073741824,{markdownDescription:m({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:me(new hn(124,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:me(new hn(125,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:me(new $u(126,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],tpe,{enumDescriptions:[m("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),m("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),m("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),m("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:m("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:me(new hn(127,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[m("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),m("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:m("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:me(new aP),pixelRatio:me(new wP),tabFocusMode:me(new TP),layoutInfo:me(new XD),wrappingInfo:me(new MP)},yd=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Q,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},rpe=gt?1.5:1.35,H2=8,zA=class i{constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n){let o=e.get(45),r=e.get(49),s=e.get(48),a=e.get(47),l=e.get(61),c=e.get(58);return i._create(o,r,s,a,l,c,t,n)}static _create(e,t,n,o,r,s,a,l){r===0?r=rpe*n:r<H2&&(r=r*n),r=Math.round(r),r<H2&&(r=H2);let c=1+(l?0:yd.getZoomLevel()*.1);return n*=c,r*=c,new i({pixelRatio:a,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:o,lineHeight:r,letterSpacing:s})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let e=Or.fontFamily,t=i._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}},spe=1,VA=class extends zA{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=spe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}},RP=class extends J{constructor(){super(),this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,this._cache=new ex,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new ex,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){let e=this._cache.getValues(),t=!1;for(let n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new VA({pixelRatio:A_.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,n,o){let r=new iP(e,t);return n.push(r),o?.push(r),r}_actualReadFontInfo(e){let t=[],n=[],o=this._createRequest("n",0,t,n),r=this._createRequest("\uFF4D",0,t,null),s=this._createRequest(" ",0,t,n),a=this._createRequest("0",0,t,n),l=this._createRequest("1",0,t,n),c=this._createRequest("2",0,t,n),d=this._createRequest("3",0,t,n),h=this._createRequest("4",0,t,n),u=this._createRequest("5",0,t,n),g=this._createRequest("6",0,t,n),p=this._createRequest("7",0,t,n),f=this._createRequest("8",0,t,n),v=this._createRequest("9",0,t,n),b=this._createRequest("\u2192",0,t,n),A=this._createRequest("\uFFEB",0,t,null),w=this._createRequest("\xB7",0,t,n),C=this._createRequest(String.fromCharCode(11825),0,t,null),k="|/-_ilm%";for(let O=0,H=k.length;O<H;O++)this._createRequest(k.charAt(O),0,t,n),this._createRequest(k.charAt(O),1,t,n),this._createRequest(k.charAt(O),2,t,n);Gge(e,t);let L=Math.max(a.width,l.width,c.width,d.width,h.width,u.width,g.width,p.width,f.width,v.width),S=e.fontFeatureSettings===$l.OFF,y=n[0].width;for(let O=1,H=n.length;S&&O<H;O++){let D=y-n[O].width;if(D<-.001||D>.001){S=!1;break}}let M=!0;return S&&A.width!==y&&(M=!1),A.width>b.width&&(M=!1),new VA({pixelRatio:A_.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:o.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:M,spaceWidth:s.width,middotWidth:w.width,wsmiddotWidth:C.width,maxDigitWidth:L},!0)}},ex=class{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){let t=e.getId();return!!this._values[t]}get(e){let t=e.getId();return this._values[t]}put(e,t){let n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){let t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}},FP=new RP,N_=class i{constructor(e,t){this.key=e,this.migrate=t}apply(e){let t=i._read(e,this.key),n=r=>i._read(e,r),o=(r,s)=>i._write(e,r,s);this.migrate(t,n,o)}static _read(e,t){if(typeof e>"u")return;let n=t.indexOf(".");if(n>=0){let o=t.substring(0,n);return this._read(e[o],t.substring(n+1))}return e[t]}static _write(e,t,n){let o=t.indexOf(".");if(o>=0){let r=t.substring(0,o);e[r]=e[r]||{},this._write(e[r],t.substring(o+1),n);return}e[t]=n}};N_.items=[];function iv(i,e){N_.items.push(new N_(i,e))}function cl(i,e){iv(i,(t,n,o)=>{if(typeof t<"u"){for(let[r,s]of e)if(t===r){o(i,s);return}}})}function ape(i){N_.items.forEach(e=>e.apply(i))}cl("wordWrap",[[!0,"on"],[!1,"off"]]);cl("lineNumbers",[[!0,"on"],[!1,"off"]]);cl("cursorBlinking",[["visible","solid"]]);cl("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);cl("renderLineHighlight",[[!0,"line"],[!1,"none"]]);cl("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);cl("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);cl("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);cl("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);cl("autoIndent",[[!1,"advanced"],[!0,"full"]]);cl("matchBrackets",[[!0,"always"],[!1,"never"]]);iv("autoClosingBrackets",(i,e,t)=>{i===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});iv("renderIndentGuides",(i,e,t)=>{typeof i<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!i))});iv("highlightActiveIndentGuide",(i,e,t)=>{typeof i<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!i))});var lpe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};iv("suggest.filteredTypes",(i,e,t)=>{if(i&&typeof i=="object"){for(let n of Object.entries(lpe))i[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});iv("quickSuggestions",(i,e,t)=>{if(typeof i=="boolean"){let n=i?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});var BP=class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new Q,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}},tx=new BP,Rd=ze("accessibilityService"),PC=new Le("accessibilityModeEnabled",!1),cpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},dpe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},PP=class extends J{constructor(i,e,t,n){super(),this._accessibilityService=n,this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new Q),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new JD,this.isSimpleWidget=i,this._containerObserver=this._register(new $D(t,e.dimension)),this._rawOptions=hZ(e),this._validatedOptions=Gu.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(10)&&this._containerObserver.startObserving(),this._register(yd.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(tx.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(FP.onDidChange(()=>this._recomputeOptions())),this._register(A_.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){let i=this._computeOptions(),e=Gu.checkEquals(this.options,i);e!==null&&(this.options=i,this._onDidChangeFast.fire(e),this._onDidChange.fire(e))}_computeOptions(){let i=this._readEnvConfiguration(),e=zA.createFromValidatedSettings(this._validatedOptions,i.pixelRatio,this.isSimpleWidget),t=this._readFontInfo(e),n={memory:this._computeOptionsMemory,outerWidth:i.outerWidth,outerHeight:i.outerHeight-this._reservedHeight,fontInfo:t,extraEditorClassName:i.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:i.emptySelectionClipboard,pixelRatio:i.pixelRatio,tabFocusMode:tx.getTabFocusMode(),accessibilitySupport:i.accessibilitySupport};return Gu.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:upe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Ch||as,pixelRatio:A_.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(i){return FP.readFontInfo(i)}getRawOptions(){return this._rawOptions}updateOptions(i){let e=hZ(i);Gu.applyUpdate(this._rawOptions,e)&&(this._validatedOptions=Gu.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(i){this._containerObserver.observe(i)}setIsDominatedByLongLines(i){this._isDominatedByLongLines!==i&&(this._isDominatedByLongLines=i,this._recomputeOptions())}setModelLineCount(i){let e=hpe(i);this._lineNumbersDigitCount!==e&&(this._lineNumbersDigitCount=e,this._recomputeOptions())}setViewLineCount(i){this._viewLineCount!==i&&(this._viewLineCount=i,this._recomputeOptions())}setReservedHeight(i){this._reservedHeight!==i&&(this._reservedHeight=i,this._recomputeOptions())}};PP=cpe([dpe(3,Rd)],PP);function hpe(i){let e=0;for(;i;)i=Math.floor(i/10),e++;return e||1}function upe(){let i="";return!bd&&!GG&&(i+="no-user-select "),bd&&(i+="no-minimap-shadow ",i+="enable-user-select "),gt&&(i+="mac "),i}var OP=class{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},HP=class{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}},Gu=class i{static validateOptions(e){let t=new OP;for(let n of ef){let o=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(o))}return t}static computeOptions(e,t){let n=new HP;for(let o of ef)n._write(o.id,o.compute(t,n,e._read(o.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Zn(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!i._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){let n=[],o=!1;for(let r of ef){let s=!i._deepEquals(e._read(r.id),t._read(r.id));n[r.id]=s,s&&(o=!0)}return o?new YD(n):null}static applyUpdate(e,t){let n=!1;for(let o of ef)if(t.hasOwnProperty(o.name)){let r=o.applyUpdate(e[o.name],t[o.name]);e[o.name]=r.newValue,n=n||r.didChange}return n}};function hZ(i){let e=Co(i);return ape(e),e}function vn(i,e,t){let n=null,o=null;if(typeof t.value=="function"?(n="value",o=t.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",o=t.get),!o)throw new Error("not supported");let r=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,s)}),this[r]}}var gpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},yi;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(yi||(yi={}));var to=class i extends J{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(le(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(le(document,"touchend",e=>this.onTouchEnd(e))),this._register(le(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return i.isTouchDevice()?(i.INSTANCE||(i.INSTANCE=new i),i.INSTANCE.targets.push(e),{dispose:()=>{i.INSTANCE.targets=i.INSTANCE.targets.filter(t=>t!==e)}}):J.None}static ignoreTarget(e){return i.isTouchDevice()?(i.INSTANCE||(i.INSTANCE=new i),i.INSTANCE.ignoreTargets.push(e),{dispose:()=>{i.INSTANCE.ignoreTargets=i.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):J.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,o=e.targetTouches.length;n<o;n++){let r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let s=this.newGestureEvent(yi.Start,r.target);s.pageX=r.pageX,s.pageY=r.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let o=0,r=e.changedTouches.length;o<r;o++){let s=e.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("move of an UNKNOWN touch",s);continue}let a=this.activeTouches[s.identifier],l=Date.now()-a.initialTimeStamp;if(l<i.HOLD_DELAY&&Math.abs(a.initialPageX-ms(a.rollingPageX))<30&&Math.abs(a.initialPageY-ms(a.rollingPageY))<30){let c=this.newGestureEvent(yi.Tap,a.initialTarget);c.pageX=ms(a.rollingPageX),c.pageY=ms(a.rollingPageY),this.dispatchEvent(c)}else if(l>=i.HOLD_DELAY&&Math.abs(a.initialPageX-ms(a.rollingPageX))<30&&Math.abs(a.initialPageY-ms(a.rollingPageY))<30){let c=this.newGestureEvent(yi.Contextmenu,a.initialTarget);c.pageX=ms(a.rollingPageX),c.pageY=ms(a.rollingPageY),this.dispatchEvent(c)}else if(n===1){let c=ms(a.rollingPageX),d=ms(a.rollingPageY),h=ms(a.rollingTimestamps)-a.rollingTimestamps[0],u=c-a.rollingPageX[0],g=d-a.rollingPageY[0],p=this.targets.filter(f=>a.initialTarget instanceof Node&&f.contains(a.initialTarget));this.inertia(p,t,Math.abs(u)/h,u>0?1:-1,c,Math.abs(g)/h,g>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(yi.End,a.initialTarget)),delete this.activeTouches[s.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===yi.Tap){let t=new Date().getTime(),n=0;t-this._lastSetTapCountTime>i.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===yi.Change||e.type===yi.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,o,r,s,a,l){this.handle=el(()=>{let c=Date.now(),d=c-t,h=0,u=0,g=!0;n+=i.SCROLL_FRICTION*d,s+=i.SCROLL_FRICTION*d,n>0&&(g=!1,h=o*n*d),s>0&&(g=!1,u=a*s*d);let p=this.newGestureEvent(yi.Change);p.translationX=h,p.translationY=u,e.forEach(f=>f.dispatchEvent(p)),g||this.inertia(e,c,n,o,r+h,s,a,l+u)})}onTouchMove(e){let t=Date.now();for(let n=0,o=e.changedTouches.length;n<o;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}let s=this.activeTouches[r.identifier],a=this.newGestureEvent(yi.Change,s.initialTarget);a.translationX=r.pageX-ms(s.rollingPageX),a.translationY=r.pageY-ms(s.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(r.pageX),s.rollingPageY.push(r.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};to.SCROLL_FRICTION=-.005;to.HOLD_DELAY=700;to.CLEAR_TAP_COUNT_TIME=400;gpe([vn],to,"isTouchDevice",null);var Voe=Object.freeze(function(i,e){let t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}}),et;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof jf?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Z.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Voe})})(et||(et={}));var jf=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Voe:(this._emitter||(this._emitter=new Q),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},po=class{constructor(i){this._token=void 0,this._parentListener=void 0,this._parentListener=i&&i.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new jf),this._token}cancel(){this._token?this._token instanceof jf&&this._token.cancel():this._token=et.Cancelled}dispose(i=!1){i&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof jf&&this._token.dispose():this._token=et.None}},_s=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},t1=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(s){return new Promise(function(a,l){s=i[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},s)}};function WP(i){return!!i&&typeof i.then=="function"}function Gn(i){let e=new po,t=i(e.token),n=new Promise((o,r)=>{let s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),r(new ya)});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),o(a)},a=>{s.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel()}then(o,r){return n.then(o,r)}catch(o){return this.then(void 0,o)}finally(o){return n.finally(o)}}}function fY(i,e,t){return new Promise((n,o)=>{let r=e.onCancellationRequested(()=>{r.dispose(),n(t)});i.then(n,o).finally(()=>r.dispose())})}var zP=class{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let t=()=>{this.queuedPromise=null;let n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(o=>{this.activePromise=null,t(o)},o=>{this.activePromise=null,n(o)})})}},ppe=(i,e)=>{let t=!0,n=setTimeout(()=>{t=!1,e()},i);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},mpe=i=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,i())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},Uoe=Symbol("MicrotaskDelay"),Gl=class{constructor(i){this.defaultDelay=i,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(i,e=this.defaultDelay){this.task=i,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,o)=>{this.doResolve=n,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let n=this.task;return this.task=null,n()}}));let t=()=>{var n;this.deferred=null,(n=this.doResolve)===null||n===void 0||n.call(this,null)};return this.deferred=e===Uoe?mpe(t):ppe(e,t),this.completionPromise}isTriggered(){var i;return!!(!((i=this.deferred)===null||i===void 0)&&i.isTriggered())}cancel(){var i;this.cancelTimeout(),this.completionPromise&&((i=this.doReject)===null||i===void 0||i.call(this,new ya),this.completionPromise=null)}cancelTimeout(){var i;(i=this.deferred)===null||i===void 0||i.dispose(),this.deferred=null}dispose(){this.cancel()}},VP=class{constructor(e){this.delayer=new Gl(e),this.throttler=new zP}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}};function Yl(i,e){return e?new Promise((t,n)=>{let o=setTimeout(()=>{r.dispose(),t()},i),r=e.onCancellationRequested(()=>{clearTimeout(o),r.dispose(),n(new ya)})}):Gn(t=>Yl(i,t))}function qh(i,e=0){let t=setTimeout(i,e);return ct(()=>clearTimeout(t))}function Qoe(i,e=n=>!!n,t=null){let n=0,o=i.length,r=()=>{if(n>=o)return Promise.resolve(t);let s=i[n++];return Promise.resolve(s()).then(a=>e(a)?Promise.resolve(a):r())};return r()}var Sr=class{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},ip=class{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}},jt=class{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}},R_;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?R_=i=>{Dne(()=>{if(e)return;let t=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:R_=(i,e)=>{let t=requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0),n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();var Hl=class{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=R_(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},UA=class{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(new ya),this.rejected=!0,e()})}},$h;(function(i){function e(n){return _s(this,void 0,void 0,function*(){let o,r=yield Promise.all(n.map(s=>s.then(a=>a,a=>{o||(o=a)})));if(typeof o<"u")throw o;return r})}i.settled=e;function t(n){return new Promise((o,r)=>_s(this,void 0,void 0,function*(){try{yield n(o,r)}catch(s){r(s)}}))}i.withAsyncBody=t})($h||($h={}));var wr=class i{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Q,queueMicrotask(()=>_s(this,void 0,void 0,function*(){let t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new i(t=>{t.emitMany(e)})}static fromPromise(e){return new i(t=>_s(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new i(t=>_s(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>_s(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new i(t=>_s(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var o,r;return _s(this,void 0,void 0,function*(){var s,a;try{for(o=t1(n);r=yield o.next(),!r.done;){let l=r.value;t.emitOne(l)}}catch(l){s={error:l}}finally{try{r&&!r.done&&(a=o.return)&&(yield a.call(o))}finally{if(s)throw s.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>_s(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield Z.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new i(n=>_s(this,void 0,void 0,function*(){var o,r;try{for(var s=t1(e),a;a=yield s.next(),!a.done;){let l=a.value;n.emitOne(t(l))}}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=s.return)&&(yield r.call(s))}finally{if(o)throw o.error}}}))}map(e){return i.map(this,e)}static filter(e,t){return new i(n=>_s(this,void 0,void 0,function*(){var o,r;try{for(var s=t1(e),a;a=yield s.next(),!a.done;){let l=a.value;t(l)&&n.emitOne(l)}}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=s.return)&&(yield r.call(s))}finally{if(o)throw o.error}}}))}filter(e){return i.filter(this,e)}static coalesce(e){return i.filter(e,t=>!!t)}coalesce(){return i.coalesce(this)}static toPromise(e){var t,n,o,r;return _s(this,void 0,void 0,function*(){let s=[];try{for(t=t1(e);n=yield t.next(),!n.done;){let a=n.value;s.push(a)}}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=t.return)&&(yield r.call(t))}finally{if(o)throw o.error}}return s})}toPromise(){return i.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};wr.EMPTY=wr.fromArray([]);var UP=class extends wr{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}};function fpe(i){let e=new po,t=i(e.token);return new UP(e,n=>_s(this,void 0,void 0,function*(){var o,r;let s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),n.reject(new ya)});try{try{for(var a=t1(t),l;l=yield a.next(),!l.done;){let c=l.value;if(e.token.isCancellationRequested)return;n.emitOne(c)}}catch(c){o={error:c}}finally{try{l&&!l.done&&(r=a.return)&&(yield r.call(a))}finally{if(o)throw o.error}}s.dispose(),e.dispose()}catch(c){s.dispose(),e.dispose(),n.reject(c)}}))}var Gh=class{constructor(){this._hooks=new ne,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,o,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=o,this._onStopCallback=r;let s=e;try{e.setPointerCapture(t),this._hooks.add(ct(()=>{e.releasePointerCapture(t)}))}catch{s=window}this._hooks.add(le(s,Ee.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(le(s,Ee.POINTER_UP,a=>this.stopMonitoring(!0)))}};function Dh(i,e){let t=Math.pow(10,e);return Math.round(i*t)/t}var Ct=class{constructor(i,e,t,n=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,i))|0,this.g=Math.min(255,Math.max(0,e))|0,this.b=Math.min(255,Math.max(0,t))|0,this.a=Dh(Math.max(Math.min(1,n),0),3)}static equals(i,e){return i.r===e.r&&i.g===e.g&&i.b===e.b&&i.a===e.a}},xl=class{constructor(i,e,t,n){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,i),0)|0,this.s=Dh(Math.max(Math.min(1,e),0),3),this.l=Dh(Math.max(Math.min(1,t),0),3),this.a=Dh(Math.max(Math.min(1,n),0),3)}static equals(i,e){return i.h===e.h&&i.s===e.s&&i.l===e.l&&i.a===e.a}static fromRGBA(i){let e=i.r/255,t=i.g/255,n=i.b/255,o=i.a,r=Math.max(e,t,n),s=Math.min(e,t,n),a=0,l=0,c=(s+r)/2,d=r-s;if(d>0){switch(l=Math.min(c<=.5?d/(2*c):d/(2-2*c),1),r){case e:a=(t-n)/d+(t<n?6:0);break;case t:a=(n-e)/d+2;break;case n:a=(e-t)/d+4;break}a*=60,a=Math.round(a)}return new xl(a,l,c,o)}static _hue2rgb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}static toRGBA(i){let e=i.h/360,{s:t,l:n,a:o}=i,r,s,a;if(t===0)r=s=a=n;else{let l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=xl._hue2rgb(c,l,e+1/3),s=xl._hue2rgb(c,l,e),a=xl._hue2rgb(c,l,e-1/3)}return new Ct(Math.round(r*255),Math.round(s*255),Math.round(a*255),o)}},Gc=class{constructor(i,e,t,n){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,i),0)|0,this.s=Dh(Math.max(Math.min(1,e),0),3),this.v=Dh(Math.max(Math.min(1,t),0),3),this.a=Dh(Math.max(Math.min(1,n),0),3)}static equals(i,e){return i.h===e.h&&i.s===e.s&&i.v===e.v&&i.a===e.a}static fromRGBA(i){let e=i.r/255,t=i.g/255,n=i.b/255,o=Math.max(e,t,n),r=Math.min(e,t,n),s=o-r,a=o===0?0:s/o,l;return s===0?l=0:o===e?l=((t-n)/s%6+6)%6:o===t?l=(n-e)/s+2:l=(e-t)/s+4,new Gc(Math.round(l*60),a,o,i.a)}static toRGBA(i){let{h:e,s:t,v:n,a:o}=i,r=n*t,s=r*(1-Math.abs(e/60%2-1)),a=n-r,[l,c,d]=[0,0,0];return e<60?(l=r,c=s):e<120?(l=s,c=r):e<180?(c=r,d=s):e<240?(c=s,d=r):e<300?(l=s,d=r):e<=360&&(l=r,d=s),l=Math.round((l+a)*255),c=Math.round((c+a)*255),d=Math.round((d+a)*255),new Ct(l,c,d,o)}},j=class{constructor(i){if(i)if(i instanceof Ct)this.rgba=i;else if(i instanceof xl)this._hsla=i,this.rgba=xl.toRGBA(i);else if(i instanceof Gc)this._hsva=i,this.rgba=Gc.toRGBA(i);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(i){return j.Format.CSS.parseHex(i)||j.red}get hsla(){return this._hsla?this._hsla:xl.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Gc.fromRGBA(this.rgba)}equals(i){return!!i&&Ct.equals(this.rgba,i.rgba)&&xl.equals(this.hsla,i.hsla)&&Gc.equals(this.hsva,i.hsva)}getRelativeLuminance(){let i=j._relativeLuminanceForComponent(this.rgba.r),e=j._relativeLuminanceForComponent(this.rgba.g),t=j._relativeLuminanceForComponent(this.rgba.b),n=.2126*i+.7152*e+.0722*t;return Dh(n,4)}static _relativeLuminanceForComponent(i){let e=i/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(i){let e=this.getRelativeLuminance(),t=i.getRelativeLuminance();return e>t}isDarkerThan(i){let e=this.getRelativeLuminance(),t=i.getRelativeLuminance();return e<t}lighten(i){return new j(new xl(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*i,this.hsla.a))}darken(i){return new j(new xl(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*i,this.hsla.a))}transparent(i){let{r:e,g:t,b:n,a:o}=this.rgba;return new j(new Ct(e,t,n,o*i))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new j(new Ct(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=j.Format.CSS.format(this)),this._toString}static getLighterColor(i,e,t){if(i.isLighterThan(e))return i;t=t||.5;let n=i.getRelativeLuminance(),o=e.getRelativeLuminance();return t=t*(o-n)/o,i.lighten(t)}static getDarkerColor(i,e,t){if(i.isDarkerThan(e))return i;t=t||.5;let n=i.getRelativeLuminance(),o=e.getRelativeLuminance();return t=t*(n-o)/n,i.darken(t)}};j.white=new j(new Ct(255,255,255,1));j.black=new j(new Ct(0,0,0,1));j.red=new j(new Ct(255,0,0,1));j.blue=new j(new Ct(0,0,255,1));j.green=new j(new Ct(0,255,0,1));j.cyan=new j(new Ct(0,255,255,1));j.lightgrey=new j(new Ct(211,211,211,1));j.transparent=new j(new Ct(0,0,0,0));(function(i){(function(e){(function(t){function n(g){return g.rgba.a===1?`rgb(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b})`:i.Format.CSS.formatRGBA(g)}t.formatRGB=n;function o(g){return`rgba(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b}, ${+g.rgba.a.toFixed(2)})`}t.formatRGBA=o;function r(g){return g.hsla.a===1?`hsl(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(g)}t.formatHSL=r;function s(g){return`hsla(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%, ${g.hsla.a.toFixed(2)})`}t.formatHSLA=s;function a(g){let p=g.toString(16);return p.length!==2?"0"+p:p}function l(g){return`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}`}t.formatHex=l;function c(g,p=!1){return p&&g.rgba.a===1?i.Format.CSS.formatHex(g):`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}${a(Math.round(g.rgba.a*255))}`}t.formatHexA=c;function d(g){return g.isOpaque()?i.Format.CSS.formatHex(g):i.Format.CSS.formatRGBA(g)}t.format=d;function h(g){let p=g.length;if(p===0||g.charCodeAt(0)!==35)return null;if(p===7){let f=16*u(g.charCodeAt(1))+u(g.charCodeAt(2)),v=16*u(g.charCodeAt(3))+u(g.charCodeAt(4)),b=16*u(g.charCodeAt(5))+u(g.charCodeAt(6));return new i(new Ct(f,v,b,1))}if(p===9){let f=16*u(g.charCodeAt(1))+u(g.charCodeAt(2)),v=16*u(g.charCodeAt(3))+u(g.charCodeAt(4)),b=16*u(g.charCodeAt(5))+u(g.charCodeAt(6)),A=16*u(g.charCodeAt(7))+u(g.charCodeAt(8));return new i(new Ct(f,v,b,A/255))}if(p===4){let f=u(g.charCodeAt(1)),v=u(g.charCodeAt(2)),b=u(g.charCodeAt(3));return new i(new Ct(16*f+f,16*v+v,16*b+b))}if(p===5){let f=u(g.charCodeAt(1)),v=u(g.charCodeAt(2)),b=u(g.charCodeAt(3)),A=u(g.charCodeAt(4));return new i(new Ct(16*f+f,16*v+v,16*b+b,(16*A+A)/255))}return null}t.parseHex=h;function u(g){switch(g){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(j||(j={}));function joe(i){return`--vscode-${i.replace(/\./g,"-")}`}var Koe={ColorContribution:"base.contributions.colors"},QP=class{constructor(){this._onDidChangeSchema=new Q,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,o=!1,r){let s={id:e,description:n,defaults:t,needsTransparency:o,deprecationMessage:r};this.colorsById[e]=s;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let n=this.colorsById[e];if(n&&n.defaults){let o=n.defaults[t.type];return Mc(o,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let o=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return o!==r?o-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}},BM=new QP;oi.add(Koe.ColorContribution,BM);function _pe(i){return i===null||typeof i.hcLight>"u"&&(i.hcDark===null||typeof i.hcDark=="string"?i.hcLight=i.hcDark:i.hcLight=i.light),i}function P(i,e,t,n,o){return BM.registerColor(i,_pe(e),t,n,o)}var ue=P("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},m("foreground","Overall foreground color. This color is only used if not overridden by a component."));P("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},m("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));var vpe=P("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},m("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));P("descriptionForeground",{light:"#717171",dark:Fe(ue,.7),hcDark:Fe(ue,.7),hcLight:Fe(ue,.7)},m("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));var py=P("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},m("iconForeground","The default color for icons in the workbench.")),ys=P("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#0F4A85"},m("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),mt=P("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},m("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Pi=P("contrastActiveBorder",{light:null,dark:null,hcDark:ys,hcLight:ys},m("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));P("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},m("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));P("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:j.black,hcLight:"#292929"},m("textSeparatorForeground","Color for text separators."));var PM=P("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},m("textLinkForeground","Foreground color for links in text.")),OM=P("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},m("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));P("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},m("textPreformatForeground","Foreground color for preformatted text segments."));P("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},m("textBlockQuoteBackground","Background color for block quotes in text."));P("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:j.white,hcLight:"#292929"},m("textBlockQuoteBorder","Border color for block quotes in text."));var qoe=P("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:j.black,hcLight:"#F2F2F2"},m("textCodeBlockBackground","Background color for code blocks in text.")),Ua=P("widget.shadow",{dark:Fe(j.black,.36),light:Fe(j.black,.16),hcDark:null,hcLight:null},m("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),HM=P("input.background",{dark:"#3C3C3C",light:j.white,hcDark:j.black,hcLight:j.white},m("inputBoxBackground","Input box background.")),WM=P("input.foreground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("inputBoxForeground","Input box foreground.")),zM=P("input.border",{dark:null,light:null,hcDark:mt,hcLight:mt},m("inputBoxBorder","Input box border.")),ix=P("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hcDark:mt,hcLight:mt},m("inputBoxActiveOptionBorder","Border color of activated options in input fields."));P("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},m("inputOption.hoverBackground","Background color of activated options in input fields."));var nx=P("inputOption.activeBackground",{dark:Fe(ys,.4),light:Fe(ys,.2),hcDark:j.transparent,hcLight:j.transparent},m("inputOption.activeBackground","Background hover color of options in input fields.")),ox=P("inputOption.activeForeground",{dark:j.white,light:j.black,hcDark:null,hcLight:ue},m("inputOption.activeForeground","Foreground color of activated options in input fields."));P("input.placeholderForeground",{light:Fe(ue,.5),dark:Fe(ue,.5),hcDark:Fe(ue,.7),hcLight:Fe(ue,.7)},m("inputPlaceholderForeground","Input box foreground color for placeholder text."));var _Y=P("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:j.black,hcLight:j.white},m("inputValidationInfoBackground","Input validation background color for information severity.")),vY=P("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:ue},m("inputValidationInfoForeground","Input validation foreground color for information severity.")),AY=P("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:mt,hcLight:mt},m("inputValidationInfoBorder","Input validation border color for information severity.")),bY=P("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:j.black,hcLight:j.white},m("inputValidationWarningBackground","Input validation background color for warning severity.")),wY=P("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:ue},m("inputValidationWarningForeground","Input validation foreground color for warning severity.")),CY=P("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:mt,hcLight:mt},m("inputValidationWarningBorder","Input validation border color for warning severity.")),yY=P("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:j.black,hcLight:j.white},m("inputValidationErrorBackground","Input validation background color for error severity.")),SY=P("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:ue},m("inputValidationErrorForeground","Input validation foreground color for error severity.")),DY=P("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:mt,hcLight:mt},m("inputValidationErrorBorder","Input validation border color for error severity.")),Yc=P("dropdown.background",{dark:"#3C3C3C",light:j.white,hcDark:j.black,hcLight:j.white},m("dropdownBackground","Dropdown background."));P("dropdown.listBackground",{dark:null,light:null,hcDark:j.black,hcLight:j.white},m("dropdownListBackground","Dropdown list background."));var hg=P("dropdown.foreground",{dark:"#F0F0F0",light:null,hcDark:j.white,hcLight:ue},m("dropdownForeground","Dropdown foreground.")),my=P("dropdown.border",{dark:Yc,light:"#CECECE",hcDark:mt,hcLight:mt},m("dropdownBorder","Dropdown border."));P("checkbox.background",{dark:Yc,light:Yc,hcDark:Yc,hcLight:Yc},m("checkbox.background","Background color of checkbox widget."));P("checkbox.foreground",{dark:hg,light:hg,hcDark:hg,hcLight:hg},m("checkbox.foreground","Foreground color of checkbox widget."));P("checkbox.border",{dark:my,light:my,hcDark:my,hcLight:my},m("checkbox.border","Border color of checkbox widget."));var i1=P("button.foreground",{dark:j.white,light:j.white,hcDark:j.white,hcLight:j.white},m("buttonForeground","Button foreground color."));P("button.separator",{dark:Fe(i1,.4),light:Fe(i1,.4),hcDark:Fe(i1,.4),hcLight:Fe(i1,.4)},m("buttonSeparator","Button separator color."));var jP=P("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},m("buttonBackground","Button background color.")),Ape=P("button.hoverBackground",{dark:Ya(jP,.2),light:im(jP,.2),hcDark:null,hcLight:null},m("buttonHoverBackground","Button background color when hovering."));P("button.border",{dark:mt,light:mt,hcDark:mt,hcLight:mt},m("buttonBorder","Button border color."));P("button.secondaryForeground",{dark:j.white,light:j.white,hcDark:j.white,hcLight:ue},m("buttonSecondaryForeground","Secondary button foreground color."));var uZ=P("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:j.white},m("buttonSecondaryBackground","Secondary button background color."));P("button.secondaryHoverBackground",{dark:Ya(uZ,.2),light:im(uZ,.2),hcDark:null,hcLight:null},m("buttonSecondaryHoverBackground","Secondary button background color when hovering."));var tf=P("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:j.black,hcLight:"#0F4A85"},m("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),nf=P("badge.foreground",{dark:j.white,light:"#333",hcDark:j.white,hcLight:j.white},m("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),nv=P("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},m("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),ug=P("scrollbarSlider.background",{dark:j.fromHex("#797979").transparent(.4),light:j.fromHex("#646464").transparent(.4),hcDark:Fe(mt,.6),hcLight:Fe(mt,.4)},m("scrollbarSliderBackground","Scrollbar slider background color.")),gg=P("scrollbarSlider.hoverBackground",{dark:j.fromHex("#646464").transparent(.7),light:j.fromHex("#646464").transparent(.7),hcDark:Fe(mt,.8),hcLight:Fe(mt,.8)},m("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),pg=P("scrollbarSlider.activeBackground",{dark:j.fromHex("#BFBFBF").transparent(.4),light:j.fromHex("#000000").transparent(.6),hcDark:mt,hcLight:mt},m("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),bpe=P("progressBar.background",{dark:j.fromHex("#0E70C0"),light:j.fromHex("#0E70C0"),hcDark:mt,hcLight:mt},m("progressBarBackground","Background color of the progress bar that can show for long running operations.")),wpe=P("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Rl=P("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},m("editorError.foreground","Foreground color of error squigglies in the editor.")),$oe=P("editorError.border",{dark:null,light:null,hcDark:j.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},m("errorBorder","Border color of error boxes in the editor.")),Cpe=P("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),ns=P("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD37",hcLight:"#895503"},m("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),F_=P("editorWarning.border",{dark:null,light:null,hcDark:j.fromHex("#FFCC00").transparent(.8),hcLight:"#"},m("warningBorder","Border color of warning boxes in the editor.")),ype=P("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Cr=P("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},m("editorInfo.foreground","Foreground color of info squigglies in the editor.")),rx=P("editorInfo.border",{dark:null,light:null,hcDark:j.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},m("infoBorder","Border color of info boxes in the editor.")),Spe=P("editorHint.foreground",{dark:j.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},m("editorHint.foreground","Foreground color of hint squigglies in the editor.")),Dpe=P("editorHint.border",{dark:null,light:null,hcDark:j.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},m("hintBorder","Border color of hint boxes in the editor."));P("sash.hoverBorder",{dark:ys,light:ys,hcDark:ys,hcLight:ys},m("sashActiveBorder","Border color of active sashes."));var yn=P("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:j.black,hcLight:j.white},m("editorBackground","Editor background color.")),os=P("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:j.white,hcLight:ue},m("editorForeground","Editor default foreground color."));P("editorStickyScroll.background",{light:yn,dark:yn,hcDark:yn,hcLight:yn},m("editorStickyScrollBackground","Sticky scroll background color for the editor"));P("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:j.fromHex("#0F4A85").transparent(.1)},m("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));var pn=P("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:j.white},m("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Qa=P("editorWidget.foreground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Jc=P("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:mt,hcLight:mt},m("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),xpe=P("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},m("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),gZ=P("quickInput.background",{dark:pn,light:pn,hcDark:pn,hcLight:pn},m("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),kpe=P("quickInput.foreground",{dark:Qa,light:Qa,hcDark:Qa,hcLight:Qa},m("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Epe=P("quickInputTitle.background",{dark:new j(new Ct(255,255,255,.105)),light:new j(new Ct(0,0,0,.06)),hcDark:"#000000",hcLight:j.white},m("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Lpe=P("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:j.white,hcLight:"#0F4A85"},m("pickerGroupForeground","Quick picker color for grouping labels.")),Ipe=P("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:j.white,hcLight:"#0F4A85"},m("pickerGroupBorder","Quick picker color for grouping borders.")),Tpe=P("keybindingLabel.background",{dark:new j(new Ct(128,128,128,.17)),light:new j(new Ct(221,221,221,.4)),hcDark:j.transparent,hcLight:j.transparent},m("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Mpe=P("keybindingLabel.foreground",{dark:j.fromHex("#CCCCCC"),light:j.fromHex("#555555"),hcDark:j.white,hcLight:ue},m("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Npe=P("keybindingLabel.border",{dark:new j(new Ct(51,51,51,.6)),light:new j(new Ct(204,204,204,.4)),hcDark:new j(new Ct(111,195,223)),hcLight:mt},m("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Rpe=P("keybindingLabel.bottomBorder",{dark:new j(new Ct(68,68,68,.6)),light:new j(new Ct(187,187,187,.4)),hcDark:new j(new Ct(111,195,223)),hcLight:ue},m("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Xc=P("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},m("editorSelectionBackground","Color of the editor selection.")),Fpe=P("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:j.white},m("editorSelectionForeground","Color of the selected text for high contrast.")),xY=P("editor.inactiveSelectionBackground",{light:Fe(Xc,.5),dark:Fe(Xc,.5),hcDark:Fe(Xc,.7),hcLight:Fe(Xc,.5)},m("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),kY=P("editor.selectionHighlightBackground",{light:AZ(Xc,yn,.3,.6),dark:AZ(Xc,yn,.3,.6),hcDark:null,hcLight:null},m("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),Bpe=P("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Pi,hcLight:Pi},m("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),Ppe=P("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},m("editorFindMatch","Color of the current search match.")),Zc=P("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},m("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),Ope=P("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},m("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Hpe=P("editor.findMatchBorder",{light:null,dark:null,hcDark:Pi,hcLight:Pi},m("editorFindMatchBorder","Border color of the current search match.")),mg=P("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Pi,hcLight:Pi},m("findMatchHighlightBorder","Border color of the other search matches.")),Wpe=P("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Fe(Pi,.4),hcLight:Fe(Pi,.4)},m("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);P("searchEditor.findMatchBackground",{light:Fe(Zc,.66),dark:Fe(Zc,.66),hcDark:Zc,hcLight:Zc},m("searchEditor.queryMatch","Color of the Search Editor query matches."));P("searchEditor.findMatchBorder",{light:Fe(mg,.66),dark:Fe(mg,.66),hcDark:mg,hcLight:mg},m("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var zpe=P("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},m("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),np=P("editorHoverWidget.background",{light:pn,dark:pn,hcDark:pn,hcLight:pn},m("hoverBackground","Background color of the editor hover.")),EY=P("editorHoverWidget.foreground",{light:Qa,dark:Qa,hcDark:Qa,hcLight:Qa},m("hoverForeground","Foreground color of the editor hover.")),LY=P("editorHoverWidget.border",{light:Jc,dark:Jc,hcDark:Jc,hcLight:Jc},m("hoverBorder","Border color of the editor hover.")),Vpe=P("editorHoverWidget.statusBarBackground",{dark:Ya(np,.2),light:im(np,.05),hcDark:pn,hcLight:pn},m("statusBarBackground","Background color of the editor hover status bar.")),IY=P("editorLink.activeForeground",{dark:"#4E94CE",light:j.blue,hcDark:j.cyan,hcLight:"#292929"},m("activeLinkForeground","Color of active links.")),ed=P("editorInlayHint.foreground",{dark:Fe(nf,.8),light:Fe(nf,.8),hcDark:nf,hcLight:nf},m("editorInlayHintForeground","Foreground color of inline hints")),td=P("editorInlayHint.background",{dark:Fe(tf,.6),light:Fe(tf,.3),hcDark:tf,hcLight:tf},m("editorInlayHintBackground","Background color of inline hints")),Upe=P("editorInlayHint.typeForeground",{dark:ed,light:ed,hcDark:ed,hcLight:ed},m("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Qpe=P("editorInlayHint.typeBackground",{dark:td,light:td,hcDark:td,hcLight:td},m("editorInlayHintBackgroundTypes","Background color of inline hints for types")),jpe=P("editorInlayHint.parameterForeground",{dark:ed,light:ed,hcDark:ed,hcLight:ed},m("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),Kpe=P("editorInlayHint.parameterBackground",{dark:td,light:td,hcDark:td,hcLight:td},m("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),qpe=P("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},m("editorLightBulbForeground","The color used for the lightbulb actions icon.")),$pe=P("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),KP=new j(new Ct(155,185,85,.2)),qP=new j(new Ct(255,0,0,.2)),Goe=P("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c66",hcDark:null,hcLight:null},m("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Yoe=P("diffEditor.removedTextBackground",{dark:"#ff000066",light:"#ff00004d",hcDark:null,hcLight:null},m("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Gpe=P("diffEditor.insertedLineBackground",{dark:KP,light:KP,hcDark:null,hcLight:null},m("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Ype=P("diffEditor.removedLineBackground",{dark:qP,light:qP,hcDark:null,hcLight:null},m("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Jpe=P("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),Xpe=P("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),Zpe=P("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),eme=P("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),tme=P("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},m("diffEditorInsertedOutline","Outline color for the text that got inserted.")),ime=P("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},m("diffEditorRemovedOutline","Outline color for text that got removed.")),nme=P("diffEditor.border",{dark:null,light:null,hcDark:mt,hcLight:mt},m("diffEditorBorder","Border color between the two text editors.")),ome=P("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},m("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),rme=P("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),sme=P("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ame=P("list.focusOutline",{dark:ys,light:ys,hcDark:Pi,hcLight:Pi},m("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),lme=P("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),id=P("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:j.fromHex("#0F4A85").transparent(.1)},m("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Fl=P("list.activeSelectionForeground",{dark:j.white,light:j.white,hcDark:null,hcLight:null},m("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),n1=P("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),cme=P("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:j.fromHex("#0F4A85").transparent(.1)},m("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),dme=P("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),hme=P("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ume=P("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),gme=P("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),pme=P("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:j.fromHex("#0F4A85").transparent(.1)},m("listHoverBackground","List/Tree background when hovering over items using the mouse.")),mme=P("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),fme=P("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},m("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),la=P("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:ys,hcLight:ys},m("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),fy=P("list.focusHighlightForeground",{dark:la,light:Vme(id,la,"#BBE7FF"),hcDark:la,hcLight:la},m("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));P("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},m("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));P("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},m("listErrorForeground","Foreground color of list items containing errors."));P("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},m("listWarningForeground","Foreground color of list items containing warnings."));var _me=P("listFilterWidget.background",{light:im(pn,0),dark:Ya(pn,0),hcDark:pn,hcLight:pn},m("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),vme=P("listFilterWidget.outline",{dark:j.transparent,light:j.transparent,hcDark:"#f38518",hcLight:"#007ACC"},m("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Ame=P("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:mt,hcLight:mt},m("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),bme=P("listFilterWidget.shadow",{dark:Ua,light:Ua,hcDark:Ua,hcLight:Ua},m("listFilterWidgetShadow","Shadown color of the type filter widget in lists and trees."));P("list.filterMatchBackground",{dark:Zc,light:Zc,hcDark:null,hcLight:null},m("listFilterMatchHighlight","Background color of the filtered match."));P("list.filterMatchBorder",{dark:mg,light:mg,hcDark:mt,hcLight:Pi},m("listFilterMatchHighlightBorder","Border color of the filtered match."));var wme=P("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},m("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Cme=P("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},m("tableColumnsBorder","Table border color between columns.")),yme=P("tree.tableOddRowsBackground",{dark:Fe(ue,.04),light:Fe(ue,.04),hcDark:null,hcLight:null},m("tableOddRowsBackgroundColor","Background color for odd table rows."));P("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},m("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));var pZ=P("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,m("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),o1=P("quickInputList.focusForeground",{dark:Fl,light:Fl,hcDark:Fl,hcLight:Fl},m("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),r1=P("quickInputList.focusIconForeground",{dark:n1,light:n1,hcDark:n1,hcLight:n1},m("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),s1=P("quickInputList.focusBackground",{dark:QA(pZ,id),light:QA(pZ,id),hcDark:null,hcLight:null},m("quickInput.listFocusBackground","Quick picker background color for the focused item.")),Sme=P("menu.border",{dark:null,light:null,hcDark:mt,hcLight:mt},m("menuBorder","Border color of menus.")),Dme=P("menu.foreground",{dark:hg,light:ue,hcDark:hg,hcLight:hg},m("menuForeground","Foreground color of menu items.")),xme=P("menu.background",{dark:Yc,light:Yc,hcDark:Yc,hcLight:Yc},m("menuBackground","Background color of menu items.")),kme=P("menu.selectionForeground",{dark:Fl,light:Fl,hcDark:Fl,hcLight:Fl},m("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Eme=P("menu.selectionBackground",{dark:id,light:id,hcDark:id,hcLight:id},m("menuSelectionBackground","Background color of the selected menu item in menus.")),Lme=P("menu.selectionBorder",{dark:null,light:null,hcDark:Pi,hcLight:Pi},m("menuSelectionBorder","Border color of the selected menu item in menus.")),Ime=P("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:mt,hcLight:mt},m("menuSeparatorBackground","Color of a separator menu item in menus.")),$P=P("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},m("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));P("toolbar.hoverOutline",{dark:null,light:null,hcDark:Pi,hcLight:Pi},m("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));P("toolbar.activeBackground",{dark:Ya($P,.1),light:im($P,.1),hcDark:null,hcLight:null},m("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));P("editor.snippetTabstopHighlightBackground",{dark:new j(new Ct(124,124,124,.3)),light:new j(new Ct(10,50,100,.2)),hcDark:new j(new Ct(124,124,124,.3)),hcLight:new j(new Ct(10,50,100,.2))},m("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));P("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},m("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));P("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));P("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new j(new Ct(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},m("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));P("breadcrumb.foreground",{light:Fe(ue,.8),dark:Fe(ue,.8),hcDark:Fe(ue,.8),hcLight:Fe(ue,.8)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items."));P("breadcrumb.background",{light:yn,dark:yn,hcDark:yn,hcLight:yn},m("breadcrumbsBackground","Background color of breadcrumb items."));P("breadcrumb.focusForeground",{light:im(ue,.2),dark:Ya(ue,.1),hcDark:Ya(ue,.1),hcLight:Ya(ue,.1)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items."));P("breadcrumb.activeSelectionForeground",{light:im(ue,.2),dark:Ya(ue,.1),hcDark:Ya(ue,.1),hcLight:Ya(ue,.1)},m("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));P("breadcrumbPicker.background",{light:pn,dark:pn,hcDark:pn,hcLight:pn},m("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));var Joe=.5,mZ=j.fromHex("#40C8AE").transparent(Joe),fZ=j.fromHex("#40A6FF").transparent(Joe),_Z=j.fromHex("#606060").transparent(.4),ca=.4,B_=1,of=P("merge.currentHeaderBackground",{dark:mZ,light:mZ,hcDark:null,hcLight:null},m("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.currentContentBackground",{dark:Fe(of,ca),light:Fe(of,ca),hcDark:Fe(of,ca),hcLight:Fe(of,ca)},m("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var rf=P("merge.incomingHeaderBackground",{dark:fZ,light:fZ,hcDark:null,hcLight:null},m("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.incomingContentBackground",{dark:Fe(rf,ca),light:Fe(rf,ca),hcDark:Fe(rf,ca),hcLight:Fe(rf,ca)},m("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var sf=P("merge.commonHeaderBackground",{dark:_Z,light:_Z,hcDark:null,hcLight:null},m("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.commonContentBackground",{dark:Fe(sf,ca),light:Fe(sf,ca),hcDark:Fe(sf,ca),hcLight:Fe(sf,ca)},m("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var P_=P("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},m("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));P("editorOverviewRuler.currentContentForeground",{dark:Fe(of,B_),light:Fe(of,B_),hcDark:P_,hcLight:P_},m("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));P("editorOverviewRuler.incomingContentForeground",{dark:Fe(rf,B_),light:Fe(rf,B_),hcDark:P_,hcLight:P_},m("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));P("editorOverviewRuler.commonContentForeground",{dark:Fe(sf,B_),light:Fe(sf,B_),hcDark:P_,hcLight:P_},m("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));var TY=P("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},m("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Xoe=P("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},m("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),af=P("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},m("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),VM=P("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),vZ=P("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),Tme=P("minimap.errorHighlight",{dark:new j(new Ct(255,18,18,.7)),light:new j(new Ct(255,18,18,.7)),hcDark:new j(new Ct(255,50,50,1)),hcLight:"#B5200D"},m("minimapError","Minimap marker color for errors.")),Mme=P("minimap.warningHighlight",{dark:ns,light:ns,hcDark:F_,hcLight:F_},m("overviewRuleWarning","Minimap marker color for warnings.")),Nme=P("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},m("minimapBackground","Minimap background color.")),Rme=P("minimap.foregroundOpacity",{dark:j.fromHex("#000f"),light:j.fromHex("#000f"),hcDark:j.fromHex("#000f"),hcLight:j.fromHex("#000f")},m("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),Fme=P("minimapSlider.background",{light:Fe(ug,.5),dark:Fe(ug,.5),hcDark:Fe(ug,.5),hcLight:Fe(ug,.5)},m("minimapSliderBackground","Minimap slider background color.")),Bme=P("minimapSlider.hoverBackground",{light:Fe(gg,.5),dark:Fe(gg,.5),hcDark:Fe(gg,.5),hcLight:Fe(gg,.5)},m("minimapSliderHoverBackground","Minimap slider background color when hovering.")),Pme=P("minimapSlider.activeBackground",{light:Fe(pg,.5),dark:Fe(pg,.5),hcDark:Fe(pg,.5),hcLight:Fe(pg,.5)},m("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),Ome=P("problemsErrorIcon.foreground",{dark:Rl,light:Rl,hcDark:Rl,hcLight:Rl},m("problemsErrorIconForeground","The color used for the problems error icon.")),Hme=P("problemsWarningIcon.foreground",{dark:ns,light:ns,hcDark:ns,hcLight:ns},m("problemsWarningIconForeground","The color used for the problems warning icon.")),Wme=P("problemsInfoIcon.foreground",{dark:Cr,light:Cr,hcDark:Cr,hcLight:Cr},m("problemsInfoIconForeground","The color used for the problems info icon."));P("charts.foreground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("chartsForeground","The foreground color used in charts."));P("charts.lines",{dark:Fe(ue,.5),light:Fe(ue,.5),hcDark:Fe(ue,.5),hcLight:Fe(ue,.5)},m("chartsLines","The color used for horizontal lines in charts."));P("charts.red",{dark:Rl,light:Rl,hcDark:Rl,hcLight:Rl},m("chartsRed","The red color used in chart visualizations."));P("charts.blue",{dark:Cr,light:Cr,hcDark:Cr,hcLight:Cr},m("chartsBlue","The blue color used in chart visualizations."));P("charts.yellow",{dark:ns,light:ns,hcDark:ns,hcLight:ns},m("chartsYellow","The yellow color used in chart visualizations."));P("charts.orange",{dark:af,light:af,hcDark:af,hcLight:af},m("chartsOrange","The orange color used in chart visualizations."));P("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},m("chartsGreen","The green color used in chart visualizations."));P("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("chartsPurple","The purple color used in chart visualizations."));function zme(i,e){var t,n,o;switch(i.op){case 0:return(t=Mc(i.value,e))===null||t===void 0?void 0:t.darken(i.factor);case 1:return(n=Mc(i.value,e))===null||n===void 0?void 0:n.lighten(i.factor);case 2:return(o=Mc(i.value,e))===null||o===void 0?void 0:o.transparent(i.factor);case 3:for(let r of i.values){let s=Mc(r,e);if(s)return s}return;case 5:return Mc(e.defines(i.if)?i.then:i.else,e);case 4:{let r=Mc(i.value,e);if(!r)return;let s=Mc(i.background,e);return s?r.isDarkerThan(s)?j.getLighterColor(r,s,i.factor).transparent(i.transparency):j.getDarkerColor(r,s,i.factor).transparent(i.transparency):r.transparent(i.factor*i.transparency)}default:throw _M()}}function im(i,e){return{op:0,value:i,factor:e}}function Ya(i,e){return{op:1,value:i,factor:e}}function Fe(i,e){return{op:2,value:i,factor:e}}function QA(...i){return{op:3,values:i}}function Vme(i,e,t){return{op:5,if:i,then:e,else:t}}function AZ(i,e,t,n){return{op:4,value:i,background:e,factor:t,transparency:n}}function Mc(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?j.fromHex(i):e.getColor(i);if(i instanceof j)return i;if(typeof i=="object")return zme(i,e)}}var Zoe="vscode://schemas/workbench-colors",ere=oi.as(ev.JSONContribution);ere.registerSchema(Zoe,BM.getColorSchema());var bZ=new jt(()=>ere.notifySchemaChanged(Zoe),200);BM.onDidChangeSchema(()=>{bZ.isScheduled()||bZ.schedule()});var jA=class{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new sx(this.x-dd.scrollX,this.y-dd.scrollY)}},sx=class{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new jA(this.clientX+dd.scrollX,this.clientY+dd.scrollY)}},GP=class{constructor(e,t,n,o){this.x=e,this.y=t,this.width=n,this.height=o,this._editorPagePositionBrand=void 0}},YP=class{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}};function tre(i){let e=Eo(i);return new GP(e.left,e.top,e.width,e.height)}function ire(i,e,t){let n=e.width/i.offsetWidth,o=e.height/i.offsetHeight,r=(t.x-e.x)/n,s=(t.y-e.y)/o;return new YP(r,s)}var Jl=class extends sa{constructor(e,t,n){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new jA(this.posx,this.posy),this.editorPos=tre(n),this.relativePos=ire(n,this.editorPos,this.pos)}},JP=class{constructor(e){this._editorViewDomNode=e}_create(e){return new Jl(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return le(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return le(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return le(e,Ee.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return le(e,Ee.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return le(e,Ee.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return le(e,"mousemove",n=>t(this._create(n)))}},XP=class{constructor(e){this._editorViewDomNode=e}_create(e){return new Jl(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return le(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return le(e,Ee.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return le(e,Ee.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return le(e,"pointermove",n=>t(this._create(n)))}},ZP=class extends J{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new Gh),this._keydownListener=null}startMonitoring(e,t,n,o,r){this._keydownListener=Tn(document,"keydown",s=>{s.toKeybinding().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,s.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,s=>{o(new Jl(s,!0,this._editorViewDomNode))},s=>{this._keydownListener.dispose(),r(s)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}},KA=class i{constructor(e){this._editor=e,this._instanceId=++i._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new jt(()=>this.garbageCollect(),1e3)}createClassNameRef(e){let t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){let t=this.computeUniqueKey(e),n=this._rules.get(t);if(!n){let o=this._counter++;n=new e4(t,`dyn-rule-${this._instanceId}-${o}`,yA(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(let e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};KA._idPool=0;var e4=class{constructor(e,t,n,o){this.key=e,this.className=t,this.properties=o,this._referenceCount=0,this._styleElement=ls(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(let o in t){let r=t[o],s;typeof r=="object"?s=`var(${joe(r.id)})`:s=r;let a=Ume(o);n+=`
	${a}: ${s};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}};function Ume(i){return i.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}var op=class extends J{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,o=e.length;n<o;n++){let r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}},Dr=class extends op{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}},va=class{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){let t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],o=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[o++]=this.read(e)),e=e.parentElement;let r=new Uint8Array(o);for(let s=0;s<o;s++)r[s]=n[o-s-1];return r}},t4=class{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;let n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}},i4=class extends t4{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}},n4=class{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}},ax=class i{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){let t=new Array(e.length);for(let n=0,o=e.length;n<o;n++){let r=e[n];t[n]=new i(r.left,r.width)}return t}toString(){return`[${this.left},${this.width}]`}},xh=class{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}},o4=class{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}},r4=class{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}},x1=class{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,o,r){let s=this._createRange();try{return s.setStart(e,t),s.setEnd(n,o),s.getClientRects()}catch{return null}finally{this._detachRange(s,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(xh.compare);let t=[],n=0,o=e[0];for(let r=1,s=e.length;r<s;r++){let a=e[r];o.left+o.width+.9>=a.left?o.width=Math.max(o.width,a.left+a.width-o.left):(t[n++]=o,o=a)}return t[n++]=o,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;let o=[];for(let r=0,s=e.length;r<s;r++){let a=e[r];o[r]=new xh(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(o)}static readHorizontalRanges(e,t,n,o,r,s,a,l){let c=e.children.length-1;if(0>c)return null;if(t=Math.min(c,Math.max(0,t)),o=Math.min(c,Math.max(0,o)),t===o&&n===r&&n===0&&!e.children[t].firstChild){let g=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(g,s,a)}t!==o&&o>0&&r===0&&(o--,r=1073741824);let d=e.children[t].firstChild,h=e.children[o].firstChild;if((!d||!h)&&(!d&&n===0&&t>0&&(d=e.children[t-1].firstChild,n=1073741824),!h&&r===0&&o>0&&(h=e.children[o-1].firstChild,r=1073741824)),!d||!h)return null;n=Math.min(d.textContent.length,Math.max(0,n)),r=Math.min(h.textContent.length,Math.max(0,r));let u=this._readClientRects(d,n,h,r,l);return this._createHorizontalRangesFromClientRects(u,s,a)}},Aa=class i{constructor(e,t,n,o){this.startColumn=e,this.endColumn=t,this.className=n,this.type=o,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){let n=e.length,o=t.length;if(n!==o)return!1;for(let r=0;r<n;r++)if(!i._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;let o=t+1,r=n+1,s=n-t,a=[],l=0;for(let c of e)c.endColumn<=o||c.startColumn>=r||(a[l++]=new i(Math.max(1,c.startColumn-o+1),Math.min(s+1,c.endColumn-o+1),c.className,c.type));return a}static filter(e,t,n,o){if(e.length===0)return[];let r=[],s=0;for(let a=0,l=e.length;a<l;a++){let c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;let h=d.startLineNumber===t?d.startColumn:n,u=d.endLineNumber===t?d.endColumn:o;r[s++]=new i(h,u,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){let n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;let n=i._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}},lx=class{constructor(e,t,n,o){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=o}},s4=class i{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,o=e.length;n<o;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let o=0;for(;o+1<this.count&&this.stopOffsets[o]===this.stopOffsets[o+1];)o++;n.push(new lx(t,this.stopOffsets[o],this.classNames.join(" "),i._metadata(this.metadata))),t=this.stopOffsets[o]+1,this.stopOffsets.splice(0,o+1),this.classNames.splice(0,o+1),this.metadata.splice(0,o+1),this.count-=o+1}return this.count>0&&t<e&&(n.push(new lx(t,e-1,this.classNames.join(" "),i._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let o=0;o<this.count;o++)if(this.stopOffsets[o]>=e){this.stopOffsets.splice(o,0,e),this.classNames.splice(o,0,t),this.metadata.splice(o,0,n);break}this.count++}},a4=class{static normalize(e,t){if(t.length===0)return[];let n=[],o=new s4,r=0;for(let s=0,a=t.length;s<a;s++){let l=t[s],c=l.startColumn,d=l.endColumn,h=l.className,u=l.type===1?2:l.type===2?4:0;if(c>1){let f=e.charCodeAt(c-2);En(f)&&c--}if(d>1){let f=e.charCodeAt(d-2);En(f)&&d--}let g=c-1,p=d-2;r=o.consumeLowerThan(g,r,n),o.count===0&&(r=g),o.insert(p,h,u)}return o.consumeLowerThan(1073741824,r,n),n}},Cn=class{constructor(e,t,n,o){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=o,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}},l4=class{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}},Xl=class{constructor(e,t,n,o,r,s,a,l,c,d,h,u,g,p,f,v,b,A,w){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=o,this.isBasicASCII=r,this.containsRTL=s,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(Aa.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=u,this.stopRenderingLineAfter=f,this.renderWhitespace=v==="all"?4:v==="boundary"?1:v==="selection"?2:v==="trailing"?3:0,this.renderControlCharacters=b,this.fontLigatures=A,this.selectionsOnLine=w&&w.sort((L,S)=>L.startOffset<S.startOffset?-1:1);let C=Math.abs(p-u),k=Math.abs(g-u);C<k?(this.renderSpaceWidth=p,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=g,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Aa.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}},qA=class{constructor(e,t){this.partIndex=e,this.charIndex=t}},$A=class i{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,o){let r=(t<<16|n<<0)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=o}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){let t=this.charOffsetToPartData(e-1),n=i.getPartIndex(t),o=i.getCharIndex(t);return new qA(n,o)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let o=(e<<16|n<<0)>>>0,r=0,s=this.length-1;for(;r+1<s;){let f=r+s>>>1,v=this._data[f];if(v===o)return f;v>o?s=f:r=f}if(r===s)return r;let a=this._data[r],l=this._data[s];if(a===o)return r;if(l===o)return s;let c=i.getPartIndex(a),d=i.getCharIndex(a),h=i.getPartIndex(l),u;c!==h?u=t:u=i.getCharIndex(l);let g=n-d,p=u-n;return g<=p?r:s}},GA=class{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}};function OC(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,o=0;for(let s of i.lineDecorations)(s.type===1||s.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(s.className),e.appendASCIIString('"></span>'),s.type===1&&(o|=1,t++),s.type===2&&(o|=2,n++));e.appendASCIIString("</span>");let r=new $A(1,t+n);return r.setColumnInfo(1,t,0,0),new GA(r,!1,o)}return e.appendASCIIString("<span><span></span></span>"),new GA(new $A(0,0),!1,0)}return Yme(Qme(i),e)}var c4=class{constructor(e,t,n,o){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=o}};function UM(i){let e=jh(1e4),t=OC(i,e);return new c4(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}var d4=class{constructor(e,t,n,o,r,s,a,l,c,d,h,u,g,p,f){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=o,this.isOverflowing=r,this.parts=s,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=d,this.containsRTL=h,this.spaceWidth=u,this.renderSpaceCharCode=g,this.renderWhitespace=p,this.renderControlCharacters=f}};function Qme(i){let e=i.lineContent,t,n;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=i.stopRenderingLineAfter):(t=!1,n=e.length);let o=jme(e,i.containsRTL,i.lineTokens,i.fauxIndentLength,n);i.renderControlCharacters&&!i.isBasicASCII&&(o=qme(e,o)),(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3)&&(o=$me(i,e,n,o));let r=0;if(i.lineDecorations.length>0){for(let s=0,a=i.lineDecorations.length;s<a;s++){let l=i.lineDecorations[s];l.type===3||l.type===1?r|=1:l.type===2&&(r|=2)}o=Gme(e,n,o,i.lineDecorations)}return i.containsRTL||(o=Kme(e,o,!i.isBasicASCII||i.fontLigatures)),new d4(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,n,t,o,r,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function jme(i,e,t,n,o){let r=[],s=0;n>0&&(r[s++]=new Cn(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){let d=t.getEndOffset(l);if(d<=n)continue;let h=t.getClassName(l);if(d>=o){let g=e?y_(i.substring(a,o)):!1;r[s++]=new Cn(o,h,0,g);break}let u=e?y_(i.substring(a,d)):!1;r[s++]=new Cn(d,h,0,u),a=d}return r}function Kme(i,e,t){let n=0,o=[],r=0;if(t)for(let s=0,a=e.length;s<a;s++){let l=e[s],c=l.endIndex;if(n+50<c){let d=l.type,h=l.metadata,u=l.containsRTL,g=-1,p=n;for(let f=n;f<c;f++)i.charCodeAt(f)===32&&(g=f),g!==-1&&f-p>=50&&(o[r++]=new Cn(g+1,d,h,u),p=g+1,g=-1);p!==c&&(o[r++]=new Cn(c,d,h,u))}else o[r++]=l;n=c}else for(let s=0,a=e.length;s<a;s++){let l=e[s],c=l.endIndex,d=c-n;if(d>50){let h=l.type,u=l.metadata,g=l.containsRTL,p=Math.ceil(d/50);for(let f=1;f<p;f++){let v=n+f*50;o[r++]=new Cn(v,h,u,g)}o[r++]=new Cn(c,h,u,g)}else o[r++]=l;n=c}return o}function nre(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function qme(i,e){let t=[],n=new Cn(0,"",0,!1),o=0;for(let r of e){let s=r.endIndex;for(;o<s;o++){let a=i.charCodeAt(o);nre(a)&&(o>n.endIndex&&(n=new Cn(o,r.type,r.metadata,r.containsRTL),t.push(n)),n=new Cn(o+1,"mtkcontrol",r.metadata,!1),t.push(n))}o>n.endIndex&&(n=new Cn(s,r.type,r.metadata,r.containsRTL),t.push(n))}return t}function $me(i,e,t,n){let o=i.continuesWithWrappedLine,r=i.fauxIndentLength,s=i.tabSize,a=i.startVisibleColumn,l=i.useMonospaceOptimizations,c=i.selectionsOnLine,d=i.renderWhitespace===1,h=i.renderWhitespace===3,u=i.renderSpaceWidth!==i.spaceWidth,g=[],p=0,f=0,v=n[f].type,b=n[f].containsRTL,A=n[f].endIndex,w=n.length,C=!1,k=rr(e),L;k===-1?(C=!0,k=t,L=t):L=Ol(e);let S=!1,y=0,M=c&&c[y],O=a%s;for(let D=r;D<t;D++){let K=e.charCodeAt(D);M&&D>=M.endOffset&&(y++,M=c&&c[y]);let oe;if(D<k||D>L)oe=!0;else if(K===9)oe=!0;else if(K===32)if(d)if(S)oe=!0;else{let ie=D+1<t?e.charCodeAt(D+1):0;oe=ie===32||ie===9}else oe=!0;else oe=!1;if(oe&&c&&(oe=!!M&&M.startOffset<=D&&M.endOffset>D),oe&&h&&(oe=C||D>L),oe&&b&&D>=k&&D<=L&&(oe=!1),S){if(!oe||!l&&O>=s){if(u){let ie=p>0?g[p-1].endIndex:r;for(let ce=ie+1;ce<=D;ce++)g[p++]=new Cn(ce,"mtkw",1,!1)}else g[p++]=new Cn(D,"mtkw",1,!1);O=O%s}}else(D===A||oe&&D>r)&&(g[p++]=new Cn(D,v,0,b),O=O%s);for(K===9?O=s:zh(K)?O+=2:O++,S=oe;D===A&&(f++,f<w);)v=n[f].type,b=n[f].containsRTL,A=n[f].endIndex}let H=!1;if(S)if(o&&d){let D=t>0?e.charCodeAt(t-1):0,K=t>1?e.charCodeAt(t-2):0;D===32&&K!==32&&K!==9||(H=!0)}else H=!0;if(H)if(u){let D=p>0?g[p-1].endIndex:r;for(let K=D+1;K<=t;K++)g[p++]=new Cn(K,"mtkw",1,!1)}else g[p++]=new Cn(t,"mtkw",1,!1);else g[p++]=new Cn(t,v,0,b);return g}function Gme(i,e,t,n){n.sort(Aa.compare);let o=a4.normalize(i,n),r=o.length,s=0,a=[],l=0,c=0;for(let h=0,u=t.length;h<u;h++){let g=t[h],p=g.endIndex,f=g.type,v=g.metadata,b=g.containsRTL;for(;s<r&&o[s].startOffset<p;){let A=o[s];if(A.startOffset>c&&(c=A.startOffset,a[l++]=new Cn(c,f,v,b)),A.endOffset+1<=p)c=A.endOffset+1,a[l++]=new Cn(c,f+" "+A.className,v|A.metadata,b),s++;else{c=p,a[l++]=new Cn(c,f+" "+A.className,v|A.metadata,b);break}}p>c&&(c=p,a[l++]=new Cn(c,f,v,b))}let d=t[t.length-1].endIndex;if(s<r&&o[s].startOffset===d)for(;s<r&&o[s].startOffset===d;){let h=o[s];a[l++]=new Cn(c,h.className,h.metadata,!1),s++}return a}function Yme(i,e){let t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,o=i.containsForeignElements,r=i.lineContent,s=i.len,a=i.isOverflowing,l=i.parts,c=i.fauxIndentLength,d=i.tabSize,h=i.startVisibleColumn,u=i.containsRTL,g=i.spaceWidth,p=i.renderSpaceCharCode,f=i.renderWhitespace,v=i.renderControlCharacters,b=new $A(s+1,l.length),A=!1,w=0,C=h,k=0,L=0,S=0;u?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let y=0,M=l.length;y<M;y++){let O=l[y],H=O.endIndex,D=O.type,K=O.containsRTL,oe=f!==0&&O.isWhitespace(),ie=oe&&!t&&(D==="mtkw"||!o),ce=w===H&&O.isPseudoAfter();if(k=0,e.appendASCIIString("<span "),K&&e.appendASCIIString('style="unicode-bidi:isolate" '),e.appendASCIIString('class="'),e.appendASCIIString(ie?"mtkz":D),e.appendASCII(34),oe){let se=0;{let _e=w,Ve=C;for(;_e<H;_e++){let Qe=(r.charCodeAt(_e)===9?d-Ve%d:1)|0;se+=Qe,_e>=c&&(Ve+=Qe)}}for(ie&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(g*se)),e.appendASCIIString('px"')),e.appendASCII(62);w<H;w++){b.setColumnInfo(w+1,y-S,k,L),S=0;let _e=r.charCodeAt(w),Ve,Qe;if(_e===9){Ve=d-C%d|0,Qe=Ve,!n||Qe>1?e.write1(8594):e.write1(65515);for(let pt=2;pt<=Qe;pt++)e.write1(160)}else Ve=2,Qe=1,e.write1(p),e.write1(8204);k+=Ve,L+=Qe,w>=c&&(C+=Qe)}}else for(e.appendASCII(62);w<H;w++){b.setColumnInfo(w+1,y-S,k,L),S=0;let se=r.charCodeAt(w),_e=1,Ve=1;switch(se){case 9:_e=d-C%d,Ve=_e;for(let Qe=1;Qe<=_e;Qe++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:v?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:zh(se)&&Ve++,v&&se<32?e.write1(9216+se):v&&se===127?e.write1(9249):v&&nre(se)?(e.appendASCIIString("[U+"),e.appendASCIIString(Jme(se)),e.appendASCIIString("]"),_e=8,Ve=_e):e.write1(se)}k+=_e,L+=Ve,w>=c&&(C+=Ve)}ce?S++:S=0,w>=s&&!A&&O.isPseudoAfter()&&(A=!0,b.setColumnInfo(w+1,y,k,L)),e.appendASCIIString("</span>")}return A||b.setColumnInfo(s+1,l.length-1,k,L),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new GA(b,u,o)}function Jme(i){return i.toString(16).toUpperCase().padStart(4,"0")}var Xme=function(){return Ga?!0:!(go||as||bd)}(),k1=!0,cx=class{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=t}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;let e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}},dx=class{constructor(e,t){this.themeType=t;let n=e.options,o=n.get(46);this.renderWhitespace=n.get(90),this.renderControlCharacters=n.get(85),this.spaceWidth=o.spaceWidth,this.middotWidth=o.middotWidth,this.wsmiddotWidth=o.wsmiddotWidth,this.useMonospaceOptimizations=o.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=o.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(61),this.stopRenderingLineAfter=n.get(107),this.fontLigatures=n.get(47)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}},El=class i{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Pt(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Io(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,o){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;let r=n.getViewLineRenderingData(e),s=this._options,a=Aa.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn),l=null;if(Io(s.themeType)||this._options.renderWhitespace==="selection"){let u=n.selections;for(let g of u){if(g.endLineNumber<e||g.startLineNumber>e)continue;let p=g.startLineNumber===e?g.startColumn:r.minColumn,f=g.endLineNumber===e?g.endColumn:r.maxColumn;p<f&&(Io(s.themeType)||this._options.renderWhitespace!=="selection"?a.push(new Aa(p,f,"inline-selected-text",0)):(l||(l=[]),l.push(new l4(p-1,f-1))))}}let c=new Xl(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,a,r.tabSize,r.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==$l.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;o.appendASCIIString('<div style="top:'),o.appendASCIIString(String(t)),o.appendASCIIString("px;height:"),o.appendASCIIString(String(this._options.lineHeight)),o.appendASCIIString('px;" class="'),o.appendASCIIString(i.CLASS_NAME),o.appendASCIIString('">');let d=OC(c,o);o.appendASCIIString("</div>");let h=null;return k1&&Xme&&r.isBasicASCII&&s.useMonospaceOptimizations&&d.containsForeignElements===0&&r.content.length<300&&c.lineTokens.getCount()<100&&(h=new lf(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping)),h||(h=ore(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof lf:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof lf?this._renderedViewLine.monospaceAssumptionsAreValid():k1}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof lf&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,o){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));let r=this._renderedViewLine.input.stopRenderingLineAfter,s=!1;r!==-1&&t>r+1&&n>r+1&&(s=!0),r!==-1&&t>r+1&&(t=r+1),r!==-1&&n>r+1&&(n=r+1);let a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,o);return a&&a.length>0?new r4(s,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}};El.CLASS_NAME="view-line";var lf=class{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return k1;let e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),k1=!1),k1}toSlowRenderedLine(){return ore(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,o){let r=this._getCharPosition(t),s=this._getCharPosition(n);return[new xh(r,s-r)]}_getCharPosition(e){let t=this._characterMapping.getHorizontalOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){let o=t.textContent.length,r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new qA(r,n),o)}},hx=class{constructor(e,t,n,o,r){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!o||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,o){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){let r=this._readPixelOffset(this.domNode,e,t,o);if(r===-1)return null;let s=this._readPixelOffset(this.domNode,e,n,o);return s===-1?null:[new xh(r,s-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,o)}_readVisibleRangesForRange(e,t,n,o,r){if(n===o){let s=this._readPixelOffset(e,t,n,r);return s===-1?null:[new xh(s,0)]}else return this._readRawVisibleRangesForRange(e,n,o,r)}_readPixelOffset(e,t,n,o){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();let r=this._getReadingTarget(e);return r.firstChild?r.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){let r=this._pixelOffsetCache[n];if(r!==-1)return r;let s=this._actualReadPixelOffset(e,t,n,o);return this._pixelOffsetCache[n]=s,s}return this._actualReadPixelOffset(e,t,n,o)}_actualReadPixelOffset(e,t,n,o){if(this._characterMapping.length===0){let l=x1.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,o.clientRectDeltaLeft,o.clientRectScale,o.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();let r=this._characterMapping.getDomPosition(n),s=x1.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,o.clientRectDeltaLeft,o.clientRectScale,o.endNode);if(!s||s.length===0)return-1;let a=s[0].left;if(this.input.isBasicASCII){let l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,o){if(t===1&&n===this._characterMapping.length)return[new xh(0,this.getWidth())];let r=this._characterMapping.getDomPosition(t),s=this._characterMapping.getDomPosition(n);return x1.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,s.partIndex,s.charIndex,o.clientRectDeltaLeft,o.clientRectScale,o.endNode)}getColumnOfNodeOffset(e,t,n){let o=t.textContent.length,r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new qA(r,n),o)}},h4=class extends hx{_readVisibleRangesForRange(e,t,n,o,r){let s=super._readVisibleRangesForRange(e,t,n,o,r);if(!s||s.length===0||n===o||n===1&&o===this._characterMapping.length)return s;if(!this.input.containsRTL){let a=this._readPixelOffset(e,t,o,r);if(a!==-1){let l=s[s.length-1];l.left<a&&(l.width=a-l.left)}}return s}},ore=function(){return Ch?Zme:efe}();function Zme(i,e,t,n,o){return new h4(i,e,t,n,o)}function efe(i,e,t,n,o){return new hx(i,e,t,n,o)}var Cl=class{constructor(e=null){this.hitTarget=e,this.type=0}},YA=class{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}},Yu;(function(i){function e(t,n,o){let r=t.getPositionFromDOMInfo(n,o);return r?new YA(r,n,null):new Cl(n)}i.createFromDOMInfo=e})(Yu||(Yu={}));var u4=class{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}},Wo=class{static _deduceRage(e,t=null){return!t&&e?new E(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,o,r,s){return{type:e,element:t,mouseColumn:n,position:o,range:r,detail:s}}static createViewZone(e,t,n,o,r){return{type:e,element:t,mouseColumn:n,position:o,range:this._deduceRage(o),detail:r}}static createContentText(e,t,n,o,r){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,o),detail:r}}static createContentEmpty(e,t,n,o){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:o}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t)}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}},Yr=class{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}},JA=class i{constructor(e,t,n){this.viewModel=e.viewModel;let o=e.configuration.options;this.layoutInfo=o.get(133),this.viewDomNode=t.viewDomNode,this.lineHeight=o.get(61),this.stickyTabStops=o.get(106),this.typicalHalfwidthCharacterWidth=o.get(46).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return i.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){let n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){let o=n.verticalOffset+n.height/2,r=e.viewModel.getLineCount(),s=null,a,l=null;return n.afterLineNumber!==r&&(l=new q(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(s=new q(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=s:s===null?a=l:t<o?a=s:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:s,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){let o=this._context.viewModel.getLineCount(),r=this._context.viewModel.getLineMaxColumn(o);return{range:new E(o,r,o,r),isAfterLines:!0}}let t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new E(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return i._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}},g4=class{constructor(e,t,n,o){this.editorPos=t,this.pos=n,this.relativePos=o,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,ux._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}},p4=class i extends g4{constructor(e,t,n,o,r){super(e,t,n,o),this._ctx=e,r?(this.target=r,this.targetPath=va.collect(r,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?bn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Wo.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Wo.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,o){return Wo.createMargin(e,this.target,this._getMouseColumn(t),t,n,o)}fulfillViewZone(e,t,n){return Wo.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return Wo.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return Wo.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Wo.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Wo.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Wo.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new i(this._ctx,this.editorPos,this.pos,this.relativePos,e)}},wZ={isAfterLines:!0};function W2(i){return{isAfterLines:!1,horizontalDistanceToText:i}}var ux=class i{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){let t=e.target,n=va.collect(t,this._viewHelper.viewDomNode);return!!(Yr.isChildOfContentWidgets(n)||Yr.isChildOfOverflowingContentWidgets(n)||Yr.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,o,r){let s=new JA(this._context,this._viewHelper,e),a=new p4(s,t,n,o,r);try{return i._createMouseTarget(s,a,!1)}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfillUnknown();let s=i._doHitTest(e,t);return s.type===1?i.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}let o=t,r=null;return r=r||i._hitTestContentWidget(e,o),r=r||i._hitTestOverlayWidget(e,o),r=r||i._hitTestMinimap(e,o),r=r||i._hitTestScrollbarSlider(e,o),r=r||i._hitTestViewZone(e,o),r=r||i._hitTestMargin(e,o),r=r||i._hitTestViewCursor(e,o),r=r||i._hitTestTextArea(e,o),r=r||i._hitTestViewLines(e,o,n),r=r||i._hitTestScrollbar(e,o),r||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Yr.isChildOfContentWidgets(t.targetPath)||Yr.isChildOfOverflowingContentWidgets(t.targetPath)){let n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Yr.isChildOfOverlayWidgets(t.targetPath)){let n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){let n=e.lastRenderData.lastViewCursorsRenderData;for(let o of n)if(t.target===o.domNode)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){let n=e.lastRenderData.lastViewCursorsRenderData,o=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(let s of n){if(o<s.contentLeft||o>s.contentLeft+s.width)continue;let a=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(a<=r&&r<=a+s.height)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){let n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){let o=t.isInContentArea?8:5;return t.fulfillViewZone(o,n.position,n)}return null}static _hitTestTextArea(e,t){return Yr.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){let n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),o=n.range.getStartPosition(),r=Math.abs(t.relativePos.x),s={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};return r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,o,n.range,s):(r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,o,n.range,s):(r-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,o,n.range,s)))}return null}static _hitTestViewLines(e,t,n){if(!Yr.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new q(1,1),wZ);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){let r=e.viewModel.getLineCount(),s=e.viewModel.getLineMaxColumn(r);return t.fulfillContentEmpty(new q(r,s),wZ)}if(n){if(Yr.isStrictChildOfViewLines(t.targetPath)){let r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(r)===0){let a=e.getLineWidth(r),l=W2(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new q(r,1),l)}let s=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>=s){let a=W2(t.mouseContentHorizontalOffset-s),l=new q(r,e.viewModel.getLineMaxColumn(r));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}let o=i._doHitTest(e,t);return o.type===1?i.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}static _hitTestMinimap(e,t){if(Yr.isChildOfMinimap(t.targetPath)){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new q(n,o))}return null}static _hitTestScrollbarSlider(e,t){if(Yr.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){let n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){let o=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(o);return t.fulfillScrollbar(new q(o,r))}}return null}static _hitTestScrollbar(e,t){if(Yr.isChildOfScrollableElement(t.targetPath)){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new q(n,o))}return null}getMouseColumn(e){let t=this._context.configuration.options,n=t.get(133),o=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return i._getMouseColumn(o,t.get(46).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,o,r){let s=o.lineNumber,a=o.column,l=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>l){let v=W2(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(o,v)}let c=e.visibleRangeForPosition(s,a);if(!c)return t.fulfillUnknown(o);let d=c.left;if(t.mouseContentHorizontalOffset===d)return t.fulfillContentText(o,null,{mightBeForeignElement:!!r,injectedText:r});let h=[];if(h.push({offset:c.left,column:a}),a>1){let v=e.visibleRangeForPosition(s,a-1);v&&h.push({offset:v.left,column:a-1})}let u=e.viewModel.getLineMaxColumn(s);if(a<u){let v=e.visibleRangeForPosition(s,a+1);v&&h.push({offset:v.left,column:a+1})}h.sort((v,b)=>v.offset-b.offset);let g=t.pos.toClientCoordinates(),p=n.getBoundingClientRect(),f=p.left<=g.clientX&&g.clientX<=p.right;for(let v=1;v<h.length;v++){let b=h[v-1],A=h[v];if(b.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=A.offset){let w=new E(s,b.column,s,A.column),C=Math.abs(b.offset-t.mouseContentHorizontalOffset),k=Math.abs(A.offset-t.mouseContentHorizontalOffset),L=C<k?new q(s,b.column):new q(s,A.column);return t.fulfillContentText(L,w,{mightBeForeignElement:!f||!!r,injectedText:r})}}return t.fulfillContentText(o,null,{mightBeForeignElement:!f||!!r,injectedText:r})}static _doHitTestWithCaretRangeFromPoint(e,t){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2),r=t.pos.y+(o-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+t.editorPos.height&&(r=t.editorPos.y+t.editorPos.height-1);let s=new jA(t.pos.x,r),a=this._actualDoHitTestWithCaretRangeFromPoint(e,s.toClientCoordinates());return a.type===1?a:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){let n=Yg(e.viewDomNode),o;if(n?typeof n.caretRangeFromPoint>"u"?o=tfe(n,t.clientX,t.clientY):o=n.caretRangeFromPoint(t.clientX,t.clientY):o=document.caretRangeFromPoint(t.clientX,t.clientY),!o||!o.startContainer)return new Cl;let r=o.startContainer;if(r.nodeType===r.TEXT_NODE){let s=r.parentNode,a=s?s.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===El.CLASS_NAME?Yu.createFromDOMInfo(e,s,o.startOffset):new Cl(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){let s=r.parentNode,a=s?s.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===El.CLASS_NAME?Yu.createFromDOMInfo(e,r,r.textContent.length):new Cl(r)}return new Cl}static _doHitTestWithCaretPositionFromPoint(e,t){let n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){let o=n.offsetNode.parentNode,r=o?o.parentNode:null,s=r?r.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===El.CLASS_NAME?Yu.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Cl(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){let o=n.offsetNode.parentNode,r=o&&o.nodeType===o.ELEMENT_NODE?o.className:null,s=o?o.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(r===El.CLASS_NAME){let l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return Yu.createFromDOMInfo(e,l,0)}else if(a===El.CLASS_NAME)return Yu.createFromDOMInfo(e,n.offsetNode,0)}return new Cl(n.offsetNode)}static _snapToSoftTabBoundary(e,t){let n=t.getLineContent(e.lineNumber),{tabSize:o}=t.model.getOptions(),r=BA.atomicPosition(n,e.column-1,o,2);return r!==-1?new q(e.lineNumber,r+1):e}static _doHitTest(e,t){let n=new Cl;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){let o=e.viewModel.getInjectedTextAt(n.position),r=e.viewModel.normalizePosition(n.position,2);(o||!r.equals(n.position))&&(n=new YA(r,n.spanNode,o))}return n.type===1&&e.stickyTabStops&&(n=new YA(this._snapToSoftTabBoundary(n.position,e.viewModel),n.spanNode,n.injectedText)),n}};function tfe(i,e,t){let n=document.createRange(),o=i.elementFromPoint(e,t);if(o!==null){for(;o&&o.firstChild&&o.firstChild.nodeType!==o.firstChild.TEXT_NODE&&o.lastChild&&o.lastChild.firstChild;)o=o.lastChild;let r=o.getBoundingClientRect(),s=window.getComputedStyle(o,null).getPropertyValue("font"),a=o.innerText,l=r.left,c=0,d;if(e>r.left+r.width)c=a.length;else{let h=gx.getInstance();for(let u=0;u<a.length+1;u++){if(d=h.getCharWidth(a.charAt(u),s)/2,l+=d,e<l){c=u;break}l+=d}}n.setStart(o.firstChild,c),n.setEnd(o.firstChild,c)}return n}var gx=class i{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return i._INSTANCE||(i._INSTANCE=new i),i._INSTANCE}getCharWidth(e,t){let n=e+t;if(this._cache[n])return this._cache[n];let o=this._canvas.getContext("2d");o.font=t;let r=o.measureText(e).width;return this._cache[n]=r,r}};gx._INSTANCE=null;var XA=class extends op{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new ux(this._context,n),this._mouseDownOperation=this._register(new m4(this._context,this.viewController,this.viewHelper,(a,l)=>this._createMouseTarget(a,l),a=>this._getMouseColumn(a))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(133).height;let o=new JP(this.viewHelper.viewDomNode);this._register(o.onContextMenu(this.viewHelper.viewDomNode,a=>this._onContextMenu(a,!0))),this._register(o.onMouseMove(this.viewHelper.viewDomNode,a=>{this._onMouseMove(a),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=le(document,"mousemove",l=>{this.viewHelper.viewDomNode.contains(l.target)||this._onMouseLeave(new Jl(l,!1,this.viewHelper.viewDomNode))}))})),this._register(o.onMouseUp(this.viewHelper.viewDomNode,a=>this._onMouseUp(a))),this._register(o.onMouseLeave(this.viewHelper.viewDomNode,a=>this._onMouseLeave(a)));let r=0;this._register(o.onPointerDown(this.viewHelper.viewDomNode,(a,l)=>{r=l})),this._register(le(this.viewHelper.viewDomNode,Ee.POINTER_UP,a=>{this._mouseDownOperation.onPointerUp()})),this._register(o.onMouseDown(this.viewHelper.viewDomNode,a=>this._onMouseDown(a,r)));let s=a=>{if(this.viewController.emitMouseWheel(a),!this._context.configuration.options.get(70))return;let l=new Ph(a);if(gt?(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey:a.ctrlKey&&!a.metaKey&&!a.shiftKey&&!a.altKey){let c=yd.getZoomLevel(),d=l.deltaY>0?1:-1;yd.setZoomLevel(c+d),l.preventDefault(),l.stopPropagation()}};this._register(le(this.viewHelper.viewDomNode,Ee.MOUSE_WHEEL,s,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(133)){let t=this._context.configuration.options.get(133).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){let n=new sx(e,t).toPageCoordinates(),o=tre(this.viewHelper.viewDomNode);if(n.y<o.y||n.y>o.y+o.height||n.x<o.x||n.x>o.x+o.width)return null;let r=ire(this.viewHelper.viewDomNode,o,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,n,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){let o=Yg(this.viewHelper.viewDomNode);o&&(n=o.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){let n=this._createMouseTarget(e,!0),o=n.type===6||n.type===7,r=n.type===2||n.type===3||n.type===4,s=n.type===3,a=this._context.configuration.options.get(100),l=n.type===8||n.type===5,c=n.type===9,d=e.leftButton||e.middleButton;gt&&e.leftButton&&e.ctrlKey&&(d=!1);let h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(o||s&&a))h(),this._mouseDownOperation.start(n.type,e,t);else if(r)e.preventDefault();else if(l){let u=n.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(u.viewZoneId)&&(h(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}},m4=class extends J{constructor(e,t,n,o,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=o,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new ZP(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Sr),this._mouseState=new px,this._currentSelection=new Se(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);let t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);let o=this._findMousePosition(t,!0);if(!o||!o.position)return;this._mouseState.trySetCount(t.detail,o.position),t.detail=this._mouseState.count;let r=this._context.configuration.options;if(!r.get(83)&&r.get(31)&&!r.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&o.type===6&&o.position&&this._currentSelection.containsPosition(o.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,s=>this._onMouseDownThenMove(s),s=>{let a=this._findMousePosition(this._lastMouseEvent,!1);s&&s instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(o,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,s=>this._onMouseDownThenMove(s),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;let e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){let t=e.editorPos,n=this._context.viewModel,o=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){let a=Math.max(o.getCurrentScrollTop()-(t.y-e.posy),0),l=JA.getZoneAtCoord(this._context,a);if(l){let d=this._helpPositionJumpOverViewZone(l);if(d)return Wo.createOutsideEditor(r,d)}let c=o.getLineNumberAtVerticalOffset(a);return Wo.createOutsideEditor(r,new q(c,1))}if(e.posy>t.y+t.height){let a=o.getCurrentScrollTop()+e.relativePos.y,l=JA.getZoneAtCoord(this._context,a);if(l){let d=this._helpPositionJumpOverViewZone(l);if(d)return Wo.createOutsideEditor(r,d)}let c=o.getLineNumberAtVerticalOffset(a);return Wo.createOutsideEditor(r,new q(c,n.getLineMaxColumn(c)))}let s=o.getLineNumberAtVerticalOffset(o.getCurrentScrollTop()+e.relativePos.y);return e.posx<t.x?Wo.createOutsideEditor(r,new q(s,1)):e.posx>t.x+t.width?Wo.createOutsideEditor(r,new q(s,n.getLineMaxColumn(s))):null}_findMousePosition(e,t){let n=this._getPositionOutsideEditor(e);if(n)return n;let o=this._createMouseTarget(e,t);if(!o.position)return null;if(o.type===8||o.type===5){let r=this._helpPositionJumpOverViewZone(o.detail);if(r)return Wo.createViewZone(o.type,o.element,o.mouseColumn,r,o.detail)}return o}_helpPositionJumpOverViewZone(e){let t=new q(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,o=e.positionAfter;return n&&o?n.isBefore(t)?n:o:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}},px=class i{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){let n=new Date().getTime();n-this._lastSetMouseDownCountTime>i.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};px.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var bo=class i{constructor(e,t,n,o,r){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=o,this.selectionEndPosition=r}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e){return new i(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new i(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){let o=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,o,-1)}if(e>=this.selectionEnd){let o=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,o,1)}let t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);let n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let o=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)o++;return[e,n*t.length,o]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let o=Math.min(Zg(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(kA(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(o,e.value.length-r);let s=t.value.substring(o,t.value.length-r),a=e.selectionStart-o,l=e.selectionEnd-o,c=t.selectionStart-o,d=t.selectionEnd-o;if(c===d){let u=e.selectionStart-o;return{text:s,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}let h=l-a;return{text:s,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};let n=Math.min(Zg(e.value,t.value),e.selectionEnd),o=Math.min(kA(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(n,e.value.length-o),s=t.value.substring(n,t.value.length-o);e.selectionStart-n;let a=e.selectionEnd-n;t.selectionStart-n;let l=t.selectionEnd-n;return{text:s,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-s.length}}};bo.EMPTY=new bo("",0,0,null,null);var f4=class i{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){let n=e*t,o=n+1,r=n+t;return new E(o,1,r+1,1)}static fromEditorSelection(e,t,n,o,r){let s=i._getPageOfLine(n.startLineNumber,o),a=i._getRangeForPage(s,o),l=i._getPageOfLine(n.endLineNumber,o),c=i._getRangeForPage(l,o),d=a.intersectRanges(new E(1,1,n.startLineNumber,n.startColumn)),h=t.getValueInRange(d,1),u=t.getLineCount(),g=t.getLineMaxColumn(u),p=c.intersectRanges(new E(n.endLineNumber,n.endColumn,u,g)),f=t.getValueInRange(p,1),v;if(s===l||s+1===l)v=t.getValueInRange(n,1);else{let b=a.intersectRanges(n),A=c.intersectRanges(n);v=t.getValueInRange(b,1)+String.fromCharCode(8230)+t.getValueInRange(A,1)}return r&&(h.length>500&&(h=h.substring(h.length-500,h.length)),f.length>500&&(f=f.substring(0,500)),v.length>2*500&&(v=v.substring(0,500)+String.fromCharCode(8230)+v.substring(v.length-500,v.length))),new bo(h+v+f,h.length,h.length+v.length,new q(n.startLineNumber,n.startColumn),new q(n.endLineNumber,n.endColumn))}},mx;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(mx||(mx={}));var _4={forceCopyWithSyntaxHighlighting:!1},rp=class{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};rp.INSTANCE=new rp;var v4=class{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";let t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}},A4=class extends J{constructor(e,t,n,o){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=o,this._onFocus=this._register(new Q),this.onFocus=this._onFocus.event,this._onBlur=this._register(new Q),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new Q),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new Q),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new Q),this.onCut=this._onCut.event,this._onPaste=this._register(new Q),this.onPaste=this._onPaste.event,this._onType=this._register(new Q),this.onType=this._onType.event,this._onCompositionStart=this._register(new Q),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new Q),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new Q),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new Q),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new jt(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new jt(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=bo.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let r=null;this._register(this._textArea.onKeyDown(s=>{let a=new ni(s);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),r=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(s=>{let a=new ni(s);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(s=>{let a=new v4;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&r&&r.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===s.data&&(r.code==="ArrowRight"||r.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:s.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:s.data});return}this._onCompositionStart.fire({data:s.data})})),this._register(this._textArea.onCompositionUpdate(s=>{let a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){let c=bo.readFromTextArea(this._textArea),d=bo.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionUpdate.fire(s);return}let l=a.handleCompositionUpdate(s.data);this._textAreaState=bo.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionUpdate.fire(s)})),this._register(this._textArea.onCompositionEnd(s=>{let a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){let c=bo.readFromTextArea(this._textArea),d=bo.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionEnd.fire();return}let l=a.handleCompositionUpdate(s.data);this._textAreaState=bo.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(s=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;let a=bo.readFromTextArea(this._textArea),l=bo.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&En(l.text.charCodeAt(0))||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(s=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(s),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(s=>{this._ensureClipboardGetsEditorSelection(s)})),this._register(this._textArea.onPaste(s=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),s.preventDefault(),!s.clipboardData)return;let[a,l]=fx.getTextData(s.clipboardData);a&&(l=l||rp.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{let s=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!s&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return le(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;let n=Date.now(),o=n-e;if(e=n,o<5)return;let r=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;let s=this._textArea.getValue();if(this._textAreaState.value!==s)return;let a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;let c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),h=this._textAreaState.deduceEditorPosition(l),u=this._host.deduceModelPosition(h[0],h[1],h[2]),g=new Se(d.lineNumber,d.column,u.lineNumber,u.column);this._onSelectionChangeRequest.fire(g)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){let t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};rp.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&fx.setTextData(e.clipboardData,t.text,t.html,n)}},fx=class{static getTextData(e){let t=e.getData(nr.text),n=null,o=e.getData("vscode-editor-data");if(typeof o=="string")try{n=JSON.parse(o),n.version!==1&&(n=null)}catch{}return t.length===0&&n===null&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map(r=>r.name).join(`
`),null]:[t,n]}static setTextData(e,t,n,o){e.setData(nr.text,t),typeof n=="string"&&e.setData("text/html",n),e.setData("vscode-editor-data",JSON.stringify(o))}},b4=class extends J{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(Ia(this._actual,"keydown")).event,this.onKeyUp=this._register(Ia(this._actual,"keyup")).event,this.onCompositionStart=this._register(Ia(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(Ia(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(Ia(this._actual,"compositionend")).event,this.onInput=this._register(Ia(this._actual,"input")).event,this.onCut=this._register(Ia(this._actual,"cut")).event,this.onCopy=this._register(Ia(this._actual,"copy")).event,this.onPaste=this._register(Ia(this._actual,"paste")).event,this.onFocus=this._register(Ia(this._actual,"focus")).event,this.onBlur=this._register(Ia(this._actual,"blur")).event,this._onSyntheticTap=this._register(new Q),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(le(this._actual,mx.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){let e=Yg(this._actual);return e?e.activeElement===this._actual:iY(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){let n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){let o=this._actual,r=null,s=Yg(o);s?r=s.activeElement:r=document.activeElement;let a=r===o,l=o.selectionStart,c=o.selectionEnd;if(a&&l===t&&c===n){as&&window.parent!==window&&o.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),o.setSelectionRange(t,n),as&&window.parent!==window&&o.focus();return}try{let d=xue(o);this.setIgnoreSelectionChangeTime("setSelectionRange"),o.focus(),o.setSelectionRange(t,n),kue(o,d)}catch{}}},w4=class extends XA{constructor(e,t,n){super(e,t,n),this._register(to.addTarget(this.viewHelper.linesContentDomNode)),this._register(le(this.viewHelper.linesContentDomNode,yi.Tap,r=>this.onTap(r))),this._register(le(this.viewHelper.linesContentDomNode,yi.Change,r=>this.onChange(r))),this._register(le(this.viewHelper.linesContentDomNode,yi.Contextmenu,r=>this._onContextMenu(new Jl(r,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(le(this.viewHelper.linesContentDomNode,"pointerdown",r=>{let s=r.pointerType;if(s==="mouse"){this._lastPointerType="mouse";return}else s==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));let o=new XP(this.viewHelper.viewDomNode);this._register(o.onPointerMove(this.viewHelper.viewDomNode,r=>this._onMouseMove(r))),this._register(o.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(o.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(o.onPointerDown(this.viewHelper.viewDomNode,(r,s)=>this._onMouseDown(r,s)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();let t=this._createMouseTarget(new Jl(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}},C4=class extends XA{constructor(e,t,n){super(e,t,n),this._register(to.addTarget(this.viewHelper.linesContentDomNode)),this._register(le(this.viewHelper.linesContentDomNode,yi.Tap,o=>this.onTap(o))),this._register(le(this.viewHelper.linesContentDomNode,yi.Change,o=>this.onChange(o))),this._register(le(this.viewHelper.linesContentDomNode,yi.Contextmenu,o=>this._onContextMenu(new Jl(o,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();let t=this._createMouseTarget(new Jl(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){let n=document.createEvent("CustomEvent");n.initEvent(mx.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}},y4=class extends J{constructor(e,t,n){super(),jl&&XG.pointerEvents?this.handler=this._register(new w4(e,t,n)):window.TouchEvent?this.handler=this._register(new C4(e,t,n)):this.handler=this._register(new XA(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}},Yh=class extends op{},rre=P("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("lineHighlight","Background color for the highlight of line at the cursor position.")),CZ=P("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:mt},m("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),ife=P("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},m("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),nfe=P("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Pi,hcLight:Pi},m("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),ofe=P("editor.symbolHighlightBackground",{dark:Zc,light:Zc,hcDark:null,hcLight:null},m("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),rfe=P("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Pi,hcLight:Pi},m("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),sre=P("editorCursor.foreground",{dark:"#AEAFAD",light:j.black,hcDark:j.white,hcLight:"#0F4A85"},m("caret","Color of the editor cursor.")),sfe=P("editorCursor.background",null,m("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),nd=P("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},m("editorWhitespaces","Color of whitespace characters in the editor.")),HC=P("editorIndentGuide.background",{dark:nd,light:nd,hcDark:nd,hcLight:nd},m("editorIndentGuides","Color of the editor indentation guides.")),WC=P("editorIndentGuide.activeBackground",{dark:nd,light:nd,hcDark:nd,hcLight:nd},m("editorActiveIndentGuide","Color of the active editor indentation guides.")),are=P("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:j.white,hcLight:"#292929"},m("editorLineNumbers","Color of editor line numbers.")),_y=P("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Pi,hcLight:Pi},m("editorActiveLineNumber","Color of editor active line number"),!1,m("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),afe=P("editorLineNumber.activeForeground",{dark:_y,light:_y,hcDark:_y,hcLight:_y},m("editorActiveLineNumber","Color of editor active line number")),lfe=P("editorRuler.foreground",{dark:"#5A5A5A",light:j.lightgrey,hcDark:j.white,hcLight:"#292929"},m("editorRuler","Color of the editor rulers."));P("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},m("editorCodeLensForeground","Foreground color of editor CodeLens"));var cfe=P("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},m("editorBracketMatchBackground","Background color behind matching brackets")),lre=P("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:mt,hcLight:mt},m("editorBracketMatchBorder","Color for matching brackets boxes")),dfe=P("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},m("editorOverviewRulerBorder","Color of the overview ruler border.")),hfe=P("editorOverviewRuler.background",null,m("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),ufe=P("editorGutter.background",{dark:yn,light:yn,hcDark:yn,hcLight:yn},m("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),gfe=P("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:j.fromHex("#fff").transparent(.8),hcLight:mt},m("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),pfe=P("editorUnnecessaryCode.opacity",{dark:j.fromHex("#000a"),light:j.fromHex("#0007"),hcDark:null,hcLight:null},m("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),mfe=P("editorGhostText.border",{dark:null,light:null,hcDark:j.fromHex("#fff").transparent(.8),hcLight:j.fromHex("#292929").transparent(.8)},m("editorGhostTextBorder","Border color of ghost text in the editor.")),ffe=P("editorGhostText.foreground",{dark:j.fromHex("#ffffff56"),light:j.fromHex("#0007"),hcDark:null,hcLight:null},m("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),_fe=P("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorGhostTextBackground","Background color of the ghost text in the editor.")),vy=new j(new Ct(0,122,204,.6)),vfe=P("editorOverviewRuler.rangeHighlightForeground",{dark:vy,light:vy,hcDark:vy,hcLight:vy},m("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Afe=P("editorOverviewRuler.errorForeground",{dark:new j(new Ct(255,18,18,.7)),light:new j(new Ct(255,18,18,.7)),hcDark:new j(new Ct(255,50,50,1)),hcLight:"#B5200D"},m("overviewRuleError","Overview ruler marker color for errors.")),bfe=P("editorOverviewRuler.warningForeground",{dark:ns,light:ns,hcDark:F_,hcLight:F_},m("overviewRuleWarning","Overview ruler marker color for warnings.")),wfe=P("editorOverviewRuler.infoForeground",{dark:Cr,light:Cr,hcDark:rx,hcLight:rx},m("overviewRuleInfo","Overview ruler marker color for infos.")),cre=P("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},m("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),dre=P("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},m("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),hre=P("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},m("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),ure=P("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),gre=P("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),pre=P("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),Cfe=P("editorBracketHighlight.unexpectedBracket.foreground",{dark:new j(new Ct(255,18,18,.8)),light:new j(new Ct(255,18,18,.8)),hcDark:new j(new Ct(255,50,50,1)),hcLight:""},m("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),yfe=P("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Sfe=P("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Dfe=P("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),xfe=P("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),kfe=P("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Efe=P("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Lfe=P("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Ife=P("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Tfe=P("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Mfe=P("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Nfe=P("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Rfe=P("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));P("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:""},m("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));P("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:""},m("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));xi((i,e)=>{let t=i.getColor(yn);t&&e.addRule(`.monaco-editor, .monaco-editor-background { background-color: ${t}; }`);let n=i.getColor(rre),o=n&&!n.isTransparent()?n:t;o&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${o}; }`);let r=i.getColor(os);r&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${r}; }`);let s=i.getColor(ufe);s&&e.addRule(`.monaco-editor .margin { background-color: ${s}; }`);let a=i.getColor(ife);a&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${a}; }`);let l=i.getColor(nfe);l&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${Io(i.type)?"dotted":"solid"} ${l}; }`);let c=i.getColor(ofe);c&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${c}; }`);let d=i.getColor(rfe);d&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${Io(i.type)?"dotted":"solid"} ${d}; }`);let h=i.getColor(nd);h&&(e.addRule(`.monaco-editor .mtkw { color: ${h} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${h} !important; }`))});var ZA=class i extends Yh{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new q(1,1),this._lastCursorViewPosition=new q(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){let e=this._context.configuration.options;this._lineHeight=e.get(61);let t=e.get(62);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(86);let n=e.get(133);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){let t=e.selections[0].getPosition();this._lastCursorViewPosition=t,this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){let t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q(e,1));if(t.column!==1)return"";let n=t.lineNumber;return this._renderCustomLineNumbers?this._renderCustomLineNumbers(n):this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}let t=go?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,r='<div class="'+i.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',s=null;if(this._renderLineNumbers===2){s=new Array(o-n+1),this._lastCursorViewPosition.lineNumber>=n&&this._lastCursorViewPosition.lineNumber<=o&&(s[this._lastCursorViewPosition.lineNumber-n]=this._lastCursorModelPosition.lineNumber);{let c=0;for(let d=this._lastCursorViewPosition.lineNumber+1;d<=o;d++){let h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q(d,1)).column!==1;h||c++,d>=n&&(s[d-n]=h?0:c)}}{let c=0;for(let d=this._lastCursorViewPosition.lineNumber-1;d>=n;d--){let h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q(d,1)).column!==1;h||c++,d<=o&&(s[d-n]=h?0:c)}}}let a=this._context.viewModel.getLineCount(),l=[];for(let c=n;c<=o;c++){let d=c-n;if(!this._renderFinalNewline&&c===a&&this._context.viewModel.getLineLength(c)===0){l[d]="";continue}let h;if(s){let u=s[d];this._lastCursorViewPosition.lineNumber===c?h=`<span class="relative-current-line-number">${u}</span>`:u?h=String(u):h=""}else h=this._getLineRenderLineNumber(c);h?c===this._activeLineNumber?l[d]='<div class="active-line-number '+i.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":l[d]=r+h+"</div>":l[d]=""}this._renderResult=l}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};ZA.CLASS_NAME="line-numbers";xi((i,e)=>{let t=i.getColor(are);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);let n=i.getColor(afe);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});var O_=class i extends Dr{constructor(e){super(e);let t=this._context.configuration.options,n=t.get(133);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=Pt(document.createElement("div")),this._domNode.setClassName(i.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Pt(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(i.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(133);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");let t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);let n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}};O_.CLASS_NAME="glyph-margin";O_.OUTER_CLASS_NAME="margin";var Eg="monaco-mouse-cursor-text",S4=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Ffe=class{constructor(){this._map=new Map,this._factories=new Map,this._onDidChange=new Q,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(i){this._onDidChange.fire({changedLanguages:i,changedColorMap:!1})}register(i,e){return this._map.set(i,e),this.fire([i]),ct(()=>{this._map.get(i)===e&&(this._map.delete(i),this.fire([i]))})}registerFactory(i,e){var t;(t=this._factories.get(i))===null||t===void 0||t.dispose();let n=new D4(this,i,e);return this._factories.set(i,n),ct(()=>{let o=this._factories.get(i);!o||o!==n||(this._factories.delete(i),o.dispose())})}getOrCreate(i){return S4(this,void 0,void 0,function*(){let e=this.get(i);if(e)return e;let t=this._factories.get(i);return!t||t.isResolved?null:(yield t.resolve(),this.get(i))})}get(i){return this._map.get(i)||null}isResolved(i){if(this.get(i))return!0;let e=this._factories.get(i);return!!(!e||e.isResolved)}setColorMap(i){this._colorMap=i,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},D4=class extends J{constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return S4(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return S4(this,void 0,void 0,function*(){let e=yield Promise.resolve(this._factory.createTokenizationSupport());this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}},eb=class{constructor(i,e,t){this._tokenBrand=void 0,this.offset=i,this.type=e,this.language=t}toString(){return"("+this.offset+", "+this.type+")"}},tb=class{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}},H_=class{constructor(e,t){this._encodedTokenizationResultBrand=void 0,this.tokens=e,this.endState=t}},ib;(function(i){let e=new Map;e.set(0,_.symbolMethod),e.set(1,_.symbolFunction),e.set(2,_.symbolConstructor),e.set(3,_.symbolField),e.set(4,_.symbolVariable),e.set(5,_.symbolClass),e.set(6,_.symbolStruct),e.set(7,_.symbolInterface),e.set(8,_.symbolModule),e.set(9,_.symbolProperty),e.set(10,_.symbolEvent),e.set(11,_.symbolOperator),e.set(12,_.symbolUnit),e.set(13,_.symbolValue),e.set(15,_.symbolEnum),e.set(14,_.symbolConstant),e.set(15,_.symbolEnum),e.set(16,_.symbolEnumMember),e.set(17,_.symbolKeyword),e.set(27,_.symbolSnippet),e.set(18,_.symbolText),e.set(19,_.symbolColor),e.set(20,_.symbolFile),e.set(21,_.symbolReference),e.set(22,_.symbolCustomColor),e.set(23,_.symbolFolder),e.set(24,_.symbolTypeParameter),e.set(25,_.account),e.set(26,_.issues);function t(r){let s=e.get(r);return s||(console.info("No codicon found for CompletionItemKind "+r),s=_.symbolProperty),s}i.toIcon=t;let n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function o(r,s){let a=n.get(r);return typeof a>"u"&&!s&&(a=9),a}i.fromString=o})(ib||(ib={}));var or;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(or||(or={}));var Wl;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(Wl||(Wl={}));var nb;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(nb||(nb={}));function Bfe(i){return i&&$.isUri(i.uri)&&E.isIRange(i.range)&&(E.isIRange(i.originSelectionRange)||E.isIRange(i.targetSelectionRange))}var x4;(function(i){let e=new Map;e.set(0,_.symbolFile),e.set(1,_.symbolModule),e.set(2,_.symbolNamespace),e.set(3,_.symbolPackage),e.set(4,_.symbolClass),e.set(5,_.symbolMethod),e.set(6,_.symbolProperty),e.set(7,_.symbolField),e.set(8,_.symbolConstructor),e.set(9,_.symbolEnum),e.set(10,_.symbolInterface),e.set(11,_.symbolFunction),e.set(12,_.symbolVariable),e.set(13,_.symbolConstant),e.set(14,_.symbolString),e.set(15,_.symbolNumber),e.set(16,_.symbolBoolean),e.set(17,_.symbolArray),e.set(18,_.symbolObject),e.set(19,_.symbolKey),e.set(20,_.symbolNull),e.set(21,_.symbolEnumMember),e.set(22,_.symbolStruct),e.set(23,_.symbolEvent),e.set(24,_.symbolOperator),e.set(25,_.symbolTypeParameter);function t(n){let o=e.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=_.symbolProperty),o}i.toIcon=t})(x4||(x4={}));var ol=class{constructor(i){this.value=i}};ol.Comment=new ol("comment");ol.Imports=new ol("imports");ol.Region=new ol("region");var k4;(function(i){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}i.is=e})(k4||(k4={}));var _x;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(_x||(_x={}));var Ui=new Ffe,E4=class{constructor(e,t,n,o,r){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=o,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){let t=new q(this.modelLineNumber,this.distanceToModelLineStart+1),n=new q(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}},vv=as,L4=class extends Dr{constructor(e,t,n){super(e),this._primaryCursorPosition=new q(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;let o=this._context.configuration.options,r=o.get(133);this._setAccessibilityOptions(o),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=o.get(46),this._lineHeight=o.get(61),this._emptySelectionClipboard=o.get(33),this._copyWithSyntaxHighlighting=o.get(21),this._visibleTextArea=null,this._selections=[new Se(1,1,1,1)],this._modelSelections=[new Se(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Pt(document.createElement("textarea")),va.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Eg}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("tabindex",String(o.get(114))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",m("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),o.get(30)&&o.get(83)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=Pt(document.createElement("div")),this.textAreaCover.setPosition("absolute");let s={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:c=>this._context.viewModel.getLineMaxColumn(c),getValueInRange:(c,d)=>this._context.viewModel.getValueInRange(c,d)},a={getDataToCopy:()=>{let c=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Mn),d=this._context.viewModel.model.getEOL(),h=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),u=Array.isArray(c)?c:null,g=Array.isArray(c)?c.join(d):c,p,f=null;if(_4.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&g.length<65536){let v=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);v&&(p=v.html,f=v.mode)}return{isFromEmptySelection:h,multicursorText:u,text:g,html:p,mode:f}},getScreenReaderContent:c=>{if(this._accessibilitySupport===1){let d=this._selections[0];if(gt&&d.isEmpty()){let h=d.getStartPosition(),u=this._getWordBeforePosition(h);if(u.length===0&&(u=this._getCharacterBeforePosition(h)),u.length>0)return new bo(u,u.length,u.length,h,h)}if(bd&&!d.isEmpty()){let h="vscode-placeholder";return new bo(h,0,h.length,null,null)}return bo.EMPTY}if(Ine){let d=this._selections[0];if(d.isEmpty()){let h=d.getStartPosition(),[u,g]=this._getAndroidWordAtPosition(h);if(u.length>0)return new bo(u,g,g,h,h)}return bo.EMPTY}return f4.fromEditorSelection(c,s,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(c,d,h)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(c,d,h)},l=this._register(new b4(this.textArea.domNode));this._textAreaInput=this._register(new A4(a,l,is,whe)),this._register(this._textAreaInput.onKeyDown(c=>{this._viewController.emitKeyDown(c)})),this._register(this._textAreaInput.onKeyUp(c=>{this._viewController.emitKeyUp(c)})),this._register(this._textAreaInput.onPaste(c=>{let d=!1,h=null,u=null;c.metadata&&(d=this._emptySelectionClipboard&&!!c.metadata.isFromEmptySelection,h=typeof c.metadata.multicursorText<"u"?c.metadata.multicursorText:null,u=c.metadata.mode),this._viewController.paste(c.text,d,h,u)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(c=>{c.replacePrevCharCnt||c.replaceNextCharCnt||c.positionDelta?this._viewController.compositionType(c.text,c.replacePrevCharCnt,c.replaceNextCharCnt,c.positionDelta):this._viewController.type(c.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(c=>{this._viewController.setSelection(c)})),this._register(this._textAreaInput.onCompositionStart(c=>{let d=this.textArea.domNode,h=this._modelSelections[0],{distanceToModelLineStart:u,widthOfHiddenTextBefore:g}=(()=>{let f=d.value.substring(0,Math.min(d.selectionStart,d.selectionEnd)),v=f.lastIndexOf(`
`),b=f.substring(v+1),A=b.lastIndexOf("	"),w=b.length-A-1,C=h.getStartPosition(),k=Math.min(C.column-1,w),L=C.column-1-k,S=b.substring(0,b.length-k),y=Pfe(S,this._fontInfo);return{distanceToModelLineStart:L,widthOfHiddenTextBefore:y}})(),{distanceToModelLineEnd:p}=(()=>{let f=d.value.substring(Math.max(d.selectionStart,d.selectionEnd)),v=f.indexOf(`
`),b=v===-1?f:f.substring(0,v),A=b.indexOf("	"),w=A===-1?b.length:b.length-A-1,C=h.getEndPosition(),k=Math.min(this._context.viewModel.model.getLineMaxColumn(C.lineNumber)-C.column,w);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(C.lineNumber)-C.column-k}})();this._context.viewModel.revealRange("keyboard",!0,E.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new E4(this._context,h.startLineNumber,u,g,p),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Eg} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(c=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${Eg}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){let t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),o=Ms(t),r=!0,s=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&s<=1&&(r=!1),r){let d=n.charCodeAt(s-2);o.get(d)!==0?r=!1:s--}if(a&&l>n.length&&(a=!1),a){let d=n.charCodeAt(l-1);o.get(d)!==0?a=!1:l++}c++}return[n.substring(s-1,l-1),e.column-s]}_getWordBeforePosition(e){let t=this._context.viewModel.getLineContent(e.lineNumber),n=Ms(this._context.configuration.options.get(119)),o=e.column,r=0;for(;o>1;){let s=t.charCodeAt(o-2);if(n.get(s)!==0||r>50)return t.substring(o-1,e.column-1);r++,o--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){let t=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!En(t.charCodeAt(0)))return t}return""}_getAriaLabel(e){return e.get(2)===1?m("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",go?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);let t=e.get(3);this._accessibilitySupport===2&&t===ll.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(133);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(46),this._lineHeight=t.get(61),this._emptySelectionClipboard=t.get(33),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(114))),(e.hasChanged(30)||e.hasChanged(83))&&(t.get(30)&&t.get(83)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){var t;this._primaryCursorPosition=new q(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){let n=this._visibleTextArea.visibleTextareaStart,o=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,s=this._visibleTextArea.endPosition;if(r&&s&&n&&o&&o.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){let a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart)),c=this._visibleTextArea.widthOfHiddenLineTextBefore,d=this._contentLeft+n.left-this._scrollLeft,h=o.left-n.left+1;if(d<this._contentLeft){let b=this._contentLeft-d;d+=b,c+=b,h-=b}h>this._contentWidth&&(h=this._contentWidth);let u=this._context.viewModel.getViewLineData(r.lineNumber),g=u.tokens.findTokenIndexAtOffset(r.column-1),p=u.tokens.findTokenIndexAtOffset(s.column-1),f=g===p,v=this._visibleTextArea.definePresentation(f?u.tokens.getPresentation(g):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:d,width:h,height:this._lineHeight,useCover:!1,color:(Ui.getColorMap()||[])[v.foreground],italic:v.italic,bold:v.bold,underline:v.underline,strikethrough:v.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}let e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}let t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(gt){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:vv?0:1,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;let n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:vv?0:1,height:vv?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:vv?0:1,height:vv?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;let t=this.textArea,n=this.textAreaCover;To(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?j.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);let o=this._context.configuration.options;o.get(52)?n.setClassName("monaco-editor-background textAreaCover "+O_.OUTER_CLASS_NAME):o.get(62).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+ZA.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}};function Pfe(i,e){if(i.length===0)return 0;let t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";let n=document.createElement("span");To(n,e),n.style.whiteSpace="pre",n.append(i),t.appendChild(n),document.body.appendChild(t);let o=n.offsetWidth;return document.body.removeChild(t),o}var I4=class{constructor(e,t,n,o){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=o}paste(e,t,n,o){this.commandDelegate.paste(e,t,n,o)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,o){this.commandDelegate.compositionType(e,t,n,o)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Hn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){let t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new q(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){let t=this.configuration.options,n=go&&t.get(98),o=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):o?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Hn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Hn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Hn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Hn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Hn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Hn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Hn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Hn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Hn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Hn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Hn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Hn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Hn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}},vx=class i{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return i.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){let n=Object.assign({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),n}},z2,Ax=class{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){let t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;let n=this.getStartLineNumber(),o=this.getEndLineNumber();if(t<n){let a=t-e+1;return this._rendLineNumberStart-=a,null}if(e>o)return null;let r=0,s=0;for(let a=n;a<=o;a++){let l=a-this._rendLineNumberStart;e<=a&&a<=t&&(s===0?(r=l,s=1):s++)}if(e<n){let a=0;t<n?a=t-e+1:a=n-e,this._rendLineNumberStart-=a}return this._lines.splice(r,s)}onLinesChanged(e,t){let n=e+t-1;if(this.getCount()===0)return!1;let o=this.getStartLineNumber(),r=this.getEndLineNumber(),s=!1;for(let a=e;a<=n;a++)a>=o&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),s=!0);return s}onLinesInserted(e,t){if(this.getCount()===0)return null;let n=t-e+1,o=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=o)return this._rendLineNumberStart+=n,null;if(e>r)return null;if(n+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);let s=[];for(let h=0;h<n;h++)s[h]=this._createLine();let a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(s).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;let t=this.getStartLineNumber(),n=this.getEndLineNumber(),o=!1;for(let r=0,s=e.length;r<s;r++){let a=e[r];if(a.toLineNumber<t||a.fromLineNumber>n)continue;let l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let d=l;d<=c;d++){let h=d-this._rendLineNumberStart;this._lines[h].onTokensChanged(),o=!0}}return o}},bx=class{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new Ax(()=>this._host.createVisibleLine())}_createDomNode(){let e=Pt(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(133)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){let t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,o=t.length;n<o;n++){let r=t[n].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onLinesInserted(e){let t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,o=t.length;n<o;n++){let r=t[n].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){let t=this._linesCollection._get(),n=new ob(this.domNode.domNode,this._host,e),o={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=n.render(o,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}},ob=class i{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,o){let r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||n<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=n-t+1,r.lines=[];for(let s=t;s<=n;s++)r.lines[s-t]=this.host.createVisibleLine();return this._finishRendering(r,!0,o),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(n-r.rendLineNumberStart,r.linesLength-1),o,t),r.rendLineNumberStart>t){let s=t,a=Math.min(n,r.rendLineNumberStart-1);s<=a&&(this._insertLinesBefore(r,s,a,o,t),r.linesLength+=a-s+1)}else if(r.rendLineNumberStart<t){let s=Math.min(r.linesLength,t-r.rendLineNumberStart);s>0&&(this._removeLinesBefore(r,s),r.linesLength-=s)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<n){let s=r.rendLineNumberStart+r.linesLength,a=n;s<=a&&(this._insertLinesAfter(r,s,a,o,t),r.linesLength+=a-s+1)}else if(r.rendLineNumberStart+r.linesLength-1>n){let s=Math.max(0,n-r.rendLineNumberStart+1),a=r.linesLength-1-s+1;a>0&&(this._removeLinesAfter(r,a),r.linesLength-=a)}return this._finishRendering(r,!1,o),r}_renderUntouchedLines(e,t,n,o,r){let s=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){let c=s+l;a[l].layoutLine(c,o[c-r])}}_insertLinesBefore(e,t,n,o,r){let s=[],a=0;for(let l=t;l<=n;l++)s[a++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){let o=e.lines[n].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,o,r){let s=[],a=0;for(let l=t;l<=n;l++)s[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){let n=e.linesLength-t;for(let o=0;o<t;o++){let r=e.lines[n+o].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,o){i._ttPolicy&&(n=i._ttPolicy.createHTML(n));let r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);let s=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){let l=e.lines[a];o[a]&&(l.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,n){let o=document.createElement("div");i._ttPolicy&&(t=i._ttPolicy.createHTML(t)),o.innerHTML=t;for(let r=0;r<e.linesLength;r++){let s=e.lines[r];if(n[r]){let a=o.firstChild,l=s.getDomNode();l.parentNode.replaceChild(a,l),s.setDomNode(a)}}}_finishRendering(e,t,n){let o=i._sb,r=e.linesLength,s=e.lines,a=e.rendLineNumberStart,l=[];{o.reset();let c=!1;for(let d=0;d<r;d++){let h=s[d];l[d]=!1,!(h.getDomNode()||!h.renderLine(d+a,n[d],this.viewportData,o))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,o.build(),l)}{o.reset();let c=!1,d=[];for(let h=0;h<r;h++){let u=s[h];d[h]=!1,!(l[h]||!u.renderLine(h+a,n[h],this.viewportData,o))&&(d[h]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,o.build(),d)}}};ob._ttPolicy=(z2=window.trustedTypes)===null||z2===void 0?void 0:z2.createPolicy("editorViewLayer",{createHTML:i=>i});ob._sb=jh(1e5);var wx=class extends Dr{constructor(e){super(e),this._visibleLines=new bx(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new T4(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=t;o<=n;o++)this._visibleLines.getVisibleLine(o).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){let t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,o=t.length;n<o;n++){let r=t[n];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}},T4=class{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(61),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Pt(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(61)}renderLine(e,t,n,o){let r="";for(let s=0,a=this._dynamicOverlays.length;s<a;s++){let l=this._dynamicOverlays[s];r+=l.render(n.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,o.appendASCIIString('<div style="position:absolute;top:'),o.appendASCIIString(String(t)),o.appendASCIIString("px;width:100%;height:"),o.appendASCIIString(String(this._lineHeight)),o.appendASCIIString('px;">'),o.appendASCIIString(r),o.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}},M4=class extends wx{constructor(e){super(e);let t=this._context.configuration.options.get(133);this._contentWidth=t.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){let t=this._context.configuration.options.get(133);return this._contentWidth=t.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}},N4=class extends wx{constructor(e){super(e);let t=this._context.configuration.options,n=t.get(133);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),To(this.domNode,t.get(46))}onConfigurationChanged(e){let t=this._context.configuration.options;To(this.domNode,t.get(46));let n=t.get(133);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);let t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}},Ju=class{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}},R4=class extends Dr{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Pt(document.createElement("div")),va.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Pt(document.createElement("div")),va.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){let t=new Ofe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,o){this._widgets[e.getId()].setPosition(t,n,o),this.setShouldRender()}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let n=this._widgets[t];delete this._widgets[t];let o=n.domNode.domNode;o.parentNode.removeChild(o),o.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].prepareRender(e)}render(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].render(e)}},Ofe=class{constructor(i,e,t){this._context=i,this._viewDomNode=e,this._actual=t,this.domNode=Pt(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;let n=this._context.configuration.options,o=n.get(133);this._fixedOverflowWidgets=n.get(38),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=n.get(61),this._range=null,this._viewRange=null,this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(i){let e=this._context.configuration.options;if(this._lineHeight=e.get(61),i.hasChanged(133)){let t=e.get(133);this._contentLeft=t.contentLeft,this._contentWidth=t.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(i){this._setPosition(this._range,this._affinity)}_setPosition(i,e){var t;if(this._range=i,this._viewRange=null,this._affinity=e,this._range){let n=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(n,(t=this._affinity)!==null&&t!==void 0?t:void 0))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(i,e,t){this._setPosition(i,t),this._preference=e,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(i,e,t,n,o){let r=i.top,s=r,a=e.top+this._lineHeight,l=o.viewportHeight-a,c=r-n,d=s>=n,h=a,u=l>=n,g=i.left,p=e.left;return g+t>o.scrollLeft+o.viewportWidth&&(g=o.scrollLeft+o.viewportWidth-t),p+t>o.scrollLeft+o.viewportWidth&&(p=o.scrollLeft+o.viewportWidth-t),g<o.scrollLeft&&(g=o.scrollLeft),p<o.scrollLeft&&(p=o.scrollLeft),{fitsAbove:d,aboveTop:c,aboveLeft:g,fitsBelow:u,belowTop:h,belowLeft:p}}_layoutHorizontalSegmentInPage(i,e,t,n){let o=Math.max(0,e.left-n),r=Math.min(e.left+e.width+n,i.width),s=e.left+t-dd.scrollX;if(s+n>r){let a=s-(r-n);s-=a,t-=a}if(s<o){let a=s-o;s-=a,t-=a}return[t,s]}_layoutBoxInPage(i,e,t,n,o){let r=i.top-n,s=e.top+this._lineHeight,a=Eo(this._viewDomNode.domNode),l=a.top+r-dd.scrollY,c=a.top+s-dd.scrollY,d=AM(document.body),[h,u]=this._layoutHorizontalSegmentInPage(d,a,i.left-o.scrollLeft+this._contentLeft,t),[g,p]=this._layoutHorizontalSegmentInPage(d,a,e.left-o.scrollLeft+this._contentLeft,t),f=22,v=22,b=l>=f,A=c+n<=d.height-v;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(l,f),aboveLeft:u,fitsBelow:A,belowTop:c,belowLeft:p}:{fitsAbove:b,aboveTop:r,aboveLeft:h,fitsBelow:A,belowTop:s,belowLeft:g}}_prepareRenderWidgetAtExactPositionOverflowing(i){return new Ju(i.top,i.left+this._contentLeft)}_getTopAndBottomLeft(i){if(!this._viewRange)return[null,null];let e=i.linesVisibleRangesForRange(this._viewRange,!1);if(!e||e.length===0)return[null,null];let t=e[0],n=e[0];for(let d of e)d.lineNumber<t.lineNumber&&(t=d),d.lineNumber>n.lineNumber&&(n=d);let o=1073741824;for(let d of t.ranges)d.left<o&&(o=d.left);let r=1073741824;for(let d of n.ranges)d.left<r&&(r=d.left);let s=i.getVerticalOffsetForLineNumber(t.lineNumber)-i.scrollTop,a=new Ju(s,o),l=i.getVerticalOffsetForLineNumber(n.lineNumber)-i.scrollTop,c=new Ju(l,r);return[a,c]}_prepareRenderWidget(i){if(!this._preference||this._preference.length===0)return null;let[e,t]=this._getTopAndBottomLeft(i);if(!e||!t)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=V2(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{let r=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(r.width),this._cachedDomNodeOffsetHeight=Math.round(r.height)}}let n;this.allowEditorOverflow?n=this._layoutBoxInPage(e,t,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,i):n=this._layoutBoxInViewport(e,t,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,i);for(let o=1;o<=2;o++)for(let r of this._preference)if(r===1){if(!n)return null;if(o===2||n.fitsAbove)return{coordinate:new Ju(n.aboveTop,n.aboveLeft),position:1}}else if(r===2){if(!n)return null;if(o===2||n.fitsBelow)return{coordinate:new Ju(n.belowTop,n.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(e),position:0}:{coordinate:e,position:0};return null}onBeforeRender(i){!this._viewRange||!this._preference||this._viewRange.endLineNumber<i.startLineNumber||this._viewRange.startLineNumber>i.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(i){this._renderData=this._prepareRenderWidget(i)}render(i){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&V2(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+i.scrollTop-i.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&V2(this._actual.afterRender,this._actual,this._renderData.position)}};function V2(i,e,...t){try{return i.call(e,...t)}catch{return null}}var Cx=class extends Yh{constructor(e){super(),this._context=e;let t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Se(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1,t=this._selections.map(o=>o.positionLineNumber);t.sort((o,r)=>o-r),Zn(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);let n=this._selections.every(o=>o.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}let t=this._renderOne(e),n=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,r=this._cursorLineNumbers.length,s=0,a=[];for(let l=n;l<=o;l++){let c=l-n;for(;s<r&&this._cursorLineNumbers[s]<l;)s++;s<r&&this._cursorLineNumbers[s]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";let n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}},F4=class extends Cx{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}},B4=class extends Cx{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}};xi((i,e)=>{let t=i.getColor(rre);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(CZ)){let n=i.getColor(CZ);n&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),Io(i.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});var P4=class extends Yh{constructor(e){super(),this._context=e;let t=this._context.configuration.options;this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){let t=e.getDecorationsInViewport(),n=[],o=0;for(let l=0,c=t.length;l<c;l++){let d=t[l];d.options.className&&(n[o++]=d)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;let d=l.options.className,h=c.options.className;return d<h?-1:d>h?1:E.compareRangesUsingStarts(l.range,c.range)});let r=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=s;l++){let c=l-r;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){let o=String(this._lineHeight),r=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){let c=t[a];if(!c.options.isWholeLine)continue;let d='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+o+'px;"></div>',h=Math.max(c.range.startLineNumber,r),u=Math.min(c.range.endLineNumber,s);for(let g=h;g<=u;g++){let p=g-r;n[p]+=d}}}_renderNormalDecorations(e,t,n){let o=String(this._lineHeight),r=e.visibleRange.startLineNumber,s=null,a=!1,l=null;for(let c=0,d=t.length;c<d;c++){let h=t[c];if(h.options.isWholeLine)continue;let u=h.options.className,g=!!h.options.showIfCollapsed,p=h.range;if(g&&p.endColumn===1&&p.endLineNumber!==p.startLineNumber&&(p=new E(p.startLineNumber,p.startColumn,p.endLineNumber-1,this._context.viewModel.getLineMaxColumn(p.endLineNumber-1))),s===u&&a===g&&E.areIntersectingOrTouching(l,p)){l=E.plusRange(l,p);continue}s!==null&&this._renderNormalDecoration(e,l,s,a,o,r,n),s=u,a=g,l=p}s!==null&&this._renderNormalDecoration(e,l,s,a,o,r,n)}_renderNormalDecoration(e,t,n,o,r,s,a){let l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){let h=l[c];if(h.outsideRenderedLine)continue;let u=h.lineNumber-s;if(o&&h.ranges.length===1){let g=h.ranges[0];if(g.width<this._typicalHalfwidthCharacterWidth){let p=Math.round(g.left+g.width/2),f=Math.max(0,Math.round(p-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new ax(f,this._typicalHalfwidthCharacterWidth)}}for(let g=0,p=h.ranges.length;g<p;g++){let f=h.ranges[g],v='<div class="cdr '+n+'" style="left:'+String(f.left)+"px;width:"+String(f.width)+"px;height:"+r+'px;"></div>';a[u]+=v}}}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}},hs=class extends J{onclick(e,t){this._register(le(e,Ee.CLICK,n=>t(new sa(n))))}onmousedown(e,t){this._register(le(e,Ee.MOUSE_DOWN,n=>t(new sa(n))))}onmouseover(e,t){this._register(le(e,Ee.MOUSE_OVER,n=>t(new sa(n))))}onmouseleave(e,t){this._register(le(e,Ee.MOUSE_LEAVE,n=>t(new sa(n))))}onkeydown(e,t){this._register(le(e,Ee.KEY_DOWN,n=>t(new ni(n))))}onkeyup(e,t){this._register(le(e,Ee.KEY_UP,n=>t(new ni(n))))}oninput(e,t){this._register(le(e,Ee.INPUT,t))}onblur(e,t){this._register(le(e,Ee.BLUR,t))}onfocus(e,t){this._register(le(e,Ee.FOCUS,t))}ignoreGesture(e){to.ignoreTarget(e)}},W_=11,O4=class extends hs{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=W_+"px",this.domNode.style.height=W_+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Gh),this._register(Tn(this.bgDomNode,Ee.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Tn(this.domNode,Ee.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new ip),this._pointerdownScheduleRepeatTimer=this._register(new Sr)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},H4=class extends J{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Sr)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}},Hfe=140,yx=class extends hs{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new H4(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Gh),this._shouldRender=!0,this.domNode=Pt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(le(this.domNode.domNode,Ee.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new O4(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,o){this.slider=Pt(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof o=="number"&&this.slider.setHeight(o),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(le(this.slider.domNode,Ee.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),o=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);n<=r&&r<=o?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{let r=Eo(this.domNode.domNode);t=e.pageX-r.left,n=e.pageY-r.top}let o=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(o):this._scrollbarState.getDesiredScrollPositionFromOffset(o)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{let s=this._sliderOrthogonalPointerPosition(r),a=Math.abs(s-n);if(Mn&&a>Hfe){this._setDesiredScrollPositionNow(o.getScrollPosition());return}let l=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(l))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Wfe=20,Sx=class i{constructor(e,t,n,o,r,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=o,this._scrollSize=r,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new i(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,o,r){let s=Math.max(0,n-e),a=Math.max(0,s-2*t),l=o>0&&o>n;if(!l)return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};let c=Math.round(Math.max(Wfe,Math.floor(n*a/o))),d=(a-c)/(o-n),h=r*d;return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){let e=i._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}},W4=class extends yx{constructor(e,t,n){let o=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Sx(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,o.width,o.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let s=(t.arrowSize-W_)/2,a=(t.horizontalScrollbarSize-W_)/2;this._createArrow({className:"scra",icon:_.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ph(null,1,0))}),this._createArrow({className:"scra",icon:_.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ph(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},z4=class extends yx{constructor(e,t,n){let o=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Sx(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,o.height,o.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let s=(t.arrowSize-W_)/2,a=(t.verticalScrollbarSize-W_)/2;this._createArrow({className:"scra",icon:_.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ph(null,0,1))}),this._createArrow({className:"scra",icon:_.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ph(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},V4=class i{constructor(e,t,n,o,r,s,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,o=o|0,r=r|0,s=s|0,a=a|0),this.rawScrollLeft=o,this.rawScrollTop=a,t<0&&(t=0),o+t>n&&(o=n-t),o<0&&(o=0),r<0&&(r=0),a+r>s&&(a=s-r),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=o,this.height=r,this.scrollHeight=s,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new i(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new i(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){let n=this.width!==e.width,o=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:o,scrollLeftChanged:r,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:l}}},sp=class extends J{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Q),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new V4(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;let o=this._state.withScrollDimensions(e,t);this._setState(o,!!this._smoothScrolling),(n=this._smoothScrolling)===null||n===void 0||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let o;t?o=new xx(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):o=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=o}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=xx.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}},Dx=class{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};function U2(i,e){let t=e-i;return function(n){return i+t*Ufe(n)}}function zfe(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}var xx=class i{constructor(e,t,n,o){this.from=e,this.to=t,this.duration=o,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,r;return e<t?(o=e+.75*n,r=t-.75*n):(o=e-.75*n,r=t+.75*n),zfe(U2(e,o),U2(r,t),.33)}return U2(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;if(t<1){let n=this.scrollLeft(t),o=this.scrollTop(t);return new Dx(n,o,!1)}return new Dx(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return i.start(e,t,n)}static start(e,t,n){n=n+10;let o=Date.now()-10;return new i(e,t,o,n)}};function Vfe(i){return Math.pow(i,3)}function Ufe(i){return 1-Vfe(1-i)}var Qfe=500,yZ=50,U4=class{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}},rb=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,o=this._rear;do{let r=o===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[o].score*r,o===this._front)break;o=(this._capacity+o-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){let o=new U4(e,t,n);o.score=this._computeScore(o),this._front===-1&&this._rear===-1?(this._memory[0]=o,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=o)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};rb.INSTANCE=new rb;var sb=class extends hs{constructor(e,t,n){super(),this._onScroll=this._register(new Q),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Q),e.style.overflow="hidden",this._options=jfe(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let o={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new z4(this._scrollable,this._options,o)),this._horizontalScrollbar=this._register(new W4(this._scrollable,this._options,o)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Pt(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Pt(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Pt(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new Sr),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=st(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,gt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=st(this._mouseWheelToDispose),e)){let t=n=>{this._onMouseWheel(new Ph(n))};this._mouseWheelToDispose.push(le(this._listenOnDomNode,Ee.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){let t=rb.INSTANCE;{let r=window.devicePixelRatio/Lne();Mn||go?t.accept(Date.now(),e.deltaX/r,e.deltaY/r):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(r)>=Math.abs(s)?s=0:r=0),this._options.flipAxes&&([r,s]=[s,r]);let a=!gt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),c={};if(r){let d=yZ*r,h=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(c,h)}if(s){let d=yZ*s,h=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(c,h)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let o=n;!o&&this._options.alwaysConsumeMouseWheel&&(o=!0),!o&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(o=!0),o&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,o=n?" left":"",r=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${o}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${r}${o}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Qfe)}},kx=class extends sb{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new sp({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:o=>el(o)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}},ab=class extends sb{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},ap=class extends sb{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new sp({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:o=>el(o)});super(e,t,n),this._register(n),this._element=e,this.onScroll(o=>{o.scrollTopChanged&&(this._element.scrollTop=o.scrollTop),o.scrollLeftChanged&&(this._element.scrollLeft=o.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function jfe(i){let e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,gt&&(e.className+=" mac"),e}var Q4=class extends Dr{constructor(e,t,n,o){super(e);let r=this._context.configuration.options,s=r.get(94),a=r.get(69),l=r.get(36),c=r.get(97),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+RD(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:s.scrollByPage};this.scrollbar=this._register(new ab(t.domNode,d,this._context.viewLayout.getScrollable())),va.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=Pt(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();let h=(u,g,p)=>{let f={};if(g){let v=u.scrollTop;v&&(f.scrollTop=this._context.viewLayout.getCurrentScrollTop()+v,u.scrollTop=0)}if(p){let v=u.scrollLeft;v&&(f.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+v,u.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(f,1)};this._register(le(n.domNode,"scroll",u=>h(n.domNode,!0,!0))),this._register(le(t.domNode,"scroll",u=>h(t.domNode,!0,!1))),this._register(le(o.domNode,"scroll",u=>h(o.domNode,!0,!1))),this._register(le(this.scrollbarDomNode.domNode,"scroll",u=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){let e=this._context.configuration.options,t=e.get(133);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(67).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}onConfigurationChanged(e){if(e.hasChanged(94)||e.hasChanged(69)||e.hasChanged(36)){let t=this._context.configuration.options,n=t.get(94),o=t.get(69),r=t.get(36),s=t.get(97),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:o,fastScrollSensitivity:r,scrollPredominantAxis:s};this.scrollbar.updateOptions(a)}return e.hasChanged(133)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+RD(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}};xi((i,e)=>{let t=i.getColor(nv);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);let n=i.getColor(ug);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);let o=i.getColor(gg);o&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${o};
			}
		`);let r=i.getColor(pg);r&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${r};
			}
		`)});var z_=class{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}},lb=class extends Yh{_render(e,t,n){let o=[];for(let a=e;a<=t;a++){let l=a-e;o[l]=[]}if(n.length===0)return o;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,s=0;for(let a=0,l=n.length;a<l;a++){let c=n[a],d=c.className,h=Math.max(c.startLineNumber,e)-e,u=Math.min(c.endLineNumber,t)-e;r===d?(h=Math.max(s+1,h),s=Math.max(s,u)):(r=d,s=u);for(let g=h;g<=s;g++)o[g].push(r)}return o}},j4=class extends lb{constructor(e){super(),this._context=e;let t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),n=[],o=0;for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.options.glyphMarginClassName;l&&(n[o++]=new z_(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._render(t,n,this._getDecorations(e)),r=this._lineHeight.toString(),s=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+s+"px;width:"+a+"px;height:"+r+'px;"></div>',c=[];for(let d=t;d<=n;d++){let h=d-t,u=o[h];u.length===0?c[h]="":c[h]='<div class="cgmr codicon '+u.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}},Ex=class extends J{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}};function QM(i,e){let t=0,n=0,o=i.length;for(;n<o;){let r=i.charCodeAt(n);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;n++}return n===o?-1:t}var Lg;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(Lg||(Lg={}));var od=class{constructor(e,t,n,o,r,s){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=o,this.forWrappedLinesAfterColumn=r,this.forWrappedLinesBeforeOrAtColumn=s,e!==-1==(t!==-1))throw new Error}},Ig=class{constructor(e,t){this.top=e,this.endColumn=t}},K4=class extends Ex{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return QM(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();let o=this.textModel.getLineCount();if(e<1||e>o)throw new Error("Illegal value for lineNumber");let r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,s=!!(r&&r.offSide),a=-2,l=-1,c=-2,d=-1,h=S=>{if(a!==-1&&(a===-2||a>S-1)){a=-1,l=-1;for(let y=S-2;y>=0;y--){let M=this._computeIndentLevel(y);if(M>=0){a=y,l=M;break}}}if(c===-2){c=-1,d=-1;for(let y=S;y<o;y++){let M=this._computeIndentLevel(y);if(M>=0){c=y,d=M;break}}}},u=-2,g=-1,p=-2,f=-1,v=S=>{if(u===-2){u=-1,g=-1;for(let y=S-2;y>=0;y--){let M=this._computeIndentLevel(y);if(M>=0){u=y,g=M;break}}}if(p!==-1&&(p===-2||p<S-1)){p=-1,f=-1;for(let y=S;y<o;y++){let M=this._computeIndentLevel(y);if(M>=0){p=y,f=M;break}}}},b=0,A=!0,w=0,C=!0,k=0,L=0;for(let S=0;A||C;S++){let y=e-S,M=e+S;S>1&&(y<1||y<t)&&(A=!1),S>1&&(M>o||M>n)&&(C=!1),S>5e4&&(A=!1,C=!1);let O=-1;if(A&&y>=1){let D=this._computeIndentLevel(y-1);D>=0?(c=y-1,d=D,O=Math.ceil(D/this.textModel.getOptions().indentSize)):(h(y),O=this._getIndentLevelForWhitespaceLine(s,l,d))}let H=-1;if(C&&M<=o){let D=this._computeIndentLevel(M-1);D>=0?(u=M-1,g=D,H=Math.ceil(D/this.textModel.getOptions().indentSize)):(v(M),H=this._getIndentLevelForWhitespaceLine(s,g,f))}if(S===0){L=O;continue}if(S===1){if(M<=o&&H>=0&&L+1===H){A=!1,b=M,w=M,k=H;continue}if(y>=1&&O>=0&&O-1===L){C=!1,b=y,w=y,k=O;continue}if(b=e,w=e,k=L,k===0)return{startLineNumber:b,endLineNumber:w,indent:k}}A&&(O>=k?b=y:A=!1),C&&(H>=k?w=M:C=!1)}return{startLineNumber:b,endLineNumber:w,indent:k}}getLinesBracketGuides(e,t,n,o){var r;let s=[];for(let u=e;u<=t;u++)s.push([]);let a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new E(e,1,t,this.textModel.getLineMaxColumn(t))),c;if(n&&l.length>0){let u=(e<=n.lineNumber&&n.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(E.fromPositions(n))).filter(g=>E.strictContainsPosition(g.range,n));c=(r=zD(u,g=>a))===null||r===void 0?void 0:r.range}let d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,h=new Lx;for(let u of l){if(!u.closingBracketRange)continue;let g=c&&u.range.equalsRange(c);if(!g&&!o.includeInactive)continue;let p=h.getInlineClassName(u.nestingLevel,u.nestingLevelOfEqualBracketType,d)+(o.highlightActive&&g?" "+h.activeClassName:""),f=u.openingBracketRange.getStartPosition(),v=u.closingBracketRange.getStartPosition(),b=o.horizontalGuides===Lg.Enabled||o.horizontalGuides===Lg.EnabledForActive&&g;if(u.range.startLineNumber===u.range.endLineNumber){b&&s[u.range.startLineNumber-e].push(new od(-1,u.openingBracketRange.getEndPosition().column,p,new Ig(!1,v.column),-1,-1));continue}let A=this.getVisibleColumnFromPosition(v),w=this.getVisibleColumnFromPosition(u.openingBracketRange.getStartPosition()),C=Math.min(w,A,u.minVisibleColumnIndentation+1),k=!1;rr(this.textModel.getLineContent(u.closingBracketRange.startLineNumber))<u.closingBracketRange.startColumn-1&&(k=!0);let L=Math.max(f.lineNumber,e),S=Math.min(v.lineNumber,t),y=k?1:0;for(let M=L;M<S+y;M++)s[M-e].push(new od(C,-1,p,null,M===f.lineNumber?f.column:-1,M===v.lineNumber?v.column:-1));b&&(f.lineNumber>=e&&w>C&&s[f.lineNumber-e].push(new od(C,-1,p,new Ig(!1,f.column),-1,-1)),v.lineNumber<=t&&A>C&&s[v.lineNumber-e].push(new od(C,-1,p,new Ig(!k,v.column),-1,-1)))}for(let u of s)u.sort((g,p)=>g.visibleColumn-p.visibleColumn);return s}getVisibleColumnFromPosition(e){return bn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();let n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");let o=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,s=!!(r&&r.offSide),a=new Array(t-e+1),l=-2,c=-1,d=-2,h=-1;for(let u=e;u<=t;u++){let g=u-e,p=this._computeIndentLevel(u-1);if(p>=0){l=u-1,c=p,a[g]=Math.ceil(p/o.indentSize);continue}if(l===-2){l=-1,c=-1;for(let f=u-2;f>=0;f--){let v=this._computeIndentLevel(f);if(v>=0){l=f,c=v;break}}}if(d!==-1&&(d===-2||d<u-1)){d=-1,h=-1;for(let f=u;f<n;f++){let v=this._computeIndentLevel(f);if(v>=0){d=f,h=v;break}}}a[g]=this._getIndentLevelForWhitespaceLine(s,c,h)}return a}_getIndentLevelForWhitespaceLine(e,t,n){let o=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/o.indentSize):t===n||e?Math.ceil(n/o.indentSize):1+Math.floor(n/o.indentSize)}},Lx=class{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}},q4=class extends Yh{constructor(e){super(),this._context=e,this._primaryPosition=null;let t=this._context.configuration.options,n=t.get(134),o=t.get(46);this._lineHeight=t.get(61),this._spaceWidth=o.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*o.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(134),o=t.get(46);return this._lineHeight=t.get(61),this._spaceWidth=o.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*o.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;let n=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(n)?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,o,r;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}let s=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,d=this._primaryPosition,h=this.getGuidesByLine(s,a,d),u=[];for(let g=s;g<=a;g++){let p=g-s,f=h[p],v="",b=(n=(t=e.visibleRangeForPosition(new q(g,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(let A of f){let w=A.column===-1?b+(A.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new q(g,A.column)).left;if(w>l||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;let C=A.horizontalLine?A.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",k=A.horizontalLine?((r=(o=e.visibleRangeForPosition(new q(g,A.horizontalLine.endColumn)))===null||o===void 0?void 0:o.left)!==null&&r!==void 0?r:w+this._spaceWidth)-w:this._spaceWidth;v+=`<div class="core-guide ${A.className} ${C}" style="left:${w}px;height:${c}px;width:${k}px"></div>`}u[p]=v}this._renderResult=u}getGuidesByLine(e,t,n){let o=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Lg.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Lg.EnabledForActive:Lg.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null,s=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){let h=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);s=h.startLineNumber,a=h.endLineNumber,l=h.indent}let{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let h=e;h<=t;h++){let u=new Array;d.push(u);let g=o?o[h-e]:[],p=new tp(g),f=r?r[h-e]:[];for(let v=1;v<=f;v++){let b=(v-1)*c+1,A=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||g.length===0)&&s<=h&&h<=a&&v===l;u.push(...p.takeWhile(C=>C.visibleColumn<b)||[]);let w=p.peek();(!w||w.visibleColumn!==b||w.horizontalLine)&&u.push(new od(b,-1,A?"core-guide-indent-active":"core-guide-indent",null,-1,-1))}u.push(...p.takeWhile(v=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};function Ay(i){if(!(i&&i.isTransparent()))return i}xi((i,e)=>{let t=i.getColor(HC);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);let n=i.getColor(WC)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);let o=[{bracketColor:cre,guideColor:yfe,guideColorActive:Lfe},{bracketColor:dre,guideColor:Sfe,guideColorActive:Ife},{bracketColor:hre,guideColor:Dfe,guideColorActive:Tfe},{bracketColor:ure,guideColor:xfe,guideColorActive:Mfe},{bracketColor:gre,guideColor:kfe,guideColorActive:Nfe},{bracketColor:pre,guideColor:Efe,guideColorActive:Rfe}],r=new Lx,s=o.map(a=>{var l,c;let d=i.getColor(a.bracketColor),h=i.getColor(a.guideColor),u=i.getColor(a.guideColorActive),g=Ay((l=Ay(h))!==null&&l!==void 0?l:d?.transparent(.3)),p=Ay((c=Ay(u))!==null&&c!==void 0?c:d);if(!(!g||!p))return{guideColor:g,guideColorActive:p}}).filter(yhe);if(s.length>0){for(let a=0;a<30;a++){let l=s[a%s.length];e.addRule(`.monaco-editor .${r.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${r.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${r.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${r.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});var $4=class{constructor(){this._currentVisibleRange=new E(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}},G4=class{constructor(e,t,n,o,r,s,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=o,this.startScrollTop=r,this.stopScrollTop=s,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}},Y4=class{constructor(e,t,n,o,r){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=o,this.scrollType=r,this.type="selections";let s=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){let d=t[l];s=Math.min(s,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=s,this.maxLineNumber=a}},Ix=class i extends Dr{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new bx(this),this.domNode=this._visibleLines.domNode;let n=this._context.configuration,o=this._context.configuration.options,r=o.get(46),s=o.get(134),a=o.get(133);this._lineHeight=o.get(61),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=o.get(91),this._horizontalScrollbarHeight=a.horizontalScrollbarHeight,this._cursorSurroundingLines=o.get(25),this._cursorSurroundingLinesStyle=o.get(26),this._canUseLayerHinting=!o.get(28),this._viewLineOptions=new dx(n,this._context.theme.type),va.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Eg}`),To(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new jt(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new jt(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new $4,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new El(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(134)&&(this._maxLineWidth=0);let t=this._context.configuration.options,n=t.get(46),o=t.get(134),r=t.get(133);return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=t.get(91),this._horizontalScrollbarHeight=r.horizontalScrollbarHeight,this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),To(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(133)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){let e=this._context.configuration,t=new dx(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;let n=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();for(let r=n;r<=o;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),o=!1;for(let r=t;r<=n;r++)o=this._visibleLines.getVisibleLine(r).onSelectionChanged()||o;return o}onDecorationsChanged(e){{let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=t;o<=n;o++)this._visibleLines.getVisibleLine(o).onDecorationsChanged()}return!0}onFlushed(e){let t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){let t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new G4(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new Y4(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;let o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){let t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){let n=this._getViewLineDomNode(e);if(n===null)return null;let o=this._getLineNumberFor(n);if(o===-1||o<1||o>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(o)===1)return new q(o,1);let r=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(o<r||o>s)return null;let a=this._visibleLines.getVisibleLine(o).getColumnOfNodeOffset(o,e,t),l=this._context.viewModel.getLineMinColumn(o);return a<l&&(a=l),new q(o,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===El.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=t;o<=n;o++){let r=this._visibleLines.getVisibleLine(o);if(e===r.getDomNode())return o}return-1}getLineWidth(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;let n=e.endLineNumber,o=E.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!o)return null;let r=[],s=0,a=new cx(this.domNode.domNode,this._textRangeRestingSpot),l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q(o.startLineNumber,1)).lineNumber);let c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let h=o.startLineNumber;h<=o.endLineNumber;h++){if(h<c||h>d)continue;let u=h===o.startLineNumber?o.startColumn:1,g=h===o.endLineNumber?o.endColumn:this._context.viewModel.getLineMaxColumn(h),p=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,u,g,a);if(p){if(t&&h<n){let f=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q(h+1,1)).lineNumber,f!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[s++]=new n4(p.outsideRenderedLine,h,ax.from(p.ranges))}}return s===0?null:r}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new cx(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){let t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new o4(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),o=1,r=!0;for(let s=t;s<=n;s++){let a=this._visibleLines.getVisibleLine(s);if(e&&!a.getWidthIsFast()){r=!1;continue}o=Math.max(o,a.getWidth())}return r&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(o),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1,n=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();for(let r=n;r<=o;r++){let s=this._visibleLines.getVisibleLine(r);if(s.needsMonospaceFontCheck()){let a=s.getWidth();a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=n;r<=o;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){let n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();let o=this._computeScrollLeftToReveal(n);o&&(this._isViewportWrapping||this._ensureMaxLineWidth(o.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:o.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),go&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){let n=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();for(let r=n;r<=o;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");let t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){let t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,o,r,s){let a=e.top,l=e.height,c=a+l,d,h,u;if(r&&r.length>0){let p=r[0].startLineNumber,f=r[0].endLineNumber;for(let v=1,b=r.length;v<b;v++){let A=r[v];p=Math.min(p,A.startLineNumber),f=Math.max(f,A.endLineNumber)}d=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(p),u=this._context.viewLayout.getVerticalOffsetForLineNumber(f)+this._lineHeight}else if(o)d=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(o.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(o.endLineNumber)+this._lineHeight;else return-1;if((t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default")n||(h-=this._lineHeight);else{let p=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);h-=p*this._lineHeight,u+=Math.max(0,p-1)*this._lineHeight}(s===0||s===4)&&(u+=n?this._horizontalScrollbarHeight:this._lineHeight);let g;if(u-h>l){if(!d)return-1;g=h}else if(s===5||s===6)if(s===6&&a<=h&&u<=c)g=a;else{let p=Math.max(5*this._lineHeight,l*.2),f=h-p,v=u-l;g=Math.max(v,f)}else if(s===1||s===2)if(s===2&&a<=h&&u<=c)g=a;else{let p=(h+u)/2;g=Math.max(0,p-l/2)}else g=this._computeMinimumScrolling(a,c,h,u,s===3,s===4);return g}_computeScrollLeftToReveal(e){let t=this._context.viewLayout.getCurrentViewport(),n=t.left,o=n+t.width,r=1073741824,s=0;if(e.type==="range"){let a=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!a)return null;for(let l of a.ranges)r=Math.min(r,Math.round(l.left)),s=Math.max(s,Math.round(l.left+l.width))}else for(let a of e.selections){if(a.startLineNumber!==a.endLineNumber)return null;let l=this._visibleRangesForLineRange(a.startLineNumber,a.startColumn,a.endColumn);if(!l)return null;for(let c of l.ranges)r=Math.min(r,Math.round(c.left)),s=Math.max(s,Math.round(c.left+c.width))}return e.minimalReveal||(r=Math.max(0,r-i.HORIZONTAL_EXTRA_PX),s+=this._revealHorizontalRightPadding),e.type==="selections"&&s-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,o,r,s),maxHorizontalOffset:s}}_computeMinimumScrolling(e,t,n,o,r,s){e=e|0,t=t|0,n=n|0,o=o|0,r=!!r,s=!!s;let a=t-e;if(o-n<a){if(r)return n;if(s)return Math.max(0,o-a);if(n<e)return n;if(o>t)return Math.max(0,o-a)}else return n;return e}};Ix.HORIZONTAL_EXTRA_PX=30;var J4=class extends lb{constructor(e){super(),this._context=e;let t=this._context.configuration.options.get(133);this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options.get(133);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),n=[],o=0;for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.options.linesDecorationsClassName;l&&(n[o++]=new z_(a.range.startLineNumber,a.range.endLineNumber,l));let c=a.options.firstLineDecorationClassName;c&&(n[o++]=new z_(a.range.startLineNumber,a.range.startLineNumber,c))}return n}prepareRender(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._render(t,n,this._getDecorations(e)),r=this._decorationsLeft.toString(),s=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+s+'px;"></div>',l=[];for(let c=t;c<=n;c++){let d=c-t,h=o[d],u="";for(let g=0,p=h.length;g<p;g++)u+='<div class="cldr '+h[g]+a;l[d]=u}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}},X4=class extends lb{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),n=[],o=0;for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.options.marginClassName;l&&(n[o++]=new z_(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._render(t,n,this._getDecorations(e)),r=[];for(let s=t;s<=n;s++){let a=s-t,l=o[a],c="";for(let d=0,h=l.length;d<h;d++)c+='<div class="cmdr '+l[d]+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}},zl=class i{constructor(e,t,n,o){this._rgba8Brand=void 0,this.r=i._clamp(e),this.g=i._clamp(t),this.b=i._clamp(n),this.a=i._clamp(o)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};zl.Empty=new zl(0,0,0,0);var cb=class i extends J{constructor(){super(),this._onDidChange=new Q,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Ui.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new i),this._INSTANCE}_updateColorMap(){let e=Ui.getColorMap();if(!e){this._colors=[zl.Empty],this._backgroundIsLight=!0;return}this._colors=[zl.Empty];for(let n=1;n<e.length;n++){let o=e[n].rgba;this._colors[n]=new zl(o.r,o.g,o.b,Math.round(o.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};cb._INSTANCE=null;var Tx=class{constructor(e,t,n,o){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=o|0}},Z4=class{constructor(e,t){this.tabSize=e,this.data=t}},db=class{constructor(e,t,n,o,r,s,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=o,this.startVisibleColumn=r,this.tokens=s,this.inlineDecorations=a}},Rs=class i{constructor(e,t,n,o,r,s,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=o,this.isBasicASCII=i.isBasicASCII(n,s),this.containsRTL=i.containsRTL(n,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?CM(e):!0}static containsRTL(e,t,n){return!t&&n?y_(e):!1}},Tg=class{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}},eO=class{constructor(e,t,n,o){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=o}toInlineDecoration(e){return new Tg(new E(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}},Mx=class{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}},Nx=class{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}},Kfe=(()=>{let i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),qfe=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:96-1:i),Rx=class i{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=i.soften(e,12/15),this.charDataLight=i.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let o=0,r=e.length;o<r;o++)n[o]=OD(e[o]*t);return n}renderChar(e,t,n,o,r,s,a,l,c,d,h){let u=1*this.scale,g=2*this.scale,p=h?1:g;if(t+u>e.width||n+p>e.height){console.warn("bad render request outside image data");return}let f=d?this.charDataLight:this.charDataNormal,v=qfe(o,c),b=e.width*4,A=a.r,w=a.g,C=a.b,k=r.r-A,L=r.g-w,S=r.b-C,y=Math.max(s,l),M=e.data,O=v*u*g,H=n*b+t*4;for(let D=0;D<p;D++){let K=H;for(let oe=0;oe<u;oe++){let ie=f[O++]/255*(s/255);M[K++]=A+k*ie,M[K++]=w+L*ie,M[K++]=C+S*ie,M[K++]=y}H+=b}}blockRenderChar(e,t,n,o,r,s,a,l){let c=1*this.scale,d=2*this.scale,h=l?1:d;if(t+c>e.width||n+h>e.height){console.warn("bad render request outside image data");return}let u=e.width*4,g=.5*(r/255),p=s.r,f=s.g,v=s.b,b=o.r-p,A=o.g-f,w=o.b-v,C=p+b*g,k=f+A*g,L=v+w*g,S=Math.max(r,a),y=e.data,M=n*u+t*4;for(let O=0;O<h;O++){let H=M;for(let D=0;D<c;D++)y[H++]=C,y[H++]=k,y[H++]=L,y[H++]=S;M+=u}}},SZ={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},DZ=i=>{let e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=SZ[i[t]]<<4|SZ[i[t+1]]&15;return e},xZ={1:Ql(()=>DZ("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Ql(()=>DZ("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))},tO=class i{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return xZ[e]?n=new Rx(xZ[e](),e):n=i.createFromSampleData(i.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){let t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let o=0;for(let r of Kfe)n.fillText(String.fromCharCode(r),o,16/2),o+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let n=i._downsample(e,t);return new Rx(n,t)}static _downsampleChar(e,t,n,o,r){let s=1*r,a=2*r,l=o,c=0;for(let d=0;d<a;d++){let h=d/a*16,u=(d+1)/a*16;for(let g=0;g<s;g++){let p=g/s*10,f=(g+1)/s*10,v=0,b=0;for(let w=h;w<u;w++){let C=t+Math.floor(w)*3840,k=1-(w-Math.floor(w));for(let L=p;L<f;L++){let S=1-(L-Math.floor(L)),y=C+Math.floor(L)*4,M=S*k;b+=M,v+=e[y]*e[y+3]/255*M}}let A=v/b;c=Math.max(c,A),n[l++]=OD(A)}}return c}static _downsample(e,t){let n=2*t*1*t,o=n*96,r=new Uint8ClampedArray(o),s=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,s,t)),s+=n,a+=10*4;if(l>0){let c=255/l;for(let d=0;d<o;d++)r[d]*=c}return r}},us;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(us||(us={}));var xs;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(xs||(xs={}));var ja;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(ja||(ja={}));var Kf=class{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&yr(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},lp=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}};function $fe(i){return i&&typeof i.read=="function"}var E1=class{constructor(e,t,n,o,r,s){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=o,this.isAutoWhitespaceEdit=r,this._isTracked=s}},iO=class{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}},nO=class{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}};function qf(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}var Gfe=140,Yfe=2,Fx=class i{constructor(e,t,n){let o=e.options,r=o.get(131),s=o.get(133),a=s.minimap,l=o.get(46),c=o.get(67);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=o.get(96),this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=o.get(61),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=s.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Ql(()=>tO.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=i._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=i._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){let n=e.getColor(Nme);return n?new zl(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){let t=e.getColor(Rme);return t?zl._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}},oO=class i{constructor(e,t,n,o,r,s,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=o,this.sliderTop=r,this.sliderHeight=s,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,o,r,s,a,l,c,d,h){let u=e.pixelRatio,g=e.minimapLineHeight,p=Math.floor(e.canvasInnerHeight/g),f=e.lineHeight;if(e.minimapHeightIsEditorHeight){let k=l*e.lineHeight+(e.scrollBeyondLastLine?r-e.lineHeight:0),L=Math.max(1,Math.floor(r*r/k)),S=Math.max(0,e.minimapHeight-L),y=S/(d-r),M=c*y,O=S>0,H=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new i(c,d,O,y,M,L,1,Math.min(a,H))}let v;if(s&&n!==a){let k=n-t+1;v=Math.floor(k*g/u)}else{let k=r/f;v=Math.floor(k*g/u)}let b;e.scrollBeyondLastLine?b=(a-1)*g/u:b=Math.max(0,a*g/u-v),b=Math.min(e.minimapHeight-v,b);let A=b/(d-r),w=c*A,C=0;if(e.scrollBeyondLastLine&&(C=r/f-1),p>=a+C){let k=a,L=b>0;return new i(c,d,L,A,w,v,1,k)}else{let k=Math.max(1,Math.floor(t-w*u/g));h&&h.scrollHeight===d&&(h.scrollTop>c&&(k=Math.min(k,h.startLineNumber)),h.scrollTop<c&&(k=Math.max(k,h.startLineNumber)));let L=Math.min(a,k+p-1),S=(c-o)/f,y=(t-k+S)*g/u;return new i(c,d,!0,A,y,v,k,L)}}},V_=class{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};V_.INVALID=new V_(-1);var Bx=class{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new Ax(()=>V_.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;let t=this._renderedLines._get().lines;for(let n=0,o=t.length;n<o;n++)if(t[n].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){let e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}},rO=class i{constructor(e,t,n,o){this._backgroundFillData=i._createBackgroundFillData(t,n,o),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;let e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){let o=n.r,r=n.g,s=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4),c=0;for(let d=0;d<t;d++)for(let h=0;h<e;h++)l[c]=o,l[c+1]=r,l[c+2]=s,l[c+3]=a,c+=4;return l}},Px=class i{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];let o=e.pixelRatio,r=e.lineHeight,s=e.scrollBeyondLastLine,{minimapLineCount:a}=XD.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:s,height:e.editorHeight,lineHeight:r,pixelRatio:o}),l=t/a,c=l/2;if(!n||n.minimapLines.length===0){let w=[];if(w[0]=1,a>1){for(let C=0,k=a-1;C<k;C++)w[C]=Math.round(C*l+c);w[a-1]=t}return[new i(l,w),[]]}let d=n.minimapLines,h=d.length,u=[],g=0,p=0,f=1,v=10,b=[],A=null;for(let w=0;w<a;w++){let C=Math.max(f,Math.round(w*l)),k=Math.max(C,Math.round((w+1)*l));for(;g<h&&d[g]<C;){if(b.length<v){let S=g+1+p;A&&A.type==="deleted"&&A._oldIndex===g-1?A.deleteToLineNumber++:(A={type:"deleted",_oldIndex:g,deleteFromLineNumber:S,deleteToLineNumber:S},b.push(A)),p--}g++}let L;if(g<h&&d[g]<=k)L=d[g],g++;else if(w===0?L=1:w+1===a?L=t:L=Math.round(w*l+c),b.length<v){let S=g+1+p;A&&A.type==="inserted"&&A._i===w-1?A.insertToLineNumber++:(A={type:"inserted",_i:w,insertFromLineNumber:S,insertToLineNumber:S},b.push(A)),p++}u[w]=L,f=L}if(b.length<v)for(;g<h;){let w=g+1+p;A&&A.type==="deleted"&&A._oldIndex===g-1?A.deleteToLineNumber++:(A={type:"deleted",_oldIndex:g,deleteFromLineNumber:w,deleteToLineNumber:w},b.push(A)),p--,g++}else b=[{type:"flush"}];return[new i(l,u),b]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let o=this.modelLineToMinimapLine(t)-1;for(;o+1<this.minimapLines.length&&this.minimapLines[o+1]<=t;)o++;if(n===o){let r=this.minimapLines[n];if(r<e||r>t)return null}return[n+1,o+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),o=this.modelLineToMinimapLine(t);return e!==t&&o===n&&(o===this.minimapLines.length?n>1&&n--:o++),[n,o]}onLinesDeleted(e){let t=e.toLineNumber-e.fromLineNumber+1,n=this.minimapLines.length,o=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,r),o=Math.max(o,r)):this.minimapLines[r]-=t;return[n,o]}onLinesInserted(e){let t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}},sO=class extends Dr{constructor(e){super(e),this.tokensColorTracker=cb.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Fx(this._context.configuration,this._context.theme,this.tokensColorTracker);let[t]=Px.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new aO(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){let e=new Fx(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){let t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){let[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(let n of e.ranges){let o=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);o&&t.push({fromLineNumber:o[0],toLineNumber:o[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));let o={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(o)}_recreateLineSampling(){this._minimapSelections=null;let e=!!this._samplingState,[t,n]=Px.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(let o of n)switch(o.type){case"deleted":this._actual.onLinesDeleted(o.deleteFromLineNumber,o.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(o.insertFromLineNumber,o.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let o=[];for(let r=0,s=t-e+1;r<s;r++)n[r]?o[r]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+r-1]):o[r]=null;return o}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(let e of this._selections){let[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Se(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){let r=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];n=new E(r,1,s,this._context.viewModel.getLineMaxColumn(s))}else n=new E(e,1,t,this._context.viewModel.getLineMaxColumn(t));let o=this._context.viewModel.getDecorationsInViewport(n);if(this._samplingState){let r=[];for(let s of o){if(!s.options.minimap)continue;let a=s.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);r.push(new Mx(new E(l,a.startColumn,c,a.endColumn),s.options))}return r}return o}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new E(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}},aO=class i extends J{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(vZ),this._domNode=Pt(document.createElement("div")),va.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Pt(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Pt(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Pt(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Pt(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Pt(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Tn(this._domNode.domNode,Ee.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){let a=Eo(this._slider.domNode),l=a.top+a.height/2;this._startSliderDragging(n,l,this._lastRenderData.renderedLayout)}return}let o=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY,s=Math.floor(r/o)+this._lastRenderData.renderedLayout.startLineNumber;s=Math.min(s,this._model.getLineCount()),this._model.revealLineNumber(s)}),this._sliderPointerMoveMonitor=new Gh,this._sliderPointerDownListener=Tn(this._slider.domNode,Ee.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=to.addTarget(this._domNode.domNode),this._sliderTouchStartListener=le(this._domNode.domNode,yi.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=le(this._domNode.domNode,yi.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=Tn(this._domNode.domNode,yi.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;let o=e.pageX;this._slider.toggleClassName("active",!0);let r=(s,a)=>{let l=Math.abs(a-o);if(Mn&&l>Gfe){this._model.setScrollTop(n.scrollTop);return}let c=s-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(c))};e.pageY!==t&&r(e.pageY,o),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>r(s.pageY,s.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){let t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){let e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new rO(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(vZ),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");let t=oO.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;let t=this._model.getSelections();t.sort(E.compareRangesUsingStarts);let n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((u,g)=>(u.options.zIndex||0)-(g.options.zIndex||0));let{canvasInnerWidth:o,canvasInnerHeight:r}=this._model.options,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,o,r);let d=new Ox(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,s),this._renderDecorationsLineHighlights(c,n,d,e,s);let h=new Ox(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,h,e,s,l,a,o),this._renderDecorationsHighlights(c,n,h,e,s,l,a,o)}}_renderSelectionLineHighlights(e,t,n,o,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let s=0,a=0;for(let l of t){let c=Math.max(o.startLineNumber,l.startLineNumber),d=Math.min(o.endLineNumber,l.endLineNumber);if(c>d)continue;for(let g=c;g<=d;g++)n.set(g,!0);let h=(c-o.startLineNumber)*r,u=(d-o.startLineNumber)*r+r;a>=h||(a>s&&e.fillRect($d,s,e.canvas.width,a-s),s=h),a=u}a>s&&e.fillRect($d,s,e.canvas.width,a-s)}_renderDecorationsLineHighlights(e,t,n,o,r){let s=new Map;for(let a=t.length-1;a>=0;a--){let l=t[a],c=l.options.minimap;if(!c||c.position!==xs.Inline)continue;let d=Math.max(o.startLineNumber,l.range.startLineNumber),h=Math.min(o.endLineNumber,l.range.endLineNumber);if(d>h)continue;let u=c.getColor(this._theme.value);if(!u||u.isTransparent())continue;let g=s.get(u.toString());g||(g=u.transparent(.5).toString(),s.set(u.toString(),g)),e.fillStyle=g;for(let p=d;p<=h;p++){if(n.has(p))continue;n.set(p,!0);let f=(d-o.startLineNumber)*r;e.fillRect($d,f,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,n,o,r,s,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(let c of t){let d=Math.max(o.startLineNumber,c.startLineNumber),h=Math.min(o.endLineNumber,c.endLineNumber);if(!(d>h))for(let u=d;u<=h;u++)this.renderDecorationOnLine(e,n,c,this._selectionColor,o,u,r,r,s,a,l)}}_renderDecorationsHighlights(e,t,n,o,r,s,a,l){for(let c of t){let d=c.options.minimap;if(!d)continue;let h=Math.max(o.startLineNumber,c.range.startLineNumber),u=Math.min(o.endLineNumber,c.range.endLineNumber);if(h>u)continue;let g=d.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let p=h;p<=u;p++)switch(d.position){case xs.Inline:this.renderDecorationOnLine(e,n,c.range,g,o,p,r,r,s,a,l);continue;case xs.Gutter:{let f=(p-o.startLineNumber)*r,v=2;this.renderDecoration(e,g,v,f,Yfe,r);continue}}}}renderDecorationOnLine(e,t,n,o,r,s,a,l,c,d,h){let u=(s-r.startLineNumber)*l;if(u+a<0||u>this._model.options.canvasInnerHeight)return;let{startLineNumber:g,endLineNumber:p}=n,f=g===s?n.startColumn:1,v=p===s?n.endColumn:this._model.getLineMaxColumn(s),b=this.getXOffsetForPosition(t,s,f,c,d,h),A=this.getXOffsetForPosition(t,s,v,c,d,h);this.renderDecoration(e,o,b,u,A-b,a)}getXOffsetForPosition(e,t,n,o,r,s){if(n===1)return $d;if((n-1)*r>=s)return s;let a=e.get(t);if(!a){let l=this._model.getLineContent(t);a=[$d];let c=$d;for(let d=1;d<l.length+1;d++){let h=l.charCodeAt(d-1),u=h===9?o*r:zh(h)?2*r:r,g=c+u;if(g>=s){a[d]=s;break}a[d]=g,c=g}e.set(t,a)}return n-1<a.length?a[n-1]:s}renderDecoration(e,t,n,o,r,s){e.fillStyle=t&&t.toString()||"",e.fillRect(n,o,r,s)}renderLines(e){let t=e.startLineNumber,n=e.endLineNumber,o=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){let D=this._lastRenderData._get();return new Bx(e,D.imageData,D.lines)}let r=this._getBuffer();if(!r)return null;let[s,a,l]=i._renderUntouchedLines(r,t,n,o,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,u=this._model.options.backgroundColor,g=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,f=p.backgroundIsLight(),v=this._model.options.renderMinimap,b=this._model.options.charRenderer(),A=this._model.options.fontScale,w=this._model.options.minimapCharWidth,C=(v===1?2:2+1)*A,k=o>C?Math.floor((o-C)/2):0,L=u.a/255,S=new zl(Math.round((u.r-h.r)*L+h.r),Math.round((u.g-h.g)*L+h.g),Math.round((u.b-h.b)*L+h.b),255),y=0,M=[];for(let D=0,K=n-t+1;D<K;D++)l[D]&&i._renderLine(r,S,u.a,f,v,w,p,g,b,y,k,d,c[D],A,o),M[D]=new V_(y),y+=o;let O=s===-1?0:s,H=(a===-1?r.height:a)-O;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,O,r.width,H),new Bx(e,r,M)}static _renderUntouchedLines(e,t,n,o,r){let s=[];if(!r){for(let y=0,M=n-t+1;y<M;y++)s[y]=!0;return[-1,-1,s]}let a=r._get(),l=a.imageData.data,c=a.rendLineNumberStart,d=a.lines,h=d.length,u=e.width,g=e.data,p=(n-t+1)*o*u*4,f=-1,v=-1,b=-1,A=-1,w=-1,C=-1,k=0;for(let y=t;y<=n;y++){let M=y-t,O=y-c,H=O>=0&&O<h?d[O].dy:-1;if(H===-1){s[M]=!0,k+=o;continue}let D=H*u*4,K=(H+o)*u*4,oe=k*u*4,ie=(k+o)*u*4;A===D&&C===oe?(A=K,C=ie):(b!==-1&&(g.set(l.subarray(b,A),w),f===-1&&b===0&&b===w&&(f=A),v===-1&&A===p&&b===w&&(v=b)),b=D,A=K,w=oe,C=ie),s[M]=!1,k+=o}b!==-1&&(g.set(l.subarray(b,A),w),f===-1&&b===0&&b===w&&(f=A),v===-1&&A===p&&b===w&&(v=b));let L=f===-1?-1:f/(u*4),S=v===-1?-1:v/(u*4);return[L,S,s]}static _renderLine(e,t,n,o,r,s,a,l,c,d,h,u,g,p,f){let v=g.content,b=g.tokens,A=e.width-s,w=f===1,C=$d,k=0,L=0;for(let S=0,y=b.getCount();S<y;S++){let M=b.getEndOffset(S),O=b.getForeground(S),H=a.getColor(O);for(;k<M;k++){if(C>A)return;let D=v.charCodeAt(k);if(D===9){let K=u-(k+L)%u;L+=K-1,C+=K*s}else if(D===32)C+=s;else{let K=zh(D)?2:1;for(let oe=0;oe<K;oe++)if(r===2?c.blockRenderChar(e,C,d+h,H,l,t,n,w):c.renderChar(e,C,d+h,D,H,l,t,n,p,o,w),C+=s,C>A)return}}}}},Ox=class{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let o=0,r=this._endLineNumber-this._startLineNumber+1;o<r;o++)this._values[o]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}};xi((i,e)=>{let t=i.getColor(Fme);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);let n=i.getColor(Bme);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);let o=i.getColor(Pme);o&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${o}; }`);let r=i.getColor(nv);r&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${r} -6px 0 6px -6px inset; }`)});var lO=class extends Dr{constructor(e){super(e);let t=this._context.configuration.options.get(133);this._widgets={},this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,this._domNode=Pt(document.createElement("div")),va.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options.get(133);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}addWidget(e){let t=Pt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){let n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.parentNode.removeChild(n),this.setShouldRender()}}_renderWidget(e){let t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){let n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);let t=Object.keys(this._widgets);for(let n=0,o=t.length;n<o;n++){let r=t[n];this._renderWidget(this._widgets[r])}}},cO=class{constructor(e,t){let n=e.options;this.lineHeight=n.get(61),this.pixelRatio=n.get(131),this.overviewRulerLanes=n.get(76),this.renderBorder=n.get(75);let o=t.getColor(dfe);this.borderColor=o?o.toString():null,this.hideCursor=n.get(54);let r=t.getColor(sre);this.cursorColor=r?r.transparent(.7).toString():null,this.themeType=t.type;let s=n.get(67),a=s.enabled,l=s.side,c=t.getColor(hfe),d=Ui.getDefaultBackground(),h=null;c!==void 0?h=c:a&&(h=d),h===null||l==="left"?this.backgroundColor=null:this.backgroundColor=j.Format.CSS.formatHex(h);let u=n.get(133).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);let[g,p]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=g,this.w=p}_initLanes(e,t,n){let o=t-e;if(n>=3){let r=Math.floor(o/3),s=Math.floor(o/3),a=o-r-s,l=e,c=l+r,d=l+r+a;return[[0,l,c,l,d,l,c,l],[0,r,a,r+a,s,r+a+s,a+s,r+a+s]]}else if(n===2){let r=Math.floor(o/2),s=o-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,s,r+s,r+s,r+s]]}else{let r=e,s=o;return[[0,r,r,r,r,r,r,r],[0,s,s,s,s,s,s,s]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}},dO=class extends Dr{constructor(e){super(e),this._domNode=Pt(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Ui.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){let t=new cO(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(q.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");let e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,o=this._context.viewLayout,r=this._context.viewLayout.getScrollHeight(),s=t/r,a=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,c=l/2|0,d=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?d.clearRect(0,0,e,t):(d.fillStyle=this._settings.backgroundColor,d.fillRect(0,0,e,t));let h=this._settings.x,u=this._settings.w;a.sort(Nx.cmp);for(let g of a){let p=g.color,f=g.data;d.fillStyle=p;let v=0,b=0,A=0;for(let w=0,C=f.length/3;w<C;w++){let k=f[3*w],L=f[3*w+1],S=f[3*w+2],y=o.getVerticalOffsetForLineNumber(L)*s|0,M=(o.getVerticalOffsetForLineNumber(S)+n)*s|0;if(M-y<l){let O=(y+M)/2|0;O<c?O=c:O+c>t&&(O=t-c),y=O-c,M=O+c}y>A+1||k!==v?(w!==0&&d.fillRect(h[v],b,u[v],A-b),v=k,b=y,A=M):M>A&&(A=M)}d.fillRect(h[v],b,u[v],A-b)}if(!this._settings.hideCursor&&this._settings.cursorColor){let g=2*this._settings.pixelRatio|0,p=g/2|0,f=this._settings.x[7],v=this._settings.w[7];d.fillStyle=this._settings.cursorColor;let b=-100,A=-100;for(let w=0,C=this._cursorPositions.length;w<C;w++){let k=this._cursorPositions[w],L=o.getVerticalOffsetForLineNumber(k.lineNumber)*s|0;L<p?L=p:L+p>t&&(L=t-p);let S=L-p,y=S+g;S>A+1?(w!==0&&d.fillRect(f,b,v,A-b),b=S,A=y):y>A&&(A=y)}d.fillRect(f,b,v,A-b)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,t),d.stroke(),d.moveTo(0,0),d.lineTo(e,0),d.stroke())}},Hx=class{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}},cp=class{constructor(e,t,n,o){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=o,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}},hO=class{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(cp.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){let e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),o=Math.floor(this._outerHeight),r=n/o,s=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){let d=this._zones[l];if(!e){let C=d.getColorZones();if(C){a.push(C);continue}}let h=this._getVerticalOffsetForLine(d.startLineNumber),u=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:h+d.heightInLines*t,g=Math.floor(r*h),p=Math.floor(r*u),f=Math.floor((g+p)/2),v=p-f;v<s&&(v=s),f-v<0&&(f=v),f+v>n&&(f=n-v);let b=d.color,A=this._color2Id[b];A||(A=++this._lastAssignedId,this._color2Id[b]=A,this._id2Color[A]=b);let w=new Hx(f-v,f+v,A);d.setColorZone(w),a.push(w)}return this._colorZonesInvalid=!1,a.sort(Hx.compare),a}},uO=class extends op{constructor(e,t){super(),this._context=e;let n=this._context.configuration.options;this._domNode=Pt(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new hO(o=>this._context.viewLayout.getVerticalOffsetForLineNumber(o)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(61)),this._zoneManager.setPixelRatio(n.get(131)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return e.hasChanged(61)&&(this._zoneManager.setLineHeight(t.get(61)),this._render()),e.hasChanged(131)&&(this._zoneManager.setPixelRatio(t.get(131)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;let e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),o=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(r,n,o,e),!0}_renderOneLane(e,t,n,o){let r=0,s=0,a=0;for(let l of t){let c=l.colorId,d=l.from,h=l.to;c!==r?(e.fillRect(0,s,o,a-s),r=c,e.fillStyle=n[r],s=d,a=h):a>=d?a=Math.max(a,h):(e.fillRect(0,s,o,a-s),s=d,a=h)}e.fillRect(0,s,o,a-s)}},gO=class extends Dr{constructor(e){super(e),this.domNode=Pt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];let t=this._context.configuration.options;this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){let e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){let{tabSize:o}=this._context.viewModel.model.getOptions(),r=o,s=t-e;for(;s>0;){let a=Pt(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),s--}return}let n=e-t;for(;n>0;){let o=this._renderedRulers.pop();this.domNode.removeChild(o),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){let o=this._renderedRulers[t],r=this._rulers[t];o.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),o.setHeight(Math.min(e.scrollHeight,1e6)),o.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}};xi((i,e)=>{let t=i.getColor(lfe);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});var pO=class extends Dr{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;let t=this._context.configuration.options.get(94);this._useShadows=t.useShadows,this._domNode=Pt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){let e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){let e=this._context.configuration.options.get(133);e.minimap.renderMinimap===0||e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?this._width=e.width:this._width=e.width-e.verticalScrollbarWidth}onConfigurationChanged(e){let t=this._context.configuration.options.get(94);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}};xi((i,e)=>{let t=i.getColor(nv);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});var mO=class{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}},fO=class{constructor(e,t){this.lineNumber=e,this.ranges=t}};function Jfe(i){return new mO(i)}function Xfe(i){return new fO(i.lineNumber,i.ranges.map(Jfe))}var Zl=class i extends Yh{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;let t=this._context.configuration.options;this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){let o=this._typicalHalfwidthCharacterWidth/4,r=null,s=null;if(n&&n.length>0&&t.length>0){let a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<n.length;c++)n[c].lineNumber===a&&(r=n[c].ranges[0]);let l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!s&&c>=0;c--)n[c].lineNumber===l&&(s=n[c].ranges[0]);r&&!r.startStyle&&(r=null),s&&!s.startStyle&&(s=null)}for(let a=0,l=t.length;a<l;a++){let c=t[a].ranges[0],d=c.left,h=c.left+c.width,u={top:0,bottom:0},g={top:0,bottom:0};if(a>0){let p=t[a-1].ranges[0].left,f=t[a-1].ranges[0].left+t[a-1].ranges[0].width;by(d-p)<o?u.top=2:d>p&&(u.top=1),by(h-f)<o?g.top=2:p<h&&h<f&&(g.top=1)}else r&&(u.top=r.startStyle.top,g.top=r.endStyle.top);if(a+1<l){let p=t[a+1].ranges[0].left,f=t[a+1].ranges[0].left+t[a+1].ranges[0].width;by(d-p)<o?u.bottom=2:p<d&&d<f&&(u.bottom=1),by(h-f)<o?g.bottom=2:h<f&&(g.bottom=1)}else s&&(u.bottom=s.startStyle.bottom,g.bottom=s.endStyle.bottom);c.startStyle=u,c.endStyle=g}}_getVisibleRangesWithStyle(e,t,n){let o=(t.linesVisibleRangesForRange(e,!0)||[]).map(Xfe);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,n),o}_createSelectionPiece(e,t,n,o,r){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+o.toString()+"px;width:"+r.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,o){if(o.length===0)return;let r=!!o[0].ranges[0].startStyle,s=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=o[0].lineNumber,c=o[o.length-1].lineNumber;for(let d=0,h=o.length;d<h;d++){let u=o[d],g=u.lineNumber,p=g-t,f=n&&(g===c||g===l)?a:s,v=n&&g===l?1:0,b="",A="";for(let w=0,C=u.ranges.length;w<C;w++){let k=u.ranges[w];if(r){let S=k.startStyle,y=k.endStyle;if(S.top===1||S.bottom===1){b+=this._createSelectionPiece(v,f,i.SELECTION_CLASS_NAME,k.left-i.ROUNDED_PIECE_WIDTH,i.ROUNDED_PIECE_WIDTH);let M=i.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(M+=" "+i.SELECTION_TOP_RIGHT),S.bottom===1&&(M+=" "+i.SELECTION_BOTTOM_RIGHT),b+=this._createSelectionPiece(v,f,M,k.left-i.ROUNDED_PIECE_WIDTH,i.ROUNDED_PIECE_WIDTH)}if(y.top===1||y.bottom===1){b+=this._createSelectionPiece(v,f,i.SELECTION_CLASS_NAME,k.left+k.width,i.ROUNDED_PIECE_WIDTH);let M=i.EDITOR_BACKGROUND_CLASS_NAME;y.top===1&&(M+=" "+i.SELECTION_TOP_LEFT),y.bottom===1&&(M+=" "+i.SELECTION_BOTTOM_LEFT),b+=this._createSelectionPiece(v,f,M,k.left+k.width,i.ROUNDED_PIECE_WIDTH)}}let L=i.SELECTION_CLASS_NAME;if(r){let S=k.startStyle,y=k.endStyle;S.top===0&&(L+=" "+i.SELECTION_TOP_LEFT),S.bottom===0&&(L+=" "+i.SELECTION_BOTTOM_LEFT),y.top===0&&(L+=" "+i.SELECTION_TOP_RIGHT),y.bottom===0&&(L+=" "+i.SELECTION_BOTTOM_RIGHT)}A+=this._createSelectionPiece(v,f,L,k.left,k.width)}e[p][0]+=b,e[p][1]+=A}}prepareRender(e){let t=[],n=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let s=n;s<=o;s++){let a=s-n;t[a]=["",""]}let r=[];for(let s=0,a=this._selections.length;s<a;s++){let l=this._selections[s];if(l.isEmpty()){r[s]=null;continue}let c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[s]);r[s]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([s,a])=>s+a)}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};Zl.SELECTION_CLASS_NAME="selected-text";Zl.SELECTION_TOP_LEFT="top-left-radius";Zl.SELECTION_BOTTOM_LEFT="bottom-left-radius";Zl.SELECTION_TOP_RIGHT="top-right-radius";Zl.SELECTION_BOTTOM_RIGHT="bottom-right-radius";Zl.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";Zl.ROUNDED_PIECE_WIDTH=10;xi((i,e)=>{let t=i.getColor(Xc);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);let n=i.getColor(xY);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);let o=i.getColor(Fpe);o&&!o.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${o}; }`)});function by(i){return i<0?-i:i}var Wx=class{constructor(e,t,n,o,r,s){this.top=e,this.left=t,this.width=n,this.height=o,this.textContent=r,this.textContentClassName=s}},zx=class{constructor(e){this._context=e;let t=this._context.configuration.options,n=t.get(46);this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Pt(document.createElement("div")),this._domNode.setClassName(`cursor ${Eg}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),To(this._domNode,n),this._domNode.setDisplay("none"),this._position=new q(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(46);return this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),To(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_getGraphemeAwarePosition(){let{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[o,r]=zue(n,t-1);return[new q(e,o+1),n.substring(o,r)]}_prepareRender(e){let t="",[n,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===Ln.Line||this._cursorStyle===Ln.LineThin){let u=e.visibleRangeForPosition(n);if(!u||u.outsideRenderedLine)return null;let g;this._cursorStyle===Ln.Line?(g=UX(this._lineCursorWidth>0?this._lineCursorWidth:2),g>2&&(t=o)):g=UX(1);let p=u.left;g>=2&&p>=1&&(p-=1);let f=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new Wx(f,p,g,this._lineHeight,t,"")}let r=e.linesVisibleRangesForRange(new E(n.lineNumber,n.column,n.lineNumber,n.column+o.length),!1);if(!r||r.length===0)return null;let s=r[0];if(s.outsideRenderedLine||s.ranges.length===0)return null;let a=s.ranges[0],l=o==="	"?this._typicalHalfwidthCharacterWidth:a.width<1?this._typicalHalfwidthCharacterWidth:a.width,c="";if(this._cursorStyle===Ln.Block){let u=this._context.viewModel.getViewLineData(n.lineNumber);t=o;let g=u.tokens.findTokenIndexAtOffset(n.column-1);c=u.tokens.getClassName(g)}let d=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===Ln.Underline||this._cursorStyle===Ln.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new Wx(d,a.left,l,h,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Eg} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}},Vx=class i extends Dr{constructor(e){super(e);let t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new zx(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=Pt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Sr,this._cursorFlatBlinkInterval=new ip,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){let t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,o=this._secondaryCursors.length;n<o;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){let n=t.length-this._secondaryCursors.length;for(let o=0;o<n;o++){let r=new zx(this._context);this._domNode.domNode.insertBefore(r.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(r)}}else if(this._secondaryCursors.length>t.length){let n=this._secondaryCursors.length-t.length;for(let o=0;o<n;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){let t=[];for(let o=0,r=e.selections.length;o<r;o++)t[o]=e.selections[o].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));let n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){let t=n=>{for(let o=0,r=e.ranges.length;o<r;o++)if(e.ranges[o].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[o].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(let n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();let e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},i.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},i.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Ln.Line:e+=" cursor-line-style";break;case Ln.Block:e+=" cursor-block-style";break;case Ln.Underline:e+=" cursor-underline-style";break;case Ln.LineThin:e+=" cursor-line-thin-style";break;case Ln.BlockOutline:e+=" cursor-block-outline-style";break;case Ln.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0,o=this._primaryCursor.render(e);o&&(t[n++]=o);for(let r=0,s=this._secondaryCursors.length;r<s;r++){let a=this._secondaryCursors[r].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};Vx.BLINK_INTERVAL=500;xi((i,e)=>{let t=i.getColor(sre);if(t){let n=i.getColor(sfe);n||(n=t.opposite()),e.addRule(`.monaco-editor .inputarea.ime-input { caret-color: ${t}; }`),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),Io(i.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});var Q2=()=>{throw new Error("Invalid change accessor")},_O=class extends Dr{constructor(e){super(e);let t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=Pt(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Pt(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){let e=this._context.viewLayout.getWhitespaces(),t=new Map;for(let o of e)t.set(o.id,o);let n=!1;return this._context.viewModel.changeWhitespace(o=>{let r=Object.keys(this._zones);for(let s=0,a=r.length;s<a;s++){let l=r[s],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;let h=t.get(l);h&&(h.afterLineNumber!==d.afterViewLineNumber||h.height!==d.heightInPx)&&(o.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(61)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{let s=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new q(s,this._context.viewModel.model.getLineMaxColumn(s))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});let o=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),r=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!r,afterViewLineNumber:o.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{let o={addZone:r=>(t=!0,this._addZone(n,r)),removeZone:r=>{r&&(t=this._removeZone(n,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(n,r)||t)}};Zfe(e,o),o.addZone=Q2,o.removeZone=Q2,o.layoutZone=Q2}),t}_addZone(e,t){let n=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:Pt(t.domNode),marginDomNode:t.marginDomNode?Pt(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,n.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){let n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){let n=this._zones[t],o=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=o.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,o.afterViewLineNumber,o.heightInPx),this._safeCallOnComputedHeight(n.delegate,o.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Ye(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Ye(n)}}prepareRender(e){}render(e){let t=e.viewportData.whitespaceViewportData,n={},o=!1;for(let s of t)this._zones[s.id].isInHiddenArea||(n[s.id]=s,o=!0);let r=Object.keys(this._zones);for(let s=0,a=r.length;s<a;s++){let l=r[s],c=this._zones[l],d=0,h=0,u="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,u="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(h),c.domNode.setDisplay(u),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(h),c.marginDomNode.setDisplay(u))}o&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}};function Zfe(i,e){try{return i(e)}catch(t){Ye(t)}}var vO=class{constructor(e){this._theme=e}get type(){return this._theme.type}get value(){return this._theme}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}},AO=class{constructor(e,t,n){this.configuration=e,this.theme=new vO(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}},bO=class{constructor(e,t,n,o){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=o,this.visibleRange=new E(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}},wO=class extends Dr{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.domNode=Pt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1,t=this._context.configuration.options.get(133),n=t.contentWidth-t.verticalScrollbarWidth;return this.contentWidth!==n&&(this.contentWidth=n,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0,n=e.getDecorationsInViewport();for(let o of n){if(!o.options.blockClassName)continue;let r=this.blocks[t];r||(r=this.blocks[t]=Pt(document.createElement("div")),this.domNode.appendChild(r));let s=e.getVerticalOffsetForLineNumber(o.range.startLineNumber),a=e.getVerticalOffsetForLineNumber(o.range.endLineNumber+1);r.setClassName("blockDecorations-block "+o.options.blockClassName),r.setLeft(e.scrollLeft),r.setWidth(this.contentWidth),r.setTop(s),r.setHeight(a-s),t++}for(let o=t;o<this.blocks.length;o++)this.blocks[o].domNode.remove();this.blocks.length=t}},CO=class extends op{constructor(e,t,n,o,r,s){super(),this._selections=[new Se(1,1,1,1)],this._renderAnimationFrame=null;let a=new I4(t,o,r,e);this._context=new AO(t,n,o),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new L4(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Pt(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Pt(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Pt(document.createElement("div")),va.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new Q4(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Ix(this._context,this._linesContent),this._viewZones=new _O(this._context),this._viewParts.push(this._viewZones);let l=new dO(this._context);this._viewParts.push(l);let c=new pO(this._context);this._viewParts.push(c);let d=new M4(this._context);this._viewParts.push(d),d.addDynamicOverlay(new F4(this._context)),d.addDynamicOverlay(new Zl(this._context)),d.addDynamicOverlay(new q4(this._context)),d.addDynamicOverlay(new P4(this._context));let h=new N4(this._context);this._viewParts.push(h),h.addDynamicOverlay(new B4(this._context)),h.addDynamicOverlay(new j4(this._context)),h.addDynamicOverlay(new X4(this._context)),h.addDynamicOverlay(new J4(this._context)),h.addDynamicOverlay(new ZA(this._context));let u=new O_(this._context);u.getDomNode().appendChild(this._viewZones.marginDomNode),u.getDomNode().appendChild(h.getDomNode()),this._viewParts.push(u),this._contentWidgets=new R4(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Vx(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new lO(this._context),this._viewParts.push(this._overlayWidgets);let g=new gO(this._context);this._viewParts.push(g);let p=new wO(this._context);this._viewParts.push(p);let f=new sO(this._context);if(this._viewParts.push(f),l){let v=this._scrollbar.getOverviewRulerLayoutInfo();v.parent.insertBefore(l.getDomNode(),v.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(p.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),s?s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new y4(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{let e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new u4(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new q(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){let e=this._context.configuration.options.get(133);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){let e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(130)+" "+RD(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(let e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=qne(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){e_e(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(let n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!iY(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;let t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);let n=new bO(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());let o=new i4(this._context.viewLayout,n,this._viewLines);for(let r of e)r.prepareRender(o);for(let r of e)r.render(o),r.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){let n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),o=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();let r=this._viewLines.visibleRangeForPosition(new q(o.lineNumber,o.column));return r?r.left:-1}getTargetAtClientPoint(e,t){let n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?vx.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new uO(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(let n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n;let o=e.position&&e.position.range||null;if(o===null){let s=e.position?e.position.position:null;s!==null&&(o=new E(s.lineNumber,s.column,s.lineNumber,s.column))}let r=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,o,r,(n=(t=e.position)===null||t===void 0?void 0:t.positionAffinity)!==null&&n!==void 0?n:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){let t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}};function e_e(i){try{return i()}catch(e){Ye(e)}}var Ux=class i{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new yo(new E(1,1,1,1),0,new q(1,1),0),new yo(new E(1,1,1,1),0,new q(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new wt(this.modelState,this.viewState)}readSelectionFromMarkers(e){let t=e.model._getTrackedRange(this._selTrackedRange);return Se.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,o){return t.equals(n)?o:e.normalizePosition(t,2)}static _validateViewState(e,t){let n=t.position,o=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),s=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,o,n,s),l=this._validatePositionWithCache(e,r,o,a);return n.equals(s)&&o.equals(a)&&r.equals(l)?t:new yo(E.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+o.column-a.column,s,t.leftoverVisibleColumns+n.column-s.column)}_setState(e,t,n){if(n&&(n=i._validateViewState(e.viewModel,n)),t){let o=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(o)?t.selectionStartLeftoverVisibleColumns:0,s=e.model.validatePosition(t.position),a=t.position.equals(s)?t.leftoverVisibleColumns:0;t=new yo(o,r,s,a)}else{if(!n)return;let o=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new yo(o,n.selectionStartLeftoverVisibleColumns,r,n.leftoverVisibleColumns)}if(n){let o=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new yo(o,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{let o=e.coordinatesConverter.convertModelPositionToViewPosition(new q(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new q(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),s=new E(o.lineNumber,o.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new yo(s,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}},Qx=class{constructor(e){this.context=e,this.cursors=[new Ux(e)],this.lastAddedCursorIndex=0}dispose(){for(let e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(let e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(let e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(let e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return Age(this.cursors,y1(e=>e.viewState.position,q.compare)).viewState.position}getBottomMostViewPosition(){return Doe(this.cursors,y1(e=>e.viewState.position,q.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(wt.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){let t=this.cursors.length-1,n=e.length;if(t<n){let o=n-t;for(let r=0;r<o;r++)this._addSecondaryCursor()}else if(t>n){let o=t-n;for(let r=0;r<o;r++)this._removeSecondaryCursor(this.cursors.length-2)}for(let o=0;o<n;o++)this.cursors[o+1].setState(this.context,e[o].modelState,e[o].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Ux(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;let e=this.cursors.slice(0),t=[];for(let n=0,o=e.length;n<o;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(y1(n=>n.selection,E.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){let o=t[n],r=t[n+1],s=o.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||s.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(s.getEndPosition()):l=a.getStartPosition().isBefore(s.getEndPosition()),l){let c=o.index<r.index?n:n+1,d=o.index<r.index?n+1:n,h=t[d].index,u=t[c].index,g=t[d].selection,p=t[c].selection;if(!g.equalsSelection(p)){let f=g.plusRange(p),v=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn,b=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn,A;h===this.lastAddedCursorIndex?(A=v,this.lastAddedCursorIndex=u):A=b;let w;A?w=new Se(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn):w=new Se(f.endLineNumber,f.endColumn,f.startLineNumber,f.startColumn),t[c].selection=w;let C=wt.fromModelSelection(w);e[u].setState(this.context,C.modelState,C.viewState)}for(let f of t)f.index>h&&f.index--;e.splice(h,1),t.splice(d,1),this._removeSecondaryCursor(h-1),n--}}}},jx=class{constructor(e,t,n,o){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=o}},yO=class{constructor(){this.changeType=1}},ec=class i{constructor(e,t,n,o,r){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=o,this.order=r}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",o=0;for(let r of t)n+=e.substring(o,r.column-1),o=r.column-1,n+=r.options.content;return n+=e.substring(o),n}static fromDecorations(e){let t=[];for(let n of e)n.options.before&&n.options.before.content.length>0&&t.push(new i(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new i(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,o)=>n.lineNumber===o.lineNumber?n.column===o.column?n.order-o.order:n.column-o.column:n.lineNumber-o.lineNumber),t}},Kx=class{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}},SO=class{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}},DO=class{constructor(e,t,n,o){this.changeType=4,this.injectedTexts=o,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}},xO=class{constructor(){this.changeType=5}},$f=class i{constructor(e,t,n,o){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=o,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){let n=[].concat(e.changes).concat(t.changes),o=t.versionId,r=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new i(n,o,r,s)}},qx=class{constructor(e){this.changes=e}},Gf=class i{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){let t=$f.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=i._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new i(t,n)}static _mergeChangeEvents(e,t){let n=[].concat(e.changes).concat(t.changes),o=t.eol,r=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:o,versionId:r,isUndoing:s,isRedoing:a,isFlush:l}}},kO=class{constructor(){this.type=0}},EO=class{constructor(){this.type=1}},LO=class{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}},IO=class{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}},Zd=class{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}},cf=class{constructor(){this.type=5}},TO=class{constructor(e){this.type=6,this.isFocused=e}},MO=class{constructor(){this.type=7}},df=class{constructor(){this.type=8}},$x=class{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}},hb=class{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}},ub=class{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}},Yf=class{constructor(e,t,n,o,r,s,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=o,this.verticalType=r,this.revealHorizontal=s,this.scrollType=a,this.type=12}},NO=class{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}},RO=class{constructor(e){this.theme=e,this.type=14}},FO=class{constructor(e){this.type=15,this.ranges=e}},BO=class{constructor(){this.type=16}},t_e=class{constructor(){this.type=17}},PO=class extends J{constructor(){super(),this._onEvent=this._register(new Q),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){let o=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(o){this._outgoingEvents[t]=o;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;let e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new OO),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){let e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(let n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){let e=this._viewEventQueue;this._viewEventQueue=null;let t=this._eventHandlers.slice(0);for(let n of t)n.handleEvents(e)}}},OO=class{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}},HO=class i{constructor(e,t,n,o){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=o,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new i(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}},WO=class i{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new i(this.oldHasFocus,e.hasFocus)}},zO=class i{constructor(e,t,n,o,r,s,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=o,this.scrollWidth=r,this.scrollLeft=s,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new i(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}},VO=class{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}},UO=class{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}},QO=class i{constructor(e,t,n,o,r,s,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=o,this.source=r,this.reason=s,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n=e.length,o=t.length;if(n!==o)return!1;for(let r=0;r<n;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return i._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new i(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}},jO=class{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}},KO=class{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}},qO=class{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}},$O=class{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}},GO=class{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}},YO=class{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}},JO=class{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}},gb=class i extends J{constructor(e,t,n,o){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new jx(this._model,this._viewModel,this._coordinatesConverter,o),this._cursors=new Qx(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=st(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new jx(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){let n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,o){let r=!1;o!==null&&o.length>i.MAX_CURSOR_COUNT&&(o=o.slice(0,i.MAX_CURSOR_COUNT),r=!0);let s=L1.from(this._model,this);return this._cursors.setStates(o),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,s,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,o,r,s){let a=this._cursors.getViewPositions(),l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=E.fromPositions(a[0],a[0]),e.emitViewEvent(new Yf(t,n,l,c,o,r,s))}saveState(){let e=[],t=this._cursors.getSelections();for(let n=0,o=t.length;n<o;n++){let r=t[n];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){let n=[];for(let o=0,r=t.length;o<r;o++){let s=t[o],a=1,l=1;s.position&&s.position.lineNumber&&(a=s.position.lineNumber),s.position&&s.position.column&&(l=s.position.column);let c=a,d=l;s.selectionStart&&s.selectionStart.lineNumber&&(c=s.selectionStart.lineNumber),s.selectionStart&&s.selectionStart.column&&(d=s.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,wt.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof qx){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{let n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;let o=n.containsEvent(1);if(this._prevEditOperationType=0,o)this._cursors.dispose(),this._cursors=new Qx(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){let r=wt.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,r)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{let r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,wt.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;let e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,o){this.setStates(e,t,o,wt.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],o=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),o.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});let r=this._model.deltaDecorations([],n),s=this._model.deltaDecorations([],o);this._autoClosedActions.push(new Gx(this._model,r,s))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();let t=XO.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],o=[];for(let r=0;r<e.commands.length;r++){let s=e.commands[r];s instanceof jD&&s.enclosingRange&&s.closeCharacterRange&&(n.push(s.closeCharacterRange),o.push(s.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,o),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,o,r){let s=L1.from(this._model,this);if(s.equals(o))return!1;let a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new IO(l,a)),!o||o.cursorState.length!==s.cursorState.length||s.cursorState.some((c,d)=>!c.modelState.equals(o.cursorState[d].modelState))){let c=o?o.cursorState.map(h=>h.modelState.selection):null,d=o?o.modelVersionId:0;e.emitOutgoingEvent(new QO(c,a,d,s.modelVersionId,t||"keyboard",n,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,o=e.length;n<o;n++){let r=e[n];if(!r.text||r.text.indexOf(`
`)>=0)return null;let s=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!s)return null;let a=s[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;let c=l[0].open,d=r.text.length-s[2].length-1,h=r.text.lastIndexOf(c,d-1);if(h===-1)return null;t.push([h,d])}return t}executeEdits(e,t,n,o){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(n)),r&&(n[0]._isTracked=!0);let s=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(r)for(let h=0,u=r.length;h<u;h++){let[g,p]=r[h],f=c[h],v=f.range.startLineNumber,b=f.range.startColumn-1+g,A=f.range.startColumn-1+p;s.push(new E(v,A+1,v,A+2)),a.push(new E(v,b+1,v,A+2))}let d=o(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),s.length>0&&this._pushAutoClosedAction(s,a)}_executeEdit(e,t,n,o=0){if(this.context.cursorConfig.readOnly)return;let r=L1.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(s){Ye(s)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,o,r,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return Gx.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new e5(this._model,this.getSelections())}endComposition(e,t){let n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(bs.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){let o=t.length,r=0;for(;r<o;){let s=LA(t,r),a=t.substr(r,s);this._executeEditOperation(bs.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=s}}else this._executeEditOperation(bs.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,o,r,s){if(t.length===0&&n===0&&o===0){if(r!==0){let a=this.getSelections().map(l=>{let c=l.getPosition();return new Se(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,s,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(bs.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,o,r))},e,s)}paste(e,t,n,o,r){this._executeEdit(()=>{this._executeEditOperation(bs.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,o||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(x_.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Ho(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Ho(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}};gb.MAX_CURSOR_COUNT=1e4;var L1=class i{constructor(e,t){this.modelVersionId=e,this.cursorState=t}static from(e,t){return new i(e.getVersionId(),t.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}},Gx=class{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(let n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){let n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){let o=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(o&&(t.push(o),o.startLineNumber!==o.endLineNumber))return!1}t.sort(E.compareRangesUsingStarts),e.sort(E.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}},XO=class{static executeCommands(e,t,n){let o={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(o,n);for(let s=0,a=o.trackedRanges.length;s<a;s++)o.model._setTrackedRange(o.trackedRanges[s],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;let n=this._getEditOperations(e,t);if(n.operations.length===0)return null;let o=n.operations,r=this._getLoserCursorMap(o);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let s=[];for(let c=0,d=o.length;c<d;c++)r.hasOwnProperty(o[c].identifier.major.toString())||s.push(o[c]);n.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,s,c=>{let d=[];for(let g=0;g<e.selectionsBefore.length;g++)d[g]=[];for(let g of c)g.identifier&&d[g.identifier.major].push(g);let h=(g,p)=>g.identifier.minor-p.identifier.minor,u=[];for(let g=0;g<e.selectionsBefore.length;g++)d[g].length>0?(d[g].sort(h),u[g]=t[g].computeCursorState(e.model,{getInverseEditOperations:()=>d[g],getTrackedSelection:p=>{let f=parseInt(p,10),v=e.model._getTrackedRange(e.trackedRanges[f]);return e.trackedRangesDirection[f]===0?new Se(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new Se(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn)}})):u[g]=e.selectionsBefore[g];return u});a||(a=e.selectionsBefore);let l=[];for(let c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(let c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],o=!1;for(let r=0,s=t.length;r<s;r++){let a=t[r];if(a){let l=this._getEditOperationsFromCommand(e,r,a);n=n.concat(l.operations),o=o||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:o}}static _getEditOperationsFromCommand(e,t,n){let o=[],r=0,s=(c,d,h=!1)=>{E.isEmpty(c)&&d===""||o.push({identifier:{major:t,minor:r++},range:c,text:d,forceMoveMarkers:h,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},a=!1,l={addEditOperation:s,addTrackedEditOperation:(c,d,h)=>{a=!0,s(c,d,h)},trackSelection:(c,d)=>{let h=Se.liftSelection(c),u;if(h.isEmpty())if(typeof d=="boolean")d?u=2:u=3;else{let f=e.model.getLineMaxColumn(h.startLineNumber);h.startColumn===f?u=2:u=3}else u=1;let g=e.trackedRanges.length,p=e.model._setTrackedRange(null,h,u);return e.trackedRanges[g]=p,e.trackedRangesDirection[g]=h.getDirection(),g.toString()}};try{n.getEditOperations(e.model,l)}catch(c){return Ye(c),{operations:[],hadTrackedEditOperation:!1}}return{operations:o,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,o)=>-E.compareRangesUsingEnds(n.range,o.range));let t={};for(let n=1;n<e.length;n++){let o=e[n-1],r=e[n];if(E.getStartPosition(o.range).isBefore(E.getEndPosition(r.range))){let s;o.identifier.major>r.identifier.major?s=o.identifier.major:s=r.identifier.major,t[s.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===s&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}},ZO=class{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}},e5=class i{constructor(e,t){this._original=i._capture(e,t)}static _capture(e,t){let n=[];for(let o of t){if(o.startLineNumber!==o.endLineNumber)return null;n.push(new ZO(e.getLineContent(o.startLineNumber),o.startColumn-1,o.endColumn-1))}return n}deduceOutcome(e,t){if(!this._original)return null;let n=i._capture(e,t);if(!n||this._original.length!==n.length)return null;let o=[];for(let r=0,s=this._original.length;r<s;r++)o.push(i._deduceOutcome(this._original[r],n[r]));return o}static _deduceOutcome(e,t){let n=Math.min(e.startSelection,t.startSelection,Zg(e.text,t.text)),o=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,kA(e.text,t.text)),r=e.text.substring(n,e.text.length-o),s=t.text.substring(n,t.text.length-o);return new eP(r,e.startSelection-n,e.endSelection-n,s,t.startSelection-n,t.endSelection-n)}},Yx=class{constructor(e,t,n,o,r,s){this.id=e,this.label=t,this.alias=n,this._precondition=o,this._run=r,this._contextKeyService=s}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}},zC={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};function dp(i){let e=0,t=0,n=0,o=0;for(let r=0,s=i.length;r<s;r++){let a=i.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<s&&i.charCodeAt(r+1)===10?(o|=2,r++):o|=3,n=r+1):a===10&&(o|=1,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=i.length),[e,t,i.length-n,o]}var hf=class{constructor(e,t,n,o){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=o}},t5=class{constructor(e,t,n,o,r,s){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=o,this.nestingLevelOfEqualBracketType=r,this.bracketPairNode=s}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}},i5=class extends t5{constructor(e,t,n,o,r,s,a){super(e,t,n,o,r,s),this.minVisibleColumnIndentation=a}},pb=class{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}};pb.zero=new pb(0,0);function i_e(i,e,t,n){return i!==t?an(t-i,n):an(0,n-e)}var da=0;function n_e(i){return i===0}var rs=Math.pow(2,26);function an(i,e){return i*rs+e}function kh(i){let e=i,t=Math.floor(e/rs),n=e-t*rs;return new pb(t,n)}function o_e(i){return Math.floor(i/rs)}function Zi(i,e){return e<rs?i+e:i-i%rs+e}function r_e(i,e){let t=i,n=e;if(n-t<=0)return da;let o=Math.floor(t/rs),r=Math.floor(n/rs),s=n-r*rs;if(o===r){let a=t-o*rs;return an(0,s-a)}else return an(r-o,s)}function Jf(i,e){return i<e}function gh(i,e){return i<=e}function a1(i,e){return i>=e}function wm(i){return an(i.lineNumber-1,i.column-1)}function rd(i,e){let t=i,n=Math.floor(t/rs),o=t-n*rs,r=e,s=Math.floor(r/rs),a=r-s*rs;return new E(n+1,o+1,s+1,a+1)}function s_e(i){let e=il(i);return an(e.length-1,e[e.length-1].length)}var Jx=class{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}},n5=class{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>o5.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return r_e(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?an(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):an(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=kh(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?an(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):an(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(gh(n,e)){this.nextEditIdx++;let o=kh(n),r=kh(this.translateOldToCur(t.endOffsetBeforeObj)),s=o.lineCount-r.lineCount;this.deltaOldToNewLineCount+=s;let a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=o.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},o5=class i{constructor(e,t,n){this.endOffsetBeforeObj=kh(t),this.endOffsetAfterObj=kh(Zi(e,n)),this.offsetObj=kh(e)}static from(e){return new i(e.startOffset,e.endOffset,e.newLength)}},TS=new Array,Qo=class i{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=i.cache[e];return n||(n=new i(e,t),i.cache[e]=n),n}return new i(e,t)}static getEmpty(){return this.empty}add(e,t){let n=t.getKey(e),o=n>>5;if(o===0){let s=1<<n|this.items;return s===this.items?this:i.create(s,this.additionalItems)}o--;let r=this.additionalItems.slice(0);for(;r.length<o;)r.push(0);return r[o]|=1<<(n&31),i.create(this.items,r)}merge(e){let t=this.items|e.items;if(this.additionalItems===TS&&e.additionalItems===TS)return t===this.items?this:t===e.items?e:i.create(t,TS);let n=new Array;for(let o=0;o<Math.max(this.additionalItems.length,e.additionalItems.length);o++){let r=this.additionalItems[o]||0,s=e.additionalItems[o]||0;n.push(r|s)}return i.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};Qo.cache=new Array(129);Qo.empty=Qo.create(0,TS);var kZ={getKey(i){return i}},Xx=class{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}},mb=class{constructor(e){this._length=e}get length(){return this._length}},Zx=class i extends mb{constructor(e,t,n,o,r){super(e),this.openingBracket=t,this.child=n,this.closingBracket=o,this.missingOpeningBracketIds=r}static create(e,t,n){let o=e.length;return t&&(o=Zi(o,t.length)),n&&(o=Zi(o,n.length)),new i(o,e,t,n,t?t.missingOpeningBracketIds:Qo.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){let e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new i(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Zi(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}},ba=class extends mb{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,o=!1){let r=e.length,s=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=Zi(r,t.length),s=s.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=Zi(r,n.length),s=s.merge(n.missingOpeningBracketIds)}return o?new r5(r,e.listHeight+1,e,t,n,s):new fb(r,e.listHeight+1,e,t,n,s)}static getEmpty(){return new s5(da,0,[],Qo.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let e=this.childrenLength;if(e===0)return;let t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let e=this.getChild(0),t=e.kind===4?e.toMutable():e;return e!==t&&this.setChild(0,t),t}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();let e=this.childrenLength,t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let o=1;o<e;o++){let r=this.getChild(o);t=Zi(t,r.length),n=n.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,o=e;for(let r=0;r<this.childrenLength;r++){let s=this.getChild(r);s&&(n=Math.min(n,s.computeMinIndentation(o,t)),o=Zi(o,s.length))}return this.cachedMinIndentation=n,n}},fb=class i extends ba{constructor(e,t,n,o,r,s){super(e,t,s),this._item1=n,this._item2=o,this._item3=r}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new i(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}},r5=class extends fb{toMutable(){return new fb(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},ek=class i extends ba{constructor(e,t,n,o){super(e,t,o),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){let e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new i(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}},s5=class extends ek{toMutable(){return new ek(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},a_e=[],_b=class extends mb{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return a_e}deepClone(){return this}},lh=class extends _b{get kind(){return 0}get missingOpeningBracketIds(){return Qo.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let n=kh(e),o=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=o_e(Zi(e,this.length))+1,s=Number.MAX_SAFE_INTEGER;for(let a=o;a<=r;a++){let l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;let d=bn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);s=Math.min(s,d)}return s}},tk=class i extends _b{constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}static create(e,t,n){return new i(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return Qo.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}},a5=class extends _b{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}},Qn=class{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let t="mtk"+this.getForeground(e),n=this.getFontStyle(e);return n&1&&(t+=" mtki"),n&2&&(t+=" mtkb"),n&4&&(t+=" mtku"),n&8&&(t+=" mtks"),t}static getInlineStyleFromMetadata(e,t){let n=this.getForeground(e),o=this.getFontStyle(e),r=`color: ${t[n]};`;o&1&&(r+="font-style: italic;"),o&2&&(r+="font-weight: bold;");let s="";return o&4&&(s+=" underline"),o&8&&(s+=" line-through"),s&&(r+=`text-decoration:${s};`),r}static getPresentationFromMetadata(e){let t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}},ch=class{constructor(i,e,t,n,o){this.length=i,this.kind=e,this.bracketId=t,this.bracketIds=n,this.astNode=o}},ik=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new l5(this.textModel,this.bracketTokens),this._offset=da,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return an(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Zi(this._offset,e);let t=kh(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Zi(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}},l5=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){let r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,n=0;for(;;){let r=this.lineTokens,s=r.getCount(),a=null;if(this.lineTokenOffset<s){let l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let c=Qn.getTokenType(l)===0,d=Qn.containsBalancedBrackets(l),h=r.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<h){let u=r.getLanguageId(this.lineTokenOffset),g=this.line.substring(this.lineCharOffset,h),p=this.bracketTokens.getSingleLanguageBracketTokens(u),f=p.regExpGlobal;if(f){f.lastIndex=0;let v=f.exec(g);v&&(a=p.getToken(v[0]),a&&(this.lineCharOffset+=v.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}let o=i_e(e,t,this.lineIdx,this.lineCharOffset);return new ch(o,0,-1,Qo.getEmpty(),new lh(o))}},c5=class{constructor(e,t){this.text=e,this._offset=da,this.idx=0;let n=t.getRegExpStr(),o=n?new RegExp(n+`|
`,"gi"):null,r=[],s,a=0,l=0,c=0,d=0,h=new Array;for(let p=0;p<60;p++)h.push(new ch(an(0,p),0,-1,Qo.getEmpty(),new lh(an(0,p))));let u=new Array;for(let p=0;p<60;p++)u.push(new ch(an(1,p),0,-1,Qo.getEmpty(),new lh(an(1,p))));if(o)for(o.lastIndex=0;(s=o.exec(e))!==null;){let p=s.index,f=s[0];if(f===`
`)a++,l=p+1;else{if(c!==p){let v;if(d===a){let b=p-c;if(b<h.length)v=h[b];else{let A=an(0,b);v=new ch(A,0,-1,Qo.getEmpty(),new lh(A))}}else{let b=a-d,A=p-l;if(b===1&&A<u.length)v=u[A];else{let w=an(b,A);v=new ch(w,0,-1,Qo.getEmpty(),new lh(w))}}r.push(v)}r.push(t.getToken(f)),c=p+f.length,d=a}}let g=e.length;if(c!==g){let p=d===a?an(0,g-c):an(a-d,g-l);r.push(new ch(p,0,-1,Qo.getEmpty(),new lh(p)))}this.length=an(a,g-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new UF}},d5=class i{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}let o=new Map;for(let r of e.bracketsNew.openingBrackets){let s=an(0,r.bracketText.length),a=n(r),l=Qo.getEmpty().add(a,kZ);o.set(r.bracketText,new ch(s,1,a,l,tk.create(s,r,l)))}for(let r of e.bracketsNew.closingBrackets){let s=an(0,r.bracketText.length),a=Qo.getEmpty(),l=r.getClosedBrackets();for(let c of l)a=a.add(n(c),kZ);o.set(r.bracketText,new ch(s,2,n(l[0]),a,tk.create(s,r,a)))}return new i(o)}getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>l_e(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}};function l_e(i){let e=cs(i);return/^[\w ]+/.test(i)&&(e=`\\b${e}`),/[\w ]+$/.test(i)&&(e=`${e}\\b`),e}var nk=class{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=d5.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}};function c_e(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;let r=e,s=i[r].listHeight;for(e++;e<i.length&&i[e].listHeight===s;)e++;return e-r>=2?mre(r===0&&e===i.length?i:i.slice(r,e),!1):i[r]}let n=t(),o=t();if(!o)return n;for(let r=t();r;r=t())EZ(n,o)<=EZ(o,r)?(n=j2(n,o),o=r):o=j2(o,r);return j2(n,o)}function mre(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){let n=t>>1;for(let o=0;o<n;o++){let r=o<<1;i[o]=ba.create23(i[r],i[r+1],r+3===t?i[r+2]:null,e)}t=n}return ba.create23(i[0],i[1],t>=3?i[2]:null,e)}function EZ(i,e){return Math.abs(i.listHeight-e.listHeight)}function j2(i,e){return i.listHeight===e.listHeight?ba.create23(i,e,null,!1):i.listHeight>e.listHeight?d_e(i,e):h_e(e,i)}function d_e(i,e){i=i.toMutable();let t=i,n=new Array,o;for(;;){if(e.listHeight===t.listHeight){o=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){let s=n[r];o?s.childrenLength>=3?o=ba.create23(s.unappendChild(),o,null,!1):(s.appendChildOfSameHeight(o),o=void 0):s.handleChildrenChanged()}return o?ba.create23(i,o,null,!1):i}function h_e(i,e){i=i.toMutable();let t=i,n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let o=e;for(let r=n.length-1;r>=0;r--){let s=n[r];o?s.childrenLength>=3?o=ba.create23(o,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(o),o=void 0):s.handleChildrenChanged()}return o?ba.create23(o,i,null,!1):i}var h5=class{constructor(e){this.lastOffset=da,this.nextNodes=[e],this.offsets=[da],this.idxs=[]}readLongestNodeAt(e,t){if(Jf(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){let n=Av(this.nextNodes);if(!n)return;let o=Av(this.offsets);if(Jf(e,o))return;if(Jf(o,e))if(Zi(o,n.length)<=e)this.nextNodeAfterCurrent();else{let r=K2(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(o),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{let r=K2(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(o),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){let e=Av(this.offsets),t=Av(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let n=Av(this.nextNodes),o=K2(n,this.idxs[this.idxs.length-1]);if(o!==-1){this.nextNodes.push(n.getChild(o)),this.offsets.push(Zi(e,t.length)),this.idxs[this.idxs.length-1]=o;break}else this.idxs.pop()}}};function K2(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function Av(i){return i.length>0?i[i.length-1]:void 0}function u5(i,e,t,n){return new g5(i,e,t,n).parseDocument()}var g5=class{constructor(e,t,n,o){if(this.tokenizer=e,this.createImmutableLists=o,this._itemsConstructed=0,this._itemsFromCache=0,n&&o)throw new Error("Not supported");this.oldNodeReader=n?new h5(n):void 0,this.positionMapper=new n5(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Qo.getEmpty());return e||(e=ba.getEmpty()),e}parseList(e){let t=new Array;for(;;){let n=this.tokenizer.peek();if(!n||n.kind===2&&n.bracketIds.intersects(e))break;let o=this.parseChild(e);o.kind===4&&o.childrenLength===0||t.push(o)}return this.oldNodeReader?c_e(t):mre(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){let n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!n_e(n)){let o=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),r=>Jf(r.length,n)?r.canBeReused(e):!1);if(o)return this._itemsFromCache++,this.tokenizer.skip(o.length),o}}this._itemsConstructed++;let t=this.tokenizer.read();switch(t.kind){case 2:return new a5(t.bracketIds,t.length);case 0:return t.astNode;case 1:{let n=e.merge(t.bracketIds),o=this.parseList(n),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===t.bracketId||r.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),Zx.create(t.astNode,o,r.astNode)):Zx.create(t.astNode,o,null)}default:throw new Error("unexpected")}}},p5=class extends J{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new Q,this.denseKeyProvider=new Xx,this.brackets=new nk(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,e.tokenization.backgroundTokenizationState===0){let n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),o=new c5(this.textModel.getValue(),n);this.initialAstWithoutTokens=u5(o,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.tokenization.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){let e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){let t=e.map(n=>new Jx(an(n.fromLineNumber-1,0),an(n.toLineNumber,0),an(n.toLineNumber-n.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){let t=e.changes.map(n=>{let o=E.lift(n.range);return new Jx(wm(o.getStartPosition()),wm(o.getEndPosition()),s_e(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){let o=t,r=new ik(this.textModel,this.brackets);return u5(r,e,o,n)}getBracketsInRange(e){let t=an(e.startLineNumber-1,e.startColumn-1),n=an(e.endLineNumber-1,e.endColumn-1),o=new Array,r=this.initialAstWithoutTokens||this.astWithTokens;return m5(r,da,r.length,t,n,o,0,new Map),o}getBracketPairsInRange(e,t){let n=new Array,o=wm(e.getStartPosition()),r=wm(e.getEndPosition()),s=this.initialAstWithoutTokens||this.astWithTokens,a=new f5(n,t,this.textModel);return _5(s,da,s.length,o,r,a,0,new Map),n}getFirstBracketAfter(e){let t=this.initialAstWithoutTokens||this.astWithTokens;return _re(t,da,t.length,wm(e))}getFirstBracketBefore(e){let t=this.initialAstWithoutTokens||this.astWithTokens;return fre(t,da,t.length,wm(e))}};function fre(i,e,t,n){if(i.kind===4||i.kind===2){let o=[];for(let r of i.children)t=Zi(e,r.length),o.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=o.length-1;r>=0;r--){let{nodeOffsetStart:s,nodeOffsetEnd:a}=o[r];if(Jf(s,n)){let l=fre(i.children[r],s,a,n);if(l)return l}}return null}else{if(i.kind===3)return null;if(i.kind===1){let o=rd(e,t);return{bracketInfo:i.bracketInfo,range:o}}}return null}function _re(i,e,t,n){if(i.kind===4||i.kind===2){for(let o of i.children){if(t=Zi(e,o.length),Jf(n,t)){let r=_re(o,e,t,n);if(r)return r}e=t}return null}else{if(i.kind===3)return null;if(i.kind===1){let o=rd(e,t);return{bracketInfo:i.bracketInfo,range:o}}}return null}function m5(i,e,t,n,o,r,s,a){if(!(s>200)){if(i.kind===4)for(let l of i.children)t=Zi(e,l.length),gh(e,o)&&a1(t,n)&&m5(l,e,t,n,o,r,s,a),e=t;else if(i.kind===2){let l=0;if(a){let c=a.get(i.openingBracket.text);c===void 0&&(c=0),l=c,c++,a.set(i.openingBracket.text,c)}{let c=i.openingBracket;if(t=Zi(e,c.length),gh(e,o)&&a1(t,n)){let d=rd(e,t);r.push(new hf(d,s,l,!i.closingBracket))}e=t}if(i.child){let c=i.child;t=Zi(e,c.length),gh(e,o)&&a1(t,n)&&m5(c,e,t,n,o,r,s+1,a),e=t}if(i.closingBracket){let c=i.closingBracket;if(t=Zi(e,c.length),gh(e,o)&&a1(t,n)){let d=rd(e,t);r.push(new hf(d,s,l,!1))}e=t}a?.set(i.openingBracket.text,l)}else if(i.kind===3){let l=rd(e,t);r.push(new hf(l,s-1,0,!0))}else if(i.kind===1){let l=rd(e,t);r.push(new hf(l,s-1,0,!1))}}}var f5=class{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}};function _5(i,e,t,n,o,r,s,a){var l;if(!(s>200))if(i.kind===2){let c=0;if(a){let u=a.get(i.openingBracket.text);u===void 0&&(u=0),c=u,u++,a.set(i.openingBracket.text,u)}let d=Zi(e,i.openingBracket.length),h=-1;if(r.includeMinIndentation&&(h=i.computeMinIndentation(e,r.textModel)),r.result.push(new i5(rd(e,t),rd(e,d),i.closingBracket?rd(Zi(d,((l=i.child)===null||l===void 0?void 0:l.length)||da),t):void 0,s,c,i,h)),e=d,i.child){let u=i.child;t=Zi(e,u.length),gh(e,o)&&a1(t,n)&&_5(u,e,t,n,o,r,s+1,a)}a?.set(i.openingBracket.text,c)}else{let c=e;for(let d of i.children){let h=c;c=Zi(c,d.length),gh(h,o)&&gh(n,c)&&_5(d,h,c,n,o,r,s,a)}}}var v5=class extends J{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new eo),this.onDidChangeEmitter=new Q,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(n=>{var o;(!n.languageId||!((o=this.bracketPairsTree.value)===null||o===void 0)&&o.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get canBuildAST(){return this.textModel.getValueLength()<=5e6}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let e=new ne;this.bracketPairsTree.value=u_e(e.add(new p5(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t,n){let o=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(o.lineNumber,o.column);if(this.canBuildAST){let s=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!s)return null;let a=zD(this.getBracketPairsInRange(E.fromPositions(t,t))||[],l=>s.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{let s=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;let l=a.textIsBracket[s];return l?wy(this._findMatchingBracketUp(l,o,q2(n))):null}}matchBracket(e,t){if(this.canBuildAST){let n=Doe(this.getBracketPairsInRange(E.fromPositions(e,e)).filter(o=>o.closingBracketRange!==void 0&&(o.openingBracketRange.containsPosition(e)||o.closingBracketRange.containsPosition(e))),y1(o=>o.openingBracketRange.containsPosition(e)?o.openingBracketRange:o.closingBracketRange,E.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{let n=q2(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,o){let r=t.getCount(),s=t.getLanguageId(o),a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=o-1;c>=0;c--){let d=t.getEndOffset(c);if(d<=a)break;if(vl(t.getStandardTokenType(c))||t.getLanguageId(c)!==s){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=o+1;c<r;c++){let d=t.getStartOffset(c);if(d>=l)break;if(vl(t.getStandardTokenType(c))||t.getLanguageId(c)!==s){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){let n=e.lineNumber,o=this.textModel.tokenization.getLineTokens(n),r=this.textModel.getLineContent(n),s=o.findTokenIndexAtOffset(e.column-1);if(s<0)return null;let a=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId(s)).brackets;if(a&&!vl(o.getStandardTokenType(s))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,o,a,s),d=null;for(;;){let h=Jr.findNextBracketInRange(a.forwardRegex,n,r,l,c);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){let u=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,a.textIsBracket[u],a.textIsOpenBracket[u],t);if(g){if(g instanceof za)return null;d=g}}l=h.endColumn-1}if(d)return d}if(s>0&&o.getStartOffset(s)===e.column-1){let l=s-1,c=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId(l)).brackets;if(c&&!vl(o.getStandardTokenType(l))){let{searchStartOffset:d,searchEndOffset:h}=this._establishBracketSearchOffsets(e,o,c,l),u=Jr.findPrevBracketInRange(c.reversedRegex,n,r,d,h);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn){let g=r.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),p=this._matchFoundBracket(u,c.textIsBracket[g],c.textIsOpenBracket[g],t);if(p)return p instanceof za?null:p}}}return null}_matchFoundBracket(e,t,n,o){if(!t)return null;let r=n?this._findMatchingBracketDown(t,e.getEndPosition(),o):this._findMatchingBracketUp(t,e.getStartPosition(),o);return r?r instanceof za?r:[e,r]:null}_findMatchingBracketUp(e,t,n){let o=e.languageId,r=e.reversedRegex,s=-1,a=0,l=(c,d,h,u)=>{for(;;){if(n&&++a%100===0&&!n())return za.INSTANCE;let g=Jr.findPrevBracketInRange(r,c,d,h,u);if(!g)break;let p=d.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?s++:e.isClose(p)&&s--,s===0)return g;u=g.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){let d=this.textModel.tokenization.getLineTokens(c),h=d.getCount(),u=this.textModel.getLineContent(c),g=h-1,p=u.length,f=u.length;c===t.lineNumber&&(g=d.findTokenIndexAtOffset(t.column-1),p=t.column-1,f=t.column-1);let v=!0;for(;g>=0;g--){let b=d.getLanguageId(g)===o&&!vl(d.getStandardTokenType(g));if(b)v?p=d.getStartOffset(g):(p=d.getStartOffset(g),f=d.getEndOffset(g));else if(v&&p!==f){let A=l(c,u,p,f);if(A)return A}v=b}if(v&&p!==f){let b=l(c,u,p,f);if(b)return b}}return null}_findMatchingBracketDown(e,t,n){let o=e.languageId,r=e.forwardRegex,s=1,a=0,l=(d,h,u,g)=>{for(;;){if(n&&++a%100===0&&!n())return za.INSTANCE;let p=Jr.findNextBracketInRange(r,d,h,u,g);if(!p)break;let f=h.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(f)?s++:e.isClose(f)&&s--,s===0)return p;u=p.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){let h=this.textModel.tokenization.getLineTokens(d),u=h.getCount(),g=this.textModel.getLineContent(d),p=0,f=0,v=0;d===t.lineNumber&&(p=h.findTokenIndexAtOffset(t.column-1),f=t.column-1,v=t.column-1);let b=!0;for(;p<u;p++){let A=h.getLanguageId(p)===o&&!vl(h.getStandardTokenType(p));if(A)b||(f=h.getStartOffset(p)),v=h.getEndOffset(p);else if(b&&f!==v){let w=l(d,g,f,v);if(w)return w}b=A}if(b&&f!==v){let A=l(d,g,f,v);if(A)return A}}return null}findPrevBracket(e){var t;let n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(n))||null;let o=null,r=null,s=null;for(let a=n.lineNumber;a>=1;a--){let l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a),h=c-1,u=d.length,g=d.length;if(a===n.lineNumber){h=l.findTokenIndexAtOffset(n.column-1),u=n.column-1,g=n.column-1;let f=l.getLanguageId(h);o!==f&&(o=f,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,s=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew)}let p=!0;for(;h>=0;h--){let f=l.getLanguageId(h);if(o!==f){if(r&&s&&p&&u!==g){let b=Jr.findPrevBracketInRange(r.reversedRegex,a,d,u,g);if(b)return this._toFoundBracket(s,b);p=!1}o=f,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,s=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew}let v=!!r&&!vl(l.getStandardTokenType(h));if(v)p?u=l.getStartOffset(h):(u=l.getStartOffset(h),g=l.getEndOffset(h));else if(s&&r&&p&&u!==g){let b=Jr.findPrevBracketInRange(r.reversedRegex,a,d,u,g);if(b)return this._toFoundBracket(s,b)}p=v}if(s&&r&&p&&u!==g){let f=Jr.findPrevBracketInRange(r.reversedRegex,a,d,u,g);if(f)return this._toFoundBracket(s,f)}}return null}findNextBracket(e){var t;let n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(n))||null;let o=this.textModel.getLineCount(),r=null,s=null,a=null;for(let l=n.lineNumber;l<=o;l++){let c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),h=this.textModel.getLineContent(l),u=0,g=0,p=0;if(l===n.lineNumber){u=c.findTokenIndexAtOffset(n.column-1),g=n.column-1,p=n.column-1;let v=c.getLanguageId(u);r!==v&&(r=v,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let f=!0;for(;u<d;u++){let v=c.getLanguageId(u);if(r!==v){if(a&&s&&f&&g!==p){let A=Jr.findNextBracketInRange(s.forwardRegex,l,h,g,p);if(A)return this._toFoundBracket(a,A);f=!1}r=v,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}let b=!!s&&!vl(c.getStandardTokenType(u));if(b)f||(g=c.getStartOffset(u)),p=c.getEndOffset(u);else if(a&&s&&f&&g!==p){let A=Jr.findNextBracketInRange(s.forwardRegex,l,h,g,p);if(A)return this._toFoundBracket(a,A)}f=b}if(a&&s&&f&&g!==p){let v=Jr.findNextBracketInRange(s.forwardRegex,l,h,g,p);if(v)return this._toFoundBracket(a,v)}}return null}findEnclosingBrackets(e,t){let n=this.textModel.validatePosition(e);if(this.canBuildAST){let g=E.fromPositions(n),p=zD(this.getBracketPairsInRange(E.fromPositions(n,n)),f=>f.closingBracketRange!==void 0&&f.range.strictContainsRange(g));return p?[p.openingBracketRange,p.closingBracketRange]:null}let o=q2(t),r=this.textModel.getLineCount(),s=new Map,a=[],l=(g,p)=>{if(!s.has(g)){let f=[];for(let v=0,b=p?p.brackets.length:0;v<b;v++)f[v]=0;s.set(g,f)}a=s.get(g)},c=0,d=(g,p,f,v,b)=>{for(;;){if(o&&++c%100===0&&!o())return za.INSTANCE;let A=Jr.findNextBracketInRange(g.forwardRegex,p,f,v,b);if(!A)break;let w=f.substring(A.startColumn-1,A.endColumn-1).toLowerCase(),C=g.textIsBracket[w];if(C&&(C.isOpen(w)?a[C.index]++:C.isClose(w)&&a[C.index]--,a[C.index]===-1))return this._matchFoundBracket(A,C,!1,o);v=A.endColumn-1}return null},h=null,u=null;for(let g=n.lineNumber;g<=r;g++){let p=this.textModel.tokenization.getLineTokens(g),f=p.getCount(),v=this.textModel.getLineContent(g),b=0,A=0,w=0;if(g===n.lineNumber){b=p.findTokenIndexAtOffset(n.column-1),A=n.column-1,w=n.column-1;let k=p.getLanguageId(b);h!==k&&(h=k,u=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,u))}let C=!0;for(;b<f;b++){let k=p.getLanguageId(b);if(h!==k){if(u&&C&&A!==w){let S=d(u,g,v,A,w);if(S)return wy(S);C=!1}h=k,u=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,u)}let L=!!u&&!vl(p.getStandardTokenType(b));if(L)C||(A=p.getStartOffset(b)),w=p.getEndOffset(b);else if(u&&C&&A!==w){let S=d(u,g,v,A,w);if(S)return wy(S)}C=L}if(u&&C&&A!==w){let k=d(u,g,v,A,w);if(k)return wy(k)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();let o=e.getBracketInfo(n);return o?{range:t,bracketInfo:o}:null}};function u_e(i,e){return{object:i,dispose:()=>e?.dispose()}}function q2(i){if(typeof i>"u")return()=>!0;{let e=Date.now();return()=>Date.now()-e<=i}}var za=class{constructor(){this._searchCanceledBrand=void 0}};za.INSTANCE=new za;function wy(i){return i instanceof za?null:i}var A5=class extends J{constructor(e){super(),this.textModel=e,this.colorProvider=new ok,this.onDidChangeEmitter=new Q,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];let o=new Array,r=this.textModel.bracketPairs.getBracketsInRange(e);for(let s of r)o.push({id:`bracket${s.range.toString()}-${s.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(s,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:s.range});return o}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new E(1,1,this.textModel.getLineCount(),1),e,t):[]}},ok=class{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};xi((i,e)=>{let t=[cre,dre,hre,ure,gre,pre],n=new ok;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(Cfe)}; }`);let o=t.map(r=>i.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){let s=o[r%o.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${s}; }`)}});function Cy(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var Zs=class i{constructor(e,t,n,o){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=o}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Cy(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Cy(this.oldText)}")`:`(replace@${this.oldPosition} "${Cy(this.oldText)}" with "${Cy(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){let o=t.length;Fa(e,o,n),n+=4;for(let r=0;r<o;r++)wge(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){let n=Ra(e,t);return t+=4,NB(e,t,n)}writeSize(){return 4+4+i._writeStringSize(this.oldText)+i._writeStringSize(this.newText)}write(e,t){return Fa(e,this.oldPosition,t),t+=4,Fa(e,this.newPosition,t),t+=4,t=i._writeString(e,this.oldText,t),t=i._writeString(e,this.newText,t),t}static read(e,t,n){let o=Ra(e,t);t+=4;let r=Ra(e,t);t+=4;let s=i._readString(e,t);t+=i._writeStringSize(s);let a=i._readString(e,t);return t+=i._writeStringSize(a),n.push(new i(o,s,r,a)),t}};function g_e(i,e){return i===null||i.length===0?e:new b5(i,e).compress()}var b5=class i{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),o=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(o),o=this._getCurr(++t);continue}if(o===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(o.oldEnd<=n.newPosition){this._acceptCurr(o),o=this._getCurr(++t);continue}if(n.newEnd<=o.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(o.oldPosition<n.newPosition){let[l,c]=i._splitCurr(o,n.newPosition-o.oldPosition);this._acceptCurr(l),o=c;continue}if(n.newPosition<o.oldPosition){let[l,c]=i._splitPrev(n,o.oldPosition-n.newPosition);this._acceptPrev(l),n=c;continue}let s,a;if(o.oldEnd===n.newEnd)s=n,a=o,n=this._getPrev(++e),o=this._getCurr(++t);else if(o.oldEnd<n.newEnd){let[l,c]=i._splitPrev(n,o.oldLength);s=l,a=o,n=c,o=this._getCurr(++t)}else{let[l,c]=i._splitCurr(o,n.newLength);s=n,a=l,n=this._getPrev(++e),o=c}this._result[this._resultLen++]=new Zs(s.oldPosition,s.oldText,a.newPosition,a.newText),this._prevDeltaOffset+=s.newLength-s.oldLength,this._currDeltaOffset+=a.newLength-a.oldLength}let r=i._merge(this._result);return i._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=i._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=i._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Zs(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Zs(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let n=e.newText.substr(0,t),o=e.newText.substr(t);return[new Zs(e.oldPosition,e.oldText,e.newPosition,n),new Zs(e.oldEnd,"",e.newPosition+t,o)]}static _splitCurr(e,t){let n=e.oldText.substr(0,t),o=e.oldText.substr(t);return[new Zs(e.oldPosition,n,e.newPosition,e.newText),new Zs(e.oldPosition+t,o,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,o=e[0];for(let r=1;r<e.length;r++){let s=e[r];o.oldEnd===s.oldPosition?o=new Zs(o.oldPosition,o.oldText+s.oldText,o.newPosition,o.newText+s.newText):(t[n++]=o,o=s)}return t[n++]=o,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let o=0;o<e.length;o++){let r=e[o];r.oldText!==r.newText&&(t[n++]=r)}return t}};function Hd(i){return i===47||i===92}function MY(i){return i.replace(/[\\/]/g,Mi.sep)}function vre(i){return i.indexOf("/")===-1&&(i=MY(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function rk(i,e=Mi.sep){if(!i)return"";let t=i.length,n=i.charCodeAt(0);if(Hd(n)){if(Hd(i.charCodeAt(1))&&!Hd(i.charCodeAt(2))){let r=3,s=r;for(;r<t&&!Hd(i.charCodeAt(r));r++);if(s!==r&&!Hd(i.charCodeAt(r+1))){for(r+=1;r<t;r++)if(Hd(i.charCodeAt(r)))return i.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(Are(n)&&i.charCodeAt(1)===58)return Hd(i.charCodeAt(2))?i.slice(0,2)+e:i.slice(0,2);let o=i.indexOf("://");if(o!==-1){for(o+=3;o<t;o++)if(Hd(i.charCodeAt(o)))return i.slice(0,o+1)}return""}function vb(i,e,t,n=Ss){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!oY(i,e))return!1;if(e.length===i.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,i.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function Are(i){return i>=65&&i<=90||i>=97&&i<=122}function p_e(i,e=Mn){return e?Are(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function Al(i){return CA(i,!0)}var ov=class{constructor(i){this._ignorePathCasing=i}compare(i,e,t=!1){return i===e?0:Is(this.getComparisonKey(i,t),this.getComparisonKey(e,t))}isEqual(i,e,t=!1){return i===e?!0:!i||!e?!1:this.getComparisonKey(i,t)===this.getComparisonKey(e,t)}getComparisonKey(i,e=!1){return i.with({path:this._ignorePathCasing(i)?i.path.toLowerCase():void 0,fragment:e?null:void 0}).toString()}isEqualOrParent(i,e,t=!1){if(i.scheme===e.scheme){if(i.scheme===Oe.file)return vb(Al(i),Al(e),this._ignorePathCasing(i))&&i.query===e.query&&(t||i.fragment===e.fragment);if(IZ(i.authority,e.authority))return vb(i.path,e.path,this._ignorePathCasing(i),"/")&&i.query===e.query&&(t||i.fragment===e.fragment)}return!1}joinPath(i,...e){return $.joinPath(i,...e)}basenameOrAuthority(i){return gs(i)||i.authority}basename(i){return Mi.basename(i.path)}extname(i){return Mi.extname(i.path)}dirname(i){if(i.path.length===0)return i;let e;return i.scheme===Oe.file?e=$.file(tY(Al(i))).path:(e=Mi.dirname(i.path),i.authority&&e.length&&e.charCodeAt(0)!==47&&(console.error(`dirname("${i.toString})) resulted in a relative path`),e="/")),i.with({path:e})}normalizePath(i){if(!i.path.length)return i;let e;return i.scheme===Oe.file?e=$.file(eY(Al(i))).path:e=Mi.normalize(i.path),i.with({path:e})}relativePath(i,e){if(i.scheme!==e.scheme||!IZ(i.authority,e.authority))return;if(i.scheme===Oe.file){let o=Wne(Al(i),Al(e));return Mn?MY(o):o}let t=i.path||"/",n=e.path||"/";if(this._ignorePathCasing(i)){let o=0;for(let r=Math.min(t.length,n.length);o<r&&!(t.charCodeAt(o)!==n.charCodeAt(o)&&t.charAt(o).toLowerCase()!==n.charAt(o).toLowerCase());o++);t=n.substr(0,o)+t.substr(o)}return Mi.relative(t,n)}resolvePath(i,e){if(i.scheme===Oe.file){let t=$.file(Hne(Al(i),e));return i.with({authority:t.authority,path:t.path})}return e=vre(e),i.with({path:Mi.resolve(i.path,e)})}isAbsolutePath(i){return!!i.path&&i.path[0]==="/"}isEqualAuthority(i,e){return i===e||i!==void 0&&e!==void 0&&dg(i,e)}hasTrailingPathSeparator(i,e=Ss){if(i.scheme===Oe.file){let t=Al(i);return t.length>rk(t).length&&t[t.length-1]===e}else{let t=i.path;return t.length>1&&t.charCodeAt(t.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(i.fsPath)}}removeTrailingPathSeparator(i,e=Ss){return TZ(i,e)?i.with({path:i.path.substr(0,i.path.length-1)}):i}addTrailingPathSeparator(i,e=Ss){let t=!1;if(i.scheme===Oe.file){let n=Al(i);t=n!==void 0&&n.length===rk(n).length&&n[n.length-1]===e}else{e="/";let n=i.path;t=n.length===1&&n.charCodeAt(n.length-1)===47}return!t&&!TZ(i,e)?i.with({path:i.path+"/"}):i}},Ai=new ov(()=>!1);new ov(i=>i.scheme===Oe.file?!go:!0);new ov(i=>!0);var bre=Ai.isEqual.bind(Ai);Ai.isEqualOrParent.bind(Ai);Ai.getComparisonKey.bind(Ai);var w5=Ai.basenameOrAuthority.bind(Ai),gs=Ai.basename.bind(Ai),m_e=Ai.extname.bind(Ai),rv=Ai.dirname.bind(Ai),kl=Ai.joinPath.bind(Ai),f_e=Ai.normalizePath.bind(Ai),wre=Ai.relativePath.bind(Ai),LZ=Ai.resolvePath.bind(Ai);Ai.isAbsolutePath.bind(Ai);var IZ=Ai.isEqualAuthority.bind(Ai),TZ=Ai.hasTrailingPathSeparator.bind(Ai);Ai.removeTrailingPathSeparator.bind(Ai);Ai.addTrailingPathSeparator.bind(Ai);var Jh;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){let n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{let[s,a]=r.split(":");s&&a&&n.set(s,a)});let o=t.path.substring(0,t.path.indexOf(";"));return o&&n.set(i.META_DATA_MIME,o),n}i.parseMetaData=e})(Jh||(Jh={}));function Cm(i){return i.toString()}var Er=class i{constructor(e,t,n,o,r,s,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=o,this.beforeCursorState=r,this.afterCursorState=s,this.changes=a}static create(e,t){let n=e.getAlternativeVersionId(),o=y5(e);return new i(n,n,o,o,t,t,[])}append(e,t,n,o,r){t.length>0&&(this.changes=g_e(this.changes,t)),this.afterEOL=n,this.afterVersionId=o,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Fa(e,t?t.length:0,n),n+=4,t)for(let o of t)Fa(e,o.selectionStartLineNumber,n),n+=4,Fa(e,o.selectionStartColumn,n),n+=4,Fa(e,o.positionLineNumber,n),n+=4,Fa(e,o.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){let o=Ra(e,t);t+=4;for(let r=0;r<o;r++){let s=Ra(e,t);t+=4;let a=Ra(e,t);t+=4;let l=Ra(e,t);t+=4;let c=Ra(e,t);t+=4,n.push(new Se(s,a,l,c))}return t}serialize(){let e=10+i._writeSelectionsSize(this.beforeCursorState)+i._writeSelectionsSize(this.afterCursorState)+4;for(let o of this.changes)e+=o.writeSize();let t=new Uint8Array(e),n=0;Fa(t,this.beforeVersionId,n),n+=4,Fa(t,this.afterVersionId,n),n+=4,tZ(t,this.beforeEOL,n),n+=1,tZ(t,this.afterEOL,n),n+=1,n=i._writeSelections(t,this.beforeCursorState,n),n=i._writeSelections(t,this.afterCursorState,n),Fa(t,this.changes.length,n),n+=4;for(let o of this.changes)n=o.write(t,n);return t.buffer}static deserialize(e){let t=new Uint8Array(e),n=0,o=Ra(t,n);n+=4;let r=Ra(t,n);n+=4;let s=eZ(t,n);n+=1;let a=eZ(t,n);n+=1;let l=[];n=i._readSelections(t,n,l);let c=[];n=i._readSelections(t,n,c);let d=Ra(t,n);n+=4;let h=[];for(let u=0;u<d;u++)n=Zs.read(t,n,h);return new i(o,r,s,a,l,c,h)}},sk=class{constructor(e,t,n,o){this.label=e,this.code=t,this.model=n,this._data=Er.create(n,o)}get type(){return 0}get resource(){return $.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof Er?this._data:Er.deserialize(this._data)).changes.map(e=>e.toString()).join(", ")}matchesResource(e){return($.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Er}append(e,t,n,o,r){this._data instanceof Er&&this._data.append(e,t,n,o,r)}close(){this._data instanceof Er&&(this._data=this._data.serialize())}open(){this._data instanceof Er||(this._data=Er.deserialize(this._data))}undo(){if($.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Er&&(this._data=this._data.serialize());let e=Er.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if($.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Er&&(this._data=this._data.serialize());let e=Er.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Er&&(this._data=this._data.serialize()),this._data.byteLength+168}},C5=class{constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(let o of this._editStackElementsArr){let r=Cm(o.resource);this._editStackElementsMap.set(r,o)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){let t=Cm(e);return this._editStackElementsMap.has(t)}setModel(e){let t=Cm($.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=Cm(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,o,r){let s=Cm(e.uri);this._editStackElementsMap.get(s).append(e,t,n,o,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=Cm(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${gs(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};function y5(i){return i.getEOL()===`
`?0:1}function Hc(i){return i?i instanceof sk||i instanceof C5:!1}var S5=class i{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);Hc(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);Hc(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){let t=this._undoRedoService.getLastElement(this._model.uri);if(Hc(t)&&t.canAppend(this._model))return t;let n=new sk(m("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){let t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],y5(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){let o=this._getOrCreateEditStackElement(e),r=this._model.applyEdits(t,!0),s=i._computeCursorState(n,r),a=r.map((l,c)=>({index:c,textChange:l.textChange}));return a.sort((l,c)=>l.textChange.oldPosition===c.textChange.oldPosition?l.index-c.index:l.textChange.oldPosition-c.textChange.oldPosition),o.append(this._model,a.map(l=>l.textChange),y5(this._model),this._model.getAlternativeVersionId(),s),s}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Ye(n),null}}},D5=class{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};function __e(i,e,t,n,o){o.spacesDiff=0,o.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){let u=i.charCodeAt(r),g=t.charCodeAt(r);if(u!==g)break}let s=0,a=0;for(let u=r;u<e;u++)i.charCodeAt(u)===32?s++:a++;let l=0,c=0;for(let u=r;u<n;u++)t.charCodeAt(u)===32?l++:c++;if(s>0&&a>0||l>0&&c>0)return;let d=Math.abs(a-c),h=Math.abs(s-l);if(d===0){o.spacesDiff=h,h>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==32&&i.charCodeAt(l-1)===32&&i.charCodeAt(i.length-1)===44&&(o.looksLikeAlignment=!0);return}if(h%d===0){o.spacesDiff=h/d;return}}function MZ(i,e,t){let n=Math.min(i.getLineCount(),1e4),o=0,r=0,s="",a=0,l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],h=new D5;for(let p=1;p<=n;p++){let f=i.getLineLength(p),v=i.getLineContent(p),b=f<=65536,A=!1,w=0,C=0,k=0;for(let S=0,y=f;S<y;S++){let M=b?v.charCodeAt(S):i.getLineCharCode(p,S);if(M===9)k++;else if(M===32)C++;else{A=!0,w=S;break}}if(!A||(k>0?o++:C>1&&r++,__e(s,a,v,w,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;let L=h.spacesDiff;L<=c&&d[L]++,s=v,a=w}let u=t;o!==r&&(u=o<r);let g=e;if(u){let p=u?0:.1*n;l.forEach(f=>{let v=d[f];v>p&&(p=v,g=f)}),g===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(g=2)}return{insertSpaces:u,tabSize:g}}function ur(i){return(i.metadata&1)>>>0}function bi(i,e){i.metadata=i.metadata&254|e<<0}function uo(i){return(i.metadata&2)>>>1===1}function vi(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function Cre(i){return(i.metadata&4)>>>2===1}function NZ(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function v_e(i){return(i.metadata&24)>>>3}function RZ(i,e){i.metadata=i.metadata&231|e<<3}function A_e(i){return(i.metadata&32)>>>5===1}function FZ(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}var ak=class{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,bi(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,NZ(this,!1),RZ(this,1),FZ(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,vi(this,!1)}reset(e,t,n,o){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=o}setOptions(e){this.options=e;let t=this.options.className;NZ(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),RZ(this,this.options.stickiness),FZ(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},dt=new ak(null,0,0);dt.parent=dt;dt.left=dt;dt.right=dt;bi(dt,0);var I1=class{constructor(){this.root=dt,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,o,r){return this.root===dt?[]:k_e(this,e,t,n,o,r)}search(e,t,n){return this.root===dt?[]:x_e(this,e,t,n)}collectNodesFromOwner(e){return S_e(this,e)}collectNodesPostOrder(){return D_e(this)}insert(e){BZ(this,e),this._normalizeDeltaIfNecessary()}delete(e){PZ(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let n=e,o=0;for(;e!==this.root;)e===e.parent.right&&(o+=e.parent.delta),e=e.parent;let r=n.start+o,s=n.end+o;n.setCachedOffsets(r,s,t)}acceptReplace(e,t,n,o){let r=C_e(this,e,e+t);for(let s=0,a=r.length;s<a;s++){let l=r[s];PZ(this,l)}this._normalizeDeltaIfNecessary(),y_e(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=r.length;s<a;s++){let l=r[s];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,w_e(l,e,e+t,n,o),l.maxEnd=l.end,BZ(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,b_e(this))}};function b_e(i){let e=i.root,t=0;for(;e!==dt;){if(e.left!==dt&&!uo(e.left)){e=e.left;continue}if(e.right!==dt&&!uo(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Xh(e),vi(e,!0),vi(e.left,!1),vi(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}vi(i.root,!1)}function ym(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function w_e(i,e,t,n,o){let r=v_e(i),s=r===0||r===2,a=r===1||r===2,l=t-e,c=n,d=Math.min(l,c),h=i.start,u=!1,g=i.end,p=!1;e<=h&&g<=t&&A_e(i)&&(i.start=e,u=!0,i.end=e,p=!0);{let v=o?1:l>0?2:0;!u&&ym(h,s,e,v)&&(u=!0),!p&&ym(g,a,e,v)&&(p=!0)}if(d>0&&!o){let v=l>c?2:0;!u&&ym(h,s,e+d,v)&&(u=!0),!p&&ym(g,a,e+d,v)&&(p=!0)}{let v=o?1:0;!u&&ym(h,s,t,v)&&(i.start=e+c,u=!0),!p&&ym(g,a,t,v)&&(i.end=e+c,p=!0)}let f=c-l;u||(i.start=Math.max(0,h+f)),p||(i.end=Math.max(0,g+f)),i.start>i.end&&(i.end=i.start)}function C_e(i,e,t){let n=i.root,o=0,r=0,s=0,a=0,l=[],c=0;for(;n!==dt;){if(uo(n)){vi(n.left,!1),vi(n.right,!1),n===n.parent.right&&(o-=n.parent.delta),n=n.parent;continue}if(!uo(n.left)){if(r=o+n.maxEnd,r<e){vi(n,!0);continue}if(n.left!==dt){n=n.left;continue}}if(s=o+n.start,s>t){vi(n,!0);continue}if(a=o+n.end,a>=e&&(n.setCachedOffsets(s,a,0),l[c++]=n),vi(n,!0),n.right!==dt&&!uo(n.right)){o+=n.delta,n=n.right;continue}}return vi(i.root,!1),l}function y_e(i,e,t,n){let o=i.root,r=0,s=0,a=0,l=n-(t-e);for(;o!==dt;){if(uo(o)){vi(o.left,!1),vi(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),Xh(o),o=o.parent;continue}if(!uo(o.left)){if(s=r+o.maxEnd,s<e){vi(o,!0);continue}if(o.left!==dt){o=o.left;continue}}if(a=r+o.start,a>t){o.start+=l,o.end+=l,o.delta+=l,(o.delta<-1073741824||o.delta>1073741824)&&(i.requestNormalizeDelta=!0),vi(o,!0);continue}if(vi(o,!0),o.right!==dt&&!uo(o.right)){r+=o.delta,o=o.right;continue}}vi(i.root,!1)}function S_e(i,e){let t=i.root,n=[],o=0;for(;t!==dt;){if(uo(t)){vi(t.left,!1),vi(t.right,!1),t=t.parent;continue}if(t.left!==dt&&!uo(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[o++]=t),vi(t,!0),t.right!==dt&&!uo(t.right)){t=t.right;continue}}return vi(i.root,!1),n}function D_e(i){let e=i.root,t=[],n=0;for(;e!==dt;){if(uo(e)){vi(e.left,!1),vi(e.right,!1),e=e.parent;continue}if(e.left!==dt&&!uo(e.left)){e=e.left;continue}if(e.right!==dt&&!uo(e.right)){e=e.right;continue}t[n++]=e,vi(e,!0)}return vi(i.root,!1),t}function x_e(i,e,t,n){let o=i.root,r=0,s=0,a=0,l=[],c=0;for(;o!==dt;){if(uo(o)){vi(o.left,!1),vi(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),o=o.parent;continue}if(o.left!==dt&&!uo(o.left)){o=o.left;continue}s=r+o.start,a=r+o.end,o.setCachedOffsets(s,a,n);let d=!0;if(e&&o.ownerId&&o.ownerId!==e&&(d=!1),t&&Cre(o)&&(d=!1),d&&(l[c++]=o),vi(o,!0),o.right!==dt&&!uo(o.right)){r+=o.delta,o=o.right;continue}}return vi(i.root,!1),l}function k_e(i,e,t,n,o,r){let s=i.root,a=0,l=0,c=0,d=0,h=[],u=0;for(;s!==dt;){if(uo(s)){vi(s.left,!1),vi(s.right,!1),s===s.parent.right&&(a-=s.parent.delta),s=s.parent;continue}if(!uo(s.left)){if(l=a+s.maxEnd,l<e){vi(s,!0);continue}if(s.left!==dt){s=s.left;continue}}if(c=a+s.start,c>t){vi(s,!0);continue}if(d=a+s.end,d>=e){s.setCachedOffsets(c,d,r);let g=!0;n&&s.ownerId&&s.ownerId!==n&&(g=!1),o&&Cre(s)&&(g=!1),g&&(h[u++]=s)}if(vi(s,!0),s.right!==dt&&!uo(s.right)){a+=s.delta,s=s.right;continue}}return vi(i.root,!1),h}function BZ(i,e){if(i.root===dt)return e.parent=dt,e.left=dt,e.right=dt,bi(e,0),i.root=e,i.root;E_e(i,e),Gd(e.parent);let t=e;for(;t!==i.root&&ur(t.parent)===1;)if(t.parent===t.parent.parent.left){let n=t.parent.parent.right;ur(n)===1?(bi(t.parent,0),bi(n,0),bi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,T1(i,t)),bi(t.parent,0),bi(t.parent.parent,1),M1(i,t.parent.parent))}else{let n=t.parent.parent.left;ur(n)===1?(bi(t.parent,0),bi(n,0),bi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,M1(i,t)),bi(t.parent,0),bi(t.parent.parent,1),T1(i,t.parent.parent))}return bi(i.root,0),e}function E_e(i,e){let t=0,n=i.root,o=e.start,r=e.end;for(;;)if(I_e(o,r,n.start+t,n.end+t)<0)if(n.left===dt){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===dt){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=dt,e.right=dt,bi(e,1)}function PZ(i,e){let t,n;if(e.left===dt?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===dt?(t=e.left,n=e):(n=L_e(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,bi(t,0),e.detach(),$2(),Xh(t),i.root.parent=dt;return}let o=ur(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,bi(n,ur(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==dt&&(n.left.parent=n),n.right!==dt&&(n.right.parent=n)),e.detach(),o){Gd(t.parent),n!==e&&(Gd(n),Gd(n.parent)),$2();return}Gd(t),Gd(t.parent),n!==e&&(Gd(n),Gd(n.parent));let r;for(;t!==i.root&&ur(t)===0;)t===t.parent.left?(r=t.parent.right,ur(r)===1&&(bi(r,0),bi(t.parent,1),T1(i,t.parent),r=t.parent.right),ur(r.left)===0&&ur(r.right)===0?(bi(r,1),t=t.parent):(ur(r.right)===0&&(bi(r.left,0),bi(r,1),M1(i,r),r=t.parent.right),bi(r,ur(t.parent)),bi(t.parent,0),bi(r.right,0),T1(i,t.parent),t=i.root)):(r=t.parent.left,ur(r)===1&&(bi(r,0),bi(t.parent,1),M1(i,t.parent),r=t.parent.left),ur(r.left)===0&&ur(r.right)===0?(bi(r,1),t=t.parent):(ur(r.left)===0&&(bi(r.right,0),bi(r,1),T1(i,r),r=t.parent.left),bi(r,ur(t.parent)),bi(t.parent,0),bi(r.left,0),M1(i,t.parent),t=i.root));bi(t,0),$2()}function L_e(i){for(;i.left!==dt;)i=i.left;return i}function $2(){dt.parent=dt,dt.delta=0,dt.start=0,dt.end=0}function T1(i,e){let t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==dt&&(t.left.parent=e),t.parent=e.parent,e.parent===dt?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Xh(e),Xh(t)}function M1(i,e){let t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==dt&&(t.right.parent=e),t.parent=e.parent,e.parent===dt?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Xh(e),Xh(t)}function yre(i){let e=i.end;if(i.left!==dt){let t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==dt){let t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function Xh(i){i.maxEnd=yre(i)}function Gd(i){for(;i!==dt;){let e=yre(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function I_e(i,e,t,n){return i===t?e-n:i-t}var Ab=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Ge)return NY(this.right);let e=this;for(;e.parent!==Ge&&e.parent.left!==e;)e=e.parent;return e.parent===Ge?Ge:e.parent}prev(){if(this.left!==Ge)return Sre(this.left);let e=this;for(;e.parent!==Ge&&e.parent.right!==e;)e=e.parent;return e.parent===Ge?Ge:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},Ge=new Ab(null,0);Ge.parent=Ge;Ge.left=Ge;Ge.right=Ge;Ge.color=0;function NY(i){for(;i.left!==Ge;)i=i.left;return i}function Sre(i){for(;i.right!==Ge;)i=i.right;return i}function RY(i){return i===Ge?0:i.size_left+i.piece.length+RY(i.right)}function FY(i){return i===Ge?0:i.lf_left+i.piece.lineFeedCnt+FY(i.right)}function G2(){Ge.parent=Ge}function N1(i,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Ge&&(t.left.parent=e),t.parent=e.parent,e.parent===Ge?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function R1(i,e){let t=e.left;e.left=t.right,t.right!==Ge&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Ge?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function yy(i,e){let t,n;if(e.left===Ge?(n=e,t=n.right):e.right===Ge?(n=e,t=n.left):(n=NY(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),G2(),i.root.parent=Ge;return}let o=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,l1(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,l1(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Ge&&(n.left.parent=n),n.right!==Ge&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,l1(i,n)),e.detach(),t.parent.left===t){let s=RY(t),a=FY(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let l=s-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,Ec(i,t.parent,l,c)}}if(l1(i,t.parent),o){G2();return}let r;for(;t!==i.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,N1(i,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,R1(i,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,N1(i,t.parent),t=i.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,R1(i,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,N1(i,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,R1(i,t.parent),t=i.root));t.color=0,G2()}function OZ(i,e){for(l1(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){let t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,N1(i,e)),e.parent.color=0,e.parent.parent.color=1,R1(i,e.parent.parent))}else{let t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,R1(i,e)),e.parent.color=0,e.parent.parent.color=1,N1(i,e.parent.parent))}i.root.color=0}function Ec(i,e,t,n){for(;e!==i.root&&e!==Ge;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function l1(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=RY(e.left)-e.size_left,n=FY(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}var T_e=999,Wc=class{constructor(e,t,n,o){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=o}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=M_e(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=noe(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new iO(t,this.wordSeparators?Ms(this.wordSeparators):null,n?this.searchString:null)}};function M_e(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++){let n=i.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;let o=i.charCodeAt(e);if(o===110||o===114||o===87)return!0}}return!1}function Xu(i,e,t){if(!t)return new lp(i,null);let n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return new lp(i,n)}var lk=class{constructor(e){let t=[],n=0;for(let o=0,r=e.length;o<r;o++)e.charCodeAt(o)===10&&(t[n++]=o);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,n=0,o=t.length-1;if(o===-1||e<=t[0])return 0;for(;n<o;){let r=n+((o-n)/2>>0);t[r]>=e?o=r-1:t[r+1]>=e?(n=r,o=r):n=r+1}return n+1}},uf=class{static findMatches(e,t,n,o,r){let s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new ph(s.wordSeparators,s.regex),o,r):this._doFindMatchesLineByLine(e,n,s,o,r):[]}static _getMultilineMatchRange(e,t,n,o,r,s){let a,l=0;o?(l=o.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(o){let u=o.findLineFeedCountBeforeOffset(r+s.length)-l;c=a+s.length+u}else c=a+s.length;let d=e.getPositionAt(a),h=e.getPositionAt(c);return new E(d.lineNumber,d.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,o,r){let s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new lk(a):null,c=[],d=0,h;for(n.reset(0);h=n.next(a);)if(c[d++]=Xu(this._getMultilineMatchRange(e,s,a,l,h.index,h[0]),h,o),d>=r)return c;return c}static _doFindMatchesLineByLine(e,t,n,o,r){let s=[],a=0;if(t.startLineNumber===t.endLineNumber){let c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,s,o,r),s}let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,s,o,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,s,o,r);if(a<r){let c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,s,o,r)}return s}static _findMatchesInLine(e,t,n,o,r,s,a,l){let c=e.wordSeparators;if(!a&&e.simpleSearch){let u=e.simpleSearch,g=u.length,p=t.length,f=-g;for(;(f=t.indexOf(u,f+g))!==-1;)if((!c||BY(c,t,p,f,g))&&(s[r++]=new lp(new E(n,f+1+o,n,f+1+g+o),null),r>=l))return r;return r}let d=new ph(e.wordSeparators,e.regex),h;d.reset(0);do if(h=d.next(t),h&&(s[r++]=Xu(new E(n,h.index+1+o,n,h.index+1+h[0].length+o),h,a),r>=l))return r;while(h);return r}static findNextMatch(e,t,n,o){let r=t.parseSearchRequest();if(!r)return null;let s=new ph(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,s,o):this._doFindNextMatchLineByLine(e,n,s,o)}static _doFindNextMatchMultiline(e,t,n,o){let r=new q(t.lineNumber,1),s=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new E(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new lk(l):null;n.reset(t.column-1);let d=n.next(l);return d?Xu(this._getMultilineMatchRange(e,s,l,c,d.index,d[0]),d,o):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new q(1,1),n,o):null}static _doFindNextMatchLineByLine(e,t,n,o){let r=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),l=this._findFirstMatchInLine(n,a,s,t.column,o);if(l)return l;for(let c=1;c<=r;c++){let d=(s+c-1)%r,h=e.getLineContent(d+1),u=this._findFirstMatchInLine(n,h,d+1,1,o);if(u)return u}return null}static _findFirstMatchInLine(e,t,n,o,r){e.reset(o-1);let s=e.next(t);return s?Xu(new E(n,s.index+1,n,s.index+1+s[0].length),s,r):null}static findPreviousMatch(e,t,n,o){let r=t.parseSearchRequest();if(!r)return null;let s=new ph(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,o):this._doFindPreviousMatchLineByLine(e,n,s,o)}static _doFindPreviousMatchMultiline(e,t,n,o){let r=this._doFindMatchesMultiline(e,new E(1,1,t.lineNumber,t.column),n,o,10*T_e);if(r.length>0)return r[r.length-1];let s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new q(s,e.getLineMaxColumn(s)),n,o):null}static _doFindPreviousMatchLineByLine(e,t,n,o){let r=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,s,o);if(l)return l;for(let c=1;c<=r;c++){let d=(r+s-c-1)%r,h=e.getLineContent(d+1),u=this._findLastMatchInLine(n,h,d+1,o);if(u)return u}return null}static _findLastMatchInLine(e,t,n,o){let r=null,s;for(e.reset(0);s=e.next(t);)r=Xu(new E(n,s.index+1,n,s.index+1+s[0].length),s,o);return r}};function N_e(i,e,t,n,o){if(n===0)return!0;let r=e.charCodeAt(n-1);if(i.get(r)!==0||r===13||r===10)return!0;if(o>0){let s=e.charCodeAt(n);if(i.get(s)!==0)return!0}return!1}function R_e(i,e,t,n,o){if(n+o===t)return!0;let r=e.charCodeAt(n+o);if(i.get(r)!==0||r===13||r===10)return!0;if(o>0){let s=e.charCodeAt(n+o-1);if(i.get(s)!==0)return!0}return!1}function BY(i,e,t,n,o){return N_e(i,e,t,n,o)&&R_e(i,e,t,n,o)}var ph=class{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;let o=n.index,r=n[0].length;if(o===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){DD(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=o,this._prevMatchLength=r,!this._wordSeparators||BY(this._wordSeparators,e,t,o,r))return n}while(n);return null}},bc=65535;function Dre(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}var x5=class{constructor(e,t,n,o,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=o,this.isBasicASCII=r}};function Nc(i,e=!0){let t=[0],n=1;for(let o=0,r=i.length;o<r;o++){let s=i.charCodeAt(o);s===13?o+1<r&&i.charCodeAt(o+1)===10?(t[n++]=o+2,o++):t[n++]=o+1:s===10&&(t[n++]=o+1)}return e?Dre(t):t}function F_e(i,e){i.length=0,i[0]=0;let t=1,n=0,o=0,r=0,s=!0;for(let l=0,c=e.length;l<c;l++){let d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,i[t++]=l+2,l++):(n++,i[t++]=l+1):d===10?(o++,i[t++]=l+1):s&&d!==9&&(d<32||d>126)&&(s=!1)}let a=new x5(Dre(i),n,o,r,s);return i.length=0,a}var $o=class{constructor(e,t,n,o,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=o,this.length=r}},Kc=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},k5=class{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Ge&&e.iterate(e.root,n=>(n!==Ge&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},E5=class{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let o=0;o<n.length;o++){let r=n[o];if(r.node.parent===null||r.nodeStartOffset>=e){n[o]=null,t=!0;continue}}if(t){let o=[];for(let r of n)r!==null&&o.push(r);this._cache=o}}},L5=class{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Kc("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Ge,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let o=null;for(let r=0,s=e.length;r<s;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=Nc(e[r].buffer));let a=new $o(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),o=this.rbInsertRight(o,a)}this._searchCache=new E5(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=bc,n=t-Math.floor(t/3),o=n*2,r="",s=0,a=[];if(this.iterate(this.root,l=>{let c=this.getNodeContent(l),d=c.length;if(s<=n||s+d<o)return r+=c,s+=d,!0;let h=r.replace(/\r\n|\r|\n/g,e);return a.push(new Kc(h,Nc(h))),r=c,s=d,!0}),s>0){let l=r.replace(/\r\n|\r|\n/g,e);a.push(new Kc(l,Nc(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new k5(this,e)}getOffsetAt(e,t){let n=0,o=this.root;for(;o!==Ge;)if(o.left!==Ge&&o.lf_left+1>=e)o=o.left;else if(o.lf_left+o.piece.lineFeedCnt+1>=e){n+=o.size_left;let r=this.getAccumulatedValue(o,e-o.lf_left-2);return n+=r+t-1}else e-=o.lf_left+o.piece.lineFeedCnt,n+=o.size_left+o.piece.length,o=o.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,o=e;for(;t!==Ge;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){let s=this.getOffsetAt(n+1,1),a=o-s;return new q(n+1,a+1)}return new q(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Ge){let r=this.getOffsetAt(n+1,1),s=o-e-r;return new q(n+1,s+1)}else t=t.right;return new q(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),o=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,o);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node,o=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=o.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==Ge;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(l,l+t.remainder);break}else s+=a.substr(l,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",o=!1;return this.iterate(this.root,r=>{if(r===Ge)return!0;let s=r.piece,a=s.length;if(a===0)return!0;let l=this._buffers[s.bufferIndex].buffer,c=this._buffers[s.bufferIndex].lineStarts,d=s.start.line,h=s.end.line,u=c[d]+s.start.column;if(o&&(l.charCodeAt(u)===10&&(u++,a--),e[t++]=n,n="",o=!1,a===0))return!0;if(d===h)return!this._EOLNormalized&&l.charCodeAt(u+a-1)===13?(o=!0,n+=l.substr(u,a-1)):n+=l.substr(u,a),!0;n+=this._EOLNormalized?l.substring(u,Math.max(u,c[d+1]-this._EOLLength)):l.substring(u,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let g=d+1;g<h;g++)n=this._EOLNormalized?l.substring(c[g],c[g+1]-this._EOLLength):l.substring(c[g],c[g+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[h]+s.end.column-1)===13?(o=!0,s.end.column===0?t--:n=l.substr(c[h],s.end.column-1)):n=l.substr(c[h],s.end.column),!0}),o&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],o=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(o)}else{let t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,o,r,s,a,l,c,d,h){let u=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,r),f=this.offsetInBuffer(e.piece.bufferIndex,s),v,b={line:0,column:0},A,w;t._wordSeparators?(A=u.buffer.substring(p,f),w=C=>C+p,t.reset(0)):(A=u.buffer,w=C=>C,t.reset(p));do if(v=t.next(A),v){if(w(v.index)>=f)return d;this.positionInBuffer(e,w(v.index)-g,b);let C=this.getLineFeedCnt(e.piece.bufferIndex,r,b),k=b.line===r.line?b.column-r.column+o:b.column+1,L=k+v[0].length;if(h[d++]=Xu(new E(n+C,k,n+C,L),v,l),w(v.index)+v[0].length>=f||d>=c)return d}while(v);return d}findMatchesLineByLine(e,t,n,o){let r=[],s=0,a=new ph(t.wordSeparators,t.regex),l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder),h=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,h,t,n,o,s,r),r;let u=e.startLineNumber,g=l.node;for(;g!==c.node;){let f=this.getLineFeedCnt(g.piece.bufferIndex,d,g.piece.end);if(f>=1){let b=this._buffers[g.piece.bufferIndex].lineStarts,A=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),w=b[d.line+f],C=u===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(g,a,u,C,d,this.positionInBuffer(g,w-A),t,n,o,s,r),s>=o)return r;u+=f}let v=u===e.startLineNumber?e.startColumn-1:0;if(u===e.endLineNumber){let b=this.getLineContent(u).substring(v,e.endColumn-1);return s=this._findMatchesInLine(t,a,b,e.endLineNumber,v,s,r,n,o),r}if(s=this._findMatchesInLine(t,a,this.getLineContent(u).substr(v),u,v,s,r,n,o),s>=o)return r;u++,l=this.nodeAt2(u,1),g=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(u===e.endLineNumber){let f=u===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(u).substring(f,e.endColumn-1);return s=this._findMatchesInLine(t,a,v,e.endLineNumber,f,s,r,n,o),r}let p=u===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(c.node,a,u,p,d,h,t,n,o,s,r),r}_findMatchesInLine(e,t,n,o,r,s,a,l,c){let d=e.wordSeparators;if(!l&&e.simpleSearch){let u=e.simpleSearch,g=u.length,p=n.length,f=-g;for(;(f=n.indexOf(u,f+g))!==-1;)if((!d||BY(d,n,p,f,g))&&(a[s++]=new lp(new E(o,f+1+r,o,f+1+g+r),null),s>=c))return s;return s}let h;t.reset(0);do if(h=t.next(n),h&&(a[s++]=Xu(new E(o,h.index+1+r,o,h.index+1+h[0].length+r),h,l),s>=c))return s;while(h);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Ge){let{node:o,remainder:r,nodeStartOffset:s}=this.nodeAt(e),a=o.piece,l=a.bufferIndex,c=this.positionInBuffer(o,r);if(o.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<bc){this.appendToNode(o,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,o),this._searchCache.validate(e);else if(s+o.piece.length>e){let d=[],h=new $o(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(o,r)===10){let p={line:h.start.line+1,column:0};h=new $o(h.bufferIndex,p,h.end,this.getLineFeedCnt(h.bufferIndex,p,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(o,r-1)===13){let p=this.positionInBuffer(o,r-1);this.deleteNodeTail(o,p),t="\r"+t,o.piece.length===0&&d.push(o)}else this.deleteNodeTail(o,c);else this.deleteNodeTail(o,c);let u=this.createNewPieces(t);h.length>0&&this.rbInsertRight(o,h);let g=o;for(let p=0;p<u.length;p++)g=this.rbInsertRight(g,u[p]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,o)}else{let o=this.createNewPieces(t),r=this.rbInsertLeft(null,o[0]);for(let s=1;s<o.length;s++)r=this.rbInsertRight(r,o[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Ge)return;let n=this.nodeAt(e),o=this.nodeAt(e+t),r=n.node,s=o.node;if(r===s){let u=this.positionInBuffer(r,n.remainder),g=this.positionInBuffer(r,o.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){let p=r.next();yy(this,r),this.validateCRLFWithPrevNode(p),this.computeBufferMetadata();return}this.deleteNodeHead(r,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,u),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,u,g),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);let c=this.positionInBuffer(s,o.remainder);this.deleteNodeHead(s,c),s.piece.length===0&&a.push(s);let d=r.next();for(let u=d;u!==Ge&&u!==s;u=u.next())a.push(u);let h=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},l=new $o(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=l,e+=`
`,Ec(this,t,-1,-1),t.piece.length===0&&n.push(t)}let o=this.createNewPieces(e),r=this.rbInsertLeft(t,o[o.length-1]);for(let s=o.length-2;s>=0;s--)r=this.rbInsertLeft(r,o[s]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),o=this.rbInsertRight(t,n[0]),r=o;for(let s=1;s<n.length;s++)r=this.rbInsertRight(r,n[s]);this.validateCRLFWithPrevNode(o)}positionInBuffer(e,t,n){let o=e.piece,r=e.piece.bufferIndex,s=this._buffers[r].lineStarts,a=s[o.start.line]+o.start.column+t,l=o.start.line,c=o.end.line,d=0,h=0,u=0;for(;l<=c&&(d=l+(c-l)/2|0,u=s[d],d!==c);)if(h=s[d+1],a<u)c=d-1;else if(a>=h)l=d+1;else break;return n?(n.line=d,n.column=a-u,null):{line:d,column:a-u}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let o=this._buffers[e].lineStarts;if(n.line===o.length-1)return n.line-t.line;let r=o[n.line+1],s=o[n.line]+n.column;if(r>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)yy(this,e[t])}createNewPieces(e){if(e.length>bc){let d=[];for(;e.length>bc;){let u=e.charCodeAt(bc-1),g;u===13||u>=55296&&u<=56319?(g=e.substring(0,bc-1),e=e.substring(bc-1)):(g=e.substring(0,bc),e=e.substring(bc));let p=Nc(g);d.push(new $o(this._buffers.length,{line:0,column:0},{line:p.length-1,column:g.length-p[p.length-1]},p.length-1,g.length)),this._buffers.push(new Kc(g,p))}let h=Nc(e);return d.push(new $o(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new Kc(e,h)),d}let t=this._buffers[0].buffer.length,n=Nc(e,!1),o=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},o=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}let r=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[s],l={line:s,column:a},c=new $o(0,o,l,this.getLineFeedCnt(0,o,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,o="",r=this._searchCache.get2(e);if(r){n=r.node;let s=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)o=a.substring(l+s,l+n.piece.length);else{let c=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+s,l+c-t)}}else{let s=0,a=e;for(;n!==Ge;)if(n.left!==Ge&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(h+l,h+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);o=c.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Ge;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=s.substring(l,l+a-t),o}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);o+=s.substr(a,n.piece.length)}n=n.next()}return o}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Ge;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,o=this.positionInBuffer(e,t),r=o.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,o);if(s!==r)return{index:s,remainder:0}}return{index:r,remainder:o.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,o=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?o[n.end.line]+n.end.column-o[n.start.line]-n.start.column:o[r]-o[n.start.line]-n.start.column}deleteNodeTail(e,t){let n=e.piece,o=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),l=this.getLineFeedCnt(n.bufferIndex,n.start,s),c=l-o,d=a-r,h=n.length+d;e.piece=new $o(n.bufferIndex,n.start,s,l,h),Ec(this,e,d,c)}deleteNodeHead(e,t){let n=e.piece,o=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),l=this.offsetInBuffer(n.bufferIndex,s),c=a-o,d=r-l,h=n.length+d;e.piece=new $o(n.bufferIndex,s,n.end,a,h),Ec(this,e,d,c)}shrinkNode(e,t,n){let o=e.piece,r=o.start,s=o.end,a=o.length,l=o.lineFeedCnt,c=t,d=this.getLineFeedCnt(o.bufferIndex,o.start,c),h=this.offsetInBuffer(o.bufferIndex,t)-this.offsetInBuffer(o.bufferIndex,r);e.piece=new $o(o.bufferIndex,o.start,c,d,h),Ec(this,e,h-a,d-l);let u=new $o(o.bufferIndex,n,s,this.getLineFeedCnt(o.bufferIndex,n,s),this.offsetInBuffer(o.bufferIndex,s)-this.offsetInBuffer(o.bufferIndex,n)),g=this.rbInsertRight(e,u);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),o=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let r=Nc(t,!1);for(let g=0;g<r.length;g++)r[g]+=o;if(n){let g=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:o-g}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));let s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],l={line:s,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),u=h-d;e.piece=new $o(e.piece.bufferIndex,e.piece.start,l,h,c),this._lastChangeBufferPos=l,Ec(this,e,t.length,u)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let o=0;for(;t!==Ge;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){o+=t.size_left;let r={node:t,remainder:e-t.size_left,nodeStartOffset:o};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,o+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,o=0;for(;n!==Ge;)if(n.left!==Ge&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return o+=n.size_left,{node:n,remainder:Math.min(r+t-1,s),nodeStartOffset:o}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:o};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Ge;){if(n.piece.lineFeedCnt>0){let r=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:s}}else if(n.piece.length>=t-1){let r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],o=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(o)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Ge||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,o=t.start.line,r=n[o]+t.start.column;return o===n.length-1||n[o+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Ge||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],o=this._buffers[e.piece.bufferIndex].lineStarts,r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:o[e.piece.end.line]-o[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};let s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new $o(e.piece.bufferIndex,e.piece.start,r,a,s),Ec(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new $o(t.piece.bufferIndex,l,t.piece.end,d,c),Ec(this,t,-1,-1),t.piece.length===0&&n.push(t);let h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let u=0;u<n.length;u++)yy(this,n[u])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)yy(this,n);else{let o=n.piece,r={line:o.start.line+1,column:0},s=o.length-1,a=this.getLineFeedCnt(o.bufferIndex,r,o.end);n.piece=new $o(o.bufferIndex,r,o.end,a,s),Ec(this,n,-1,-1)}return!0}}return!1}iterate(e,t){return e===Ge?t(Ge):this.iterate(e.left,t)&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Ge)return"";let t=this._buffers[e.piece.bufferIndex],n=e.piece,o=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(o,r)}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),o=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,o)}rbInsertRight(e,t){let n=new Ab(t,1);if(n.left=Ge,n.right=Ge,n.parent=Ge,n.size_left=0,n.lf_left=0,this.root===Ge)this.root=n,n.color=0;else if(e.right===Ge)e.right=n,n.parent=e;else{let o=NY(e.right);o.left=n,n.parent=o}return OZ(this,n),n}rbInsertLeft(e,t){let n=new Ab(t,1);if(n.left=Ge,n.right=Ge,n.parent=Ge,n.size_left=0,n.lf_left=0,this.root===Ge)this.root=n,n.color=0;else if(e.left===Ge)e.left=n,n.parent=e;else{let o=Sre(e.left);o.right=n,n.parent=o}return OZ(this,n),n}},ck=class i extends J{constructor(e,t,n,o,r,s,a){super(),this._onDidChangeContent=this._register(new Q),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=o,this._mightContainUnusualLineTerminators=r,this._pieceTree=new L5(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t,o=this.getPositionAt(e),r=this.getPositionAt(n);return new E(o.lineNumber,o.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";let n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0,o=e.startLineNumber,r=e.endLineNumber;for(let s=o;s<=r;s++){let a=this.getLineContent(s),l=s===o?e.startColumn-1:0,c=s===r?e.endColumn-1:a.length;for(let d=l;d<c;d++)En(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-o),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){let t=rr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=Ol(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let o=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,l=[];for(let f=0;f<e.length;f++){let v=e[f];a&&v._isTracked&&(a=!1);let b=v.range;if(v.text){let L=!0;s||(L=!CM(v.text),s=L),!o&&L&&(o=y_(v.text)),!r&&L&&(r=soe(v.text))}let A="",w=0,C=0,k=0;if(v.text){let L;[w,C,k,L]=dp(v.text);let S=this.getEOL();L===0||L===(S===`\r
`?2:1)?A=v.text:A=v.text.replace(/\r\n|\r|\n/g,S)}l[f]={sortIndex:f,identifier:v.identifier||null,range:b,rangeOffset:this.getOffsetAt(b.startLineNumber,b.startColumn),rangeLength:this.getValueLengthInRange(b),text:A,eolCount:w,firstLineLength:C,lastLineLength:k,forceMoveMarkers:!!v.forceMoveMarkers,isAutoWhitespaceEdit:v.isAutoWhitespaceEdit||!1}}l.sort(i._sortOpsAscending);let c=!1;for(let f=0,v=l.length-1;f<v;f++){let b=l[f].range.getEndPosition(),A=l[f+1].range.getStartPosition();if(A.isBeforeOrEqual(b)){if(A.isBefore(b))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));let d=n||t?i._getInverseEditRanges(l):[],h=[];if(t)for(let f=0;f<l.length;f++){let v=l[f],b=d[f];if(v.isAutoWhitespaceEdit&&v.range.isEmpty())for(let A=b.startLineNumber;A<=b.endLineNumber;A++){let w="";A===b.startLineNumber&&(w=this.getLineContent(v.range.startLineNumber),rr(w)!==-1)||h.push({lineNumber:A,oldContent:w})}}let u=null;if(n){let f=0;u=[];for(let v=0;v<l.length;v++){let b=l[v],A=d[v],w=this.getValueInRange(b.range),C=b.rangeOffset+f;f+=b.text.length-w.length,u[v]={sortIndex:b.sortIndex,identifier:b.identifier,range:A,text:w,textChange:new Zs(b.rangeOffset,w,C,b.text)}}c||u.sort((v,b)=>v.sortIndex-b.sortIndex)}this._mightContainRTL=o,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=s;let g=this._doApplyEdits(l),p=null;if(t&&h.length>0){h.sort((f,v)=>v.lineNumber-f.lineNumber),p=[];for(let f=0,v=h.length;f<v;f++){let b=h[f].lineNumber;if(f>0&&h[f-1].lineNumber===b)continue;let A=h[f].oldContent,w=this.getLineContent(b);w.length===0||w===A||rr(w)!==-1||p.push(b)}}return this._onDidChangeContent.fire(),new nO(u,g,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,n=e[0].range,o=e[e.length-1].range,r=new E(n.startLineNumber,n.startColumn,o.endLineNumber,o.endColumn),s=n.startLineNumber,a=n.startColumn,l=[];for(let g=0,p=e.length;g<p;g++){let f=e[g],v=f.range;t=t||f.forceMoveMarkers,l.push(this.getValueInRange(new E(s,a,v.startLineNumber,v.startColumn))),f.text.length>0&&l.push(f.text),s=v.endLineNumber,a=v.endColumn}let c=l.join(""),[d,h,u]=dp(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:d,firstLineLength:h,lastLineLength:u,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(i._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let o=e[n],r=o.range.startLineNumber,s=o.range.startColumn,a=o.range.endLineNumber,l=o.range.endColumn;if(r===a&&s===l&&o.text.length===0)continue;o.text?(this._pieceTree.delete(o.rangeOffset,o.rangeLength),this._pieceTree.insert(o.rangeOffset,o.text,!0)):this._pieceTree.delete(o.rangeOffset,o.rangeLength);let c=new E(r,s,a,l);t.push({range:c,rangeLength:o.rangeLength,text:o.text,rangeOffset:o.rangeOffset,forceMoveMarkers:o.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,o){return this._pieceTree.findMatchesLineByLine(e,t,n,o)}static _getInverseEditRanges(e){let t=[],n=0,o=0,r=null;for(let s=0,a=e.length;s<a;s++){let l=e[s],c,d;r?r.range.endLineNumber===l.range.startLineNumber?(c=n,d=o+(l.range.startColumn-r.range.endColumn)):(c=n+(l.range.startLineNumber-r.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let h;if(l.text.length>0){let u=l.eolCount+1;u===1?h=new E(c,d,c,d+l.firstLineLength):h=new E(c,d,c+u-1,l.lastLineLength+1)}else h=new E(c,d,c,d);n=h.endLineNumber,o=h.endColumn,t.push(h),r=l}return t}static _sortOpsAscending(e,t){let n=E.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=E.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}},I5=class{constructor(e,t,n,o,r,s,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=o,this._crlf=r,this._containsRTL=s,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){let t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,s=n.length;r<s;r++){let a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=Nc(a);n[r]=new Kc(a,l)}let o=new ck(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:o,disposable:o}}},dk=class{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&aY(e)&&(this.BOM=Que,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=F_e(this._tmpLineStarts,e);this.chunks.push(new Kc(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=y_(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=soe(e))}finish(e=!0){return this._finish(),new I5(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=Nc(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}},No=class i{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){let n=i.defaultTokenMetadata,o=new Uint32Array(2);return o[0]=e.length,o[1]=n,new i(o,e,t)}equals(e){return e instanceof i?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let o=t<<1,r=o+(n<<1);for(let s=o;s<r;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],n=Qn.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return Qn.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return Qn.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return Qn.getClassNameFromMetadata(t)}getInlineStyle(e,t){let n=this._tokens[(e<<1)+1];return Qn.getInlineStyleFromMetadata(n,t)}getPresentation(e){let t=this._tokens[(e<<1)+1];return Qn.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return i.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new T5(this,e,t,n)}static convertToEndOffset(e,t){let n=(e.length>>>1)-1;for(let o=0;o<n;o++)e[o<<1]=e[o+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,o=(e.length>>>1)-1;for(;n<o;){let r=n+Math.floor((o-n)/2),s=e[r<<1];if(s===t)return r+1;s<t?n=r+1:s>t&&(o=r)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,o="",r=new Array,s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){o+=this._text.substring(s,a);let c=this._tokens[(t<<1)+1];r.push(o.length,c),t++,s=a}else if(l){if(l.offset>s){o+=this._text.substring(s,l.offset);let c=this._tokens[(t<<1)+1];r.push(o.length,c),s=l.offset}o+=l.text,r.push(o.length,l.tokenMetadata),n++}else break}return new i(new Uint32Array(r),o,this._languageIdCodec)}};No.defaultTokenMetadata=(32768|2<<24)>>>0;var T5=class i{constructor(e,t,n,o){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=o,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let r=this._firstTokenIndex,s=e.getCount();r<s&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof i?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}},U_=new class{clone(){return this}equals(i){return this===i}};function PY(i,e){return new tb([new eb(0,"",i)],e)}function jM(i,e){let t=new Uint32Array(2);return t[0]=0,t[1]=(i<<0|0|0|32768|2<<24)>>>0,new H_(t,e===null?U_:e)}var M5=class{constructor(e,t){this._startLineNumber=e,this._tokens=t}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}},F1=class{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new M5(e,[t]))}finalize(){return this._tokens}},hk=class{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;let n=[];for(let o=0;o<t;o++)n[o]=this._default;this._store=LM(this._store,e,n)}},N5=class{constructor(e,t){this.tokenizationSupport=e,this.initialState=t,this._lineBeginState=new hk(null),this._lineNeedsTokenization=new hk(!0),this._firstLineNeedsTokenization=0,this._lineBeginState.set(0,this.initialState)}get invalidLineStartIndex(){return this._firstLineNeedsTokenization}markMustBeTokenized(e){this._lineNeedsTokenization.set(e,!0),this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,e)}getBeginState(e){return this._lineBeginState.get(e)}setEndState(e,t,n){if(this._lineNeedsTokenization.set(t,!1),this._firstLineNeedsTokenization=t+1,t===e-1)return;let o=this._lineBeginState.get(t+1);if(o===null||!n.equals(o)){this._lineBeginState.set(t+1,n),this.markMustBeTokenized(t+1);return}let r=t+1;for(;r<e&&!this._lineNeedsTokenization.get(r);)r++;this._firstLineNeedsTokenization=r}applyEdits(e,t){this.markMustBeTokenized(e.startLineNumber-1),this._lineBeginState.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineNeedsTokenization.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineBeginState.insert(e.startLineNumber,t),this._lineNeedsTokenization.insert(e.startLineNumber,t)}},R5=class extends J{constructor(e,t,n){super(),this._textModel=e,this._tokenizationPart=t,this._languageIdCodec=n,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=null,this._register(Ui.onDidChange(o=>{let r=this._textModel.getLanguageId();o.changedLanguages.indexOf(r)!==-1&&(this._resetTokenizationState(),this._tokenizationPart.clearTokens())})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}handleDidChangeContent(e){if(e.isFlush){this._resetTokenizationState();return}if(this._tokenizationStateStore)for(let t=0,n=e.changes.length;t<n;t++){let o=e.changes[t],[r]=dp(o.text);this._tokenizationStateStore.applyEdits(o.range,r)}this._beginBackgroundTokenization()}handleDidChangeAttached(){this._beginBackgroundTokenization()}handleDidChangeLanguage(e){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}_resetTokenizationState(){let[e,t]=B_e(this._textModel,this._tokenizationPart);e&&t?this._tokenizationStateStore=new N5(e,t):this._tokenizationStateStore=null,this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,R_(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Dne(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){let e=this._textModel.getLineCount(),t=new F1,n=sr.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._tokenizationPart.setTokens(t.finalize(),this._isTokenizationComplete())}tokenizeViewport(e,t){let n=new F1;this._tokenizeViewport(n,e,t),this._tokenizationPart.setTokens(n.finalize(),this._isTokenizationComplete())}reset(){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}forceTokenization(e){let t=new F1;this._updateTokensUntilLine(t,e),this._tokenizationPart.setTokens(t.finalize(),this._isTokenizationComplete())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationStateStore)return 0;this.forceTokenization(e.lineNumber);let n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;let o=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),s=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=bv(this._languageIdCodec,o,this._tokenizationStateStore.tokenizationSupport,s,!0,n),l=new No(a.tokens,s,this._languageIdCodec);if(l.getCount()===0)return 0;let c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,n){let o=e.lineNumber,r=e.column;if(!this._tokenizationStateStore)return null;this.forceTokenization(o);let s=this._tokenizationStateStore.getBeginState(o-1);if(!s)return null;let a=this._textModel.getLineContent(o),l=a.substring(0,r-1)+n+a.substring(r-1+t),c=this._textModel.getLanguageIdAtPosition(o,0),d=bv(this._languageIdCodec,c,this._tokenizationStateStore.tokenizationSupport,l,!0,s);return new No(d.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){if(!this._tokenizationStateStore)return!0;let t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_isTokenizationComplete(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex>=this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._tokenizationStateStore||!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;let t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationStateStore)return;let n=this._textModel.getLanguageId(),o=this._textModel.getLineCount(),r=t-1;for(let s=this._tokenizationStateStore.invalidLineStartIndex;s<=r;s++){let a=this._textModel.getLineContent(s+1),l=this._tokenizationStateStore.getBeginState(s),c=bv(this._languageIdCodec,n,this._tokenizationStateStore.tokenizationSupport,a,!0,l);e.add(s+1,c.tokens),this._tokenizationStateStore.setEndState(o,s,c.endState),s=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationStateStore||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let o=this._textModel.getLineFirstNonWhitespaceColumn(t),r=[],s=null;for(let c=t-1;o>1&&c>=1;c--){let d=this._textModel.getLineFirstNonWhitespaceColumn(c);if(d!==0&&d<o&&(r.push(this._textModel.getLineContent(c)),o=d,s=this._tokenizationStateStore.getBeginState(c-1),s))break}s||(s=this._tokenizationStateStore.initialState);let a=this._textModel.getLanguageId(),l=s;for(let c=r.length-1;c>=0;c--)l=bv(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,r[c],!1,l).endState;for(let c=t;c<=n;c++){let d=this._textModel.getLineContent(c),h=bv(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,d,!0,l);e.add(c,h.tokens),this._tokenizationStateStore.markMustBeTokenized(c-1),l=h.endState}}};function B_e(i,e){if(i.isTooLargeForTokenization())return[null,null];let t=Ui.get(e.getLanguageId());if(!t)return[null,null];let n;try{n=t.getInitialState()}catch(o){return Ye(o),[null,null]}return[t,n]}function bv(i,e,t,n,o,r){let s=null;if(t)try{s=t.tokenizeEncoded(n,o,r.clone())}catch(a){Ye(a)}return s||(s=jM(i.encodeLanguageId(e),r)),No.convertToEndOffset(s.tokens,n.length),s}var Rc=new Uint32Array(0).buffer,Fc=class i{static deleteBeginning(e,t){return e===null||e===Rc?e:i.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Rc)return e;let n=qc(e),o=n[n.length-2];return i.delete(e,t,o)}static delete(e,t,n){if(e===null||e===Rc||t===n)return e;let o=qc(e),r=o.length>>>1;if(t===0&&o[o.length-2]===n)return Rc;let s=No.findIndexInTokensArray(o,t),a=s>0?o[s-1<<1]:0,l=o[s<<1];if(n<l){let g=n-t;for(let p=s;p<r;p++)o[p<<1]-=g;return e}let c,d;a!==t?(o[s<<1]=t,c=s+1<<1,d=t):(c=s<<1,d=a);let h=n-t;for(let g=s+1;g<r;g++){let p=o[g<<1]-h;p>d&&(o[c++]=p,o[c++]=o[(g<<1)+1],d=p)}if(c===o.length)return e;let u=new Uint32Array(c);return u.set(o.subarray(0,c),0),u.buffer}static append(e,t){if(t===Rc)return e;if(e===Rc)return t;if(e===null)return e;if(t===null)return null;let n=qc(e),o=qc(t),r=o.length>>>1,s=new Uint32Array(n.length+o.length);s.set(n,0);let a=n.length,l=n[n.length-2];for(let c=0;c<r;c++)s[a++]=o[c<<1]+l,s[a++]=o[(c<<1)+1];return s.buffer}static insert(e,t,n){if(e===null||e===Rc)return e;let o=qc(e),r=o.length>>>1,s=No.findIndexInTokensArray(o,t);s>0&&o[s-1<<1]===t&&s--;for(let a=s;a<r;a++)o[a<<1]+=n;return e}};function qc(i){return i instanceof Uint32Array?i:new Uint32Array(i)}var F5=class i{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let o=null;if(t<this._len&&(o=this._lineTokens[t]),o!==null&&o!==Rc)return new No(qc(o),n,this._languageIdCodec);let r=new Uint32Array(2);return r[0]=n.length,r[1]=HZ(this._languageIdCodec.encodeLanguageId(e)),new No(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){let o=n?qc(n):null;if(t===0){let r=!1;if(o&&o.length>1&&(r=Qn.getLanguageId(o[1])!==e),!r)return Rc}if(!o||o.length===0){let r=new Uint32Array(2);return r[0]=t,r[1]=HZ(e),r.buffer}return o[o.length-2]=t,o.byteOffset===0&&o.byteLength===o.buffer.byteLength?o.buffer:o}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let o=0;o<t;o++)n[o]=null;this._lineTokens=LM(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,o,r){let s=i._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,o);this._ensureLine(t);let a=this._lineTokens[t];return this._lineTokens[t]=s,r?!i._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let n=qc(e),o=qc(t);if(n.length!==o.length)return!1;for(let r=0,s=n.length;r<s;r++)if(n[r]!==o[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new q(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Fc.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Fc.deleteEnding(this._lineTokens[t],e.startColumn-1);let n=e.endLineNumber-1,o=null;n<this._len&&(o=Fc.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Fc.append(this._lineTokens[t],o),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let o=e.lineNumber-1;if(!(o>=this._len)){if(t===0){this._lineTokens[o]=Fc.insert(this._lineTokens[o],e.column-1,n);return}this._lineTokens[o]=Fc.deleteEnding(this._lineTokens[o],e.column-1),this._lineTokens[o]=Fc.insert(this._lineTokens[o],e.column-1,n),this._insertLines(e.lineNumber,t)}}};function HZ(i){return(i<<0|0|0|32768|2<<24|1024)>>>0}var B5=class i{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){let r=t[0].getRange(),s=t[t.length-1].getRange();if(!r||!s)return e;n=e.plusRange(r).plusRange(s)}let o=null;for(let r=0,s=this._pieces.length;r<s;r++){let a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){o=o||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){o=o||{index:r};continue}let[l,c]=a.split(n);if(l.isEmpty()){o=o||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,s++,o=o||{index:r})}return o=o||{index:this._pieces.length},t.length>0&&(this._pieces=LM(this._pieces,o.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;let n=this._pieces;if(n.length===0)return t;let o=i._findFirstPieceWithLine(n,e),r=n[o].getLineTokens(e);if(!r)return t;let s=t.getCount(),a=r.getCount(),l=0,c=[],d=0,h=0,u=(g,p)=>{g!==h&&(h=g,c[d++]=g,c[d++]=p)};for(let g=0;g<a;g++){let p=r.getStartCharacter(g),f=r.getEndCharacter(g),v=r.getMetadata(g),b=((v&1?2048:0)|(v&2?4096:0)|(v&4?8192:0)|(v&8?16384:0)|(v&16?16744448:0)|(v&32?4278190080:0))>>>0,A=~b>>>0;for(;l<s&&t.getEndOffset(l)<=p;)u(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<s&&t.getStartOffset(l)<p&&u(p,t.getMetadata(l));l<s&&t.getEndOffset(l)<f;)u(t.getEndOffset(l),t.getMetadata(l)&A|v&b),l++;if(l<s)u(f,t.getMetadata(l)&A|v&b),t.getEndOffset(l)===f&&l++;else{let w=Math.min(Math.max(0,l-1),s-1);u(f,t.getMetadata(w)&A|v&b)}}for(;l<s;)u(t.getEndOffset(l),t.getMetadata(l)),l++;return new No(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,o=e.length-1;for(;n<o;){let r=n+Math.floor((o-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)o=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,o,r){for(let s of this._pieces)s.acceptEdit(e,t,n,o,r)}},P5=class i extends Ex{constructor(e,t,n,o,r){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=n,this.bracketPairsTextModelPart=o,this._languageId=r,this._onDidChangeLanguage=this._register(new Q),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Q),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Q),this.onDidChangeTokens=this._onDidChangeTokens.event,this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new Q),this._tokens=new F5(this._languageService.languageIdCodec),this._semanticTokens=new B5(this._languageService.languageIdCodec),this._tokenization=new R5(n,this,this._languageService.languageIdCodec),this._languageRegistryListener=this._languageConfigurationService.onDidChange(s=>{s.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})}acceptEdit(e,t,n,o,r){this._tokens.acceptEdit(e,n,o),this._semanticTokens.acceptEdit(e,n,o,r,t.length>0?t.charCodeAt(0):0)}handleDidChangeAttached(){this._tokenization.handleDidChangeAttached()}flush(){this._tokens.flush(),this._semanticTokens.flush()}handleDidChangeContent(e){this._tokenization.handleDidChangeContent(e)}dispose(){this._languageRegistryListener.dispose(),this._tokenization.dispose(),super.dispose()}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;let t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this.bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState(),this._onBackgroundTokenizationStateChanged.fire())}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let o=0,r=e.length;o<r;o++){let s=e[o],a=0,l=0,c=!1;for(let d=s.startLineNumber;d<=s.endLineNumber;d++)c?(this._tokens.setTokens(this._languageId,d-1,this._textModel.getLineLength(d),s.getLineTokens(d),!1),l=d):this._tokens.setTokens(this._languageId,d-1,this._textModel.getLineLength(d),s.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;let n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._textModel.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this.bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){let t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._semanticTokens.addSparseTokens(e,n)}getTokenTypeIfInsertingCharacter(e,t,n){let o=this._textModel.validatePosition(new q(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(o,n)}tokenizeLineWithEdit(e,t,n){let o=this._textModel.validatePosition(e);return this._tokenization.tokenizeLineWithEdit(o,t,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this.assertNotDisposed();let t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),o=this._getLineTokens(t.lineNumber),r=o.findTokenIndexAtOffset(t.column-1),[s,a]=i._findLanguageBoundaries(o,r),l=L_(t.column,this.getLanguageConfiguration(o.getLanguageId(r)).getWordDefinition(),n.substring(s,a),s);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&s===t.column-1){let[c,d]=i._findLanguageBoundaries(o,r-1),h=L_(t.column,this.getLanguageConfiguration(o.getLanguageId(r-1)).getWordDefinition(),n.substring(c,d),c);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}static _findLanguageBoundaries(e,t){let n=e.getLanguageId(t),o=0;for(let s=t;s>=0&&e.getLanguageId(s)===n;s--)o=e.getStartOffset(s);let r=e.getLineContent().length;for(let s=t,a=e.getCount();s<a&&e.getLanguageId(s)===n;s++)r=e.getEndOffset(s);return[o,r]}getWordUntilPosition(e){let t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){let n=this._textModel.validatePosition(new q(e,t)),o=this.getLineTokens(n.lineNumber);return o.getLanguageId(o.findTokenIndexAtOffset(n.column-1))}setLanguageId(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this.bracketPairsTextModelPart.handleDidChangeLanguage(t),this._tokenization.handleDidChangeLanguage(t),this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}},KM=ze("undoRedoService"),uk=class{constructor(e,t){this.resource=e,this.elements=t}},Q_=class i{constructor(){this.id=i._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Q_._ID=0;Q_.None=new Q_;var Ll=class i{constructor(){this.id=i._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Ll._ID=0;Ll.None=new Ll;var P_e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Y2=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function O_e(i){let e=new dk;return e.acceptChunk(i),e.finish()}function H_e(i){let e=new dk,t;for(;typeof(t=i.read())=="string";)e.acceptChunk(t);return e.finish()}function WZ(i,e){let t;return typeof i=="string"?t=O_e(i):$fe(i)?t=H_e(i):t=i,t.create(e)}var Sy=0,W_e=999,z_e=1e4,O5=class{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let o=this._source.read();if(o===null)return this._eos=!0,t===0?null:e.join("");if(o.length>0&&(e[t++]=o,n+=o.length),n>=64*1024)return e.join("")}while(!0)}},wv=()=>{throw new Error("Invalid change accessor")},Sd=class c1 extends J{constructor(e,t,n,o=null,r,s,a){super(),this._undoRedoService=r,this._languageService=s,this._languageConfigurationService=a,this._onWillDispose=this._register(new Q),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new z5(u=>this.handleBeforeFireDecorationsChangedEvent(u))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new Q),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new Q),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new Q),this._eventEmitter=this._register(new V5),this._deltaDecorationCallCnt=0,Sy++,this.id="$model"+Sy,this.isForSimpleWidget=n.isForSimpleWidget,typeof o>"u"||o===null?this._associatedResource=$.parse("inmemory://model/"+Sy):this._associatedResource=o,this._attachedEditorCount=0;let{textBuffer:l,disposable:c}=WZ(e,n.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=c1.resolveOptions(this._buffer,n),this._bracketPairs=this._register(new v5(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new K4(this,this._languageConfigurationService)),this._decorationProvider=this._register(new A5(this)),this._tokenizationTextModelPart=new P5(this._languageService,this._languageConfigurationService,this,this._bracketPairs,t);let d=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new E(1,1,d,this._buffer.getLineLength(d)+1),0);n.largeFileOptimizations?this._isTooLargeForTokenization=h>c1.LARGE_FILE_SIZE_THRESHOLD||d>c1.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=h>c1.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=aoe(Sy),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new gk,this._commandManager=new S5(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){let n=MZ(e,t.tabSize,t.insertSpaces);return new Kf({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Kf({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return ss(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let e=new ck([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=J.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Gf(e,t)))}setValue(e){if(this._assertNotDisposed(),e===null)return;let{textBuffer:t,disposable:n}=WZ(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,o,r,s,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:o}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:r,isRedoing:s,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();let n=this.getFullModelRange(),o=this.getValueLengthInRange(n),r=this.getLineCount(),s=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokenizationTextModelPart.flush(),this._decorations=Object.create(null),this._decorationsTree=new gk,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new $f([new yO],this._versionId,!1,!1),this._createContentChanged2(new E(1,1,r,s),0,o,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();let t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;let n=this.getFullModelRange(),o=this.getValueLengthInRange(n),r=this.getLineCount(),s=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new $f([new xO],this._versionId,!1,!1),this._createContentChanged2(new E(1,1,r,s),0,o,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,o=t.length;n<o;n++){let r=t[n],s=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),c=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,Xh(r)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0,n=this._buffer.getLineCount();for(let o=1;o<=n;o++){let r=this._buffer.getLineLength(o);r>=z_e?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,o=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,s=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new Kf({tabSize:t,indentSize:n,insertSpaces:o,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:s});if(this._options.equals(a))return;let l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let n=MZ(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),PD(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){let t=this.findMatches(roe.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();let n=this.getFullModelRange(),o=this.getValueInRange(n,e);return t?this._buffer.getBOM()+o:o}createSnapshot(e=!1){return new O5(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();let n=this.getFullModelRange(),o=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+o:o}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){let t=this._buffer.getLineCount(),n=e.startLineNumber,o=e.startColumn,r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),s=Math.floor(typeof o=="number"&&!isNaN(o)?o:1);if(r<1)r=1,s=1;else if(r>t)r=t,s=this.getLineMaxColumn(r);else if(s<=1)s=1;else{let h=this.getLineMaxColumn(r);s>=h&&(s=h)}let a=e.endLineNumber,l=e.endColumn,c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{let h=this.getLineMaxColumn(c);d>=h&&(d=h)}return n===r&&o===s&&a===c&&l===d&&e instanceof E&&!(e instanceof Se)?e:new E(r,s,c,d)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;let o=this._buffer.getLineCount();if(e>o)return!1;if(t===1)return!0;let r=this.getLineMaxColumn(e);if(t>r)return!1;if(n===1){let s=this._buffer.getLineCharCode(e,t-2);if(En(s))return!1}return!0}_validatePosition(e,t,n){let o=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=this._buffer.getLineCount();if(o<1)return new q(1,1);if(o>s)return new q(s,this.getLineMaxColumn(s));if(r<=1)return new q(o,1);let a=this.getLineMaxColumn(o);if(r>=a)return new q(o,a);if(n===1){let l=this._buffer.getLineCharCode(o,r-2);if(En(l))return new q(o,r-1)}return new q(o,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof q&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){let n=e.startLineNumber,o=e.startColumn,r=e.endLineNumber,s=e.endColumn;if(!this._isValidPosition(n,o,0)||!this._isValidPosition(r,s,0))return!1;if(t===1){let a=o>1?this._buffer.getLineCharCode(n,o-2):0,l=s>1&&s<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,s-2):0,c=En(a),d=En(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof E&&!(e instanceof Se)&&this._isValidRange(e,1))return e;let t=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),o=t.lineNumber,r=t.column,s=n.lineNumber,a=n.column;{let l=r>1?this._buffer.getLineCharCode(o,r-2):0,c=a>1&&a<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,a-2):0,d=En(l),h=En(c);return!d&&!h?new E(o,r,s,a):o===s&&r===a?new E(o,r-1,s,a-1):d&&h?new E(o,r-1,s,a+1):d?new E(o,r-1,s,a):new E(o,r,s,a+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();let e=this.getLineCount();return new E(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,o){return this._buffer.findMatchesLineByLine(e,t,n,o)}findMatches(e,t,n,o,r,s,a=W_e){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>E.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,u)=>h.startLineNumber-u.startLineNumber||h.startColumn-u.startColumn);let c=[];c.push(l.reduce((h,u)=>E.areIntersecting(h,u)?h.plusRange(u):(c.push(h),u)));let d;if(!n&&e.indexOf(`
`)<0){let h=new Wc(e,n,o,r).parseSearchRequest();if(!h)return[];d=u=>this.findMatchesLineByLine(u,h,s,a)}else d=h=>uf.findMatches(this,new Wc(e,n,o,r),h,s,a);return c.map(d).reduce((h,u)=>h.concat(u),[])}findNextMatch(e,t,n,o,r,s){this._assertNotDisposed();let a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){let l=new Wc(e,n,o,r).parseSearchRequest();if(!l)return null;let c=this.getLineCount(),d=new E(a.lineNumber,a.column,c,this.getLineMaxColumn(c)),h=this.findMatchesLineByLine(d,l,s,1);return uf.findNextMatch(this,new Wc(e,n,o,r),a,s),h.length>0||(d=new E(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(d,l,s,1),h.length>0)?h[0]:null}return uf.findNextMatch(this,new Wc(e,n,o,r),a,s)}findPreviousMatch(e,t,n,o,r,s){this._assertNotDisposed();let a=this.validatePosition(t);return uf.findPreviousMatch(this,new Wc(e,n,o,r),a,s)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof E1?e:new E1(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){let t=[];for(let n=0,o=e.length;n<o;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let o=t.map(s=>({range:this.validateRange(s.range),text:s.text})),r=!0;if(e)for(let s=0,a=e.length;s<a;s++){let l=e[s],c=!1;for(let d=0,h=o.length;d<h;d++){let u=o[d].range,g=u.startLineNumber>l.endLineNumber,p=l.startLineNumber>u.endLineNumber;if(!g&&!p){c=!0;break}}if(!c){r=!1;break}}if(r)for(let s=0,a=this._trimAutoWhitespaceLines.length;s<a;s++){let l=this._trimAutoWhitespaceLines[s],c=this.getLineMaxColumn(l),d=!0;for(let h=0,u=o.length;h<u;h++){let g=o[h].range,p=o[h].text;if(!(l<g.startLineNumber||l>g.endLineNumber)&&!(l===g.startLineNumber&&g.startColumn===c&&g.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(l===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){d=!1;break}}if(d){let h=new E(l,1,l,c);t.push(new E1(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,o){let r=e.map(s=>{let a=this.getPositionAt(s.newPosition),l=this.getPositionAt(s.newEnd);return{range:new E(a.lineNumber,a.column,l.lineNumber,l.column),text:s.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,n,o)}_applyRedo(e,t,n,o){let r=e.map(s=>{let a=this.getPositionAt(s.oldPosition),l=this.getPositionAt(s.oldEnd);return{range:new E(a.lineNumber,a.column,l.lineNumber,l.column),text:s.newText}});this._applyUndoRedoEdits(r,t,!1,!0,n,o)}_applyUndoRedoEdits(e,t,n,o,r,s){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=o,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(s),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){let n=this._buffer.getLineCount(),o=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),s=o.changes;if(this._trimAutoWhitespaceLines=o.trimAutoWhitespaceLineNumbers,s.length!==0){for(let c=0,d=s.length;c<d;c++){let h=s[c],[u,g,p]=dp(h.text);this._tokenizationTextModelPart.acceptEdit(h.range,h.text,u,g,p),this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=n;for(let c=0,d=s.length;c<d;c++){let h=s[c],[u]=dp(h.text);this._onDidChangeDecorations.fire();let g=h.range.startLineNumber,p=h.range.endLineNumber,f=p-g,v=u,b=Math.min(f,v),A=v-f,w=r-l-A+g,C=w,k=w+v,L=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new q(C,1)),this.getOffsetAt(new q(k,this.getLineMaxColumn(k))),0),S=ec.fromDecorations(L),y=new tp(S);for(let M=b;M>=0;M--){let O=g+M,H=w+M;y.takeFromEndWhile(K=>K.lineNumber>H);let D=y.takeFromEndWhile(K=>K.lineNumber===H);a.push(new Kx(O,this.getLineContent(H),D))}if(b<f){let M=g+b;a.push(new SO(M+1,p))}if(b<v){let M=new tp(S),O=g+b,H=v-b,D=r-l-H+O+1,K=[],oe=[];for(let ie=0;ie<H;ie++){let ce=D+ie;oe[ie]=this.getLineContent(ce),M.takeWhile(se=>se.lineNumber<ce),K[ie]=M.takeWhile(se=>se.lineNumber===ce)}a.push(new DO(O+1,g+v,oe,K))}l+=A}this._emitContentChangedEvent(new $f(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return o.reverseEdits===null?void 0:o.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;let t=Array.from(e).map(n=>new Kx(n,this.getLineContent(n),this._getInjectedTextInLine(n)));this._onDidChangeInjectedText.fire(new qx(t))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(r,s)=>this._deltaDecorationsImpl(e,[],[{range:r,options:s}])[0],changeDecoration:(r,s)=>{this._changeDecorationImpl(r,s)},changeDecorationOptions:(r,s)=>{this._changeDecorationOptionsImpl(r,VZ(s))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,s)=>r.length===0&&s.length===0?[]:this._deltaDecorationsImpl(e,r,s)},o=null;try{o=t(n)}catch(r){Ye(r)}return n.addDecoration=wv,n.changeDecoration=wv,n.changeDecorationOptions=wv,n.removeDecoration=wv,n.deltaDecorations=wv,o}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Ye(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){let o=e?this._decorations[e]:null;if(!o)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:zZ[n]}])[0]:null;if(!t)return this._decorationsTree.delete(o),delete this._decorations[o.id],null;let r=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(o),o.reset(this.getVersionId(),s,a,r),o.setOptions(zZ[n]),this._decorationsTree.insert(o),o.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;let t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,o=t.length;n<o;n++){let r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){let t=this._decorations[e];return t?t.options:null}getDecorationRange(e){let t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,o=!1){let r=this.getLineCount(),s=Math.min(r,Math.max(1,e)),a=Math.min(r,Math.max(1,t)),l=this.getLineMaxColumn(a),c=new E(s,1,a,l),d=this._getDecorationsInRange(c,n,o);return YX(d,this._decorationProvider.getDecorationsInRange(c,n,o)),d}getDecorationsInRange(e,t=0,n=!1){let o=this.validateRange(e),r=this._getDecorationsInRange(o,t,n);return YX(r,this._decorationProvider.getDecorationsInRange(o,t,n)),r}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){let t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),o=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return ec.fromDecorations(o).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){let o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,o,r,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){let n=this._decorations[e];if(!n)return;if(n.options.after){let a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){let a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}let o=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),s=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,s,o),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}_changeDecorationOptionsImpl(e,t){let n=this._decorations[e];if(!n)return;let o=!!(n.options.overviewRuler&&n.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){let s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber)}if(n.options.before||t.before){let s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}o!==r?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){let o=this.getVersionId(),r=t.length,s=0,a=n.length,l=0,c=new Array(a);for(;s<r||l<a;){let d=null;if(s<r){do d=this._decorations[t[s++]];while(!d&&s<r);if(d){if(d.options.after){let h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){let h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){let v=++this._lastDecorationId,b=`${this._instanceId};${v}`;d=new ak(b,0,0),this._decorations[b]=d}let h=n[l],u=this._validateRangeRelaxedNoAllocations(h.range),g=VZ(h.options),p=this._buffer.getOffsetAt(u.startLineNumber,u.startColumn),f=this._buffer.getOffsetAt(u.endLineNumber,u.endColumn);d.ownerId=e,d.reset(o,p,f,u),d.setOptions(g),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(d),c[l]=d.id,l++}else d&&delete this._decorations[d.id]}return c}getLanguageId(){return this.tokenization.getLanguageId()}setMode(e){this.tokenization.setLanguageId(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return V_e(this.getLineContent(e))+1}};Sd.MODEL_SYNC_LIMIT=50*1024*1024;Sd.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Sd.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Sd.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:xo.tabSize,indentSize:xo.indentSize,insertSpaces:xo.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:xo.trimAutoWhitespace,largeFileOptimizations:xo.largeFileOptimizations,bracketPairColorizationOptions:xo.bracketPairColorizationOptions};Sd=P_e([Y2(4,KM),Y2(5,ki),Y2(6,Yi)],Sd);function V_e(i){let e=0;for(let t of i)if(t===" "||t==="	")e++;else break;return e}function J2(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function X2(i){return!!i.options.after||!!i.options.before}var gk=class{constructor(){this._decorationsTree0=new I1,this._decorationsTree1=new I1,this._injectedTextDecorationsTree=new I1}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(let n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,o,r){let s=e.getVersionId(),a=this._intervalSearch(t,n,o,r,s);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,o,r){let s=this._decorationsTree0.intervalSearch(e,t,n,o,r),a=this._decorationsTree1.intervalSearch(e,t,n,o,r),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,o,r);return s.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,o){let r=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,o,!1,r);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){let n=e.getVersionId(),o=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,o).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,n,o){let r=e.getVersionId(),s=this._search(t,n,o,r);return this._ensureNodesHaveRanges(e,s)}_search(e,t,n,o){if(n)return this._decorationsTree1.search(e,t,o);{let r=this._decorationsTree0.search(e,t,o),s=this._decorationsTree1.search(e,t,o),a=this._injectedTextDecorationsTree.search(e,t,o);return r.concat(s).concat(a)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),o=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(o)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){X2(e)?this._injectedTextDecorationsTree.insert(e):J2(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){X2(e)?this._injectedTextDecorationsTree.delete(e):J2(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){X2(e)?this._injectedTextDecorationsTree.resolveNode(e,t):J2(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,o){this._decorationsTree0.acceptReplace(e,t,n,o),this._decorationsTree1.acceptReplace(e,t,n,o),this._injectedTextDecorationsTree.acceptReplace(e,t,n,o)}};function wc(i){return i.replace(/[^a-z0-9\-_]/gi," ")}var pk=class{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}},H5=class extends pk{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:us.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}},W5=class extends pk{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?j.fromHex(e):t.getColor(e.id)}},j_=class i{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}static from(e){return e instanceof i?e:new i(e)}},rt=class i{constructor(e){var t,n;this.description=e.description,this.blockClassName=e.blockClassName?wc(e.blockClassName):null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?wc(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new H5(e.overviewRuler):null,this.minimap=e.minimap?new W5(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?wc(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?wc(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?wc(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?wc(e.marginClassName):null,this.inlineClassName=e.inlineClassName?wc(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?wc(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?wc(e.afterContentClassName):null,this.after=e.after?j_.from(e.after):null,this.before=e.before?j_.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1,this.hideInStringTokens=(n=e.hideInStringTokens)!==null&&n!==void 0?n:!1}static register(e){return new i(e)}static createDynamic(e){return new i(e)}};rt.EMPTY=rt.register({description:"empty"});var zZ=[rt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),rt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),rt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),rt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function VZ(i){return i instanceof rt?i:rt.createDynamic(i)}var z5=class extends J{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Q),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);let t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}},V5=class extends J{constructor(){super(),this._fastEmitter=this._register(new Q),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Q),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}},U_e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},UZ={getInitialState:()=>U_,tokenizeEncoded:(i,e,t)=>jM(0,t)};function Q_e(i,e,t){return U_e(this,void 0,void 0,function*(){if(!t)return QZ(e,i.languageIdCodec,UZ);let n=yield Ui.getOrCreate(t);return QZ(e,i.languageIdCodec,n||UZ)})}function j_e(i,e,t,n,o,r,s){let a="<div>",l=n,c=0,d=!0;for(let h=0,u=e.getCount();h<u;h++){let g=e.getEndOffset(h);if(g<=n)continue;let p="";for(;l<g&&l<o;l++){let f=i.charCodeAt(l);switch(f){case 9:{let v=r-(l+c)%r;for(c+=v-1;v>0;)s&&d?(p+="&#160;",d=!1):(p+=" ",d=!0),v--;break}case 60:p+="&lt;",d=!1;break;case 62:p+="&gt;",d=!1;break;case 38:p+="&amp;",d=!1;break;case 0:p+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:p+="\uFFFD",d=!1;break;case 13:p+="&#8203",d=!1;break;case 32:s&&d?(p+="&#160;",d=!1):(p+=" ",d=!0);break;default:p+=String.fromCharCode(f),d=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${p}</span>`,g>o||l>=o)break}return a+="</div>",a}function QZ(i,e,t){let n='<div class="monaco-tokenized-source">',o=il(i),r=t.getInitialState();for(let s=0,a=o.length;s<a;s++){let l=o[s];s>0&&(n+="<br/>");let c=t.tokenizeEncoded(l,!0,r);No.convertToEndOffset(c.tokens,l.length);let d=new No(c.tokens,l,e).inflate(),h=0;for(let u=0,g=d.getCount();u<g;u++){let p=d.getClassName(u),f=d.getEndOffset(u);n+=`<span class="${p}">${nY(l.substring(h,f))}</span>`,h=f}r=c.endState}return n+="</div>",n}var U5=class{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;let t=this._inserts,n=this._changes,o=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,o)}},Q5=class{constructor(e,t,n,o,r){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=o,this.minWidth=r,this.prefixSum=0}},mk=class i{constructor(e,t,n,o){this._instanceId=aoe(++i.INSTANCE_COUNT),this._pendingChanges=new U5,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=o}static findInsertionIndex(e,t,n){let o=0,r=e.length;for(;o<r;){let s=o+r>>>1;t===e[s].afterLineNumber?n<e[s].ordinal?r=s:o=s+1:t<e[s].afterLineNumber?r=s:o=s+1}return o}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(n,o,r,s)=>{t=!0,n=n|0,o=o|0,r=r|0,s=s|0;let a=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Q5(a,n,o,r,s)),a},changeOneWhitespace:(n,o,r)=>{t=!0,o=o|0,r=r|0,this._pendingChanges.change({id:n,newAfterLineNumber:o,newHeight:r})},removeWhitespace:n=>{t=!0,this._pendingChanges.remove({id:n})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(let l of e)this._insertWhitespace(l);for(let l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(let l of n){let c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}let o=new Set;for(let l of n)o.add(l.id);let r=new Map;for(let l of t)r.set(l.id,l);let s=l=>{let c=[];for(let d of l)if(!o.has(d.id)){if(r.has(d.id)){let h=r.get(d.id);d.afterLineNumber=h.newAfterLineNumber,d.height=h.newHeight}c.push(d)}return c},a=s(this._arr).concat(s(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){let t=i.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){let t=this._arr;for(let n=0,o=t.length;n<o;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){let o=this._findWhitespaceIndex(e);if(o!==-1&&(this._arr[o].height!==n&&(this._arr[o].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,o-1)),this._arr[o].afterLineNumber!==t)){let r=this._arr[o];this._removeWhitespace(o),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,o=this._arr.length;n<o;n++){let r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,o=this._arr.length;n<o;n++){let r=this._arr[n].afterLineNumber;e<=r&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();let e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;let t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;let t=this._arr,n=0,o=t.length-1;for(;n<=o;){let r=(o-n|0)/2|0,s=n+r|0;if(t[s].afterLineNumber<e){if(s+1>=t.length||t[s+1].afterLineNumber>=e)return s;n=s+1|0}else o=s-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;let t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;let o=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+o+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n=this._lineHeight*e,o=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+o+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();let t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();let t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;let t=this._lineCount|0,n=this._lineHeight,o=1,r=t;for(;o<r;){let s=(o+r)/2|0,a=this.getVerticalOffsetForLineNumber(s)|0;if(e>=a+n)o=s+1;else{if(e>=a)return s;r=s}}return o>t?t:o}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;let n=this._lineHeight,o=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(o)|0,s=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(o)|0,l=this.getWhitespacesCount()|0,c,d;a===-1?(a=l,d=s+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let h=r,u=h,g=5e5,p=0;r>=g&&(p=Math.floor(r/g)*g,p=Math.floor(p/n)*n,u-=p);let f=[],v=e+(t-e)/2,b=-1;for(let k=o;k<=s;k++){if(b===-1){let L=h,S=h+n;(L<=v&&v<S||L>v)&&(b=k)}for(h+=n,f[k-o]=u,u+=n;d===k;)u+=c,h+=c,a++,a>=l?d=s+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){s=k;break}}b===-1&&(b=s);let A=this.getVerticalOffsetForLineNumber(s)|0,w=o,C=s;return w<C&&r<e&&w++,w<C&&A+n>t&&C--,{bigNumbersDelta:p,startLineNumber:o,endLineNumber:s,relativeVerticalOffset:f,centeredLineNumber:b,completelyVisibleStartLineNumber:w,completelyVisibleEndLineNumber:C}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;let t=this.getAfterLineNumberForWhitespaceIndex(e),n;t>=1?n=this._lineHeight*t:n=0;let o;return e>0?o=this.getWhitespacesAccumulatedHeight(e-1):o=0,n+o+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;let o=this.getVerticalOffsetForWhitespaceIndex(n),r=this.getHeightForWhitespaceIndex(n);if(e>=o+r)return-1;for(;t<n;){let s=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(s),l=this.getHeightForWhitespaceIndex(s);if(e>=a+l)t=s+1;else{if(e>=a)return s;n=s}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;let t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;let n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;let o=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),s=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:s,verticalOffset:n,height:o}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;let n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),o=this.getWhitespacesCount()-1;if(n<0)return[];let r=[];for(let s=n;s<=o;s++){let a=this.getVerticalOffsetForWhitespaceIndex(s),l=this.getHeightForWhitespaceIndex(s);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(s),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}};mk.INSTANCE_COUNT=0;var K_e=125,fg=class{constructor(e,t,n,o){e=e|0,t=t|0,n=n|0,o=o|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),o<0&&(o=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=o,this.scrollHeight=Math.max(n,o)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}},j5=class extends J{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new Q),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new fg(0,0,0,0),this._scrollable=this._register(new sp({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;let t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);let n=t.contentWidth!==e.contentWidth,o=t.contentHeight!==e.contentHeight;(n||o)&&this._onDidContentSizeChange.fire(new HO(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}},K5=class extends J{constructor(e,t,n){super(),this._configuration=e;let o=this._configuration.options,r=o.get(133),s=o.get(77);this._linesLayout=new mk(t,o.get(61),s.top,s.bottom),this._scrollable=this._register(new j5(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new fg(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(105)?K_e:0)}onConfigurationChanged(e){let t=this._configuration.options;if(e.hasChanged(61)&&this._linesLayout.setLineHeight(t.get(61)),e.hasChanged(77)){let n=t.get(77);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(133)){let n=t.get(133),o=n.contentWidth,r=n.height,s=this._scrollable.getScrollDimensions(),a=s.contentWidth;this._scrollable.setScrollDimensions(new fg(o,s.contentWidth,r,this._getContentHeight(o,r,a)))}else this._updateHeight();e.hasChanged(105)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){let n=this._configuration.options.get(94);return n.horizontal===2||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,n){let o=this._configuration.options,r=this._linesLayout.getLinesTotalHeight();return o.get(96)?r+=Math.max(0,t-o.get(61)-o.get(77).bottom):r+=this._getHorizontalScrollbarHeight(e,n),r}_updateHeight(){let e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,o=e.contentWidth;this._scrollable.setScrollDimensions(new fg(t,e.contentWidth,n,this._getContentHeight(t,n,o)))}getCurrentViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Tx(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Tx(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){let t=this._configuration.options,n=t.get(134),o=t.get(46),r=t.get(133);if(n.isViewportWrapping){let s=t.get(67);return e>r.contentWidth+o.typicalHalfwidthCharacterWidth&&s.enabled&&s.side==="right"?e+r.verticalScrollbarWidth:e}else{let s=t.get(95)*o.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+s+r.verticalScrollbarWidth,a)}}setMaxLineWidth(e){let t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new fg(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){let e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),o=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-o,scrollLeft:e.scrollLeft}}changeWhitespace(e){let t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){let t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){let n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}},q5=class{constructor(e,t,n,o,r){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=o,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){let t=e.id,n=this._decorationsCache[t];if(!n){let o=e.range,r=e.options,s;if(r.isWholeLine){let a=this._coordinatesConverter.convertModelPositionToViewPosition(new q(o.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new q(o.endLineNumber,this.model.getLineMaxColumn(o.endLineNumber)),1);s=new E(a.lineNumber,a.column,l.lineNumber,l.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(o,1);n=new Mx(s,r),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){let t=new E(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(t).inlineDecorations[0]}_getDecorationsInRange(e){let t=this._linesCollection.getDecorationsInRange(e,this.editorId,ZD(this.configuration.options)),n=e.startLineNumber,o=e.endLineNumber,r=[],s=0,a=[];for(let l=n;l<=o;l++)a[l-n]=[];for(let l=0,c=t.length;l<c;l++){let d=t[l],h=d.options;if(!OY(this.model,d))continue;let u=this._getOrCreateViewModelDecoration(d),g=u.range;if(r[s++]=u,h.inlineClassName){let p=new Tg(g,h.inlineClassName,h.inlineClassNameAffectsLetterSpacing?3:0),f=Math.max(n,g.startLineNumber),v=Math.min(o,g.endLineNumber);for(let b=f;b<=v;b++)a[b-n].push(p)}if(h.beforeContentClassName&&n<=g.startLineNumber&&g.startLineNumber<=o){let p=new Tg(new E(g.startLineNumber,g.startColumn,g.startLineNumber,g.startColumn),h.beforeContentClassName,1);a[g.startLineNumber-n].push(p)}if(h.afterContentClassName&&n<=g.endLineNumber&&g.endLineNumber<=o){let p=new Tg(new E(g.endLineNumber,g.endColumn,g.endLineNumber,g.endColumn),h.afterContentClassName,2);a[g.endLineNumber-n].push(p)}}return{decorations:r,inlineDecorations:a}}};function OY(i,e){return!(e.options.hideInCommentTokens&&HY(i,e)||e.options.hideInStringTokens&&WY(i,e))}function HY(i,e){return xre(i,e.range,t=>t===1)}function WY(i,e){return xre(i,e.range,t=>t===2)}function xre(i,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){let o=i.tokenization.getLineTokens(n),r=n===e.startLineNumber,s=n===e.endLineNumber,a=r?o.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<o.getCount()&&!(s&&o.getStartOffset(a)>e.endColumn-1);){if(!t(o.getStandardTokenType(a)))return!1;a++}}return!0}function Z2(i,e){return i===null?e?K_.INSTANCE:q_.INSTANCE:new $5(i,e)}var $5=class{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();let o=n>0?this._projectionData.breakOffsets[n-1]:0,r=this._projectionData.breakOffsets[n],s;if(this._projectionData.injectionOffsets!==null){let a=this._projectionData.injectionOffsets.map((l,c)=>new ec(0,0,l+1,this._projectionData.injectionOptions[c],0));s=ec.applyInjectedText(e.getLineContent(t),a).substring(o,r)}else s=e.getValueInRange({startLineNumber:t,startColumn:o+1,endLineNumber:t,endColumn:r+1});return n>0&&(s=jZ(this._projectionData.wrappedTextIndentLength)+s),s}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){let o=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],o),o[0]}getViewLinesData(e,t,n,o,r,s,a){this._assertVisible();let l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions,h=null;if(c){h=[];let g=0,p=0;for(let f=0;f<l.getOutputLineCount();f++){let v=new Array;h[f]=v;let b=f>0?l.breakOffsets[f-1]:0,A=l.breakOffsets[f];for(;p<c.length;){let w=d[p].content.length,C=c[p]+g,k=C+w;if(C>A)break;if(b<k){let L=d[p];if(L.inlineClassName){let S=f>0?l.wrappedTextIndentLength:0,y=S+Math.max(C-b,0),M=S+Math.min(k-b,A);y!==M&&v.push(new eO(y,M,L.inlineClassName,L.inlineClassNameAffectsLetterSpacing))}}if(k<=A)g+=w,p++;else break}}}let u;c?u=e.tokenization.getLineTokens(t).withInserted(c.map((g,p)=>({offset:g,text:d[p].content,tokenMetadata:No.defaultTokenMetadata}))):u=e.tokenization.getLineTokens(t);for(let g=n;g<n+o;g++){let p=r+g-n;if(!s[p]){a[p]=null;continue}a[p]=this._getViewLineData(u,h?h[g]:null,g)}}_getViewLineData(e,t,n){this._assertVisible();let o=this._projectionData,r=n>0?o.wrappedTextIndentLength:0,s=n>0?o.breakOffsets[n-1]:0,a=o.breakOffsets[n],l=e.sliceAndInflate(s,a,r),c=l.getLineContent();n>0&&(c=jZ(o.wrappedTextIndentLength)+c);let d=this._projectionData.getMinOutputOffset(n)+1,h=c.length+1,u=n+1<this.getViewLineCount(),g=n===0?0:o.breakOffsetsVisibleColumn[n-1];return new db(c,u,d,h,g,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();let n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){let o=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(o)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}},K_=class{constructor(){}isVisible(){return!0}setVisible(e){return e?this:q_.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let o=e.tokenization.getLineTokens(t),r=o.getLineContent();return new db(r,!1,1,r.length+1,0,o.inflate(),null)}getViewLinesData(e,t,n,o,r,s,a){if(!s[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new q(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}};K_.INSTANCE=new K_;var q_=class{constructor(){}isVisible(){return!1}setVisible(e){return e?K_.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,o,r,s,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};q_.INSTANCE=new q_;var eR=[""];function jZ(i){if(i>=eR.length)for(let e=1;e<=i;e++)eR[e]=q_e(e);return eR[i]}function q_e(i){return new Array(i+1).join(" ")}var G5=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=bm(e);let n=this.values,o=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(n.length+r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(o.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=bm(e),t=bm(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=bm(e),t=bm(t);let n=this.values,o=this.prefixSum;if(e>=n.length)return!1;let r=n.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(o.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=bm(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,o=0,r=0,s=0;for(;t<=n;)if(o=t+(n-t)/2|0,r=this.prefixSum[o],s=r-this.values[o],e<s)n=o-1;else if(e>=r)t=o+1;else break;return new fk(o,e-s)}},Y5=class{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();let t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new fk(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=LM(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){let n=this._values[e],o=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=o+n;for(let r=0;r<n;r++)this._indexBySum[o+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}},fk=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},J5=class{constructor(e,t,n,o,r,s,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=o,this.fontInfo=r,this.tabSize=s,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new X5(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));let n=this.model.getLinesContent(),o=this.model.getInjectedTextDecorations(this._editorId),r=n.length,s=this.createLineBreaksComputer(),a=new tp(ec.fromDecorations(o));for(let f=0;f<r;f++){let v=a.takeWhile(b=>b.lineNumber===f+1);s.addRequest(n[f],v,t?t[f]:null)}let l=s.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(f=>this.model.getDecorationRange(f)).sort(E.compareRangesUsingStarts),h=1,u=0,g=-1,p=g+1<d.length?u+1:r+2;for(let f=0;f<r;f++){let v=f+1;v===p&&(g++,h=d[g].startLineNumber,u=d[g].endLineNumber,p=g+1<d.length?u+1:r+2);let b=v>=h&&v<=u,A=Z2(l[f],!b);c[f]=A.getViewLineCount(),this.modelLineProjections[f]=A}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Y5(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){let t=e.map(u=>this.model.validateRange(u)),n=$_e(t),o=this.hiddenAreasDecorationIds.map(u=>this.model.getDecorationRange(u)).sort(E.compareRangesUsingStarts);if(n.length===o.length){let u=!1;for(let g=0;g<n.length;g++)if(!n[g].equalsRange(o[g])){u=!0;break}if(!u)return!1}let r=n.map(u=>({range:u,options:rt.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,r);let s=n,a=1,l=0,c=-1,d=c+1<s.length?l+1:this.modelLineProjections.length+2,h=!1;for(let u=0;u<this.modelLineProjections.length;u++){let g=u+1;g===d&&(c++,a=s[c].startLineNumber,l=s[c].endLineNumber,d=c+1<s.length?l+1:this.modelLineProjections.length+2);let p=!1;if(g>=a&&g<=l?this.modelLineProjections[u].isVisible()&&(this.modelLineProjections[u]=this.modelLineProjections[u].setVisible(!1),p=!0):(h=!0,this.modelLineProjections[u].isVisible()||(this.modelLineProjections[u]=this.modelLineProjections[u].setVisible(!0),p=!0)),p){let f=this.modelLineProjections[u].getViewLineCount();this.projectedModelLineLineCounts.setValue(u,f)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,o){let r=this.fontInfo.equals(e),s=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===o;if(r&&s&&a&&l)return!1;let c=r&&s&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=o;let d=null;if(c){d=[];for(let h=0,u=this.modelLineProjections.length;h<u;h++)d[h]=this.modelLineProjections[h].getProjectionData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new hb(o,r)}onModelLinesInserted(e,t,n,o){if(!e||e<=this._validModelVersionId)return null;let r=t>2&&!this.modelLineProjections[t-2].isVisible(),s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,a=0,l=[],c=[];for(let d=0,h=o.length;d<h;d++){let u=Z2(o[d],!r);l.push(u);let g=u.getViewLineCount();a+=g,c[d]=g}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new ub(s,s+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let o=t-1,r=this.modelLineProjections[o].getViewLineCount(),s=this.modelLineProjections[o].isVisible(),a=Z2(n,s);this.modelLineProjections[o]=a;let l=this.modelLineProjections[o].getViewLineCount(),c=!1,d=0,h=-1,u=0,g=-1,p=0,f=-1;r>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1,p=h+1,f=p+(r-l)-1,c=!0):r<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+r-1,u=h+1,g=u+(l-r)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1),this.projectedModelLineLineCounts.setValue(o,l);let v=d<=h?new $x(d,h-d+1):null,b=u<=g?new ub(u,g):null,A=p<=f?new hb(p,f):null;return[c,v,b,A]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;let t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);let o=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(o.lineNumber,r.lineNumber,s.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,o=t.remainder;return new _k(n+1,o)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){let t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),o=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new q(e.modelLineNumber,o)}getModelEndPositionOfViewLine(e){let t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),o=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new q(e.modelLineNumber,o)}getViewLineInfosGroupedByModelRanges(e,t){let n=this.getViewLineInfo(e),o=this.getViewLineInfo(t),r=new Array,s=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=o.modelLineNumber;l++){let c=this.modelLineProjections[l-1];if(c.isVisible()){let d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===o.modelLineNumber?o.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let u=d;u<h;u++)a.push(new _k(l,u))}if(!c.isVisible()&&s){let d=new q(l-1,this.model.getLineMaxColumn(l-1)+1),h=E.fromPositions(s,d);r.push(new vk(h,a)),a=[],s=null}else c.isVisible()&&!s&&(s=new q(l,1))}if(s){let l=E.fromPositions(s,this.getModelEndPositionOfViewLine(o));r.push(new vk(l,a))}return r}getViewLinesBracketGuides(e,t,n,o){let r=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,s=[];for(let a of this.getViewLineInfosGroupedByModelRanges(e,t)){let l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,o);for(let d of a.viewLines){let h=c[d.modelLineNumber-l].map(u=>{if(u.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,u.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||u.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,u.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!u.horizontalLine)return u;let g=-1;if(u.column!==-1){let v=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,u.column);if(v.lineNumber===d.modelLineWrappedLineIdx)g=v.column;else if(v.lineNumber<d.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(d);else if(v.lineNumber>d.modelLineWrappedLineIdx)return}let p=this.convertModelPositionToViewPosition(d.modelLineNumber,u.horizontalLine.endColumn),f=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,u.horizontalLine.endColumn);return f.lineNumber===d.modelLineWrappedLineIdx?new od(u.visibleColumn,g,u.className,new Ig(u.horizontalLine.top,p.column),-1,-1):f.lineNumber<d.modelLineWrappedLineIdx||u.visibleColumn!==-1?void 0:new od(u.visibleColumn,g,u.className,new Ig(u.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});s.push(h.filter(u=>!!u))}}return s}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),r=[],s=[],a=[],l=n.lineNumber-1,c=o.lineNumber-1,d=null;for(let p=l;p<=c;p++){let f=this.modelLineProjections[p];if(f.isVisible()){let v=f.getViewLineNumberOfModelPosition(0,p===l?n.column:1),b=f.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(p+1)),A=b-v+1,w=0;A>1&&f.getViewLineMinColumn(this.model,p+1,b)===1&&(w=v===0?1:2),s.push(A),a.push(w),d===null&&(d=new q(p+1,0))}else d!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,p)),d=null)}d!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,o.lineNumber)),d=null);let h=t-e+1,u=new Array(h),g=0;for(let p=0,f=r.length;p<f;p++){let v=r[p],b=Math.min(h-g,s[p]),A=a[p],w;A===2?w=0:A===1?w=1:w=b;for(let C=0;C<b;C++)C===w&&(v=0),u[g++]=v}return u}getViewLineContent(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let o=this.projectedModelLineLineCounts.getIndexOf(e-1),r=e,s=o.index,a=o.remainder,l=[];for(let c=s,d=this.model.getLineCount();c<d;c++){let h=this.modelLineProjections[c];if(!h.isVisible())continue;let u=c===s?a:0,g=h.getViewLineCount()-u,p=!1;if(r+g>t&&(p=!0,g=t-r+1),h.getViewLinesData(this.model,c+1,u,g,r-e,n,l),r+=g,p)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let o=this.projectedModelLineLineCounts.getIndexOf(e-1),r=o.index,s=o.remainder,a=this.modelLineProjections[r],l=a.getViewLineMinColumn(this.model,r+1,s),c=a.getViewLineMaxColumn(this.model,r+1,s);t<l&&(t=l),t>c&&(t=c);let d=a.getModelColumnOfViewPosition(s,t);return this.model.validatePosition(new q(r+1,d)).equals(n)?new q(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){let n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),o=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new E(n.lineNumber,n.column,o.lineNumber,o.column)}convertViewPositionToModelPosition(e,t){let n=this.getViewLineInfo(e),o=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new q(n.modelLineNumber,o))}convertViewRangeToModelRange(e){let t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new E(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){let o=this.model.validatePosition(new q(e,t)),r=o.lineNumber,s=o.column,a=r-1,l=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,l=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new q(1,1);let c=1+this.projectedModelLineLineCounts.getPrefixSum(a),d;return l?d=this.modelLineProjections[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),n):d=this.modelLineProjections[r-1].getViewPositionOfModelPosition(c,s,n),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){let n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return E.fromPositions(n)}else{let n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),o=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new E(n.lineNumber,n.column,o.lineNumber,o.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){let r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;let o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){let o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new E(o.lineNumber,1,r.lineNumber,r.column),t,n);let s=[],a=o.lineNumber-1,l=r.lineNumber-1,c=null;for(let g=a;g<=l;g++)if(this.modelLineProjections[g].isVisible())c===null&&(c=new q(g+1,g===a?o.column:1));else if(c!==null){let p=this.model.getLineMaxColumn(g);s=s.concat(this.model.getDecorationsInRange(new E(c.lineNumber,c.column,g,p),t,n)),c=null}c!==null&&(s=s.concat(this.model.getDecorationsInRange(new E(c.lineNumber,c.column,r.lineNumber,r.column),t,n)),c=null),s.sort((g,p)=>{let f=E.compareRangesUsingStarts(g.range,p.range);return f===0?g.id<p.id?-1:g.id>p.id?1:0:f});let d=[],h=0,u=null;for(let g of s){let p=g.id;u!==p&&(u=p,d[h++]=g)}return d}getInjectedTextAt(e){let t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){let n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){let t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}};function $_e(i){if(i.length===0)return[];let e=i.slice();e.sort(E.compareRangesUsingStarts);let t=[],n=e[0].startLineNumber,o=e[0].endLineNumber;for(let r=1,s=e.length;r<s;r++){let a=e[r];a.startLineNumber>o+1?(t.push(new E(n,1,o,1)),n=a.startLineNumber,o=a.endLineNumber):a.endLineNumber>o&&(o=a.endLineNumber)}return t.push(new E(n,1,o,1)),t}var _k=class{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}},vk=class{constructor(e,t){this.modelRange=e,this.viewLines=t}},X5=class{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}},Z5=class{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new e3(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,o){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,o)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new hb(t,n)}onModelLinesInserted(e,t,n,o){return new ub(t,n)}onModelLineChanged(e,t,n){return[!1,new $x(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){let n=t-e+1,o=new Array(n);for(let r=0;r<n;r++)o[r]=0;return o}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new db(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){let o=this.model.getLineCount();e=Math.min(Math.max(1,e),o),t=Math.min(Math.max(1,t),o);let r=[];for(let s=e;s<=t;s++){let a=s-e;r[a]=n[a]?this.getViewLineData(s):null}return r}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}},e3=class{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){let t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}},t3=class extends J{constructor(e,t,n,o,r,s,a,l){if(super(),this.languageConfigurationService=a,this._themeService=l,this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new PO,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Xd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._tokenizeViewportSoon=this._register(new jt(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new jt(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=i3.create(this.model),this.model.isTooLargeForTokenization())this._lines=new Z5(this.model);else{let c=this._configuration.options,d=c.get(46),h=c.get(127),u=c.get(134),g=c.get(126);this._lines=new J5(this._editorId,this.model,o,r,d,this.model.getOptions().tabSize,h,u.wrappingColumn,g)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new gb(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new K5(this._configuration,this.getLineCount(),s)),this._register(this.viewLayout.onDidScroll(c=>{c.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),c.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new NO(c)),this._eventDispatcher.emitOutgoingEvent(new zO(c.oldScrollWidth,c.oldScrollLeft,c.oldScrollHeight,c.oldScrollTop,c.scrollWidth,c.scrollLeft,c.scrollHeight,c.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(c=>{this._eventDispatcher.emitOutgoingEvent(c)})),this._decorations=new q5(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(c=>{try{let d=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(d,c)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(cb.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new BO)})),this._register(this._themeService.onDidColorThemeChange(c=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new RO(c))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){let e=this.viewLayout.getLinesViewportData(),t=new E(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(let o of n)this.model.tokenization.tokenizeViewport(o.startLineNumber,o.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new TO(e)),this._eventDispatcher.emitOutgoingEvent(new WO(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new kO)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new EO)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStart.isValid){let d=new q(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber));n=this.coordinatesConverter.convertViewPositionToModelPosition(d)}let o=!1,r=this._configuration.options,s=r.get(46),a=r.get(127),l=r.get(134),c=r.get(126);if(this._lines.setWrappingSettings(s,a,l.wrappingColumn,c)&&(e.emitViewEvent(new cf),e.emitViewEvent(new df),e.emitViewEvent(new Zd(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(o=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(83)&&(this._decorations.reset(),e.emitViewEvent(new Zd(null))),e.emitViewEvent(new LO(t)),this.viewLayout.onConfigurationChanged(t),o&&n){let d=this.coordinatesConverter.convertModelPositionToViewPosition(n),h=this.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber);this.viewLayout.setScrollPosition({scrollTop:h+this._viewportStart.startLineDelta},1)}Xd.shouldRecreate(t)&&(this.cursorConfig=new Xd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{let n=this._eventDispatcher.beginEmitViewEvents(),o=!1,r=!1,s=e instanceof Gf?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Gf?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(let h of s)switch(h.changeType){case 4:{for(let u=0;u<h.detail.length;u++){let g=h.detail[u],p=h.injectedTexts[u];p&&(p=p.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(g,p,null)}break}case 2:{let u=null;h.injectedText&&(u=h.injectedText.filter(g=>!g.ownerId||g.ownerId===this._editorId)),l.addRequest(h.detail,u,null);break}}let c=l.finalize(),d=new tp(c);for(let h of s)switch(h.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new cf),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),o=!0;break}case 3:{let u=this._lines.onModelLinesDeleted(a,h.fromLineNumber,h.toLineNumber);u!==null&&(n.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber)),o=!0;break}case 4:{let u=d.takeCount(h.detail.length),g=this._lines.onModelLinesInserted(a,h.fromLineNumber,h.toLineNumber,u);g!==null&&(n.emitViewEvent(g),this.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),o=!0;break}case 2:{let u=d.dequeue(),[g,p,f,v]=this._lines.onModelLineChanged(a,h.lineNumber,u);r=g,p&&n.emitViewEvent(p),f&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),v&&(n.emitViewEvent(v),this.viewLayout.onLinesDeleted(v.fromLineNumber,v.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!o&&r&&(n.emitViewEvent(new df),n.emitViewEvent(new Zd(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}let t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){let n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){let o=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStart.startLineDelta},1)}}try{let n=this._eventDispatcher.beginEmitViewEvents();e instanceof Gf&&n.emitOutgoingEvent(new GO(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,o=e.ranges.length;n<o;n++){let r=e.ranges[n],s=this.coordinatesConverter.convertModelPositionToViewPosition(new q(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new q(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[n]={fromLineNumber:s,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new FO(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitOutgoingEvent(new JO(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new MO),this.cursorConfig=new Xd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new $O(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Xd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new qO(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{let t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new cf),t.emitViewEvent(new df),t.emitViewEvent(new Zd(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Xd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new YO(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Zd(e)),this._eventDispatcher.emitOutgoingEvent(new KO(e))}))}setHiddenAreas(e){let t=!1;try{let n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new cf),n.emitViewEvent(new df),n.emitViewEvent(new Zd(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new UO)}getVisibleRangesPlusViewportAboveBelow(){let e=this._configuration.options.get(133),t=this._configuration.options.get(61),n=Math.max(20,Math.round(e.height/t)),o=this.viewLayout.getLinesViewportData(),r=Math.max(1,o.completelyVisibleStartLineNumber-n),s=Math.min(this.getLineCount(),o.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new E(r,this.getLineMinColumn(r),s,this.getLineMaxColumn(s)))}getVisibleRanges(){let e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){let t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let o=[],r=0,s=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,c=t.endColumn;for(let d=0,h=n.length;d<h;d++){let u=n[d].startLineNumber,g=n[d].endLineNumber;g<s||u>l||(s<u&&(o[r++]=new E(s,a,u-1,this.model.getLineMaxColumn(u-1))),s=g+1,a=1)}return(s<l||s===l&&a<c)&&(o[r++]=new E(s,a,l,c)),o}getCompletelyVisibleViewRange(){let e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new E(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){let t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,o=t.completelyVisibleEndLineNumber;return new E(n,this.getLineMinColumn(n),o,this.getLineMaxColumn(o))}saveState(){let e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),o=this.coordinatesConverter.convertViewPositionToModelPosition(new q(n,this.getLineMinColumn(n))),r=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:o,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);let t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),o=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:o}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,o){return this._lines.getViewLinesBracketGuides(e,t,n,o)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){let t=rr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=Ol(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){let n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}getViewLineRenderingData(e){let t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),o=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),s=this._lines.getViewLineData(e);return s.inlineDecorations&&(t=[...t,...s.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new Rs(s.minColumn,s.maxColumn,s.content,s.continuesWithWrappedLine,n,o,s.tokens,t,r,s.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let o=this._lines.getViewLinesData(e,t,n);return new Z4(this.getTabSize(),o)}getAllOverviewRulerDecorations(e){let t=this.model.getOverviewRulerDecorations(this._editorId,ZD(this._configuration.options)),n=new n3;for(let o of t){let r=o.options,s=r.overviewRuler;if(!s)continue;let a=s.position;if(a===0)continue;let l=s.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(o.range.startLineNumber,o.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(o.range.endLineNumber,o.range.endColumn);n.accept(l,r.zIndex,c,d,a)}return n.asArray}_invalidateDecorationsColorCache(){let e=this.model.getOverviewRulerDecorations();for(let t of e){let n=t.options.overviewRuler;n&&n.invalidateCachedColor();let o=t.options.minimap;o&&o.invalidateCachedColor()}}getValueInRange(e,t){let n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}deduceModelPositionRelativeToViewPosition(e,t,n){let o=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);let r=this.model.getOffsetAt(o)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,n){let o=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(E.compareRangesUsingStarts);let r=!1,s=!1;for(let l of e)l.isEmpty()?r=!0:s=!0;if(!s){if(!t)return"";let l=e.map(d=>d.startLineNumber),c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+o);return c}if(r&&t){let l=[],c=0;for(let d of e){let h=d.startLineNumber;d.isEmpty()?h!==c&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(d,n?2:0)),c=h}return l.length===1?l[0]:l}let a=[];for(let l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){let n=this.model.getLanguageId();if(n===Pr||e.length!==1)return null;let o=e[0];if(o.isEmpty()){if(!t)return null;let c=o.startLineNumber;o=new E(c,this.model.getLineMinColumn(c),c,this.model.getLineMaxColumn(c))}let r=this._configuration.options.get(46),s=this._getColorMap(),a=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===Or.fontFamily,l;return a?l=Or.fontFamily:(l=r.fontFamily,l=l.replace(/"/g,"'"),/[,']/.test(l)||/[+ ]/.test(l)&&(l=`'${l}'`),l=`${l}, ${Or.fontFamily}`),{mode:n,html:`<div style="color: ${s[1]};background-color: ${s[2]};font-family: ${l};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(o,s)+"</div>"}}_getHTMLToCopy(e,t){let n=e.startLineNumber,o=e.startColumn,r=e.endLineNumber,s=e.endColumn,a=this.getTabSize(),l="";for(let c=n;c<=r;c++){let d=this.model.tokenization.getLineTokens(c),h=d.getLineContent(),u=c===n?o-1:0,g=c===r?s-1:h.length;h===""?l+="<br>":l+=j_e(h,d.inflate(),t,u,g,a,Mn)}return l}_getColorMap(){let e=Ui.getColorMap(),t=["#000000"];if(e)for(let n=1,o=e.length;n<o;n++)t[n]=j.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(o=>this._cursor.setStates(o,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(o=>this._cursor.setSelections(o,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new jO);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(o=>this._cursor.executeEdits(o,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,o,r){this._executeCursorEdit(s=>this._cursor.compositionType(s,e,t,n,o,r))}paste(e,t,n,o){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,n,o))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(o=>this._cursor.revealPrimary(o,e,n,0,t,0))}revealTopMostCursor(e){let t=this._cursor.getTopMostViewPosition(),n=new E(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(o=>o.emitViewEvent(new Yf(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){let t=this._cursor.getBottomMostViewPosition(),n=new E(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(o=>o.emitViewEvent(new Yf(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,o,r){this._withViewEventsCollector(s=>s.emitViewEvent(new Yf(e,!1,n,null,o,t,r)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new t_e),this._eventDispatcher.emitOutgoingEvent(new VO))}_withViewEventsCollector(e){try{let t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}},i3=class i{constructor(e,t,n,o,r){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=o,this._startLineDelta=r}static create(e){let t=e._setTrackedRange(null,new E(1,1,1,1),1);return new i(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){let n=e.coordinatesConverter.convertViewPositionToModelPosition(new q(t,e.getLineMinColumn(t))),o=e.model._setTrackedRange(this._modelTrackedRange,new E(n.lineNumber,n.column,n.lineNumber,n.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),s=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=o,this._startLineDelta=s-r}invalidate(){this._isValid=!1}},n3=class{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,o,r){let s=this._asMap[e];if(s){let a=s.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=n){o>c&&(a[a.length-1]=o);return}a.push(r,n,o)}else{let a=new Nx(e,t,[r,n,o]);this._asMap[e]=a,this.asArray.push(a)}}},$_=class{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){let n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}},bb;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(bb||(bb={}));(function(i){let e="error",t="warning",n="warn",o="info",r="ignore";function s(l){return l?dg(e,l)?i.Error:dg(t,l)||dg(n,l)?i.Warning:dg(o,l)?i.Info:i.Ignore:i.Ignore}i.fromValue=s;function a(l){switch(l){case i.Error:return e;case i.Warning:return t;case i.Info:return o;default:return r}}i.toString=a})(bb||(bb={}));var Mt=bb,zY=Mt,nn=ze("notificationService"),VY=class{},Mg=class{constructor(e,t,n,o,r){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=o,this.wrappedTextIndentLength=r}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){let t=e>0?this.breakOffsets[e-1]:0,n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let n=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&n>this.injectionOffsets[o];o++)n<this.injectionOffsets[o]+this.injectionOptions[o].content.length?n=this.injectionOffsets[o]:n-=this.injectionOptions[o].content.length;return n}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&!(e<this.injectionOffsets[o]||t!==1&&e===this.injectionOffsets[o]);o++)n+=this.injectionOptions[o].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,o=this.breakOffsets.length-1,r=0,s=0;for(;n<=o;){r=n+(o-n)/2|0;let l=this.breakOffsets[r];if(s=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=s)o=r-1;else if(e>l)n=r+1;else break;else if(e<s)o=r-1;else if(e>=l)n=r+1;else break}let a=e-s;return r>0&&(a+=this.wrappedTextIndentLength),new gf(r,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){let o=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.normalizeOffsetInInputWithInjectionsAroundInjections(o,n);if(r!==o)return this.offsetInInputWithInjectionsToOutputPosition(r,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new gf(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){let o=this.getOutputLineCount()-1;if(e<o&&t===this.getMaxOutputOffset(e))return new gf(e+1,this.getMinOutputOffset(e+1))}return new gf(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){let n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&KZ(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let o=n.offsetInInputWithInjections;if(qZ(this.injectionOptions[n.injectedTextIndex].cursorStops))return o;let r=n.injectedTextIndex-1;for(;r>=0&&this.injectionOffsets[r]===this.injectionOffsets[n.injectedTextIndex]&&!(KZ(this.injectionOptions[r].cursorStops)||(o-=this.injectionOptions[r].content.length,qZ(this.injectionOptions[r].cursorStops)));)r--;return o}}else if(t===1||t===4){let o=n.offsetInInputWithInjections+n.length,r=n.injectedTextIndex;for(;r+1<this.injectionOffsets.length&&this.injectionOffsets[r+1]===this.injectionOffsets[r];)o+=this.injectionOptions[r+1].content.length,r++;return o}else if(t===0||t===3){let o=n.offsetInInputWithInjections,r=n.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)o-=this.injectionOptions[r-1].content.length,r--;return o}_M()}getInjectedText(e,t){let n=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.getInjectedTextAtOffset(n);return o?{options:this.injectionOptions[o.injectedTextIndex]}:null}getInjectedTextAtOffset(e){let t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let o=0;for(let r=0;r<t.length;r++){let s=n[r].content.length,a=t[r]+o,l=t[r]+o+s;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInInputWithInjections:a,length:s};o+=s}}}};function KZ(i){return i==null?!0:i===ja.Right||i===ja.Both}function qZ(i){return i==null?!0:i===ja.Left||i===ja.Both}var gf=class{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new q(e+this.outputLineIndex,this.outputOffset+1)}},o3=class i{constructor(e,t){this.classifier=new r3(e,t)}static create(e){return new i(e.get(122),e.get(121))}createLineBreaksComputer(e,t,n,o){let r=[],s=[],a=[];return{addRequest:(l,c,d)=>{r.push(l),s.push(c),a.push(d)},finalize:()=>{let l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let d=0,h=r.length;d<h;d++){let u=s[d],g=a[d];g&&!g.injectionOptions&&!u?c[d]=G_e(this.classifier,g,r[d],t,n,l,o):c[d]=Y_e(this.classifier,r[d],u,t,n,l,o)}return s3.length=0,a3.length=0,c}}}},r3=class extends k_{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}},s3=[],a3=[];function G_e(i,e,t,n,o,r,s){if(o===-1)return null;let a=t.length;if(a<=1)return null;let l=e.breakOffsets,c=e.breakOffsetsVisibleColumn,d=kre(t,n,o,r,s),h=o-d,u=s3,g=a3,p=0,f=0,v=0,b=o,A=l.length,w=0;if(w>=0){let C=Math.abs(c[w]-b);for(;w+1<A;){let k=Math.abs(c[w+1]-b);if(k>=C)break;C=k,w++}}for(;w<A;){let C=w<0?0:l[w],k=w<0?0:c[w];f>C&&(C=f,k=v);let L=0,S=0,y=0,M=0;if(k<=b){let H=k,D=C===0?0:t.charCodeAt(C-1),K=C===0?0:i.get(D),oe=!0;for(let ie=C;ie<a;ie++){let ce=ie,se=t.charCodeAt(ie),_e,Ve;if(En(se)?(ie++,_e=0,Ve=2):(_e=i.get(se),Ve=B1(se,H,n,r)),ce>f&&l3(D,K,se,_e)&&(L=ce,S=H),H+=Ve,H>b){ce>f?(y=ce,M=H-Ve):(y=ie+1,M=H),H-S>h&&(L=0),oe=!1;break}D=se,K=_e}if(oe){p>0&&(u[p]=l[l.length-1],g[p]=c[l.length-1],p++);break}}if(L===0){let H=k,D=t.charCodeAt(C),K=i.get(D),oe=!1;for(let ie=C-1;ie>=f;ie--){let ce=ie+1,se=t.charCodeAt(ie);if(se===9){oe=!0;break}let _e,Ve;if(ep(se)?(ie--,_e=0,Ve=2):(_e=i.get(se),Ve=zh(se)?r:1),H<=b){if(y===0&&(y=ce,M=H),H<=b-h)break;if(l3(se,_e,D,K)){L=ce,S=H;break}}H-=Ve,D=se,K=_e}if(L!==0){let ie=h-(M-S);if(ie<=n){let ce=t.charCodeAt(y),se;En(ce)?se=2:se=B1(ce,M,n,r),ie-se<0&&(L=0)}}if(oe){w--;continue}}if(L===0&&(L=y,S=M),L<=f){let H=t.charCodeAt(f);En(H)?(L=f+2,S=v+2):(L=f+1,S=v+B1(H,v,n,r))}for(f=L,u[p]=L,v=S,g[p]=S,p++,b=S+h;w<0||w<A&&c[w]<S;)w++;let O=Math.abs(c[w]-b);for(;w+1<A;){let H=Math.abs(c[w+1]-b);if(H>=O)break;O=H,w++}}return p===0?null:(u.length=p,g.length=p,s3=e.breakOffsets,a3=e.breakOffsetsVisibleColumn,e.breakOffsets=u,e.breakOffsetsVisibleColumn=g,e.wrappedTextIndentLength=d,e)}function Y_e(i,e,t,n,o,r,s){let a=ec.applyInjectedText(e,t),l,c;if(t&&t.length>0?(l=t.map(S=>S.options),c=t.map(S=>S.column-1)):(l=null,c=null),o===-1)return l?new Mg(c,l,[a.length],[],0):null;let d=a.length;if(d<=1)return l?new Mg(c,l,[a.length],[],0):null;let h=kre(a,n,o,r,s),u=o-h,g=[],p=[],f=0,v=0,b=0,A=o,w=a.charCodeAt(0),C=i.get(w),k=B1(w,0,n,r),L=1;En(w)&&(k+=1,w=a.charCodeAt(1),C=i.get(w),L++);for(let S=L;S<d;S++){let y=S,M=a.charCodeAt(S),O,H;En(M)?(S++,O=0,H=2):(O=i.get(M),H=B1(M,k,n,r)),l3(w,C,M,O)&&(v=y,b=k),k+=H,k>A&&((v===0||k-b>u)&&(v=y,b=k-H),g[f]=v,p[f]=b,f++,A=b+u,v=0),w=M,C=O}return f===0&&(!t||t.length===0)?null:(g[f]=d,p[f]=k,new Mg(c,l,g,p,h))}function B1(i,e,t,n){return i===9?t-e%t:zh(i)||i<32?n:1}function $Z(i,e){return e-i%e}function l3(i,e,t,n){return t!==32&&(e===2&&n!==2||e!==1&&n===1||e===3&&n!==2||n===3&&e!==1)}function kre(i,e,t,n,o){let r=0;if(o!==0){let s=rr(i);if(s!==-1){for(let l=0;l<s;l++){let c=i.charCodeAt(l)===9?$Z(r,e):1;r+=c}let a=o===3?2:o===2?1:0;for(let l=0;l<a;l++){let c=$Z(r,e);r+=c}r+n>t&&(r=0)}}return r}var tR,GZ=(tR=window.trustedTypes)===null||tR===void 0?void 0:tR.createPolicy("domLineBreaksComputer",{createHTML:i=>i}),c3=class i{static create(){return new i}constructor(){}createLineBreaksComputer(e,t,n,o){let r=[],s=[];return{addRequest:(a,l,c)=>{r.push(a),s.push(l)},finalize:()=>J_e(r,e,t,n,o,s)}}};function J_e(i,e,t,n,o,r){var s;function a(S){let y=r[S];if(y){let M=ec.applyInjectedText(i[S],y),O=y.map(D=>D.options),H=y.map(D=>D.column-1);return new Mg(H,O,[M.length],[],0)}else return null}if(n===-1){let S=[];for(let y=0,M=i.length;y<M;y++)S[y]=a(y);return S}let l=Math.round(n*e.typicalHalfwidthCharacterWidth),c=Math.round(t*(o===3?2:o===2?1:0)),d=Math.ceil(e.spaceWidth*c),h=document.createElement("div");To(h,e);let u=jh(1e4),g=[],p=[],f=[],v=[],b=[];for(let S=0;S<i.length;S++){let y=ec.applyInjectedText(i[S],r[S]),M=0,O=0,H=l;if(o!==0)if(M=rr(y),M===-1)M=0;else{for(let ie=0;ie<M;ie++){let ce=y.charCodeAt(ie)===9?t-O%t:1;O+=ce}let oe=Math.ceil(e.spaceWidth*O);oe+e.typicalFullwidthCharacterWidth>l?(M=0,O=0):H=l-oe}let D=y.substr(M),K=X_e(D,O,t,H,u,d);g[S]=M,p[S]=O,f[S]=D,v[S]=K[0],b[S]=K[1]}let A=u.build(),w=(s=GZ?.createHTML(A))!==null&&s!==void 0?s:A;h.innerHTML=w,h.style.position="absolute",h.style.top="10000",h.style.wordWrap="break-word",document.body.appendChild(h);let C=document.createRange(),k=Array.prototype.slice.call(h.children,0),L=[];for(let S=0;S<i.length;S++){let y=k[S],M=Z_e(C,y,f[S],v[S]);if(M===null){L[S]=a(S);continue}let O=g[S],H=p[S]+c,D=b[S],K=[];for(let se=0,_e=M.length;se<_e;se++)K[se]=D[M[se]];if(O!==0)for(let se=0,_e=M.length;se<_e;se++)M[se]+=O;let oe,ie,ce=r[S];ce?(oe=ce.map(se=>se.options),ie=ce.map(se=>se.column-1)):(oe=null,ie=null),L[S]=new Mg(ie,oe,M,K,H)}return document.body.removeChild(h),L}function X_e(i,e,t,n,o,r){if(r!==0){let u=String(r);o.appendASCIIString('<div style="text-indent: -'),o.appendASCIIString(u),o.appendASCIIString("px; padding-left: "),o.appendASCIIString(u),o.appendASCIIString("px; box-sizing: border-box; width:")}else o.appendASCIIString('<div style="width:');o.appendASCIIString(String(n)),o.appendASCIIString('px;">');let s=i.length,a=e,l=0,c=[],d=[],h=0<s?i.charCodeAt(0):0;o.appendASCIIString("<span>");for(let u=0;u<s;u++){u!==0&&u%16384===0&&o.appendASCIIString("</span><span>"),c[u]=l,d[u]=a;let g=h;h=u+1<s?i.charCodeAt(u+1):0;let p=1,f=1;switch(g){case 9:p=t-a%t,f=p;for(let v=1;v<=p;v++)v<p?o.write1(160):o.appendASCII(32);break;case 32:h===32?o.write1(160):o.appendASCII(32);break;case 60:o.appendASCIIString("&lt;");break;case 62:o.appendASCIIString("&gt;");break;case 38:o.appendASCIIString("&amp;");break;case 0:o.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:o.write1(65533);break;default:zh(g)&&f++,g<32?o.write1(9216+g):o.write1(g)}l+=p,a+=f}return o.appendASCIIString("</span>"),c[i.length]=l,d[i.length]=a,o.appendASCIIString("</div>"),[c,d]}function Z_e(i,e,t,n){if(t.length<=1)return null;let o=Array.prototype.slice.call(e.children,0),r=[];try{d3(i,o,n,0,null,t.length-1,null,r)}catch(s){return console.log(s),null}return r.length===0?null:(r.push(t.length),r)}function d3(i,e,t,n,o,r,s,a){if(n===r||(o=o||iR(i,e,t[n],t[n+1]),s=s||iR(i,e,t[r],t[r+1]),Math.abs(o[0].top-s[0].top)<=.1))return;if(n+1===r){a.push(r);return}let l=n+(r-n)/2|0,c=iR(i,e,t[l],t[l+1]);d3(i,e,t,n,o,l,c,a),d3(i,e,t,l,c,r,s,a)}function iR(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}var Te=ze("ILanguageFeaturesService"),e0e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Cc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},t0e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},i0e=0,n0e=class{constructor(i,e,t,n,o){this.model=i,this.viewModel=e,this.view=t,this.hasRealView=n,this.listenersToRemove=o}dispose(){st(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},G_=class zm extends J{constructor(e,t,n,o,r,s,a,l,c,d,h,u){super(),this.languageConfigurationService=h,this._deliveryQueue=new dD,this._onDidDispose=this._register(new Q),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Ak({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Ak({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection();let g=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,this._id=++i0e,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,g,d)),this._register(this._configuration.onDidChange(v=>{this._onDidChangeConfiguration.fire(v);let b=this._configuration.options;if(v.hasChanged(133)){let A=b.get(133);this._onDidLayoutChange.fire(A)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=s,this._themeService=l,this._register(new h3(this,this._contextKeyService)),this._register(new u3(this,this._contextKeyService,u)),this._instantiationService=o.createChild(new $_([Ze,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new g3(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let p;Array.isArray(n.contributions)?p=n.contributions:p=xg.getEditorContributions();for(let v of p){if(this._contributions[v.id]){Ye(new Error(`Cannot have two contributions with the same id ${v.id}`));continue}try{let b=this._instantiationService.createInstance(v.ctor,this);this._contributions[v.id]=b}catch(b){Ye(b)}}xg.getEditorActions().forEach(v=>{if(this._actions[v.id]){Ye(new Error(`Cannot have two actions with the same id ${v.id}`));return}let b=new Yx(v.id,v.label,v.alias,tr(v.precondition),()=>this._instantiationService.invokeFunction(A=>Promise.resolve(v.runEditorCommand(A,this,null))),this._contextKeyService);this._actions[b.id]=b});let f=()=>!this._configuration.options.get(83)&&this._configuration.options.get(32).enabled;this._register(new _B(this._domElement,{onDragEnter:()=>{},onDragOver:v=>{if(!f())return;let b=this.getTargetAtClientPoint(v.clientX,v.clientY);b!=null&&b.position&&this.showDropIndicatorAt(b.position)},onDrop:v=>t0e(this,void 0,void 0,function*(){if(!f()||(this.removeDropIndicator(),!v.dataTransfer))return;let b=this.getTargetAtClientPoint(v.clientX,v.clientY);b!=null&&b.position&&this._onDropIntoEditor.fire({position:b.position,event:v})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(e,t,n){return new PP(e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return zC.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();let e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){let o=e[t];this._contributions[o].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Wn.getWordAtPosition(this._modelData.model,this._configuration.options.get(119),e):null}getValue(e=null){if(!this._modelData)return"";let t=!!(e&&e.preserveBOM),n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){let t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;let n=this.hasTextFocus(),o=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();let r={oldModelUrl:o?o.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(r),this._postDetachModelCleanup(o)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){let t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,o){let r=e.model.validatePosition({lineNumber:t,column:n}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(s.lineNumber,o)}getTopForLineNumber(e,t=!1){return this._modelData?zm._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?zm._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,o=!1){let r=e.model.validatePosition({lineNumber:t,column:n}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber,o)}getBottomForLineNumber(e,t=!1){return this._modelData?zm._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e){var t;(t=this._modelData)===null||t===void 0||t.viewModel.setHiddenAreas(e.map(n=>E.lift(n)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;let t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return bn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!q.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,o){if(!this._modelData)return;if(!E.isIRange(e))throw new Error("Invalid arguments");let r=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",n,s,t,o)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new E(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,o){if(!q.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new E(e.lineNumber,e.column,e.lineNumber,e.column),t,n,o)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){let n=Se.isISelection(e),o=E.isIRange(e);if(!n&&!o)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(o){let r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;let n=new Se(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,o){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new E(e,1,t,1),n,!1,o)}revealRange(e,t=0,n=!1,o=!0){this._revealRange(e,n?1:0,o,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,o){if(!E.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(E.lift(e),t,n,o)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let o=0,r=e.length;o<r;o++)if(!Se.isISelection(e[o]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;let e={},t=Object.keys(this._contributions);for(let r of t){let s=this._contributions[r];typeof s.saveViewState=="function"&&(e[r]=s.saveViewState())}let n=this._modelData.viewModel.saveCursorState(),o=this._modelData.viewModel.saveState();return{cursorState:n,viewState:o,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;let t=e;if(t&&t.cursorState&&t.viewState){let n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);let o=t.contributionsState||{},r=Object.keys(this._contributions);for(let a=0,l=r.length;a<l;a++){let c=r[a],d=this._contributions[c];typeof d.restoreViewState=="function"&&d.restoreViewState(o[c])}let s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}getContribution(e){return this._contributions[e]||null}getActions(){let e=[],t=Object.keys(this._actions);for(let n=0,o=t.length;n<o;n++){let r=t[n];e.push(this._actions[r])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{let r=n;this._type(e,r.text||"");return}case"replacePreviousChar":{let r=n;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{let r=n;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{let r=n;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null);return}case"cut":this._cut(e);return}let o=this.getAction(t);if(o){Promise.resolve(o.run()).then(void 0,Ye);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,o,r){this._modelData&&this._modelData.viewModel.compositionType(t,n,o,r,e)}_paste(e,t,n,o,r){if(!this._modelData||t.length===0)return;let s=this._modelData.viewModel,a=s.getSelection().getStartPosition();s.paste(t,n,o,e);let l=s.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new E(a.lineNumber,a.column,l.lineNumber,l.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){let o=xg.getEditorCommand(t);return o?(n=n||{},n.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(o.runEditorCommand(r,this,n)).then(void 0,Ye)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(83))return!1;let o;return n?Array.isArray(n)?o=()=>n:o=n:o=()=>null,this._modelData.viewModel.executeEdits(e,t,o),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new p3(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,ZD(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,ZD(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){let t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(133)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){let t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){let t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;let t=this._modelData.model.validatePosition(e),n=this._configuration.options,o=n.get(133),r=zm._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),s=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+o.glyphMarginWidth+o.lineNumbersWidth+o.decorationsWidth-this.getScrollLeft();return{top:r,left:s,height:n.get(61)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){To(e,this._configuration.options.get(46))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}let t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();let n=new t3(this._id,this._configuration,e,c3.create(),o3.create(this._configuration.options),s=>el(s),this.languageConfigurationService,this._themeService);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(s=>{switch(s.kind){case 0:this._onDidContentSizeChange.fire(s);break;case 1:this._editorTextFocus.setValue(s.hasFocus);break;case 2:this._onDidScrollChange.fire(s);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{s.reachedMaxCursorCount&&this._notificationService.warn(m("cursors.maximum","The number of cursors has been limited to {0}.",gb.MAX_CURSOR_COUNT));let a=[];for(let d=0,h=s.selections.length;d<h;d++)a[d]=s.selections[d].getPosition();let l={position:a[0],secondaryPositions:a.slice(1),reason:s.reason,source:s.source};this._onDidChangeCursorPosition.fire(l);let c={selection:s.selections[0],secondarySelections:s.selections.slice(1),modelVersionId:s.modelVersionId,oldSelections:s.oldSelections,oldModelVersionId:s.oldModelVersionId,source:s.source,reason:s.reason};this._onDidChangeCursorSelection.fire(c);break}case 7:this._onDidChangeModelDecorations.fire(s.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(s.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(s.event);break;case 10:this._onDidChangeModelContent.fire(s.event);break;case 11:this._onDidChangeModelOptions.fire(s.event);break;case 12:this._onDidChangeModelTokens.fire(s.event);break}}));let[o,r]=this._createView(n);if(r){this._domElement.appendChild(o.domNode.domNode);let s=Object.keys(this._contentWidgets);for(let a=0,l=s.length;a<l;a++){let c=s[a];o.addContentWidget(this._contentWidgets[c])}s=Object.keys(this._overlayWidgets);for(let a=0,l=s.length;a<l;a++){let c=s[a];o.addOverlayWidget(this._overlayWidgets[c])}o.render(!1,!0),o.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new n0e(e,n,o,r,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,r,s,a)=>{this._paste("keyboard",o,r,s,a)},type:o=>{this._type("keyboard",o)},compositionType:(o,r,s,a)=>{this._compositionType("keyboard",o,r,s,a)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,r,s,a)=>{let l={text:o,pasteOnNewLine:r,multicursorText:s,mode:a};this._commandService.executeCommand("paste",l)},type:o=>{let r={text:o};this._commandService.executeCommand("type",r)},compositionType:(o,r,s,a)=>{if(s||a){let l={text:o,replacePrevCharCnt:r,replaceNextCharCnt:s,positionDelta:a};this._commandService.executeCommand("compositionType",l)}else{let l={text:o,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",l)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};let n=new vx(e.coordinatesConverter);return n.onKeyDown=o=>this._onKeyDown.fire(o),n.onKeyUp=o=>this._onKeyUp.fire(o),n.onContextMenu=o=>this._onContextMenu.fire(o),n.onMouseMove=o=>this._onMouseMove.fire(o),n.onMouseLeave=o=>this._onMouseLeave.fire(o),n.onMouseDown=o=>this._onMouseDown.fire(o),n.onMouseUp=o=>this._onMouseUp.fire(o),n.onMouseDrag=o=>this._onMouseDrag.fire(o),n.onMouseDrop=o=>this._onMouseDrop.fire(o),n.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),n.onMouseWheel=o=>this._onMouseWheel.fire(o),[new CO(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;let e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){let t=[{range:new E(e.lineNumber,e.column,e.lineNumber,e.column),options:zm.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}};G_.dropIntoEditorDecorationOptions=rt.register({description:"workbench-dnd-target",className:"dnd-target"});G_=e0e([Cc(3,tt),Cc(4,Ft),Cc(5,ji),Cc(6,Ze),Cc(7,mi),Cc(8,nn),Cc(9,Rd),Cc(10,Yi),Cc(11,Te)],G_);var Ak=class extends J{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new Q(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new Q(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){let t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}},h3=class extends J{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=B.editorSimpleInput.bindTo(t),this._editorFocus=B.focus.bindTo(t),this._textInputFocus=B.textInputFocus.bindTo(t),this._editorTextFocus=B.editorTextFocus.bindTo(t),this._editorTabMovesFocus=B.tabMovesFocus.bindTo(t),this._editorReadonly=B.readOnly.bindTo(t),this._inDiffEditor=B.inDiffEditor.bindTo(t),this._editorColumnSelection=B.columnSelection.bindTo(t),this._hasMultipleSelections=B.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=B.hasNonEmptySelection.bindTo(t),this._canUndo=B.canUndo.bindTo(t),this._canRedo=B.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){let e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(132)),this._editorReadonly.set(e.get(83)),this._inDiffEditor.set(e.get(56)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){let e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){let e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}},u3=class extends J{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=B.languageId.bindTo(t),this._hasCompletionItemProvider=B.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=B.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=B.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=B.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=B.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=B.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=B.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=B.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=B.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=B.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=B.hasReferenceProvider.bindTo(t),this._hasRenameProvider=B.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=B.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=B.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=B.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=B.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=B.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=B.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=B.isInWalkThroughSnippet.bindTo(t);let o=()=>this._update();this._register(e.onDidChangeModel(o)),this._register(e.onDidChangeModelLanguage(o)),this._register(n.completionProvider.onDidChange(o)),this._register(n.codeActionProvider.onDidChange(o)),this._register(n.codeLensProvider.onDidChange(o)),this._register(n.definitionProvider.onDidChange(o)),this._register(n.declarationProvider.onDidChange(o)),this._register(n.implementationProvider.onDidChange(o)),this._register(n.typeDefinitionProvider.onDidChange(o)),this._register(n.hoverProvider.onDidChange(o)),this._register(n.documentHighlightProvider.onDidChange(o)),this._register(n.documentSymbolProvider.onDidChange(o)),this._register(n.referenceProvider.onDidChange(o)),this._register(n.renameProvider.onDidChange(o)),this._register(n.documentFormattingEditProvider.onDidChange(o)),this._register(n.documentRangeFormattingEditProvider.onDidChange(o)),this._register(n.signatureHelpProvider.onDidChange(o)),this._register(n.inlayHintsProvider.onDidChange(o)),o()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){let e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Oe.walkThroughSnippet)})}},g3=class extends J{constructor(e){super(),this._onChange=this._register(new Q),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Oh(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}},p3=class{constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}get length(){return this._decorationIds.length}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(o=>{this._isChangingDecorations||e.call(t,o)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];let e=this._editor.getModel(),t=[];for(let n of this._decorationIds){let o=e.getDecorationRange(n);o&&t.push(o)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}}},o0e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),r0e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function nR(i){return o0e+encodeURIComponent(i.toString())+r0e}var s0e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),a0e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function l0e(i){return s0e+encodeURIComponent(i.toString())+a0e}xi((i,e)=>{let t=i.getColor($oe);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);let n=i.getColor(Rl);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${nR(n)}") repeat-x bottom left; }`);let o=i.getColor(wpe);o&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${o}; }`);let r=i.getColor(F_);r&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${r}; }`);let s=i.getColor(ns);s&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${nR(s)}") repeat-x bottom left; }`);let a=i.getColor(Cpe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);let l=i.getColor(rx);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);let c=i.getColor(Cr);c&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${nR(c)}") repeat-x bottom left; }`);let d=i.getColor(ype);d&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);let h=i.getColor(Dpe);h&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${h}; }`);let u=i.getColor(Spe);u&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${l0e(u)}") no-repeat bottom left; }`);let g=i.getColor(pfe);g&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${g.rgba.a}; }`);let p=i.getColor(gfe);p&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${p}; }`);let f=i.getColor(os)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${f}}`)});var kt=class{constructor(e,t,n){let o=r=>this.emitter.fire(r);this.emitter=new Q({onFirstListenerAdd:()=>e.addEventListener(t,o,n),onLastListenerRemove:()=>e.removeEventListener(t,o,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}};function Y_(i){return i.preventDefault(),i.stopPropagation(),i}var sv=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},c0e=!1,bk;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(bk||(bk={}));var d0e=4,h0e=new Q,u0e=300,g0e=new Q,wb=class{constructor(){this.disposables=new ne}get onPointerMove(){return this.disposables.add(new kt(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new kt(window,"mouseup")).event}dispose(){this.disposables.dispose()}};sv([vn],wb.prototype,"onPointerMove",null);sv([vn],wb.prototype,"onPointerUp",null);var Cb=class{constructor(e){this.el=e,this.disposables=new ne}get onPointerMove(){return this.disposables.add(new kt(this.el,yi.Change)).event}get onPointerUp(){return this.disposables.add(new kt(this.el,yi.End)).event}dispose(){this.disposables.dispose()}};sv([vn],Cb.prototype,"onPointerMove",null);sv([vn],Cb.prototype,"onPointerUp",null);var J_=class{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}};sv([vn],J_.prototype,"onPointerMove",null);sv([vn],J_.prototype,"onPointerUp",null);var YZ="pointer-events-disabled",Ka=class i extends J{constructor(e,t,n){super(),this.hoverDelay=u0e,this.hoverDelayer=this._register(new Gl(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new Q),this._onDidStart=this._register(new Q),this._onDidChange=this._register(new Q),this._onDidReset=this._register(new Q),this._onDidEnd=this._register(new Q),this.orthogonalStartSashDisposables=this._register(new ne),this.orthogonalStartDragHandleDisposables=this._register(new ne),this.orthogonalEndSashDisposables=this._register(new ne),this.orthogonalEndDragHandleDisposables=this._register(new ne),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ae(e,ge(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),gt&&this.el.classList.add("mac");let o=this._register(new kt(this.el,"mousedown")).event;this._register(o(h=>this.onPointerStart(h,new wb),this));let r=this._register(new kt(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));let s=this._register(new kt(this.el,"mouseenter")).event;this._register(s(()=>i.onMouseEnter(this)));let a=this._register(new kt(this.el,"mouseleave")).event;this._register(a(()=>i.onMouseLeave(this))),this._register(to.addTarget(this.el));let l=Z.map(this._register(new kt(this.el,yi.Start)).event,h=>{var u;return Object.assign(Object.assign({},h),{target:(u=h.initialTarget)!==null&&u!==void 0?u:null})});this._register(l(h=>this.onPointerStart(h,new Cb(this.el)),this));let c=this._register(new kt(this.el,yi.Tap)).event,d=Z.map(Z.filter(Z.debounce(c,(h,u)=>{var g;return{event:u,count:((g=h?.count)!==null&&g!==void 0?g:0)+1}},250),({count:h})=>h===2),({event:h})=>{var u;return Object.assign(Object.assign({},h),{target:(u=h.initialTarget)!==null&&u!==void 0?u:null})});this._register(d(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=d0e,this._register(h0e.event(h=>{this.size=h,this.layout()}))),this._register(g0e.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",c0e),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){let t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=ae(this.el,ge(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(ct(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new kt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>i.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new kt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>i.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){let t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=ae(this.el,ge(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(ct(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new kt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>i.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new kt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>i.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){ii.stop(e);let n=!1;if(!e.__orthogonalSashEvent){let p=this.getOrthogonalSash(e);p&&(n=!0,e.__orthogonalSashEvent=!0,p.onPointerStart(e,new J_(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new J_(t))),!this.state)return;let o=Iue("iframe");for(let p of o)p.classList.add(YZ);let r=e.pageX,s=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:s,currentY:s,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);let c=ls(this.el),d=()=>{let p="";n?p="all-scroll":this.orientation===1?this.state===1?p="s-resize":this.state===2?p="n-resize":p=gt?"row-resize":"ns-resize":this.state===1?p="e-resize":this.state===2?p="w-resize":p=gt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${p} !important; }`},h=new ne;d(),n||this.onDidEnablementChange.event(d,null,h);let u=p=>{ii.stop(p,!1);let f={startX:r,currentX:p.pageX,startY:s,currentY:p.pageY,altKey:a};this._onDidChange.fire(f)},g=p=>{ii.stop(p,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(let f of o)f.classList.remove(YZ)};t.onPointerMove(u,null,h),t.onPointerUp(g,null,h),h.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&i.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&i.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){i.onMouseLeave(this)}layout(){if(this.orientation===0){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}},Zh=class i{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){let o=e.getVisibleRanges();if(o.length>0){t=o[0].getStartPosition();let r=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-r}}return new i(t,n,e.getPosition())}restore(e){if(this._visiblePosition){let t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){let t=e.getPosition();if(!this._cursorPosition||!t)return;let n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}},VC={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:nr.text},Eu={CurrentDragAndDropData:void 0},JZ,XZ,p0e=class{constructor(){this._value="",this._pos=0}reset(i){return this._value=i,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(i){let e=i.charCodeAt(0),t=this._value.charCodeAt(this._pos);return e-t}value(){return this._value[this._pos]}},m0e=class{constructor(i=!0){this._caseSensitive=i}reset(i){return this._value=i,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let i=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(i)this._from++;else break;else i=!1;return this}cmp(i){return this._caseSensitive?FC(i,this._value,0,i.length,this._from,this._to):Xp(i,this._value,0,i.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},f0e=class{constructor(i=!0,e=!0){this._splitOnBackslash=i,this._caseSensitive=e}reset(i){this._from=0,this._to=0,this._value=i,this._valueLen=i.length;for(let e=i.length-1;e>=0;e--,this._valueLen--){let t=this._value.charCodeAt(e);if(!(t===47||this._splitOnBackslash&&t===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let i=!0;for(;this._to<this._valueLen;this._to++){let e=this._value.charCodeAt(this._to);if(e===47||this._splitOnBackslash&&e===92)if(i)this._from++;else break;else i=!1}return this}cmp(i){return this._caseSensitive?FC(i,this._value,0,i.length,this._from,this._to):Xp(i,this._value,0,i.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},_0e=class{constructor(i,e){this._ignorePathCasing=i,this._ignoreQueryAndFragment=e,this._states=[],this._stateIdx=0}reset(i){return this._value=i,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new f0e(!1,!this._ignorePathCasing(i)),this._pathIterator.reset(i.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(i)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(i){if(this._states[this._stateIdx]===1)return w_(i,this._value.scheme);if(this._states[this._stateIdx]===2)return w_(i,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(i);if(this._states[this._stateIdx]===4)return Is(i,this._value.query);if(this._states[this._stateIdx]===5)return Is(i,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}},Dy=class{constructor(){this.height=1}rotateLeft(){let i=this.right;return this.right=i.left,i.left=this,this.updateHeight(),i.updateHeight(),i}rotateRight(){let i=this.left;return this.left=i.right,i.right=this,this.updateHeight(),i.updateHeight(),i}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var i,e;return(e=(i=this.left)===null||i===void 0?void 0:i.height)!==null&&e!==void 0?e:0}get heightRight(){var i,e;return(e=(i=this.right)===null||i===void 0?void 0:i.height)!==null&&e!==void 0?e:0}},gd=class{constructor(i){this._iter=i}static forUris(i=()=>!1,e=()=>!1){return new gd(new _0e(i,e))}static forStrings(){return new gd(new p0e)}static forConfigKeys(){return new gd(new m0e)}clear(){this._root=void 0}set(i,e){let t=this._iter.reset(i),n;this._root||(this._root=new Dy,this._root.segment=t.value());let o=[];for(n=this._root;;){let s=t.cmp(n.segment);if(s>0)n.left||(n.left=new Dy,n.left.segment=t.value()),o.push([-1,n]),n=n.left;else if(s<0)n.right||(n.right=new Dy,n.right.segment=t.value()),o.push([1,n]),n=n.right;else if(t.hasNext())t.next(),n.mid||(n.mid=new Dy,n.mid.segment=t.value()),o.push([0,n]),n=n.mid;else break}let r=n.value;n.value=e,n.key=i;for(let s=o.length-1;s>=0;s--){let a=o[s][1];a.updateHeight();let l=a.balanceFactor();if(l<-1||l>1){let c=o[s][0],d=o[s+1][0];if(c===1&&d===1)o[s][1]=a.rotateLeft();else if(c===-1&&d===-1)o[s][1]=a.rotateRight();else if(c===1&&d===-1)a.right=o[s+1][1]=o[s+1][1].rotateRight(),o[s][1]=a.rotateLeft();else if(c===-1&&d===1)a.left=o[s+1][1]=o[s+1][1].rotateLeft(),o[s][1]=a.rotateRight();else throw new Error;if(s>0)switch(o[s-1][0]){case-1:o[s-1][1].left=o[s][1];break;case 1:o[s-1][1].right=o[s][1];break;case 0:o[s-1][1].mid=o[s][1];break}else this._root=o[0][1]}}return r}get(i){var e;return(e=this._getNode(i))===null||e===void 0?void 0:e.value}_getNode(i){let e=this._iter.reset(i),t=this._root;for(;t;){let n=e.cmp(t.segment);if(n>0)t=t.left;else if(n<0)t=t.right;else if(e.hasNext())e.next(),t=t.mid;else break}return t}has(i){let e=this._getNode(i);return!(e?.value===void 0&&e?.mid===void 0)}delete(i){return this._delete(i,!1)}deleteSuperstr(i){return this._delete(i,!0)}_delete(i,e){var t;let n=this._iter.reset(i),o=[],r=this._root;for(;r;){let s=n.cmp(r.segment);if(s>0)o.push([-1,r]),r=r.left;else if(s<0)o.push([1,r]),r=r.right;else if(n.hasNext())n.next(),o.push([0,r]),r=r.mid;else break}if(r){if(e?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){let s=this._min(r.right),{key:a,value:l,segment:c}=s;this._delete(s.key,!1),r.key=a,r.value=l,r.segment=c}else{let s=(t=r.left)!==null&&t!==void 0?t:r.right;if(o.length>0){let[a,l]=o[o.length-1];switch(a){case-1:l.left=s;break;case 0:l.mid=s;break;case 1:l.right=s;break}}else this._root=s}for(let s=o.length-1;s>=0;s--){let a=o[s][1];a.updateHeight();let l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),o[s][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),o[s][1]=a.rotateRight()),s>0)switch(o[s-1][0]){case-1:o[s-1][1].left=o[s][1];break;case 1:o[s-1][1].right=o[s][1];break;case 0:o[s-1][1].mid=o[s][1];break}else this._root=o[0][1]}}}_min(i){for(;i.left;)i=i.left;return i}findSubstr(i){let e=this._iter.reset(i),t=this._root,n;for(;t;){let o=e.cmp(t.segment);if(o>0)t=t.left;else if(o<0)t=t.right;else if(e.hasNext())e.next(),n=t.value||n,t=t.mid;else break}return t&&t.value||n}findSuperstr(i){let e=this._iter.reset(i),t=this._root;for(;t;){let n=e.cmp(t.segment);if(n>0)t=t.left;else if(n<0)t=t.right;else if(e.hasNext())e.next(),t=t.mid;else return t.mid?this._entries(t.mid):void 0}}forEach(i){for(let[e,t]of this)i(t,e)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(i){let e=[];return this._dfsEntries(i,e),e[Symbol.iterator]()}_dfsEntries(i,e){i&&(i.left&&this._dfsEntries(i.left,e),i.value&&e.push([i.key,i.value]),i.mid&&this._dfsEntries(i.mid,e),i.right&&this._dfsEntries(i.right,e))}},v0e=class{constructor(i,e){this.uri=i,this.value=e}},en=class{constructor(i,e){this[JZ]="ResourceMap",i instanceof en?(this.map=new Map(i.map),this.toKey=e??en.defaultToKey):(this.map=new Map,this.toKey=i??en.defaultToKey)}set(i,e){return this.map.set(this.toKey(i),new v0e(i,e)),this}get(i){var e;return(e=this.map.get(this.toKey(i)))===null||e===void 0?void 0:e.value}has(i){return this.map.has(this.toKey(i))}get size(){return this.map.size}clear(){this.map.clear()}delete(i){return this.map.delete(this.toKey(i))}forEach(i,e){typeof e<"u"&&(i=i.bind(e));for(let[t,n]of this.map)i(n.value,n.uri,this)}*values(){for(let i of this.map.values())yield i.value}*keys(){for(let i of this.map.values())yield i.uri}*entries(){for(let i of this.map.values())yield[i.uri,i.value]}*[(JZ=Symbol.toStringTag,Symbol.iterator)](){for(let[,i]of this.map)yield[i.uri,i.value]}};en.defaultToKey=i=>i.toString();var m3=class{constructor(){this[XZ]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){let n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let o=this._map.get(e);if(o)o.value=t,n!==0&&this.touch(o,n);else{switch(o={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(o);break;case 1:this.addItemFirst(o);break;case 2:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,o=this._head;for(;o;){if(t?e.bind(t)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this,t=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return o}values(){let e=this,t=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return o}entries(){let e=this,t=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return o}[(XZ=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}},tc=class extends m3{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};function UY(...i){return function(e,t){for(let n=0,o=i.length;n<o;n++){let r=i[n](e,t);if(r)return r}return null}}Ere.bind(void 0,!1);var UC=Ere.bind(void 0,!0);function Ere(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=oY(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function Lre(i,e){let t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function Ire(i,e){return f3(i.toLowerCase(),e.toLowerCase(),0,0)}function f3(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let o=null;return(o=f3(i,e,t+1,n+1))?KY({start:n,end:n+1},o):null}return f3(i,e,t,n+1)}function QY(i){return 97<=i&&i<=122}function qM(i){return 65<=i&&i<=90}function jY(i){return 48<=i&&i<=57}function Tre(i){return i===32||i===9||i===10||i===13}var Mre=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>Mre.add(i.charCodeAt(0)));function wk(i){return Tre(i)||Mre.has(i)}function A0e(i,e){return i===e||wk(i)&&wk(e)}function Nre(i){return QY(i)||qM(i)||jY(i)}function KY(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function Rre(i,e){for(let t=e;t<i.length;t++){let n=i.charCodeAt(t);if(qM(n)||jY(n)||t>0&&!Nre(i.charCodeAt(t-1)))return t}return i.length}function _3(i,e,t,n){if(t===i.length)return[];if(n===e.length||i[t]!==e[n].toLowerCase())return null;{let o=null,r=n+1;for(o=_3(i,e,t+1,n+1);!o&&(r=Rre(e,r))<e.length;)o=_3(i,e,t+1,r),r++;return o===null?null:KY({start:n,end:n+1},o)}}function b0e(i){let e=0,t=0,n=0,o=0,r=0;for(let d=0;d<i.length;d++)r=i.charCodeAt(d),qM(r)&&e++,QY(r)&&t++,Nre(r)&&n++,jY(r)&&o++;let s=e/i.length,a=t/i.length,l=n/i.length,c=o/i.length;return{upperPercent:s,lowerPercent:a,alphaPercent:l,numericPercent:c}}function w0e(i){let{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function C0e(i){let{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:o}=i;return t>.2&&e<.8&&n>.6&&o<.2}function y0e(i){let e=0,t=0,n=0,o=0;for(let r=0;r<i.length;r++)n=i.charCodeAt(r),qM(n)&&e++,QY(n)&&t++,Tre(n)&&o++;return(e===0||t===0)&&o===0?i.length<=30:e<=5}function Fre(i,e){if(!e||(e=e.trim(),e.length===0)||!y0e(i)||e.length>60)return null;let t=b0e(e);if(!C0e(t)){if(!w0e(t))return null;e=e.toLowerCase()}let n=null,o=0;for(i=i.toLowerCase();o<e.length&&(n=_3(i,e,0,o))===null;)o=Rre(e,o+1);return n}function S0e(i,e,t=!1){if(!e||e.length===0)return null;let n=null,o=0;for(i=i.toLowerCase(),e=e.toLowerCase();o<e.length&&(n=v3(i,e,0,o,t))===null;)o=Bre(e,o+1);return n}function v3(i,e,t,n,o){if(t===i.length)return[];if(n===e.length)return null;if(A0e(i.charCodeAt(t),e.charCodeAt(n))){let r=null,s=n+1;if(r=v3(i,e,t+1,n+1,o),!o)for(;!r&&(s=Bre(e,s))<e.length;)r=v3(i,e,t+1,s,o),s++;return r===null?null:KY({start:n,end:n+1},r)}else return null}function Bre(i,e){for(let t=e;t<i.length;t++)if(wk(i.charCodeAt(t))||t>0&&wk(i.charCodeAt(t-1)))return t;return i.length}var D0e=UY(UC,Fre,Lre),x0e=UY(UC,Fre,Ire),ZZ=new tc(1e4);function eee(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=ZZ.get(i);n||(n=new RegExp(Oue(i),"i"),ZZ.set(i,n));let o=n.exec(e);return o?[{start:o.index,end:o.index+o[0].length}]:t?x0e(i,e):D0e(i,e)}function k0e(i,e,t,n,o,r){let s=Math.min(13,i.length);for(;t<s;t++){let a=X_(i,e,t,n,o,r,{firstMatchCanBeWeak:!1,boostFullMatch:!0});if(a)return a}return[0,r]}function $M(i){if(typeof i>"u")return[];let e=[],t=i[1];for(let n=i.length-1;n>1;n--){let o=i[n]+t,r=e[e.length-1];r&&r.end===o?r.end=o+1:e.push({start:o,end:o+1})}return e}var mh=128;function qY(){let i=[],e=[];for(let t=0;t<=mh;t++)e[t]=0;for(let t=0;t<=mh;t++)i.push(e.slice(0));return i}function Pre(i){let e=[];for(let t=0;t<=i;t++)e[t]=0;return e}var Ore=Pre(2*mh),A3=Pre(2*mh),yc=qY(),Lu=qY(),xy=qY();function ky(i,e){if(e<0||e>=i.length)return!1;let t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!sY(t)}}function tee(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function MS(i,e,t){return e[i]!==t[i]}function E0e(i,e,t,n,o,r,s=!1){for(;e<t&&o<r;)i[e]===n[o]&&(s&&(Ore[e]=o),e+=1),o+=1;return e===t}var Ja;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(Ja||(Ja={}));var yb=class{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};yb.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function X_(i,e,t,n,o,r,s=yb.default){let a=i.length>mh?mh:i.length,l=n.length>mh?mh:n.length;if(t>=a||r>=l||a-t>l-r||!E0e(e,t,a,o,r,l,!0))return;L0e(a,l,t,r,e,o);let c=1,d=1,h=t,u=r,g=[!1];for(c=1,h=t;h<a;c++,h++){let A=Ore[h],w=A3[h],C=h+1<a?A3[h+1]:l;for(d=A-r+1,u=A;u<C;d++,u++){let k=Number.MIN_SAFE_INTEGER,L=!1;u<=w&&(k=I0e(i,e,h,t,n,o,u,l,r,yc[c-1][d-1]===0,g));let S=0;k!==Number.MAX_SAFE_INTEGER&&(L=!0,S=k+Lu[c-1][d-1]);let y=u>A,M=y?Lu[c][d-1]+(yc[c][d-1]>0?-5:0):0,O=u>A+1&&yc[c][d-1]>0,H=O?Lu[c][d-2]+(yc[c][d-2]>0?-5:0):0;if(O&&(!y||H>=M)&&(!L||H>=S))Lu[c][d]=H,xy[c][d]=3,yc[c][d]=0;else if(y&&(!L||M>=S))Lu[c][d]=M,xy[c][d]=2,yc[c][d]=0;else if(L)Lu[c][d]=S,xy[c][d]=1,yc[c][d]=yc[c-1][d-1]+1;else throw new Error("not possible")}}if(!g[0]&&!s.firstMatchCanBeWeak)return;c--,d--;let p=[Lu[c][d],r],f=0,v=0;for(;c>=1;){let A=d;do{let w=xy[c][A];if(w===3)A=A-2;else if(w===2)A=A-1;else break}while(A>=1);f>1&&e[t+c-1]===o[r+d-1]&&!MS(A+r-1,n,o)&&f+1>yc[c][A]&&(A=d),A===d?f++:f=1,v||(v=A),c--,d=A-1,p.push(d)}l===a&&s.boostFullMatch&&(p[0]+=2);let b=v-a;return p[0]-=b,p}function L0e(i,e,t,n,o,r){let s=i-1,a=e-1;for(;s>=t&&a>=n;)o[s]===r[a]&&(A3[s]=a,s--),a--}function I0e(i,e,t,n,o,r,s,a,l,c,d){if(e[t]!==r[s])return Number.MIN_SAFE_INTEGER;let h=1,u=!1;return s===t-n?h=i[t]===o[s]?7:5:MS(s,o,r)&&(s===0||!MS(s-1,o,r))?(h=i[t]===o[s]?7:5,u=!0):ky(r,s)&&(s===0||!ky(r,s-1))?h=5:(ky(r,s-1)||tee(r,s-1))&&(h=5,u=!0),h>1&&t===n&&(d[0]=!0),u||(u=MS(s,o,r)||ky(r,s-1)||tee(r,s-1)),t===n?s>l&&(h-=u?3:5):c?h+=u?2:0:h+=u?0:1,s+1===a&&(h-=u?3:5),h}function T0e(i,e,t,n,o,r,s){return M0e(i,e,t,n,o,r,!0,s)}function M0e(i,e,t,n,o,r,s,a){let l=X_(i,e,t,n,o,r,a);if(l&&!s)return l;if(i.length>=3){let c=Math.min(7,i.length-1);for(let d=t+1;d<c;d++){let h=N0e(i,d);if(h){let u=X_(h,h.toLowerCase(),t,n,o,r,a);u&&(u[0]-=3,(!l||u[0]>l[0])&&(l=u))}}}return l}function N0e(i,e){if(e+1>=i.length)return;let t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}var P1="$(",$Y=new RegExp(`\\$\\(${ir.iconNameExpression}(?:${ir.iconModifierExpression})?\\)`,"g"),R0e=new RegExp(ir.iconNameCharacter),F0e=new RegExp(`(\\\\)?${$Y.source}`,"g");function B0e(i){return i.replace(F0e,(e,t)=>t?e:`\\${e}`)}var P0e=new RegExp(`\\\\${$Y.source}`,"g");function O0e(i){return i.replace(P0e,e=>`\\${e}`)}var H0e=new RegExp(`(\\s)?(\\\\)?${$Y.source}(\\s)?`,"g");function GY(i){return i.indexOf(P1)===-1?i:i.replace(H0e,(e,t,n,o)=>n?e:t||o||"")}function Sm(i){let e=i.indexOf(P1);return e===-1?{text:i}:W0e(i,e)}function W0e(i,e){let t=[],n="";function o(u){if(u){n+=u;for(let g of u)t.push(a)}}let r=-1,s="",a=0,l,c,d=e,h=i.length;for(o(i.substr(0,e));d<h;){if(l=i[d],c=i[d+1],l===P1[0]&&c===P1[1])r=d,o(s),s=P1,d++;else if(l===")"&&r!==-1){let u=d-r+1;a+=u,r=-1,s=""}else r!==-1?R0e.test(l)?s+=l:(o(s),r=-1,s=""):o(l);d++}return o(s),{text:n,iconOffsets:t}}function Ey(i,e,t=!1){let{text:n,iconOffsets:o}=e;if(!o||o.length===0)return eee(i,n,t);let r=bM(n," "),s=n.length-r.length,a=eee(i,r,t);if(a)for(let l of a){let c=o[l.start+s]+s;l.start+=c,l.end+=c}return a}var Zo=class{constructor(i="",e=!1){var t,n,o;if(this.value=i,typeof this.value!="string")throw Nt("value");typeof e=="boolean"?(this.isTrusted=e,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(t=e.isTrusted)!==null&&t!==void 0?t:void 0,this.supportThemeIcons=(n=e.supportThemeIcons)!==null&&n!==void 0?n:!1,this.supportHtml=(o=e.supportHtml)!==null&&o!==void 0?o:!1)}appendText(i,e=0){return this.value+=z0e(this.supportThemeIcons?B0e(i):i).replace(/([ \t]+)/g,(t,n)=>"&nbsp;".repeat(n.length)).replace(/\>/gm,"\\>").replace(/\n/g,e===1?`\\
`:`

`),this}appendMarkdown(i){return this.value+=i,this}appendCodeblock(i,e){return this.value+="\n```",this.value+=i,this.value+=`
`,this.value+=e,this.value+="\n```\n",this}appendLink(i,e,t){return this.value+="[",this.value+=this._escape(e,"]"),this.value+="](",this.value+=this._escape(String(i),")"),t&&(this.value+=` "${this._escape(this._escape(t,'"'),")")}"`),this.value+=")",this}_escape(i,e){let t=new RegExp(cs(e),"g");return i.replace(t,(n,o)=>i.charAt(o-1)!=="\\"?`\\${n}`:n)}};function Z_(i){return GM(i)?!i.value:Array.isArray(i)?i.every(Z_):!0}function GM(i){return i instanceof Zo?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function z0e(i){return i.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function Ly(i){return i.replace(/"/g,"&quot;")}function oR(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function Hre(i){let e=[],t=i.split("|").map(o=>o.trim());i=t[0];let n=t[1];if(n){let o=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),s=o?o[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(s));l&&e.push(`width="${a}"`),c&&e.push(`height="${s}"`)}return{href:i,dimensions:e}}var b3=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function V0e(i,e){Ji(e)?i.title=GY(e):e!=null&&e.markdownNotSupportedFallback?i.title=e.markdownNotSupportedFallback:i.removeAttribute("title")}var w3=class{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t,n){var o;return b3(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let r;if(e===void 0||Ji(e)||e instanceof HTMLElement)r=e;else if(!gD(e.markdown))r=(o=e.markdown)!==null&&o!==void 0?o:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(m("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new po;let s=this._cancellationTokenSource.token;if(r=yield e.markdown(s),r===void 0&&(r=e.markdownNotSupportedFallback),this.isDisposed||s.isCancellationRequested)return}this.show(r,t,n)})}show(e,t,n){let o=this._hoverWidget;if(this.hasContent(e)){let r=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!o},n);this._hoverWidget=this.hoverDelegate.showHover(r,t)}o?.dispose()}hasContent(e){return e?GM(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}};function Wre(i,e,t,n){let o,r,s=(d,h)=>{var u;d&&(r?.dispose(),r=void 0),h&&(o?.dispose(),o=void 0),(u=i.onDidHideHover)===null||u===void 0||u.call(i)},a=(d,h,u)=>new Sr(()=>b3(this,void 0,void 0,function*(){(!r||r.isDisposed)&&(r=new w3(i,u||e,d>0),yield r.update(t,h,n))}),d),l=()=>{if(o)return;let d=new ne,h=p=>s(!1,p.fromElement===e);d.add(le(e,Ee.MOUSE_LEAVE,h,!0));let u=()=>s(!0,!0);d.add(le(e,Ee.MOUSE_DOWN,u,!0));let g={targetElements:[e],dispose:()=>{}};if(i.placement===void 0||i.placement==="mouse"){let p=f=>{g.x=f.x+10,f.target instanceof HTMLElement&&f.target.classList.contains("action-label")&&s(!0,!0)};d.add(le(e,Ee.MOUSE_MOVE,p,!0))}d.add(a(i.delay,!1,g)),o=d},c=le(e,Ee.MOUSE_OVER,l,!0);return{show:d=>{s(!1,!0),a(0,d)},hide:()=>{s(!0,!0)},update:(d,h)=>b3(this,void 0,void 0,function*(){t=d,yield r?.update(t,void 0,h)}),dispose:()=>{c.dispose(),s(!0,!0)}}}var ta=class extends J{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof ho&&this._register(t.onDidChange(o=>{this.element&&this.handleActionChangeEvent(o)}))}get action(){return this._action}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Wh)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){let t=this.element=e;this._register(to.addTarget(e));let n=this.options&&this.options.draggable;n&&(e.draggable=!0,as&&this._register(le(e,Ee.DRAG_START,o=>{var r;return(r=o.dataTransfer)===null||r===void 0?void 0:r.setData(VC.TEXT,this._action.label)}))),this._register(le(t,yi.Tap,o=>this.onClick(o,!0))),this._register(le(t,Ee.MOUSE_DOWN,o=>{n||ii.stop(o,!0),this._action.enabled&&o.button===0&&t.classList.add("active")})),gt&&this._register(le(t,Ee.CONTEXT_MENU,o=>{o.button===0&&o.ctrlKey===!0&&this.onClick(o)})),this._register(le(t,Ee.CLICK,o=>{ii.stop(o,!0),this.options&&this.options.isMenu||this.onClick(o)})),this._register(le(t,Ee.DBLCLICK,o=>{ii.stop(o,!0)})),[Ee.MOUSE_UP,Ee.MOUSE_OUT].forEach(o=>{this._register(le(t,o,r=>{ii.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var n;ii.stop(e,!0);let o=Uo(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,o)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.getAction().tooltip}updateTooltip(){var e;if(!this.element)return;let t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=Wre(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}},hp=class extends ta{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=ae(this.element,ge("a.action-label"))),this.label&&(this._action.id===Lo.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(ae(this.element,ge("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=m({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}},U0e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},wa=class extends J{constructor(e,t={}){var n,o,r,s,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Q),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new Q({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new Q),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new Q),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(o=this.options.orientation)!==null&&o!==void 0?o:0,this._triggerKeys={keyDown:(s=(r=this.options.triggerKeys)===null||r===void 0?void 0:r.keyDown)!==null&&s!==void 0?s:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Wh,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(h=>this._onDidRun.fire(h))),this._register(this._actionRunner.onBeforeRun(h=>this._onBeforeRun.fire(h))),this._actionIds=[],this.viewItems=[],this.viewItemDisposables=new Map,this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,d;switch(this._orientation){case 0:c=[15],d=[17];break;case 1:c=[16],d=[18],this.domNode.className+=" vertical";break}this._register(le(this.domNode,Ee.KEY_DOWN,h=>{let u=new ni(h),g=!0,p=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(u.equals(c[0])||u.equals(c[1]))?g=this.focusPrevious():d&&(u.equals(d[0])||u.equals(d[1]))?g=this.focusNext():u.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():u.equals(14)?g=this.focusFirst():u.equals(13)?g=this.focusLast():u.equals(2)&&p instanceof ta&&p.trapsArrowNavigation?g=this.focusNext():this.isTriggerKeyEvent(u)?this._triggerKeys.keyDown?this.doTrigger(u):this.triggerKeyDown=!0:g=!1,g&&(u.preventDefault(),u.stopPropagation())})),this._register(le(this.domNode,Ee.KEY_UP,h=>{let u=new ni(h);this.isTriggerKeyEvent(u)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(u)),u.preventDefault(),u.stopPropagation()):(u.equals(2)||u.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(Oh(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Of()===this.domNode||!hd(Of(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){let t=this.viewItems.find(n=>n instanceof ta&&n.isEnabled());t instanceof ta&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof ta&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){let t=this.actionsList.children[e];if(hd(Of(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){let n=Array.isArray(e)?e:[e],o=Xa(t.index)?t.index:null;n.forEach(r=>{let s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation");let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r)),a||(a=new hp(this.context,r,Object.assign({hoverDelegate:this.options.hoverDelegate},t))),this.options.allowContextMenu||this.viewItemDisposables.set(a,le(s,Ee.CONTEXT_MENU,l=>{ii.stop(l,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(s),this.focusable&&a instanceof ta&&this.viewItems.length===0&&a.setFocusable(!0),o===null||o<0||o>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(a),this._actionIds.push(r.id)):(this.actionsList.insertBefore(s,this.actionsList.children[o]),this.viewItems.splice(o,0,a),this._actionIds.splice(o,0,r.id),o++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){st(this.viewItems),this.viewItemDisposables.forEach(e=>e.dispose()),this.viewItemDisposables.clear(),this.viewItems=[],this._actionIds=[],Sn(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){let o=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=o===-1?void 0:o,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let t=this.focusedItem,n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Lo.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let t=this.focusedItem,n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Lo.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var o;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((o=this.viewItems[this.previouslyFocusedItem])===null||o===void 0||o.blur());let r=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(r){let s=!0;gD(r.focus)||(s=!1),this.options.focusOnlyEnabledItems&&gD(r.isEnabled)&&!r.isEnabled()&&(s=!1),r.action.id===Lo.ID&&(s=!1),s?(n||this.previouslyFocusedItem!==this.focusedItem)&&(r.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;let t=this.viewItems[this.focusedItem];if(t instanceof ta){let n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return U0e(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){st(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}},Q0e={IconContribution:"base.contributions.icons"},iee;(function(i){function e(t,n){let o=t.defaults;for(;zt.isThemeIcon(o);){let r=nm.getIcon(o.id);if(!r)return;o=r.defaults}return o}i.getDefinition=e})(iee||(iee={}));var nee;(function(i){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(o=>({format:o.format,location:o.location.toString()}))}}i.toJSONObject=e;function t(n){let o=r=>Ji(r)?r:void 0;if(n&&Array.isArray(n.src)&&n.src.every(r=>Ji(r.format)&&Ji(r.location)))return{weight:o(n.weight),style:o(n.style),src:n.src.map(r=>({format:r.format,location:$.parse(r.location)}))}}i.fromJSONObject=t})(nee||(nee={}));var C3=class{constructor(){this._onDidChange=new Q,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:m("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:m("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${ir.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,o){let r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;let l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}let s={id:e,description:n,defaults:t,deprecationMessage:o};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return o&&(a.deprecationMessage=o),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){let e=(r,s)=>r.id.localeCompare(s.id),t=r=>{for(;zt.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let o=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(let r of o.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${zt.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(let r of o.filter(s=>!zt.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}},nm=new C3;oi.add(Q0e.IconContribution,nm);function mn(i,e,t,n){return nm.registerIcon(i,e,t,n)}function zre(){return nm}function j0e(){for(let i of _.getAll())nm.registerIcon(i.id,i.definition,i.description)}j0e();var Vre="vscode://schemas/icons",Ure=oi.as(ev.JSONContribution);Ure.registerSchema(Vre,nm.getIconSchema());var oee=new jt(()=>Ure.notifySchemaChanged(Vre),200);nm.onDidChange(()=>{oee.isScheduled()||oee.schedule()});var Qre=mn("widget-close",_.close,m("widgetClose","Icon for the close action in widgets."));mn("goto-previous-location",_.arrowUp,m("previousChangeIcon","Icon for goto previous editor location."));mn("goto-next-location",_.arrowDown,m("nextChangeIcon","Icon for goto next editor location."));zt.modify(_.sync,"spin");zt.modify(_.loading,"spin");var K0e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},q0e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},$0e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},rR,Iy=3,Zu=class{constructor(e,t,n,o){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=o}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}},O1=class{constructor(e){this.entries=e}},G0e=mn("diff-review-insert",_.add,m("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),Y0e=mn("diff-review-remove",_.remove,m("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),J0e=mn("diff-review-close",_.close,m("diffReviewCloseIcon","Icon for 'Close' in diff review.")),Ck=class Hu extends J{constructor(e,t){super(),this._languageService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=Pt(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=Pt(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new wa(this.actionBarContainer.domNode)),this._actionBar.push(new ho("diffreview.close",m("label.close","Close"),"close-diff-review "+zt.asClassName(J0e),!0,()=>$0e(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=Pt(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=Pt(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new ap(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(Tn(this.domNode.domNode,"click",n=>{n.preventDefault();let o=Gne(n.target,"diff-review-row");o&&this._goToRow(o)})),this._register(Tn(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let o=0,r=this._diffs.length;o<r;o++)if(this._diffs[o]===this._currentDiff){n=o;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;let t=this._diffs[e].entries;this._diffEditor.setPosition(new q(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let o=0,r=this._diffs.length;o<r;o++)if(this._diffs[o]===this._currentDiff){n=o;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;let t=this._diffs[e].entries;this._diffEditor.setPosition(new q(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new q(e,1)),this._diffEditor.revealPosition(new q(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){let e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];let t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:Hu._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let o=[],r=0;for(let c=0,d=e.length;c<d;c++){let h=e[c],u=h.originalStartLineNumber,g=h.originalEndLineNumber,p=h.modifiedStartLineNumber,f=h.modifiedEndLineNumber,v=[],b=0;{let A=g===0?u:u-1,w=f===0?p:p-1,C=1,k=1;if(c>0){let y=e[c-1];y.originalEndLineNumber===0?C=y.originalStartLineNumber+1:C=y.originalEndLineNumber+1,y.modifiedEndLineNumber===0?k=y.modifiedStartLineNumber+1:k=y.modifiedEndLineNumber+1}let L=A-Iy+1,S=w-Iy+1;if(L<C){let y=C-L;L=L+y,S=S+y}if(S<k){let y=k-S;L=L+y,S=S+y}v[b++]=new Zu(L,A,S,w)}g!==0&&(v[b++]=new Zu(u,g,0,0)),f!==0&&(v[b++]=new Zu(0,0,p,f));{let A=g===0?u+1:g+1,w=f===0?p+1:f+1,C=t,k=n;if(c+1<d){let y=e[c+1];y.originalEndLineNumber===0?C=y.originalStartLineNumber:C=y.originalStartLineNumber-1,y.modifiedEndLineNumber===0?k=y.modifiedStartLineNumber:k=y.modifiedStartLineNumber-1}let L=A+Iy-1,S=w+Iy-1;if(L>C){let y=C-L;L=L+y,S=S+y}if(S>k){let y=k-S;L=L+y,S=S+y}v[b++]=new Zu(A,L,w,S)}o[r++]=new O1(v)}let s=o[0].entries,a=[],l=0;for(let c=1,d=o.length;c<d;c++){let h=o[c].entries,u=s[s.length-1],g=h[0];if(u.getType()===0&&g.getType()===0&&g.originalLineStart<=u.originalLineEnd){s[s.length-1]=new Zu(u.originalLineStart,g.originalLineEnd,u.modifiedLineStart,g.modifiedLineEnd),s=s.concat(h.slice(1));continue}a[l++]=new O1(s),s=h}return a[l++]=new O1(s),a}_findDiffIndex(e){let t=e.lineNumber;for(let n=0,o=this._diffs.length;n<o;n++){let r=this._diffs[n].entries,s=r[r.length-1].modifiedLineEnd;if(t<=s)return n}return 0}_render(){let e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),o=this._diffEditor.getModifiedEditor().getModel(),r=n.getOptions(),s=o.getOptions();if(!this._isVisible||!n||!o){Sn(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});let a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];let l=this._diffs[a].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),To(c,t.get(46));let d=0,h=0,u=0,g=0;for(let S=0,y=l.length;S<y;S++){let M=l[S],O=M.originalLineStart,H=M.originalLineEnd,D=M.modifiedLineStart,K=M.modifiedLineEnd;O!==0&&(d===0||O<d)&&(d=O),H!==0&&(h===0||H>h)&&(h=H),D!==0&&(u===0||D<u)&&(u=D),K!==0&&(g===0||K>g)&&(g=K)}let p=document.createElement("div");p.className="diff-review-row";let f=document.createElement("div");f.className="diff-review-cell diff-review-summary";let v=h-d+1,b=g-u+1;f.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${v} +${u},${b} @@`)),p.setAttribute("data-line",String(u));let A=S=>S===0?m("no_lines_changed","no lines changed"):S===1?m("one_line_changed","1 line changed"):m("more_lines_changed","{0} lines changed",S),w=A(v),C=A(b);p.setAttribute("aria-label",m({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,w,u,C)),p.appendChild(f),p.setAttribute("role","listitem"),c.appendChild(p);let k=t.get(61),L=u;for(let S=0,y=l.length;S<y;S++){let M=l[S];Hu._renderSection(c,M,L,k,this._width,e,n,r,t,o,s,this._languageService.languageIdCodec),M.modifiedLineStart!==0&&(L=M.modifiedLineEnd)}Sn(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,o,r,s,a,l,c,d,h,u){let g=t.getType(),p="diff-review-row",f="",v="diff-review-spacer",b=null;switch(g){case 1:p="diff-review-row line-insert",f=" char-insert",b=G0e;break;case 2:p="diff-review-row line-delete",f=" char-delete",b=Y0e;break}let A=t.originalLineStart,w=t.originalLineEnd,C=t.modifiedLineStart,k=t.modifiedLineEnd,L=Math.max(k-C,w-A),S=s.get(133),y=S.glyphMarginWidth+S.lineNumbersWidth,M=c.get(133),O=10+M.glyphMarginWidth+M.lineNumbersWidth;for(let H=0;H<=L;H++){let D=A===0?0:A+H,K=C===0?0:C+H,oe=document.createElement("div");oe.style.minWidth=r+"px",oe.className=p,oe.setAttribute("role","listitem"),K!==0&&(n=K),oe.setAttribute("data-line",String(n));let ie=document.createElement("div");ie.className="diff-review-cell",ie.style.height=`${o}px`,oe.appendChild(ie);let ce=document.createElement("span");ce.style.width=y+"px",ce.style.minWidth=y+"px",ce.className="diff-review-line-number"+f,D!==0?ce.appendChild(document.createTextNode(String(D))):ce.innerText="\xA0",ie.appendChild(ce);let se=document.createElement("span");se.style.width=O+"px",se.style.minWidth=O+"px",se.style.paddingRight="10px",se.className="diff-review-line-number"+f,K!==0?se.appendChild(document.createTextNode(String(K))):se.innerText="\xA0",ie.appendChild(se);let _e=document.createElement("span");if(_e.className=v,b){let pt=document.createElement("span");pt.className=zt.asClassName(b),pt.innerText="\xA0\xA0",_e.appendChild(pt)}else _e.innerText="\xA0\xA0";ie.appendChild(_e);let Ve;if(K!==0){let pt=this._renderLine(d,c,h.tabSize,K,u);Hu._ttPolicy&&(pt=Hu._ttPolicy.createHTML(pt)),ie.insertAdjacentHTML("beforeend",pt),Ve=d.getLineContent(K)}else{let pt=this._renderLine(a,s,l.tabSize,D,u);Hu._ttPolicy&&(pt=Hu._ttPolicy.createHTML(pt)),ie.insertAdjacentHTML("beforeend",pt),Ve=a.getLineContent(D)}Ve.length===0&&(Ve=m("blankLine","blank"));let Qe="";switch(g){case 0:D===K?Qe=m({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",Ve,D):Qe=m("equalLine","{0} original line {1} modified line {2}",Ve,D,K);break;case 1:Qe=m("insertLine","+ {0} modified line {1}",Ve,K);break;case 2:Qe=m("deleteLine","- {0} original line {1}",Ve,D);break}oe.setAttribute("aria-label",Qe),e.appendChild(oe)}}static _renderLine(e,t,n,o,r){let s=e.getLineContent(o),a=t.get(46),l=No.createEmpty(s,r),c=Rs.isBasicASCII(s,e.mightContainNonBasicASCII()),d=Rs.containsRTL(s,c,e.mightContainRTL());return UM(new Xl(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,s,!1,c,d,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(107),t.get(90),t.get(85),t.get(47)!==$l.OFF,null)).html}};Ck._ttPolicy=(rR=window.trustedTypes)===null||rR===void 0?void 0:rR.createPolicy("diffReview",{createHTML:i=>i});Ck=K0e([q0e(1,ki)],Ck);xi((i,e)=>{let t=i.getColor(are);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);let n=i.getColor(nv);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});var y3=class extends Ie{constructor(){super({id:"editor.action.diffReview.next",label:m("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:we.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){let n=jre(e);n&&n.diffReviewNext()}},S3=class extends Ie{constructor(){super({id:"editor.action.diffReview.prev",label:m("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:we.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){let n=jre(e);n&&n.diffReviewPrev()}};function jre(i){let e=i.get(Ft),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let o=0,r=t.length;o<r;o++){let s=t[o];if(s.getModifiedEditor().getId()===n.getId()||s.getOriginalEditor().getId()===n.getId())return s}return null}fe(y3);fe(S3);var X0e="editorWorkerService",Qr=ze(X0e),om=ze("contextViewService"),Fd=ze("contextMenuService"),sR=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},D3=class extends J{constructor(e,t,n,o,r,s){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=o,this._contextMenuService=r,this._clipboardService=s,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=_.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";let a=n.getOption(61),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);let c=[],d=o.modifiedEndLineNumber===0;c.push(new ho("diff.clipboard.copyDeletedContent",d?o.originalEndLineNumber>o.modifiedStartLineNumber?m("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):m("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):o.originalEndLineNumber>o.modifiedStartLineNumber?m("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):m("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>sR(this,void 0,void 0,function*(){let p=new E(o.originalStartLineNumber,1,o.originalEndLineNumber+1,1),f=o.originalModel.getValueInRange(p);yield this._clipboardService.writeText(f)})));let h=0,u;o.originalEndLineNumber>o.modifiedStartLineNumber&&(u=new ho("diff.clipboard.copyDeletedLineContent",d?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.originalStartLineNumber):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",o.originalStartLineNumber),void 0,!0,()=>sR(this,void 0,void 0,function*(){let p=o.originalModel.getLineContent(o.originalStartLineNumber+h);if(p===""){let f=o.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(f===0?`
`:`\r
`)}else yield this._clipboardService.writeText(p)})),c.push(u)),n.getOption(83)||c.push(new ho("diff.inline.revertChange",m("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>sR(this,void 0,void 0,function*(){let p=new E(o.originalStartLineNumber,1,o.originalEndLineNumber,o.originalModel.getLineMaxColumn(o.originalEndLineNumber)),f=o.originalModel.getValueInRange(p);if(o.modifiedEndLineNumber===0){let v=n.getModel().getLineMaxColumn(o.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new E(o.modifiedStartLineNumber,v,o.modifiedStartLineNumber,v),text:l+f}])}else{let v=n.getModel().getLineMaxColumn(o.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new E(o.modifiedStartLineNumber,1,o.modifiedEndLineNumber,v),text:f}])}})));let g=(p,f)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:p,y:f}),getActions:()=>(u&&(u.label=d?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.originalStartLineNumber+h):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",o.originalStartLineNumber+h)),c),autoSelectFirstItem:!0})};this._register(Tn(this._diffActions,"mousedown",p=>{let{top:f,height:v}=Eo(this._diffActions),b=Math.floor(a/3);p.preventDefault(),g(p.posx,f+v+b)})),this._register(n.onMouseMove(p=>{p.target.type===8||p.target.type===5?p.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(p=>{p.event.rightButton&&(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._viewZoneId&&(p.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a),g(p.event.posx,p.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){let{top:o}=Eo(e),r=t-o,s=Math.floor(r/n),a=s*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],s<l)return c}return s}},Da=ze("clipboardService"),QC=ze("progressService"),ic=class{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};ic.None=Object.freeze({report(){}});var bu=ze("editorProgressService"),Z0e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Sc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},aR,yk=class{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(let n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},e.changeDecorations(t=>{this._decorations=t.deltaDecorations(this._decorations,[])})}apply(e,t,n,o){let r=o?Zh.capture(e):null;e.changeViewZones(s=>{var a;for(let l of this._zones)s.removeZone(l);for(let l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=n.zones.length;l<c;l++){let d=n.zones[l];d.suppressMouseDown=!0;let h=s.addZone(d);this._zones.push(h),this._zonesMap[String(h)]=!0,n.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new D3(h,d.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),r?.restore(e),e.changeDecorations(s=>{this._decorations=s.deltaDecorations(this._decorations,n.decorations)}),t?.setZones(n.overviewZones)}},eve=0,tve=mn("diff-insert",_.add,m("diffInsertIcon","Line decoration for inserts in the diff editor.")),Kre=mn("diff-remove",_.remove,m("diffRemoveIcon","Line decoration for removals in the diff editor.")),ree=(aR=window.trustedTypes)===null||aR===void 0?void 0:aR.createPolicy("diffEditorWidget",{createHTML:i=>i}),eu=class _o extends J{constructor(e,t,n,o,r,s,a,l,c,d,h,u){super(),this._editorProgressService=u,this._onDidDispose=this._register(new Q),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new Q),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new Q),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=r,this._codeEditorService=l,this._contextKeyService=this._register(s.createScoped(e)),this._instantiationService=a.createChild(new $_([Ze,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=d,this._id=++eve,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=see(t,{enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new jt(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=_o._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=Pt(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Tn(this._overviewDomElement,Ee.POINTER_DOWN,p=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(p)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new yk(h,o),this._modifiedEditorState=new yk(h,o),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new $D(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(Ck,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Sb(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new kk(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(c.onDidColorThemeChange(p=>{this._strategy&&this._strategy.applyColors(p)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=_o._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));let g=xg.getDiffEditorContributions();for(let p of g)try{this._register(a.createInstance(p.ctor,this))}catch(f){Ye(f)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=RD(e.type),n}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){this._options.renderOverviewRuler&&(vr(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){let n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(r=>{n.getModel()&&(r.hasChanged(46)&&this._updateDecorationsRunner.schedule(),r.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));let o=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>o.set(!0))),this._register(n.onDidBlurEditorWidget(()=>o.set(!1))),this._register(n.onDidContentSizeChange(r=>{let s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+_o.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){let n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(r=>{n.getModel()&&(r.hasChanged(46)&&this._updateDecorationsRunner.schedule(),r.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(r=>{r.tabSize&&this._updateDecorationsRunner.schedule()}));let o=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>o.set(!0))),this._register(n.onDidBlurEditorWidget(()=>o.set(!1))),this._register(n.onDidContentSizeChange(r=>{let s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+_o.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),this._register(n.onMouseDown(r=>{var s,a;if(!r.event.rightButton&&r.target.position&&!((s=r.target.element)===null||s===void 0)&&s.className.includes("arrow-revert-change")){let l=r.target.position.lineNumber,c=(a=this._diffComputationResult)===null||a===void 0?void 0:a.changes.find(d=>d.modifiedStartLineNumber===l-1||d.modifiedStartLineNumber===l);c&&this.revertChange(c),r.event.stopPropagation(),this._updateDecorations();return}})),n}revertChange(e){let t=this._modifiedEditor,n=this._originalEditor.getModel(),o=this._modifiedEditor.getModel();if(!n||!o||!t)return;let r=e.originalEndLineNumber>0?new E(e.originalStartLineNumber,1,e.originalEndLineNumber,n.getLineMaxColumn(e.originalEndLineNumber)):null,s=r?n.getValueInRange(r):null,a=e.modifiedEndLineNumber>0?new E(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,o.getLineMaxColumn(e.modifiedEndLineNumber)):null,l=o.getEOL();if(e.originalEndLineNumber===0&&a){let c=a;e.modifiedStartLineNumber>1?c=a.setStartPosition(e.modifiedStartLineNumber-1,o.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<o.getLineCount()&&(c=a.setEndPosition(e.modifiedEndLineNumber+1,1)),t.executeEdits("diffEditor",[{range:c,text:""}])}else if(e.modifiedEndLineNumber===0&&s!==null){let c=e.modifiedStartLineNumber<o.getLineCount()?new q(e.modifiedStartLineNumber+1,1):new q(e.modifiedStartLineNumber,o.getLineMaxColumn(e.modifiedStartLineNumber));t.executeEdits("diffEditor",[{range:E.fromPositions(c,c),text:e.modifiedStartLineNumber<o.getLineCount()?s+l:l+s}])}else a&&s!==null&&t.executeEdits("diffEditor",[{range:a,text:s}])}_createInnerEditor(e,t,n,o){return e.createInstance(G_,t,n,o)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return zC.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){let t=see(e,this._options),n=ove(this._options,t);this._options=t;let o=n.ignoreTrimWhitespace||n.renderIndicators||n.renderMarginRevertIcon,r=this._isVisible&&(n.maxComputationTime||n.maxFileSize);o?this._beginUpdateDecorations():r&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Sb(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new kk(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=_o._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,t="api"){this._modifiedEditor.setPosition(e,t)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,t="api"){this._modifiedEditor.setSelection(e,t)}setSelections(e,t="api"){this._modifiedEditor.setSelections(e,t)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,o=!0){this._modifiedEditor.revealRange(e,t,n,o)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){let e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){let t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;let e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=_o.ENTIRE_DIFF_OVERVIEW_WIDTH-2*_o.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:_o.ONE_OVERVIEW_WIDTH,right:n+_o.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:_o.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),_o.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;let e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;let n=this._diffComputationToken,o=this._options.maxFileSize*1024*1024,r=s=>{let a=s.getValueLength();return o===0||a<=o};if(!r(e)||!r(t)){(!_o._equals(e.uri,this._lastOriginalWarning)||!_o._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(m("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(s=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=s,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},s=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;let e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),o=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,this._options.renderMarginRevertIcon,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,o.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,o.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){let t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){let t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:(t.wordWrapOverride1="off",t.wordWrapOverride2="off"),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){let t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=ll.revealHorizontalRightPadding.defaultValue+_o.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){let e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),o=this._strategy.layout();this._originalDomNode.style.width=o+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-o+"px",this._modifiedDomNode.style.left=o+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=_o.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-_o.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(_o.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:o,height:t-n}),this._modifiedEditor.layout({width:e-o-(this._options.renderOverviewRuler?_o.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){let e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){let e=this._modifiedEditor.getLayoutInfo();if(!e)return null;let t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),o=Math.max(0,e.height),r=Math.max(0,o-2*0),s=n>0?r/n:0,a=Math.max(0,Math.floor(e.height*s)),l=Math.floor(t*s);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){let n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let o=0,r=n.length-1;for(;o<r;){let s=Math.floor((o+r)/2),a=t(n[s]),l=s+1<=r?t(n[s+1]):1073741824;e<a?r=s-1:e>=l?o=s+1:(o=s,r=s)}return n[o]}_getEquivalentLineForOriginalLineNumber(e){let t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;let n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),o=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=r?o+Math.min(a,s):o+s-r+a}_getEquivalentLineForModifiedLineNumber(e){let t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;let n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),o=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-o;return a<=s?n+Math.min(a,r):n+r-s+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};eu.ONE_OVERVIEW_WIDTH=15;eu.ENTIRE_DIFF_OVERVIEW_WIDTH=30;eu.UPDATE_DIFF_DECORATIONS_DELAY=200;eu=Z0e([Sc(3,Da),Sc(4,Qr),Sc(5,Ze),Sc(6,tt),Sc(7,Ft),Sc(8,mi),Sc(9,nn),Sc(10,Fd),Sc(11,bu)],eu);var Sk=class extends J{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){let t=e.getColor(Zpe)||(e.getColor(Goe)||KP).transparent(2),n=e.getColor(eme)||(e.getColor(Yoe)||qP).transparent(2),o=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,o}getEditorsDiffDecorations(e,t,n,o,r,s){s=s.sort((d,h)=>d.afterLineNumber-h.afterLineNumber),r=r.sort((d,h)=>d.afterLineNumber-h.afterLineNumber);let a=this._getViewZones(e,r,s,n),l=this._getOriginalEditorDecorations(a,e,t,n),c=this._getModifiedEditorDecorations(a,e,t,n,o);return{original:{decorations:l.decorations,overviewZones:l.overviewZones,zones:a.original},modified:{decorations:c.decorations,overviewZones:c.overviewZones,zones:a.modified}}}},Dk=class{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}},xk=class i{constructor(e,t,n,o,r){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=o,this._modifiedEditor=r}static _getViewLineCount(e,t,n){let o=e.getModel(),r=e._getViewModel();if(o&&r){let s=Db(o,r,t,n);return s.endLineNumber-s.startLineNumber+1}return n-t+1}getViewZones(){let e=this._originalEditor.getOption(61),t=this._modifiedEditor.getOption(61),n=this._originalEditor.getOption(134).wrappingColumn!==-1,o=this._modifiedEditor.getOption(134).wrappingColumn!==-1,r=n||o,s=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]},d=0,h=0,u=0,g=0,p=0,f=0,v=(L,S)=>L.afterLineNumber-S.afterLineNumber,b=(L,S)=>{if(S.domNode===null&&L.length>0){let y=L[L.length-1];if(y.afterLineNumber===S.afterLineNumber&&y.domNode===null){y.heightInLines+=S.heightInLines;return}}L.push(S)},A=new Dk(this._modifiedForeignVZ),w=new Dk(this._originalForeignVZ),C=1,k=1;for(let L=0,S=this._lineChanges.length;L<=S;L++){let y=L<S?this._lineChanges[L]:null;y!==null?(u=y.originalStartLineNumber+(y.originalEndLineNumber>0?-1:0),g=y.modifiedStartLineNumber+(y.modifiedEndLineNumber>0?-1:0),h=y.originalEndLineNumber>0?i._getViewLineCount(this._originalEditor,y.originalStartLineNumber,y.originalEndLineNumber):0,d=y.modifiedEndLineNumber>0?i._getViewLineCount(this._modifiedEditor,y.modifiedStartLineNumber,y.modifiedEndLineNumber):0,p=Math.max(y.originalStartLineNumber,y.originalEndLineNumber),f=Math.max(y.modifiedStartLineNumber,y.modifiedEndLineNumber)):(u+=1e7+h,g+=1e7+d,p=u,f=g);let M=[],O=[];if(r){let K;y?y.originalEndLineNumber>0?K=y.originalStartLineNumber-C:K=y.modifiedStartLineNumber-k:K=s.getLineCount()-C+1;for(let oe=0;oe<K;oe++){let ie=C+oe,ce=k+oe,se=a.getModelLineViewLineCount(ie),_e=l.getModelLineViewLineCount(ce);se<_e?M.push({afterLineNumber:ie,heightInLines:_e-se,domNode:null,marginDomNode:null}):se>_e&&O.push({afterLineNumber:ce,heightInLines:se-_e,domNode:null,marginDomNode:null})}y&&(C=(y.originalEndLineNumber>0?y.originalEndLineNumber:y.originalStartLineNumber)+1,k=(y.modifiedEndLineNumber>0?y.modifiedEndLineNumber:y.modifiedStartLineNumber)+1)}for(;A.current&&A.current.afterLineNumber<=f;){let K;A.current.afterLineNumber<=g?K=u-g+A.current.afterLineNumber:K=p;let oe=null;y&&y.modifiedStartLineNumber<=A.current.afterLineNumber&&A.current.afterLineNumber<=y.modifiedEndLineNumber&&(oe=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),M.push({afterLineNumber:K,heightInLines:A.current.height/t,domNode:null,marginDomNode:oe}),A.advance()}for(;w.current&&w.current.afterLineNumber<=p;){let K;w.current.afterLineNumber<=u?K=g-u+w.current.afterLineNumber:K=f,O.push({afterLineNumber:K,heightInLines:w.current.height/e,domNode:null}),w.advance()}if(y!==null&&Ek(y)){let K=this._produceOriginalFromDiff(y,h,d);K&&M.push(K)}if(y!==null&&Lk(y)){let K=this._produceModifiedFromDiff(y,h,d);K&&O.push(K)}let H=0,D=0;for(M=M.sort(v),O=O.sort(v);H<M.length&&D<O.length;){let K=M[H],oe=O[D],ie=K.afterLineNumber-u,ce=oe.afterLineNumber-g;ie<ce?(b(c.original,K),H++):ce<ie?(b(c.modified,oe),D++):K.shouldNotShrink?(b(c.original,K),H++):oe.shouldNotShrink?(b(c.modified,oe),D++):K.heightInLines>=oe.heightInLines?(K.heightInLines-=oe.heightInLines,D++):(oe.heightInLines-=K.heightInLines,H++)}for(;H<M.length;)b(c.original,M[H]),H++;for(;D<O.length;)b(c.modified,O[D]),D++}return{original:i._ensureDomNodes(c.original),modified:i._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=Gre()),t))}};function zc(i,e,t,n,o){return{range:new E(i,e,t,n),options:o}}var Go={arrowRevertChange:rt.register({description:"diff-editor-arrow-revert-change",glyphMarginClassName:"arrow-revert-change "+zt.asClassName(_.arrowRight)}),charDelete:rt.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:rt.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:rt.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:rt.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:rt.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:rt.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+zt.asClassName(tve),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:rt.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:rt.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+zt.asClassName(Kre),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:rt.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})},Sb=class i extends Sk{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Ka(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){let t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){let t=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?eu.ENTIRE_DIFF_OVERVIEW_WIDTH:0),n=Math.floor((e||.5)*t),o=Math.floor(.5*t);return n=this._disableSash?o:n||o,t>i.MINIMUM_EDITOR_WIDTH*2?(n<i.MINIMUM_EDITOR_WIDTH&&(n=i.MINIMUM_EDITOR_WIDTH),n>t-i.MINIMUM_EDITOR_WIDTH&&(n=t-i.MINIMUM_EDITOR_WIDTH)):n=o,this._sashPosition!==n&&(this._sashPosition=n),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){let t=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?eu.ENTIRE_DIFF_OVERVIEW_WIDTH:0),n=this.layout((this._startSashPosition+(e.currentX-e.startX))/t);this._sashRatio=n/t,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){let o=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new x3(e,t,n,o,r).getViewZones()}_getOriginalEditorDecorations(e,t,n,o){let r=this._dataSource.getOriginalEditor(),s=String(this._removeColor),a={decorations:[],overviewZones:[]},l=r.getModel(),c=r._getViewModel();for(let d of t)if(Lk(d)){a.decorations.push({range:new E(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:o?Go.lineDeleteWithSign:Go.lineDelete}),(!Ek(d)||!d.charChanges)&&a.decorations.push(zc(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,Go.charDeleteWholeLine));let h=Db(l,c,d.originalStartLineNumber,d.originalEndLineNumber);if(a.overviewZones.push(new cp(h.startLineNumber,h.endLineNumber,0,s)),d.charChanges){for(let u of d.charChanges)if($re(u))if(n)for(let g=u.originalStartLineNumber;g<=u.originalEndLineNumber;g++){let p,f;g===u.originalStartLineNumber?p=u.originalStartColumn:p=l.getLineFirstNonWhitespaceColumn(g),g===u.originalEndLineNumber?f=u.originalEndColumn:f=l.getLineLastNonWhitespaceColumn(g),a.decorations.push(zc(g,p,g,f,Go.charDelete))}else a.decorations.push(zc(u.originalStartLineNumber,u.originalStartColumn,u.originalEndLineNumber,u.originalEndColumn,Go.charDelete))}}return a}_getModifiedEditorDecorations(e,t,n,o,r){let s=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=s.getModel(),d=s._getViewModel();for(let h of t){if(r)if(h.modifiedEndLineNumber>0)l.decorations.push({range:new E(h.modifiedStartLineNumber,1,h.modifiedStartLineNumber,1),options:Go.arrowRevertChange});else{let u=e.modified.find(g=>g.afterLineNumber===h.modifiedStartLineNumber);u&&(u.marginDomNode=nve())}if(Ek(h)){l.decorations.push({range:new E(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:o?Go.lineInsertWithSign:Go.lineInsert}),(!Lk(h)||!h.charChanges)&&l.decorations.push(zc(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Go.charInsertWholeLine));let u=Db(c,d,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(l.overviewZones.push(new cp(u.startLineNumber,u.endLineNumber,0,a)),h.charChanges){for(let g of h.charChanges)if(qre(g))if(n)for(let p=g.modifiedStartLineNumber;p<=g.modifiedEndLineNumber;p++){let f,v;p===g.modifiedStartLineNumber?f=g.modifiedStartColumn:f=c.getLineFirstNonWhitespaceColumn(p),p===g.modifiedEndLineNumber?v=g.modifiedEndColumn:v=c.getLineLastNonWhitespaceColumn(p),l.decorations.push(zc(p,f,p,v,Go.charInsert))}else l.decorations.push(zc(g.modifiedStartLineNumber,g.modifiedStartColumn,g.modifiedEndLineNumber,g.modifiedEndColumn,Go.charInsert))}}}return l}};Sb.MINIMUM_EDITOR_WIDTH=100;var x3=class extends xk{constructor(e,t,n,o,r){super(e,t,n,o,r)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}},kk=class extends Sk{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,o){let r=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new k3(e,t,n,r,s,o).getViewZones()}_getOriginalEditorDecorations(e,t,n,o){let r=String(this._removeColor),s={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),l=a.getModel(),c=a._getViewModel(),d=0;for(let h of t)if(Lk(h)){for(s.decorations.push({range:new E(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:Go.lineDeleteMargin});d<e.modified.length;){let p=e.modified[d];if(p.diff&&p.diff.originalStartLineNumber>=h.originalStartLineNumber)break;d++}let u=0;if(d<e.modified.length){let p=e.modified[d];p.diff&&p.diff.originalStartLineNumber===h.originalStartLineNumber&&p.diff.originalEndLineNumber===h.originalEndLineNumber&&p.diff.modifiedStartLineNumber===h.modifiedStartLineNumber&&p.diff.modifiedEndLineNumber===h.modifiedEndLineNumber&&(u=p.heightInLines)}let g=Db(l,c,h.originalStartLineNumber,h.originalEndLineNumber);s.overviewZones.push(new cp(g.startLineNumber,g.endLineNumber,u,r))}return s}_getModifiedEditorDecorations(e,t,n,o,r){let s=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=s.getModel(),d=s._getViewModel();for(let h of t)if(Ek(h)){l.decorations.push({range:new E(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:o?Go.lineInsertWithSign:Go.lineInsert});let u=Db(c,d,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(l.overviewZones.push(new cp(u.startLineNumber,u.endLineNumber,0,a)),h.charChanges){for(let g of h.charChanges)if(qre(g))if(n)for(let p=g.modifiedStartLineNumber;p<=g.modifiedEndLineNumber;p++){let f,v;p===g.modifiedStartLineNumber?f=g.modifiedStartColumn:f=c.getLineFirstNonWhitespaceColumn(p),p===g.modifiedEndLineNumber?v=g.modifiedEndColumn:v=c.getLineLastNonWhitespaceColumn(p),l.decorations.push(zc(p,f,p,v,Go.charInsert))}else l.decorations.push(zc(g.modifiedStartLineNumber,g.modifiedStartColumn,g.modifiedEndLineNumber,g.modifiedEndColumn,Go.charInsert))}else l.decorations.push(zc(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Go.charInsertWholeLine))}return l}layout(){return Math.max(5,this._decorationsLeft)}},k3=class extends xk{constructor(e,t,n,o,r,s){super(e,t,n,o,r),this._originalModel=o.getModel(),this._renderIndicators=s,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){let e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){let e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){let o=document.createElement("div");return o.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:o}}_produceModifiedFromDiff(e,t,n){let o=document.createElement("div");o.className=`view-lines line-delete ${Eg}`;let r=document.createElement("div");r.className="inline-deleted-margin-view-zone";let s={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:o,marginDomNode:r,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(s),s}_finalize(e){let t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,o=t.get(46),r=t.get(29),s=o.typicalHalfwidthCharacterWidth,a=t.get(95),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),d=t.get(61),h=t.get(133).decorationsWidth,u=t.get(107),g=t.get(90),p=t.get(85),f=t.get(47),v=this._lineBreaksComputer.finalize(),b=0;for(let A=0;A<this._pendingLineChange.length;A++){let w=this._pendingLineChange[A],C=this._pendingViewZones[A],k=C.domNode;To(k,o);let L=C.marginDomNode;To(L,o);let S=[];if(w.charChanges)for(let ie of w.charChanges)$re(ie)&&S.push(new Tg(new E(ie.originalStartLineNumber,ie.originalStartColumn,ie.originalEndLineNumber,ie.originalEndColumn),"char-delete",0));let y=S.length>0,M=jh(1e4),O=0,H=0,D=null;for(let ie=w.originalStartLineNumber;ie<=w.originalEndLineNumber;ie++){let ce=ie-w.originalStartLineNumber,se=this._originalModel.tokenization.getLineTokens(ie),_e=se.getLineContent(),Ve=v[b++],Qe=Aa.filter(S,ie,1,_e.length+1);if(Ve){let pt=0;for(let xe of Ve.breakOffsets){let Et=se.sliceAndInflate(pt,xe,0),Ri=_e.substring(pt,xe);O=Math.max(O,this._renderOriginalLine(H++,Ri,Et,Aa.extractWrapped(Qe,pt,xe),y,l,c,o,r,d,h,u,g,p,f,n,M,L)),pt=xe}for(D||(D=[]);D.length<ce;)D[D.length]=1;D[ce]=Ve.breakOffsets.length,C.heightInLines+=Ve.breakOffsets.length-1;let ke=document.createElement("div");ke.className="gutter-delete",e.original.push({afterLineNumber:ie,afterColumn:0,heightInLines:Ve.breakOffsets.length-1,domNode:Gre(),marginDomNode:ke})}else O=Math.max(O,this._renderOriginalLine(H++,_e,se,Qe,y,l,c,o,r,d,h,u,g,p,f,n,M,L))}O+=a;let K=M.build(),oe=ree?ree.createHTML(K):K;if(k.innerHTML=oe,C.minWidthInPx=O*s,D){let ie=w.originalEndLineNumber-w.originalStartLineNumber;for(;D.length<=ie;)D[D.length]=1}C.diff.viewLineCounts=D}e.original.sort((A,w)=>A.afterLineNumber-w.afterLineNumber)}_renderOriginalLine(e,t,n,o,r,s,a,l,c,d,h,u,g,p,f,v,b,A){b.appendASCIIString('<div class="view-line'),r||b.appendASCIIString(" char-delete"),b.appendASCIIString('" style="top:'),b.appendASCIIString(String(e*d)),b.appendASCIIString('px;width:1000000px;">');let w=Rs.isBasicASCII(t,s),C=Rs.containsRTL(t,w,a),k=OC(new Xl(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,w,C,0,n,o,v,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,u,g,p,f!==$l.OFF,null),b);if(b.appendASCIIString("</div>"),this._renderIndicators){let L=document.createElement("div");L.className=`delete-sign ${zt.asClassName(Kre)}`,L.setAttribute("style",`position:absolute;top:${e*d}px;width:${h}px;height:${d}px;right:0;`),A.appendChild(L)}return k.characterMapping.getHorizontalOffset(k.characterMapping.length)}};function ive(i,e){return lo(i,e,["off","on","inherit"])}function Ek(i){return i.modifiedEndLineNumber>0}function Lk(i){return i.originalEndLineNumber>0}function qre(i){return i.modifiedStartLineNumber===i.modifiedEndLineNumber?i.modifiedEndColumn-i.modifiedStartColumn>0:i.modifiedEndLineNumber-i.modifiedStartLineNumber>0}function $re(i){return i.originalStartLineNumber===i.originalEndLineNumber?i.originalEndColumn-i.originalStartColumn>0:i.originalEndLineNumber-i.originalStartLineNumber>0}function Gre(){let i=document.createElement("div");return i.className="diagonal-fill",i}function nve(){let i=document.createElement("div");return i.className="arrow-revert-change "+zt.asClassName(_.arrowRight),ge("div",{},i)}function Db(i,e,t,n){let o=i.getLineCount();return t=Math.min(o,Math.max(1,t)),n=Math.min(o,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new E(t,i.getLineMinColumn(t),n,i.getLineMaxColumn(n)))}function see(i,e){return{enableSplitViewResizing:We(i.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:We(i.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:We(i.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:oP(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:oP(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:We(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:We(i.renderIndicators,e.renderIndicators),originalEditable:We(i.originalEditable,e.originalEditable),diffCodeLens:We(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:We(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:ive(i.diffWordWrap,e.diffWordWrap)}}function ove(i,e){return{enableSplitViewResizing:i.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==e.renderSideBySide,renderMarginRevertIcon:i.renderMarginRevertIcon!==e.renderMarginRevertIcon,maxComputationTime:i.maxComputationTime!==e.maxComputationTime,maxFileSize:i.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==e.renderIndicators,originalEditable:i.originalEditable!==e.originalEditable,diffCodeLens:i.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==e.diffWordWrap}}xi((i,e)=>{let t=i.getColor(Goe);t&&e.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`);let n=i.getColor(Gpe)||t;n&&e.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${n}; }`);let o=i.getColor(Jpe)||n;o&&(e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${o}; }`),e.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${o}; }`));let r=i.getColor(Yoe);r&&e.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${r}; }`);let s=i.getColor(Ype)||r;s&&e.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${s}; }`);let a=i.getColor(Xpe)||s;a&&(e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${a}; }`),e.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${a}; }`));let l=i.getColor(tme);l&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${Io(i.type)?"dashed":"solid"} ${l}; }`);let c=i.getColor(ime);c&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${Io(i.type)?"dashed":"solid"} ${c}; }`);let d=i.getColor(nv);d&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${d}; }`);let h=i.getColor(nme);h&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${h}; }`);let u=i.getColor(ug);u&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${u};
			}
		`);let g=i.getColor(gg);g&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${g};
			}
		`);let p=i.getColor(pg);p&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${p};
			}
		`);let f=i.getColor(ome);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${f} 12.5%,
			#0000 12.5%, #0000 50%,
			${f} 50%, ${f} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var rve={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},E3=class extends J{constructor(e,t={}){super(),this._onDidUpdate=this._register(new Q),this._editor=e,this._options=Ur(t,rve,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new E(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new E(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new E(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>E.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let o=0,r=this.ranges.length;o<r&&!t;o++){let s=this.ranges[o].range;n.isBeforeOrEqual(s.getStartPosition())&&(this.nextIdx=o+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(vr(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let o=n.range.getStartPosition();this._editor.setPosition(o),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}},sve=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},ave=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},YM=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},JM=new Le("selectionAnchorSet",!1),Dd=class Yre{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=JM.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(Yre.ID)}setSelectionAnchor(){if(this.editor.hasModel()){let e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(Se.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Zo().appendText(m("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),co(m("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){let t=this.editor.getPosition();this.editor.setSelection(Se.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){let e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Dd.ID="editor.contrib.selectionAnchorController";Dd=sve([ave(1,Ze)],Dd);var L3=class extends Ie{constructor(){super({id:"editor.action.setSelectionAnchor",label:m("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2080),weight:100}})}run(e,t){var n;return YM(this,void 0,void 0,function*(){(n=Dd.get(t))===null||n===void 0||n.setSelectionAnchor()})}},I3=class extends Ie{constructor(){super({id:"editor.action.goToSelectionAnchor",label:m("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:JM})}run(e,t){var n;return YM(this,void 0,void 0,function*(){(n=Dd.get(t))===null||n===void 0||n.goToSelectionAnchor()})}},T3=class extends Ie{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:m("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:JM,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2089),weight:100}})}run(e,t){var n;return YM(this,void 0,void 0,function*(){(n=Dd.get(t))===null||n===void 0||n.selectFromAnchorToCursor()})}},M3=class extends Ie{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:m("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:JM,kbOpts:{kbExpr:B.editorTextFocus,primary:9,weight:100}})}run(e,t){var n;return YM(this,void 0,void 0,function*(){(n=Dd.get(t))===null||n===void 0||n.cancelSelectionAnchor()})}};Wt(Dd.ID,Dd);fe(L3);fe(I3);fe(T3);fe(M3);var lve=P("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},m("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),N3=class extends Ie{constructor(){super({id:"editor.action.jumpToBracket",label:m("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:3160,weight:100}})}run(e,t){var n;(n=xd.get(t))===null||n===void 0||n.jumpToBracket()}},R3=class extends Ie{constructor(){super({id:"editor.action.selectToBracket",label:m("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){var o;let r=!0;n&&n.selectBrackets===!1&&(r=!1),(o=xd.get(t))===null||o===void 0||o.selectToBracket(r)}},F3=class{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}},xd=class i extends J{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new jt(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(66),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(66)&&(this._matchBrackets=this._editor.getOption(66),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(i.ID)}jumpToBracket(){if(!this._editor.hasModel())return;let e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{let o=n.getStartPosition(),r=e.bracketPairs.matchBracket(o),s=null;if(r)r[0].containsPosition(o)&&!r[1].containsPosition(o)?s=r[1].getStartPosition():r[1].containsPosition(o)&&(s=r[0].getStartPosition());else{let a=e.bracketPairs.findEnclosingBrackets(o);if(a)s=a[1].getStartPosition();else{let l=e.bracketPairs.findNextBracket(o);l&&l.range&&(s=l.range.getStartPosition())}}return s?new Se(s.lineNumber,s.column,s.lineNumber,s.column):new Se(o.lineNumber,o.column,o.lineNumber,o.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(o=>{let r=o.getStartPosition(),s=t.bracketPairs.matchBracket(r);if(!s&&(s=t.bracketPairs.findEnclosingBrackets(r),!s)){let c=t.bracketPairs.findNextBracket(r);c&&c.range&&(s=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(s){s.sort(E.compareRangesUsingStarts);let[c,d]=s;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(r)){let h=a;a=l,l=h}}a&&l&&n.push(new Se(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(let n of this._lastBracketsData){let o=n.brackets;o&&(e[t++]={range:o[0],options:n.options},e[t++]={range:o[1],options:n.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}let e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}let t=this._editor.getModel(),n=t.getVersionId(),o=[];this._lastVersionId===n&&(o=this._lastBracketsData);let r=[],s=0;for(let h=0,u=e.length;h<u;h++){let g=e[h];g.isEmpty()&&(r[s++]=g.getStartPosition())}r.length>1&&r.sort(q.compare);let a=[],l=0,c=0,d=o.length;for(let h=0,u=r.length;h<u;h++){let g=r[h];for(;c<d&&o[c].position.isBefore(g);)c++;if(c<d&&o[c].position.equals(g))a[l++]=o[c];else{let p=t.bracketPairs.matchBracket(g,20),f=i._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!p&&this._matchBrackets==="always"&&(p=t.bracketPairs.findEnclosingBrackets(g,20),f=i._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new F3(g,p,f)}}this._lastBracketsData=a,this._lastVersionId=n}};xd.ID="editor.contrib.bracketMatchingController";xd._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=rt.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Xi(lve),position:us.Center}});xd._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=rt.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});Wt(xd.ID,xd);fe(R3);fe(N3);xi((i,e)=>{let t=i.getColor(cfe);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);let n=i.getColor(lre);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});Ds.appendMenuItem(z.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:m({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});var B3=class{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;let n=this._selection.startLineNumber,o=this._selection.startColumn,r=this._selection.endColumn;if(!(this._isMovingLeft&&o===1)&&!(!this._isMovingLeft&&r===e.getLineMaxColumn(n)))if(this._isMovingLeft){let s=new E(n,o-1,n,o),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new E(n,r,n,r),a)}else{let s=new E(n,r,n,r+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new E(n,o,n,o),a)}}computeCursorState(e,t){return this._isMovingLeft?new Se(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Se(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}},Ik=class extends Ie{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let n=[],o=t.getSelections();for(let r of o)n.push(new B3(r,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},P3=class extends Ik{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:m("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:B.writable})}},O3=class extends Ik{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:m("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:B.writable})}};fe(P3);fe(O3);var H3=class extends Ie{constructor(){super({id:"editor.action.transposeLetters",label:m("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),o=[],r=t.getSelections();for(let s of r){if(!s.isEmpty())continue;let a=s.startLineNumber,l=s.startColumn,c=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;let d=l===c?s.getPosition():$i.rightPosition(n,s.getPosition().lineNumber,s.getPosition().column),h=$i.leftPosition(n,d),u=$i.leftPosition(n,h),g=n.getValueInRange(E.fromPositions(u,h)),p=n.getValueInRange(E.fromPositions(h,d)),f=E.fromPositions(u,d);o.push(new Vn(f,p+g))}o.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop())}};fe(H3);var cve=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},up="9_cutcopypaste",dve=Ga||document.queryCommandSupported("cut"),Jre=Ga||document.queryCommandSupported("copy"),hve=typeof navigator.clipboard>"u"||as?document.queryCommandSupported("paste"):!0;function YY(i){return i.register(),i}var uve=dve?YY(new Qh({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Ga?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:z.MenubarEditMenu,group:"2_ccp",title:m({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:z.EditorContext,group:up,title:m("actions.clipboard.cutLabel","Cut"),when:B.writable,order:1},{menuId:z.CommandPalette,group:"",title:m("actions.clipboard.cutLabel","Cut"),order:1},{menuId:z.SimpleEditorContext,group:up,title:m("actions.clipboard.cutLabel","Cut"),when:B.writable,order:1}]})):void 0,gve=Jre?YY(new Qh({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Ga?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:z.MenubarEditMenu,group:"2_ccp",title:m({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:z.EditorContext,group:up,title:m("actions.clipboard.copyLabel","Copy"),order:2},{menuId:z.CommandPalette,group:"",title:m("actions.clipboard.copyLabel","Copy"),order:1},{menuId:z.SimpleEditorContext,group:up,title:m("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Ds.appendMenuItem(z.MenubarEditMenu,{submenu:z.MenubarCopy,title:{value:m("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});Ds.appendMenuItem(z.EditorContext,{submenu:z.EditorContextCopy,title:{value:m("copy as","Copy As"),original:"Copy As"},group:up,order:3});Ds.appendMenuItem(z.EditorContext,{submenu:z.EditorContextShare,title:{value:m("share","Share"),original:"Share"},group:"11_share",order:-1});var lR=hve?YY(new Qh({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Ga?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:z.MenubarEditMenu,group:"2_ccp",title:m({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:z.EditorContext,group:up,title:m("actions.clipboard.pasteLabel","Paste"),when:B.writable,order:4},{menuId:z.CommandPalette,group:"",title:m("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:z.SimpleEditorContext,group:up,title:m("actions.clipboard.pasteLabel","Paste"),when:B.writable,order:4}]})):void 0,W3=class extends Ie{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:m("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(33)&&t.getSelection().isEmpty()||(_4.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),_4.forceCopyWithSyntaxHighlighting=!1)}};function Xre(i,e){i&&(i.addImplementation(1e4,"code-editor",(t,n)=>{let o=t.get(Ft).getFocusedCodeEditor();if(o&&o.hasTextFocus()){let r=o.getOption(33),s=o.getSelection();return s&&s.isEmpty()&&!r||document.execCommand(e),!0}return!1}),i.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}Xre(uve,"cut");Xre(gve,"copy");lR&&(lR.addImplementation(1e4,"code-editor",(i,e)=>{let t=i.get(Ft),n=i.get(Da),o=t.getFocusedCodeEditor();return o&&o.hasTextFocus()?!document.execCommand("paste")&&gc?(()=>cve(void 0,void 0,void 0,function*(){let r=yield n.readText();if(r!==""){let s=rp.INSTANCE.get(r),a=!1,l=null,c=null;s&&(a=o.getOption(33)&&!!s.isFromEmptySelection,l=typeof s.multicursorText<"u"?s.multicursorText:null,c=s.mode),o.trigger("keyboard","paste",{text:r,pasteOnNewLine:a,multicursorText:l,mode:c})}}))():!0:!1}),lR.addImplementation(0,"generic-dom",(i,e)=>(document.execCommand("paste"),!0)));Jre&&fe(W3);var rm=ze("IWorkspaceEditService"),kd=class{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(gp.is(t))return gp.lift(t);if(e0.is(t))return e0.lift(t);throw new Error("Unsupported edit")})}},gp=class i extends kd{constructor(e,t,n=void 0,o){super(o),this.resource=e,this.textEdit=t,this.versionId=n}static is(e){return e instanceof i?!0:jn(e)&&$.isUri(e.resource)&&jn(e.textEdit)}static lift(e){return e instanceof i?e:new i(e.resource,e.textEdit,e.versionId,e.metadata)}},e0=class i extends kd{constructor(e,t,n={},o){super(o),this.oldResource=e,this.newResource=t,this.options=n}static is(e){return e instanceof i?!0:jn(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof i?e:new i(e.oldResource,e.newResource,e.options,e.metadata)}},JY=ze("IEditorCancelService"),Zre=new Le("cancellableOperation",!1,m("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Ke(JY,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(o=>{let r=Zre.bindTo(o.get(Ze)),s=new ko;return{key:r,tokens:s}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){let e=this._tokens.get(i);if(!e)return;let t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);var z3=class extends po{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(JY).add(e,this))}dispose(){this._unregister(),super.dispose()}};pe(new class extends $n{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Zre})}runEditorCommand(i,e){i.get(JY).cancel(e)}});var xb=class{constructor(i,e){if(this.flags=e,this.flags&1){let t=i.getModel();this.modelVersionId=t?ws("{0}#{1}",t.uri.toString(),t.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=i.getPosition():this.position=null,this.flags&2?this.selection=i.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=i.getScrollLeft(),this.scrollTop=i.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(i){if(!(i instanceof xb))return!1;let e=i;return!(this.modelVersionId!==e.modelVersionId||this.scrollLeft!==e.scrollLeft||this.scrollTop!==e.scrollTop||!this.position&&e.position||this.position&&!e.position||this.position&&e.position&&!this.position.equals(e.position)||!this.selection&&e.selection||this.selection&&!e.selection||this.selection&&e.selection&&!this.selection.equalsRange(e.selection))}validate(i){return this._equals(new xb(i,this.flags))}},Ed=class extends z3{constructor(e,t,n,o){super(e,o),this._listener=new ne,t&4&&this._listener.add(e.onDidChangeCursorPosition(r=>{(!n||!E.containsPosition(n,r.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(r=>{(!n||!E.containsRange(n,r.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(r=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(r=>this.cancel())),this._listener.add(e.onDidChangeModelContent(r=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}},kb=class extends po{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}},Rt=class{constructor(i){this.value=i}equals(i){return this.value===i.value}contains(i){return this.equals(i)||this.value===""||i.value.startsWith(this.value+Rt.sep)}intersects(i){return this.contains(i)||i.contains(this)}append(i){return new Rt(this.value+Rt.sep+i)}};Rt.sep=".";Rt.None=new Rt("@@none@@");Rt.Empty=new Rt("");Rt.QuickFix=new Rt("quickfix");Rt.Refactor=new Rt("refactor");Rt.Source=new Rt("source");Rt.SourceOrganizeImports=Rt.Source.append("organizeImports");Rt.SourceFixAll=Rt.Source.append("fixAll");var Ko;(function(i){i.Refactor="refactor",i.RefactorPreview="refactor preview",i.Lightbulb="lightbulb",i.Default="other (default)",i.SourceAction="source action",i.QuickFix="quick fix action",i.FixAll="fix all",i.OrganizeImports="organize imports",i.AutoFix="auto fix",i.QuickFixHover="quick fix hover window",i.OnSave="save participants",i.ProblemsView="problems view"})(Ko||(Ko={}));function pve(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>ese(e,t,i.include))||!i.includeSourceActions&&Rt.Source.contains(e))}function mve(i,e){let t=e.kind?new Rt(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(n=>ese(t,n,i.include))||!i.includeSourceActions&&t&&Rt.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function ese(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}var t0=class i{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new i(t.kind,t.apply,!1):new i(i.getKindFromUser(e,t.kind),i.getApplyFromUser(e,t.apply),i.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Rt(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}},XY=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},tse="editor.action.codeAction",ise="editor.action.refactor",fve="editor.action.refactor.preview",nse="editor.action.sourceAction",ZY="editor.action.organizeImports",eJ="editor.action.fixAll",Tk=class{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return XY(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(o){Fn(o)}n&&(this.action.edit=n.edit)}return this})}},V3=class i extends J{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(i.codeActionsComparator),this.validActions=this.allActions.filter(({action:o})=>!o.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:Dn(e.diagnostics)?Dn(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:Dn(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Rt.QuickFix.contains(new Rt(e.kind))&&!!e.isPreferred)}},aee={actions:[],documentation:void 0};function tJ(i,e,t,n,o,r){var s;let a=n.filter||{},l={only:(s=a.include)===null||s===void 0?void 0:s.value,trigger:n.type},c=new kb(e,r),d=_ve(i,e,a),h=new ne,u=d.map(p=>XY(this,void 0,void 0,function*(){try{o.report(p);let f=yield p.provideCodeActions(e,t,l,c.token);if(f&&h.add(f),c.token.isCancellationRequested)return aee;let v=(f?.actions||[]).filter(A=>A&&mve(a,A)),b=vve(p,v,a.include);return{actions:v.map(A=>new Tk(A,p)),documentation:b}}catch(f){if(Ls(f))throw f;return Fn(f),aee}})),g=i.onDidChange(()=>{let p=i.all(e);Zn(p,d)||c.cancel()});return Promise.all(u).then(p=>{let f=p.map(b=>b.actions).flat(),v=Ns(p.map(b=>b.documentation));return new V3(f,v,h)}).finally(()=>{g.dispose(),c.dispose()})}function _ve(i,e,t){return i.all(e).filter(n=>n.providedCodeActionKinds?n.providedCodeActionKinds.some(o=>pve(t,new Rt(o))):!0)}function vve(i,e,t){if(!i.documentation)return;let n=i.documentation.map(o=>({kind:new Rt(o.kind),command:o.command}));if(t){let o;for(let r of n)r.kind.contains(t)&&(o?o.kind.contains(r.kind)&&(o=r):o=r);if(o)return o?.command}for(let o of e)if(o.kind){for(let r of n)if(r.kind.contains(new Rt(o.kind)))return r.command}}ft.registerCommand("_executeCodeActionProvider",function(i,e,t,n,o){return XY(this,void 0,void 0,function*(){if(!(e instanceof $))throw Nt();let{codeActionProvider:r}=i.get(Te),s=i.get(li).getModel(e);if(!s)throw Nt();let a=Se.isISelection(t)?Se.liftSelection(t):E.isIRange(t)?s.validateRange(t):void 0;if(!a)throw Nt();let l=typeof n=="string"?new Rt(n):void 0,c=yield tJ(r,s,a,{type:1,triggerAction:Ko.Default,filter:{includeSourceActions:!0,include:l}},ic.None,et.None),d=[],h=Math.min(c.validActions.length,typeof o=="number"?o:0);for(let u=0;u<h;u++)d.push(c.validActions[u].resolve(et.None));try{return yield Promise.all(d),c.validActions.map(u=>u.action)}finally{setTimeout(()=>c.dispose(),100)}})});var Ave=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},bve=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Wr=class U3{constructor(e,t){this._messageWidget=new eo,this._messageListeners=new ne,this._editor=e,this._visible=U3.MESSAGE_VISIBLE.bindTo(t)}static get(e){return e.getContribution(U3.ID)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){co(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new lee(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Sr(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(o=>{o.target.position&&(n?n.containsPosition(o.target.position)||this.closeMessage():n=new E(t.lineNumber-3,1,o.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(lee.fadeOut(this._messageWidget.value))}};Wr.ID="editor.contrib.messageController";Wr.MESSAGE_VISIBLE=new Le("messageVisible",!1,m("messageVisible","Whether the editor is currently showing an inline message"));Wr=Ave([bve(1,Ze)],Wr);var wve=$n.bindToContribution(Wr.get);pe(new wve({id:"leaveEditorMessage",precondition:Wr.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:100+30,primary:9}}));var lee=class{constructor(i,{lineNumber:e,column:t},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=i,this._editor.revealLinesInCenterIfOutsideViewport(e,e,0),this._position={lineNumber:e,column:t},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";let o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);let r=document.createElement("div");r.classList.add("message"),r.textContent=n,this._domNode.appendChild(r);let s=document.createElement("div");s.classList.add("anchor","below"),this._domNode.appendChild(s),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(i){let e=()=>{i.dispose(),clearTimeout(t),i.getDomNode().removeEventListener("animationend",e)},t=setTimeout(e,110);return i.getDomNode().addEventListener("animationend",e),i.getDomNode().classList.add("fadeOut"),{dispose:e}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(i){this._domNode.classList.toggle("below",i===2)}};Wt(Wr.ID,Wr);var Mk=class{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(o=>o.splice(e,t,n))}};function pr(i,e,t){return Math.min(Math.max(i,e),t)}var Nk=class{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}},Q3=class{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){let t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}},Nr=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}},Ao;(function(i){function e(r,s){if(r.start>=s.end||s.start>=r.end)return{start:0,end:0};let a=Math.max(r.start,s.start),l=Math.min(r.end,s.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(r){return r.end-r.start<=0}i.isEmpty=t;function n(r,s){return!t(e(r,s))}i.intersects=n;function o(r,s){let a=[],l={start:r.start,end:Math.min(s.start,r.end)},c={start:Math.max(s.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=o})(Ao||(Ao={}));function cee(i,e){let t=[];for(let n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;let o=Ao.intersect(i,n.range);Ao.isEmpty(o)||t.push({range:o,size:n.size})}return t}function j3({start:i,end:e},t){return{start:i+t,end:e+t}}function Cve(i){let e=[],t=null;for(let n of i){let o=n.range.start,r=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=r;continue}t={range:{start:o,end:r},size:s},e.push(t)}return e}function yve(...i){return Cve(i.reduce((e,t)=>e.concat(t),[]))}var Rk=class{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){let o=n.length-t,r=cee({start:0,end:e},this.groups),s=cee({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:j3(l.range,o),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=yve(r,a,s),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let o of this.groups){let r=o.range.end-o.range.start,s=n+r*o.size;if(e<s)return t+Math.floor((e-n)/o.size);t+=r,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let o of this.groups){let r=o.range.end-o.range.start,s=n+r;if(e<s)return t+(e-n)*o.size;t+=r*o.size,n=s}return-1}};function Sve(i){var e;try{(e=i.parentElement)===null||e===void 0||e.removeChild(i)}catch{}}var K3=class{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){let n=ge(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:o}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){let{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),Sve(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}},wu=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},fl={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},pp=class{constructor(e){this.elements=e}update(){}getData(){return this.elements}},q3=class{constructor(e){this.elements=e}update(){}getData(){return this.elements}},$3=class{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};function Dve(i,e){return Array.isArray(i)&&Array.isArray(e)?Zn(i,e):i===e}var G3=class{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,o)=>o,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}},Fs=class i{constructor(e,t,n,o=fl){var r,s,a,l,c,d,h,u,g,p;if(this.virtualDelegate=t,this.domId=`list_id_${++i.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Gl(50),this.splicing=!1,this.dragOverAnimationStopDisposable=J.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=J.None,this.onDragLeaveTimeout=J.None,this.disposables=new ne,this._onDidChangeContentHeight=new Q,this._horizontalScrolling=!1,o.horizontalScrolling&&o.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new Rk;for(let f of n)this.renderers.set(f.templateId,f);this.cache=this.disposables.add(new K3(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof o.mouseSupport=="boolean"?o.mouseSupport:!0),this._horizontalScrolling=(r=o.horizontalScrolling)!==null&&r!==void 0?r:fl.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof o.additionalScrollHeight>"u"?0:o.additionalScrollHeight,this.accessibilityProvider=new G3(o.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((s=o.transformOptimization)!==null&&s!==void 0?s:fl.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(to.addTarget(this.rowsContainer)),this.scrollable=new sp({forceIntegerValues:!0,smoothScrollDuration:(a=o.smoothScrolling)!==null&&a!==void 0&&a?125:0,scheduleAtNextAnimationFrame:f=>el(f)}),this.scrollableElement=this.disposables.add(new ab(this.rowsContainer,{alwaysConsumeMouseWheel:(l=o.alwaysConsumeMouseWheel)!==null&&l!==void 0?l:fl.alwaysConsumeMouseWheel,horizontal:1,vertical:(c=o.verticalScrollMode)!==null&&c!==void 0?c:fl.verticalScrollMode,useShadows:(d=o.useShadows)!==null&&d!==void 0?d:fl.useShadows,mouseWheelScrollSensitivity:o.mouseWheelScrollSensitivity,fastScrollSensitivity:o.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(le(this.rowsContainer,yi.Change,f=>this.onTouchChange(f))),this.disposables.add(le(this.scrollableElement.getDomNode(),"scroll",f=>f.target.scrollTop=0)),this.disposables.add(le(this.domNode,"dragover",f=>this.onDragOver(this.toDragEvent(f)))),this.disposables.add(le(this.domNode,"drop",f=>this.onDrop(this.toDragEvent(f)))),this.disposables.add(le(this.domNode,"dragleave",f=>this.onDragLeave(this.toDragEvent(f)))),this.disposables.add(le(this.domNode,"dragend",f=>this.onDragEnd(f))),this.setRowLineHeight=(h=o.setRowLineHeight)!==null&&h!==void 0?h:fl.setRowLineHeight,this.setRowHeight=(u=o.setRowHeight)!==null&&u!==void 0?u:fl.setRowHeight,this.supportDynamicHeights=(g=o.supportDynamicHeights)!==null&&g!==void 0?g:fl.supportDynamicHeights,this.dnd=(p=o.dnd)!==null&&p!==void 0?p:fl.dnd,this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:L2(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){let o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},s=Ao.intersect(o,r),a=new Map;for(let k=s.end-1;k>=s.start;k--){let L=this.items[k];if(L.dragStartDisposable.dispose(),L.checkedDisposable.dispose(),L.row){let S=a.get(L.templateId);S||(S=[],a.set(L.templateId,S));let y=this.renderers.get(L.templateId);y&&y.disposeElement&&y.disposeElement(L.element,k,L.row.templateData,L.size),S.push(L.row)}L.row=null}let l={start:e+t,end:this.items.length},c=Ao.intersect(l,o),d=Ao.relativeComplement(l,o),h=n.map(k=>({id:String(this.itemId++),element:k,templateId:this.virtualDelegate.getTemplateId(k),size:this.virtualDelegate.getHeight(k),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(k),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:J.None,checkedDisposable:J.None})),u;e===0&&t>=this.items.length?(this.rangeMap=new Rk,this.rangeMap.splice(0,0,h),u=this.items,this.items=h):(this.rangeMap.splice(e,t,h),u=this.items.splice(e,t,...h));let g=n.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),f=j3(c,g),v=Ao.intersect(p,f);for(let k=v.start;k<v.end;k++)this.updateItemInDOM(this.items[k],k);let b=Ao.relativeComplement(f,p);for(let k of b)for(let L=k.start;L<k.end;L++)this.removeItemFromDOM(L);let A=d.map(k=>j3(k,g)),w=[{start:e,end:e+n.length},...A].map(k=>Ao.intersect(p,k)),C=this.getNextToLastElement(w);for(let k of w)for(let L=k.start;L<k.end;L++){let S=this.items[L],y=a.get(S.templateId),M=y?.pop();this.insertItemInDOM(L,C,M)}for(let k of a.values())for(let L of k)this.cache.release(L);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),u.map(k=>k.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=el(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:Sue(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:L2(this.domNode)})}render(e,t,n,o,r,s=!1){let a=this.getRenderRange(t,n),l=Ao.relativeComplement(a,e),c=Ao.relativeComplement(e,a),d=this.getNextToLastElement(l);if(s){let h=Ao.intersect(e,a);for(let u=h.start;u<h.end;u++)this.updateItemInDOM(this.items[u],u)}for(let h of l)for(let u=h.start;u<h.end;u++)this.insertItemInDOM(u,d);for(let h of c)for(let u=h.start;u<h.end;u++)this.removeItemFromDOM(u);o!==void 0&&(this.rowsContainer.style.left=`-${o}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){let o=this.items[e];o.row||(o.row=n??this.cache.alloc(o.templateId));let r=this.accessibilityProvider.getRole(o.element)||"listitem";o.row.domNode.setAttribute("role",r);let s=this.accessibilityProvider.isChecked(o.element);if(typeof s=="boolean")o.row.domNode.setAttribute("aria-checked",String(!!s));else if(s){let c=d=>o.row.domNode.setAttribute("aria-checked",String(!!d));c(s.value),o.checkedDisposable=s.onDidChange(c)}o.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(o.row.domNode,t):this.rowsContainer.appendChild(o.row.domNode)),this.updateItemInDOM(o,e);let a=this.renderers.get(o.templateId);if(!a)throw new Error(`No renderer found for template id ${o.templateId}`);a?.renderElement(o.element,e,o.row.templateData,o.size);let l=this.dnd.getDragURI(o.element);o.dragStartDisposable.dispose(),o.row.domNode.draggable=!!l,l&&(o.dragStartDisposable=le(o.row.domNode,"dragstart",c=>this.onDragStart(o.element,l,c))),this.horizontalScrolling&&(this.measureItemWidth(o),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=as?"-moz-fit-content":"fit-content",e.width=L2(e.row.domNode);let t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return Z.map(this.disposables.add(new kt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Z.map(this.disposables.add(new kt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Z.filter(Z.map(this.disposables.add(new kt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Z.map(this.disposables.add(new kt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Z.map(this.disposables.add(new kt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Z.any(Z.map(this.disposables.add(new kt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Z.map(this.disposables.add(new kt(this.domNode,yi.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Z.map(this.disposables.add(new kt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Z.map(this.disposables.add(new kt(this.rowsContainer,yi.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],o=n&&n.element;return{browserEvent:e,index:t,element:o}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],o=n&&n.element;return{browserEvent:e,index:t,element:o}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],o=n&&n.element;return{browserEvent:e,index:t,element:o}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],o=n&&n.element;return{browserEvent:e,index:t,element:o}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var o,r;if(!n.dataTransfer)return;let s=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(VC.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(s,n)),typeof a>"u"&&(a=String(s.length));let l=ge(".monaco-drag-image");l.textContent=a,document.body.appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>document.body.removeChild(l),0)}this.currentDragData=new pp(s),Eu.CurrentDragAndDropData=new q3(s),(r=(o=this.dnd).onDragStart)===null||r===void 0||r.call(o,this.currentDragData,n)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Eu.CurrentDragAndDropData&&Eu.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Eu.CurrentDragAndDropData)this.currentDragData=Eu.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new $3}let n=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof n=="boolean"?n:n.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof n!="boolean"&&n.effect===0?"copy":"move";let o;if(typeof n!="boolean"&&n.feedback?o=n.feedback:typeof e.index>"u"?o=[-1]:o=[e.index],o=br(o).filter(r=>r>=-1&&r<this.length).sort((r,s)=>r-s),o=o[0]===-1?[-1]:o,Dve(this.currentDragFeedback,o))return!0;if(this.currentDragFeedback=o,this.currentDragFeedbackDisposable.dispose(),o[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=ct(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(let r of o){let s=this.items[r];s.dropTarget=!0,(t=s.row)===null||t===void 0||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=ct(()=>{var r;for(let s of o){let a=this.items[s];a.dropTarget=!1,(r=a.row)===null||r===void 0||r.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=qh(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Eu.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Eu.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=J.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let t=$ne(this.domNode).top;this.dragOverAnimationDisposable=Tue(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=qh(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){let o=n.getAttribute("data-index");if(o){let r=Number(o);if(!isNaN(r))return r}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){let o=this.getRenderRange(e,t),r,s;e===this.elementTop(o.start)?(r=o.start,s=0):o.end-o.start>1&&(r=o.start+1,s=this.elementTop(r)-e);let a=0;for(;;){let l=this.getRenderRange(e,t),c=!1;for(let d=l.start;d<l.end;d++){let h=this.probeDynamicHeight(d);h!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=h,c=c||h!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();let d=Ao.relativeComplement(o,l);for(let u of d)for(let g=u.start;g<u.end;g++)this.items[g].row&&this.removeItemFromDOM(g);let h=Ao.relativeComplement(l,o);for(let u of h)for(let g=u.start;g<u.end;g++){let p=g+1,f=p<this.items.length?this.items[p].row:null,v=f?f.domNode:null;this.insertItemInDOM(g,v)}for(let u=l.start;u<l.end;u++)this.items[u].row&&this.updateItemInDOM(this.items[u],u);if(typeof r=="number"){let u=this.scrollable.getFutureScrollPosition().scrollTop-e,g=this.elementTop(r)-s+u;this.setScrollTop(g,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,n,o;let r=this.items[e];if(this.virtualDelegate.getDynamicHeight){let c=this.virtualDelegate.getDynamicHeight(r.element);if(c!==null){let d=r.size;return r.size=c,r.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!r.hasDynamicHeight||r.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(r.element))return 0;let s=r.size;if(!this.setRowHeight&&r.row){let c=r.row.domNode.offsetHeight;return r.size=c,r.lastDynamicHeightWidth=this.renderWidth,c-s}let a=this.cache.alloc(r.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);let l=this.renderers.get(r.templateId);return l&&(l.renderElement(r.element,e,a.templateData,void 0),(t=l.disposeElement)===null||t===void 0||t.call(l,r.element,e,a.templateData,void 0)),r.size=a.domNode.offsetHeight,(o=(n=this.virtualDelegate).setDynamicHeight)===null||o===void 0||o.call(n,r.element,r.size),r.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),r.size-s}getNextToLastElement(e){let t=e[e.length-1];if(!t)return null;let n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(let t of this.items)if(t.row){let n=this.renderers.get(t.row.templateId);n&&((e=n.disposeElement)===null||e===void 0||e.call(n,t.element,-1,t.row.templateData,void 0),n.disposeTemplate(t.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),st(this.disposables)}};Fs.InstanceCount=0;wu([vn],Fs.prototype,"onMouseClick",null);wu([vn],Fs.prototype,"onMouseDblClick",null);wu([vn],Fs.prototype,"onMouseMiddleClick",null);wu([vn],Fs.prototype,"onMouseDown",null);wu([vn],Fs.prototype,"onMouseOver",null);wu([vn],Fs.prototype,"onContextMenu",null);wu([vn],Fs.prototype,"onTouchStart",null);wu([vn],Fs.prototype,"onTap",null);var sm=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},dee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},xve=class{constructor(i){this.trait=i,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(i){return i}renderElement(i,e,t){let n=this.renderedElements.findIndex(o=>o.templateData===t);if(n>=0){let o=this.renderedElements[n];this.trait.unrender(t),o.index=e}else{let o={index:e,templateData:t};this.renderedElements.push(o)}this.trait.renderIndex(e,t)}splice(i,e,t){let n=[];for(let o of this.renderedElements)o.index<i?n.push(o):o.index>=i+e&&n.push({index:o.index+t-e,templateData:o.templateData});this.renderedElements=n}renderIndexes(i){for(let{index:e,templateData:t}of this.renderedElements)i.indexOf(e)>-1&&this.trait.renderIndex(e,t)}disposeTemplate(i){let e=this.renderedElements.findIndex(t=>t.templateData===i);e<0||this.renderedElements.splice(e,1)}},Fk=class{constructor(i){this._trait=i,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new Q,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new xve(this)}splice(i,e,t){var n;e=Math.max(0,Math.min(e,this.length-i));let o=t.length-e,r=i+e,s=[...this.sortedIndexes.filter(l=>l<i),...t.map((l,c)=>l?c+i:-1).filter(l=>l!==-1),...this.sortedIndexes.filter(l=>l>=r).map(l=>l+o)],a=this.length+o;if(this.sortedIndexes.length>0&&s.length===0&&a>0){let l=(n=this.sortedIndexes.find(c=>c>=i))!==null&&n!==void 0?n:a-1;s.push(Math.min(l,a-1))}this.renderer.splice(i,e,t.length),this._set(s,s),this.length=a}renderIndex(i,e){e.classList.toggle(this._trait,this.contains(i))}unrender(i){i.classList.remove(this._trait)}set(i,e){return this._set(i,[...i].sort(uee),e)}_set(i,e,t){let n=this.indexes,o=this.sortedIndexes;this.indexes=i,this.sortedIndexes=e;let r=Y3(o,i);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:i,browserEvent:t}),n}get(){return this.indexes}contains(i){return xM(this.sortedIndexes,i,uee)>=0}dispose(){st(this._onChange)}};sm([vn],Fk.prototype,"renderer",null);var kve=class extends Fk{constructor(i){super("selected"),this.setAriaSelected=i}renderIndex(i,e){super.renderIndex(i,e),this.setAriaSelected&&(this.contains(i)?e.setAttribute("aria-selected","true"):e.setAttribute("aria-selected","false"))}},cR=class{constructor(i,e,t){this.trait=i,this.view=e,this.identityProvider=t}splice(i,e,t){if(!this.identityProvider)return this.trait.splice(i,e,t.map(()=>!1));let n=this.trait.get().map(r=>this.identityProvider.getId(this.view.element(r)).toString()),o=t.map(r=>n.indexOf(this.identityProvider.getId(r).toString())>-1);this.trait.splice(i,e,o)}};function mp(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function pf(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:pf(i.parentElement)}function ose(i){return i.tagName==="A"&&i.classList.contains("monaco-button")||i.tagName==="DIV"&&i.classList.contains("monaco-button-dropdown")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:ose(i.parentElement)}var rse=class{constructor(i,e,t){this.list=i,this.view=e,this.disposables=new ne,this.multipleSelectionDisposables=new ne,this.onKeyDown.filter(n=>n.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===9).on(this.onEscape,this,this.disposables),t.multipleSelectionSupport!==!1&&this.onKeyDown.filter(n=>(gt?n.metaKey:n.ctrlKey)&&n.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return this.disposables.add(Z.chain(this.disposables.add(new kt(this.view.domNode,"keydown")).event).filter(i=>!mp(i.target)).map(i=>new ni(i)))}updateOptions(i){i.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),i.multipleSelectionSupport&&this.onKeyDown.filter(e=>(gt?e.metaKey:e.ctrlKey)&&e.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(i){i.preventDefault(),i.stopPropagation(),this.list.setSelection(this.list.getFocus(),i.browserEvent)}onUpArrow(i){i.preventDefault(),i.stopPropagation(),this.list.focusPrevious(1,!1,i.browserEvent);let e=this.list.getFocus()[0];this.list.setAnchor(e),this.list.reveal(e),this.view.domNode.focus()}onDownArrow(i){i.preventDefault(),i.stopPropagation(),this.list.focusNext(1,!1,i.browserEvent);let e=this.list.getFocus()[0];this.list.setAnchor(e),this.list.reveal(e),this.view.domNode.focus()}onPageUpArrow(i){i.preventDefault(),i.stopPropagation(),this.list.focusPreviousPage(i.browserEvent);let e=this.list.getFocus()[0];this.list.setAnchor(e),this.list.reveal(e),this.view.domNode.focus()}onPageDownArrow(i){i.preventDefault(),i.stopPropagation(),this.list.focusNextPage(i.browserEvent);let e=this.list.getFocus()[0];this.list.setAnchor(e),this.list.reveal(e),this.view.domNode.focus()}onCtrlA(i){i.preventDefault(),i.stopPropagation(),this.list.setSelection(vo(this.list.length),i.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(i){this.list.getSelection().length&&(i.preventDefault(),i.stopPropagation(),this.list.setSelection([],i.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};sm([vn],rse.prototype,"onKeyDown",null);var Ng;(function(i){i[i.Automatic=0]="Automatic",i[i.Trigger=1]="Trigger"})(Ng||(Ng={}));var mf;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(mf||(mf={}));var Eve=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}},Lve=class{constructor(i,e,t,n,o){this.list=i,this.view=e,this.keyboardNavigationLabelProvider=t,this.keyboardNavigationEventFilter=n,this.delegate=o,this.enabled=!1,this.state=mf.Idle,this.mode=Ng.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ne,this.disposables=new ne,this.updateOptions(i.options)}updateOptions(i){var e,t;!((e=i.typeNavigationEnabled)!==null&&e!==void 0)||e?this.enable():this.disable(),this.mode=(t=i.typeNavigationMode)!==null&&t!==void 0?t:Ng.Automatic}enable(){if(this.enabled)return;let i=!1,e=this.enabledDisposables.add(Z.chain(this.enabledDisposables.add(new kt(this.view.domNode,"keydown")).event)).filter(n=>!mp(n.target)).filter(()=>this.mode===Ng.Automatic||this.triggered).map(n=>new ni(n)).filter(n=>i||this.keyboardNavigationEventFilter(n)).filter(n=>this.delegate.mightProducePrintableCharacter(n)).forEach(Y_).map(n=>n.browserEvent.key).event,t=Z.debounce(e,()=>null,800,void 0,void 0,this.enabledDisposables);Z.reduce(Z.any(e,t),(n,o)=>o===null?null:(n||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),e(()=>i=!0,void 0,this.enabledDisposables),t(()=>i=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var i;let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){let t=(i=this.list.options.accessibilityProvider)===null||i===void 0?void 0:i.getAriaLabel(this.list.element(e[0]));t&&co(t)}this.previouslyFocused=-1}onInput(i){if(!i){this.state=mf.Idle,this.triggered=!1;return}let e=this.list.getFocus(),t=e.length>0?e[0]:0,n=this.state===mf.Idle?1:0;this.state=mf.Typing;for(let o=0;o<this.list.length;o++){let r=(t+o+n)%this.list.length,s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),a=s&&s.toString();if(typeof a>"u"||UC(i,a)){this.previouslyFocused=t,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},Ive=class{constructor(i,e){this.list=i,this.view=e,this.disposables=new ne,this.disposables.add(Z.chain(this.disposables.add(new kt(e.domNode,"keydown")).event)).filter(t=>!mp(t.target)).map(t=>new ni(t)).filter(t=>t.keyCode===2&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey).on(this.onTab,this,this.disposables)}onTab(i){if(i.target!==this.view.domNode)return;let e=this.list.getFocus();if(e.length===0)return;let t=this.view.domElement(e[0]);if(!t)return;let n=t.querySelector("[tabIndex]");if(!n||!(n instanceof HTMLElement)||n.tabIndex===-1)return;let o=window.getComputedStyle(n);o.visibility==="hidden"||o.display==="none"||(i.preventDefault(),i.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}};function sse(i){return gt?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function ase(i){return i.browserEvent.shiftKey}function Tve(i){return i instanceof MouseEvent&&i.button===2}var hee={isSelectionSingleChangeEvent:sse,isSelectionRangeChangeEvent:ase},lse=class{constructor(i){this.list=i,this.disposables=new ne,this._onPointer=new Q,this.onPointer=this._onPointer.event,i.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||hee),this.mouseSupport=typeof i.options.mouseSupport>"u"||!!i.options.mouseSupport,this.mouseSupport&&(i.onMouseDown(this.onMouseDown,this,this.disposables),i.onContextMenu(this.onContextMenu,this,this.disposables),i.onMouseDblClick(this.onDoubleClick,this,this.disposables),i.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(to.addTarget(i.getHTMLElement()))),Z.any(i.onMouseClick,i.onMouseMiddleClick,i.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(i){i.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,i.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||hee))}isSelectionSingleChangeEvent(i){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(i):!1}isSelectionRangeChangeEvent(i){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(i):!1}isSelectionChangeEvent(i){return this.isSelectionSingleChangeEvent(i)||this.isSelectionRangeChangeEvent(i)}onMouseDown(i){pf(i.browserEvent.target)||document.activeElement!==i.browserEvent.target&&this.list.domFocus()}onContextMenu(i){if(pf(i.browserEvent.target))return;let e=typeof i.index>"u"?[]:[i.index];this.list.setFocus(e,i.browserEvent)}onViewPointer(i){if(!this.mouseSupport||mp(i.browserEvent.target)||pf(i.browserEvent.target))return;let e=i.index;if(typeof e>"u"){this.list.setFocus([],i.browserEvent),this.list.setSelection([],i.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(i))return this.changeSelection(i);if(this.isSelectionChangeEvent(i))return this.changeSelection(i);this.list.setFocus([e],i.browserEvent),this.list.setAnchor(e),Tve(i.browserEvent)||this.list.setSelection([e],i.browserEvent),this._onPointer.fire(i)}onDoubleClick(i){if(mp(i.browserEvent.target)||pf(i.browserEvent.target)||this.isSelectionChangeEvent(i))return;let e=this.list.getFocus();this.list.setSelection(e,i.browserEvent)}changeSelection(i){let e=i.index,t=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(i)){typeof t>"u"&&(t=this.list.getFocus()[0]??e,this.list.setAnchor(t));let n=Math.min(t,e),o=Math.max(t,e),r=vo(n,o+1),s=this.list.getSelection(),a=Rve(Y3(s,[t]),t);if(a.length===0)return;let l=Y3(r,Fve(s,a));this.list.setSelection(l,i.browserEvent),this.list.setFocus([e],i.browserEvent)}else if(this.isSelectionSingleChangeEvent(i)){let n=this.list.getSelection(),o=n.filter(r=>r!==e);this.list.setFocus([e]),this.list.setAnchor(e),n.length===o.length?this.list.setSelection([...o,e],i.browserEvent):this.list.setSelection(o,i.browserEvent)}}dispose(){this.disposables.dispose()}},cse=class{constructor(i,e){this.styleElement=i,this.selectorSuffix=e}style(i){let e=this.selectorSuffix&&`.${this.selectorSuffix}`,t=[];i.listBackground&&(i.listBackground.isOpaque()?t.push(`.monaco-list${e} .monaco-list-rows { background: ${i.listBackground}; }`):gt||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),i.listFocusBackground&&(t.push(`.monaco-list${e}:focus .monaco-list-row.focused { background-color: ${i.listFocusBackground}; }`),t.push(`.monaco-list${e}:focus .monaco-list-row.focused:hover { background-color: ${i.listFocusBackground}; }`)),i.listFocusForeground&&t.push(`.monaco-list${e}:focus .monaco-list-row.focused { color: ${i.listFocusForeground}; }`),i.listActiveSelectionBackground&&(t.push(`.monaco-list${e}:focus .monaco-list-row.selected { background-color: ${i.listActiveSelectionBackground}; }`),t.push(`.monaco-list${e}:focus .monaco-list-row.selected:hover { background-color: ${i.listActiveSelectionBackground}; }`)),i.listActiveSelectionForeground&&t.push(`.monaco-list${e}:focus .monaco-list-row.selected { color: ${i.listActiveSelectionForeground}; }`),i.listActiveSelectionIconForeground&&t.push(`.monaco-list${e}:focus .monaco-list-row.selected .codicon { color: ${i.listActiveSelectionIconForeground}; }`),i.listFocusAndSelectionOutline&&t.push(`.monaco-list${e}:focus .monaco-list-row.selected { outline-color: ${i.listFocusAndSelectionOutline} !important; }`),i.listFocusAndSelectionBackground&&t.push(`
				.monaco-drag-image,
				.monaco-list${e}:focus .monaco-list-row.selected.focused { background-color: ${i.listFocusAndSelectionBackground}; }
			`),i.listFocusAndSelectionForeground&&t.push(`
				.monaco-drag-image,
				.monaco-list${e}:focus .monaco-list-row.selected.focused { color: ${i.listFocusAndSelectionForeground}; }
			`),i.listInactiveFocusForeground&&(t.push(`.monaco-list${e} .monaco-list-row.focused { color:  ${i.listInactiveFocusForeground}; }`),t.push(`.monaco-list${e} .monaco-list-row.focused:hover { color:  ${i.listInactiveFocusForeground}; }`)),i.listInactiveSelectionIconForeground&&t.push(`.monaco-list${e} .monaco-list-row.focused .codicon { color:  ${i.listInactiveSelectionIconForeground}; }`),i.listInactiveFocusBackground&&(t.push(`.monaco-list${e} .monaco-list-row.focused { background-color:  ${i.listInactiveFocusBackground}; }`),t.push(`.monaco-list${e} .monaco-list-row.focused:hover { background-color:  ${i.listInactiveFocusBackground}; }`)),i.listInactiveSelectionBackground&&(t.push(`.monaco-list${e} .monaco-list-row.selected { background-color:  ${i.listInactiveSelectionBackground}; }`),t.push(`.monaco-list${e} .monaco-list-row.selected:hover { background-color:  ${i.listInactiveSelectionBackground}; }`)),i.listInactiveSelectionForeground&&t.push(`.monaco-list${e} .monaco-list-row.selected { color: ${i.listInactiveSelectionForeground}; }`),i.listHoverBackground&&t.push(`.monaco-list${e}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${i.listHoverBackground}; }`),i.listHoverForeground&&t.push(`.monaco-list${e} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${i.listHoverForeground}; }`),i.listSelectionOutline&&t.push(`.monaco-list${e} .monaco-list-row.selected { outline: 1px dotted ${i.listSelectionOutline}; outline-offset: -1px; }`),i.listFocusOutline&&t.push(`
				.monaco-drag-image,
				.monaco-list${e}:focus .monaco-list-row.focused { outline: 1px solid ${i.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${e}.last-focused .monaco-list-row.focused { outline: 1px solid ${i.listFocusOutline}; outline-offset: -1px; }
			`),i.listInactiveFocusOutline&&t.push(`.monaco-list${e} .monaco-list-row.focused { outline: 1px dotted ${i.listInactiveFocusOutline}; outline-offset: -1px; }`),i.listHoverOutline&&t.push(`.monaco-list${e} .monaco-list-row:hover { outline: 1px dashed ${i.listHoverOutline}; outline-offset: -1px; }`),i.listDropBackground&&t.push(`
				.monaco-list${e}.drop-target,
				.monaco-list${e} .monaco-list-rows.drop-target,
				.monaco-list${e} .monaco-list-row.drop-target { background-color: ${i.listDropBackground} !important; color: inherit !important; }
			`),i.tableColumnsBorder&&t.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${i.tableColumnsBorder};
			}`),i.tableOddRowsBackgroundColor&&t.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${i.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=t.join(`
`)}},Mve={listFocusBackground:j.fromHex("#7FB0D0"),listActiveSelectionBackground:j.fromHex("#0E639C"),listActiveSelectionForeground:j.fromHex("#FFFFFF"),listActiveSelectionIconForeground:j.fromHex("#FFFFFF"),listFocusAndSelectionOutline:j.fromHex("#90C2F9"),listFocusAndSelectionBackground:j.fromHex("#094771"),listFocusAndSelectionForeground:j.fromHex("#FFFFFF"),listInactiveSelectionBackground:j.fromHex("#3F3F46"),listInactiveSelectionIconForeground:j.fromHex("#FFFFFF"),listHoverBackground:j.fromHex("#2A2D2E"),listDropBackground:j.fromHex("#383B3D"),treeIndentGuidesStroke:j.fromHex("#a9a9a9"),tableColumnsBorder:j.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:j.fromHex("#cccccc").transparent(.04)},Nve={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Rve(i,e){let t=i.indexOf(e);if(t===-1)return[];let n=[],o=t-1;for(;o>=0&&i[o]===e-(t-o);)n.push(i[o--]);for(n.reverse(),o=t;o<i.length&&i[o]===e+(o-t);)n.push(i[o++]);return n}function Y3(i,e){let t=[],n=0,o=0;for(;n<i.length||o<e.length;)if(n>=i.length)t.push(e[o++]);else if(o>=e.length)t.push(i[n++]);else if(i[n]===e[o]){t.push(i[n]),n++,o++;continue}else i[n]<e[o]?t.push(i[n++]):t.push(e[o++]);return t}function Fve(i,e){let t=[],n=0,o=0;for(;n<i.length||o<e.length;)if(n>=i.length)t.push(e[o++]);else if(o>=e.length)t.push(i[n++]);else if(i[n]===e[o]){n++,o++;continue}else i[n]<e[o]?t.push(i[n++]):o++;return t}var uee=(i,e)=>i-e,Bve=class{constructor(i,e){this._templateId=i,this.renderers=e}get templateId(){return this._templateId}renderTemplate(i){return this.renderers.map(e=>e.renderTemplate(i))}renderElement(i,e,t,n){let o=0;for(let r of this.renderers)r.renderElement(i,e,t[o++],n)}disposeElement(i,e,t,n){var o;let r=0;for(let s of this.renderers)(o=s.disposeElement)===null||o===void 0||o.call(s,i,e,t[r],n),r+=1}disposeTemplate(i){let e=0;for(let t of this.renderers)t.disposeTemplate(i[e++])}},Pve=class{constructor(i){this.accessibilityProvider=i,this.templateId="a18n"}renderTemplate(i){return i}renderElement(i,e,t){let n=this.accessibilityProvider.getAriaLabel(i);n?t.setAttribute("aria-label",n):t.removeAttribute("aria-label");let o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(i);typeof o=="number"?t.setAttribute("aria-level",`${o}`):t.removeAttribute("aria-level")}disposeTemplate(i){}},Ove=class{constructor(i,e){this.list=i,this.dnd=e}getDragElements(i){let e=this.list.getSelectedElements();return e.indexOf(i)>-1?e:[i]}getDragURI(i){return this.dnd.getDragURI(i)}getDragLabel(i,e){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(i,e)}onDragStart(i,e){var t,n;(n=(t=this.dnd).onDragStart)===null||n===void 0||n.call(t,i,e)}onDragOver(i,e,t,n){return this.dnd.onDragOver(i,e,t,n)}onDragLeave(i,e,t,n){var o,r;(r=(o=this.dnd).onDragLeave)===null||r===void 0||r.call(o,i,e,t,n)}onDragEnd(i){var e,t;(t=(e=this.dnd).onDragEnd)===null||t===void 0||t.call(e,i)}drop(i,e,t,n){this.dnd.drop(i,e,t,n)}},xa=class{constructor(i,e,t,n,o=Nve){var r,s,a,l;this.user=i,this._options=o,this.focus=new Fk("focused"),this.anchor=new Fk("anchor"),this.eventBufferer=new v_,this._ariaLabel="",this.disposables=new ne,this._onDidDispose=new Q,this.onDidDispose=this._onDidDispose.event;let c=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(r=this._options.accessibilityProvider)===null||r===void 0?void 0:r.getWidgetRole():"list";this.selection=new kve(c!=="listbox"),Ur(o,Mve,!1);let d=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(d.push(new Pve(this.accessibilityProvider)),(a=(s=this.accessibilityProvider).onDidChangeActiveDescendant)===null||a===void 0||a.call(s,this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(u=>new Bve(u.templateId,[...d,u]));let h=Object.assign(Object.assign({},o),{dnd:o.dnd&&new Ove(this,o.dnd)});if(this.view=new Fs(e,t,n,h),this.view.domNode.setAttribute("role",c),o.styleController)this.styleController=o.styleController(this.view.domId);else{let u=ls(this.view.domNode);this.styleController=new cse(u,this.view.domId)}if(this.spliceable=new Mk([new cR(this.focus,this.view,o.identityProvider),new cR(this.selection,this.view,o.identityProvider),new cR(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new Ive(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new rse(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){let u=o.keyboardNavigationDelegate||Eve;this.typeNavigationController=new Lve(this,this.view,o.keyboardNavigationLabelProvider,(l=o.keyboardNavigationEventFilter)!==null&&l!==void 0?l:()=>!0,u),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Z.map(this.eventBufferer.wrapEvent(this.focus.onChange),i=>this.toListEvent(i),this.disposables)}get onDidChangeSelection(){return Z.map(this.eventBufferer.wrapEvent(this.selection.onChange),i=>this.toListEvent(i),this.disposables)}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let i=!1,e=this.disposables.add(Z.chain(this.disposables.add(new kt(this.view.domNode,"keydown")).event)).map(o=>new ni(o)).filter(o=>i=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(Y_).filter(()=>!1).event,t=this.disposables.add(Z.chain(this.disposables.add(new kt(this.view.domNode,"keyup")).event)).forEach(()=>i=!1).map(o=>new ni(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(Y_).map(({browserEvent:o})=>{let r=this.getFocus(),s=r.length?r[0]:void 0,a=typeof s<"u"?this.view.element(s):void 0,l=typeof s<"u"?this.view.domElement(s):this.view.domNode;return{index:s,element:a,anchor:l,browserEvent:o}}).event,n=this.disposables.add(Z.chain(this.view.onContextMenu)).filter(o=>!i).map(({element:o,index:r,browserEvent:s})=>({element:o,index:r,anchor:{x:s.pageX+1,y:s.pageY},browserEvent:s})).event;return Z.any(e,t,n)}get onKeyDown(){return this.disposables.add(new kt(this.view.domNode,"keydown")).event}get onDidFocus(){return Z.signal(this.disposables.add(new kt(this.view.domNode,"focus",!0)).event)}createMouseController(i){return new lse(this)}updateOptions(i={}){var e,t;this._options=Object.assign(Object.assign({},this._options),i),(e=this.typeNavigationController)===null||e===void 0||e.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(i),(t=this.keyboardController)===null||t===void 0||t.updateOptions(i),this.view.updateOptions(i)}get options(){return this._options}splice(i,e,t=[]){if(i<0||i>this.view.length)throw new Nr(this.user,`Invalid start index: ${i}`);if(e<0)throw new Nr(this.user,`Invalid delete count: ${e}`);e===0&&t.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(i,e,t))}rerender(){this.view.rerender()}element(i){return this.view.element(i)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(i){this.view.setScrollTop(i)}get ariaLabel(){return this._ariaLabel}set ariaLabel(i){this._ariaLabel=i,this.view.domNode.setAttribute("aria-label",i)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(i,e){this.view.layout(i,e)}setSelection(i,e){for(let t of i)if(t<0||t>=this.length)throw new Nr(this.user,`Invalid index ${t}`);this.selection.set(i,e)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(i=>this.view.element(i))}setAnchor(i){if(typeof i>"u"){this.anchor.set([]);return}if(i<0||i>=this.length)throw new Nr(this.user,`Invalid index ${i}`);this.anchor.set([i])}getAnchor(){return EM(this.anchor.get(),void 0)}getAnchorElement(){let i=this.getAnchor();return typeof i>"u"?void 0:this.element(i)}setFocus(i,e){for(let t of i)if(t<0||t>=this.length)throw new Nr(this.user,`Invalid index ${t}`);this.focus.set(i,e)}focusNext(i=1,e=!1,t,n){if(this.length===0)return;let o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+i:0,e,n);r>-1&&this.setFocus([r],t)}focusPrevious(i=1,e=!1,t,n){if(this.length===0)return;let o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-i:0,e,n);r>-1&&this.setFocus([r],t)}focusNextPage(i,e){return dee(this,void 0,void 0,function*(){let t=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);t=t===0?0:t-1;let n=this.getFocus()[0];if(n!==t&&(n===void 0||t>n)){let o=this.findPreviousIndex(t,!1,e);o>-1&&n!==o?this.setFocus([o],i):this.setFocus([t],i)}else{let o=this.view.getScrollTop(),r=o+this.view.renderHeight;t>n&&(r-=this.view.elementHeight(t)),this.view.setScrollTop(r),this.view.getScrollTop()!==o&&(this.setFocus([]),yield Yl(0),yield this.focusNextPage(i,e))}})}focusPreviousPage(i,e){return dee(this,void 0,void 0,function*(){let t,n=this.view.getScrollTop();n===0?t=this.view.indexAt(n):t=this.view.indexAfter(n-1);let o=this.getFocus()[0];if(o!==t&&(o===void 0||o>=t)){let r=this.findNextIndex(t,!1,e);r>-1&&o!==r?this.setFocus([r],i):this.setFocus([t],i)}else{let r=n;this.view.setScrollTop(n-this.view.renderHeight),this.view.getScrollTop()!==r&&(this.setFocus([]),yield Yl(0),yield this.focusPreviousPage(i,e))}})}focusLast(i,e){if(this.length===0)return;let t=this.findPreviousIndex(this.length-1,!1,e);t>-1&&this.setFocus([t],i)}focusFirst(i,e){this.focusNth(0,i,e)}focusNth(i,e,t){if(this.length===0)return;let n=this.findNextIndex(i,!1,t);n>-1&&this.setFocus([n],e)}findNextIndex(i,e=!1,t){for(let n=0;n<this.length;n++){if(i>=this.length&&!e)return-1;if(i=i%this.length,!t||t(this.element(i)))return i;i++}return-1}findPreviousIndex(i,e=!1,t){for(let n=0;n<this.length;n++){if(i<0&&!e)return-1;if(i=(this.length+i%this.length)%this.length,!t||t(this.element(i)))return i;i--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(i=>this.view.element(i))}reveal(i,e){if(i<0||i>=this.length)throw new Nr(this.user,`Invalid index ${i}`);let t=this.view.getScrollTop(),n=this.view.elementTop(i),o=this.view.elementHeight(i);if(Xa(e)){let r=o-this.view.renderHeight;this.view.setScrollTop(r*pr(e,0,1)+n)}else{let r=n+o,s=t+this.view.renderHeight;n<t&&r>=s||(n<t||r>=s&&o>=this.view.renderHeight?this.view.setScrollTop(n):r>=s&&this.view.setScrollTop(r-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(i){return this.view.getElementDomId(i)}style(i){this.styleController.style(i)}toListEvent({indexes:i,browserEvent:e}){return{indexes:i,elements:i.map(t=>this.view.element(t)),browserEvent:e}}_onFocusChange(){let i=this.focus.get();this.view.domNode.classList.toggle("element-focused",i.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var i;let e=this.focus.get();if(e.length>0){let t;!((i=this.accessibilityProvider)===null||i===void 0)&&i.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let i=this.selection.get();this.view.domNode.classList.toggle("selection-none",i.length===0),this.view.domNode.classList.toggle("selection-single",i.length===1),this.view.domNode.classList.toggle("selection-multiple",i.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};sm([vn],xa.prototype,"onDidChangeFocus",null);sm([vn],xa.prototype,"onDidChangeSelection",null);sm([vn],xa.prototype,"onContextMenu",null);sm([vn],xa.prototype,"onKeyDown",null);sm([vn],xa.prototype,"onDidFocus",null);var An=ze("keybindingService"),dse=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Lc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Hve=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},av={Visible:new Le("CodeActionMenuVisible",!1,m("CodeActionMenuVisible","Whether the code action list widget is visible"))},H1=class extends ho{constructor(e,t){super(e.command?e.command.id:e.title,Wve(e.title),void 0,!e.disabled,t),this.action=e}};function Wve(i){return i.replace(/\r\n|\r|\n/g," ")}var zve="codeActionWidget",dR=26,J3=class{constructor(i,e){this.acceptKeybindings=i,this.keybindingService=e}get templateId(){return zve}renderTemplate(i){let e=Object.create(null);return e.disposables=[],e.root=i,e.text=document.createElement("span"),i.append(e.text),e}renderElement(i,e,t){let n=t,o=i.title,r=i.isEnabled,s=i.isSeparator,a=i.isDocumentation;n.text.textContent=o,r?n.root.classList.remove("option-disabled"):(n.root.classList.add("option-disabled"),n.root.style.backgroundColor="transparent !important"),s&&(n.root.classList.add("separator"),n.root.style.height="10px"),a||(()=>{var l,c;let[d,h]=this.acceptKeybindings;n.root.title=m({key:"label",comment:['placeholders are keybindings, e.g "F2 to Refactor, Shift+F2 to Preview"']},"{0} to Refactor, {1} to Preview",(l=this.keybindingService.lookupKeybinding(d))===null||l===void 0?void 0:l.getLabel(),(c=this.keybindingService.lookupKeybinding(h))===null||c===void 0?void 0:c.getLabel())})()}disposeTemplate(i){i.disposables=st(i.disposables)}};J3=dse([Lc(1,An)],J3);var Bk=class X3 extends J{constructor(e,t,n,o,r,s,a,l,c,d){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._languageFeaturesService=r,this._telemetryService=s,this._configurationService=l,this._contextViewService=c,this._contextKeyService=d,this._showingActions=this._register(new eo),this.codeActionList=this._register(new eo),this.options=[],this._visible=!1,this.viewItems=[],this.hasSeperator=!1,this._keybindingResolver=new Pk({getKeybindings:()=>o.getKeybindings()}),this._ctxMenuWidgetVisible=av.Visible.bindTo(this._contextKeyService),this.listRenderer=new J3(["onEnterSelectCodeAction","onEnterSelectCodeActionWithPreview"],o)}get isVisible(){return this._visible}isCodeActionWidgetEnabled(e){return this._configurationService.getValue("editor.experimental.useCustomCodeActionMenu",{resource:e.uri})}_onListSelection(e){e.elements.length&&e.elements.forEach(t=>{t.isEnabled&&(t.action.run(),this.hideCodeActionWidget())})}_onListHover(e){var t,n,o,r;e.element?!((n=e.element)===null||n===void 0)&&n.isEnabled?((o=this.codeActionList.value)===null||o===void 0||o.setFocus([e.element.index]),this.focusedEnabledItem=this.viewItems.indexOf(e.element),this.currSelectedItem=e.element.index):(this.currSelectedItem=void 0,(r=this.codeActionList.value)===null||r===void 0||r.setFocus([e.element.index])):(this.currSelectedItem=void 0,(t=this.codeActionList.value)===null||t===void 0||t.setFocus([]))}renderCodeActionMenuList(e,t){var n;let o=new ne,r=document.createElement("div"),s=document.createElement("div");this.block=e.appendChild(s),this.block.classList.add("context-view-block"),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",o.add(le(this.block,Ee.MOUSE_DOWN,u=>u.stopPropagation())),r.id="codeActionMenuWidget",r.classList.add("codeActionMenuWidget"),e.appendChild(r),this.codeActionList.value=new xa("codeActionWidget",r,{getHeight(u){return u.isSeparator?10:dR},getTemplateId(u){return"codeActionWidget"}},[this.listRenderer],{keyboardSupport:!1}),o.add(this.codeActionList.value.onMouseOver(u=>this._onListHover(u))),o.add(this.codeActionList.value.onDidChangeFocus(u=>{var g;return(g=this.codeActionList.value)===null||g===void 0?void 0:g.domFocus()})),o.add(this.codeActionList.value.onDidChangeSelection(u=>this._onListSelection(u))),o.add(this._editor.onDidLayoutChange(u=>this.hideCodeActionWidget())),t.forEach((u,g)=>{let p=u.class==="separator",f=!1;u instanceof H1&&(f=u.action.kind===X3.documentationID),p&&(this.hasSeperator=!0);let v={title:u.label,detail:u.tooltip,action:t[g],isEnabled:u.enabled,isSeparator:p,index:g,isDocumentation:f};u.enabled&&this.viewItems.push(v),this.options.push(v)}),this.codeActionList.value.splice(0,this.codeActionList.value.length,this.options);let a=this.hasSeperator?(t.length-1)*dR+10:t.length*dR;r.style.height=String(a)+"px",this.codeActionList.value.layout(a);let l=[];this.options.forEach((u,g)=>{var p,f;if(!this.codeActionList.value)return;let v=(f=document.getElementById((p=this.codeActionList.value)===null||p===void 0?void 0:p.getElementID(g)))===null||f===void 0?void 0:f.getElementsByTagName("span")[0].offsetWidth;l.push(Number(v))});let c=Math.max(...l);r.style.width=c+52+"px",(n=this.codeActionList.value)===null||n===void 0||n.layout(a,c),this.viewItems.length<1||this.viewItems.every(u=>u.isDocumentation)?this.currSelectedItem=void 0:(this.focusedEnabledItem=0,this.currSelectedItem=this.viewItems[0].index,this.codeActionList.value.setFocus([this.currSelectedItem])),this.codeActionList.value.domFocus();let d=Oh(e),h=d.onDidBlur(()=>{this.hideCodeActionWidget()});return o.add(h),o.add(d),this._ctxMenuWidgetVisible.set(!0),o}focusPrevious(){var e;if(typeof this.focusedEnabledItem>"u")this.focusedEnabledItem=this.viewItems[0].index;else if(this.viewItems.length<1)return!1;let t=this.focusedEnabledItem,n;do this.focusedEnabledItem=this.focusedEnabledItem-1,this.focusedEnabledItem<0&&(this.focusedEnabledItem=this.viewItems.length-1),n=this.viewItems[this.focusedEnabledItem],(e=this.codeActionList.value)===null||e===void 0||e.setFocus([n.index]),this.currSelectedItem=n.index;while(this.focusedEnabledItem!==t&&(!n.isEnabled||n.action.id===Lo.ID));return!0}focusNext(){var e;if(typeof this.focusedEnabledItem>"u")this.focusedEnabledItem=this.viewItems.length-1;else if(this.viewItems.length<1)return!1;let t=this.focusedEnabledItem,n;do this.focusedEnabledItem=(this.focusedEnabledItem+1)%this.viewItems.length,n=this.viewItems[this.focusedEnabledItem],(e=this.codeActionList.value)===null||e===void 0||e.setFocus([n.index]),this.currSelectedItem=n.index;while(this.focusedEnabledItem!==t&&(!n.isEnabled||n.action.id===Lo.ID));return!0}navigateListWithKeysUp(){this.focusPrevious()}navigateListWithKeysDown(){this.focusNext()}onEnterSet(){var e;typeof this.currSelectedItem=="number"&&((e=this.codeActionList.value)===null||e===void 0||e.setSelection([this.currSelectedItem]))}dispose(){super.dispose()}hideCodeActionWidget(){this._ctxMenuWidgetVisible.reset(),this.options=[],this.viewItems=[],this.focusedEnabledItem=0,this.currSelectedItem=void 0,this.hasSeperator=!1,this._contextViewService.hideContextView({source:this})}codeActionTelemetry(e,t,n){this._telemetryService.publicLog2("codeAction.applyCodeAction",{codeActionFrom:e,validCodeActions:n.validActions.length,cancelled:t})}show(e,t,n,o){return Hve(this,void 0,void 0,function*(){let r=this._editor.getModel();if(!r)return;let s=o.includeDisabledActions?t.allActions:t.validActions;if(!s.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,sD();this._visible=!0,this._showingActions.value=t;let a=this.getMenuActions(e,s,t.documentation),l=q.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},c=this._keybindingResolver.getResolver(),d=this._editor.getOption(117);this.isCodeActionWidgetEnabled(r)?this._contextViewService.showContextView({getAnchor:()=>l,render:h=>this.renderCodeActionMenuList(h,a),onHide:h=>{let u=o.fromLightbulb?Ko.Lightbulb:e.triggerAction;this.codeActionTelemetry(u,h,t),this._visible=!1,this._editor.focus()}},this._editor.getDomNode(),!1):this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>l,getActions:()=>a,onHide:h=>{let u=o.fromLightbulb?Ko.Lightbulb:e.triggerAction;this.codeActionTelemetry(u,h,t),this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:h=>h instanceof H1?c(h.action):void 0})})}getMenuActions(e,t,n){var o,r;let s=d=>new H1(d.action,()=>this._delegate.onSelectCodeAction(d,e)),a=t.map(s),l=[...n],c=this._editor.getModel();if(c&&a.length)for(let d of this._languageFeaturesService.codeActionProvider.all(c))d._getAdditionalMenuItems&&l.push(...d._getAdditionalMenuItems({trigger:e.type,only:(r=(o=e.filter)===null||o===void 0?void 0:o.include)===null||r===void 0?void 0:r.value},t.map(h=>h.action)));return l.length&&a.push(new Lo,...l.map(d=>s(new Tk({title:d.title,command:d,kind:X3.documentationID},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();let t=this._editor.getScrolledVisiblePosition(e),n=Eo(this._editor.getDomNode()),o=n.left+t.left,r=n.top+t.top+t.height;return{x:o,y:r}}};Bk.documentationID="_documentation";Bk=dse([Lc(2,Fd),Lc(3,An),Lc(4,Te),Lc(5,Vs),Lc(6,mi),Lc(7,Ot),Lc(8,om),Lc(9,Ze)],Bk);var Pk=class i{constructor(e){this._keybindingProvider=e}getResolver(){let e=new tl(()=>this._keybindingProvider.getKeybindings().filter(t=>i.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===ZY?n={kind:Rt.SourceOrganizeImports.value}:t.command===eJ&&(n={kind:Rt.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},t0.fromUser(n,{kind:Rt.None,apply:"never"}))}));return t=>{if(t.kind){let n=this.bestKeybindingForCodeAction(t,e.getValue());return n?.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;let n=new Rt(e.kind);return t.filter(o=>o.kind.contains(n)).filter(o=>o.preferred?e.isPreferred:!0).reduceRight((o,r)=>o?o.kind.contains(r.kind)?r:o:r,void 0)}};Pk.codeActionCommands=[ise,tse,nse,ZY,eJ];var Vve=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Uve=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},W1;(function(i){i.Hidden={type:0};class e{constructor(n,o,r,s){this.actions=n,this.trigger=o,this.editorPosition=r,this.widgetPosition=s,this.type=1}}i.Showing=e})(W1||(W1={}));var Ok=class hse extends J{constructor(e,t,n,o){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=o,this._onClick=this._register(new Q),this.onClick=this._onClick.event,this._state=W1.Hidden,this._domNode=document.createElement("div"),this._domNode.className=_.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(r=>{let s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide()})),to.ignoreTarget(this._domNode),this._register(Aue(this._domNode,r=>{if(this.state.type!==1)return;this._editor.focus(),r.preventDefault();let{top:s,height:a}=Eo(this._domNode),l=this._editor.getOption(61),c=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=l),this._onClick.fire({x:r.posx,y:s+a+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(le(this._domNode,"mouseenter",r=>{(r.buttons&1)===1&&this.hide()})),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(59)&&!this._editor.getOption(59).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();let o=this._editor.getOptions();if(!o.get(59).enabled)return this.hide();let r=this._editor.getModel();if(!r)return this.hide();let{lineNumber:s,column:a}=r.validatePosition(n),l=r.getOptions().tabSize,c=o.get(46),d=r.getLineContent(s),h=QM(d,l),u=c.spaceWidth*h>22,g=f=>f>2&&this._editor.getTopForLineNumber(f)===this._editor.getTopForLineNumber(f-1),p=s;if(!u){if(s>1&&!g(s-1))p-=1;else if(!g(s+1))p+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new W1.Showing(e,t,n,{position:{lineNumber:p,column:1},preference:hse._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=W1.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(..._.lightBulb.classNamesArray),this._domNode.classList.add(..._.lightbulbAutofix.classNamesArray);let t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=m("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(..._.lightbulbAutofix.classNamesArray),this._domNode.classList.add(..._.lightBulb.classNamesArray);let e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=m("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=m("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};Ok._posPref=[0];Ok=Vve([Uve(3,An)],Ok);xi((i,e)=>{var t;let n=(t=i.getColor(yn))===null||t===void 0?void 0:t.transparent(.7),o=i.getColor(qpe);o&&e.addRule(`
		.monaco-editor .contentWidgets ${_.lightBulb.cssSelector} {
			color: ${o};
			background-color: ${n};
		}`);let r=i.getColor($pe);r&&e.addRule(`
		.monaco-editor .contentWidgets ${_.lightbulbAutofix.cssSelector} {
			color: ${r};
			background-color: ${n};
		}`)});var Qve=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},jve=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},hR=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Kve=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(i,t):o?o.value=t:e.set(i,t),t},qve=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},NS,Z3=class extends J{constructor(i,e,t,n,o){super(),this._editor=i,this.delegate=n,this._activeCodeActions=this._register(new eo),this.previewOn=!1,NS.set(this,!1),this._codeActionWidget=new tl(()=>this._register(o.createInstance(Bk,this._editor,{onSelectCodeAction:(r,s)=>hR(this,void 0,void 0,function*(){this.previewOn?this.delegate.applyCodeAction(r,!0,!!this.previewOn):this.delegate.applyCodeAction(r,!0,!!s.preview),this.previewOn=!1})}))),this._lightBulbWidget=new tl(()=>{let r=this._register(o.createInstance(Ok,this._editor,e,t));return this._register(r.onClick(s=>this.showCodeActionList(s.trigger,s.actions,s,{includeDisabledActions:!1,fromLightbulb:!0}))),r})}dispose(){Kve(this,NS,!0,"f"),super.dispose()}hideCodeActionWidget(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().hideCodeActionWidget()}onEnter(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().onEnterSet()}onPreviewEnter(){this.previewOn=!0,this.onEnter()}navigateList(i){this._codeActionWidget.hasValue()&&(i?this._codeActionWidget.getValue().navigateListWithKeysUp():this._codeActionWidget.getValue().navigateListWithKeysDown())}update(i){var e,t,n,o,r;return hR(this,void 0,void 0,function*(){if(i.type!==1){(e=this._lightBulbWidget.rawValue)===null||e===void 0||e.hide();return}let s;try{s=yield i.actions}catch(a){Ye(a);return}if(!qve(this,NS,"f"))if(this._lightBulbWidget.getValue().update(s,i.trigger,i.position),i.trigger.type===1){if(!((t=i.trigger.filter)===null||t===void 0)&&t.include){let l=this.tryGetValidActionToApply(i.trigger,s);if(l){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(l,!1,!1)}finally{s.dispose()}return}if(i.trigger.context){let c=this.getInvalidActionThatWouldHaveBeenApplied(i.trigger,s);if(c&&c.action.disabled){(n=Wr.get(this._editor))===null||n===void 0||n.showMessage(c.action.disabled,i.trigger.context.position),s.dispose();return}}}let a=!!(!((o=i.trigger.filter)===null||o===void 0)&&o.include);if(i.trigger.context&&(!s.allActions.length||!a&&!s.validActions.length)){(r=Wr.get(this._editor))===null||r===void 0||r.showMessage(i.trigger.context.notAvailableMessage,i.trigger.context.position),this._activeCodeActions.value=s,s.dispose();return}this._activeCodeActions.value=s,this._codeActionWidget.getValue().show(i.trigger,s,i.position,{includeDisabledActions:a,fromLightbulb:!1})}else this._codeActionWidget.getValue().isVisible?s.dispose():this._activeCodeActions.value=s})}getInvalidActionThatWouldHaveBeenApplied(i,e){if(e.allActions.length&&(i.autoApply==="first"&&e.validActions.length===0||i.autoApply==="ifSingle"&&e.allActions.length===1))return e.allActions.find(({action:t})=>t.disabled)}tryGetValidActionToApply(i,e){if(e.validActions.length&&(i.autoApply==="first"&&e.validActions.length>0||i.autoApply==="ifSingle"&&e.validActions.length===1))return e.validActions[0]}showCodeActionList(i,e,t,n){return hR(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(i,e,t,n)})}};NS=new WeakMap;Z3=Qve([jve(4,tt)],Z3);var Xt;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Xt||(Xt={}));(function(i){function e(s,a){return a-s}i.compare=e;let t=Object.create(null);t[i.Error]=m("sev.error","Error"),t[i.Warning]=m("sev.warning","Warning"),t[i.Info]=m("sev.info","Info");function n(s){return t[s]||""}i.toString=n;function o(s){switch(s){case Mt.Error:return i.Error;case Mt.Warning:return i.Warning;case Mt.Info:return i.Info;case Mt.Ignore:return i.Hint}}i.fromSeverity=o;function r(s){switch(s){case i.Error:return Mt.Error;case i.Warning:return Mt.Warning;case i.Info:return Mt.Info;case i.Hint:return Mt.Ignore}}i.toSeverity=r})(Xt||(Xt={}));var Hk;(function(i){let e="";function t(o){return n(o,!0)}i.makeKey=t;function n(o,r){let s=[e];return o.source?s.push(o.source.replace("\xA6","\\\xA6")):s.push(e),o.code?typeof o.code=="string"?s.push(o.code.replace("\xA6","\\\xA6")):s.push(o.code.value.replace("\xA6","\\\xA6")):s.push(e),o.severity!==void 0&&o.severity!==null?s.push(Xt.toString(o.severity)):s.push(e),o.message&&r?s.push(o.message.replace("\xA6","\\\xA6")):s.push(e),o.startLineNumber!==void 0&&o.startLineNumber!==null?s.push(o.startLineNumber.toString()):s.push(e),o.startColumn!==void 0&&o.startColumn!==null?s.push(o.startColumn.toString()):s.push(e),o.endLineNumber!==void 0&&o.endLineNumber!==null?s.push(o.endLineNumber.toString()):s.push(e),o.endColumn!==void 0&&o.endColumn!==null?s.push(o.endColumn.toString()):s.push(e),s.push(e),s.join("\xA6")}i.makeKeyOptionalMessage=n})(Hk||(Hk={}));var ka=ze("markerService"),uR=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},$ve=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(i,t):o?o.value=t:e.set(i,t),t},Vm,use=new Le("supportedCodeAction",""),e8=class extends J{constructor(e,t,n,o=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=o,this._autoTriggerTimer=this._register(new Sr),this._register(this._markerService.onMarkerChanged(r=>this._onMarkerChanges(r))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){let t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){let t=this._editor.getModel();t&&e.some(n=>bre(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Ko.Default})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Ko.Default})},this._delay)}_getRangeOfMarker(e){let t=this._editor.getModel();if(t)for(let n of this._markerService.read({resource:t.uri})){let o=t.validateRange(n);if(E.intersectRanges(o,e))return E.lift(o)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){let{lineNumber:o,column:r}=n.getPosition(),s=t.getLineContent(o);if(s.length===0)return;if(r===1){if(/\s/.test(s[0]))return}else if(r===t.getLineMaxColumn(o)){if(/\s/.test(s[s.length-1]))return}else if(/\s/.test(s[r-2])&&/\s/.test(s[r-1]))return}return n}_createEventAndSignalChange(e,t){let n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}let o=this._getRangeOfMarker(t),r=o?o.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:r};return this._signalChange(s),s}},eg;(function(i){i.Empty={type:0};class e{constructor(n,o,r,s){this.trigger=n,this.rangeOrSelection=o,this.position=r,this._cancellablePromise=s,this.type=1,this.actions=s.catch(a=>{if(Ls(a))return Gve;throw a})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(eg||(eg={}));var Gve={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1},t8=class extends J{constructor(e,t,n,o,r){super(),this._editor=e,this._registry=t,this._markerService=n,this._progressService=r,this._codeActionOracle=this._register(new eo),this._state=eg.Empty,this._onDidChangeState=this._register(new Q),this.onDidChangeState=this._onDidChangeState.event,Vm.set(this,!1),this._supportedCodeActions=use.bindTo(o),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){uR(this,Vm,"f")||($ve(this,Vm,!0,"f"),super.dispose(),this.setState(eg.Empty,!0))}_update(){if(uR(this,Vm,"f"))return;this._codeActionOracle.value=void 0,this.setState(eg.Empty);let e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(83)){let t=[];for(let n of this._registry.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new e8(this._editor,this._markerService,n=>{var o;if(!n){this.setState(eg.Empty);return}let r=Gn(s=>tJ(this._registry,e,n.selection,n.trigger,ic.None,s));n.trigger.type===1&&((o=this._progressService)===null||o===void 0||o.showWhile(r,250)),this.setState(new eg.Triggered(n.trigger,n.selection,n.position,r))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Ko.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!uR(this,Vm,"f")&&this._onDidChangeState.fire(e))}};Vm=new WeakMap;var Yve=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Cv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},gse=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function jC(i){return we.regex(use.keys()[0],new RegExp("(\\s|^)"+cs(i.value)+"\\b"))}function pse(i,e,t,n){let o=t0.fromUser(e,{kind:Rt.Refactor,apply:"never"});return am(i,typeof e?.kind=="string"?o.preferred?m("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",e.kind):m("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",e.kind):o.preferred?m("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):m("editor.action.refactor.noneMessage","No refactorings available"),{include:Rt.Refactor.contains(o.kind)?o.kind:Rt.None,onlyIncludePreferredActions:o.preferred},o.apply,t,n)}var XM={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:m("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:m("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[m("args.schema.apply.first","Always apply the first returned code action."),m("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),m("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:m("args.schema.preferred","Controls if only preferred code actions should be returned.")}}},tu=class mse extends J{constructor(e,t,n,o,r,s){super(),this._instantiationService=r,this._editor=e,this._model=this._register(new t8(this._editor,s.codeActionProvider,t,n,o)),this._register(this._model.onDidChangeState(a=>this.update(a))),this._ui=new tl(()=>this._register(new Z3(e,i0.Id,Eb.Id,{applyCodeAction:(a,l,c)=>gse(this,void 0,void 0,function*(){try{yield this._applyCodeAction(a,c)}finally{l&&this._trigger({type:2,triggerAction:Ko.QuickFix,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(mse.ID)}update(e){this._ui.getValue().update(e)}hideCodeActionMenu(){this._ui.hasValue()&&this._ui.getValue().hideCodeActionWidget()}navigateCodeActionList(e){this._ui.hasValue()&&this._ui.getValue().navigateList(e)}selectedOption(){this._ui.hasValue()&&this._ui.getValue().onEnter()}selectedOptionWithPreview(){this._ui.hasValue()&&this._ui.getValue().onPreviewEnter()}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,n,o,r){var s;if(!this._editor.hasModel())return;(s=Wr.get(this._editor))===null||s===void 0||s.closeMessage();let a=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:o,context:{notAvailableMessage:e,position:a},preview:r})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t){return this._instantiationService.invokeFunction(Jve,e,i8.FromCodeActions,{preview:t,editor:this._editor})}};tu.ID="editor.contrib.quickFixController";tu=Yve([Cv(1,ka),Cv(2,Ze),Cv(3,bu),Cv(4,tt),Cv(5,Te)],tu);var i8;(function(i){i.OnSave="onSave",i.FromProblemsView="fromProblemsView",i.FromCodeActions="fromCodeActions"})(i8||(i8={}));function Jve(i,e,t,n){return gse(this,void 0,void 0,function*(){let o=i.get(rm),r=i.get(ji),s=i.get(Vs),a=i.get(nn);if(s.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),yield e.resolve(et.None),e.action.edit&&(yield o.apply(kd.convert(e.action.edit),{editor:n?.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:!0,showPreview:n?.preview})),e.action.command)try{yield r.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(l){let c=Xve(l);a.error(typeof c=="string"?c:m("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function Xve(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}function am(i,e,t,n,o=!1,r=Ko.Default){if(i.hasModel()){let s=tu.get(i);s?.manualTriggerAtCurrentPosition(e,r,t,n,o)}}var i0=class i extends Ie{constructor(){super({id:i.Id,label:m("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:we.and(B.writable,B.hasCodeActionsProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:2132,weight:100}})}run(e,t){return am(t,m("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,!1,Ko.QuickFix)}};i0.Id="editor.action.quickFix";var n8=class extends $n{constructor(){super({id:tse,precondition:we.and(B.writable,B.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:XM}]}})}runEditorCommand(e,t,n){let o=t0.fromUser(n,{kind:Rt.Empty,apply:"ifSingle"});return am(t,typeof n?.kind=="string"?o.preferred?m("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):m("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):o.preferred?m("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):m("editor.action.codeAction.noneMessage","No code actions available"),{include:o.kind,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply)}},o8=class extends Ie{constructor(){super({id:ise,label:m("refactor.label","Refactor..."),alias:"Refactor...",precondition:we.and(B.writable,B.hasCodeActionsProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:we.and(B.writable,jC(Rt.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:XM}]}})}run(e,t,n){return pse(t,n,!1,Ko.Refactor)}},r8=class extends Ie{constructor(){super({id:fve,label:m("refactor.preview.label","Refactor with Preview..."),alias:"Refactor Preview...",precondition:we.and(B.writable,B.hasCodeActionsProvider),description:{description:"Refactor Preview...",args:[{name:"args",schema:XM}]}})}run(e,t,n){return pse(t,n,!0,Ko.RefactorPreview)}},s8=class extends Ie{constructor(){super({id:nse,label:m("source.label","Source Action..."),alias:"Source Action...",precondition:we.and(B.writable,B.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:we.and(B.writable,jC(Rt.Source))},description:{description:"Source Action...",args:[{name:"args",schema:XM}]}})}run(e,t,n){let o=t0.fromUser(n,{kind:Rt.Source,apply:"never"});return am(t,typeof n?.kind=="string"?o.preferred?m("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):m("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):o.preferred?m("editor.action.source.noneMessage.preferred","No preferred source actions available"):m("editor.action.source.noneMessage","No source actions available"),{include:Rt.Source.contains(o.kind)?o.kind:Rt.None,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply,void 0,Ko.SourceAction)}},a8=class extends Ie{constructor(){super({id:ZY,label:m("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:we.and(B.writable,jC(Rt.SourceOrganizeImports)),kbOpts:{kbExpr:B.editorTextFocus,primary:1581,weight:100}})}run(e,t){return am(t,m("editor.action.organize.noneMessage","No organize imports action available"),{include:Rt.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",void 0,Ko.OrganizeImports)}},l8=class extends Ie{constructor(){super({id:eJ,label:m("fixAll.label","Fix All"),alias:"Fix All",precondition:we.and(B.writable,jC(Rt.SourceFixAll))})}run(e,t){return am(t,m("fixAll.noneMessage","No fix all action available"),{include:Rt.SourceFixAll,includeSourceActions:!0},"ifSingle",void 0,Ko.FixAll)}},Eb=class i extends Ie{constructor(){super({id:i.Id,label:m("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:we.and(B.writable,jC(Rt.QuickFix)),kbOpts:{kbExpr:B.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return am(t,m("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Rt.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",void 0,Ko.AutoFix)}};Eb.Id="editor.action.autoFix";var KC=$n.bindToContribution(tu.get),qC=100+90;pe(new KC({id:"hideCodeActionMenuWidget",precondition:av.Visible,handler(i){i.hideCodeActionMenu()},kbOpts:{weight:qC,primary:9,secondary:[1033]}}));pe(new KC({id:"focusPreviousCodeAction",precondition:av.Visible,handler(i){i.navigateCodeActionList(!0)},kbOpts:{weight:qC+1e5,primary:16,secondary:[2064]}}));pe(new KC({id:"focusNextCodeAction",precondition:av.Visible,handler(i){i.navigateCodeActionList(!1)},kbOpts:{weight:qC+1e5,primary:18,secondary:[2066]}}));pe(new KC({id:"onEnterSelectCodeAction",precondition:av.Visible,handler(i){i.selectedOption()},kbOpts:{weight:qC+1e5,primary:3,secondary:[1026]}}));pe(new KC({id:"onEnterSelectCodeActionWithPreview",precondition:av.Visible,handler(i){i.selectedOptionWithPreview()},kbOpts:{weight:qC+1e5,primary:2051}}));var iJ=Object.freeze({id:"editor",order:5,type:"object",title:m("editorConfigurationTitle","Editor"),scope:5}),Wk=Object.assign(Object.assign({},iJ),{properties:{"editor.tabSize":{type:"number",default:xo.tabSize,minimum:1,markdownDescription:m("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:xo.insertSpaces,markdownDescription:m("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:xo.detectIndentation,markdownDescription:m("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:xo.trimAutoWhitespace,description:m("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:xo.largeFileOptimizations,description:m("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:m("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[m("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),m("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),m("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:m("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[m("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),m("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),m("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:m("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:m("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:m("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:["array","null"],default:null,description:m("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:m("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:m("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:m("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:m("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:!0,description:m("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:m("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:m("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:m("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function Zve(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(let i of ef){let e=i.schema;if(typeof e<"u")if(Zve(e))Wk.properties[`editor.${i.name}`]=e;else for(let t in e)Object.hasOwnProperty.call(e,t)&&(Wk.properties[t]=e[t])}var Ty=null;function fse(){return Ty===null&&(Ty=Object.create(null),Object.keys(Wk.properties).forEach(i=>{Ty[i]=!0})),Ty}function e1e(i){return fse()[`editor.${i}`]||!1}function t1e(i){return fse()[`diffEditor.${i}`]||!1}var i1e=oi.as(Sa.Configuration);i1e.registerConfiguration(Wk);oi.as(Sa.Configuration).registerConfiguration(Object.assign(Object.assign({},iJ),{properties:{"editor.experimental.useCustomCodeActionMenu":{type:"boolean",tags:["experimental"],scope:5,description:m("codeActionWidget","Enabling this adjusts how the code action menu is rendered."),default:!1}}}));Wt(tu.ID,tu);fe(i0);fe(o8);fe(r8);fe(s8);fe(a8);fe(Eb);fe(l8);pe(new n8);function $C(i){return ZM(i,0)}function ZM(i,e){switch(typeof i){case"object":return i===null?sd(349,e):Array.isArray(i)?o1e(i,e):r1e(i,e);case"string":return nJ(i,e);case"boolean":return n1e(i,e);case"number":return sd(i,e);case"undefined":return sd(937,e);default:return sd(617,e)}}function sd(i,e){return(e<<5)-e+i|0}function n1e(i,e){return sd(i?433:863,e)}function nJ(i,e){e=sd(149417,e);for(let t=0,n=i.length;t<n;t++)e=sd(i.charCodeAt(t),e);return e}function o1e(i,e){return e=sd(104579,e),i.reduce((t,n)=>ZM(n,t),e)}function r1e(i,e){return e=sd(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=nJ(n,t),ZM(i[n],t)),e)}function gR(i,e,t=32){let n=t-e,o=~((1<<n)-1);return(i<<e|(o&i)>>>n)>>>0}function gee(i,e=0,t=i.byteLength,n=0){for(let o=0;o<t;o++)i[e+o]=n}function s1e(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function yv(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):s1e((i>>>0).toString(16),e/4)}var zk=class i{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let n=this._buff,o=this._buffLen,r=this._leftoverHighSurrogate,s,a;for(r!==0?(s=r,a=-1,r=0):(s=e.charCodeAt(0),a=0);;){let l=s;if(En(s))if(a+1<t){let c=e.charCodeAt(a+1);ep(c)?(a++,l=rY(s,c)):l=65533}else{r=s;break}else ep(s)&&(l=65533);if(o=this._push(n,o,l),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=o,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),yv(this._h0)+yv(this._h1)+yv(this._h2)+yv(this._h3)+yv(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,gee(this._buff,this._buffLen),this._buffLen>56&&(this._step(),gee(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=i._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,gR(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,o=this._h1,r=this._h2,s=this._h3,a=this._h4,l,c,d;for(let h=0;h<80;h++)h<20?(l=o&r|~o&s,c=1518500249):h<40?(l=o^r^s,c=1859775393):h<60?(l=o&r|o&s|r&s,c=2400959708):(l=o^r^s,c=3395469782),d=gR(n,5)+l+a+c+e.getUint32(h*4,!1)&4294967295,a=s,s=r,r=gR(o,30),o=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+o&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}};zk._bigBlock32=new DataView(new ArrayBuffer(320));var pee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Lb=class{constructor(){this.lenses=[],this._disposables=new ne}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(let n of e.lenses)this.lenses.push({symbol:n,provider:t})}};function _se(i,e,t){return pee(this,void 0,void 0,function*(){let n=i.ordered(e),o=new Map,r=new Lb,s=n.map((a,l)=>pee(this,void 0,void 0,function*(){o.set(a,l);try{let c=yield Promise.resolve(a.provideCodeLenses(e,t));c&&r.add(c,a)}catch(c){Fn(c)}}));return yield Promise.all(s),r.lenses=r.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:o.get(a.provider)<o.get(l.provider)?-1:o.get(a.provider)>o.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),r})}ft.registerCommand("_executeCodeLensProvider",function(i,...e){let[t,n]=e;ai($.isUri(t)),ai(typeof n=="number"||!n);let{codeLensProvider:o}=i.get(Te),r=i.get(li).getModel(t);if(!r)throw Nt();let s=[],a=new ne;return _se(o,r,et.None).then(l=>{a.add(l);let c=[];for(let d of l.lenses)n==null||d.symbol.command?s.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(r,d.symbol,et.None)).then(h=>s.push(h||d.symbol)));return Promise.all(c)}).then(()=>s).finally(()=>{setTimeout(()=>a.dispose(),100)})});var d1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},ff;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(ff||(ff={}));var Xf=class i extends J{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Q),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=ff.None,this.cache=new Map,this.flushDelayer=new VP(i.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((o,r)=>this.accept(r,o)),(n=e.deleted)===null||n===void 0||n.forEach(o=>this.accept(o,void 0))}accept(e,t){if(this.state===ff.Closed)return;let n=!1;Uo(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){let n=this.cache.get(e);return Uo(n)?t:n}getBoolean(e,t){let n=this.get(e);return Uo(n)?t:n==="true"}getNumber(e,t){let n=this.get(e);return Uo(n)?t:parseInt(n,10)}set(e,t){return d1(this,void 0,void 0,function*(){if(this.state===ff.Closed)return;if(Uo(t))return this.delete(e);let n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return d1(this,void 0,void 0,function*(){if(!(this.state===ff.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return d1(this,void 0,void 0,function*(){if(!this.hasPending)return;let e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return d1(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}};Xf.DEFAULT_FLUSH_DELAY=100;var z1=class{constructor(){this.onDidChangeItemsExternal=Z.None,this.items=new Map}updateItems(e){var t,n;return d1(this,void 0,void 0,function*(){(t=e.insert)===null||t===void 0||t.forEach((o,r)=>this.items.set(r,o)),(n=e.delete)===null||n===void 0||n.forEach(o=>this.items.delete(o))})}},My="__$__targetStorageMarker",Ea=ze("storageService"),Vk;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(Vk||(Vk={}));var oJ=class extends J{constructor(i={flushInterval:oJ.DEFAULT_FLUSH_INTERVAL}){super(),this.options=i,this._onDidChangeValue=this._register(new Bh),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new Bh),this._onWillSaveState=this._register(new Q),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}emitDidChangeValue(i,e){if(e===My){switch(i){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:i})}else this._onDidChangeValue.fire({scope:i,key:e,target:this.getKeyTargets(i)[e]})}get(i,e,t){var n;return(n=this.getStorage(e))===null||n===void 0?void 0:n.get(i,t)}getBoolean(i,e,t){var n;return(n=this.getStorage(e))===null||n===void 0?void 0:n.getBoolean(i,t)}getNumber(i,e,t){var n;return(n=this.getStorage(e))===null||n===void 0?void 0:n.getNumber(i,t)}store(i,e,t,n){if(Uo(e)){this.remove(i,t);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(i,t,n),(o=this.getStorage(t))===null||o===void 0||o.set(i,e)})}remove(i,e){this.withPausedEmitters(()=>{var t;this.updateKeyTarget(i,e,void 0),(t=this.getStorage(e))===null||t===void 0||t.delete(i)})}withPausedEmitters(i){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{i()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(i,e,t){var n,o;let r=this.getKeyTargets(e);typeof t=="number"?r[i]!==t&&(r[i]=t,(n=this.getStorage(e))===null||n===void 0||n.set(My,JSON.stringify(r))):typeof r[i]=="number"&&(delete r[i],(o=this.getStorage(e))===null||o===void 0||o.set(My,JSON.stringify(r)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(i){switch(i){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(i){let e=this.get(My,i);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}};oJ.DEFAULT_FLUSH_INTERVAL=60*1e3;var c8=class extends oJ{constructor(){super(),this.applicationStorage=this._register(new Xf(new z1)),this.profileStorage=this._register(new Xf(new z1)),this.workspaceStorage=this._register(new Xf(new z1)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}},a1e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},l1e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},vse=ze("ICodeLensCache"),Uk=class{constructor(e,t){this.lineCount=e,this.data=t}},d8=class{constructor(i){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new tc(20,.75);let e="codelens/cache";R_(()=>i.remove(e,1));let t="codelens/cache2",n=i.get(t,1,"{}");this._deserialize(n),Ql(i.onWillSaveState)(o=>{o.reason===Vk.SHUTDOWN&&i.store(t,this._serialize(),1,1)})}put(i,e){let t=e.lenses.map(r=>{var s;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(s=r.symbol.command)===null||s===void 0?void 0:s.title}}}),n=new Lb;n.add({lenses:t,dispose:()=>{}},this._fakeProvider);let o=new Uk(i.getLineCount(),n);this._cache.set(i.uri.toString(),o)}get(i){let e=this._cache.get(i.uri.toString());return e&&e.lineCount===i.getLineCount()?e.data:void 0}delete(i){this._cache.delete(i.uri.toString())}_serialize(){let i=Object.create(null);for(let[e,t]of this._cache){let n=new Set;for(let o of t.data.lenses)n.add(o.symbol.range.startLineNumber);i[e]={lineCount:t.lineCount,lines:[...n.values()]}}return JSON.stringify(i)}_deserialize(i){try{let e=JSON.parse(i);for(let t in e){let n=e[t],o=[];for(let s of n.lines)o.push({range:new E(s,1,s,11)});let r=new Lb;r.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(t,new Uk(n.lineCount,r))}}catch{}}};d8=a1e([l1e(0,Ea)],d8);Ke(vse,d8);var c1e=new RegExp(`(\\\\)?\\$\\((${ir.iconNameExpression}(?:${ir.iconModifierExpression})?)\\)`,"g");function Rg(i){let e=new Array,t,n=0,o=0;for(;(t=c1e.exec(i))!==null;){o=t.index||0,e.push(i.substring(n,o)),n=(t.index||0)+t[0].length;let[,r,s]=t;e.push(r?`$(${s})`:d1e({id:s}))}return n<i.length&&e.push(i.substring(n)),e}function d1e(i){let e=ge("span");return e.classList.add(...ir.asClassNameArray(i)),e}var h8=class{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}},Qk=class i{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${i._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let n=[],o=!1;for(let r=0;r<e.length;r++){let s=e[r];if(s&&(o=!0,s.command)){let a=Rg(s.command.title.trim());s.command.id?(n.push(ge("a",{id:String(r),title:s.command.tooltip,role:"button"},...a)),this._commands.set(String(r),s.command)):n.push(ge("span",{title:s.command.tooltip},...a)),r+1<e.length&&n.push(ge("span",void 0,"\xA0|\xA0"))}}o?(Hh(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Hh(this._domNode,ge("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){let t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};Qk._idPool=0;var V1=class{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,o=t.length;n<o;n++)this._addDecorationsCallbacks[n](t[n])}},jk=class{constructor(e,t,n,o,r,s,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let l,c=[];this._data.forEach((d,h)=>{d.symbol.command&&c.push(d.symbol),o.addDecoration({range:d.symbol.range,options:rt.EMPTY},u=>this._decorationIds[h]=u),l?l=E.plusRange(l,d.symbol.range):l=E.lift(d.symbol.range)}),this._viewZone=new h8(l.startLineNumber-1,s,a),this._viewZoneId=r.addZone(this._viewZone),c.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(c,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new Qk(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{let n=this._editor.getModel().getDecorationRange(e),o=this._data[t].symbol;return!!(n&&E.isEmpty(o.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,o)=>{t.addDecoration({range:n.symbol.range,options:rt.EMPTY},r=>this._decorationIds[o]=r)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){let n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){let n=e[t];if(n){let{symbol:o}=this._data[t];o.command=n.command||o.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){let e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){let t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}},h1e={ctrlCmd:!1,alt:!1},Ib;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(Ib||(Ib={}));var Ba;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(Ba||(Ba={}));var dl=ze("quickInputService"),mee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},jr=ze("openerService"),u1e=Object.freeze({_serviceBrand:void 0,registerOpener(){return J.None},registerValidator(){return J.None},registerExternalUriResolver(){return J.None},setDefaultExternalOpener(){},registerExternalOpener(){return J.None},open(){return mee(this,void 0,void 0,function*(){return!1})},resolveExternalUri(i){return mee(this,void 0,void 0,function*(){return{resolved:i,dispose(){}}})}});function Tb(i,e){return $.isUri(i)?dg(i.scheme,e):oY(i,e+":")}function fee(i,...e){return e.some(t=>Tb(i,t))}function Ase(i){let e,t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(i.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},i=i.with({fragment:""})),{selection:e,uri:i}}var g1e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},p1e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Us=ze("ILanguageFeatureDebounceService"),Kk;(function(i){let e=new WeakMap,t=0;function n(o){let r=e.get(o);return r===void 0&&(r=++t,e.set(o,r)),r}i.of=n})(Kk||(Kk={}));var u8=class{constructor(e,t,n,o,r,s){this._logService=e,this._name=t,this._registry=n,this._default=o,this._min=r,this._max=s,this._cache=new tc(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>ZM(Kk.of(n),t),0)}get(e){let t=this._key(e),n=this._cache.get(t);return n?pr(n.value,this._min,this._max):this.default()}update(e,t){let n=this._key(e),o=this._cache.get(n);o||(o=new Q3(6),this._cache.set(n,o));let r=pr(o.update(t),this._min,this._max);return Tb(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r}_overall(){let e=new Nk;for(let[,t]of this._cache)e.update(t.value);return e.value}default(){let e=this._overall()|0||this._default;return pr(e,this._min,this._max)}},g8=class{constructor(i){this._logService=i,this._data=new Map}for(i,e,t){var n,o,r;let s=(n=t?.min)!==null&&n!==void 0?n:50,a=(o=t?.max)!==null&&o!==void 0?o:Math.pow(s,2),l=(r=t?.key)!==null&&r!==void 0?r:void 0,c=`${Kk.of(i)},${s}${l?","+l:""}`,d=this._data.get(c);return d||(d=new u8(this._logService,e,i,this._overallAverage()|0||s*1.5,s,a),this._data.set(c,d)),d}_overallAverage(){let i=new Nk;for(let e of this._data.values())i.update(e.default());return i.value}};g8=g1e([p1e(0,no)],g8);Ke(Us,g8,!0);var m1e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Sv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},f1e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},n0=class{constructor(i,e,t,n,o,r){this._editor=i,this._languageFeaturesService=e,this._commandService=n,this._notificationService=o,this._codeLensCache=r,this._disposables=new ne,this._localToDispose=new ne,this._lenses=[],this._oldCodeLensModels=new ne,this._provideCodeLensDebounce=t.for(e.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=t.for(e.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new jt(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(46)||s.hasChanged(16)||s.hasChanged(15))&&this._updateLensStyle(),s.hasChanged(14)&&this._onModelChange()})),this._disposables.add(e.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+$C(this._editor.getId()).toString(16),this._styleElement=ls(yA(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var i;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(i=this._currentCodeLensModel)===null||i===void 0||i.dispose(),this._styleElement.remove()}_getLayoutInfo(){let i=Math.max(1.3,this._editor.getOption(61)/this._editor.getOption(48)),e=this._editor.getOption(16);return(!e||e<5)&&(e=this._editor.getOption(48)*.9|0),{fontSize:e,codeLensHeight:e*i|0}}_updateLensStyle(){let{codeLensHeight:i,fontSize:e}=this._getLayoutInfo(),t=this._editor.getOption(15),n=this._editor.getOption(46),o=`--codelens-font-family${this._styleClassName}`,r=`--codelens-font-features${this._styleClassName}`,s=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${i}px; font-size: ${e}px; padding-right: ${Math.round(e*.5)}px; font-feature-settings: var(${r}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${i}px; font-size: ${e}px; }
		`;t&&(s+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${o}), ${Or.fontFamily}}`),this._styleElement.textContent=s,this._editor.getContainerDomNode().style.setProperty(o,t??"inherit"),this._editor.getContainerDomNode().style.setProperty(r,n.fontFeatureSettings),this._editor.changeViewZones(a=>{for(let l of this._lenses)l.updateHeight(i,a)})}_localDispose(){var i,e,t;(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=void 0,(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(t=this._currentCodeLensModel)===null||t===void 0||t.dispose()}_onModelChange(){this._localDispose();let i=this._editor.getModel();if(!i||!this._editor.getOption(14))return;let e=this._codeLensCache.get(i);if(e&&this._renderCodeLensSymbols(e),!this._languageFeaturesService.codeLensProvider.has(i)){e&&this._localToDispose.add(qh(()=>{let n=this._codeLensCache.get(i);e===n&&(this._codeLensCache.delete(i),this._onModelChange())},30*1e3));return}for(let n of this._languageFeaturesService.codeLensProvider.all(i))if(typeof n.onDidChange=="function"){let o=n.onDidChange(()=>t.schedule());this._localToDispose.add(o)}let t=new jt(()=>{var n;let o=Date.now();(n=this._getCodeLensModelPromise)===null||n===void 0||n.cancel(),this._getCodeLensModelPromise=Gn(r=>_se(this._languageFeaturesService.codeLensProvider,i,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(i,r);let s=this._provideCodeLensDebounce.update(i,Date.now()-o);t.delay=s,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},Ye)},this._provideCodeLensDebounce.get(i));this._localToDispose.add(t),this._localToDispose.add(ct(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(n=>{this._editor.changeViewZones(o=>{let r=[],s=-1;this._lenses.forEach(l=>{!l.isValid()||s===l.getLineNumber()?r.push(l):(l.update(o),s=l.getLineNumber())});let a=new V1;r.forEach(l=>{l.dispose(a,o),this._lenses.splice(this._lenses.indexOf(l),1)}),a.commit(n)})}),t.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{t.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(n=>{n.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(ct(()=>{if(this._editor.getModel()){let n=Zh.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(o,r)})}),n.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(n=>{if(n.target.type!==9)return;let o=n.target.element;if(o?.tagName==="SPAN"&&(o=o.parentElement),o?.tagName==="A")for(let r of this._lenses){let s=r.getCommand(o);if(s){this._commandService.executeCommand(s.id,...s.arguments||[]).catch(a=>this._notificationService.error(a));break}}})),t.schedule()}_disposeAllLenses(i,e){let t=new V1;for(let n of this._lenses)n.dispose(t,e);i&&t.commit(i),this._lenses.length=0}_renderCodeLensSymbols(i){if(!this._editor.hasModel())return;let e=this._editor.getModel().getLineCount(),t=[],n;for(let s of i.lenses){let a=s.symbol.range.startLineNumber;a<1||a>e||(n&&n[n.length-1].symbol.range.startLineNumber===a?n.push(s):(n=[s],t.push(n)))}let o=Zh.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(s=>{this._editor.changeViewZones(a=>{let l=new V1,c=0,d=0;for(;d<t.length&&c<this._lenses.length;){let h=t[d][0].symbol.range.startLineNumber,u=this._lenses[c].getLineNumber();u<h?(this._lenses[c].dispose(l,a),this._lenses.splice(c,1)):u===h?(this._lenses[c].updateCodeLensSymbols(t[d],l),d++,c++):(this._lenses.splice(c,0,new jk(t[d],this._editor,this._styleClassName,l,a,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),c++,d++)}for(;c<this._lenses.length;)this._lenses[c].dispose(l,a),this._lenses.splice(c,1);for(;d<t.length;)this._lenses.push(new jk(t[d],this._editor,this._styleClassName,l,a,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++;l.commit(s)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var i;(i=this._resolveCodeLensesPromise)===null||i===void 0||i.cancel(),this._resolveCodeLensesPromise=void 0;let e=this._editor.getModel();if(!e)return;let t=[],n=[];if(this._lenses.forEach(s=>{let a=s.computeIfNecessary(e);a&&(t.push(a),n.push(s))}),t.length===0)return;let o=Date.now(),r=Gn(s=>{let a=t.map((l,c)=>{let d=new Array(l.length),h=l.map((u,g)=>!u.symbol.command&&typeof u.provider.resolveCodeLens=="function"?Promise.resolve(u.provider.resolveCodeLens(e,u.symbol,s)).then(p=>{d[g]=p},Fn):(d[g]=u.symbol,Promise.resolve(void 0)));return Promise.all(h).then(()=>{!s.isCancellationRequested&&!n[c].isDisposed()&&n[c].updateCommands(d)})});return Promise.all(a)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{let s=this._resolveCodeLensesDebounce.update(e,Date.now()-o);this._resolveCodeLensesScheduler.delay=s,this._currentCodeLensModel&&this._codeLensCache.put(e,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},s=>{Ye(s),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}};n0.ID="css.editor.codeLens";n0=m1e([Sv(1,Te),Sv(2,Us),Sv(3,ji),Sv(4,nn),Sv(5,vse)],n0);Wt(n0.ID,n0);fe(class extends Ie{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:B.hasCodeLensProvider,label:m("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(i,e){return f1e(this,void 0,void 0,function*(){if(!e.hasModel())return;let t=i.get(dl),n=i.get(ji),o=i.get(nn),r=e.getSelection().positionLineNumber,s=e.getContribution(n0.ID);if(!s)return;let a=s.getModel();if(!a)return;let l=[];for(let d of a.lenses)d.symbol.command&&d.symbol.range.startLineNumber===r&&l.push({label:d.symbol.command.title,command:d.symbol.command});if(l.length===0)return;let c=yield t.pick(l,{canPickMany:!1});if(c){if(a.isDisposed)return yield n.executeCommand(this.id);try{yield n.executeCommand(c.command.id,...c.command.arguments||[])}catch(d){o.error(d)}}})}});function _1e(i,e,t){let n=[],o=i.ordered(e).reverse().map(r=>Promise.resolve(r.provideDocumentColors(e,t)).then(s=>{if(Array.isArray(s))for(let a of s)n.push({colorInfo:a,provider:r})}));return Promise.all(o).then(()=>n)}function _ee(i,e,t,n){return Promise.resolve(t.provideColorPresentations(i,e,n))}ft.registerCommand("_executeDocumentColorProvider",function(i,...e){let[t]=e;if(!(t instanceof $))throw Nt();let{colorProvider:n}=i.get(Te),o=i.get(li).getModel(t);if(!o)throw Nt();let r=[],s=n.ordered(o).reverse().map(a=>Promise.resolve(a.provideDocumentColors(o,et.None)).then(l=>{if(Array.isArray(l))for(let c of l)r.push({range:c.range,color:[c.color.red,c.color.green,c.color.blue,c.color.alpha]})}));return Promise.all(s).then(()=>r)});ft.registerCommand("_executeColorPresentationProvider",function(i,...e){let[t,n]=e,{uri:o,range:r}=n;if(!(o instanceof $)||!Array.isArray(t)||t.length!==4||!E.isIRange(r))throw Nt();let[s,a,l,c]=t,{colorProvider:d}=i.get(Te),h=i.get(li).getModel(o);if(!h)throw Nt();let u={range:r,color:{red:s,green:a,blue:l,alpha:c}},g=[],p=d.ordered(h).reverse().map(f=>Promise.resolve(f.provideColorPresentations(h,u,et.None)).then(v=>{Array.isArray(v)&&g.push(...v)}));return Promise.all(p).then(()=>g)});var v1e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},pR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},A1e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},bse=Object.create({}),b1e=500,fp=class wse extends J{constructor(e,t,n,o){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new ne),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new KA(this._editor),this._colorDecorationClassRefs=this._register(new ne),this._debounceInformation=o.for(n.colorProvider,"Document Colors",{min:wse.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(n.colorProvider.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let r=this._isEnabled;this._isEnabled=this.isEnabled(),r!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){let e=this._editor.getModel();if(!e)return!1;let t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){let o=n.colorDecorators;if(o&&o.enable!==void 0&&!o.enable)return o.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;let e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Sr,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}beginCompute(){this._computePromise=Gn(e=>A1e(this,void 0,void 0,function*(){let t=this._editor.getModel();if(!t)return Promise.resolve([]);let n=new sr(!1),o=yield _1e(this._languageFeaturesService.colorProvider,t,e);return this._debounceInformation.update(t,n.elapsed()),o})),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},Ye)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){let t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:rt.EMPTY}));this._editor.changeDecorations(n=>{this._decorationsIds=n.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((o,r)=>this._colorDatas.set(o,e[r]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[];for(let n=0;n<e.length&&t.length<b1e;n++){let{red:o,green:r,blue:s,alpha:a}=e[n].colorInfo.color,l=new Ct(Math.round(o*255),Math.round(r*255),Math.round(s*255),a),c=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`,d=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:c}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:Yue,inlineClassName:`${d.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:bse}}})}this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){let t=this._editor.getModel();if(!t)return null;let n=t.getDecorationsInRange(E.fromPositions(e,e)).filter(o=>this._colorDatas.has(o.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};fp.ID="editor.contrib.colorDetector";fp.RECOMPUTE_TIME=1e3;fp=v1e([pR(1,Ot),pR(2,Te),pR(3,Us)],fp);Wt(fp.ID,fp);var p8=class{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new Q,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Q,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Q,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}},qa=ge,m8=class extends J{constructor(e,t,n){super(),this.model=t,this.domNode=qa(".colorpicker-header"),ae(e,this.domNode),this.pickedColorNode=ae(this.domNode,qa(".picked-color"));let o=m("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",o);let r=ae(this.domNode,qa(".original-color"));r.style.backgroundColor=j.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(np)||j.white,this._register(xi((s,a)=>{this.backgroundColor=s.getColor(np)||j.white})),this._register(le(this.pickedColorNode,Ee.CLICK,()=>this.model.selectNextColorPresentation())),this._register(le(r,Ee.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=j.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=j.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(qa(".codicon.codicon-color-mode"))}},f8=class extends J{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=qa(".colorpicker-body"),ae(e,this.domNode),this.saturationBox=new _8(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new v8(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new A8(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){let n=this.model.color.hsva;this.model.color=new j(new Gc(n.h,e,t,n.a))}onDidOpacityChange(e){let t=this.model.color.hsva;this.model.color=new j(new Gc(t.h,t.s,t.v,e))}onDidHueChange(e){let t=this.model.color.hsva,n=(1-e)*360;this.model.color=new j(new Gc(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}},_8=class extends J{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new Q,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Q,this.onColorFlushed=this._onColorFlushed.event,this.domNode=qa(".saturation-wrap"),ae(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",ae(this.domNode,this.canvas),this.selection=qa(".saturation-selection"),ae(this.domNode,this.selection),this.layout(),this._register(le(this.domNode,Ee.POINTER_DOWN,o=>this.onPointerDown(o))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new Gh);let t=Eo(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>this.onDidChangePosition(o.pageX-t.left,o.pageY-t.top),()=>null);let n=le(document,Ee.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){let n=Math.max(0,Math.min(1,e/this.width)),o=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,o),this._onDidChange.fire({s:n,v:o})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();let e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){let e=this.model.color.hsva,t=new j(new Gc(e.h,1,1,1)),n=this.canvas.getContext("2d"),o=n.createLinearGradient(0,0,this.canvas.width,0);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),o.addColorStop(1,"rgba(255, 255, 255, 0)");let r=n.createLinearGradient(0,0,0,this.canvas.height);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=j.Format.CSS.format(t),n.fill(),n.fillStyle=o,n.fill(),n.fillStyle=r,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}},qk=class extends J{constructor(e,t){super(),this.model=t,this._onDidChange=new Q,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Q,this.onColorFlushed=this._onColorFlushed.event,this.domNode=ae(e,qa(".strip")),this.overlay=ae(this.domNode,qa(".overlay")),this.slider=ae(this.domNode,qa(".slider")),this.slider.style.top="0px",this._register(le(this.domNode,Ee.POINTER_DOWN,n=>this.onPointerDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;let e=this.getValue(this.model.color);this.updateSliderPosition(e)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._register(new Gh),n=Eo(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,r=>this.onDidChangeTop(r.pageY-n.top),()=>null);let o=le(document,Ee.POINTER_UP,()=>{this._onColorFlushed.fire(),o.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){let t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}},v8=class extends qk{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){let{r:t,g:n,b:o}=e.rgba,r=new j(new Ct(t,n,o,1)),s=new j(new Ct(t,n,o,0));this.overlay.style.background=`linear-gradient(to bottom, ${r} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}},A8=class extends qk{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}},b8=class extends hs{constructor(e,t,n,o){super(),this.model=t,this.pixelRatio=n,this._register(A_.onDidChange(()=>this.layout()));let r=qa(".colorpicker-widget");e.appendChild(r);let s=new m8(r,this.model,o);this.body=new f8(r,this.model,this.pixelRatio),this._register(s),this._register(this.body)}layout(){this.body.layout()}},w1e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},C1e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},vee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},w8=class{constructor(e,t,n,o){this.owner=e,this.range=t,this.model=n,this.provider=o,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},C8=class{constructor(i,e){this._editor=i,this._themeService=e,this.hoverOrdinal=1}computeSync(i,e){return[]}computeAsync(i,e,t){return wr.fromPromise(this._computeAsync(i,e,t))}_computeAsync(i,e,t){return vee(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];let n=fp.get(this._editor);if(!n)return[];for(let o of e){if(!n.isColorDecoration(o))continue;let r=n.getColorData(o.range.getStartPosition());if(r)return[yield this._createColorHover(this._editor.getModel(),r.colorInfo,r.provider)]}return[]})}_createColorHover(i,e,t){return vee(this,void 0,void 0,function*(){let n=i.getValueInRange(e.range),{red:o,green:r,blue:s,alpha:a}=e.color,l=new Ct(Math.round(o*255),Math.round(r*255),Math.round(s*255),a),c=new j(l),d=yield _ee(i,e,t,et.None),h=new p8(c,[],0);return h.colorPresentations=d||[],h.guessColorPresentation(c,n),new w8(this,E.lift(e.range),h,t)})}renderHoverParts(i,e){if(e.length===0||!this._editor.hasModel())return J.None;let t=new ne,n=e[0],o=this._editor.getModel(),r=n.model,s=t.add(new b8(i.fragment,r,this._editor.getOption(131),this._themeService));i.setColorPicker(s);let a=new E(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn),l=()=>{let d,h;if(r.presentation.textEdit){d=[r.presentation.textEdit],h=new E(r.presentation.textEdit.range.startLineNumber,r.presentation.textEdit.range.startColumn,r.presentation.textEdit.range.endLineNumber,r.presentation.textEdit.range.endColumn);let u=this._editor.getModel()._setTrackedRange(null,h,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d),h=this._editor.getModel()._getTrackedRange(u)||h}else d=[{range:a,text:r.presentation.label,forceMoveMarkers:!1}],h=a.setEndPosition(a.endLineNumber,a.startColumn+r.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d);r.presentation.additionalTextEdits&&(d=[...r.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",d),i.hide()),this._editor.pushUndoStop(),a=h},c=d=>_ee(o,{range:a,color:{red:d.rgba.r/255,green:d.rgba.g/255,blue:d.rgba.b/255,alpha:d.rgba.a}},n.provider,et.None).then(h=>{r.colorPresentations=h||[]});return t.add(r.onColorFlushed(d=>{c(d).then(l)})),t.add(r.onDidChangeColor(c)),t}};C8=w1e([C1e(1,mi)],C8);function y8(i,e){return!!i[e]}var U1=class{constructor(e,t){this.target=e.target,this.hasTriggerModifier=y8(e.event,t.triggerModifier),this.hasSideBySideModifier=y8(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}},$k=class{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=y8(e,t.triggerModifier)}},_f=class{constructor(e,t,n,o){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=o}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}};function Aee(i){return i==="altKey"?gt?new _f(57,"metaKey",6,"altKey"):new _f(5,"ctrlKey",6,"altKey"):gt?new _f(6,"altKey",57,"metaKey"):new _f(6,"altKey",5,"ctrlKey")}var Mb=class extends J{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new Q),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new Q),this.onExecute=this._onExecute.event,this._onCancel=this._register(new Q),this.onCancel=this._onCancel.event,this._editor=e,this._opts=Aee(this._editor.getOption(72)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(72)){let n=Aee(this._editor.getOption(72));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new U1(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new U1(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new U1(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new $k(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new $k(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){let t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}},y1e=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Dc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},_p=class extends G_{constructor(i,e,t,n,o,r,s,a,l,c,d,h){super(i,Object.assign(Object.assign({},t.getRawOptions()),{overflowWidgetsDomNode:t.getOverflowWidgetsDomNode()}),{},n,o,r,s,a,l,c,d,h),this._parentEditor=t,this._overwriteOptions=e,super.updateOptions(this._overwriteOptions),this._register(t.onDidChangeConfiguration(u=>this._onParentConfigurationChanged(u)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(i){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(i){Ur(this._overwriteOptions,i,!0),super.updateOptions(this._overwriteOptions)}};_p=y1e([Dc(3,tt),Dc(4,Ft),Dc(5,ji),Dc(6,Ze),Dc(7,mi),Dc(8,nn),Dc(9,Rd),Dc(10,Yi),Dc(11,Te)],_p);var iu=class{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},Cse=new iu("id#"),bee=new j(new Ct(0,122,204)),S1e={showArrow:!0,showFrame:!0,className:"",frameColor:bee,arrowColor:bee,keepEditorSelection:!1},D1e="vs.editor.contrib.zoneWidget",S8=class{constructor(e,t,n,o,r,s){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=o,this._onDomNodeTop=r,this._onComputedHeight=s}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}},D8=class{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}},Gk=class i{constructor(e){this._editor=e,this._ruleName=i._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),VX(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){VX(this._ruleName),mB(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:E.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};Gk._IdGenerator=new iu(".arrow-decoration-");var x8=class{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new ne,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=Co(t),Ur(this.options,S1e,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{let o=this._getWidth(n);this.domNode.style.width=o+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(o)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Gk(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;let n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){let e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){let n=E.isIRange(e)?E.lift(e):E.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:rt.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(61),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){let n=e.getStartPosition(),o=this.editor.getLayoutInfo(),r=this._getWidth(o);this.domNode.style.width=`${r}px`,this.domNode.style.left=this._getLeft(o)+"px";let s=document.createElement("div");s.style.overflow="hidden";let a=this.editor.getOption(61),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,d=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(n)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(g=>{this._viewZone&&g.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new S8(s,n.lineNumber,n.column,t,p=>this._onViewZoneTop(p),p=>this._onViewZoneHeight(p)),this._viewZone.id=g.addZone(this._viewZone),this._overlayWidget=new D8(D1e+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){let g=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=g+"px",this.container.style.borderBottomWidth=g+"px"}let h=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden"),this._doLayout(h,r),this.options.keepEditorSelection||this.editor.setSelection(e);let u=this.editor.getModel();if(u){let g=e.endLineNumber+1;g<=u.getLineCount()?this.revealLine(g,!1):this.revealLine(u.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Ka(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(61),o=n<0?Math.ceil(n):Math.floor(n),r=e.heightInLines+o;r>5&&r<35&&this._relayout(r)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){let e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}},k8=class extends Wh{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new Q),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ae(e,ge(".monaco-dropdown")),this._label=ae(this._element,ge(".dropdown-label"));let n=t.labelRenderer;n||(n=r=>(r.textContent=t.label||"",null));for(let r of[Ee.CLICK,Ee.MOUSE_DOWN,yi.Tap])this._register(le(this.element,r,s=>ii.stop(s,!0)));for(let r of[Ee.MOUSE_DOWN,yi.Tap])this._register(le(this._label,r,s=>{s instanceof MouseEvent&&(s.detail>1||s.button!==0)||(this.visible?this.hide():this.show())}));this._register(le(this._label,Ee.KEY_UP,r=>{let s=new ni(r);(s.equals(3)||s.equals(10))&&(ii.stop(r,!0),this.visible?this.hide():this.show())}));let o=n(this._label);o&&this._register(o),this._register(to.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}},E8=class extends k8{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}},Yk=class extends ta{constructor(e,t,n,o=Object.create(null)){super(null,e,o),this.actionItem=null,this._onDidChangeVisibility=this._register(new Q),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=o,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;let t=r=>{this.element=ae(r,ge("a.action-label"));let s=[];return typeof this.options.classNames=="string"?s=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(s=this.options.classNames),s.find(a=>a==="icon")||s.push("codicon"),this.element.classList.add(...s),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),o={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new E8(e,o)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var s;(s=this.element)===null||s===void 0||s.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let r=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return r.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:this.getAction().label&&(e=this.getAction().label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;let n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}},o0=class{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=n(a);if(l===null)return null;o[r]=E1e(a,l,this.modifierLabels[e])}return o.join(" ")}},rJ=new o0({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),x1e=new o0({ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:m({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),k1e=new o0({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});new o0({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function E1e(i,e,t){if(e===null)return"";let n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}var sJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},vs=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},yse=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function L1e(i,e,t,n,o,r,s){let a=i.getActions(e);return T1e(a,t,!1,typeof n=="string"?l=>l===n:n,o,r,s),I1e(a)}function I1e(i){let e=new ne;for(let[,t]of i)for(let n of t)e.add(n);return e}function T1e(i,e,t,n=a=>a==="navigation",o=Number.MAX_SAFE_INTEGER,r=()=>!1,s=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);let c=new Set;for(let[d,h]of i){let u;n(d)?(u=a,u.length>0&&s&&u.push(new Lo)):(u=l,u.length>0&&u.push(new Lo));for(let g of h){t&&(g=g instanceof Uh&&g.alt?g.alt:g);let p=u.push(g);g instanceof Xg&&c.add({group:d,action:g,index:p-1})}}for(let{group:d,action:h,index:u}of c){let g=n(d)?a:l,p=h.actions;(p.length<=1||g.length+p.length-2<=o)&&r(h,d,g.length)&&g.splice(u,1,...p)}if(a!==l&&a.length>o){let d=a.splice(o,a.length-o);l.unshift(...d,new Lo)}}var r0=class extends hp{constructor(i,e,t,n,o,r,s){super(void 0,i,{icon:!!(i.class||i.item.icon),label:!i.class&&!i.item.icon,draggable:e?.draggable,keybinding:e?.keybinding,hoverDelegate:e?.hoverDelegate}),this._keybindingService=t,this._notificationService=n,this._contextKeyService=o,this._themeService=r,this._contextMenuService=s,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new eo),this._altKey=DA.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(i){return yse(this,void 0,void 0,function*(){i.preventDefault(),i.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(e){this._notificationService.error(e)}})}render(i){super.render(i),i.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let e=!1,t=this._altKey.keyStatus.altKey||(Mn||go)&&this._altKey.keyStatus.shiftKey,n=()=>{var o;let r=e&&t&&!!(!((o=this._commandAction.alt)===null||o===void 0)&&o.enabled);r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(o=>{t=o.altKey||(Mn||go)&&o.shiftKey,n()})),this._register(le(i,"mouseleave",o=>{e=!1,n()})),this._register(le(i,"mouseenter",o=>{e=!0,n()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var i;let e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label,o=t?m("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&!((i=this._menuItemAction.alt)===null||i===void 0)&&i.enabled){let r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,s=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=s&&s.getLabel(),l=a?m("titleAndKb","{0} ({1})",r,a):r;o=m("titleAndKbAndAlt",`{0}
[{1}] {2}`,o,rJ.modifierLabels[is].altKey,l)}return o}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(i){var e;this._itemClassDispose.value=void 0;let{element:t,label:n}=this;if(!t||!n)return;let o=this._commandAction.checked&&!((e=i.toggled)===null||e===void 0)&&e.icon?i.toggled.icon:i.icon;if(o)if(zt.isThemeIcon(o)){let r=zt.asClassNameArray(o);n.classList.add(...r),this._itemClassDispose.value=ct(()=>{n.classList.remove(...r)})}else n.style.backgroundImage=NA(this._themeService.getColorTheme().type)?Jg(o.dark):Jg(o.light),n.classList.add("icon"),this._itemClassDispose.value=ss(ct(()=>{n.style.backgroundImage="",n.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};r0=sJ([vs(2,An),vs(3,nn),vs(4,Ze),vs(5,mi),vs(6,Fd)],r0);var L8=class extends Yk{constructor(i,e,t,n){var o,r;let s=Object.assign({},e??Object.create(null),{menuAsChild:(o=e?.menuAsChild)!==null&&o!==void 0?o:!1,classNames:(r=e?.classNames)!==null&&r!==void 0?r:zt.isThemeIcon(i.item.icon)?zt.asClassName(i.item.icon):void 0});super(i,{getActions:()=>i.actions},t,s),this._contextMenuService=t,this._themeService=n}render(i){super.render(i),ai(this.element),i.classList.add("menu-entry");let e=this._action,{icon:t}=e.item;if(t&&!zt.isThemeIcon(t)){this.element.classList.add("icon");let n=()=>{this.element&&(this.element.style.backgroundImage=NA(this._themeService.getColorTheme().type)?Jg(t.dark):Jg(t.light))};n(),this._register(this._themeService.onDidColorThemeChange(()=>{n()}))}}};L8=sJ([vs(2,Fd),vs(3,mi)],L8);var I8=class extends ta{constructor(i,e,t,n,o,r,s,a){var l,c,d;super(null,i),this._keybindingService=t,this._notificationService=n,this._contextMenuService=o,this._menuService=r,this._instaService=s,this._storageService=a,this._container=null,this._options=e,this._storageKey=`${i.item.submenu.id}_lastActionId`;let h,u=a.get(this._storageKey,1);u&&(h=i.actions.find(p=>u===p.id)),h||(h=i.actions[0]),this._defaultAction=this._instaService.createInstance(r0,h,{keybinding:this._getDefaultActionKeybindingLabel(h)});let g=Object.assign({},e??Object.create(null),{menuAsChild:(l=e?.menuAsChild)!==null&&l!==void 0?l:!0,classNames:(c=e?.classNames)!==null&&c!==void 0?c:["codicon","codicon-chevron-down"],actionRunner:(d=e?.actionRunner)!==null&&d!==void 0?d:new Wh});this._dropdown=new Yk(i,i.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun(p=>{p.action instanceof Uh&&this.update(p.action)})}update(i){this._storageService.store(this._storageKey,i.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(r0,i,{keybinding:this._getDefaultActionKeybindingLabel(i)}),this._defaultAction.actionRunner=new class extends Wh{runAction(e,t){return yse(this,void 0,void 0,function*(){yield e.run(void 0)})}},this._container&&this._defaultAction.render(Eue(this._container,ge(".action-container")))}_getDefaultActionKeybindingLabel(i){var e;let t;if(!((e=this._options)===null||e===void 0)&&e.renderKeybindingWithDefaultActionLabel){let n=this._keybindingService.lookupKeybinding(i.id);n&&(t=`(${n.getLabel()})`)}return t}setActionContext(i){super.setActionContext(i),this._defaultAction.setActionContext(i),this._dropdown.setActionContext(i)}render(i){this._container=i,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let e=ge(".action-container");this._defaultAction.render(ae(this._container,e)),this._register(le(e,Ee.KEY_DOWN,n=>{let o=new ni(n);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));let t=ge(".dropdown-action-container");this._dropdown.render(ae(this._container,t)),this._register(le(t,Ee.KEY_DOWN,n=>{var o;let r=new ni(n);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)===null||o===void 0||o.focus(),r.stopPropagation())}))}focus(i){i?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(i){i?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};I8=sJ([vs(2,An),vs(3,nn),vs(4,Fd),vs(5,em),vs(6,tt),vs(7,Ea)],I8);function M1e(i,e,t){return e instanceof Uh?i.createInstance(r0,e,t):e instanceof RA?e.item.rememberDefaultAction?i.createInstance(I8,e,t):i.createInstance(L8,e,t):void 0}var Sse=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Dse=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},xse=ze("IPeekViewService");Ke(xse,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){let t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());let n=()=>{let o=this._widgets.get(i);o&&o.widget===e&&(o.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(n)})}});var xr;(function(i){i.inPeekEditor=new Le("inReferenceSearchEditor",!0,m("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(xr||(xr={}));var Nb=class{constructor(i,e){i instanceof _p&&xr.inPeekEditor.bindTo(e)}dispose(){}};Nb.ID="editor.contrib.referenceController";Nb=Sse([Dse(1,Ze)],Nb);Wt(Nb.ID,Nb);function N1e(i){let e=i.get(Ft).getFocusedCodeEditor();return e instanceof _p?e.getParentEditor():e}var R1e={headerBackgroundColor:j.white,primaryHeadingColor:j.fromHex("#333333"),secondaryHeadingColor:j.fromHex("#6c6c6cb3")},Jk=class extends x8{constructor(i,e,t){super(i,e),this.instantiationService=t,this._onDidClose=new Q,this.onDidClose=this._onDidClose.event,Ur(this.options,R1e,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(i){let e=this.options;i.headerBackgroundColor&&(e.headerBackgroundColor=i.headerBackgroundColor),i.primaryHeadingColor&&(e.primaryHeadingColor=i.primaryHeadingColor),i.secondaryHeadingColor&&(e.secondaryHeadingColor=i.secondaryHeadingColor),super.style(i)}_applyStyles(){super._applyStyles();let i=this.options;this._headElement&&i.headerBackgroundColor&&(this._headElement.style.backgroundColor=i.headerBackgroundColor.toString()),this._primaryHeading&&i.primaryHeadingColor&&(this._primaryHeading.style.color=i.primaryHeadingColor.toString()),this._secondaryHeading&&i.secondaryHeadingColor&&(this._secondaryHeading.style.color=i.secondaryHeadingColor.toString()),this._bodyElement&&i.frameColor&&(this._bodyElement.style.borderColor=i.frameColor.toString())}_fillContainer(i){this.setCssClass("peekview-widget"),this._headElement=ge(".head"),this._bodyElement=ge(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),i.appendChild(this._headElement),i.appendChild(this._bodyElement)}_fillHead(i,e){let t=ge(".peekview-title");this.options.supportOnTitleClick&&(t.classList.add("clickable"),Tn(t,"click",r=>this._onTitleClick(r))),ae(this._headElement,t),this._fillTitleIcon(t),this._primaryHeading=ge("span.filename"),this._secondaryHeading=ge("span.dirname"),this._metaHeading=ge("span.meta"),ae(t,this._primaryHeading,this._secondaryHeading,this._metaHeading);let n=ge(".peekview-actions");ae(this._headElement,n);let o=this._getActionBarOptions();this._actionbarWidget=new wa(n,o),this._disposables.add(this._actionbarWidget),e||this._actionbarWidget.push(new ho("peekview.close",m("label.close","Close"),_.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(i){}_getActionBarOptions(){return{actionViewItemProvider:M1e.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(i){}setTitle(i,e){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=i,this._primaryHeading.setAttribute("title",i),e?this._secondaryHeading.innerText=e:Sn(this._secondaryHeading))}setMetaTitle(i){this._metaHeading&&(i?(this._metaHeading.innerText=i,_r(this._metaHeading)):Xo(this._metaHeading))}_doLayout(i,e){if(!this._isShowing&&i<0){this.dispose();return}let t=Math.ceil(this.editor.getOption(61)*1.2),n=Math.round(i-(t+2));this._doLayoutHead(t,e),this._doLayoutBody(n,e)}_doLayoutHead(i,e){this._headElement&&(this._headElement.style.height=`${i}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(i,e){this._bodyElement&&(this._bodyElement.style.height=`${i}px`)}};Jk=Sse([Dse(2,tt)],Jk);var F1e=P("peekViewTitle.background",{dark:Fe(Cr,.1),light:Fe(Cr,.1),hcDark:null,hcLight:null},m("peekViewTitleBackground","Background color of the peek view title area.")),kse=P("peekViewTitleLabel.foreground",{dark:j.white,light:j.black,hcDark:j.white,hcLight:os},m("peekViewTitleForeground","Color of the peek view title.")),Ese=P("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},m("peekViewTitleInfoForeground","Color of the peek view title info.")),B1e=P("peekView.border",{dark:Cr,light:Cr,hcDark:mt,hcLight:mt},m("peekViewBorder","Color of the peek view borders and arrow.")),P1e=P("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:j.black,hcLight:j.white},m("peekViewResultsBackground","Background color of the peek view result list."));P("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:j.white,hcLight:os},m("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));P("peekViewResult.fileForeground",{dark:j.white,light:"#1E1E1E",hcDark:j.white,hcLight:os},m("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));P("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},m("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));P("peekViewResult.selectionForeground",{dark:j.white,light:"#6C6C6C",hcDark:j.white,hcLight:os},m("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));var Ny=P("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:j.black,hcLight:j.white},m("peekViewEditorBackground","Background color of the peek view editor."));P("peekViewEditorGutter.background",{dark:Ny,light:Ny,hcDark:Ny,hcLight:Ny},m("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));P("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},m("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));P("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},m("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));P("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Pi,hcLight:Pi},m("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));function nc(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===zC.ICodeEditor:!1}function aJ(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===zC.IDiffEditor:!1}function Lse(i){return nc(i)?i:aJ(i)?i.getModifiedEditor():null}var T8=class{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:J.None}}renderElement(e,t,n,o){if(n.disposable&&n.disposable.dispose(),!n.data)return;let r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,o);let s=new po,a=r.resolve(e,s.token);n.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,o))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}},M8=class{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){let t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};function O1e(i,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new M8(i,e.accessibilityProvider)})}var N8=class{constructor(e,t,n,o,r={}){let s=()=>this.model,a=o.map(l=>new T8(l,s));this.list=new xa(e,t,n,a,O1e(s,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Z.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Z.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Z.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(o=>this._model.get(o)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,vo(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}},H1e={separatorBorder:j.transparent},Xk=class{constructor(e,t,n,o){this.container=e,this.view=t,this.disposable=o,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,o;e!==this.visible&&(e?(this.size=pr(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),(o=(n=this.view).setVisible)===null||o===void 0||o.call(n,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}},R8=class extends Xk{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}},F8=class extends Xk{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}},Bc;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(Bc||(Bc={}));var Zk;(function(i){i.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}i.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}i.Invisible=t})(Zk||(Zk={}));var eE=class extends J{constructor(e,t={}){var n,o,r,s,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Bc.Idle,this._onDidSashChange=this._register(new Q),this._onDidSashReset=this._register(new Q),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(o=t.inverseAltBehavior)!==null&&o!==void 0?o:!1,this.proportionalLayout=(r=t.proportionalLayout)!==null&&r!==void 0?r:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ae(this.el,ge(".sash-container")),this.viewContainer=ge(".split-view-container"),this.scrollable=new sp({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:el}),this.scrollableElement=this._register(new ab(this.viewContainer,{vertical:this.orientation===0?(s=t.scrollbarVisibility)!==null&&s!==void 0?s:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(l=>{this.viewContainer.scrollTop=l.scrollTop,this.viewContainer.scrollLeft=l.scrollLeft})),ae(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||H1e),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((l,c)=>{let d=jo(l.visible)||l.visible?l.size:{type:"invisible",cachedVisibleSize:l.size},h=l.view;this.doAddView(h,d,c,!0)}),this.contentSize=this.viewItems.reduce((l,c)=>l+c.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,o){this.doAddView(e,t,n,o)}layout(e,t){let n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let o=0;o<this.viewItems.length;o++){let r=this.viewItems[o];r.size=pr(Math.round(this.proportions[o]*e),r.minimumSize,r.maximumSize)}else{let o=vo(this.viewItems.length),r=o.filter(a=>this.viewItems[a].priority===1),s=o.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,r,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(let a of this.viewItems)a.enabled=!1;let o=this.sashItems.findIndex(a=>a.sash===e),r=ss(le(document.body,"keydown",a=>s(this.sashDragState.current,a.altKey)),le(document.body,"keyup",()=>s(this.sashDragState.current,!1))),s=(a,l)=>{let c=this.viewItems.map(p=>p.size),d=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(o===this.sashItems.length-1){let p=this.viewItems[o];d=(p.minimumSize-p.size)/2,h=(p.maximumSize-p.size)/2}else{let p=this.viewItems[o+1];d=(p.size-p.maximumSize)/2,h=(p.size-p.minimumSize)/2}let u,g;if(!l){let p=vo(o,-1),f=vo(o+1,this.viewItems.length),v=p.reduce((y,M)=>y+(this.viewItems[M].minimumSize-c[M]),0),b=p.reduce((y,M)=>y+(this.viewItems[M].viewMaximumSize-c[M]),0),A=f.length===0?Number.POSITIVE_INFINITY:f.reduce((y,M)=>y+(c[M]-this.viewItems[M].minimumSize),0),w=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((y,M)=>y+(c[M]-this.viewItems[M].viewMaximumSize),0),C=Math.max(v,w),k=Math.min(A,b),L=this.findFirstSnapIndex(p),S=this.findFirstSnapIndex(f);if(typeof L=="number"){let y=this.viewItems[L],M=Math.floor(y.viewMinimumSize/2);u={index:L,limitDelta:y.visible?C-M:C+M,size:y.size}}if(typeof S=="number"){let y=this.viewItems[S],M=Math.floor(y.viewMinimumSize/2);g={index:S,limitDelta:y.visible?k+M:k-M,size:y.size}}}this.sashDragState={start:a,current:a,index:o,sizes:c,minDelta:d,maxDelta:h,alt:l,snapBefore:u,snapAfter:g,disposable:r}};s(t,n)}onSashChange({current:e}){let{index:t,start:n,sizes:o,alt:r,minDelta:s,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;let d=e-n,h=this.resize(t,d,o,void 0,void 0,s,a,l,c);if(r){let u=t===this.sashItems.length-1,g=this.viewItems.map(w=>w.size),p=u?t:t+1,f=this.viewItems[p],v=f.size-f.maximumSize,b=f.size-f.minimumSize,A=u?t-1:t+1;this.resize(A,-h,g,void 0,void 0,v,b)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(let t of this.viewItems)t.enabled=!0}onViewChange(e,t){let n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=pr(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==Bc.Idle)throw new Error("Cant modify splitview");if(this.state=Bc.Busy,e<0||e>=this.viewItems.length)return;let n=vo(this.viewItems.length).filter(a=>a!==e),o=[...n.filter(a=>this.viewItems[a].priority===1),e],r=n.filter(a=>this.viewItems[a].priority===2),s=this.viewItems[e];t=Math.round(t),t=pr(t,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(o,r),this.state=Bc.Idle}distributeViewSizes(){let e=[],t=0;for(let a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);let n=Math.floor(t/e.length);for(let a of e)a.size=pr(n,a.minimumSize,a.maximumSize);let o=vo(this.viewItems.length),r=o.filter(a=>this.viewItems[a].priority===1),s=o.filter(a=>this.viewItems[a].priority===2);this.relayout(r,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,o){if(this.state!==Bc.Idle)throw new Error("Cant modify splitview");this.state=Bc.Busy;let r=ge(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(n));let s=e.onDidChange(u=>this.onViewChange(d,u)),a=ct(()=>this.viewContainer.removeChild(r)),l=ss(s,a),c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;let d=this.orientation===0?new R8(r,e,c,l):new F8(r,e,c,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){let u={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},g=this.orientation===0?new Ka(this.sashContainer,{getHorizontalSashTop:k=>this.getSashPosition(k),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},u),{orientation:1})):new Ka(this.sashContainer,{getVerticalSashLeft:k=>this.getSashPosition(k),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},u),{orientation:0})),p=this.orientation===0?k=>({sash:g,start:k.startY,current:k.currentY,alt:k.altKey}):k=>({sash:g,start:k.startX,current:k.currentX,alt:k.altKey}),f=Z.map(g.onDidStart,p)(this.onSashStart,this),v=Z.map(g.onDidChange,p)(this.onSashChange,this),b=Z.map(g.onDidEnd,()=>this.sashItems.findIndex(k=>k.sash===g))(this.onSashEnd,this),A=g.onDidReset(()=>{let k=this.sashItems.findIndex(O=>O.sash===g),L=vo(k,-1),S=vo(k+1,this.viewItems.length),y=this.findFirstSnapIndex(L),M=this.findFirstSnapIndex(S);typeof y=="number"&&!this.viewItems[y].visible||typeof M=="number"&&!this.viewItems[M].visible||this._onDidSashReset.fire(k)}),w=ss(f,v,b,A,g),C={sash:g,disposable:w};this.sashItems.splice(n-1,0,C)}r.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),o||this.relayout([n],h),this.state=Bc.Idle,!o&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){let n=this.viewItems.reduce((o,r)=>o+r.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),o,r,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;let d=vo(e,-1),h=vo(e+1,this.viewItems.length);if(r)for(let S of r)M2(d,S),M2(h,S);if(o)for(let S of o)dy(d,S),dy(h,S);let u=d.map(S=>this.viewItems[S]),g=d.map(S=>n[S]),p=h.map(S=>this.viewItems[S]),f=h.map(S=>n[S]),v=d.reduce((S,y)=>S+(this.viewItems[y].minimumSize-n[y]),0),b=d.reduce((S,y)=>S+(this.viewItems[y].maximumSize-n[y]),0),A=h.length===0?Number.POSITIVE_INFINITY:h.reduce((S,y)=>S+(n[y]-this.viewItems[y].minimumSize),0),w=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((S,y)=>S+(n[y]-this.viewItems[y].maximumSize),0),C=Math.max(v,w,s),k=Math.min(A,b,a),L=!1;if(l){let S=this.viewItems[l.index],y=t>=l.limitDelta;L=y!==S.visible,S.setVisible(y,l.size)}if(!L&&c){let S=this.viewItems[c.index],y=t<c.limitDelta;L=y!==S.visible,S.setVisible(y,c.size)}if(L)return this.resize(e,t,n,o,r,s,a);t=pr(t,C,k);for(let S=0,y=t;S<u.length;S++){let M=u[S],O=pr(g[S]+y,M.minimumSize,M.maximumSize),H=O-g[S];y-=H,M.size=O}for(let S=0,y=t;S<p.length;S++){let M=p[S],O=pr(f[S]-y,M.minimumSize,M.maximumSize),H=O-f[S];y+=H,M.size=O}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((a,l)=>a+l.size,0),n=this.size-t,o=vo(this.viewItems.length-1,-1),r=o.filter(a=>this.viewItems[a].priority===1),s=o.filter(a=>this.viewItems[a].priority===2);for(let a of s)M2(o,a);for(let a of r)dy(o,a);typeof e=="number"&&dy(o,e);for(let a=0;n!==0&&a<o.length;a++){let l=this.viewItems[o[a]],c=pr(l.size+n,l.minimumSize,l.maximumSize),d=c-l.size;n-=d,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;let n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),o=[...this.viewItems].reverse();e=!1;let r=o.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;let s=o.map(l=>e=l.maximumSize-l.size>0||e).reverse(),a=0;for(let l=0;l<this.sashItems.length;l++){let{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;let h=!(t[l]&&s[l+1]),u=!(n[l]&&r[l+1]);if(h&&u){let g=vo(l,-1),p=vo(l+1,this.viewItems.length),f=this.findFirstSnapIndex(g),v=this.findFirstSnapIndex(p),b=typeof f=="number"&&!this.viewItems[f].visible,A=typeof v=="number"&&!this.viewItems[v].visible;b&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:A&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else h&&!u?c.state=1:!h&&u?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let n=this.viewItems[t];if(n.visible&&n.snap)return t}for(let t of e){let n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),st(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}},Rb=class i{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=i.TemplateId,this.renderedTemplates=new Set;let o=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(let r of e){let s=o.get(r.templateId);if(!s)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(s)}}renderTemplate(e){let t=ae(e,ge(".monaco-table-tr")),n=[],o=[];for(let s=0;s<this.columns.length;s++){let a=this.renderers[s],l=ae(t,ge(".monaco-table-td",{"data-col-index":s}));l.style.width=`${this.getColumnSize(s)}px`,n.push(l),o.push(a.renderTemplate(l))}let r={container:e,cellContainers:n,cellTemplateData:o};return this.renderedTemplates.add(r),r}renderElement(e,t,n,o){for(let r=0;r<this.columns.length;r++){let s=this.columns[r].project(e);this.renderers[r].renderElement(s,t,n.cellTemplateData[r],o)}}disposeElement(e,t,n,o){for(let r=0;r<this.columns.length;r++){let s=this.renderers[r];if(s.disposeElement){let a=this.columns[r].project(e);s.disposeElement(a,t,n.cellTemplateData[r],o)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Sn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(let{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};Rb.TemplateId="row";function W1e(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return Rb.TemplateId}}}var B8=class{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new Q,this.onDidLayout=this._onDidLayout.event,this.element=ge(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Z.None}layout(e){this._onDidLayout.fire([this.index,e])}},tE=class i{constructor(e,t,n,o,r,s){this.virtualDelegate=n,this.domId=`table_id_${++i.InstanceCount}`,this.disposables=new ne,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ae(t,ge(`.monaco-table.${this.domId}`));let a=o.map((d,h)=>new B8(d,h)),l={size:a.reduce((d,h)=>d+h.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new eE(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;let c=new Rb(o,r,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new xa(e,this.domNode,W1e(n),[c],s)),Z.any(...a.map(d=>d.onDidLayout))(([d,h])=>c.layoutColumn(d,h),null,this.disposables),this.splitview.onDidSashReset(d=>{let h=o.reduce((g,p)=>g+p.weight,0),u=o[d].weight/h*this.cachedWidth;this.splitview.resizeView(d,u)},null,this.disposables),this.styleElement=ls(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){let t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};tE.InstanceCount=0;var z1e={inputActiveOptionBorder:j.fromHex("#007ACC00"),inputActiveOptionForeground:j.fromHex("#FFFFFF"),inputActiveOptionBackground:j.fromHex("#0E639C50")},vp=class extends hs{constructor(e){super(),this._onChange=this._register(new Q),this.onChange=this._onChange.event,this._onKeyDown=this._register(new Q),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},z1e),e),this._checked=this._opts.isChecked;let t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...ir.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}},V1e=m("caseDescription","Match Case"),U1e=m("wordsDescription","Match Whole Word"),Q1e=m("regexDescription","Use Regular Expression"),iE=class extends vp{constructor(e){super({icon:_.caseSensitive,title:V1e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},nE=class extends vp{constructor(e){super({icon:_.wholeWord,title:U1e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},oE=class extends vp{constructor(e){super({icon:_.regex,title:Q1e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};function j1e(i,e={}){let t=lJ(e);return t.textContent=i,t}function Ise(i,e={}){let t=lJ(e);return Tse(t,K1e(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function lJ(i){let e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}var P8=class{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function Tse(i,e,t,n){let o;if(e.type===2)o=document.createTextNode(e.content||"");else if(e.type===3)o=document.createElement("b");else if(e.type===4)o=document.createElement("i");else if(e.type===7&&n)o=document.createElement("code");else if(e.type===5&&t){let r=document.createElement("a");t.disposables.add(Tn(r,"click",s=>{t.callback(String(e.index),s)})),o=r}else e.type===8?o=document.createElement("br"):e.type===1&&(o=i);o&&i!==o&&i.appendChild(o),o&&Array.isArray(e.children)&&e.children.forEach(r=>{Tse(o,r,t,n)})}function K1e(i,e){let t={type:1,children:[]},n=0,o=t,r=[],s=new P8(i);for(;!s.eos();){let a=s.next(),l=a==="\\"&&O8(s.peek(),e)!==0;if(l&&(a=s.next()),!l&&q1e(a,e)&&a===s.peek()){s.advance(),o.type===2&&(o=r.pop());let c=O8(a,e);if(o.type===c||o.type===5&&c===6)o=r.pop();else{let d={type:c,children:[]};c===5&&(d.index=n,n++),o.children.push(d),r.push(o),o=d}}else if(a===`
`)o.type===2&&(o=r.pop()),o.children.push({type:8});else if(o.type!==2){let c={type:2,content:a};o.children.push(c),r.push(o),o=c}else o.content+=a}return o.type===2&&(o=r.pop()),t}function q1e(i,e){return O8(i,e)!==0}function O8(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}var H8=class{constructor(e,t=0,n=e.length,o=t-1){this.items=e,this.start=t,this.end=n,this.index=o}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}},W8=class{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new H8(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(let t of e)this._history.add(t)}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}},Dv=ge,$1e={inputBackground:j.fromHex("#3C3C3C"),inputForeground:j.fromHex("#CCCCCC"),inputValidationInfoBorder:j.fromHex("#55AAFF"),inputValidationInfoBackground:j.fromHex("#063B49"),inputValidationWarningBorder:j.fromHex("#B89500"),inputValidationWarningBackground:j.fromHex("#352A05"),inputValidationErrorBorder:j.fromHex("#BE1100"),inputValidationErrorBackground:j.fromHex("#5A1D1D")},rE=class extends hs{constructor(e,t,n){var o;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new Q),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Ur(this.options,$1e,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(o=this.options.tooltip)!==null&&o!==void 0?o:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ae(e,Dv(".monaco-inputbox.idle"));let r=this.options.flexibleHeight?"textarea":"input",s=ae(this.element,Dv(".ibwrapper"));if(this.input=ae(s,Dv(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ae(s,Dv("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new kx(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ae(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));let a=this._register(new kt(document,"selectionchange")),l=Z.filter(a.event,()=>{let c=document.getSelection();return c?.anchorNode===s});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new wa(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:pB(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Xs(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){let n=parseFloat(this.mirror.style.paddingLeft||"")||0,o=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+o}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));let n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Xs(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:o=>{if(!this.message)return null;e=ae(o,Dv(".monaco-inputbox-container")),t();let r={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?Ise(this.message.content,r):j1e(this.message.content,r);s.classList.add(this.classForType(this.message.type));let a=this.stylesForType(this.message.type);return s.style.backgroundColor=a.background?a.background.toString():"",s.style.color=a.foreground?a.foreground.toString():"",s.style.border=a.border?`1px solid ${a.border}`:"",ae(e,s),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=m("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=m("alertWarningMessage","Warning: {0}",this.message.content):n=m("alertInfoMessage","Info: {0}",this.message.content),co(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let e=this.value,t=e.charCodeAt(e.length-1)===10?" ":"";(e+t).replace(/\u000c/g,"")?this.mirror.textContent=e+t:this.mirror.innerText="\xA0",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){let e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;let e=this.cachedContentHeight;this.cachedContentHeight=pB(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){let t=this.inputElement,n=t.selectionStart,o=t.selectionEnd,r=t.value;n!==null&&o!==null&&(this.value=r.substr(0,n)+e+r.substr(o),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}},sE=class extends rE{constructor(e,t,n){let o=m({key:"history.inputbox.hint",comment:["Text will be prefixed with \u21C5 plus a single space, then used as a hint where input field keeps history"]},"for history"),r=` or \u21C5 ${o}`,s=` (\u21C5 ${o})`;super(e,t,n),this._onDidFocus=this._register(new Q),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Q),this.onDidBlur=this._onDidBlur.event,this.history=new W8(n.history,100);let a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(r)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){let l=this.placeholder.endsWith(")")?r:s,c=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{let l=c=>{if(this.placeholder.endsWith(c)){let d=this.placeholder.slice(0,this.placeholder.length-c.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};l(s)||l(r)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,AD(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,AD(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}},G1e=m("defaultLabel","input"),z8=class extends hs{constructor(e,t,n,o){var r;super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalToggles=[],this._onDidOptionChange=this._register(new Q),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Q),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Q),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new Q),this._onKeyUp=this._register(new Q),this._onCaseSensitiveKeyDown=this._register(new Q),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new Q),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=o.placeholder||"",this.validation=o.validation,this.label=o.label||G1e,this.inputActiveOptionBorder=o.inputActiveOptionBorder,this.inputActiveOptionForeground=o.inputActiveOptionForeground,this.inputActiveOptionBackground=o.inputActiveOptionBackground,this.inputBackground=o.inputBackground,this.inputForeground=o.inputForeground,this.inputBorder=o.inputBorder,this.inputValidationInfoBorder=o.inputValidationInfoBorder,this.inputValidationInfoBackground=o.inputValidationInfoBackground,this.inputValidationInfoForeground=o.inputValidationInfoForeground,this.inputValidationWarningBorder=o.inputValidationWarningBorder,this.inputValidationWarningBackground=o.inputValidationWarningBackground,this.inputValidationWarningForeground=o.inputValidationWarningForeground,this.inputValidationErrorBorder=o.inputValidationErrorBorder,this.inputValidationErrorBackground=o.inputValidationErrorBackground,this.inputValidationErrorForeground=o.inputValidationErrorForeground;let s=o.appendCaseSensitiveLabel||"",a=o.appendWholeWordsLabel||"",l=o.appendRegexLabel||"",c=o.history||[],d=!!o.flexibleHeight,h=!!o.flexibleWidth,u=o.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new sE(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:c,showHistoryHint:o.showHistoryHint,flexibleHeight:d,flexibleWidth:h,flexibleMaxHeight:u})),this.regex=this._register(new oE({appendTitle:l,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(p=>{this._onRegexKeyDown.fire(p)})),this.wholeWords=this._register(new nE({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new iE({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(p=>{this._onCaseSensitiveKeyDown.fire(p)}));let g=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){let f=g.indexOf(document.activeElement);if(f>=0){let v=-1;p.equals(17)?v=(f+1)%g.length:p.equals(15)&&(f===0?v=g.length-1:v=f-1),p.equals(9)?(g[f].blur(),this.inputBox.focus()):v>=0&&g[v].focus(),ii.stop(p,!0)}}}),this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this._showOptionButtons?"block":"none",this.controls.appendChild(this.caseSensitive.domNode),this.controls.appendChild(this.wholeWords.domNode),this.controls.appendChild(this.regex.domNode),this._showOptionButtons||(this.caseSensitive.domNode.style.display="none",this.wholeWords.domNode.style.display="none",this.regex.domNode.style.display="none");for(let p of(r=o?.additionalToggles)!==null&&r!==void 0?r:[])this._register(p),this.controls.appendChild(p.domNode),this._register(p.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(p);this.additionalToggles.length>0&&(this.controls.style.display="block"),this.inputBox.paddingRight=(this._showOptionButtons?this.caseSensitive.width()+this.wholeWords.width()+this.regex.width():0)+this.additionalToggles.reduce((p,f)=>p+f.width(),0),this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(le(this.inputBox.inputElement,"compositionstart",p=>{this.imeSessionInProgress=!0})),this._register(le(this.inputBox.inputElement,"compositionend",p=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,p=>this._onKeyDown.fire(p)),this.onkeyup(this.inputBox.inputElement,p=>this._onKeyUp.fire(p)),this.oninput(this.inputBox.inputElement,p=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,p=>this._onMouseDown.fire(p))}get onDidChange(){return this.inputBox.onDidChange}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable();for(let e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable();for(let e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){let e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);for(let n of this.additionalToggles)n.style(e);let t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}},_g;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element",i[i.Filter=3]="Filter"})(_g||(_g={}));var Fr=class extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}},Fb=class{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}},yl=class{constructor(e,t,n,o){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=o}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},aE=class{constructor(e){this.source=e}getElements(){let e=this.source,t=new Int32Array(e.length);for(let n=0,o=e.length;n<o;n++)t[n]=e.charCodeAt(n);return t}};function Y1e(i,e,t){return new s0(new aE(i),new aE(e)).ComputeDiff(t).changes}var eh=class{static Assert(e,t){if(!e)throw new Error(t)}},th=class{static Copy(e,t,n,o,r){for(let s=0;s<r;s++)n[o+s]=e[t+s]}static Copy2(e,t,n,o,r){for(let s=0;s<r;s++)n[o+s]=e[t+s]}},lE=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new yl(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},s0=class i{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;let[o,r,s]=i._getElements(e),[a,l,c]=i._getElements(t);this._hasStrings=s&&c,this._originalStringElements=o,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){let t=e.getElements();if(i._isStringArray(t)){let n=new Int32Array(t.length);for(let o=0,r=t.length;o<r;o++)n[o]=nJ(t[o],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;let n=i._getStrictElement(this._originalSequence,e),o=i._getStrictElement(this._modifiedSequence,t);return n===o}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,o,r){let s=[!1],a=this.ComputeDiffRecursive(e,t,n,o,s);return r&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,n,o,r){for(r[0]=!1;e<=t&&n<=o&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&o>=n&&this.ElementsAreEqual(t,o);)t--,o--;if(e>t||n>o){let h;return n<=o?(eh.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new yl(e,0,n,o-n+1)]):e<=t?(eh.Assert(n===o+1,"modifiedStart should only be one more than modifiedEnd"),h=[new yl(e,t-e+1,n,0)]):(eh.Assert(e===t+1,"originalStart should only be one more than originalEnd"),eh.Assert(n===o+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}let s=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,o,s,a,r),c=s[0],d=a[0];if(l!==null)return l;if(!r[0]){let h=this.ComputeDiffRecursive(e,c,n,d,r),u=[];return r[0]?u=[new yl(c+1,t-(c+1)+1,d+1,o-(d+1)+1)]:u=this.ComputeDiffRecursive(c+1,t,d+1,o,r),this.ConcatenateChanges(h,u)}return[new yl(e,t-e+1,n,o-n+1)]}WALKTRACE(e,t,n,o,r,s,a,l,c,d,h,u,g,p,f,v,b,A){let w=null,C=null,k=new lE,L=t,S=n,y=g[0]-v[0]-o,M=-1073741824,O=this.m_forwardHistory.length-1;do{let H=y+e;H===L||H<S&&c[H-1]<c[H+1]?(h=c[H+1],p=h-y-o,h<M&&k.MarkNextChange(),M=h,k.AddModifiedElement(h+1,p),y=H+1-e):(h=c[H-1]+1,p=h-y-o,h<M&&k.MarkNextChange(),M=h-1,k.AddOriginalElement(h,p+1),y=H-1-e),O>=0&&(c=this.m_forwardHistory[O],e=c[0],L=1,S=c.length-1)}while(--O>=-1);if(w=k.getReverseChanges(),A[0]){let H=g[0]+1,D=v[0]+1;if(w!==null&&w.length>0){let K=w[w.length-1];H=Math.max(H,K.getOriginalEnd()),D=Math.max(D,K.getModifiedEnd())}C=[new yl(H,u-H+1,D,f-D+1)]}else{k=new lE,L=s,S=a,y=g[0]-v[0]-l,M=1073741824,O=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let H=y+r;H===L||H<S&&d[H-1]>=d[H+1]?(h=d[H+1]-1,p=h-y-l,h>M&&k.MarkNextChange(),M=h+1,k.AddOriginalElement(h+1,p+1),y=H+1-r):(h=d[H-1],p=h-y-l,h>M&&k.MarkNextChange(),M=h,k.AddModifiedElement(h+1,p+1),y=H-1-r),O>=0&&(d=this.m_reverseHistory[O],r=d[0],L=1,S=d.length-1)}while(--O>=-1);C=k.getChanges()}return this.ConcatenateChanges(w,C)}ComputeRecursionPoint(e,t,n,o,r,s,a){let l=0,c=0,d=0,h=0,u=0,g=0;e--,n--,r[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let p=t-e+(o-n),f=p+1,v=new Int32Array(f),b=new Int32Array(f),A=o-n,w=t-e,C=e-n,k=t-o,L=(w-A)%2===0;v[A]=e,b[w]=t,a[0]=!1;for(let S=1;S<=p/2+1;S++){let y=0,M=0;d=this.ClipDiagonalBound(A-S,S,A,f),h=this.ClipDiagonalBound(A+S,S,A,f);for(let H=d;H<=h;H+=2){H===d||H<h&&v[H-1]<v[H+1]?l=v[H+1]:l=v[H-1]+1,c=l-(H-A)-C;let D=l;for(;l<t&&c<o&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(v[H]=l,l+c>y+M&&(y=l,M=c),!L&&Math.abs(H-w)<=S-1&&l>=b[H])return r[0]=l,s[0]=c,D<=b[H]&&1447>0&&S<=1447+1?this.WALKTRACE(A,d,h,C,w,u,g,k,v,b,l,t,r,c,o,s,L,a):null}let O=(y-e+(M-n)-S)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(y,O))return a[0]=!0,r[0]=y,s[0]=M,O>0&&1447>0&&S<=1447+1?this.WALKTRACE(A,d,h,C,w,u,g,k,v,b,l,t,r,c,o,s,L,a):(e++,n++,[new yl(e,t-e+1,n,o-n+1)]);u=this.ClipDiagonalBound(w-S,S,w,f),g=this.ClipDiagonalBound(w+S,S,w,f);for(let H=u;H<=g;H+=2){H===u||H<g&&b[H-1]>=b[H+1]?l=b[H+1]-1:l=b[H-1],c=l-(H-w)-k;let D=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(b[H]=l,L&&Math.abs(H-A)<=S&&l<=v[H])return r[0]=l,s[0]=c,D>=v[H]&&1447>0&&S<=1447+1?this.WALKTRACE(A,d,h,C,w,u,g,k,v,b,l,t,r,c,o,s,L,a):null}if(S<=1447){let H=new Int32Array(h-d+2);H[0]=A-d+1,th.Copy2(v,d,H,1,h-d+1),this.m_forwardHistory.push(H),H=new Int32Array(g-u+2),H[0]=w-u+1,th.Copy2(b,u,H,1,g-u+1),this.m_reverseHistory.push(H)}}return this.WALKTRACE(A,d,h,C,w,u,g,k,v,b,l,t,r,c,o,s,L,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let n=e[t],o=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<o&&n.modifiedStart+n.modifiedLength<r&&(!s||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){let c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let n=e[t],o=0,r=0;if(t>0){let h=e[t-1];o=h.originalStart+h.originalLength,r=h.modifiedStart+h.modifiedLength}let s=n.originalLength>0,a=n.modifiedLength>0,l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){let u=n.originalStart-h,g=n.modifiedStart-h;if(u<o||g<r||s&&!this.OriginalElementsAreEqual(u,u+n.originalLength)||a&&!this.ModifiedElementsAreEqual(g,g+n.modifiedLength))break;let p=(u===o&&g===r?5:0)+this._boundaryScore(u,n.originalLength,g,n.modifiedLength);p>c&&(c=p,l=h)}n.originalStart-=l,n.modifiedStart-=l;let d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){let o=e[t-1],r=e[t],s=r.originalStart-o.originalStart-o.originalLength,a=o.originalStart,l=r.originalStart+r.originalLength,c=l-a,d=o.modifiedStart,h=r.modifiedStart+r.modifiedLength,u=h-d;if(s<5&&c<20&&u<20){let g=this._findBetterContiguousSequence(a,c,d,u,s);if(g){let[p,f]=g;(p!==o.originalStart+o.originalLength||f!==o.modifiedStart+o.modifiedLength)&&(o.originalLength=p-o.originalStart,o.modifiedLength=f-o.modifiedStart,r.originalStart=p+s,r.modifiedStart=f+s,r.originalLength=l-r.originalStart,r.modifiedLength=h-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,o,r){if(t<r||o<r)return null;let s=e+t-r+1,a=n+o-r+1,l=0,c=0,d=0;for(let h=e;h<s;h++)for(let u=n;u<a;u++){let g=this._contiguousSequenceScore(h,u,r);g>0&&g>l&&(l=g,c=h,d=u)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,n){let o=0;for(let r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;o+=this._originalStringElements[e+r].length}return o}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,o){let r=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(n,o)?1:0;return r+s}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){let o=new Array(e.length+t.length-1);return th.Copy(e,0,o,0,e.length-1),o[e.length-1]=n[0],th.Copy(t,1,o,e.length,t.length-1),o}else{let o=new Array(e.length+t.length);return th.Copy(e,0,o,0,e.length),th.Copy(t,0,o,e.length,t.length),o}}ChangesOverlap(e,t,n){if(eh.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),eh.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let o=e.originalStart,r=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new yl(o,r,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,o){if(e>=0&&e<o)return e;let r=n,s=o-n-1,a=t%2===0;if(e<0){let l=r%2===0;return a===l?0:1}else{let l=s%2===0;return a===l?o-1:o-2}}};function cJ(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function Bb(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function mR(i){return typeof i.collapsible=="boolean"}var V8=class{constructor(e,t,n,o={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new v_,this._onDidChangeCollapseState=new Q,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Q,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Q,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Gl(Uoe),this.collapseByDefault=typeof o.collapseByDefault>"u"?!1:o.collapseByDefault,this.filter=o.filter,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=At.empty(),o={}){if(e.length===0)throw new Fr(this.user,"Invalid tree location");o.diffIdentityProvider?this.spliceSmart(o.diffIdentityProvider,e,t,n,o):this.spliceSimple(e,t,n,o)}spliceSmart(e,t,n,o,r,s){var a;o===void 0&&(o=At.empty()),s===void 0&&(s=(a=r.diffDepth)!==null&&a!==void 0?a:0);let{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,o,r);let c=[...o],d=t[t.length-1],h=new s0({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+n)].map(v=>e.getId(v.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,c,r);let u=t.slice(0,-1),g=(v,b,A)=>{if(s>0)for(let w=0;w<A;w++)v--,b--,this.spliceSmart(e,[...u,v,0],Number.MAX_SAFE_INTEGER,c[b].children,r,s-1)},p=Math.min(l.children.length,d+n),f=c.length;for(let v of h.changes.sort((b,A)=>A.originalStart-b.originalStart))g(p,f,p-(v.originalStart+v.originalLength)),p=v.originalStart,f=v.modifiedStart-d,this.spliceSimple([...u,p],v.originalLength,At.slice(c,f,f+v.modifiedLength),r);g(p,f,p)}spliceSimple(e,t,n=At.empty(),{onDidCreateNode:o,onDidDeleteNode:r,diffIdentityProvider:s}){let{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),h=[],u=At.map(n,S=>this.createTreeNode(S,a,a.visible?1:0,c,h,o)),g=e[e.length-1],p=a.children.length>0,f=0;for(let S=g;S>=0&&S<a.children.length;S--){let y=a.children[S];if(y.visible){f=y.visibleChildIndex;break}}let v=[],b=0,A=0;for(let S of u)v.push(S),A+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=f+b++);let w=JX(a.children,g,t,v);s?a.lastDiffIds?JX(a.lastDiffIds,g,t,v.map(S=>s.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>s.getId(S.element).toString()):a.lastDiffIds=void 0;let C=0;for(let S of w)S.visible&&C++;if(C!==0)for(let S=g+v.length;S<a.children.length;S++){let y=a.children[S];y.visible&&(y.visibleChildIndex-=C)}if(a.visibleChildrenCount+=b-C,c&&d){let S=w.reduce((y,M)=>y+(M.visible?M.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,A-S),this.list.splice(l,S,h)}if(w.length>0&&r){let S=y=>{r(y),y.children.forEach(S)};w.forEach(S)}this._onDidSplice.fire({insertedNodes:v,deletedNodes:w});let k=a.children.length>0;p!==k&&this.setCollapsible(e.slice(0,-1),k);let L=a;for(;L;){if(L.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}L=L.parent}}rerender(e){if(e.length===0)throw new Fr(this.user,"Invalid tree location");let{node:t,listIndex:n,revealed:o}=this.getTreeNodeWithListIndex(e);t.visible&&o&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){let{listIndex:t,visible:n,revealed:o}=this.getTreeNodeWithListIndex(e);return n&&o?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){let n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);let o={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){let o=this.getTreeNode(e);typeof t>"u"&&(t=!o.collapsed);let r={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){let{node:n,listIndex:o,revealed:r}=this.getTreeNodeWithListIndex(e),s=this._setListNodeCollapseState(n,o,r,t);if(n!==this.root&&this.autoExpandSingleChildren&&s&&!mR(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return s}_setListNodeCollapseState(e,t,n,o){let r=this._setNodeCollapseState(e,o,!1);if(!n||!e.visible||!r)return r;let s=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=s-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,n){let o;if(e===this.root?o=!1:(mR(t)?(o=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(o=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):o=!1,o&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!mR(t)&&t.recursive)for(let r of e.children)o=this._setNodeCollapseState(r,t,!0)||o;return o}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){let e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,o,r,s){let a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,o&&r.push(a);let c=e.children||At.empty(),d=o&&l!==0&&!a.collapsed,h=At.map(c,p=>this.createTreeNode(p,a,l,d,r,s)),u=0,g=1;for(let p of h)a.children.push(p),g+=p.renderNodeCount,p.visible&&(p.visibleChildIndex=u++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=g):(a.renderNodeCount=0,o&&r.pop()),s?.(a),a}updateNodeAfterCollapseChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(let n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,o=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;o&&n.push(e)}let s=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(let c of e.children)a=this._updateNodeAfterFilterChange(c,r,n,o&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=n.length-s):(e.renderNodeCount=0,o&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){let n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):cJ(n)?(e.filterData=n.data,Bb(n.visibility)):(e.filterData=void 0,Bb(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;let[n,...o]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(o,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;let[n,...o]=e;if(n<0||n>t.children.length)throw new Fr(this.user,"Invalid tree location");return this.getTreeNode(o,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:t,listIndex:n,revealed:o,visible:r}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new Fr(this.user,"Invalid tree location");let a=t.children[s];return{node:a,listIndex:n,revealed:o,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,o=!0,r=!0){let[s,...a]=e;if(s<0||s>t.children.length)throw new Fr(this.user,"Invalid tree location");for(let l=0;l<s;l++)n+=t.children[l].renderNodeCount;return o=o&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:o,visible:r}:this.getParentNodeWithListIndex(a,t.children[s],n+1,o,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){let t=[],n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:gge(e)[0]}getFirstElementChild(e){let t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}},U8=class{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){let n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){let n=this.map.get(e);n&&n.forEach(t)}};globalThis&&globalThis.__awaiter;var Q8=class extends pp{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}};function fR(i){return i instanceof pp?new Q8(i):i}var j8=class{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=J.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,o;(o=(n=this.dnd).onDragStart)===null||o===void 0||o.call(n,fR(e),t)}onDragOver(e,t,n,o,r=!0){let s=this.dnd.onDragOver(fR(e),t&&t.element,n,o),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return s;if(a&&typeof s!="boolean"&&s.autoExpand&&(this.autoExpandDisposable=qh(()=>{let u=this.modelProvider(),g=u.getNodeLocation(t);u.isCollapsed(g)&&u.setCollapsed(g,!1),this.autoExpandNode=void 0},500)),typeof s=="boolean"||!s.accept||typeof s.bubble>"u"||s.feedback){if(!r){let u=typeof s=="boolean"?s:s.accept,g=typeof s=="boolean"?void 0:s.effect;return{accept:u,effect:g,feedback:[n]}}return s}if(s.bubble===1){let u=this.modelProvider(),g=u.getNodeLocation(t),p=u.getParentNodeLocation(g),f=u.getNode(p),v=p&&u.getListIndex(p);return this.onDragOver(e,f,v,o,!1)}let l=this.modelProvider(),c=l.getNodeLocation(t),d=l.getListIndex(c),h=l.getListRenderCount(c);return Object.assign(Object.assign({},s),{feedback:vo(d,d+h)})}drop(e,t,n,o){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(fR(e),t&&t.element,n,o)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}};function J1e(i,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new j8(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){let n=i(),o=n.getNodeLocation(t),r=n.getParentNodeLocation(o);return n.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})})}var Pb=class{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,o;(o=(n=this.delegate).setDynamicHeight)===null||o===void 0||o.call(n,e.element,t)}},Ob;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(Ob||(Ob={}));var K8=class{constructor(e,t=[]){this._elements=t,this.disposables=new ne,this.onDidChange=Z.forEach(e,n=>this._elements=n,this.disposables)}get elements(){return this._elements}dispose(){this.disposables.dispose()}},cE=class i{constructor(e,t,n,o,r={}){var s;this.renderer=e,this.modelProvider=t,this.activeNodes=o,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=i.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new U8,this.activeIndentNodes=new Set,this.indentGuidesDisposable=J.None,this.disposables=new ne,this.templateId=e.templateId,this.updateOptions(r),Z.map(n,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(s=e.onDidChangeTwistieState)===null||s===void 0||s.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=pr(e.indent,0,40)),typeof e.renderIndentGuides<"u"){let t=e.renderIndentGuides!==Ob.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){let n=new ne;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){let t=ae(e,ge(".monaco-tl-row")),n=ae(t,ge(".monaco-tl-indent")),o=ae(t,ge(".monaco-tl-twistie")),r=ae(t,ge(".monaco-tl-contents")),s=this.renderer.renderTemplate(r);return{container:e,indent:n,twistie:o,indentGuidesDisposable:J.None,templateData:s}}renderElement(e,t,n,o){typeof o=="number"&&(this.renderedNodes.set(e,{templateData:n,height:o}),this.renderedElements.set(e.element,e));let r=i.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${r}px`,n.indent.style.width=`${r+this.indent-16}px`,this.renderTwistie(e,n),typeof o=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,o)}disposeElement(e,t,n,o){var r,s;n.indentGuidesDisposable.dispose(),(s=(r=this.renderer).disposeElement)===null||s===void 0||s.call(r,e,t,n.templateData,o),typeof o=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){let t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){let t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(..._.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(..._.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Sn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let n=new ne,o=this.modelProvider(),r=e;for(;;){let s=o.getNodeLocation(r),a=o.getParentNodeLocation(s);if(!a)break;let l=o.getNode(a),c=ge(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&c.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(c):t.indent.insertBefore(c,t.indent.firstElementChild),this.renderedIndentGuides.add(l,c),n.add(ct(()=>this.renderedIndentGuides.delete(l,c))),r=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;let t=new Set,n=this.modelProvider();e.forEach(o=>{let r=n.getNodeLocation(o);try{let s=n.getParentNodeLocation(r);o.collapsible&&o.children.length>0&&!o.collapsed?t.add(o):s&&t.add(n.getNode(s))}catch{}}),this.activeIndentNodes.forEach(o=>{t.has(o)||this.renderedIndentGuides.forEach(o,r=>r.classList.remove("active"))}),t.forEach(o=>{this.activeIndentNodes.has(o)||this.renderedIndentGuides.forEach(o,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),st(this.disposables)}};cE.DefaultIndent=8;var q8=class{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new ne,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}filter(e,t){let n=1;if(this._filter){let s=this._filter.filter(e,t);if(typeof s=="boolean"?n=s?1:0:cJ(s)?n=Bb(s.visibility):n=s,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Ja.Default,visibility:n};let o=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(o)?o:[o];for(let s of r){let a=s&&s.toString();if(typeof a>"u")return{data:Ja.Default,visibility:n};let l=X_(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,r.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===Bl.Filter?2:{data:Ja.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){st(this.disposables)}},Bl;(function(i){i[i.Highlight=0]="Highlight",i[i.Filter=1]="Filter"})(Bl||(Bl={}));var X1e=class{constructor(i,e,t,n,o){var r;this.tree=i,this.view=t,this.filter=n,this.contextViewProvider=o,this._pattern="",this.width=0,this._onDidChangeMode=new Q,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangePattern=new Q,this._onDidChangeOpenState=new Q,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new ne,this.disposables=new ne,this._mode=(r=i.options.defaultFindMode)!==null&&r!==void 0?r:Bl.Highlight,e.onDidSplice(this.onDidSpliceModel,this,this.disposables)}get pattern(){return this._pattern}get mode(){return this._mode}set mode(i){i!==this._mode&&(this._mode=i,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(i))}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var i,e;let t=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&t?(i=this.widget)===null||i===void 0||i.showMessage({type:2,content:m("not found","No elements found.")}):(e=this.widget)===null||e===void 0||e.clearMessage()}shouldAllowFocus(i){return!this.widget||!this.pattern||this._mode===Bl.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Ja.isDefault(i.filterData)}style(i){var e;this.styles=i,(e=this.widget)===null||e===void 0||e.style(i)}layout(i){var e;this.width=i,(e=this.widget)===null||e===void 0||e.layout(i)}dispose(){this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function wee(i){let e=_g.Unknown;return I2(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=_g.Twistie:I2(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=_g.Element:I2(i.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=_g.Filter),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function RS(i,e){e(i),i.children.forEach(t=>RS(t,e))}var _R=class{constructor(i,e){this.getFirstViewElementWithTrait=i,this.identityProvider=e,this.nodes=[],this._onDidChange=new Q,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(i,e){!(e!=null&&e.__forceEvent)&&Zn(this.nodes,i)||this._set(i,!1,e)}_set(i,e,t){if(this.nodes=[...i],this.elements=void 0,this._nodeSet=void 0,!e){let n=this;this._onDidChange.fire({get elements(){return n.get()},browserEvent:t})}}get(){return this.elements||(this.elements=this.nodes.map(i=>i.element)),[...this.elements]}getNodes(){return this.nodes}has(i){return this.nodeSet.has(i)}onDidModelSplice({insertedNodes:i,deletedNodes:e}){if(!this.identityProvider){let a=this.createNodeSet(),l=c=>a.delete(c);e.forEach(c=>RS(c,l)),this.set([...a.values()]);return}let t=new Set,n=a=>t.add(this.identityProvider.getId(a.element).toString());e.forEach(a=>RS(a,n));let o=new Map,r=a=>o.set(this.identityProvider.getId(a.element).toString(),a);i.forEach(a=>RS(a,r));let s=[];for(let a of this.nodes){let l=this.identityProvider.getId(a.element).toString();if(!t.has(l))s.push(a);else{let c=o.get(l);c&&s.push(c)}}if(this.nodes.length>0&&s.length===0){let a=this.getFirstViewElementWithTrait();a&&s.push(a)}this._set(s,!0)}createNodeSet(){let i=new Set;for(let e of this.nodes)i.add(e);return i}},$8=class extends lse{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(ose(e.browserEvent.target)||mp(e.browserEvent.target)||pf(e.browserEvent.target))return;let t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);let n=e.browserEvent.target,o=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,r=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,r&&!o&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){let s=this.tree.model,a=s.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),s.setCollapsed(a,void 0,l),r&&o)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}},G8=class extends xa{constructor(e,t,n,o,r,s,a,l){super(e,t,n,o,l),this.focusTrait=r,this.selectionTrait=s,this.anchorTrait=a}createMouseController(e){return new $8(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;let o=[],r=[],s;n.forEach((a,l)=>{this.focusTrait.has(a)&&o.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(s=e+l)}),o.length>0&&super.setFocus(br([...super.getFocus(),...o])),r.length>0&&super.setSelection(br([...super.getSelection(),...r])),typeof s=="number"&&super.setAnchor(s)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(o=>this.element(o)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(o=>this.element(o)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}},dE=class{constructor(e,t,n,o,r={}){var s;this._user=e,this._options=r,this.eventBufferer=new v_,this.onDidChangeFindOpenState=Z.None,this.disposables=new ne,this._onWillRefilter=new Q,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Q;let a=new Pb(n),l=new uD,c=new uD,d=this.disposables.add(new K8(c.event));this.renderers=o.map(g=>new cE(g,()=>this.model,l.event,d,r));for(let g of this.renderers)this.disposables.add(g);let h;r.keyboardNavigationLabelProvider&&(h=new q8(this,r.keyboardNavigationLabelProvider,r.filter),r=Object.assign(Object.assign({},r),{filter:h}),this.disposables.add(h)),this.focus=new _R(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new _R(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new _R(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new G8(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},J1e(()=>this.model,r)),{tree:this})),this.model=this.createModel(e,this.view,r),l.input=this.model.onDidChangeCollapseState;let u=Z.forEach(this.model.onDidSplice,g=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(g),this.selection.onDidModelSplice(g)})},this.disposables);if(u(()=>null,null,this.disposables),c.input=Z.chain(Z.any(u,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{let g=new Set;for(let p of this.focus.getNodes())g.add(p);for(let p of this.selection.getNodes())g.add(p);return[...g.values()]}).event,r.keyboardSupport!==!1){let g=Z.chain(this.view.onKeyDown).filter(p=>!mp(p.target)).map(p=>new ni(p));g.filter(p=>p.keyCode===15).on(this.onLeftArrow,this,this.disposables),g.filter(p=>p.keyCode===17).on(this.onRightArrow,this,this.disposables),g.filter(p=>p.keyCode===10).on(this.onSpace,this,this.disposables)}(!((s=r.findWidgetEnabled)!==null&&s!==void 0)||s)&&r.keyboardNavigationLabelProvider&&r.contextViewProvider?(this.findController=new X1e(this,this.model,this.view,h,r.contextViewProvider),this.focusNavigationFilter=g=>this.findController.shouldAllowFocus(g),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode):this.onDidChangeFindMode=Z.None,this.styleElement=ls(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Ob.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Z.filter(Z.map(this.view.onMouseDblClick,wee),e=>e.target!==_g.Filter)}get onPointer(){return Z.map(this.view.onPointer,wee)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Z.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:Bl.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(let t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Ob.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),Xa(t)&&((n=this.findController)===null||n===void 0||n.layout(t))}style(e){var t;let n=`.${this.view.domId}`,o=[];e.treeIndentGuidesStroke&&(o.push(`.monaco-list${n}:hover .monaco-tl-indent > .indent-guide, .monaco-list${n}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),o.push(`.monaco-list${n} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=o.join(`
`),(t=this.findController)===null||t===void 0||t.style(e),this.view.style(e)}getParentElement(e){let t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){let n=e.map(r=>this.model.getNode(r));this.selection.set(n,t);let o=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(o,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){let n=e.map(r=>this.model.getNode(r));this.focus.set(n,t);let o=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(o,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);let n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],o=this.model.getNodeLocation(n);if(!this.model.setCollapsed(o,!0)){let r=this.model.getParentNodeLocation(o);if(!r)return;let s=this.model.getListIndex(r);this.view.reveal(s),this.view.setFocus([s])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],o=this.model.getNodeLocation(n);if(!this.model.setCollapsed(o,!1)){if(!n.children.some(a=>a.visible))return;let[r]=this.view.getFocus(),s=r+1;this.view.reveal(s),this.view.setFocus([s])}}onSpace(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],o=this.model.getNodeLocation(n),r=e.browserEvent.altKey;this.model.setCollapsed(o,void 0,r)}dispose(){st(this.disposables),this.view.dispose()}},Hb=class{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new V8(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(o,r){return n.sorter.compare(o.element,r.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=At.empty(),n={}){let o=this.getElementLocation(e);this._setChildren(o,this.preserveCollapseState(t),n)}_setChildren(e,t=At.empty(),n){let o=new Set,r=new Set,s=l=>{var c;if(l.element===null)return;let d=l;if(o.add(d.element),this.nodes.set(d.element,d),this.identityProvider){let h=this.identityProvider.getId(d.element).toString();r.add(h),this.nodesByIdentity.set(h,d)}(c=n.onDidCreateNode)===null||c===void 0||c.call(n,d)},a=l=>{var c;if(l.element===null)return;let d=l;if(o.has(d.element)||this.nodes.delete(d.element),this.identityProvider){let h=this.identityProvider.getId(d.element).toString();r.has(h)||this.nodesByIdentity.delete(h)}(c=n.onDidDeleteNode)===null||c===void 0||c.call(n,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:a}))}preserveCollapseState(e=At.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),At.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){let s=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(s)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});let o=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,r=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:o,collapsed:r,children:this.preserveCollapseState(t.children)})})}rerender(e){let t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){let t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){let t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let o=this.getElementLocation(e);return this.model.setCollapsed(o,t,n)}expandTo(e){let t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);let t=this.nodes.get(e);if(!t)throw new Fr(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Fr(this.user,"Invalid getParentNodeLocation call");let t=this.nodes.get(e);if(!t)throw new Fr(this.user,`Tree element not found: ${e}`);let n=this.model.getNodeLocation(t),o=this.model.getParentNodeLocation(n);return this.model.getNode(o).element}getElementLocation(e){if(e===null)return[];let t=this.nodes.get(e);if(!t)throw new Fr(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}};function FS(i){let e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:At.map(At.from(i.children),FS),collapsible:i.collapsible,collapsed:i.collapsed}}function BS(i){let e=[i.element],t=i.incompressible||!1,n,o;for(;[o,n]=At.consume(At.from(i.children),2),!(o.length!==1||o[0].incompressible);)i=o[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:At.map(At.concat(o,n),BS),collapsible:i.collapsible,collapsed:i.collapsed}}function Y8(i,e=0){let t;return e<i.element.elements.length-1?t=[Y8(i,e+1)]:t=At.map(At.from(i.children),n=>Y8(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function Cee(i){return Y8(i,0)}function Mse(i,e,t){return i.element===e?Object.assign(Object.assign({},i),{children:t}):Object.assign(Object.assign({},i),{children:At.map(At.from(i.children),n=>Mse(n,e,t))})}var Z1e=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}}),J8=class{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new Hb(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=At.empty(),n){let o=n.diffIdentityProvider&&Z1e(n.diffIdentityProvider);if(e===null){let g=At.map(t,this.enabled?BS:FS);this._setChildren(null,g,{diffIdentityProvider:o,diffDepth:1/0});return}let r=this.nodes.get(e);if(!r)throw new Error("Unknown compressed tree node");let s=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=Cee(s),d=Mse(c,e,t),h=(this.enabled?BS:FS)(d),u=l.children.map(g=>g===s?h:g);this._setChildren(l.element,u,{diffIdentityProvider:o,diffDepth:s.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;let t=this.model.getNode().children,n=At.map(t,Cee),o=At.map(n,e?BS:FS);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){let o=new Set,r=a=>{for(let l of a.element.elements)o.add(l),this.nodes.set(l,a.element)},s=a=>{for(let l of a.element.elements)o.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:r,onDidDeleteNode:s}))}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();let t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){let t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){let t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){let t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){let t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let o=this.getCompressedNode(e);return this.model.setCollapsed(o,t,n)}expandTo(e){let t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){let t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;let t=this.nodes.get(e);if(!t)throw new Fr(this.user,`Tree element not found: ${e}`);return t}},eAe=i=>i[i.length-1],X8=class i{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new i(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}};function tAe(i,e){return{splice(t,n,o){e.splice(t,n,o.map(r=>i.map(r)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function iAe(i,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}})}var Z8=class{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||eAe;let o=r=>this.elementMapper(r.elements);this.nodeMapper=new Fb(r=>new X8(o,r)),this.model=new J8(e,tAe(this.nodeMapper,t),iAe(o,n))}get onDidSplice(){return Z.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Z.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Z.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=At.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){let t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}},nAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Wb=class extends dE{constructor(e,t,n,o,r={}){super(e,t,n,o,r),this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=At.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new Hb(e,t,n)}},hE=class{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,o){let r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);r.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,o)):(n.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,n.data,o))}disposeElement(e,t,n,o){var r,s,a,l;n.compressedTreeNode?(s=(r=this.renderer).disposeCompressedElements)===null||s===void 0||s.call(r,n.compressedTreeNode,t,n.data,o):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,n.data,o)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}};nAe([vn],hE.prototype,"compressedTreeNodeProvider",null);function oAe(i,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}var uE=class extends Wb{constructor(e,t,n,o,r={}){let s=()=>this,a=o.map(l=>new hE(s,l));super(e,t,n,a,oAe(s,r))}setChildren(e,t=At.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new Z8(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}},Wd=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function vR(i){return Object.assign(Object.assign({},i),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function e6(i,e){return e.parent?e.parent===i?!0:e6(i,e.parent):!1}function rAe(i,e){return i===e||e6(i,e)||e6(e,i)}var t6=class i{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new i(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},i6=class{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,o){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,o)}renderTwistie(e,t){return e.slow?(t.classList.add(..._.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,o){var r,s;(s=(r=this.renderer).disposeElement)===null||s===void 0||s.call(r,this.nodeMapper.map(e),t,n.templateData,o)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};function yee(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function See(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}var n6=class extends pp{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}};function AR(i){return i instanceof pp?new n6(i):i}var o6=class{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,o;(o=(n=this.dnd).onDragStart)===null||o===void 0||o.call(n,AR(e),t)}onDragOver(e,t,n,o,r=!0){return this.dnd.onDragOver(AR(e),t&&t.element,n,o)}drop(e,t,n,o){this.dnd.drop(AR(e),t&&t.element,n,o)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}};function Nse(i){return i&&Object.assign(Object.assign({},i),{collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new o6(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:i.accessibilityProvider&&Object.assign(Object.assign({},i.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=i.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},i.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:i.additionalScrollHeight})}function r6(i,e){e(i),i.children.forEach(t=>r6(t,e))}var gE=class{constructor(e,t,n,o,r,s={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Q,this._onDidChangeNodeSlowState=new Q,this.nodeMapper=new Fb(a=>new t6(a)),this.disposables=new ne,this.identityProvider=s.identityProvider,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.sorter=s.sorter,this.collapseByDefault=s.collapseByDefault,this.tree=this.createTree(e,t,n,o,s),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=vR({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return Z.map(this.tree.onDidChangeFocus,yee)}get onDidChangeSelection(){return Z.map(this.tree.onDidChangeSelection,yee)}get onMouseDblClick(){return Z.map(this.tree.onMouseDblClick,See)}get onPointer(){return Z.map(this.tree.onPointer,See)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,o,r){let s=new Pb(n),a=o.map(c=>new i6(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=Nse(r)||{};return new Wb(e,t,s,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return Wd(this,void 0,void 0,function*(){this.refreshPromises.forEach(o=>o.cancel()),this.refreshPromises.clear(),this.root.element=e;let n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,o,r){return Wd(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Fr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Z.toPromise(this._onDidRender.event));let s=this.getDataNode(e);if(yield this.refreshAndRenderNode(s,t,o,r),n)try{this.tree.rerender(s)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}let t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){let t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){let n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return Wd(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Fr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Z.toPromise(this._onDidRender.event));let n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Z.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;let o=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Z.toPromise(this._onDidRender.event)),o})}setSelection(e,t){let n=e.map(o=>this.getDataNode(o));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(e=>e.element)}setFocus(e,t){let n=e.map(o=>this.getDataNode(o));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(e=>e.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){let t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){let t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){let t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Fr(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,o){return Wd(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,o)})}refreshNode(e,t,n){return Wd(this,void 0,void 0,function*(){let o;if(this.subTreeRefreshPromises.forEach((r,s)=>{!o&&rAe(s,e)&&(o=r.then(()=>this.refreshNode(e,t,n)))}),o)return o;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return Wd(this,void 0,void 0,function*(){let o;e.refreshPromise=new Promise(r=>o=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{let r=yield this.doRefreshNode(e,t,n);e.stale=!1,yield $h.settled(r.map(s=>this.doRefreshSubTree(s,t,n)))}finally{o()}})}doRefreshNode(e,t,n){return Wd(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let o;if(!e.hasChildren)o=Promise.resolve(At.empty());else{let r=this.doGetChildren(e);if(LX(r))o=Promise.resolve(r);else{let s=Yl(800);s.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),o=r.finally(()=>s.cancel())}}try{let r=yield o;return this.setChildren(e,r,t,n)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Ls(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;let n=this.dataSource.getChildren(e.element);return LX(n)?this.processChildren(n):(t=Gn(()=>Wd(this,void 0,void 0,function*(){return this.processChildren(yield n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Ye))}setChildren(e,t,n,o){let r=[...t];if(e.children.length===0&&r.length===0)return[];let s=new Map,a=new Map;for(let d of e.children)if(s.set(d.element,d),this.identityProvider){let h=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:h})}let l=[],c=r.map(d=>{let h=!!this.dataSource.hasChildren(d);if(!this.identityProvider){let f=vR({element:d,parent:e,hasChildren:h});return h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(f.collapsedByDefault=!1,l.push(f)),f}let u=this.identityProvider.getId(d).toString(),g=a.get(u);if(g){let f=g.node;return s.delete(f.element),this.nodes.delete(f.element),this.nodes.set(d,f),f.element=d,f.hasChildren=h,n?g.collapsed?(f.children.forEach(v=>r6(v,b=>this.nodes.delete(b.element))),f.children.splice(0,f.children.length),f.stale=!0):l.push(f):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(f.collapsedByDefault=!1,l.push(f)),f}let p=vR({element:d,parent:e,id:u,hasChildren:h});return o&&o.viewState.focus&&o.viewState.focus.indexOf(u)>-1&&o.focus.push(p),o&&o.viewState.selection&&o.viewState.selection.indexOf(u)>-1&&o.selection.push(p),o&&o.viewState.expanded&&o.viewState.expanded.indexOf(u)>-1?l.push(p):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(p.collapsedByDefault=!1,l.push(p)),p});for(let d of s.values())r6(d,h=>this.nodes.delete(h.element));for(let d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,n){let o=e.children.map(s=>this.asTreeElement(s,t)),r=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(s){return n.diffIdentityProvider.getId(s.element)}}});this.tree.setChildren(e===this.root?null:e,o,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?At.map(e.children,o=>this.asTreeElement(o,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}},s6=class i{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new i(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},a6=class{constructor(e,t,n,o){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=o,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,o){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,o)}renderCompressedElements(e,t,n,o){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,o)}renderTwistie(e,t){return e.slow?(t.classList.add(..._.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,o){var r,s;(s=(r=this.renderer).disposeElement)===null||s===void 0||s.call(r,this.nodeMapper.map(e),t,n.templateData,o)}disposeCompressedElements(e,t,n,o){var r,s;(s=(r=this.renderer).disposeCompressedElements)===null||s===void 0||s.call(r,this.compressibleNodeMapperProvider().map(e),t,n.templateData,o)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=st(this.disposables)}};function sAe(i){let e=i&&Nse(i);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}var l6=class extends gE{constructor(e,t,n,o,r,s,a={}){super(e,t,n,r,s,a),this.compressionDelegate=o,this.compressibleNodeMapper=new Fb(l=>new s6(l)),this.filter=a.filter}createTree(e,t,n,o,r){let s=new Pb(n),a=o.map(c=>new a6(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=sAe(r)||{};return new uE(e,t,s,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);let n=u=>this.identityProvider.getId(u).toString(),o=u=>{let g=new Set;for(let p of u){let f=this.tree.getCompressedTreeNode(p===this.root?null:p);if(f.element)for(let v of f.element.elements)g.add(n(v.element))}return g},r=o(this.tree.getSelection()),s=o(this.tree.getFocus());super.render(e,t);let a=this.getSelection(),l=!1,c=this.getFocus(),d=!1,h=u=>{let g=u.element;if(g)for(let p=0;p<g.elements.length;p++){let f=n(g.elements[p].element),v=g.elements[g.elements.length-1].element;r.has(f)&&a.indexOf(v)===-1&&(a.push(v),l=!0),s.has(f)&&c.indexOf(v)===-1&&(c.push(v),d=!0)}u.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(c)}processChildren(e){return this.filter&&(e=At.filter(e,t=>{let n=this.filter.filter(t,1),o=aAe(n);if(o===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return o===1})),super.processChildren(e)}};function aAe(i){return typeof i=="boolean"?i?1:0:cJ(i)?Bb(i.visibility):Bb(i)}var c6=class extends dE{constructor(e,t,n,o,r,s={}){super(e,t,n,o,s),this.user=e,this.dataSource=r,this.identityProvider=s.identityProvider}createModel(e,t,n){return new Hb(e,t,n)}};new Le("isMac",gt,m("isMac","Whether the operating system is macOS"));new Le("isLinux",go,m("isLinux","Whether the operating system is Linux"));var eN=new Le("isWindows",Mn,m("isWindows","Whether the operating system is Windows"));new Le("isWeb",gc,m("isWeb","Whether the platform is a web browser"));new Le("isMacNative",gt&&!gc,m("isMacNative","Whether the operating system is macOS on a non-browser platform"));new Le("isIOS",jl,m("isIOS","Whether the operating system is iOS"));new Le("isDevelopment",!1,!0);var lAe=new Le("productQualityType","",m("productQualityType","Quality type of VS Code")),Rse="inputFocus";new Le(Rse,!1,m("inputFocus","Whether keyboard focus is inside an input box"));function Pa(i,e){let t=Object.create(null);for(let n in e){let o=e[n];o&&(t[n]=Mc(o,i))}return t}function dJ(i,e,t){function n(){let o=Pa(i.getColorTheme(),e);typeof t=="function"?t(o):t.style(o)}return n(),i.onDidColorThemeChange(n)}function cAe(i,e,t){return dJ(e,{badgeBackground:t?.badgeBackground||tf,badgeForeground:t?.badgeForeground||nf,badgeBorder:mt},i)}function Ap(i,e,t){return dJ(e,Object.assign(Object.assign({},tN),t||{}),i)}var tN={listFocusBackground:rme,listFocusForeground:sme,listFocusOutline:ame,listActiveSelectionBackground:id,listActiveSelectionForeground:Fl,listActiveSelectionIconForeground:n1,listFocusAndSelectionOutline:lme,listFocusAndSelectionBackground:id,listFocusAndSelectionForeground:Fl,listInactiveSelectionBackground:cme,listInactiveSelectionIconForeground:hme,listInactiveSelectionForeground:dme,listInactiveFocusBackground:ume,listInactiveFocusOutline:gme,listHoverBackground:pme,listHoverForeground:mme,listDropBackground:fme,listSelectionOutline:Pi,listHoverOutline:Pi,listFilterWidgetBackground:_me,listFilterWidgetOutline:vme,listFilterWidgetNoMatchesOutline:Ame,listFilterWidgetShadow:bme,treeIndentGuidesStroke:wme,tableColumnsBorder:Cme,tableOddRowsBackgroundColor:yme,inputActiveOptionBorder:ix,inputActiveOptionForeground:ox,inputActiveOptionBackground:nx,inputBackground:HM,inputForeground:WM,inputBorder:zM,inputValidationInfoBackground:_Y,inputValidationInfoForeground:vY,inputValidationInfoBorder:AY,inputValidationWarningBackground:bY,inputValidationWarningForeground:wY,inputValidationWarningBorder:CY,inputValidationErrorBackground:yY,inputValidationErrorForeground:SY,inputValidationErrorBorder:DY},dAe={shadowColor:Ua,borderColor:Sme,foregroundColor:Dme,backgroundColor:xme,selectionForegroundColor:kme,selectionBackgroundColor:Eme,selectionBorderColor:Lme,separatorColor:Ime,scrollbarShadow:nv,scrollbarSliderBackground:ug,scrollbarSliderHoverBackground:gg,scrollbarSliderActiveBackground:pg};function hAe(i,e,t){return dJ(e,Object.assign(Object.assign({},dAe),t),i)}var fc=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Vt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Qs=ze("listService"),d6=class{constructor(i){this._themeService=i,this.disposables=new ne,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(i){var e,t;i!==this._lastFocusedWidget&&((e=this._lastFocusedWidget)===null||e===void 0||e.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=i,(t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.add("last-focused"))}register(i,e){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;let n=new cse(ls(),"");this.disposables.add(Ap(n,this._themeService))}if(this.lists.some(n=>n.widget===i))throw new Error("Cannot register the same widget multiple times");let t={widget:i,extraContextKeys:e};return this.lists.push(t),i.getHTMLElement()===document.activeElement&&this.setLastFocusedList(i),ss(i.onDidFocus(()=>this.setLastFocusedList(i)),ct(()=>this.lists.splice(this.lists.indexOf(t),1)),i.onDidDispose(()=>{this.lists=this.lists.filter(n=>n!==t),this._lastFocusedWidget===i&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};d6=fc([Vt(0,mi)],d6);var Fse=new Le("listFocus",!0),iN=new Le("listSupportsMultiselect",!0),Bse=we.and(Fse,we.not(Rse)),hJ=new Le("listHasSelectionOrFocus",!1),uJ=new Le("listDoubleSelection",!1),gJ=new Le("listMultiSelection",!1),nN=new Le("listSelectionNavigation",!1),uAe=new Le("listSupportsFind",!0),pJ=new Le("treeElementCanCollapse",!1),gAe=new Le("treeElementHasParent",!1),mJ=new Le("treeElementCanExpand",!1),pAe=new Le("treeElementHasChild",!1),mAe=new Le("treeFindOpen",!1),Pse="listTypeNavigationMode",Ose="listAutomaticKeyboardNavigation";function oN(i,e){let t=i.createScoped(e.getHTMLElement());return Fse.bindTo(t),t}var lm="workbench.list.multiSelectModifier",h6="workbench.list.openMode",ks="workbench.list.horizontalScrolling",fJ="workbench.list.defaultFindMode",_J="workbench.list.keyboardNavigation",zb="workbench.tree.indent",pE="workbench.tree.renderIndentGuides",rl="workbench.list.smoothScrolling",oc="workbench.list.mouseWheelScrollSensitivity",rc="workbench.list.fastScrollSensitivity",mE="workbench.tree.expandMode";function sc(i){return i.getValue(lm)==="alt"}var u6=class extends J{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=sc(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(lm)&&(this.useAltAsMultipleSelectionModifier=sc(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:sse(e)}isSelectionRangeChangeEvent(e){return ase(e)}};function rN(i,e){var t;let n=i.get(Ot),o=i.get(An),r=new ne;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(s){return o.mightProducePrintableCharacter(s)}},smoothScrolling:!!n.getValue(rl),mouseWheelScrollSensitivity:n.getValue(oc),fastScrollSensitivity:n.getValue(rc),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:r.add(new u6(n)),keyboardNavigationEventFilter:fAe(o)}),r]}var g6=class extends xa{constructor(i,e,t,n,o,r,s,a,l,c){let d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(ks),[h,u]=c.invokeFunction(rN,o);super(i,e,t,n,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Pa(a.getColorTheme(),tN)),h),{horizontalScrolling:d})),this.disposables.add(u),this.contextKeyService=oN(r,this),this.themeService=a,this.listSupportsMultiSelect=iN.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),nN.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=hJ.bindTo(this.contextKeyService),this.listDoubleSelection=uJ.bindTo(this.contextKeyService),this.listMultiSelection=gJ.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=sc(l),this.disposables.add(this.contextKeyService),this.disposables.add(s.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let g=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||p.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let g=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||p.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(lm)&&(this._useAltAsMultipleSelectionModifier=sc(l));let p={};if(g.affectsConfiguration(ks)&&this.horizontalScrolling===void 0){let f=!!l.getValue(ks);p=Object.assign(Object.assign({},p),{horizontalScrolling:f})}if(g.affectsConfiguration(rl)){let f=!!l.getValue(rl);p=Object.assign(Object.assign({},p),{smoothScrolling:f})}if(g.affectsConfiguration(oc)){let f=l.getValue(oc);p=Object.assign(Object.assign({},p),{mouseWheelScrollSensitivity:f})}if(g.affectsConfiguration(rc)){let f=l.getValue(rc);p=Object.assign(Object.assign({},p),{fastScrollSensitivity:f})}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new fE(this,Object.assign({configurationService:l},o)),this.disposables.add(this.navigator)}updateOptions(i){super.updateOptions(i),i.overrideStyles&&this.updateStyles(i.overrideStyles),i.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!i.multipleSelectionSupport)}updateStyles(i){var e;(e=this._styler)===null||e===void 0||e.dispose(),this._styler=Ap(this,this.themeService,i)}dispose(){var i;(i=this._styler)===null||i===void 0||i.dispose(),super.dispose()}};g6=fc([Vt(5,Ze),Vt(6,Qs),Vt(7,mi),Vt(8,Ot),Vt(9,tt)],g6);var Dee=class extends N8{constructor(i,e,t,n,o,r,s,a,l,c){let d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(ks),[h,u]=c.invokeFunction(rN,o);super(i,e,t,n,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Pa(a.getColorTheme(),tN)),h),{horizontalScrolling:d})),this.disposables=new ne,this.disposables.add(u),this.contextKeyService=oN(r,this),this.themeService=a,this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=iN.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),nN.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=sc(l),this.disposables.add(this.contextKeyService),this.disposables.add(s.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),o.overrideStyles&&this.disposables.add(Ap(this,a,o.overrideStyles)),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(lm)&&(this._useAltAsMultipleSelectionModifier=sc(l));let p={};if(g.affectsConfiguration(ks)&&this.horizontalScrolling===void 0){let f=!!l.getValue(ks);p=Object.assign(Object.assign({},p),{horizontalScrolling:f})}if(g.affectsConfiguration(rl)){let f=!!l.getValue(rl);p=Object.assign(Object.assign({},p),{smoothScrolling:f})}if(g.affectsConfiguration(oc)){let f=l.getValue(oc);p=Object.assign(Object.assign({},p),{mouseWheelScrollSensitivity:f})}if(g.affectsConfiguration(rc)){let f=l.getValue(rc);p=Object.assign(Object.assign({},p),{fastScrollSensitivity:f})}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new fE(this,Object.assign({configurationService:l},o)),this.disposables.add(this.navigator)}updateOptions(i){super.updateOptions(i),i.overrideStyles&&this.updateStyles(i.overrideStyles),i.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!i.multipleSelectionSupport)}updateStyles(i){var e;(e=this._styler)===null||e===void 0||e.dispose(),this._styler=Ap(this,this.themeService,i)}dispose(){var i;(i=this._styler)===null||i===void 0||i.dispose(),this.disposables.dispose(),super.dispose()}};Dee=fc([Vt(5,Ze),Vt(6,Qs),Vt(7,mi),Vt(8,Ot),Vt(9,tt)],Dee);var xee=class extends tE{constructor(i,e,t,n,o,r,s,a,l,c,d){let h=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(ks),[u,g]=d.invokeFunction(rN,r);super(i,e,t,n,o,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Pa(l.getColorTheme(),tN)),u),{horizontalScrolling:h})),this.disposables.add(g),this.contextKeyService=oN(s,this),this.themeService=l,this.listSupportsMultiSelect=iN.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),nN.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=hJ.bindTo(this.contextKeyService),this.listDoubleSelection=uJ.bindTo(this.contextKeyService),this.listMultiSelection=gJ.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=sc(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let p=this.getSelection(),f=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||f.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let p=this.getSelection(),f=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||f.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(lm)&&(this._useAltAsMultipleSelectionModifier=sc(c));let f={};if(p.affectsConfiguration(ks)&&this.horizontalScrolling===void 0){let v=!!c.getValue(ks);f=Object.assign(Object.assign({},f),{horizontalScrolling:v})}if(p.affectsConfiguration(rl)){let v=!!c.getValue(rl);f=Object.assign(Object.assign({},f),{smoothScrolling:v})}if(p.affectsConfiguration(oc)){let v=c.getValue(oc);f=Object.assign(Object.assign({},f),{mouseWheelScrollSensitivity:v})}if(p.affectsConfiguration(rc)){let v=c.getValue(rc);f=Object.assign(Object.assign({},f),{fastScrollSensitivity:v})}Object.keys(f).length>0&&this.updateOptions(f)})),this.navigator=new p6(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(i){super.updateOptions(i),i.overrideStyles&&this.updateStyles(i.overrideStyles),i.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!i.multipleSelectionSupport)}updateStyles(i){var e;(e=this._styler)===null||e===void 0||e.dispose(),this._styler=Ap(this,this.themeService,i)}dispose(){var i;(i=this._styler)===null||i===void 0||i.dispose(),this.disposables.dispose(),super.dispose()}};xee=fc([Vt(6,Ze),Vt(7,Qs),Vt(8,mi),Vt(9,Ot),Vt(10,tt)],xee);var Vb=class extends J{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new Q),this.onDidOpen=this._onDidOpen.event,this._register(Z.filter(this.widget.onDidChangeSelection,o=>o.browserEvent instanceof KeyboardEvent)(o=>this.onSelectionFromKeyboard(o))),this._register(this.widget.onPointer(o=>this.onPointer(o.element,o.browserEvent))),this._register(this.widget.onMouseDblClick(o=>this.onMouseDblClick(o.element,o.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t!=null&&t.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(h6)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=t?.configurationService.getValue(h6)!=="doubleClick"}))):this.openOnSingleClick=(n=t?.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;let t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,o=typeof t.pinned=="boolean"?t.pinned:!n,r=!1;this._open(this.getSelectedElement(),n,o,r,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;let n=t.button===1,o=!0,r=n,s=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,s,t)}onMouseDblClick(e,t){if(!t)return;let n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;let o=!1,r=!0,s=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,s,t)}_open(e,t,n,o,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:o,element:e,browserEvent:r})}},fE=class extends Vb{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}},p6=class extends Vb{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}},m6=class extends Vb{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}};function fAe(i){let e=!1;return t=>{if(t.toKeybinding().isModifierKey())return!1;if(e)return e=!1,!1;let n=i.softDispatch(t,t.target);return n!=null&&n.enterChord?(e=!0,!1):(e=!1,!n)}}var kee=class extends Wb{constructor(i,e,t,n,o,r,s,a,l,c){let{options:d,getTypeNavigationMode:h,disposable:u}=r.invokeFunction(GC,o);super(i,e,t,n,d),this.disposables.add(u),this.internals=new bp(this,o,h,o.overrideStyles,s,a,l,c),this.disposables.add(this.internals)}updateOptions(i){super.updateOptions(i),this.internals.updateOptions(i)}};kee=fc([Vt(5,tt),Vt(6,Ze),Vt(7,Qs),Vt(8,mi),Vt(9,Ot)],kee);var Eee=class extends uE{constructor(i,e,t,n,o,r,s,a,l,c){let{options:d,getTypeNavigationMode:h,disposable:u}=r.invokeFunction(GC,o);super(i,e,t,n,d),this.disposables.add(u),this.internals=new bp(this,o,h,o.overrideStyles,s,a,l,c),this.disposables.add(this.internals)}updateOptions(i={}){super.updateOptions(i),i.overrideStyles&&this.internals.updateStyleOverrides(i.overrideStyles),this.internals.updateOptions(i)}};Eee=fc([Vt(5,tt),Vt(6,Ze),Vt(7,Qs),Vt(8,mi),Vt(9,Ot)],Eee);var Lee=class extends c6{constructor(i,e,t,n,o,r,s,a,l,c,d){let{options:h,getTypeNavigationMode:u,disposable:g}=s.invokeFunction(GC,r);super(i,e,t,n,o,h),this.disposables.add(g),this.internals=new bp(this,r,u,r.overrideStyles,a,l,c,d),this.disposables.add(this.internals)}updateOptions(i={}){super.updateOptions(i),i.overrideStyles&&this.internals.updateStyleOverrides(i.overrideStyles),this.internals.updateOptions(i)}};Lee=fc([Vt(6,tt),Vt(7,Ze),Vt(8,Qs),Vt(9,mi),Vt(10,Ot)],Lee);var f6=class extends gE{constructor(i,e,t,n,o,r,s,a,l,c,d){let{options:h,getTypeNavigationMode:u,disposable:g}=s.invokeFunction(GC,r);super(i,e,t,n,o,h),this.disposables.add(g),this.internals=new bp(this,r,u,r.overrideStyles,a,l,c,d),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(i={}){super.updateOptions(i),i.overrideStyles&&this.internals.updateStyleOverrides(i.overrideStyles),this.internals.updateOptions(i)}};f6=fc([Vt(6,tt),Vt(7,Ze),Vt(8,Qs),Vt(9,mi),Vt(10,Ot)],f6);var Iee=class extends l6{constructor(i,e,t,n,o,r,s,a,l,c,d,h){let{options:u,getTypeNavigationMode:g,disposable:p}=a.invokeFunction(GC,s);super(i,e,t,n,o,r,u),this.disposables.add(p),this.internals=new bp(this,s,g,s.overrideStyles,l,c,d,h),this.disposables.add(this.internals)}updateOptions(i){super.updateOptions(i),this.internals.updateOptions(i)}};Iee=fc([Vt(7,tt),Vt(8,Ze),Vt(9,Qs),Vt(10,mi),Vt(11,Ot)],Iee);function Hse(i){let e=i.getValue(fJ);if(e==="highlight")return Bl.Highlight;if(e==="filter")return Bl.Filter;let t=i.getValue(_J);if(t==="simple"||t==="highlight")return Bl.Highlight;if(t==="filter")return Bl.Filter}function GC(i,e){var t;let n=i.get(Ot),o=i.get(om),r=i.get(Ze),s=i.get(tt),a=()=>{let u=r.getContextKeyValue(Pse);if(u==="automatic")return Ng.Automatic;if(u==="trigger"||r.getContextKeyValue(Ose)===!1)return Ng.Trigger},l=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(ks),[c,d]=s.invokeFunction(rN,e),h=e.additionalScrollHeight;return{getTypeNavigationMode:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},c),{indent:typeof n.getValue(zb)=="number"?n.getValue(zb):void 0,renderIndentGuides:n.getValue(pE),smoothScrolling:!!n.getValue(rl),defaultFindMode:Hse(n),horizontalScrolling:l,additionalScrollHeight:h,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:n.getValue(mE)==="doubleClick",contextViewProvider:o})}}var bp=class{constructor(i,e,t,n,o,r,s,a){var l;this.tree=i,this.themeService=s,this.disposables=[],this.contextKeyService=oN(o,i),this.listSupportsMultiSelect=iN.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(e.multipleSelectionSupport!==!1),nN.bindTo(this.contextKeyService).set(!!e.selectionNavigation),this.listSupportFindWidget=uAe.bindTo(this.contextKeyService),this.listSupportFindWidget.set((l=e.findWidgetEnabled)!==null&&l!==void 0?l:!0),this.hasSelectionOrFocus=hJ.bindTo(this.contextKeyService),this.hasDoubleSelection=uJ.bindTo(this.contextKeyService),this.hasMultiSelection=gJ.bindTo(this.contextKeyService),this.treeElementCanCollapse=pJ.bindTo(this.contextKeyService),this.treeElementHasParent=gAe.bindTo(this.contextKeyService),this.treeElementCanExpand=mJ.bindTo(this.contextKeyService),this.treeElementHasChild=pAe.bindTo(this.contextKeyService),this.treeFindOpen=mAe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=sc(a),this.updateStyleOverrides(n);let c=()=>{let h=i.getFocus()[0];if(!h)return;let u=i.getNode(h);this.treeElementCanCollapse.set(u.collapsible&&!u.collapsed),this.treeElementHasParent.set(!!i.getParentElement(h)),this.treeElementCanExpand.set(u.collapsible&&u.collapsed),this.treeElementHasChild.set(!!i.getFirstElementChild(h))},d=new Set;d.add(Pse),d.add(Ose),this.disposables.push(this.contextKeyService,r.register(i),i.onDidChangeSelection(()=>{let h=i.getSelection(),u=i.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(h.length>0||u.length>0),this.hasMultiSelection.set(h.length>1),this.hasDoubleSelection.set(h.length===2)})}),i.onDidChangeFocus(()=>{let h=i.getSelection(),u=i.getFocus();this.hasSelectionOrFocus.set(h.length>0||u.length>0),c()}),i.onDidChangeCollapseState(c),i.onDidChangeModel(c),i.onDidChangeFindOpenState(h=>this.treeFindOpen.set(h)),a.onDidChangeConfiguration(h=>{let u={};if(h.affectsConfiguration(lm)&&(this._useAltAsMultipleSelectionModifier=sc(a)),h.affectsConfiguration(zb)){let g=a.getValue(zb);u=Object.assign(Object.assign({},u),{indent:g})}if(h.affectsConfiguration(pE)){let g=a.getValue(pE);u=Object.assign(Object.assign({},u),{renderIndentGuides:g})}if(h.affectsConfiguration(rl)){let g=!!a.getValue(rl);u=Object.assign(Object.assign({},u),{smoothScrolling:g})}if((h.affectsConfiguration(fJ)||h.affectsConfiguration(_J))&&i.updateOptions({defaultFindMode:Hse(a)}),h.affectsConfiguration(ks)&&e.horizontalScrolling===void 0){let g=!!a.getValue(ks);u=Object.assign(Object.assign({},u),{horizontalScrolling:g})}if(h.affectsConfiguration(mE)&&e.expandOnlyOnTwistieClick===void 0&&(u=Object.assign(Object.assign({},u),{expandOnlyOnTwistieClick:a.getValue(mE)==="doubleClick"})),h.affectsConfiguration(oc)){let g=a.getValue(oc);u=Object.assign(Object.assign({},u),{mouseWheelScrollSensitivity:g})}if(h.affectsConfiguration(rc)){let g=a.getValue(rc);u=Object.assign(Object.assign({},u),{fastScrollSensitivity:g})}Object.keys(u).length>0&&i.updateOptions(u)}),this.contextKeyService.onDidChangeContext(h=>{h.affectsSome(d)&&i.updateOptions({typeNavigationMode:t()})})),this.navigator=new m6(i,Object.assign({configurationService:a},e)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(i){i.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!i.multipleSelectionSupport)}updateStyleOverrides(i){st(this.styler),this.styler=i?Ap(this.tree,this.themeService,i):J.None}dispose(){this.disposables=st(this.disposables),st(this.styler),this.styler=void 0}};bp=fc([Vt(4,Ze),Vt(5,Qs),Vt(6,mi),Vt(7,Ot)],bp);var _Ae=oi.as(Sa.Configuration);_Ae.registerConfiguration({id:"workbench",order:7,title:m("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[lm]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[m("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:m({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[h6]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[ks]:{type:"boolean",default:!1,description:m("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[zb]:{type:"number",default:8,minimum:4,maximum:40,description:m("tree indent setting","Controls tree indentation in pixels.")},[pE]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:m("render tree indent guides","Controls whether the tree should render indent guides.")},[rl]:{type:"boolean",default:!1,description:m("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[oc]:{type:"number",default:1,markdownDescription:m("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[rc]:{type:"number",default:5,description:m("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[fJ]:{type:"string",enum:["highlight","filter"],enumDescriptions:[m("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),m("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:m("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[_J]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[m("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),m("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),m("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:m("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:m("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' instead.")},[mE]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var vAe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},ac=class{constructor(e,t,n,o){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=o,this.id=Cse.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;let t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?m({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",gs(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):m("aria.oneReference","symbol in {0} on line {1} at column {2}",gs(this.uri),this.range.startLineNumber,this.range.startColumn)}},_6=class{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){let n=this._modelReference.object.textEditorModel;if(!n)return;let{startLineNumber:o,startColumn:r,endLineNumber:s,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:o,column:r-t}),c=new E(o,l.startColumn,o,r),d=new E(s,a,s,1073741824),h=n.getValueInRange(c).replace(/^\s+/,""),u=n.getValueInRange(e),g=n.getValueInRange(d).replace(/\s+$/,"");return{value:h+u+g,highlight:{start:h.length,end:h.length+u.length}}}},wp=class{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new en}dispose(){st(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){let e=this.children.length;return e===1?m("aria.fileReferences.1","1 symbol in {0}, full path {1}",gs(this.uri),this.uri.fsPath):m("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,gs(this.uri),this.uri.fsPath)}resolve(e){return vAe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{let n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new _6(n))}catch(n){Ye(n)}return this})}},Bs=class i{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Q,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;let[n]=e;e.sort(i._compareReferences);let o;for(let r of e)if((!o||!Ai.isEqual(o.uri,r.uri,!0))&&(o=new wp(this,r.uri),this.groups.push(o)),o.children.length===0||i._compareReferences(r,o.children[o.children.length-1])!==0){let s=new ac(n===r,o,r,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(s),o.children.push(s)}}dispose(){st(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new i(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?m("aria.result.0","No results found"):this.references.length===1?m("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?m("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):m("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,o=n.children.indexOf(e),r=n.children.length,s=n.parent.groups.length;return s===1||t&&o+1<r||!t&&o>0?(t?o=(o+1)%r:o=(o+r-1)%r,n.children[o]):(o=n.parent.groups.indexOf(n),t?(o=(o+1)%s,n.parent.groups[o].children[0]):(o=(o+s-1)%s,n.parent.groups[o].children[n.parent.groups[o].children.length-1]))}nearestReference(e,t){let n=this.references.map((o,r)=>({idx:r,prefixLen:Zg(o.uri.toString(),e.toString()),offsetDist:Math.abs(o.range.startLineNumber-t.lineNumber)*100+Math.abs(o.range.startColumn-t.column)})).sort((o,r)=>o.prefixLen>r.prefixLen?-1:o.prefixLen<r.prefixLen?1:o.offsetDist<r.offsetDist?-1:o.offsetDist>r.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(let n of this.references)if(n.uri.toString()===e.toString()&&E.containsPosition(n.range,t))return n}firstReference(){for(let e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Ai.compare(e.uri,t.uri)||E.compareRangesUsingStarts(e.range,t.range)}},AAe={badgeBackground:j.fromHex("#4D4D4D"),badgeForeground:j.fromHex("#FFFFFF")},Ub=class{constructor(e,t){this.count=0,this.options=t||Object.create(null),Ur(this.options,AAe,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=ae(e,ge(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=ws(this.countFormat,this.count),this.element.title=ws(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){let e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}},Cp=class i{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t?.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=ae(e,ge("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",o){e||(e=""),o&&(e=i.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&yr(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){let e=[],t=0;for(let n of this.highlights){if(n.end===n.start)continue;if(t<n.start){let s=this.text.substring(t,n.start);e.push(ge("span",void 0,...this.supportIcons?Rg(s):[s])),t=n.end}let o=this.text.substring(n.start,n.end),r=ge("span.highlight",void 0,...this.supportIcons?Rg(o):[o]);n.extraClasses&&r.classList.add(...n.extraClasses),e.push(r),t=n.end}if(t<this.text.length){let n=this.text.substring(t);e.push(ge("span",void 0,...this.supportIcons?Rg(n):[n]))}Hh(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,o=0;return e.replace(/\r\n|\r|\n/g,(r,s)=>{o=r===`\r
`?-1:0,s+=n;for(let a of t)a.end<=s||(a.start>=s&&(a.start+=o),a.end>=s&&(a.end+=o));return n+=o,"\u23CE"})}},Q1=class{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}},a0=class extends J{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new Q1(ae(e,ge(".monaco-icon-label")))),this.labelContainer=ae(this.domNode.element,ge(".monaco-icon-label-container"));let n=ae(this.labelContainer,ge("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new Q1(ae(this.labelContainer,ge("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new A6(n,!!t.supportIcons):this.nameNode=new v6(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new Cp(ae(this.descriptionContainer.element,ge("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new Q1(ae(this.descriptionContainer.element,ge("span.label-description")))),this.hoverDelegate=t?.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){let o=["monaco-icon-label"];n&&(n.extraClasses&&o.push(...n.extraClasses),n.italic&&o.push("italic"),n.strikethrough&&o.push("strikethrough")),this.domNode.className=o.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Cp?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n?.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,n?.descriptionTitle||""),this.descriptionNode.empty=!t))}setupHover(e,t){let n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)V0e(e,t);else{let o=Wre(this.hoverDelegate,e,t);o&&this.customHovers.set(e,o)}}dispose(){super.dispose();for(let e of this.customHovers.values())e.dispose();this.customHovers.clear()}},v6=class{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&yr(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ae(this.container,ge("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){let o=e[n],r=t?.domId&&`${t?.domId}_${n}`;ae(this.container,ge("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},o)),n<e.length-1&&ae(this.container,ge("span.label-separator",void 0,t?.separator||"/"))}}}};function bAe(i,e,t){if(!t)return;let n=0;return i.map(o=>{let r={start:n,end:n+o.length},s=t.map(a=>Ao.intersect(r,a)).filter(a=>!Ao.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=r.end+e.length,s})}var A6=class{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&yr(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Cp(ae(this.container,ge("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;let n=t?.separator||"/",o=bAe(e,n,t?.matches);for(let r=0;r<e.length;r++){let s=e[r],a=o?o[r]:void 0,l=t?.domId&&`${t?.domId}_${r}`,c=ge("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});new Cp(ae(this.container,c),{supportIcons:this.supportIcons}).set(s,a,void 0,t?.labelEscapeNewLines),r<e.length-1&&ae(c,ge("span.label-separator",void 0,n))}}}},yp=ze("labelService"),sN=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Qb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},b6=class{constructor(i){this._resolverService=i}hasChildren(i){return i instanceof Bs||i instanceof wp}getChildren(i){if(i instanceof Bs)return i.groups;if(i instanceof wp)return i.resolve(this._resolverService).then(e=>e.children);throw new Error("bad tree")}};b6=sN([Qb(0,io)],b6);var w6=class{getHeight(){return 23}getTemplateId(e){return e instanceof wp?jb.id:Kb.id}},C6=class{constructor(i){this._keybindingService=i}getKeyboardNavigationLabel(i){var e;if(i instanceof ac){let t=(e=i.parent.getPreview(i))===null||e===void 0?void 0:e.preview(i.range);if(t)return t.value}return gs(i.uri)}};C6=sN([Qb(0,An)],C6);var y6=class{getId(e){return e instanceof ac?e.id:e.uri}},S6=class extends J{constructor(i,e,t){super(),this._labelService=e;let n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new a0(n,{supportHighlights:!0})),this.badge=new Ub(ae(n,ge(".count"))),this._register(cAe(this.badge,t)),i.appendChild(n)}set(i,e){let t=rv(i.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(i.uri),this._labelService.getUriLabel(t,{relative:!0}),{title:this._labelService.getUriLabel(i.uri),matches:e});let n=i.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat(m("referencesCount","{0} references",n)):this.badge.setTitleFormat(m("referenceCount","{0} reference",n))}};S6=sN([Qb(1,yp),Qb(2,mi)],S6);var jb=class Wse{constructor(e){this._instantiationService=e,this.templateId=Wse.id}renderTemplate(e){return this._instantiationService.createInstance(S6,e)}renderElement(e,t,n){n.set(e.element,$M(e.filterData))}disposeTemplate(e){e.dispose()}};jb.id="FileReferencesRenderer";jb=sN([Qb(0,tt)],jb);var D6=class{constructor(e){this.label=new Cp(e)}set(e,t){var n;let o=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!o||!o.value)this.label.set(`${gs(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{let{value:r,highlight:s}=o;t&&!Ja.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,$M(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[s]))}}},Kb=class i{constructor(){this.templateId=i.id}renderTemplate(e){return new D6(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}};Kb.id="OneReferenceRenderer";var x6=class{getWidgetAriaLabel(){return m("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}},wAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},xc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Tee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},_E=class i{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new ne,this._callOnModelChange=new ne,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();let e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));let t=[],n=[];for(let o=0,r=e.children.length;o<r;o++){let s=e.children[o];this._decorationIgnoreSet.has(s.id)||s.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:s.range,options:i.DecorationOptions}),n.push(o))}this._editor.changeDecorations(o=>{let r=o.deltaDecorations([],t);for(let s=0;s<r.length;s++)this._decorations.set(r[s],e.children[n[s]])})}_onDecorationChanged(){let e=[],t=this._editor.getModel();if(t){for(let[n,o]of this._decorations){let r=t.getDecorationRange(n);if(!r)continue;let s=!1;if(!E.equalsRange(r,o.range)){if(E.spansMultipleLines(r))s=!0;else{let a=o.range.endColumn-o.range.startColumn,l=r.endColumn-r.startColumn;a!==l&&(s=!0)}s?(this._decorationIgnoreSet.add(o.id),e.push(n)):o.range=r}}for(let n=0,o=e.length;n<o;n++)this._decorations.delete(e[n]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};_E.DecorationOptions=rt.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var k6=class{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{let o=JSON.parse(e);t=o.ratio,n=o.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}},E6=class extends f6{},L6=class extends Jk{constructor(i,e,t,n,o,r,s,a,l,c,d,h){super(i,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=e,this.layoutData=t,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=s,this._uriLabel=a,this._undoRedoService=l,this._keybindingService=c,this._languageService=d,this._languageConfigurationService=h,this._disposeOnNewModel=new ne,this._callOnDispose=new ne,this._onDidSelectReference=new Q,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Si(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(i,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),st(this._preview),st(this._previewNotAvailableMessage),st(this._tree),st(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(i){let e=i.getColor(B1e)||j.transparent;this.style({arrowColor:e,frameColor:e,headerBackgroundColor:i.getColor(F1e)||j.transparent,primaryHeadingColor:i.getColor(kse),secondaryHeadingColor:i.getColor(Ese)})}show(i){super.show(i,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(i){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:i.ctrlKey||i.metaKey||i.altKey?"side":"open",source:"title"})}_fillBody(i){this.setCssClass("reference-zone-widget"),this._messageContainer=ae(i,ge("div.messages")),Xo(this._messageContainer),this._splitView=new eE(i,{orientation:1}),this._previewContainer=ae(i,ge("div.preview.inline"));let e={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(_p,this._previewContainer,e,this.editor),Xo(this._previewContainer),this._previewNotAvailableMessage=new Sd(m("missingPreviewMessage","no preview available"),Pr,Sd.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=ae(i,ge("div.ref-tree.inline"));let t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new x6,keyboardNavigationLabelProvider:this._instantiationService.createInstance(C6),identityProvider:new y6,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:P1e}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Tn(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(E6,"ReferencesWidget",this._treeContainer,new w6,[this._instantiationService.createInstance(jb),this._instantiationService.createInstance(Kb)],this._instantiationService.createInstance(b6),t),this._splitView.addView({onDidChange:Z.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},Zk.Distribute),this._splitView.addView({onDidChange:Z.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},Zk.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let n=(o,r)=>{o instanceof ac&&(r==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:r,source:"tree"}))};this._tree.onDidOpen(o=>{o.sideBySide?n(o.element,"side"):o.editorOptions.pinned?n(o.element,"goto"):n(o.element,"show")}),Xo(this._treeContainer)}_onWidth(i){this._dim&&this._doLayoutBody(this._dim.height,i)}_doLayoutBody(i,e){super._doLayoutBody(i,e),this._dim=new Si(e,i),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(e),this._splitView.resizeView(0,e*this.layoutData.ratio)}setSelection(i){return this._revealReference(i,!0).then(()=>{this._model&&(this._tree.setSelection([i]),this._tree.setFocus([i]))})}setModel(i){return this._disposeOnNewModel.clear(),this._model=i,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=m("noResults","No results"),_r(this._messageContainer),Promise.resolve(void 0)):(Xo(this._messageContainer),this._decorationsManager=new _E(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(i=>this._tree.rerender(i))),this._disposeOnNewModel.add(this._preview.onMouseDown(i=>{let{event:e,target:t}=i;if(e.detail!==2)return;let n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:t.range},kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),_r(this._treeContainer),_r(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){let[i]=this._tree.getFocus();if(i instanceof ac)return i;if(i instanceof wp&&i.children.length>0)return i.children[0]}revealReference(i){return Tee(this,void 0,void 0,function*(){yield this._revealReference(i,!1),this._onDidSelectReference.fire({element:i,kind:"goto",source:"tree"})})}_revealReference(i,e){return Tee(this,void 0,void 0,function*(){if(this._revealedReference===i)return;this._revealedReference=i,i.uri.scheme!==Oe.inMemory?this.setTitle(w5(i.uri),this._uriLabel.getUriLabel(rv(i.uri))):this.setTitle(m("peekView.alternateTitle","References"));let t=this._textModelResolverService.createModelReference(i.uri);this._tree.getInput()===i.parent?this._tree.reveal(i):(e&&this._tree.reveal(i.parent),yield this._tree.expand(i.parent),this._tree.reveal(i));let n=yield t;if(!this._model){n.dispose();return}st(this._previewModelReference);let o=n.object;if(o){let r=this._preview.getModel()===o.textEditorModel?0:1,s=E.lift(i.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(s),this._preview.revealRangeInCenter(s,r)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()})}};L6=wAe([xc(3,mi),xc(4,io),xc(5,tt),xc(6,xse),xc(7,yp),xc(8,KM),xc(9,An),xc(10,ki),xc(11,Yi)],L6);var CAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Dm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Mee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},cm=new Le("referenceSearchVisible",!1,m("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),nu=class I6{constructor(e,t,n,o,r,s,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=o,this._notificationService=r,this._instantiationService=s,this._storageService=a,this._configurationService=l,this._disposables=new ne,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=cm.bindTo(n)}static get(e){return e.getContribution(I6.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let o;if(this._widget&&(o=this._widget.position),this.closeWidget(),o&&e.containsPosition(o))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));let r="peekViewLayout",s=k6.fromJSON(this._storageService.get(r,0,"{}"));this._widget=this._instantiationService.createInstance(L6,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(m("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(r,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":n?this._gotoReference(c):this.openReference(c,!1,!0);break}}));let a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(m("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let d=this._editor.getModel().uri,h=new q(e.startLineNumber,e.startColumn),u=this._model.nearestReference(d,h);if(u)return this._widget.setSelection(u).then(()=>{this._widget&&this._editor.getOption(79)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return Mee(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;let t=this._widget.position;if(!t)return;let n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;let o=this._model.nextOrPreviousReference(n,e),r=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(o),yield this._gotoReference(o),r?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()})}revealReference(e){return Mee(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;let t=E.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t,selectionSource:"code.jump"}},this._editor).then(n=>{var o;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{let r=I6.get(n),s=this._model.clone();this.closeWidget(),n.focus(),r?.toggleWidget(t,Gn(a=>Promise.resolve(s)),(o=this._peekMode)!==null&&o!==void 0?o:!1)}},n=>{this._ignoreModelChangeEvent=!1,Ye(n)})}openReference(e,t,n){t||this.closeWidget();let{uri:o,range:r}=e;this._editorService.openCodeEditor({resource:o,options:{selection:r,selectionSource:"code.jump",pinned:n}},this._editor,t)}};nu.ID="editor.contrib.referencesController";nu=CAe([Dm(2,Ze),Dm(3,Ft),Dm(4,nn),Dm(5,tt),Dm(6,Ea),Dm(7,Ot)],nu);function dm(i,e){let t=N1e(i);if(!t)return;let n=nu.get(t);n&&e(n)}Vr.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:xn(2089,60),when:we.or(cm,xr.inPeekEditor),handler(i){dm(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Vr.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:we.or(cm,xr.inPeekEditor),handler(i){dm(i,e=>{e.goToNextOrPreviousReference(!0)})}});Vr.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:we.or(cm,xr.inPeekEditor),handler(i){dm(i,e=>{e.goToNextOrPreviousReference(!1)})}});ft.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");ft.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");ft.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");ft.registerCommand("closeReferenceSearch",i=>dm(i,e=>e.closeWidget()));Vr.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:we.and(xr.inPeekEditor,we.not("config.editor.stablePeek"))});Vr.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:we.and(cm,we.not("config.editor.stablePeek"))});Vr.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:we.and(cm,Bse,pJ.negate(),mJ.negate()),handler(i){var e;let t=(e=i.get(Qs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(t)&&t[0]instanceof ac&&dm(i,n=>n.revealReference(t[0]))}});Vr.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:we.and(cm,Bse,pJ.negate(),mJ.negate()),handler(i){var e;let t=(e=i.get(Qs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(t)&&t[0]instanceof ac&&dm(i,n=>n.openReference(t[0],!0,!0))}});ft.registerCommand("openReference",i=>{var e;let t=(e=i.get(Qs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(t)&&t[0]instanceof ac&&dm(i,n=>n.openReference(t[0],!1,!0))});var zse=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},h1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},vJ=new Le("hasSymbols",!1,m("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),aN=ze("ISymbolNavigationService"),T6=class{constructor(i,e,t,n){this._editorService=e,this._notificationService=t,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=vJ.bindTo(i)}reset(){var i,e;this._ctxHasSymbols.reset(),(i=this._currentState)===null||i===void 0||i.dispose(),(e=this._currentMessage)===null||e===void 0||e.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(i){let e=i.parent.parent;if(e.references.length<=1){this.reset();return}this._currentModel=e,this._currentIdx=e.references.indexOf(i),this._ctxHasSymbols.set(!0),this._showMessage();let t=new M6(this._editorService),n=t.onDidChange(o=>{if(this._ignoreEditorChange)return;let r=this._editorService.getActiveCodeEditor();if(!r)return;let s=r.getModel(),a=r.getPosition();if(!s||!a)return;let l=!1,c=!1;for(let d of e.references)if(bre(d.uri,s.uri))l=!0,c=c||E.containsPosition(d.range,a);else if(l)break;(!l||!c)&&this.reset()});this._currentState=ss(t,n)}revealNext(i){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;let e=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:e.uri,options:{selection:E.collapseToStart(e.range),selectionRevealType:3}},i).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var i;(i=this._currentMessage)===null||i===void 0||i.dispose();let e=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),t=e?m("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,e.getLabel()):m("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)}};T6=zse([h1(0,Ze),h1(1,Ft),h1(2,nn),h1(3,An)],T6);Ke(aN,T6,!0);pe(new class extends $n{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:vJ,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(aN).revealNext(e)}});Vr.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:vJ,primary:9,handler(i){i.get(aN).reset()}});var M6=class{constructor(i){this._listener=new Map,this._disposables=new ne,this._onDidChange=new Q,this.onDidChange=this._onDidChange.event,this._disposables.add(i.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(i.onCodeEditorAdd(this._onDidAddEditor,this)),i.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),st(this._listener.values())}_onDidAddEditor(i){this._listener.set(i,ss(i.onDidChangeCursorPosition(e=>this._onDidChange.fire({editor:i})),i.onDidChangeModelContent(e=>this._onDidChange.fire({editor:i}))))}_onDidRemoveEditor(i){var e;(e=this._listener.get(i))===null||e===void 0||e.dispose(),this._listener.delete(i)}};M6=zse([h1(0,Ft)],M6);var Vse=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function YC(i,e,t,n){let o=t.ordered(i).map(r=>Promise.resolve(n(r,i,e)).then(void 0,s=>{Fn(s)}));return Promise.all(o).then(r=>{let s=[];for(let a of r)Array.isArray(a)?s.push(...a):a&&s.push(a);return s})}function AJ(i,e,t,n){return YC(e,t,i,(o,r,s)=>o.provideDefinition(r,s,n))}function Use(i,e,t,n){return YC(e,t,i,(o,r,s)=>o.provideDeclaration(r,s,n))}function Qse(i,e,t,n){return YC(e,t,i,(o,r,s)=>o.provideImplementation(r,s,n))}function jse(i,e,t,n){return YC(e,t,i,(o,r,s)=>o.provideTypeDefinition(r,s,n))}function lN(i,e,t,n,o){return YC(e,t,i,(r,s,a)=>Vse(this,void 0,void 0,function*(){let l=yield r.provideReferences(s,a,{includeDeclaration:!0},o);if(!n||!l||l.length!==2)return l;let c=yield r.provideReferences(s,a,{includeDeclaration:!1},o);return c&&c.length===1?c:l}))}function JC(i){return Vse(this,void 0,void 0,function*(){let e=yield i(),t=new Bs(e,""),n=t.references.map(o=>o.link);return t.dispose(),n})}mc("_executeDefinitionProvider",(i,e,t)=>{let n=i.get(Te),o=AJ(n.definitionProvider,e,t,et.None);return JC(()=>o)});mc("_executeTypeDefinitionProvider",(i,e,t)=>{let n=i.get(Te),o=jse(n.typeDefinitionProvider,e,t,et.None);return JC(()=>o)});mc("_executeDeclarationProvider",(i,e,t)=>{let n=i.get(Te),o=Use(n.declarationProvider,e,t,et.None);return JC(()=>o)});mc("_executeReferenceProvider",(i,e,t)=>{let n=i.get(Te),o=lN(n.referenceProvider,e,t,!1,et.None);return JC(()=>o)});mc("_executeImplementationProvider",(i,e,t)=>{let n=i.get(Te),o=Qse(n.implementationProvider,e,t,et.None);return JC(()=>o)});var fa=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},bR,wR,CR,yR,SR,DR,xR,kR;Ds.appendMenuItem(z.EditorContext,{submenu:z.EditorContextPeek,title:m("peek.submenu","Peek"),group:"navigation",order:100});var Kse=new Set;function hl(i){let e=new i;return _oe(e),Kse.add(e.id),e}var qb=class i{constructor(e,t){this.model=e,this.position=t}static is(e){return!e||typeof e!="object"?!1:!!(e instanceof i||q.isIPosition(e.position)&&e.model)}},lc=class i extends Ie{constructor(e,t){super(t),this.configuration=e}run(e,t,n){if(!t.hasModel())return Promise.resolve(void 0);let o=e.get(nn),r=e.get(Ft),s=e.get(bu),a=e.get(aN),l=e.get(Te),c=t.getModel(),d=t.getPosition(),h=qb.is(n)?n:new qb(c,d),u=new Ed(t,5),g=fY(this._getLocationModel(l,h.model,h.position,u.token),u.token).then(p=>fa(this,void 0,void 0,function*(){var f;if(!p||u.token.isCancellationRequested)return;co(p.ariaMessage);let v;if(p.referenceAt(c.uri,d)){let A=this._getAlternativeCommand(t);!i._activeAlternativeCommands.has(A)&&Kse.has(A)&&(v=t.getAction(A))}let b=p.references.length;if(b===0){if(!this.configuration.muteMessage){let A=c.getWordAtPosition(d);(f=Wr.get(t))===null||f===void 0||f.showMessage(this._getNoResultFoundMessage(A),d)}}else if(b===1&&v)i._activeAlternativeCommands.add(this.id),v.run().finally(()=>{i._activeAlternativeCommands.delete(this.id)});else return this._onResult(r,a,t,p)}),p=>{o.error(p)}).finally(()=>{u.dispose()});return s.showWhile(g,250),g}_onResult(e,t,n,o){return fa(this,void 0,void 0,function*(){let r=this._getGoToPreference(n);if(!(n instanceof _p)&&(this.configuration.openInPeek||r==="peek"&&o.references.length>1))this._openInPeek(n,o);else{let s=o.firstReference(),a=o.references.length>1&&r==="gotoAndPeek",l=yield this._openReference(n,e,s,this.configuration.openToSide,!a);a&&l?this._openInPeek(l,o):o.dispose(),r==="goto"&&t.put(s)}})}_openReference(e,t,n,o,r){return fa(this,void 0,void 0,function*(){let s;if(Bfe(n)&&(s=n.targetSelectionRange),s||(s=n.range),!s)return;let a=yield t.openCodeEditor({resource:n.uri,options:{selection:E.collapseToStart(s),selectionRevealType:3,selectionSource:"code.jump"}},e,o);if(a){if(r){let l=a.getModel(),c=a.createDecorationsCollection([{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}})}_openInPeek(e,t){let n=nu.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),Gn(o=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};lc._activeAlternativeCommands=new Set;var Sp=class extends lc{_getLocationModel(e,t,n,o){return fa(this,void 0,void 0,function*(){return new Bs(yield AJ(e.definitionProvider,t,n,o),m("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?m("noResultWord","No definition found for '{0}'",e.word):m("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(53).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(53).multipleDefinitions}},qse=gc&&!YG()?2118:70;hl((bR=class N6 extends Sp{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:N6.id,label:m("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:we.and(B.hasDefinitionProvider,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:qse,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),ft.registerCommandAlias("editor.action.goToDeclaration",N6.id)}},bR.id="editor.action.revealDefinition",bR));hl((wR=class R6 extends Sp{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:R6.id,label:m("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:we.and(B.hasDefinitionProvider,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,qse),weight:100}}),ft.registerCommandAlias("editor.action.openDeclarationToTheSide",R6.id)}},wR.id="editor.action.revealDefinitionAside",wR));hl((CR=class F6 extends Sp{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:F6.id,label:m("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:we.and(B.hasDefinitionProvider,xr.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:z.EditorContextPeek,group:"peek",order:2}}),ft.registerCommandAlias("editor.action.previewDeclaration",F6.id)}},CR.id="editor.action.peekDefinition",CR));var vE=class extends lc{_getLocationModel(e,t,n,o){return fa(this,void 0,void 0,function*(){return new Bs(yield Use(e.declarationProvider,t,n,o),m("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(53).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(53).multipleDeclarations}};hl((yR=class $se extends vE{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:$se.id,label:m("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:we.and(B.hasDeclarationProvider,B.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}},yR.id="editor.action.revealDeclaration",yR));hl(class extends vE{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:m("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:we.and(B.hasDeclarationProvider,xr.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:z.EditorContextPeek,group:"peek",order:3}})}});var AE=class extends lc{_getLocationModel(e,t,n,o){return fa(this,void 0,void 0,function*(){return new Bs(yield jse(e.typeDefinitionProvider,t,n,o),m("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?m("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):m("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(53).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(53).multipleTypeDefinitions}};hl((SR=class Gse extends AE{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Gse.ID,label:m("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:we.and(B.hasTypeDefinitionProvider,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},SR.ID="editor.action.goToTypeDefinition",SR));hl((DR=class Yse extends AE{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Yse.ID,label:m("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:we.and(B.hasTypeDefinitionProvider,xr.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:z.EditorContextPeek,group:"peek",order:4}})}},DR.ID="editor.action.peekTypeDefinition",DR));var bE=class extends lc{_getLocationModel(e,t,n,o){return fa(this,void 0,void 0,function*(){return new Bs(yield Qse(e.implementationProvider,t,n,o),m("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?m("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):m("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(53).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(53).multipleImplementations}};hl((xR=class Jse extends bE{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Jse.ID,label:m("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:we.and(B.hasImplementationProvider,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},xR.ID="editor.action.goToImplementation",xR));hl((kR=class Xse extends bE{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Xse.ID,label:m("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:we.and(B.hasImplementationProvider,xr.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:z.EditorContextPeek,group:"peek",order:5}})}},kR.ID="editor.action.peekImplementation",kR));var wE=class extends lc{_getNoResultFoundMessage(e){return e?m("references.no","No references found for '{0}'",e.word):m("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(53).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(53).multipleReferences}};hl(class extends wE{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:m("goToReferences.label","Go to References"),alias:"Go to References",precondition:we.and(B.hasReferenceProvider,xr.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:B.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(i,e,t,n){return fa(this,void 0,void 0,function*(){return new Bs(yield lN(i.referenceProvider,e,t,!0,n),m("ref.title","References"))})}});hl(class extends wE{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:m("references.action.label","Peek References"),alias:"Peek References",precondition:we.and(B.hasReferenceProvider,xr.notInPeekEditor,B.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:z.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(i,e,t,n){return fa(this,void 0,void 0,function*(){return new Bs(yield lN(i.referenceProvider,e,t,!1,n),m("ref.title","References"))})}});var B6=class extends lc{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:m("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:we.and(xr.notInPeekEditor,B.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n,o){return fa(this,void 0,void 0,function*(){return new Bs(this._references,m("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&m("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(53).multipleReferences}_getAlternativeCommand(){return""}};ft.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:$},{name:"position",description:"The position at which to start",constraint:q.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(i,e,t,n,o,r,s)=>fa(void 0,void 0,void 0,function*(){ai($.isUri(e)),ai(q.isIPosition(t)),ai(Array.isArray(n)),ai(typeof o>"u"||typeof o=="string"),ai(typeof s>"u"||typeof s=="boolean");let a=i.get(Ft),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(nc(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{let d=new class extends B6{_getNoResultFoundMessage(h){return r||super._getNoResultFoundMessage(h)}}({muteMessage:!r,openInPeek:!!s,openToSide:!1},n,o);c.get(tt).invokeFunction(d.run.bind(d),l)})})});ft.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:$},{name:"position",description:"The position at which to start",constraint:q.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(i,e,t,n,o)=>fa(void 0,void 0,void 0,function*(){i.get(ji).executeCommand("editor.action.goToLocations",e,t,n,o,void 0,!0)})});ft.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{ai($.isUri(e)),ai(q.isIPosition(t));let n=i.get(Te),o=i.get(Ft);return o.openCodeEditor({resource:e},o.getFocusedCodeEditor()).then(r=>{if(!nc(r)||!r.hasModel())return;let s=nu.get(r);if(!s)return;let a=Gn(c=>lN(n.referenceProvider,r.getModel(),q.lift(t),!1,c).then(d=>new Bs(d,m("ref.title","References")))),l=new E(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(s.toggleWidget(l,a,!1))})}});ft.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Ds.appendMenuItems([{id:z.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:m({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:z.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:m({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:z.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:m({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:z.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:m({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:z.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:m({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var yAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},ER=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Dp=class PS{constructor(e,t,n,o){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=o,this.toUnhook=new ne,this.toUnhookForKeyboard=new ne,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();let r=new Mb(e);this.toUnhook.add(r),this.toUnhook.add(r.onMouseMoveOrRelevantKeyDown(([s,a])=>{this.startFindDefinitionFromMouse(s,tr(a))})),this.toUnhook.add(r.onExecute(s=>{this.isEnabled(s)&&this.gotoDefinition(s.target.position,s.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},a=>{this.removeLinkDecorations(),Ye(a)})})),this.toUnhook.add(r.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(PS.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}let n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();let n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let o=new xb(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Gn(r=>this.findDefinition(e,r)),this.previousPromise.then(r=>{if(!r||!r.length||!o.validate(this.editor)){this.removeLinkDecorations();return}if(r.length>1)this.addDecoration(new E(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Zo().appendText(m("multipleResults","Click to show {0} definitions.",r.length)));else{let s=r[0];if(!s.uri)return;this.textModelResolverService.createModelReference(s.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}let{object:{textEditorModel:l}}=a,{startLineNumber:c}=s.range;if(c<1||c>l.getLineCount()){a.dispose();return}let d=this.getPreviewValue(l,c,s),h;s.originSelectionRange?h=E.lift(s.originSelectionRange):h=new E(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);let u=this.languageService.guessLanguageIdByFilepathOrFirstLine(l.uri);this.addDecoration(h,new Zo().appendCodeblock(u||"",d)),a.dispose()})}}).then(void 0,Ye)}getPreviewValue(e,t,n){let o=n.range;return o.endLineNumber-o.startLineNumber>=PS.MAX_SOURCE_PREVIEW_LINES&&(o=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,o)}stripIndentationFromPreviewRange(e,t,n){let o=e.getLineFirstNonWhitespaceColumn(t);for(let r=t+1;r<n.endLineNumber;r++){let s=e.getLineFirstNonWhitespaceColumn(r);o=Math.min(o,s)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){let n=e.getLineFirstNonWhitespaceColumn(t),o=Math.min(e.getLineCount(),t+PS.MAX_SOURCE_PREVIEW_LINES),r=t+1;for(;r<o;r++){let s=e.getLineFirstNonWhitespaceColumn(r);if(n===s)break}return new E(t,1,r+1,1)}addDecoration(e,t){let n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){let n=this.editor.getModel();return n?AJ(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{let o=!t&&this.editor.getOption(80)&&!this.isInPeekEditor(n);return new Sp({openToSide:t,openInPeek:o,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){let t=e.get(Ze);return xr.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};Dp.ID="editor.contrib.gotodefinitionatposition";Dp.MAX_SOURCE_PREVIEW_LINES=8;Dp=yAe([ER(1,io),ER(2,ki),ER(3,Te)],Dp);Wt(Dp.ID,Dp);xi((i,e)=>{let t=i.getColor(IY);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});var Ry=ge,CE=class extends J{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new ap(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}},P6=class i extends J{constructor(e,t,n){super(),this.actionContainer=ae(e,Ry("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=ae(this.actionContainer,Ry("a.action")),this.action.setAttribute("role","button"),t.iconClass&&ae(this.action,Ry(`span.icon.${t.iconClass}`));let o=ae(this.action,Ry("span"));o.textContent=n?`${t.label} (${n})`:t.label,this._register(le(this.actionContainer,Ee.CLICK,r=>{r.stopPropagation(),r.preventDefault(),t.run(this.actionContainer)})),this._register(le(this.actionContainer,Ee.KEY_UP,r=>{new ni(r).equals(3)&&(r.stopPropagation(),r.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}static render(e,t,n){return new i(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}},SAe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},DAe=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(s){return new Promise(function(a,l){s=i[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},s)}},O6=class{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}},yE=class extends J{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new Q),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new jt(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new jt(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new jt(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(55).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=fpe(e=>this._computer.computeAsync(e)),SAe(this,void 0,void 0,function*(){var e,t;try{try{for(var n=DAe(this._asyncIterable),o;o=yield n.next(),!o.done;){let r=o.value;r&&(this._result.push(r),this._fireResult())}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(r){Ye(r)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;let e=this._state===0,t=this._state===4;this._onResult.fire(new O6(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}},j1=class{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}},Zf=class{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}},hm=new class{constructor(){this._participants=[]}register(i){this._participants.push(i)}getAll(){return this._participants}},SE=class i{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),o;if(o=i._table[n],typeof o=="number")return this.pos+=1,{type:o,pos:e,len:1};if(i.isDigitCharacter(n)){o=8;do t+=1,n=this.value.charCodeAt(e+t);while(i.isDigitCharacter(n));return this.pos+=t,{type:o,pos:e,len:t}}if(i.isVariableCharacter(n)){o=9;do n=this.value.charCodeAt(e+ ++t);while(i.isVariableCharacter(n)||i.isDigitCharacter(n));return this.pos+=t,{type:o,pos:e,len:t}}o=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof i._table[n]>"u"&&!i.isDigitCharacter(n)&&!i.isVariableCharacter(n));return this.pos+=t,{type:o,pos:e,len:t}}};SE._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};var ou=class{constructor(){this._children=[]}appendChild(e){return e instanceof fr&&this._children[this._children.length-1]instanceof fr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){let{parent:n}=e,o=n.children.indexOf(e),r=n.children.slice(0);r.splice(o,1,...t),n._children=r,function s(a,l){for(let c of a)c.parent=l,s(c.children,c)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Gb)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}},fr=class i extends ou{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new i(this.value)}},DE=class extends ou{},oa=class i extends DE{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof l0?this._children[0]:void 0}clone(){let e=new i(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}},l0=class i extends ou{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof fr&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new i;return this.options.forEach(e.appendChild,e),e}},H6=class i extends ou{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){let t=this,n=!1,o=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(r=>r instanceof Oa&&!!r.elseValue)&&(o=this._replace([])),o}_replace(e){let t="";for(let n of this._children)if(n instanceof Oa){let o=e[n.index]||"";o=n.resolve(o),t+=o}else t+=n.toString();return t}toString(){return""}clone(){let e=new i;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}},Oa=class i extends ou{constructor(e,t,n,o){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=o}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}_toCamelCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map((n,o)=>o===0?n.charAt(0).toLowerCase()+n.substr(1):n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}clone(){return new i(this.index,this.shorthandName,this.ifValue,this.elseValue)}},$b=class i extends DE{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new fr(t)],!0):!1}clone(){let e=new i(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}};function Nee(i,e){let t=[...i];for(;t.length>0;){let n=t.shift();if(!e(n))break;t.unshift(...n.children)}}var Gb=class i extends ou{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof oa&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(o=>o===e?(n=!0,!1):(t+=o.len(),!0)),n?t:-1}fullLen(e){let t=0;return Nee([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof oa&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof $b&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new i;return this._children=this.children.map(t=>t.clone()),e}walk(e){Nee(this.children,e)}},Ps=class{constructor(){this._scanner=new SE,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){let o=new Gb;return this.parseFragment(e,o),this.ensureFinalTabstop(o,n??!1,t??!1),o}parseFragment(e,t){let n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););let o=new Map,r=[];t.walk(s=>(s instanceof oa&&(s.isFinalTabstop?o.set(0,void 0):!o.has(s.index)&&s.children.length>0?o.set(s.index,s.children):r.push(s)),!0));for(let s of r){let a=o.get(s.index);if(a){let l=new oa(s.index);l.transform=s.transform;for(let c of a)l.appendChild(c.clone());t.replace(s,[l])}}return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(o=>o.index===0)||e.appendChild(new oa(0)))}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let o=this._scanner.next();if(o.type!==0&&o.type!==4&&o.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new fr(t)),!0):!1}_parseTabstopOrVariableName(e){let t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new oa(Number(t)):new $b(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);let o=new oa(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new fr("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let r=new l0;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(r),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let o;if((o=this._accept(5,!0))?o=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||o:o=this._accept(void 0,!0),!o)return this._backTo(t),!1;n.push(o)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new fr(n.join(""))),!0)}_parseComplexVariable(e){let t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);let o=new $b(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new fr("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let t=new H6,n="",o="";for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(6,!0)||r,n+=r;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(5,!0)||this._accept(6,!0)||r,t.appendChild(new fr(r));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){o+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,o)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){let t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let o=this._accept(8,!0);if(o)if(n){if(this._accept(4))return e.appendChild(new Oa(Number(o))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Oa(Number(o))),!0;else return this._backTo(t),!1;if(this._accept(6)){let r=this._accept(9,!0);return!r||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Oa(Number(o),r)),!0)}else if(this._accept(11)){let r=this._until(4);if(r)return e.appendChild(new Oa(Number(o),void 0,r,void 0)),!0}else if(this._accept(12)){let r=this._until(4);if(r)return e.appendChild(new Oa(Number(o),void 0,void 0,r)),!0}else if(this._accept(13)){let r=this._until(1);if(r){let s=this._until(4);if(s)return e.appendChild(new Oa(Number(o),void 0,r,s)),!0}}else{let r=this._until(4);if(r)return e.appendChild(new Oa(Number(o),void 0,void 0,r)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new fr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}},xAe=m("defaultLabel","input"),kAe=m("label.preserveCaseToggle","Preserve Case"),W6=class extends vp{constructor(e){super({icon:_.preserveCase,title:kAe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},z6=class extends hs{constructor(e,t,n,o){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new Q),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Q),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Q),this._onInput=this._register(new Q),this._onKeyUp=this._register(new Q),this._onPreserveCaseKeyDown=this._register(new Q),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=o.placeholder||"",this.validation=o.validation,this.label=o.label||xAe,this.inputActiveOptionBorder=o.inputActiveOptionBorder,this.inputActiveOptionForeground=o.inputActiveOptionForeground,this.inputActiveOptionBackground=o.inputActiveOptionBackground,this.inputBackground=o.inputBackground,this.inputForeground=o.inputForeground,this.inputBorder=o.inputBorder,this.inputValidationInfoBorder=o.inputValidationInfoBorder,this.inputValidationInfoBackground=o.inputValidationInfoBackground,this.inputValidationInfoForeground=o.inputValidationInfoForeground,this.inputValidationWarningBorder=o.inputValidationWarningBorder,this.inputValidationWarningBackground=o.inputValidationWarningBackground,this.inputValidationWarningForeground=o.inputValidationWarningForeground,this.inputValidationErrorBorder=o.inputValidationErrorBorder,this.inputValidationErrorBackground=o.inputValidationErrorBackground,this.inputValidationErrorForeground=o.inputValidationErrorForeground;let r=o.appendPreserveCaseLabel||"",s=o.history||[],a=!!o.flexibleHeight,l=!!o.flexibleWidth,c=o.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new sE(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:s,showHistoryHint:o.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c})),this.preserveCase=this._register(new W6({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(u=>{this._onDidOptionChange.fire(u),!u&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(u=>{this._onPreserveCaseKeyDown.fire(u)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let d=[this.preserveCase.domNode];this.onkeydown(this.domNode,u=>{if(u.equals(15)||u.equals(17)||u.equals(9)){let g=d.indexOf(document.activeElement);if(g>=0){let p=-1;u.equals(17)?p=(g+1)%d.length:u.equals(15)&&(g===0?p=d.length-1:p=g-1),u.equals(9)?(d[g].blur(),this.inputBox.focus()):p>=0&&d[p].focus(),ii.stop(u,!0)}}});let h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){let e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);let t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}},Zse=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},eae=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},bJ=new Le("suggestWidgetVisible",!1,m("suggestWidgetVisible","Whether suggestion are visible")),wJ="historyNavigationWidgetFocus",tae="historyNavigationForwardsEnabled",iae="historyNavigationBackwardsEnabled",Fg,Fy=[];function nae(i,e){if(Fy.includes(e))throw new Error("Cannot register the same widget multiple times");Fy.push(e);let t=new ne,n=t.add(i.createScoped(e.element)),o=new Le(wJ,!1).bindTo(n),r=new Le(tae,!0).bindTo(n),s=new Le(iae,!0).bindTo(n),a=()=>{o.set(!0),Fg=e},l=()=>{o.set(!1),Fg===e&&(Fg=void 0)};return e.element===document.activeElement&&a(),t.add(e.onDidFocus(()=>a())),t.add(e.onDidBlur(()=>l())),t.add(ct(()=>{Fy.splice(Fy.indexOf(e),1),l()})),{scopedContextKeyService:n,historyNavigationForwardsEnablement:r,historyNavigationBackwardsEnablement:s,dispose(){t.dispose()}}}var V6=class extends z8{constructor(i,e,t,n,o=!1){super(i,e,o,t),this._register(nae(n,this.inputBox))}};V6=Zse([eae(3,Ze)],V6);var U6=class extends z6{constructor(i,e,t,n,o=!1){super(i,e,o,t),this._register(nae(n,this.inputBox))}};U6=Zse([eae(3,Ze)],U6);Vr.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:we.and(we.has(wJ),we.equals(iae,!0),bJ.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{Fg&&Fg.showPreviousValue()}});Vr.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:we.and(we.has(wJ),we.equals(tae,!0),bJ.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{Fg&&Fg.showNextValue()}});var K1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},St={Visible:bJ,HasFocusedSuggestion:new Le("suggestWidgetHasFocusedSuggestion",!1,m("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new Le("suggestWidgetDetailsVisible",!1,m("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Le("suggestWidgetMultipleSuggestions",!1,m("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Le("suggestionMakesTextEdit",!0,m("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Le("acceptSuggestionOnEnter",!0,m("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Le("suggestionHasInsertAndReplaceRange",!1,m("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Le("suggestionInsertMode",void 0,{type:"string",description:m("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Le("suggestionCanResolve",!1,m("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Eh=new z("suggestWidgetStatusBar"),EAe=class{constructor(i,e,t,n){this.position=i,this.completion=e,this.container=t,this.provider=n,this.isInvalid=!1,this.score=Ja.Default,this.distance=0,this.textLabel=typeof e.label=="string"?e.label:e.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=e.sortText&&e.sortText.toLowerCase(),this.filterTextLow=e.filterText&&e.filterText.toLowerCase(),this.extensionId=e.extensionId,E.isIRange(e.range)?(this.editStart=new q(e.range.startLineNumber,e.range.startColumn),this.editInsertEnd=new q(e.range.endLineNumber,e.range.endColumn),this.editReplaceEnd=new q(e.range.endLineNumber,e.range.endColumn),this.isInvalid=this.isInvalid||E.spansMultipleLines(e.range)||e.range.startLineNumber!==i.lineNumber):(this.editStart=new q(e.range.insert.startLineNumber,e.range.insert.startColumn),this.editInsertEnd=new q(e.range.insert.endLineNumber,e.range.insert.endColumn),this.editReplaceEnd=new q(e.range.replace.endLineNumber,e.range.replace.endColumn),this.isInvalid=this.isInvalid||E.spansMultipleLines(e.range.insert)||E.spansMultipleLines(e.range.replace)||e.range.insert.startLineNumber!==i.lineNumber||e.range.replace.startLineNumber!==i.lineNumber||e.range.insert.startColumn!==e.range.replace.startColumn),typeof n.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(i){return K1(this,void 0,void 0,function*(){if(!this._resolveCache){let e=i.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,i)).then(t=>{Object.assign(this.completion,t),this._isResolved=!0,e.dispose()},t=>{Ls(t)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}},xp=class{constructor(e=2,t=new Set,n=new Set,o=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=o}};xp.default=new xp;var LAe;function IAe(){return LAe}var Q6=class{constructor(e,t,n,o){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=o}};function CJ(i,e,t,n=xp.default,o={triggerKind:0},r=et.None){return K1(this,void 0,void 0,function*(){let s=new sr(!0);t=t.clone();let a=e.getWordAtPosition(t),l=a?new E(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):E.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],h=new ne,u=[],g=!1,p=(v,b,A)=>{var w,C,k;let L=!1;if(!b)return L;for(let S of b.suggestions)if(!n.kindFilter.has(S.kind)){if(!n.showDeprecated&&!((w=S?.tags)===null||w===void 0)&&w.includes(1))continue;S.range||(S.range=c),S.sortText||(S.sortText=typeof S.label=="string"?S.label:S.label.label),!g&&S.insertTextRules&&S.insertTextRules&4&&(g=Ps.guessNeedsClipboard(S.insertText)),d.push(new EAe(t,S,b,v)),L=!0}return UG(b)&&h.add(b),u.push({providerName:(C=v._debugDisplayName)!==null&&C!==void 0?C:"unknown_provider",elapsedProvider:(k=b.duration)!==null&&k!==void 0?k:-1,elapsedOverall:A.elapsed()}),L},f=(()=>K1(this,void 0,void 0,function*(){}))();for(let v of i.orderedGroups(e)){let b=!1;if(yield Promise.all(v.map(A=>K1(this,void 0,void 0,function*(){if(!(n.providerFilter.size>0&&!n.providerFilter.has(A)))try{let w=new sr(!0),C=yield A.provideCompletionItems(e,t,o,r);b=p(A,C,w)||b}catch(w){Fn(w)}}))),b||r.isCancellationRequested)break}return yield f,r.isCancellationRequested?(h.dispose(),Promise.reject(new ya)):new Q6(d.sort(oae(n.snippetSortOrder)),g,{entries:u,elapsed:s.elapsed()},h)})}function yJ(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.textLabel<e.textLabel?-1:i.textLabel>e.textLabel?1:i.completion.kind-e.completion.kind}function TAe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return yJ(i,e)}function MAe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return yJ(i,e)}var cN=new Map;cN.set(0,TAe);cN.set(2,MAe);cN.set(1,yJ);function oae(i){return cN.get(i)}ft.registerCommand("_executeCompletionItemProvider",(i,...e)=>K1(void 0,void 0,void 0,function*(){let[t,n,o,r]=e;ai($.isUri(t)),ai(q.isIPosition(n)),ai(typeof o=="string"||!o),ai(typeof r=="number"||!r);let{completionProvider:s}=i.get(Te),a=yield i.get(io).createModelReference(t);try{let l={incomplete:!1,suggestions:[]},c=[],d=yield CJ(s,a.object.textEditorModel,q.lift(n),void 0,{triggerCharacter:o,triggerKind:o?1:0});for(let h of d.items)c.length<(r??0)&&c.push(h.resolve(et.None)),l.incomplete=l.incomplete||h.container.incomplete,l.suggestions.push(h.completion);try{return yield Promise.all(c),l}finally{setTimeout(()=>d.disposable.dispose(),100)}}finally{a.dispose()}}));function NAe(i,e){var t;(t=i.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}var fh=class{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}},SJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},xE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Ree=ge,kE=class j6 extends J{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._widget=this._register(this._instantiationService.createInstance(Bg,this._editor)),this._isChangingDecorations=!1,this._messages=[],this._messagesAreComplete=!1,this._participants=[];for(let o of hm.getAll())this._participants.push(this._instantiationService.createInstance(o,this._editor));this._participants.sort((o,r)=>o.hoverOrdinal-r.hoverOrdinal),this._computer=new $6(this._editor,this._participants),this._hoverOperation=this._register(new yE(this._editor,this._computer)),this._register(this._hoverOperation.onResult(o=>{this._withResult(o.value,o.isComplete,o.hasLoadingMessage)})),this._register(this._editor.onDidChangeModelDecorations(()=>{this._isChangingDecorations||this._onModelDecorationsChanged()})),this._register(Tn(this._widget.getDomNode(),"keydown",o=>{o.equals(9)&&this.hide()})),this._register(Ui.onDidChange(()=>{this._widget.position&&this._computer.anchor&&this._messages.length>0&&(this._widget.clear(),this._renderMessages(this._computer.anchor,this._messages))}))}_onModelDecorationsChanged(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}maybeShowAt(e){let t=[];for(let o of this._participants)if(o.suggestHoverAnchor){let r=o.suggestHoverAnchor(e);r&&t.push(r)}let n=e.target;if(n.type===6&&t.push(new j1(0,n.range)),n.type===7){let o=this._editor.getOption(46).typicalHalfwidthCharacterWidth/2;!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText=="number"&&n.detail.horizontalDistanceToText<o&&t.push(new j1(0,n.range))}return t.length===0?!1:(t.sort((o,r)=>r.priority-o.priority),this._startShowingAt(t[0],0,!1),!0)}startShowingAtRange(e,t,n){this._startShowingAt(new j1(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._computer.anchor&&this._computer.anchor.equals(e))){if(this._hoverOperation.cancel(),this._widget.position)if(!this._computer.anchor||!e.canAdoptVisibleHover(this._computer.anchor,this._widget.position))this.hide();else{let o=this._messages.filter(r=>r.isValidForHoverAnchor(e));if(o.length===0)this.hide();else{if(o.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,o)}}this._computer.anchor=e,this._computer.shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}isColorPickerVisible(){return this._widget.isColorPickerVisible}containsNode(e){return this._widget.getDomNode().contains(e)}_addLoadingMessage(e){if(this._computer.anchor){for(let t of this._participants)if(t.createLoadingMessage){let n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}}return e}_withResult(e,t,n){this._messages=n?this._addLoadingMessage(e):e,this._messagesAreComplete=t,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):t&&this.hide()}_renderMessages(e,t){let{showAtPosition:n,showAtRange:o,highlightRange:r}=j6.computeHoverRanges(e.range,t),s=new ne,a=s.add(new q6(this._keybindingService)),l=document.createDocumentFragment(),c=null,d={fragment:l,statusBar:a,setColorPicker:h=>c=h,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(let h of this._participants){let u=t.filter(g=>g.owner===h);u.length>0&&s.add(h.renderHoverParts(d,u))}if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(r){let h=this._editor.createDecorationsCollection();try{this._isChangingDecorations=!0,h.set([{range:r,options:j6._DECORATION_OPTIONS}])}finally{this._isChangingDecorations=!1}s.add(ct(()=>{try{this._isChangingDecorations=!0,h.clear()}finally{this._isChangingDecorations=!1}}))}this._widget.showAt(l,new K6(c,n,o,this._editor.getOption(55).above,this._computer.shouldFocus,s))}else s.dispose()}static computeHoverRanges(e,t){let n=e.startLineNumber,o=e.startColumn,r=e.endColumn,s=t[0].range,a=null;for(let l of t)s=E.plusRange(s,l.range),l.range.startLineNumber===n&&l.range.endLineNumber===n&&(o=Math.min(o,l.range.startColumn),r=Math.max(r,l.range.endColumn)),l.forceShowAtRange&&(a=l.range);return{showAtPosition:a?a.getStartPosition():new q(e.startLineNumber,o),showAtRange:a||new E(n,o,n,r),highlightRange:s}}};kE._DECORATION_OPTIONS=rt.register({description:"content-hover-highlight",className:"hoverHighlight"});kE=SJ([xE(1,tt),xE(2,An)],kE);var K6=class{constructor(e,t,n,o,r,s){this.colorPicker=e,this.showAtPosition=t,this.showAtRange=n,this.preferAbove=o,this.stoleFocus=r,this.disposables=s}},Bg=class rae extends J{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this.allowEditorOverflow=!0,this._hoverVisibleKey=B.hoverVisible.bindTo(this._contextKeyService),this._hover=this._register(new CE),this._visibleData=null,this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(46)&&this._updateFont()})),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this)}get position(){var e,t;return(t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition)!==null&&t!==void 0?t:null}get isColorPickerVisible(){var e;return!!(!((e=this._visibleData)===null||e===void 0)&&e.colorPicker)}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return rae.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(St.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){let e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(46);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(e=>this._editor.applyFontInfo(e))}showAt(e,t){this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),t.colorPicker&&t.colorPicker.layout()}hide(){if(this._visibleData){let e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();let e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){let t=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==t&&(this._hover.contentsDomNode.style.paddingBottom=t,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}};Bg.ID="editor.contrib.contentHoverWidget";Bg=SJ([xE(1,Ze)],Bg);var q6=class extends J{constructor(i){super(),this._keybindingService=i,this._hasContent=!1,this.hoverElement=Ree("div.hover-row.status-bar"),this.actionsElement=ae(this.hoverElement,Ree("div.actions"))}get hasContent(){return this._hasContent}addAction(i){let e=this._keybindingService.lookupKeybinding(i.commandId),t=e?e.getLabel():null;return this._hasContent=!0,this._register(P6.render(this.actionsElement,i,t))}append(i){let e=ae(this.actionsElement,i);return this._hasContent=!0,e}};q6=SJ([xE(0,An)],q6);var $6=class i{constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1}get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}static _getLineDecorations(e,t){if(t.type!==1)return[];let n=e.getModel(),o=t.range.startLineNumber;if(o>n.getLineCount())return[];let r=n.getLineMaxColumn(o);return e.getLineDecorations(o).filter(s=>{if(s.options.isWholeLine)return!0;let a=s.range.startLineNumber===o?s.range.startColumn:1,l=s.range.endLineNumber===o?s.range.endColumn:r;if(s.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){let t=this._anchor;if(!this._editor.hasModel()||!t)return wr.EMPTY;let n=i._getLineDecorations(this._editor,t);return wr.merge(this._participants.map(o=>o.computeAsync?o.computeAsync(t,n,e):wr.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];let e=i._getLineDecorations(this._editor,this._anchor),t=[];for(let n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return Ns(t)}},sae={};(function(){function i(e,t){t(sae)}i.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof i=="function"&&i.amd?i(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(W,R){for(var I=0;I<R.length;I++){var T=R[I];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(W,T.key,T)}}function n(W,R,I){return R&&t(W.prototype,R),I&&t(W,I),Object.defineProperty(W,"prototype",{writable:!1}),W}function o(W,R){if(W){if(typeof W=="string")return r(W,R);var I=Object.prototype.toString.call(W).slice(8,-1);if(I==="Object"&&W.constructor&&(I=W.constructor.name),I==="Map"||I==="Set")return Array.from(W);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return r(W,R)}}function r(W,R){(R==null||R>W.length)&&(R=W.length);for(var I=0,T=new Array(R);I<R;I++)T[I]=W[I];return T}function s(W,R){var I=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(I)return(I=I.call(W)).next.bind(I);if(Array.isArray(W)||(I=o(W))||R&&W&&typeof W.length=="number"){I&&(W=I);var T=0;return function(){return T>=W.length?{done:!0}:{done:!1,value:W[T++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults=a();function l(W){e.defaults=W}var c=/[&<>"']/,d=/[&<>"']/g,h=/[<>"']|&(?!#?\w+;)/,u=/[<>"']|&(?!#?\w+;)/g,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},p=function(W){return g[W]};function f(W,R){if(R){if(c.test(W))return W.replace(d,p)}else if(h.test(W))return W.replace(u,p);return W}var v=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function b(W){return W.replace(v,function(R,I){return I=I.toLowerCase(),I==="colon"?":":I.charAt(0)==="#"?I.charAt(1)==="x"?String.fromCharCode(parseInt(I.substring(2),16)):String.fromCharCode(+I.substring(1)):""})}var A=/(^|[^\[])\^/g;function w(W,R){W=typeof W=="string"?W:W.source,R=R||"";var I={replace:function(T,F){return F=F.source||F,F=F.replace(A,"$1"),W=W.replace(T,F),I},getRegex:function(){return new RegExp(W,R)}};return I}var C=/[^\w:]/g,k=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function L(W,R,I){if(W){var T;try{T=decodeURIComponent(b(I)).replace(C,"").toLowerCase()}catch{return null}if(T.indexOf("javascript:")===0||T.indexOf("vbscript:")===0||T.indexOf("data:")===0)return null}R&&!k.test(I)&&(I=H(R,I));try{I=encodeURI(I).replace(/%25/g,"%")}catch{return null}return I}var S={},y=/^[^:]+:\/*[^/]*$/,M=/^([^:]+:)[\s\S]*$/,O=/^([^:]+:\/*[^/]*)[\s\S]*$/;function H(W,R){S[" "+W]||(y.test(W)?S[" "+W]=W+"/":S[" "+W]=ie(W,"/",!0)),W=S[" "+W];var I=W.indexOf(":")===-1;return R.substring(0,2)==="//"?I?R:W.replace(M,"$1")+R:R.charAt(0)==="/"?I?R:W.replace(O,"$1")+R:W+R}var D={exec:function(){}};function K(W){for(var R=1,I,T;R<arguments.length;R++){I=arguments[R];for(T in I)Object.prototype.hasOwnProperty.call(I,T)&&(W[T]=I[T])}return W}function oe(W,R){var I=W.replace(/\|/g,function(V,ee,Ce){for(var ve=!1,Me=ee;--Me>=0&&Ce[Me]==="\\";)ve=!ve;return ve?"|":" |"}),T=I.split(/ \|/),F=0;if(T[0].trim()||T.shift(),T.length>0&&!T[T.length-1].trim()&&T.pop(),T.length>R)T.splice(R);else for(;T.length<R;)T.push("");for(;F<T.length;F++)T[F]=T[F].trim().replace(/\\\|/g,"|");return T}function ie(W,R,I){var T=W.length;if(T===0)return"";for(var F=0;F<T;){var V=W.charAt(T-F-1);if(V===R&&!I)F++;else if(V!==R&&I)F++;else break}return W.slice(0,T-F)}function ce(W,R){if(W.indexOf(R[1])===-1)return-1;for(var I=W.length,T=0,F=0;F<I;F++)if(W[F]==="\\")F++;else if(W[F]===R[0])T++;else if(W[F]===R[1]&&(T--,T<0))return F;return-1}function se(W){W&&W.sanitize&&!W.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function _e(W,R){if(R<1)return"";for(var I="";R>1;)R&1&&(I+=W),R>>=1,W+=W;return I+W}function Ve(W,R,I,T){var F=R.href,V=R.title?f(R.title):null,ee=W[1].replace(/\\([\[\]])/g,"$1");if(W[0].charAt(0)!=="!"){T.state.inLink=!0;var Ce={type:"link",raw:I,href:F,title:V,text:ee,tokens:T.inlineTokens(ee,[])};return T.state.inLink=!1,Ce}return{type:"image",raw:I,href:F,title:V,text:f(ee)}}function Qe(W,R){var I=W.match(/^(\s+)(?:```)/);if(I===null)return R;var T=I[1];return R.split(`
`).map(function(F){var V=F.match(/^\s+/);if(V===null)return F;var ee=V[0];return ee.length>=T.length?F.slice(T.length):F}).join(`
`)}var pt=function(){function W(I){this.options=I||e.defaults}var R=W.prototype;return R.space=function(I){var T=this.rules.block.newline.exec(I);if(T&&T[0].length>0)return{type:"space",raw:T[0]}},R.code=function(I){var T=this.rules.block.code.exec(I);if(T){var F=T[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:T[0],codeBlockStyle:"indented",text:this.options.pedantic?F:ie(F,`
`)}}},R.fences=function(I){var T=this.rules.block.fences.exec(I);if(T){var F=T[0],V=Qe(F,T[3]||"");return{type:"code",raw:F,lang:T[2]?T[2].trim():T[2],text:V}}},R.heading=function(I){var T=this.rules.block.heading.exec(I);if(T){var F=T[2].trim();if(/#$/.test(F)){var V=ie(F,"#");(this.options.pedantic||!V||/ $/.test(V))&&(F=V.trim())}var ee={type:"heading",raw:T[0],depth:T[1].length,text:F,tokens:[]};return this.lexer.inline(ee.text,ee.tokens),ee}},R.hr=function(I){var T=this.rules.block.hr.exec(I);if(T)return{type:"hr",raw:T[0]}},R.blockquote=function(I){var T=this.rules.block.blockquote.exec(I);if(T){var F=T[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:T[0],tokens:this.lexer.blockTokens(F,[]),text:F}}},R.list=function(I){var T=this.rules.block.list.exec(I);if(T){var F,V,ee,Ce,ve,Me,at,Je,Ut,Lt,Pe,fi,_i=T[1].trim(),Jn=_i.length>1,N={type:"list",raw:"",ordered:Jn,start:Jn?+_i.slice(0,-1):"",loose:!1,items:[]};_i=Jn?"\\d{1,9}\\"+_i.slice(-1):"\\"+_i,this.options.pedantic&&(_i=Jn?_i:"[*+-]");for(var de=new RegExp("^( {0,3}"+_i+")((?:[	 ][^\\n]*)?(?:\\n|$))");I&&(fi=!1,!(!(T=de.exec(I))||this.rules.block.hr.test(I)));){if(F=T[0],I=I.substring(F.length),Je=T[2].split(`
`,1)[0],Ut=I.split(`
`,1)[0],this.options.pedantic?(Ce=2,Pe=Je.trimLeft()):(Ce=T[2].search(/[^ ]/),Ce=Ce>4?1:Ce,Pe=Je.slice(Ce),Ce+=T[1].length),Me=!1,!Je&&/^ *$/.test(Ut)&&(F+=Ut+`
`,I=I.substring(Ut.length+1),fi=!0),!fi)for(var He=new RegExp("^ {0,"+Math.min(3,Ce-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),ei=new RegExp("^ {0,"+Math.min(3,Ce-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)");I&&(Lt=I.split(`
`,1)[0],Je=Lt,this.options.pedantic&&(Je=Je.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(He.test(Je)||ei.test(I)));){if(Je.search(/[^ ]/)>=Ce||!Je.trim())Pe+=`
`+Je.slice(Ce);else if(!Me)Pe+=`
`+Je;else break;!Me&&!Je.trim()&&(Me=!0),F+=Lt+`
`,I=I.substring(Lt.length+1)}N.loose||(at?N.loose=!0:/\n *\n *$/.test(F)&&(at=!0)),this.options.gfm&&(V=/^\[[ xX]\] /.exec(Pe),V&&(ee=V[0]!=="[ ] ",Pe=Pe.replace(/^\[[ xX]\] +/,""))),N.items.push({type:"list_item",raw:F,task:!!V,checked:ee,loose:!1,text:Pe}),N.raw+=F}N.items[N.items.length-1].raw=F.trimRight(),N.items[N.items.length-1].text=Pe.trimRight(),N.raw=N.raw.trimRight();var It=N.items.length;for(ve=0;ve<It;ve++){this.lexer.state.top=!1,N.items[ve].tokens=this.lexer.blockTokens(N.items[ve].text,[]);var Li=N.items[ve].tokens.filter(function(qo){return qo.type==="space"}),fo=Li.every(function(qo){for(var La=qo.raw.split(""),cr=0,dr=s(La),qs;!(qs=dr()).done;){var vc=qs.value;if(vc===`
`&&(cr+=1),cr>1)return!0}return!1});!N.loose&&Li.length&&fo&&(N.loose=!0,N.items[ve].loose=!0)}return N}},R.html=function(I){var T=this.rules.block.html.exec(I);if(T){var F={type:"html",raw:T[0],pre:!this.options.sanitizer&&(T[1]==="pre"||T[1]==="script"||T[1]==="style"),text:T[0]};return this.options.sanitize&&(F.type="paragraph",F.text=this.options.sanitizer?this.options.sanitizer(T[0]):f(T[0]),F.tokens=[],this.lexer.inline(F.text,F.tokens)),F}},R.def=function(I){var T=this.rules.block.def.exec(I);if(T){T[3]&&(T[3]=T[3].substring(1,T[3].length-1));var F=T[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:F,raw:T[0],href:T[2],title:T[3]}}},R.table=function(I){var T=this.rules.block.table.exec(I);if(T){var F={type:"table",header:oe(T[1]).map(function(at){return{text:at}}),align:T[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:T[3]&&T[3].trim()?T[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(F.header.length===F.align.length){F.raw=T[0];var V=F.align.length,ee,Ce,ve,Me;for(ee=0;ee<V;ee++)/^ *-+: *$/.test(F.align[ee])?F.align[ee]="right":/^ *:-+: *$/.test(F.align[ee])?F.align[ee]="center":/^ *:-+ *$/.test(F.align[ee])?F.align[ee]="left":F.align[ee]=null;for(V=F.rows.length,ee=0;ee<V;ee++)F.rows[ee]=oe(F.rows[ee],F.header.length).map(function(at){return{text:at}});for(V=F.header.length,Ce=0;Ce<V;Ce++)F.header[Ce].tokens=[],this.lexer.inline(F.header[Ce].text,F.header[Ce].tokens);for(V=F.rows.length,Ce=0;Ce<V;Ce++)for(Me=F.rows[Ce],ve=0;ve<Me.length;ve++)Me[ve].tokens=[],this.lexer.inline(Me[ve].text,Me[ve].tokens);return F}}},R.lheading=function(I){var T=this.rules.block.lheading.exec(I);if(T){var F={type:"heading",raw:T[0],depth:T[2].charAt(0)==="="?1:2,text:T[1],tokens:[]};return this.lexer.inline(F.text,F.tokens),F}},R.paragraph=function(I){var T=this.rules.block.paragraph.exec(I);if(T){var F={type:"paragraph",raw:T[0],text:T[1].charAt(T[1].length-1)===`
`?T[1].slice(0,-1):T[1],tokens:[]};return this.lexer.inline(F.text,F.tokens),F}},R.text=function(I){var T=this.rules.block.text.exec(I);if(T){var F={type:"text",raw:T[0],text:T[0],tokens:[]};return this.lexer.inline(F.text,F.tokens),F}},R.escape=function(I){var T=this.rules.inline.escape.exec(I);if(T)return{type:"escape",raw:T[0],text:f(T[1])}},R.tag=function(I){var T=this.rules.inline.tag.exec(I);if(T)return!this.lexer.state.inLink&&/^<a /i.test(T[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(T[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(T[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(T[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:T[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(T[0]):f(T[0]):T[0]}},R.link=function(I){var T=this.rules.inline.link.exec(I);if(T){var F=T[2].trim();if(!this.options.pedantic&&/^</.test(F)){if(!/>$/.test(F))return;var V=ie(F.slice(0,-1),"\\");if((F.length-V.length)%2===0)return}else{var ee=ce(T[2],"()");if(ee>-1){var Ce=T[0].indexOf("!")===0?5:4,ve=Ce+T[1].length+ee;T[2]=T[2].substring(0,ee),T[0]=T[0].substring(0,ve).trim(),T[3]=""}}var Me=T[2],at="";if(this.options.pedantic){var Je=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Me);Je&&(Me=Je[1],at=Je[3])}else at=T[3]?T[3].slice(1,-1):"";return Me=Me.trim(),/^</.test(Me)&&(this.options.pedantic&&!/>$/.test(F)?Me=Me.slice(1):Me=Me.slice(1,-1)),Ve(T,{href:Me&&Me.replace(this.rules.inline._escapes,"$1"),title:at&&at.replace(this.rules.inline._escapes,"$1")},T[0],this.lexer)}},R.reflink=function(I,T){var F;if((F=this.rules.inline.reflink.exec(I))||(F=this.rules.inline.nolink.exec(I))){var V=(F[2]||F[1]).replace(/\s+/g," ");if(V=T[V.toLowerCase()],!V||!V.href){var ee=F[0].charAt(0);return{type:"text",raw:ee,text:ee}}return Ve(F,V,F[0],this.lexer)}},R.emStrong=function(I,T,F){F===void 0&&(F="");var V=this.rules.inline.emStrong.lDelim.exec(I);if(V&&!(V[3]&&F.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var ee=V[1]||V[2]||"";if(!ee||ee&&(F===""||this.rules.inline.punctuation.exec(F))){var Ce=V[0].length-1,ve,Me,at=Ce,Je=0,Ut=V[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Ut.lastIndex=0,T=T.slice(-1*I.length+Ce);(V=Ut.exec(T))!=null;)if(ve=V[1]||V[2]||V[3]||V[4]||V[5]||V[6],!!ve){if(Me=ve.length,V[3]||V[4]){at+=Me;continue}else if((V[5]||V[6])&&Ce%3&&!((Ce+Me)%3)){Je+=Me;continue}if(at-=Me,!(at>0)){if(Me=Math.min(Me,Me+at+Je),Math.min(Ce,Me)%2){var Lt=I.slice(1,Ce+V.index+Me);return{type:"em",raw:I.slice(0,Ce+V.index+Me+1),text:Lt,tokens:this.lexer.inlineTokens(Lt,[])}}var Pe=I.slice(2,Ce+V.index+Me-1);return{type:"strong",raw:I.slice(0,Ce+V.index+Me+1),text:Pe,tokens:this.lexer.inlineTokens(Pe,[])}}}}}},R.codespan=function(I){var T=this.rules.inline.code.exec(I);if(T){var F=T[2].replace(/\n/g," "),V=/[^ ]/.test(F),ee=/^ /.test(F)&&/ $/.test(F);return V&&ee&&(F=F.substring(1,F.length-1)),F=f(F,!0),{type:"codespan",raw:T[0],text:F}}},R.br=function(I){var T=this.rules.inline.br.exec(I);if(T)return{type:"br",raw:T[0]}},R.del=function(I){var T=this.rules.inline.del.exec(I);if(T)return{type:"del",raw:T[0],text:T[2],tokens:this.lexer.inlineTokens(T[2],[])}},R.autolink=function(I,T){var F=this.rules.inline.autolink.exec(I);if(F){var V,ee;return F[2]==="@"?(V=f(this.options.mangle?T(F[1]):F[1]),ee="mailto:"+V):(V=f(F[1]),ee=V),{type:"link",raw:F[0],text:V,href:ee,tokens:[{type:"text",raw:V,text:V}]}}},R.url=function(I,T){var F;if(F=this.rules.inline.url.exec(I)){var V,ee;if(F[2]==="@")V=f(this.options.mangle?T(F[0]):F[0]),ee="mailto:"+V;else{var Ce;do Ce=F[0],F[0]=this.rules.inline._backpedal.exec(F[0])[0];while(Ce!==F[0]);V=f(F[0]),F[1]==="www."?ee="http://"+V:ee=V}return{type:"link",raw:F[0],text:V,href:ee,tokens:[{type:"text",raw:V,text:V}]}}},R.inlineText=function(I,T){var F=this.rules.inline.text.exec(I);if(F){var V;return this.lexer.state.inRawBlock?V=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(F[0]):f(F[0]):F[0]:V=f(this.options.smartypants?T(F[0]):F[0]),{type:"text",raw:F[0],text:V}}},W}(),ke={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:D,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};ke._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ke._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ke.def=w(ke.def).replace("label",ke._label).replace("title",ke._title).getRegex(),ke.bullet=/(?:[*+-]|\d{1,9}[.)])/,ke.listItemStart=w(/^( *)(bull) */).replace("bull",ke.bullet).getRegex(),ke.list=w(ke.list).replace(/bull/g,ke.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ke.def.source+")").getRegex(),ke._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ke._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ke.html=w(ke.html,"i").replace("comment",ke._comment).replace("tag",ke._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ke.paragraph=w(ke._paragraph).replace("hr",ke.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke._tag).getRegex(),ke.blockquote=w(ke.blockquote).replace("paragraph",ke.paragraph).getRegex(),ke.normal=K({},ke),ke.gfm=K({},ke.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ke.gfm.table=w(ke.gfm.table).replace("hr",ke.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke._tag).getRegex(),ke.gfm.paragraph=w(ke._paragraph).replace("hr",ke.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ke.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke._tag).getRegex(),ke.pedantic=K({},ke.normal,{html:w(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ke._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:D,paragraph:w(ke.normal._paragraph).replace("hr",ke.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ke.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var xe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:D,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:D,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};xe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",xe.punctuation=w(xe.punctuation).replace(/punctuation/g,xe._punctuation).getRegex(),xe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,xe.escapedEmSt=/\\\*|\\_/g,xe._comment=w(ke._comment).replace("(?:-->|$)","-->").getRegex(),xe.emStrong.lDelim=w(xe.emStrong.lDelim).replace(/punct/g,xe._punctuation).getRegex(),xe.emStrong.rDelimAst=w(xe.emStrong.rDelimAst,"g").replace(/punct/g,xe._punctuation).getRegex(),xe.emStrong.rDelimUnd=w(xe.emStrong.rDelimUnd,"g").replace(/punct/g,xe._punctuation).getRegex(),xe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,xe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,xe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,xe.autolink=w(xe.autolink).replace("scheme",xe._scheme).replace("email",xe._email).getRegex(),xe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,xe.tag=w(xe.tag).replace("comment",xe._comment).replace("attribute",xe._attribute).getRegex(),xe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,xe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,xe.link=w(xe.link).replace("label",xe._label).replace("href",xe._href).replace("title",xe._title).getRegex(),xe.reflink=w(xe.reflink).replace("label",xe._label).replace("ref",ke._label).getRegex(),xe.nolink=w(xe.nolink).replace("ref",ke._label).getRegex(),xe.reflinkSearch=w(xe.reflinkSearch,"g").replace("reflink",xe.reflink).replace("nolink",xe.nolink).getRegex(),xe.normal=K({},xe),xe.pedantic=K({},xe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:w(/^!?\[(label)\]\((.*?)\)/).replace("label",xe._label).getRegex(),reflink:w(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xe._label).getRegex()}),xe.gfm=K({},xe.normal,{escape:w(xe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),xe.gfm.url=w(xe.gfm.url,"i").replace("email",xe.gfm._extended_email).getRegex(),xe.breaks=K({},xe.gfm,{br:w(xe.br).replace("{2,}","*").getRegex(),text:w(xe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Et(W){return W.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Ri(W){var R="",I,T,F=W.length;for(I=0;I<F;I++)T=W.charCodeAt(I),Math.random()>.5&&(T="x"+T.toString(16)),R+="&#"+T+";";return R}var ci=function(){function W(I){this.tokens=[],this.tokens.links=Object.create(null),this.options=I||e.defaults,this.options.tokenizer=this.options.tokenizer||new pt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var T={block:ke.normal,inline:xe.normal};this.options.pedantic?(T.block=ke.pedantic,T.inline=xe.pedantic):this.options.gfm&&(T.block=ke.gfm,this.options.breaks?T.inline=xe.breaks:T.inline=xe.gfm),this.tokenizer.rules=T}W.lex=function(I,T){var F=new W(T);return F.lex(I)},W.lexInline=function(I,T){var F=new W(T);return F.inlineTokens(I)};var R=W.prototype;return R.lex=function(I){I=I.replace(/\r\n|\r/g,`
`),this.blockTokens(I,this.tokens);for(var T;T=this.inlineQueue.shift();)this.inlineTokens(T.src,T.tokens);return this.tokens},R.blockTokens=function(I,T){var F=this;T===void 0&&(T=[]),this.options.pedantic?I=I.replace(/\t/g,"    ").replace(/^ +$/gm,""):I=I.replace(/^( *)(\t+)/gm,function(at,Je,Ut){return Je+"    ".repeat(Ut.length)});for(var V,ee,Ce,ve;I;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(at){return(V=at.call({lexer:F},I,T))?(I=I.substring(V.raw.length),T.push(V),!0):!1}))){if(V=this.tokenizer.space(I)){I=I.substring(V.raw.length),V.raw.length===1&&T.length>0?T[T.length-1].raw+=`
`:T.push(V);continue}if(V=this.tokenizer.code(I)){I=I.substring(V.raw.length),ee=T[T.length-1],ee&&(ee.type==="paragraph"||ee.type==="text")?(ee.raw+=`
`+V.raw,ee.text+=`
`+V.text,this.inlineQueue[this.inlineQueue.length-1].src=ee.text):T.push(V);continue}if(V=this.tokenizer.fences(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.heading(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.hr(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.blockquote(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.list(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.html(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.def(I)){I=I.substring(V.raw.length),ee=T[T.length-1],ee&&(ee.type==="paragraph"||ee.type==="text")?(ee.raw+=`
`+V.raw,ee.text+=`
`+V.raw,this.inlineQueue[this.inlineQueue.length-1].src=ee.text):this.tokens.links[V.tag]||(this.tokens.links[V.tag]={href:V.href,title:V.title});continue}if(V=this.tokenizer.table(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.lheading(I)){I=I.substring(V.raw.length),T.push(V);continue}if(Ce=I,this.options.extensions&&this.options.extensions.startBlock&&function(){var at=1/0,Je=I.slice(1),Ut=void 0;F.options.extensions.startBlock.forEach(function(Lt){Ut=Lt.call({lexer:this},Je),typeof Ut=="number"&&Ut>=0&&(at=Math.min(at,Ut))}),at<1/0&&at>=0&&(Ce=I.substring(0,at+1))}(),this.state.top&&(V=this.tokenizer.paragraph(Ce))){ee=T[T.length-1],ve&&ee.type==="paragraph"?(ee.raw+=`
`+V.raw,ee.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ee.text):T.push(V),ve=Ce.length!==I.length,I=I.substring(V.raw.length);continue}if(V=this.tokenizer.text(I)){I=I.substring(V.raw.length),ee=T[T.length-1],ee&&ee.type==="text"?(ee.raw+=`
`+V.raw,ee.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ee.text):T.push(V);continue}if(I){var Me="Infinite loop on byte: "+I.charCodeAt(0);if(this.options.silent){console.error(Me);break}else throw new Error(Me)}}return this.state.top=!0,T},R.inline=function(I,T){this.inlineQueue.push({src:I,tokens:T})},R.inlineTokens=function(I,T){var F=this;T===void 0&&(T=[]);var V,ee,Ce,ve=I,Me,at,Je;if(this.tokens.links){var Ut=Object.keys(this.tokens.links);if(Ut.length>0)for(;(Me=this.tokenizer.rules.inline.reflinkSearch.exec(ve))!=null;)Ut.includes(Me[0].slice(Me[0].lastIndexOf("[")+1,-1))&&(ve=ve.slice(0,Me.index)+"["+_e("a",Me[0].length-2)+"]"+ve.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Me=this.tokenizer.rules.inline.blockSkip.exec(ve))!=null;)ve=ve.slice(0,Me.index)+"["+_e("a",Me[0].length-2)+"]"+ve.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Me=this.tokenizer.rules.inline.escapedEmSt.exec(ve))!=null;)ve=ve.slice(0,Me.index)+"++"+ve.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;I;)if(at||(Je=""),at=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Pe){return(V=Pe.call({lexer:F},I,T))?(I=I.substring(V.raw.length),T.push(V),!0):!1}))){if(V=this.tokenizer.escape(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.tag(I)){I=I.substring(V.raw.length),ee=T[T.length-1],ee&&V.type==="text"&&ee.type==="text"?(ee.raw+=V.raw,ee.text+=V.text):T.push(V);continue}if(V=this.tokenizer.link(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.reflink(I,this.tokens.links)){I=I.substring(V.raw.length),ee=T[T.length-1],ee&&V.type==="text"&&ee.type==="text"?(ee.raw+=V.raw,ee.text+=V.text):T.push(V);continue}if(V=this.tokenizer.emStrong(I,ve,Je)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.codespan(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.br(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.del(I)){I=I.substring(V.raw.length),T.push(V);continue}if(V=this.tokenizer.autolink(I,Ri)){I=I.substring(V.raw.length),T.push(V);continue}if(!this.state.inLink&&(V=this.tokenizer.url(I,Ri))){I=I.substring(V.raw.length),T.push(V);continue}if(Ce=I,this.options.extensions&&this.options.extensions.startInline&&function(){var Pe=1/0,fi=I.slice(1),_i=void 0;F.options.extensions.startInline.forEach(function(Jn){_i=Jn.call({lexer:this},fi),typeof _i=="number"&&_i>=0&&(Pe=Math.min(Pe,_i))}),Pe<1/0&&Pe>=0&&(Ce=I.substring(0,Pe+1))}(),V=this.tokenizer.inlineText(Ce,Et)){I=I.substring(V.raw.length),V.raw.slice(-1)!=="_"&&(Je=V.raw.slice(-1)),at=!0,ee=T[T.length-1],ee&&ee.type==="text"?(ee.raw+=V.raw,ee.text+=V.text):T.push(V);continue}if(I){var Lt="Infinite loop on byte: "+I.charCodeAt(0);if(this.options.silent){console.error(Lt);break}else throw new Error(Lt)}}return T},n(W,null,[{key:"rules",get:function(){return{block:ke,inline:xe}}}]),W}(),Dt=function(){function W(I){this.options=I||e.defaults}var R=W.prototype;return R.code=function(I,T,F){var V=(T||"").match(/\S*/)[0];if(this.options.highlight){var ee=this.options.highlight(I,V);ee!=null&&ee!==I&&(F=!0,I=ee)}return I=I.replace(/\n$/,"")+`
`,V?'<pre><code class="'+this.options.langPrefix+f(V,!0)+'">'+(F?I:f(I,!0))+`</code></pre>
`:"<pre><code>"+(F?I:f(I,!0))+`</code></pre>
`},R.blockquote=function(I){return`<blockquote>
`+I+`</blockquote>
`},R.html=function(I){return I},R.heading=function(I,T,F,V){if(this.options.headerIds){var ee=this.options.headerPrefix+V.slug(F);return"<h"+T+' id="'+ee+'">'+I+"</h"+T+`>
`}return"<h"+T+">"+I+"</h"+T+`>
`},R.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},R.list=function(I,T,F){var V=T?"ol":"ul",ee=T&&F!==1?' start="'+F+'"':"";return"<"+V+ee+`>
`+I+"</"+V+`>
`},R.listitem=function(I){return"<li>"+I+`</li>
`},R.checkbox=function(I){return"<input "+(I?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},R.paragraph=function(I){return"<p>"+I+`</p>
`},R.table=function(I,T){return T&&(T="<tbody>"+T+"</tbody>"),`<table>
<thead>
`+I+`</thead>
`+T+`</table>
`},R.tablerow=function(I){return`<tr>
`+I+`</tr>
`},R.tablecell=function(I,T){var F=T.header?"th":"td",V=T.align?"<"+F+' align="'+T.align+'">':"<"+F+">";return V+I+("</"+F+`>
`)},R.strong=function(I){return"<strong>"+I+"</strong>"},R.em=function(I){return"<em>"+I+"</em>"},R.codespan=function(I){return"<code>"+I+"</code>"},R.br=function(){return this.options.xhtml?"<br/>":"<br>"},R.del=function(I){return"<del>"+I+"</del>"},R.link=function(I,T,F){if(I=L(this.options.sanitize,this.options.baseUrl,I),I===null)return F;var V='<a href="'+f(I)+'"';return T&&(V+=' title="'+T+'"'),V+=">"+F+"</a>",V},R.image=function(I,T,F){if(I=L(this.options.sanitize,this.options.baseUrl,I),I===null)return F;var V='<img src="'+I+'" alt="'+F+'"';return T&&(V+=' title="'+T+'"'),V+=this.options.xhtml?"/>":">",V},R.text=function(I){return I},W}(),Fi=function(){function W(){}var R=W.prototype;return R.strong=function(I){return I},R.em=function(I){return I},R.codespan=function(I){return I},R.del=function(I){return I},R.html=function(I){return I},R.text=function(I){return I},R.link=function(I,T,F){return""+F},R.image=function(I,T,F){return""+F},R.br=function(){return""},W}(),Kt=function(){function W(){this.seen={}}var R=W.prototype;return R.serialize=function(I){return I.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},R.getNextSafeSlug=function(I,T){var F=I,V=0;if(this.seen.hasOwnProperty(F)){V=this.seen[I];do V++,F=I+"-"+V;while(this.seen.hasOwnProperty(F))}return T||(this.seen[I]=V,this.seen[F]=0),F},R.slug=function(I,T){T===void 0&&(T={});var F=this.serialize(I);return this.getNextSafeSlug(F,T.dryrun)},W}(),Ei=function(){function W(I){this.options=I||e.defaults,this.options.renderer=this.options.renderer||new Dt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Fi,this.slugger=new Kt}W.parse=function(I,T){var F=new W(T);return F.parse(I)},W.parseInline=function(I,T){var F=new W(T);return F.parseInline(I)};var R=W.prototype;return R.parse=function(I,T){T===void 0&&(T=!0);var F="",V,ee,Ce,ve,Me,at,Je,Ut,Lt,Pe,fi,_i,Jn,N,de,He,ei,It,Li,fo=I.length;for(V=0;V<fo;V++){if(Pe=I[V],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Pe.type]&&(Li=this.options.extensions.renderers[Pe.type].call({parser:this},Pe),Li!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Pe.type))){F+=Li||"";continue}switch(Pe.type){case"space":continue;case"hr":{F+=this.renderer.hr();continue}case"heading":{F+=this.renderer.heading(this.parseInline(Pe.tokens),Pe.depth,b(this.parseInline(Pe.tokens,this.textRenderer)),this.slugger);continue}case"code":{F+=this.renderer.code(Pe.text,Pe.lang,Pe.escaped);continue}case"table":{for(Ut="",Je="",ve=Pe.header.length,ee=0;ee<ve;ee++)Je+=this.renderer.tablecell(this.parseInline(Pe.header[ee].tokens),{header:!0,align:Pe.align[ee]});for(Ut+=this.renderer.tablerow(Je),Lt="",ve=Pe.rows.length,ee=0;ee<ve;ee++){for(at=Pe.rows[ee],Je="",Me=at.length,Ce=0;Ce<Me;Ce++)Je+=this.renderer.tablecell(this.parseInline(at[Ce].tokens),{header:!1,align:Pe.align[Ce]});Lt+=this.renderer.tablerow(Je)}F+=this.renderer.table(Ut,Lt);continue}case"blockquote":{Lt=this.parse(Pe.tokens),F+=this.renderer.blockquote(Lt);continue}case"list":{for(fi=Pe.ordered,_i=Pe.start,Jn=Pe.loose,ve=Pe.items.length,Lt="",ee=0;ee<ve;ee++)de=Pe.items[ee],He=de.checked,ei=de.task,N="",de.task&&(It=this.renderer.checkbox(He),Jn?de.tokens.length>0&&de.tokens[0].type==="paragraph"?(de.tokens[0].text=It+" "+de.tokens[0].text,de.tokens[0].tokens&&de.tokens[0].tokens.length>0&&de.tokens[0].tokens[0].type==="text"&&(de.tokens[0].tokens[0].text=It+" "+de.tokens[0].tokens[0].text)):de.tokens.unshift({type:"text",text:It}):N+=It),N+=this.parse(de.tokens,Jn),Lt+=this.renderer.listitem(N,ei,He);F+=this.renderer.list(Lt,fi,_i);continue}case"html":{F+=this.renderer.html(Pe.text);continue}case"paragraph":{F+=this.renderer.paragraph(this.parseInline(Pe.tokens));continue}case"text":{for(Lt=Pe.tokens?this.parseInline(Pe.tokens):Pe.text;V+1<fo&&I[V+1].type==="text";)Pe=I[++V],Lt+=`
`+(Pe.tokens?this.parseInline(Pe.tokens):Pe.text);F+=T?this.renderer.paragraph(Lt):Lt;continue}default:{var qo='Token with "'+Pe.type+'" type was not found.';if(this.options.silent){console.error(qo);return}else throw new Error(qo)}}}return F},R.parseInline=function(I,T){T=T||this.renderer;var F="",V,ee,Ce,ve=I.length;for(V=0;V<ve;V++){if(ee=I[V],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ee.type]&&(Ce=this.options.extensions.renderers[ee.type].call({parser:this},ee),Ce!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ee.type))){F+=Ce||"";continue}switch(ee.type){case"escape":{F+=T.text(ee.text);break}case"html":{F+=T.html(ee.text);break}case"link":{F+=T.link(ee.href,ee.title,this.parseInline(ee.tokens,T));break}case"image":{F+=T.image(ee.href,ee.title,ee.text);break}case"strong":{F+=T.strong(this.parseInline(ee.tokens,T));break}case"em":{F+=T.em(this.parseInline(ee.tokens,T));break}case"codespan":{F+=T.codespan(ee.text);break}case"br":{F+=T.br();break}case"del":{F+=T.del(this.parseInline(ee.tokens,T));break}case"text":{F+=T.text(ee.text);break}default:{var Me='Token with "'+ee.type+'" type was not found.';if(this.options.silent){console.error(Me);return}else throw new Error(Me)}}}return F},W}();function Ue(W,R,I){if(typeof W>"u"||W===null)throw new Error("marked(): input parameter is undefined or null");if(typeof W!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(W)+", string expected");if(typeof R=="function"&&(I=R,R=null),R=K({},Ue.defaults,R||{}),se(R),I){var T=R.highlight,F;try{F=ci.lex(W,R)}catch(ve){return I(ve)}var V=function(ve){var Me;if(!ve)try{R.walkTokens&&Ue.walkTokens(F,R.walkTokens),Me=Ei.parse(F,R)}catch(at){ve=at}return R.highlight=T,ve?I(ve):I(null,Me)};if(!T||T.length<3||(delete R.highlight,!F.length))return V();var ee=0;Ue.walkTokens(F,function(ve){ve.type==="code"&&(ee++,setTimeout(function(){T(ve.text,ve.lang,function(Me,at){if(Me)return V(Me);at!=null&&at!==ve.text&&(ve.text=at,ve.escaped=!0),ee--,ee===0&&V()})},0))}),ee===0&&V();return}try{var Ce=ci.lex(W,R);return R.walkTokens&&Ue.walkTokens(Ce,R.walkTokens),Ei.parse(Ce,R)}catch(ve){if(ve.message+=`
Please report this to https://github.com/markedjs/marked.`,R.silent)return"<p>An error occurred:</p><pre>"+f(ve.message+"",!0)+"</pre>";throw ve}}Ue.options=Ue.setOptions=function(W){return K(Ue.defaults,W),l(Ue.defaults),Ue},Ue.getDefaults=a,Ue.defaults=e.defaults,Ue.use=function(){for(var W=arguments.length,R=new Array(W),I=0;I<W;I++)R[I]=arguments[I];var T=K.apply(void 0,[{}].concat(R)),F=Ue.defaults.extensions||{renderers:{},childTokens:{}},V;R.forEach(function(ee){if(ee.extensions&&(V=!0,ee.extensions.forEach(function(ve){if(!ve.name)throw new Error("extension name required");if(ve.renderer){var Me=F.renderers?F.renderers[ve.name]:null;Me?F.renderers[ve.name]=function(){for(var at=arguments.length,Je=new Array(at),Ut=0;Ut<at;Ut++)Je[Ut]=arguments[Ut];var Lt=ve.renderer.apply(this,Je);return Lt===!1&&(Lt=Me.apply(this,Je)),Lt}:F.renderers[ve.name]=ve.renderer}if(ve.tokenizer){if(!ve.level||ve.level!=="block"&&ve.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");F[ve.level]?F[ve.level].unshift(ve.tokenizer):F[ve.level]=[ve.tokenizer],ve.start&&(ve.level==="block"?F.startBlock?F.startBlock.push(ve.start):F.startBlock=[ve.start]:ve.level==="inline"&&(F.startInline?F.startInline.push(ve.start):F.startInline=[ve.start]))}ve.childTokens&&(F.childTokens[ve.name]=ve.childTokens)})),ee.renderer&&function(){var ve=Ue.defaults.renderer||new Dt,Me=function(Je){var Ut=ve[Je];ve[Je]=function(){for(var Lt=arguments.length,Pe=new Array(Lt),fi=0;fi<Lt;fi++)Pe[fi]=arguments[fi];var _i=ee.renderer[Je].apply(ve,Pe);return _i===!1&&(_i=Ut.apply(ve,Pe)),_i}};for(var at in ee.renderer)Me(at);T.renderer=ve}(),ee.tokenizer&&function(){var ve=Ue.defaults.tokenizer||new pt,Me=function(Je){var Ut=ve[Je];ve[Je]=function(){for(var Lt=arguments.length,Pe=new Array(Lt),fi=0;fi<Lt;fi++)Pe[fi]=arguments[fi];var _i=ee.tokenizer[Je].apply(ve,Pe);return _i===!1&&(_i=Ut.apply(ve,Pe)),_i}};for(var at in ee.tokenizer)Me(at);T.tokenizer=ve}(),ee.walkTokens){var Ce=Ue.defaults.walkTokens;T.walkTokens=function(ve){ee.walkTokens.call(this,ve),Ce&&Ce.call(this,ve)}}V&&(T.extensions=F),Ue.setOptions(T)})},Ue.walkTokens=function(W,R){for(var I=function(){var V=F.value;switch(R.call(Ue,V),V.type){case"table":{for(var ee=s(V.header),Ce;!(Ce=ee()).done;){var ve=Ce.value;Ue.walkTokens(ve.tokens,R)}for(var Me=s(V.rows),at;!(at=Me()).done;)for(var Je=at.value,Ut=s(Je),Lt;!(Lt=Ut()).done;){var Pe=Lt.value;Ue.walkTokens(Pe.tokens,R)}break}case"list":{Ue.walkTokens(V.items,R);break}default:Ue.defaults.extensions&&Ue.defaults.extensions.childTokens&&Ue.defaults.extensions.childTokens[V.type]?Ue.defaults.extensions.childTokens[V.type].forEach(function(fi){Ue.walkTokens(V[fi],R)}):V.tokens&&Ue.walkTokens(V.tokens,R)}},T=s(W),F;!(F=T()).done;)I()},Ue.parseInline=function(W,R){if(typeof W>"u"||W===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof W!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(W)+", string expected");R=K({},Ue.defaults,R||{}),se(R);try{var I=ci.lexInline(W,R);return R.walkTokens&&Ue.walkTokens(I,R.walkTokens),Ei.parseInline(I,R)}catch(T){if(T.message+=`
Please report this to https://github.com/markedjs/marked.`,R.silent)return"<p>An error occurred:</p><pre>"+f(T.message+"",!0)+"</pre>";throw T}},Ue.Parser=Ei,Ue.parser=Ei.parse,Ue.Renderer=Dt,Ue.TextRenderer=Fi,Ue.Lexer=ci,Ue.lexer=ci.lex,Ue.Tokenizer=pt,Ue.Slugger=Kt,Ue.parse=Ue;var Yn=Ue.options,ht=Ue.setOptions,Pn=Ue.use,oo=Ue.walkTokens,fn=Ue.parseInline,Bo=Ue,$e=Ei.parse,X=ci.lex;e.Lexer=ci,e.Parser=Ei,e.Renderer=Dt,e.Slugger=Kt,e.TextRenderer=Fi,e.Tokenizer=pt,e.getDefaults=a,e.lexer=X,e.marked=Ue,e.options=Yn,e.parse=Bo,e.parseInline=fn,e.parser=$e,e.setOptions=ht,e.use=Pn,e.walkTokens=oo,Object.defineProperty(e,"__esModule",{value:!0})})})();var G6=sae||exports;function Yb(i){let e=JSON.parse(i);return e=cc(e),e}function cc(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return $.revive(i);case 2:return new RegExp(i.source,i.flags);case 14:return new Date(i.source)}if(i instanceof Gi||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=cc(i[t],e+1);else for(let t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=cc(i[t],e+1))}return i}function RAe(i,e={},t={}){var n;let o=new ne,r=!1,s=lJ(e),a=function(p){let f;try{f=Yb(decodeURIComponent(p))}catch{}return f?(f=WA(f,v=>{if(i.uris&&i.uris[v])return $.revive(i.uris[v])}),encodeURIComponent(JSON.stringify(f))):p},l=function(p,f){let v=i.uris&&i.uris[p],b=$.revive(v);return f?p.startsWith(Oe.data+":")?p:(b||(b=$.parse(p)),jne.asBrowserUri(b).toString(!0)):!b||$.parse(p).toString()===b.toString()?p:(b.query&&(b=b.with({query:a(b.query)})),b.toString())},c=new G6.Renderer;c.image=(p,f,v)=>{let b=[],A=[];return p&&({href:p,dimensions:b}=Hre(p),A.push(`src="${Ly(p)}"`)),v&&A.push(`alt="${Ly(v)}"`),f&&A.push(`title="${Ly(f)}"`),b.length&&(A=A.concat(b)),"<img "+A.join(" ")+">"},c.link=(p,f,v)=>typeof p!="string"?"":(p===v&&(v=oR(v)),f=typeof f=="string"?Ly(oR(f)):"",p=oR(p),p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${p}" title="${f||p}">${v}</a>`),c.paragraph=p=>`<p>${p}</p>`;let d=[];if(e.codeBlockRenderer&&(c.code=(p,f)=>{let v=Cse.nextId(),b=e.codeBlockRenderer(f??"",p);return d.push(b.then(A=>[v,A])),`<div class="code" data-code="${v}">${nY(p)}</div>`}),e.actionHandler){let p=e.actionHandler.disposables.add(new kt(s,"click")),f=e.actionHandler.disposables.add(new kt(s,"auxclick"));e.actionHandler.disposables.add(Z.any(p.event,f.event)(v=>{let b=new sa(v);if(!b.leftButton&&!b.middleButton)return;let A=b.target;if(!(A.tagName!=="A"&&(A=A.parentElement,!A||A.tagName!=="A")))try{let w=A.dataset.href;w&&(i.baseUri&&(w=LR($.from(i.baseUri),w)),e.actionHandler.callback(w,b))}catch(w){Ye(w)}finally{b.preventDefault()}}))}i.supportHtml||(t.sanitizer=p=>i.isTrusted&&p.match(/^(<span[^>]+>)|(<\/\s*span>)$/)?p:"",t.sanitize=!0,t.silent=!0),t.renderer=c;let h=(n=i.value)!==null&&n!==void 0?n:"";h.length>1e5&&(h=`${h.substr(0,1e5)}\u2026`),i.supportThemeIcons&&(h=O0e(h));let u=G6.parse(h,t);i.supportThemeIcons&&(u=Rg(u).map(p=>typeof p=="string"?p:p.outerHTML).join(""));let g=new DOMParser().parseFromString(Fee(i,u),"text/html");if(g.body.querySelectorAll("img").forEach(p=>{let f=p.getAttribute("src");if(f){let v=f;try{i.baseUri&&(v=LR($.from(i.baseUri),v))}catch{}p.src=l(v,!0)}}),g.body.querySelectorAll("a").forEach(p=>{let f=p.getAttribute("href");if(p.setAttribute("href",""),!f||/^data:|javascript:/i.test(f)||/^command:/i.test(f)&&!i.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(f))p.replaceWith(...p.childNodes);else{let v=l(f,!1);i.baseUri&&(v=LR($.from(i.baseUri),f)),p.dataset.href=v}}),s.innerHTML=Fee(i,g.body.innerHTML),d.length>0&&Promise.all(d).then(p=>{var f,v;if(r)return;let b=new Map(p),A=s.querySelectorAll("div[data-code]");for(let w of A){let C=b.get((f=w.dataset.code)!==null&&f!==void 0?f:"");C&&Hh(w,C)}(v=e.asyncRenderCallback)===null||v===void 0||v.call(e)}),e.asyncRenderCallback)for(let p of s.getElementsByTagName("img")){let f=o.add(le(p,"load",()=>{f.dispose(),e.asyncRenderCallback()}))}return{element:s,dispose:()=>{r=!0,o.dispose()}}}function LR(i,e){return/^\w[\w\d+.-]*:/.test(e)?e:i.path.endsWith("/")?LZ(i,e).toString():LZ(rv(i),e).toString()}function Fee(i,e){let{config:t,allowedSchemes:n}=FAe(i);Bne("uponSanitizeAttribute",(r,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(r.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}});let o=Mue(n);try{return iue(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{Pne("uponSanitizeAttribute"),o.dispose()}}function FAe(i){let e=[Oe.http,Oe.https,Oe.mailto,Oe.data,Oe.file,Oe.vscodeFileResource,Oe.vscodeRemote,Oe.vscodeRemoteResource];return i.isTrusted&&e.push(Oe.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var BAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Bee=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},PAe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},IR,Ld=class aae{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new Q,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};let o=new ne;return{element:o.add(RAe(e,Object.assign(Object.assign({},this._getRenderOptions(e,o)),t),n)).element,dispose:()=>o.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(n,o)=>PAe(this,void 0,void 0,function*(){var r,s,a;let l;n?l=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(l=(r=this._options.editor.getModel())===null||r===void 0?void 0:r.getLanguageId()),l||(l=Pr);let c=yield Q_e(this._languageService,o,l),d=document.createElement("span");if(d.innerHTML=(a=(s=aae._ttpTokenizer)===null||s===void 0?void 0:s.createHTML(c))!==null&&a!==void 0?a:c,this._options.editor){let h=this._options.editor.getOption(46);To(d,h)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(d.style.fontSize=this._options.codeBlockFontSize),d}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(Ye),disposables:t}}}};Ld._ttpTokenizer=(IR=window.trustedTypes)===null||IR===void 0?void 0:IR.createPolicy("tokenizeToString",{createHTML(i){return i}});Ld=BAe([Bee(1,ki),Bee(2,jr)],Ld);var Pee=ge,e_=class i extends J{constructor(e,t,n=u1e){super(),this._renderDisposeables=this._register(new ne),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new CE),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Ld({editor:this._editor},t,n)),this._computer=new Y6(this._editor),this._hoverOperation=this._register(new yE(this._editor,this._computer)),this._register(this._hoverOperation.onResult(o=>{this._withResult(o.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(46)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return i.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(e=>this._editor.applyFontInfo(e))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();let n=document.createDocumentFragment();for(let o of t){let r=Pee("div.hover-row.markdown-hover"),s=ae(r,Pee("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(o.value));s.appendChild(a.element),n.appendChild(r)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));let t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),o=this._editor.getScrollTop(),r=this._editor.getOption(61),s=this._hover.containerDomNode.clientHeight,a=n-o-(s-r)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}};e_.ID="editor.contrib.modesGlyphHoverWidget";var Y6=class{constructor(e){this._editor=e,this._lineNumber=-1}get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}computeSync(){let e=o=>({value:o}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(let o of t){if(!o.options.glyphMarginClassName)continue;let r=o.options.glyphMarginHoverMessage;!r||Z_(r)||n.push(...IM(r).map(e))}return n}},OAe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},J6=class{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}};function HAe(i,e,t,n,o){return OAe(this,void 0,void 0,function*(){try{let r=yield Promise.resolve(i.provideHover(t,n,o));if(r&&zAe(r))return new J6(i,r,e)}catch(r){Fn(r)}})}function DJ(i,e,t,n){let o=i.ordered(e).map((r,s)=>HAe(r,s,e,t,n));return wr.fromPromises(o).coalesce()}function WAe(i,e,t,n){return DJ(i,e,t,n).map(o=>o.hover).toPromise()}mc("_executeHoverProvider",(i,e,t)=>{let n=i.get(Te);return WAe(n.hoverProvider,e,t,et.None)});function zAe(i){let e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var VAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},By=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Oee=ge,ra=class{constructor(e,t,n,o){this.owner=e,this.range=t,this.contents=n,this.ordinal=o}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},EE=class{constructor(i,e,t,n,o){this._editor=i,this._languageService=e,this._openerService=t,this._configurationService=n,this._languageFeaturesService=o,this.hoverOrdinal=2}createLoadingMessage(i){return new ra(this,i.range,[new Zo().appendText(m("modesContentHover.loading","Loading..."))],2e3)}computeSync(i,e){if(!this._editor.hasModel()||i.type!==1)return[];let t=this._editor.getModel(),n=i.range.startLineNumber,o=t.getLineMaxColumn(n),r=[],s=1e3,a=t.getLineLength(n),l=t.getLanguageIdAtPosition(i.range.startLineNumber,i.range.startColumn),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});typeof c=="number"&&a>=c&&r.push(new ra(this,i.range,[{value:m("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],s++));for(let d of e){let h=d.range.startLineNumber===n?d.range.startColumn:1,u=d.range.endLineNumber===n?d.range.endColumn:o,g=d.options.hoverMessage;if(!g||Z_(g))continue;let p=new E(i.range.startLineNumber,h,i.range.startLineNumber,u);r.push(new ra(this,p,IM(g),s++))}return r}computeAsync(i,e,t){if(!this._editor.hasModel()||i.type!==1)return wr.EMPTY;let n=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(n))return wr.EMPTY;let o=new q(i.range.startLineNumber,i.range.startColumn);return DJ(this._languageFeaturesService.hoverProvider,n,o,t).filter(r=>!Z_(r.hover.contents)).map(r=>{let s=r.hover.range?E.lift(r.hover.range):i.range;return new ra(this,s,r.hover.contents,r.ordinal)})}renderHoverParts(i,e){return lae(i,e,this._editor,this._languageService,this._openerService)}};EE=VAe([By(1,ki),By(2,jr),By(3,Ot),By(4,Te)],EE);function lae(i,e,t,n,o){e.sort((s,a)=>s.ordinal-a.ordinal);let r=new ne;for(let s of e)for(let a of s.contents){if(Z_(a))continue;let l=Oee("div.hover-row.markdown-hover"),c=ae(l,Oee("div.hover-contents")),d=r.add(new Ld({editor:t},n,o));r.add(d.onDidRenderAsync(()=>{c.className="hover-contents code-hover-contents",i.onContentsChanged()}));let h=r.add(d.render(a));c.appendChild(h.element),i.fragment.appendChild(l)}return r}var cae=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},LE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},IE=class{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}},X6=class{constructor(i,e,t){this._markerService=e,this._configService=t,this._onDidChange=new Q,this.onDidChange=this._onDidChange.event,this._dispoables=new ne,this._markers=[],this._nextIdx=-1,$.isUri(i)?this._resourceFilter=s=>s.toString()===i.toString():i&&(this._resourceFilter=i);let n=this._configService.getValue("problems.sortOrder"),o=(s,a)=>{let l=Is(s.resource.toString(),a.resource.toString());return l===0&&(n==="position"?l=E.compareRangesUsingStarts(s,a)||Xt.compare(s.severity,a.severity):l=Xt.compare(s.severity,a.severity)||E.compareRangesUsingStarts(s,a)),l},r=()=>{this._markers=this._markerService.read({resource:$.isUri(i)?i:void 0,severities:Xt.Error|Xt.Warning|Xt.Info}),typeof i=="function"&&(this._markers=this._markers.filter(s=>this._resourceFilter(s.resource))),this._markers.sort(o)};r(),this._dispoables.add(e.onMarkerChanged(s=>{(!this._resourceFilter||s.some(a=>this._resourceFilter(a)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(i){return!this._resourceFilter&&!i?!0:!this._resourceFilter||!i?!1:this._resourceFilter(i)}get selected(){let i=this._markers[this._nextIdx];return i&&new IE(i,this._nextIdx+1,this._markers.length)}_initIdx(i,e,t){let n=!1,o=this._markers.findIndex(r=>r.resource.toString()===i.uri.toString());o<0&&(o=xM(this._markers,{resource:i.uri},(r,s)=>Is(r.resource.toString(),s.resource.toString())),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let s=E.lift(this._markers[r]);if(s.isEmpty()){let a=i.getWordAtPosition(s.getStartPosition());a&&(s=new E(s.startLineNumber,a.startColumn,s.startLineNumber,a.endColumn))}if(e&&(s.containsPosition(e)||e.isBeforeOrEqual(s.getStartPosition()))){this._nextIdx=r,n=!0;break}if(this._markers[r].resource.toString()!==i.uri.toString())break}n||(this._nextIdx=t?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(i,e,t){if(this._markers.length===0)return!1;let n=this._nextIdx;return this._nextIdx===-1?this._initIdx(e,t,i):i?this._nextIdx=(this._nextIdx+1)%this._markers.length:i||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(i,e){let t=this._markers.findIndex(n=>n.resource.toString()===i.toString());if(!(t<0)){for(;t<this._markers.length;t++)if(E.containsPosition(this._markers[t],e))return new IE(this._markers[t],t+1,this._markers.length)}}};X6=cae([LE(1,ka),LE(2,Ot)],X6);var dae=ze("IMarkerNavigationService"),Z6=class{constructor(i,e){this._markerService=i,this._configService=e,this._provider=new ko}getMarkerList(i){for(let e of this._provider){let t=e.getMarkerList(i);if(t)return t}return new X6(i,this._markerService,this._configService)}};Z6=cae([LE(0,ka),LE(1,Ot)],Z6);Ke(dae,Z6,!0);var e9;(function(i){function e(t){switch(t){case Mt.Ignore:return"severity-ignore "+_.info.classNames;case Mt.Info:return _.info.classNames;case Mt.Warning:return _.warning.classNames;case Mt.Error:return _.error.classNames;default:return""}}i.className=e})(e9||(e9={}));xi((i,e)=>{let t=i.getColor(Ome);if(t){let r=_.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.text-search-provider-messages .providerMessage ${r},
			.extensions-viewlet > .extensions ${r} {
				color: ${t};
			}
		`)}let n=i.getColor(Hme);if(n){let r=_.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.extension-editor ${r},
			.text-search-provider-messages .providerMessage ${r},
			.preferences-editor ${r} {
				color: ${n};
			}
		`)}let o=i.getColor(Wme);if(o){let r=_.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.text-search-provider-messages .providerMessage ${r},
			.extension-editor ${r} {
				color: ${o};
			}
		`)}});var UAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},xm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},t9=class{constructor(e,t,n,o,r){this._openerService=o,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new ne,this._editor=t;let s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(Tn(this._relatedBlock,"click",a=>{a.preventDefault();let l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new kx(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{s.style.left=`-${a.scrollLeft}px`,s.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){st(this._disposables)}update(e){let{source:t,message:n,relatedInformation:o,code:r}=e,s=(t?.length||0)+2;r&&(typeof r=="string"?s+=r.length:s+=r.value.length);let a=il(n);this._lines=a.length,this._longestLineLength=0;for(let u of a)this._longestLineLength=Math.max(u.length+s,this._longestLineLength);Sn(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(let u of a)l=document.createElement("div"),l.innerText=u,u===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||r){let u=document.createElement("span");if(u.classList.add("details"),l.appendChild(u),t){let g=document.createElement("span");g.innerText=t,g.classList.add("source"),u.appendChild(g)}if(r)if(typeof r=="string"){let g=document.createElement("span");g.innerText=`(${r})`,g.classList.add("code"),u.appendChild(g)}else{this._codeLink=ge("a.code-link"),this._codeLink.setAttribute("href",`${r.target.toString()}`),this._codeLink.onclick=p=>{this._openerService.open(r.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()};let g=ae(this._codeLink,ge("span"));g.innerText=r.value,u.appendChild(this._codeLink)}}if(Sn(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Dn(o)){let u=this._relatedBlock.appendChild(document.createElement("div"));u.style.paddingTop=`${Math.floor(this._editor.getOption(61)*.66)}px`,this._lines+=1;for(let g of o){let p=document.createElement("div"),f=document.createElement("a");f.classList.add("filename"),f.innerText=`${this._labelService.getUriBasenameLabel(g.resource)}(${g.startLineNumber}, ${g.startColumn}): `,f.title=this._labelService.getUriLabel(g.resource),this._relatedDiagnostics.set(f,g);let v=document.createElement("span");v.innerText=g.message,p.appendChild(f),p.appendChild(v),this._lines+=1,u.appendChild(p)}}let c=this._editor.getOption(46),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Xt.Error:t=m("Error","Error");break;case Xt.Warning:t=m("Warning","Warning");break;case Xt.Info:t=m("Info","Info");break;case Xt.Hint:t=m("Hint","Hint");break}let n=m("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn),o=this._editor.getModel();return o&&e.startLineNumber<=o.getLineCount()&&e.startLineNumber>=1&&(n=`${o.getLineContent(e.startLineNumber)}, ${n}`),n}},c0=class hae extends Jk{constructor(e,t,n,o,r,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=n,this._menuService=o,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new ne,this._onDidSelectRelatedInformation=new Q,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Xt.Warning,this._backgroundColor=j.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(qAe);let t=i9,n=QAe;this._severity===Xt.Warning?(t=OS,n=jAe):this._severity===Xt.Info&&(t=n9,n=KAe);let o=e.getColor(t),r=e.getColor(n);this.style({arrowColor:o,frameColor:o,headerBackgroundColor:r,primaryHeadingColor:e.getColor(kse),secondaryHeadingColor:e.getColor(Ese)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(o=>this.editor.focus()));let t=[],n=this._menuService.createMenu(hae.TitleMenu,this._contextKeyService);L1e(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=ae(e,ge(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new t9(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let o=E.lift(e),r=this.editor.getPosition(),s=r&&o.containsPosition(r)?r:o.getStartPosition();super.show(s,this.computeRequiredHeight());let a=this.editor.getModel();if(a){let l=n>1?m("problems","{0} of {1} problems",t,n):m("change","{0} of {1} problem",t,n);this.setTitle(gs(a.uri),l)}this._icon.className=`codicon ${e9.className(Xt.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};c0.TitleMenu=new z("gotoErrorTitleMenu");c0=UAe([xm(1,mi),xm(2,jr),xm(3,em),xm(4,tt),xm(5,Ze),xm(6,yp)],c0);var Hee=QA(Rl,$oe),Wee=QA(ns,F_),zee=QA(Cr,rx),i9=P("editorMarkerNavigationError.background",{dark:Hee,light:Hee,hcDark:mt,hcLight:mt},m("editorMarkerNavigationError","Editor marker navigation widget error color.")),QAe=P("editorMarkerNavigationError.headerBackground",{dark:Fe(i9,.1),light:Fe(i9,.1),hcDark:null,hcLight:null},m("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),OS=P("editorMarkerNavigationWarning.background",{dark:Wee,light:Wee,hcDark:mt,hcLight:mt},m("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),jAe=P("editorMarkerNavigationWarning.headerBackground",{dark:Fe(OS,.1),light:Fe(OS,.1),hcDark:"#0C141F",hcLight:Fe(OS,.2)},m("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),n9=P("editorMarkerNavigationInfo.background",{dark:zee,light:zee,hcDark:mt,hcLight:mt},m("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),KAe=P("editorMarkerNavigationInfo.headerBackground",{dark:Fe(n9,.1),light:Fe(n9,.1),hcDark:null,hcLight:null},m("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),qAe=P("editorMarkerNavigation.background",{dark:yn,light:yn,hcDark:yn,hcLight:yn},m("editorMarkerNavigationBackground","Editor marker navigation widget background.")),$Ae=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Py=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},uae=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},ru=class HS{constructor(e,t,n,o,r){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=o,this._instantiationService=r,this._sessionDispoables=new ne,this._editor=e,this._widgetVisible=gae.bindTo(this._contextKeyService)}static get(e){return e.getContribution(HS.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(c0,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var o,r,s;(!(!((o=this._model)===null||o===void 0)&&o.selected)||!E.containsPosition((r=this._model)===null||r===void 0?void 0:r.selected.marker,n.position))&&((s=this._model)===null||s===void 0||s.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;let n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:E.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){let t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new q(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var n,o;return uae(this,void 0,void 0,function*(){if(this._editor.hasModel()){let r=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(r.move(e,this._editor.getModel(),this._editor.getPosition()),!r.selected)return;if(r.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();let s=yield this._editorService.openCodeEditor({resource:r.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:r.selected.marker}},this._editor);s&&((n=HS.get(s))===null||n===void 0||n.close(),(o=HS.get(s))===null||o===void 0||o.nagivate(e,t))}else this._widget.showAtMarker(r.selected.marker,r.selected.index,r.selected.total)}})}};ru.ID="editor.contrib.markerController";ru=$Ae([Py(1,dae),Py(2,Ze),Py(3,Ft),Py(4,tt)],ru);var d0=class extends Ie{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){var n;return uae(this,void 0,void 0,function*(){t.hasModel()&&((n=ru.get(t))===null||n===void 0||n.nagivate(this._next,this._multiFile))})}},h0=class i extends d0{constructor(){super(!0,!1,{id:i.ID,label:i.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:578,weight:100},menuOpts:{menuId:c0.TitleMenu,title:i.LABEL,icon:mn("marker-navigation-next",_.arrowDown,m("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};h0.ID="editor.action.marker.next";h0.LABEL=m("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");var Jb=class i extends d0{constructor(){super(!1,!1,{id:i.ID,label:i.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:1602,weight:100},menuOpts:{menuId:c0.TitleMenu,title:i.LABEL,icon:mn("marker-navigation-previous",_.arrowUp,m("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};Jb.ID="editor.action.marker.prev";Jb.LABEL=m("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");var o9=class extends d0{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:m("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:66,weight:100},menuOpts:{menuId:z.MenubarGoMenu,title:m({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}},r9=class extends d0{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:m("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:1090,weight:100},menuOpts:{menuId:z.MenubarGoMenu,title:m({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}};Wt(ru.ID,ru);fe(h0);fe(Jb);fe(o9);fe(r9);var gae=new Le("markersNavigationVisible",!1),GAe=$n.bindToContribution(ru.get);pe(new GAe({id:"closeMarkersNavigation",precondition:gae,handler:i=>i.close(),kbOpts:{weight:100+50,kbExpr:B.focus,primary:9,secondary:[1033]}}));var YAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},TR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Gs=ge,s9=class{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},Vee={type:1,filter:{include:Rt.QuickFix},triggerAction:Ko.QuickFixHover},a9=class{constructor(i,e,t,n){this._editor=i,this._markerDecorationsService=e,this._openerService=t,this._languageFeaturesService=n,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}computeSync(i,e){if(!this._editor.hasModel()||i.type!==1)return[];let t=this._editor.getModel(),n=i.range.startLineNumber,o=t.getLineMaxColumn(n),r=[];for(let s of e){let a=s.range.startLineNumber===n?s.range.startColumn:1,l=s.range.endLineNumber===n?s.range.endColumn:o,c=this._markerDecorationsService.getMarker(t.uri,s);if(!c)continue;let d=new E(i.range.startLineNumber,a,i.range.startLineNumber,l);r.push(new s9(this,d,c))}return r}renderHoverParts(i,e){if(!e.length)return J.None;let t=new ne;e.forEach(o=>i.fragment.appendChild(this.renderMarkerHover(o,t)));let n=e.length===1?e[0]:e.sort((o,r)=>Xt.compare(o.marker.severity,r.marker.severity))[0];return this.renderMarkerStatusbar(i,n,t),t}renderMarkerHover(i,e){let t=Gs("div.hover-row"),n=ae(t,Gs("div.marker.hover-contents")),{source:o,message:r,code:s,relatedInformation:a}=i.marker;this._editor.applyFontInfo(n);let l=ae(n,Gs("span"));if(l.style.whiteSpace="pre-wrap",l.innerText=r,o||s)if(s&&typeof s!="string"){let c=Gs("span");if(o){let g=ae(c,Gs("span"));g.innerText=o}let d=ae(c,Gs("a.code-link"));d.setAttribute("href",s.target.toString()),e.add(le(d,"click",g=>{this._openerService.open(s.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()}));let h=ae(d,Gs("span"));h.innerText=s.value;let u=ae(n,c);u.style.opacity="0.6",u.style.paddingLeft="6px"}else{let c=ae(n,Gs("span"));c.style.opacity="0.6",c.style.paddingLeft="6px",c.innerText=o&&s?`${o}(${s})`:o||`(${s})`}if(Dn(a))for(let{message:c,resource:d,startLineNumber:h,startColumn:u}of a){let g=ae(n,Gs("div"));g.style.marginTop="8px";let p=ae(g,Gs("a"));p.innerText=`${gs(d)}(${h}, ${u}): `,p.style.cursor="pointer",e.add(le(p,"click",v=>{v.stopPropagation(),v.preventDefault(),this._openerService&&this._openerService.open(d,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:h,startColumn:u}}}).catch(Ye)}));let f=ae(g,Gs("span"));f.innerText=c,this._editor.applyFontInfo(f)}return t}renderMarkerStatusbar(i,e,t){if((e.marker.severity===Xt.Error||e.marker.severity===Xt.Warning||e.marker.severity===Xt.Info)&&i.statusBar.addAction({label:m("view problem","View Problem"),commandId:h0.ID,run:()=>{var n;i.hide(),(n=ru.get(this._editor))===null||n===void 0||n.showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(83)){let n=i.statusBar.append(Gs("div"));this.recentMarkerCodeActionsInfo&&(Hk.makeKey(this.recentMarkerCodeActionsInfo.marker)===Hk.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=m("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);let o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?J.None:t.add(qh(()=>n.textContent=m("checkingForQuickFixes","Checking for quick fixes..."),200));n.textContent||(n.textContent=String.fromCharCode(160));let r=this.getCodeActions(e.marker);t.add(ct(()=>r.cancel())),r.then(s=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:s.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){s.dispose(),n.textContent=m("noQuickFixes","No quick fixes available");return}n.style.display="none";let a=!1;t.add(ct(()=>{a||s.dispose()})),i.statusBar.addAction({label:m("quick fixes","Quick Fix..."),commandId:i0.Id,run:l=>{a=!0;let c=tu.get(this._editor),d=Eo(l);i.hide(),c?.showCodeActions(Vee,s,{x:d.left+6,y:d.top+d.height+6,width:d.width,height:d.height})}})},Ye)}}getCodeActions(i){return Gn(e=>tJ(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new E(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn),Vee,ic.None,e))}};a9=YAe([TR(1,pY),TR(2,jr),TR(3,Te)],a9);xi((i,e)=>{let t=i.getColor(PM);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);let n=i.getColor(OM);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});var JAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Oy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},su=class pae{constructor(e,t,n,o,r){this._editor=e,this._instantiationService=t,this._openerService=n,this._languageService=o,this._toUnhook=new ne,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(s=>{s.hasChanged(55)&&(this._unhookEvents(),this._hookEvents())})}static get(e){return e.getContribution(pae.ID)}_hookEvents(){let e=()=>this._hideWidgets(),t=this._editor.getOption(55);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(n=>this._onEditorMouseLeave(n))),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;let t=e.target;if(t.type===9&&t.detail===Bg.ID){this._hoverClicked=!0;return}t.type===12&&t.detail===e_.ID||(t.type!==12&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t;let n=e.event.browserEvent.relatedTarget;!((t=this._contentWidget)===null||t===void 0)&&t.containsNode(n)||this._hideWidgets()}_onEditorMouseMove(e){var t,n,o,r,s;let a=e.target;if(!(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a.type===9&&a.detail===Bg.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a.type===9&&a.detail===Bg.ID&&!((o=this._contentWidget)===null||o===void 0)&&o.isColorPickerVisible()||this._isHoverSticky&&a.type===12&&a.detail===e_.ID)){if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(r=this._glyphWidget)===null||r===void 0||r.hide();return}if(a.type===2&&a.position){(s=this._contentWidget)===null||s===void 0||s.hide(),this._glyphWidget||(this._glyphWidget=new e_(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(a.position.lineNumber);return}this._hideWidgets()}}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible()||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(kE,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};su.ID="editor.contrib.hover";su=JAe([Oy(1,tt),Oy(2,jr),Oy(3,ki),Oy(4,Ze)],su);var l9=class extends Ie{constructor(){super({id:"editor.action.showHover",label:m({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=su.get(t);if(!n)return;let o=t.getPosition(),r=new E(o.lineNumber,o.column,o.lineNumber,o.column),s=t.getOption(2)===2;n.showContentHover(r,1,s)}},c9=class extends Ie{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:m({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=su.get(t);if(!n)return;let o=t.getPosition();if(!o)return;let r=new E(o.lineNumber,o.column,o.lineNumber,o.column),s=Dp.get(t);s&&s.startFindDefinitionFromCursor(o).then(()=>{n.showContentHover(r,1,!0)})}};Wt(su.ID,su);fe(l9);fe(c9);hm.register(EE);hm.register(a9);xi((i,e)=>{let t=i.getColor(zpe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);let n=i.getColor(np);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);let o=i.getColor(LY);o&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${o}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${o.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${o.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${o.transparent(.5)}; }`));let r=i.getColor(PM);r&&e.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);let s=i.getColor(OM);s&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);let a=i.getColor(EY);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);let l=i.getColor(Vpe);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);let c=i.getColor(qoe);c&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)});var Xb=class extends J{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){let t=e.target;if(t.type!==6||!t.detail.injectedText||t.detail.injectedText.options.attachedData!==bse||!t.range)return;let n=this._editor.getContribution(su.ID);if(n&&!n.isColorPickerVisible()){let o=new E(t.range.startLineNumber,t.range.startColumn+1,t.range.endLineNumber,t.range.endColumn+1);n.showContentHover(o,1,!1)}}};Xb.ID="editor.contrib.colorContribution";Wt(Xb.ID,Xb);hm.register(C8);var mae=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function dN(i){return{asString:()=>mae(this,void 0,void 0,function*(){return i}),asFile:()=>{},value:typeof i=="string"?i:void 0}}function XAe(i,e,t){return{asString:()=>mae(this,void 0,void 0,function*(){return""}),asFile:()=>({name:i,uri:e,data:t}),value:void 0}}var Zb=class{constructor(){this._entries=new Map}get size(){return this._entries.size}has(e){return this._entries.has(this.toKey(e))}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){let n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*entries(){for(let[e,t]of this._entries.entries())for(let n of t)yield[e,n]}values(){return Array.from(this._entries.values()).flat()}forEach(e){for(let[t,n]of this.entries())e(n,t)}toKey(e){return e.toLowerCase()}},um=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let i;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?i=crypto.getRandomValues.bind(crypto):i=function(n){for(let o=0;o<n.length;o++)n[o]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){i(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let n=0,o="";return o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+="-",o+=t[e[n++]],o+=t[e[n++]],o+="-",o+=t[e[n++]],o+=t[e[n++]],o+="-",o+=t[e[n++]],o+=t[e[n++]],o+="-",o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o}}(),TE={EDITORS:"CodeEditors",FILES:"CodeFiles"};function ZAe(i){var e;let t=[];if(i.dataTransfer&&i.dataTransfer.types.length>0){let n=i.dataTransfer.getData(TE.EDITORS);if(n)try{t.push(...Yb(n))}catch{}else try{let s=i.dataTransfer.getData(VC.RESOURCES);t.push(...ebe(s))}catch{}if(!((e=i.dataTransfer)===null||e===void 0)&&e.files)for(let s=0;s<i.dataTransfer.files.length;s++){let a=i.dataTransfer.files[s];if(a&&a.path)try{t.push({resource:$.file(a.path),isExternal:!0,allowWorkspaceOpen:!0})}catch{}}let o=i.dataTransfer.getData(TE.FILES);if(o)try{let s=JSON.parse(o);for(let a of s)t.push({resource:$.file(a),isExternal:!0,allowWorkspaceOpen:!0})}catch{}let r=oi.as(fae.DragAndDropContribution).getAll();for(let s of r){let a=i.dataTransfer.getData(s.dataFormatKey);if(a)try{t.push(...s.getEditorInputs(a))}catch{}}}return t}function ebe(i){let e=[];if(i){let t=JSON.parse(i);for(let n of t)if(n.indexOf(":")>0){let{selection:o,uri:r}=Ase($.parse(n));e.push({resource:r,options:{selection:o}})}}return e}var d9=class{constructor(){this._contributions=new Map}getAll(){return this._contributions.values()}},fae={DragAndDropContribution:"workbench.contributions.dragAndDrop"};oi.add(fae.DragAndDropContribution,new d9);var tbe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function h9(i){let e=new Zb;for(let t of i.items){let n=t.type;if(t.kind==="string"){let o=new Promise(r=>t.getAsString(r));e.append(n,dN(o))}else if(t.kind==="file"){let o=t.getAsFile();o&&e.append(n,ibe(o))}}return e}function ibe(i){let e=i.path?$.parse(i.path):void 0;return XAe(i.name,e,()=>tbe(this,void 0,void 0,function*(){return new Uint8Array(yield i.arrayBuffer())}))}var nbe=Object.freeze([TE.EDITORS,TE.FILES,VC.RESOURCES]);function obe(i,e,t=!1){var n;if(e.dataTransfer&&(t||!i.has(nr.uriList))){let o=ZAe(e).filter(r=>r.resource).map(r=>r.resource.toString());for(let r of(n=e.dataTransfer)===null||n===void 0?void 0:n.items){let s=r.getAsFile();s&&o.push(s.path?$.file(s.path).toString():s.name)}o.length&&i.replace(nr.uriList,dN(xJ.create(o)))}for(let o of nbe)i.delete(o)}var xJ=Object.freeze({create:i=>br(i.map(e=>e.toString())).join(`\r
`),parse:i=>i.split(`\r
`).filter(e=>!e.startsWith("#"))}),Di=class{static insert(e,t){return{range:new E(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}},kp=ze("contextService");function u9(i){let e=i;return typeof e?.id=="string"&&$.isUri(e.uri)}function rbe(i){if(i.configuration)return{id:i.id,configPath:i.configuration};if(i.folders.length===1)return{id:i.id,uri:i.folders[0].uri}}var g9=class{constructor(e,t,n,o,r){this._id=e,this._transient=n,this._configuration=o,this._ignorePathCasing=r,this._foldersMap=gd.forUris(this._ignorePathCasing,()=>!0),this.folders=t}get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e&&this._foldersMap.findSubstr(e)||null}updateFoldersMap(){this._foldersMap=gd.forUris(this._ignorePathCasing,()=>!0);for(let e of this.folders)this._foldersMap.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},kJ=class{constructor(i,e){this.raw=e,this.uri=i.uri,this.index=i.index,this.name=i.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}},Uee="code-workspace";m("codeWorkspace","Code Workspace");function Qee(i,e=Mn){return p_e(i,e)?i.charAt(0).toUpperCase()+i.slice(1):i}var sbe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},abe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ME=class{constructor(e){this._delegates=e}resolve(e){for(let t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}},NE=class{constructor(e,t,n,o){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=o}resolve(e){let{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,o=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){let r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(n=r.value,o=r.multiline)}if(n&&o&&e.snippet){let r=this._model.getLineContent(this._selection.startLineNumber),s=hi(r,0,this._selection.startColumn-1),a=s;e.snippet.walk(c=>c===e?!1:(c instanceof fr&&(a=hi(il(c.value).pop())),!0));let l=Zg(a,s);n=n.replace(/(\r\n|\r|\n)(.*)/g,(c,d,h)=>`${d}${a.substr(l)}${h}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){let n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}},RE=class{constructor(e,t){this._labelService=e,this._model=t}resolve(e){let{name:t}=e;if(t==="TM_FILENAME")return Dg(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){let n=Dg(this._model.uri.fsPath),o=n.lastIndexOf(".");return o<=0?n:n.slice(0,o)}else{if(t==="TM_DIRECTORY")return tY(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(rv(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}},FE=class{constructor(e,t,n,o){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=o}resolve(e){if(e.name!=="CLIPBOARD")return;let t=this._readClipboardText();if(t){if(this._spread){let n=t.split(/\r\n|\n|\r/).filter(o=>!SD(o));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}},BE=class{constructor(i,e,t){this._model=i,this._selection=e,this._languageConfigurationService=t}resolve(i){let{name:e}=i,t=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=this._languageConfigurationService.getLanguageConfiguration(t).comments;if(n){if(e==="LINE_COMMENT")return n.lineCommentToken||void 0;if(e==="BLOCK_COMMENT_START")return n.blockCommentStartToken||void 0;if(e==="BLOCK_COMMENT_END")return n.blockCommentEndToken||void 0}}};BE=sbe([abe(2,Yi)],BE);var au=class i{constructor(){this._date=new Date}resolve(e){let{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return i.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return i.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return i.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return i.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}};au.dayNames=[m("Sunday","Sunday"),m("Monday","Monday"),m("Tuesday","Tuesday"),m("Wednesday","Wednesday"),m("Thursday","Thursday"),m("Friday","Friday"),m("Saturday","Saturday")];au.dayNamesShort=[m("SundayShort","Sun"),m("MondayShort","Mon"),m("TuesdayShort","Tue"),m("WednesdayShort","Wed"),m("ThursdayShort","Thu"),m("FridayShort","Fri"),m("SaturdayShort","Sat")];au.monthNames=[m("January","January"),m("February","February"),m("March","March"),m("April","April"),m("May","May"),m("June","June"),m("July","July"),m("August","August"),m("September","September"),m("October","October"),m("November","November"),m("December","December")];au.monthNamesShort=[m("JanuaryShort","Jan"),m("FebruaryShort","Feb"),m("MarchShort","Mar"),m("AprilShort","Apr"),m("MayShort","May"),m("JuneShort","Jun"),m("JulyShort","Jul"),m("AugustShort","Aug"),m("SeptemberShort","Sep"),m("OctoberShort","Oct"),m("NovemberShort","Nov"),m("DecemberShort","Dec")];var PE=class{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;let t=rbe(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(u9(e))return Dg(e.uri.path);let t=Dg(e.configPath.path);return t.endsWith(Uee)&&(t=t.substr(0,t.length-Uee.length-1)),t}_resoveWorkspacePath(e){if(u9(e))return Qee(e.uri.fsPath);let t=Dg(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?Qee(n):"/"}},OE=class{resolve(e){let{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return um()}},lbe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},cbe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ew=class i{constructor(e,t,n){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=GX(t.placeholders,oa.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;let e=this._editor.getModel();this._editor.changeDecorations(t=>{for(let n of this._snippet.placeholders){let o=this._snippet.offset(n),r=this._snippet.fullLen(n),s=E.fromPositions(e.getPositionAt(this._offset+o),e.getPositionAt(this._offset+o+r)),a=n.isFinalTabstop?i._decor.inactiveFinal:i._decor.inactive,l=t.addDecoration(s,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let o=[];for(let r of this._placeholderGroups[this._placeholderGroupsIdx])if(r.transform){let s=this._placeholderDecorations.get(r),a=this._editor.getModel().getDecorationRange(s),l=this._editor.getModel().getValueInRange(a),c=r.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);o.push(Di.replace(a,c.join(this._editor.getModel().getEOL())))}o.length>0&&this._editor.executeEdits("snippet.placeholderTransform",o)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);let n=this._editor.getModel().changeDecorations(o=>{let r=new Set,s=[];for(let a of this._placeholderGroups[this._placeholderGroupsIdx]){let l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);s.push(new Se(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),o.changeDecorationOptions(l,a.isFinalTabstop?i._decor.activeFinal:i._decor.active),r.add(a);for(let d of this._snippet.enclosingPlaceholders(a)){let h=this._placeholderDecorations.get(d);o.changeDecorationOptions(h,d.isFinalTabstop?i._decor.activeFinal:i._decor.active),r.add(d)}}for(let[a,l]of this._placeholderDecorations)r.has(a)||o.changeDecorationOptions(l,a.isFinalTabstop?i._decor.inactiveFinal:i._decor.inactive);return s});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof oa){let n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){return this._snippet.placeholders.length===0||this._snippet.placeholders.length===1&&this._snippet.placeholders[0].isFinalTabstop}computePossibleSelections(){let e=new Map;for(let t of this._placeholderGroups){let n;for(let o of t){if(o.isFinalTabstop)break;n||(n=[],e.set(o.index,n));let r=this._placeholderDecorations.get(o),s=this._editor.getModel().getDecorationRange(r);if(!s){e.delete(o.index);break}n.push(s)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;let e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;let t=this._placeholderDecorations.get(e);if(!t)return;let n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof l0,!e)),e}merge(e){let t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(let o of this._placeholderGroups[this._placeholderGroupsIdx]){let r=e.shift();console.assert(r._offset!==-1),console.assert(!r._placeholderDecorations);let s=r._snippet.placeholderInfo.last.index;for(let l of r._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=o.index+(s+1)/this._nestingLevel:l.index=o.index+l.index/this._nestingLevel;this._snippet.replace(o,r._snippet.children);let a=this._placeholderDecorations.get(o);n.removeDecoration(a),this._placeholderDecorations.delete(o);for(let l of r._snippet.placeholders){let c=r._snippet.offset(l),d=r._snippet.fullLen(l),h=E.fromPositions(t.getPositionAt(r._offset+c),t.getPositionAt(r._offset+c+d)),u=n.addDecoration(h,i._decor.inactive);this._placeholderDecorations.set(l,u)}}this._placeholderGroups=GX(this._snippet.placeholders,oa.compareByIndex)})}};ew._decor={active:rt.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:rt.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:rt.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:rt.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var jee={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},HE=class Ic{constructor(e,t,n=jee,o){this._editor=e,this._template=t,this._options=n,this._languageConfigurationService=o,this._templateMerges=[],this._snippets=[]}static adjustWhitespace(e,t,n,o,r){let s=e.getLineContent(t.lineNumber),a=hi(s,0,t.column-1),l;return n.walk(c=>{if(!(c instanceof fr)||c.parent instanceof l0)return!0;let d=c.value.split(/\r\n|\r|\n/);if(o){let u=n.offset(c);if(u===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??n.toString();let g=l.charCodeAt(u-1);(g===10||g===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let g=1;g<d.length;g++)d[g]=e.normalizeIndentation(a+d[g])}let h=d.join(e.getEOL());return h!==c.value&&(c.parent.replace(c,[new fr(h)]),l=void 0),!0}),a}static adjustSelection(e,t,n,o){if(n!==0||o!==0){let{positionLineNumber:r,positionColumn:s}=t,a=s-n,l=s+o,c=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:l});t=Se.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,o,r,s,a,l,c){let d=[],h=[];if(!e.hasModel())return{edits:d,snippets:h};let u=e.getModel(),g=e.invokeWithinContext(C=>C.get(kp)),p=e.invokeWithinContext(C=>new RE(C.get(yp),u)),f=()=>a,v=u.getValueInRange(Ic.adjustSelection(u,e.getSelection(),n,0)),b=u.getValueInRange(Ic.adjustSelection(u,e.getSelection(),0,o)),A=u.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),w=e.getSelections().map((C,k)=>({selection:C,idx:k})).sort((C,k)=>E.compareRangesUsingStarts(C.selection,k.selection));for(let{selection:C,idx:k}of w){let L=Ic.adjustSelection(u,C,n,0),S=Ic.adjustSelection(u,C,0,o);v!==u.getValueInRange(L)&&(L=C),b!==u.getValueInRange(S)&&(S=C);let y=C.setStartPosition(L.startLineNumber,L.startColumn).setEndPosition(S.endLineNumber,S.endColumn),M=new Ps().parse(t,!0,r),O=y.getStartPosition(),H=Ic.adjustWhitespace(u,O,M,s||k>0&&A!==u.getLineFirstNonWhitespaceColumn(C.positionLineNumber),!0);M.resolveVariables(new ME([p,new FE(f,k,w.length,e.getOption(73)==="spread"),new NE(u,C,k,l),new BE(u,C,c),new au,new PE(g),new OE])),d[k]=Di.replace(y,M.toString()),d[k].identifier={major:k,minor:0},d[k]._isTracked=!0,h[k]=new ew(e,M,H)}return{edits:d,snippets:h}}static createEditsAndSnippetsFromEdits(e,t,n,o,r,s,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};let l=[],c=e.getModel(),d=new Ps,h=new Gb,u=new ME([e.invokeWithinContext(p=>new RE(p.get(yp),c)),new FE(()=>r,0,e.getSelections().length,e.getOption(73)==="spread"),new NE(c,e.getSelection(),0,s),new BE(c,e.getSelection(),a),new au,new PE(e.invokeWithinContext(p=>p.get(kp))),new OE]);t=t.sort((p,f)=>E.compareRangesUsingStarts(p.range,f.range));let g=0;for(let p=0;p<t.length;p++){let{range:f,template:v}=t[p];if(p>0){let C=t[p-1].range,k=E.fromPositions(C.getEndPosition(),f.getStartPosition()),L=new fr(c.getValueInRange(k));h.appendChild(L),g+=L.value.length}d.parseFragment(v,h),h.resolveVariables(u);let b=h.toString(),A=b.slice(g);g=b.length;let w=Di.replace(f,A);w.identifier={major:p,minor:0},w._isTracked=!0,l.push(w)}return d.ensureFinalTabstop(h,n,!0),{edits:l,snippets:[new ew(e,h,"")]}}dispose(){st(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;let{edits:e,snippets:t}=typeof this._template=="string"?Ic.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Ic.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,n=>{let o=n.filter(r=>!!r.identifier);for(let r=0;r<t.length;r++)t[r].initialize(o[r].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):o.map(r=>Se.fromPositions(r.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=jee){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);let{edits:n,snippets:o}=Ic.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,r=>{let s=r.filter(l=>!!l.identifier);for(let l=0;l<o.length;l++)o[l].initialize(s[l].textChange);let a=o[0].isTrivialSnippet;if(!a){for(let l of this._snippets)l.merge(o);console.assert(o.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):s.map(l=>Se.fromPositions(l.range.getEndPosition()))})}next(){let e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){let e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){let t=[];for(let n of this._snippets){let o=n.move(e);t.push(...o)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;let e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(let n of this._snippets){let o=n.computePossibleSelections();if(t.size===0)for(let[r,s]of o){s.sort(E.compareRangesUsingStarts);for(let a of e)if(s[0].containsRange(a)){t.set(r,[]);break}}if(t.size===0)return!1;t.forEach((r,s)=>{r.push(...o.get(s))})}e.sort(E.compareRangesUsingStarts);for(let[n,o]of t){if(o.length!==e.length){t.delete(n);continue}o.sort(E.compareRangesUsingStarts);for(let r=0;r<o.length;r++)if(!o[r].containsRange(e[r])){t.delete(n);continue}}return t.size>0}};HE=lbe([cbe(3,Yi)],HE);var dbe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Hy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Wy={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},Nn=class u1{constructor(e,t,n,o,r){this._editor=e,this._logService=t,this._languageFeaturesService=n,this._languageConfigurationService=r,this._snippetListener=new ne,this._modelVersionId=-1,this._inSnippet=u1.InSnippetMode.bindTo(o),this._hasNextTabstop=u1.HasNextTabstop.bindTo(o),this._hasPrevTabstop=u1.HasPrevTabstop.bindTo(o)}static get(e){return e.getContribution(u1.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}apply(e,t){try{this._doInsert(e,typeof t>"u"?Wy:Object.assign(Object.assign({},Wy),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_edits=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}insert(e,t){try{this._doInsert(e,typeof t>"u"?Wy:Object.assign(Object.assign({},Wy),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var n;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(ai(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new HE(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((n=this._session)===null||n===void 0)&&n.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:(r,s)=>{if(!this._session||r!==this._editor.getModel()||!q.equals(this._editor.getPosition(),s))return;let{activeChoice:a}=this._session;if(!a||a.choice.options.length===0)return;let l=r.getValueInRange(a.range),c=!!a.choice.options.find(h=>h.value===l),d=[];for(let h=0;h<a.choice.options.length;h++){let u=a.choice.options[h];d.push({kind:13,label:u.value,insertText:u.value,sortText:"a".repeat(h+1),range:a.range,filterText:c?`${l}_${u.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:m("next","Go to next placeholder...")}})}return{suggestions:d}}};let o=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme},this._choiceCompletionItemProvider);this._snippetListener.add(o)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(o=>o.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}let{activeChoice:e}=this._session;if(!e||!this._choiceCompletionItemProvider){this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,queueMicrotask(()=>{NAe(this._editor,this._choiceCompletionItemProvider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};Nn.ID="snippetController2";Nn.InSnippetMode=new Le("inSnippetMode",!1,m("inSnippetMode","Whether the editor in current in snippet mode"));Nn.HasNextTabstop=new Le("hasNextTabstop",!1,m("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Nn.HasPrevTabstop=new Le("hasPrevTabstop",!1,m("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Nn=dbe([Hy(1,no),Hy(2,Te),Hy(3,Ze),Hy(4,Yi)],Nn);Wt(Nn.ID,Nn);var hN=$n.bindToContribution(Nn.get);pe(new hN({id:"jumpToNextSnippetPlaceholder",precondition:we.and(Nn.InSnippetMode,Nn.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:100+30,kbExpr:B.editorTextFocus,primary:2}}));pe(new hN({id:"jumpToPrevSnippetPlaceholder",precondition:we.and(Nn.InSnippetMode,Nn.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:100+30,kbExpr:B.editorTextFocus,primary:1026}}));pe(new hN({id:"leaveSnippet",precondition:Nn.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:100+30,kbExpr:B.editorTextFocus,primary:9,secondary:[1033]}}));pe(new hN({id:"acceptSnippet",precondition:Nn.InSnippetMode,handler:i=>i.finish()}));function _ae(i,e,t){let n=Nn.get(i);return n?(i.focus(),n.apply(t.map(o=>({range:Se.liftSelection(o),template:e}))),n.isInSnippet()):!1}var hbe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},zy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Kee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},MR="application/vnd.code.copyMetadata",tw=class extends J{constructor(i,e,t,n,o){super(),this._bulkEditService=e,this._clipboardService=t,this._configurationService=n,this._languageFeaturesService=o,this._editor=i;let r=i.getContainerDomNode();this._register(le(r,"copy",s=>this.handleCopy(s))),this._register(le(r,"cut",s=>this.handleCopy(s))),this._register(le(r,"paste",s=>this.handlePaste(s),!0))}arePasteActionsEnabled(i){return this._configurationService.getValue("editor.experimental.pasteActions.enabled",{resource:i.uri})}handleCopy(i){var e;if(!i.clipboardData||!this._editor.hasTextFocus())return;let t=this._editor.getModel(),n=this._editor.getSelections();if(!t||!(n!=null&&n.length)||!this.arePasteActionsEnabled(t))return;let o=[...n],r=n[0],s=r.isEmpty();if(s){if(!this._editor.getOption(33))return;o[0]=new E(r.startLineNumber,0,r.startLineNumber,t.getLineLength(r.startLineNumber))}let a=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(h=>!!h.prepareDocumentPaste);if(!a.length){this.setCopyMetadata(i.clipboardData,{wasFromEmptySelection:s});return}let l=h9(i.clipboardData),c=um();this.setCopyMetadata(i.clipboardData,{id:c,wasFromEmptySelection:s});let d=Gn(h=>Kee(this,void 0,void 0,function*(){let u=yield Promise.all(a.map(g=>g.prepareDocumentPaste(t,o,l,h)));for(let g of u)g?.forEach((p,f)=>{l.replace(f,p)});return l}));(e=this._currentClipboardItem)===null||e===void 0||e.dataTransferPromise.cancel(),this._currentClipboardItem={handle:c,dataTransferPromise:d}}setCopyMetadata(i,e){i.setData(MR,JSON.stringify(e))}handlePaste(i){var e,t,n;return Kee(this,void 0,void 0,function*(){if(!i.clipboardData||!this._editor.hasTextFocus())return;let o=this._editor.getSelections();if(!(o!=null&&o.length)||!this._editor.hasModel())return;let r=this._editor.getModel();if(!this.arePasteActionsEnabled(r))return;let s,a=(e=i.clipboardData)===null||e===void 0?void 0:e.getData(MR);a&&typeof a=="string"&&(s=JSON.parse(a));let l=this._languageFeaturesService.documentPasteEditProvider.ordered(r);if(!l.length)return;i.preventDefault(),i.stopImmediatePropagation();let c=r.getVersionId(),d=new Ed(this._editor,3);try{let h=h9(i.clipboardData);if(s!=null&&s.id&&((t=this._currentClipboardItem)===null||t===void 0?void 0:t.handle)===s.id&&(yield this._currentClipboardItem.dataTransferPromise).forEach((p,f)=>{h.replace(f,p)}),!h.has(nr.uriList)){let p=yield this._clipboardService.readResources();p.length&&h.append(nr.uriList,dN(xJ.create(p)))}h.delete(MR);for(let p of l){if(!p.pasteMimeTypes.some(v=>v.toLowerCase()===VC.FILES.toLowerCase()?[...h.values()].some(b=>b.asFile()):h.has(v)))continue;let f=yield p.provideDocumentPasteEdits(r,o,h,d.token);if(c!==r.getVersionId())return;if(f){_ae(this._editor,typeof f.insertText=="string"?Ps.escape(f.insertText):f.insertText.snippet,o),f.additionalEdit&&(yield this._bulkEditService.apply(kd.convert(f.additionalEdit),{editor:this._editor}));return}}let u=(n=h.get(nr.text))!==null&&n!==void 0?n:h.get("text");if(!u)return;let g=yield u.asString();if(c!==r.getVersionId())return;this._editor.trigger("keyboard","paste",{text:g,pasteOnNewLine:s?.wasFromEmptySelection,multicursorText:null})}finally{d.dispose()}})}};tw.ID="editor.contrib.copyPasteActionController";tw=hbe([zy(1,rm),zy(2,Da),zy(3,Ot),zy(4,Te)],tw);Wt(tw.ID,tw);oi.as(Sa.Configuration).registerConfiguration(Object.assign(Object.assign({},iJ),{properties:{"editor.experimental.pasteActions.enabled":{type:"boolean",scope:5,description:m("pasteActions","Enable/disable running edits from extensions on paste."),default:!1}}}));var vg=class i{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;let o=t.length,r=e.length;if(n+o>r)return!1;for(let s=0;s<o;s++){let a=e.charCodeAt(n+s),l=t.charCodeAt(s);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,o,r,s){let a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,h=r.getLineContent(a),u=r.getLineContent(c),g=h.lastIndexOf(t,l-1+t.length),p=u.indexOf(n,d-1-n.length);if(g!==-1&&p!==-1)if(a===c)h.substring(g+t.length,p).indexOf(n)>=0&&(g=-1,p=-1);else{let v=h.substring(g+t.length),b=u.substring(0,p);(v.indexOf(n)>=0||b.indexOf(n)>=0)&&(g=-1,p=-1)}let f;g!==-1&&p!==-1?(o&&g+t.length<h.length&&h.charCodeAt(g+t.length)===32&&(t=t+" "),o&&p>0&&u.charCodeAt(p-1)===32&&(n=" "+n,p-=1),f=i._createRemoveBlockCommentOperations(new E(a,g+t.length+1,c,p+1),t,n)):(f=i._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=f.length===1?n:null);for(let v of f)s.addTrackedEditOperation(v.range,v.text)}static _createRemoveBlockCommentOperations(e,t,n){let o=[];return E.isEmpty(e)?o.push(Di.delete(new E(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(o.push(Di.delete(new E(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),o.push(Di.delete(new E(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),o}static _createAddBlockCommentOperations(e,t,n,o){let r=[];return E.isEmpty(e)?r.push(Di.replace(new E(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(r.push(Di.insert(new q(e.startLineNumber,e.startColumn),t+(o?" ":""))),r.push(Di.insert(new q(e.endLineNumber,e.endColumn),(o?" ":"")+n))),r}getEditOperations(e,t){let n=this._selection.startLineNumber,o=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);let r=e.getLanguageIdAtPosition(n,o),s=this.languageConfigurationService.getLanguageConfiguration(r).comments;!s||!s.blockCommentStartToken||!s.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){let n=t.getInverseEditOperations();if(n.length===2){let o=n[0],r=n[1];return new Se(o.range.endLineNumber,o.range.endColumn,r.range.startLineNumber,r.range.startColumn)}else{let o=n[0].range,r=this._usedEndToken?-this._usedEndToken.length-1:0;return new Se(o.endLineNumber,o.endColumn+r,o.endLineNumber,o.endColumn+r)}}},p9=class i{constructor(e,t,n,o,r,s,a){this.languageConfigurationService=e,this._selection=t,this._tabSize=n,this._type=o,this._insertSpace=r,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,n,o){e.tokenization.tokenizeIfCheap(t);let r=e.getLanguageIdAtPosition(t,1),s=o.getLanguageConfiguration(r).comments,a=s?s.lineCommentToken:null;if(!a)return null;let l=[];for(let c=0,d=n-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,n,o,r,s,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let h=0,u=o.length;h<u;h++){let g=o[h],p=r+h;if(p===r&&a){g.ignore=!0;continue}let f=n.getLineContent(p),v=rr(f);if(v===-1){g.ignore=s,g.commentStrOffset=f.length;continue}if(c=!1,g.ignore=!1,g.commentStrOffset=v,d&&!vg._haystackHasNeedleAtOffset(f,g.commentStr,v)&&(e===0?d=!1:e===1||(g.ignore=!0)),d&&t){let b=v+g.commentStrLength;b<f.length&&f.charCodeAt(b)===32&&(g.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let h=0,u=o.length;h<u;h++)o[h].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:o}}static _gatherPreflightData(e,t,n,o,r,s,a,l){let c=i._gatherPreflightCommentStrings(n,o,r,l);return c===null?{supported:!1}:i._analyzeLines(e,t,n,c,o,s,a,l)}_executeLineComments(e,t,n,o){let r;n.shouldRemoveComments?r=i._createRemoveLineCommentsOperations(n.lines,o.startLineNumber):(i._normalizeInsertionPoint(e,n.lines,o.startLineNumber,this._tabSize),r=this._createAddLineCommentsOperations(n.lines,o.startLineNumber));let s=new q(o.positionLineNumber,o.positionColumn);for(let a=0,l=r.length;a<l;a++)t.addEditOperation(r[a].range,r[a].text),E.isEmpty(r[a].range)&&E.getStartPosition(r[a].range).equals(s)&&e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(r[a].text||"").length);this._selectionId=t.trackSelection(o)}_attemptRemoveBlockComment(e,t,n,o){let r=t.startLineNumber,s=t.endLineNumber,a=o.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),l=e.getLineContent(r).lastIndexOf(n,a-1),c=e.getLineContent(s).indexOf(o,t.endColumn-1-n.length);return l!==-1&&c===-1&&(c=e.getLineContent(r).indexOf(o,l+n.length),s=r),l===-1&&c!==-1&&(l=e.getLineContent(s).lastIndexOf(n,c),r=s),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(r).indexOf(n),l!==-1&&(c=e.getLineContent(r).indexOf(o,l+n.length))),l!==-1&&e.getLineContent(r).charCodeAt(l+n.length)===32&&(n+=" "),c!==-1&&e.getLineContent(s).charCodeAt(c-1)===32&&(o=" "+o,c-=1),l!==-1&&c!==-1?vg._createRemoveBlockCommentOperations(new E(r,l+n.length+1,s,c+1),n,o):null}_executeBlockComment(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);let o=e.getLanguageIdAtPosition(n.startLineNumber,1),r=this.languageConfigurationService.getLanguageConfiguration(o).comments;if(!r||!r.blockCommentStartToken||!r.blockCommentEndToken)return;let s=r.blockCommentStartToken,a=r.blockCommentEndToken,l=this._attemptRemoveBlockComment(e,n,s,a);if(!l){if(n.isEmpty()){let c=e.getLineContent(n.startLineNumber),d=rr(c);d===-1&&(d=c.length),l=vg._createAddBlockCommentOperations(new E(n.startLineNumber,d+1,n.startLineNumber,c.length+1),s,a,this._insertSpace)}else l=vg._createAddBlockCommentOperations(new E(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),s,a,this._insertSpace);l.length===1&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(n);for(let c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new E(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let o=i._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return o.supported?this._executeLineComments(e,t,o,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new Se(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let n=[];for(let o=0,r=e.length;o<r;o++){let s=e[o];s.ignore||n.push(Di.delete(new E(t+o,s.commentStrOffset+1,t+o,s.commentStrOffset+s.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){let n=[],o=this._insertSpace?" ":"";for(let r=0,s=e.length;r<s;r++){let a=e[r];a.ignore||n.push(Di.insert(new q(t+r,a.commentStrOffset+1),a.commentStr+o))}return n}static nextVisibleColumn(e,t,n,o){return n?e+(t-e%t):e+o}static _normalizeInsertionPoint(e,t,n,o){let r=1073741824,s,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;let d=e.getLineContent(n+l),h=0;for(let u=0,g=t[l].commentStrOffset;h<r&&u<g;u++)h=i.nextVisibleColumn(h,o,d.charCodeAt(u)===9,1);h<r&&(r=h)}r=Math.floor(r/o)*o;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;let d=e.getLineContent(n+l),h=0;for(s=0,a=t[l].commentStrOffset;h<r&&s<a;s++)h=i.nextVisibleColumn(h,o,d.charCodeAt(s)===9,1);h>r?t[l].commentStrOffset=s-1:t[l].commentStrOffset=s}}},iw=class extends Ie{constructor(e,t){super(t),this._type=e}run(e,t){let n=e.get(Yi);if(!t.hasModel())return;let o=t.getModel(),r=[],s=o.getOptions(),a=t.getOption(19),l=t.getSelections().map((d,h)=>({selection:d,index:h,ignoreFirstLine:!1}));l.sort((d,h)=>E.compareRangesUsingStarts(d.selection,h.selection));let c=l[0];for(let d=1;d<l.length;d++){let h=l[d];c.selection.endLineNumber===h.selection.startLineNumber&&(c.index<h.index?h.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=h))}for(let d of l)r.push(new p9(n,d.selection,s.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},m9=class extends iw{constructor(){super(0,{id:"editor.action.commentLine",label:m("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:z.MenubarEditMenu,group:"5_insert",title:m({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}},f9=class extends iw{constructor(){super(1,{id:"editor.action.addCommentLine",label:m("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2081),weight:100}})}},_9=class extends iw{constructor(){super(2,{id:"editor.action.removeCommentLine",label:m("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2099),weight:100}})}},v9=class extends Ie{constructor(){super({id:"editor.action.blockComment",label:m("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:z.MenubarEditMenu,group:"5_insert",title:m({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){let n=e.get(Yi);if(!t.hasModel())return;let o=t.getOption(19),r=[],s=t.getSelections();for(let a of s)r.push(new vg(a,o.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}};fe(m9);fe(f9);fe(_9);fe(v9);var ube=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},km=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},u0=class vae{constructor(e,t,n,o,r,s,a){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=o,this._keybindingService=r,this._menuService=s,this._configurationService=a,this._toDispose=new ne,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(l=>this._onContextMenu(l))),this._toDispose.add(this._editor.onMouseWheel(l=>{if(this._contextMenuIsBeingShownCount>0){let c=this._contextViewService.getContextViewElement(),d=l.srcElement;d.shadowRoot&&Yg(c)===d.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(l=>{this._editor.getOption(20)&&l.keyCode===58&&(l.preventDefault(),l.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(vae.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu({x:e.event.posx-1,width:2,y:e.event.posy-1,height:2});if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let n=!1;for(let o of this._editor.getSelections())if(o.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;let t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?z.SimpleEditorContext:z.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){let n=[],o=this._menuService.createMenu(t,this._contextKeyService),r=o.getActions({arg:e.uri});o.dispose();for(let s of r){let[,a]=s,l=0;for(let c of a)if(c instanceof RA){let d=this._getMenuActions(e,c.item.submenu);d.length>0&&(n.push(new Xg(c.id,c.label,d)),l++)}else n.push(c),l++;l&&n.push(new Lo)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;let n=this._editor.getOption(55);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();let r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),s=Eo(this._editor.getDomNode()),a=s.left+r.left,l=s.top+r.top+r.height;t={x:a,y:l}}let o=this._editor.getOption(117)&&!jl;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:o?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:r=>{let s=this._keybindingFor(r);if(s)return new hp(r,r,{label:!0,keybinding:s.getLabel(),isMenu:!0});let a=r;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new hp(r,r,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:r=>this._keybindingFor(r),onHide:r=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;let t=this._editor.getOption(67),n=0,o=c=>({id:`menu-action-${++n}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run,dispose:()=>null}),r=(c,d)=>new Xg(`menu-action-${++n}`,c,d,void 0),s=(c,d,h,u,g)=>{if(!d)return o({label:c,enabled:d,run:()=>{}});let p=v=>()=>{this._configurationService.updateValue(h,v)},f=[];for(let v of g)f.push(o({label:v.label,checked:u===v.value,run:p(v.value)}));return r(c,f)},a=[];a.push(o({label:m("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Lo),a.push(o({label:m("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(s(m("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:m("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:m("context.minimap.size.fill","Fill"),value:"fill"},{label:m("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(s(m("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:m("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:m("context.minimap.slider.always","Always"),value:"always"}]));let l=this._editor.getOption(117)&&!jl;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};u0.ID="editor.contrib.contextmenu";u0=ube([km(1,Fd),km(2,om),km(3,Ze),km(4,An),km(5,em),km(6,Ot)],u0);var A9=class extends Ie{constructor(){super({id:"editor.action.showContextMenu",label:m("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:1092,weight:100}})}run(e,t){var n;(n=u0.get(t))===null||n===void 0||n.showContextMenu()}};Wt(u0.ID,u0);fe(A9);var q1=class{constructor(e){this.selections=e}equals(e){let t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let o=0;o<t;o++)if(!this.selections[o].equalsSelection(e.selections[o]))return!1;return!0}},$1=class{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}},Ep=class i extends J{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;let n=new q1(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new $1(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(i.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new $1(new q1(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new $1(new q1(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};Ep.ID="editor.contrib.cursorUndoRedoController";var b9=class extends Ie{constructor(){super({id:"cursorUndo",label:m("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:2099,weight:100}})}run(e,t,n){var o;(o=Ep.get(t))===null||o===void 0||o.cursorUndo()}},w9=class extends Ie{constructor(){super({id:"cursorRedo",label:m("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){var o;(o=Ep.get(t))===null||o===void 0||o.cursorRedo()}};Wt(Ep.ID,Ep);fe(b9);fe(w9);var C9=class{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){let n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new E(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new Se(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new Se(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new Se(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Se(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Se(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}};function Em(i){return gt?i.altKey:i.ctrlKey}var Lp=class i extends J{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(Em(e)&&(this._modifierPressed=!0),this._mouseDown&&Em(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(Em(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===i.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let n=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(n.length===1)this._dragSelection=n[0];else return}Em(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new q(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){let o=this._editor.getSelection();if(o){let{selectionStartLineNumber:r,selectionStartColumn:s}=o;n=[new Se(r,s,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(o=>o.containsPosition(t)?new Se(t.lineNumber,t.column,t.lineNumber,t.column):o);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(Em(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(i.ID,new C9(this._dragSelection,t,Em(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new E(e.lineNumber,e.column,e.lineNumber,e.column),options:i._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};Lp.ID="editor.contrib.dragAndDrop";Lp.TRIGGER_KEY_VALUE=gt?6:5;Lp._DECORATION_OPTIONS=rt.register({description:"dnd-target",className:"dnd-target"});Wt(Lp.ID,Lp);var Aae=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},g1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},WS=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},nw=class extends J{constructor(i,e,t,n,o){super(),this._bulkEditService=e,this._languageFeaturesService=t,this._progressService=n,this._register(i.onDropIntoEditor(r=>this.onDropIntoEditor(i,r.position,r.event))),this._languageFeaturesService.documentOnDropEditProvider.register("*",new y9(o))}onDropIntoEditor(i,e,t){return WS(this,void 0,void 0,function*(){if(!t.dataTransfer||!i.hasModel())return;let n=i.getModel(),o=n.getVersionId(),r=yield this.extractDataTransferData(t);if(r.size===0||i.getModel().getVersionId()!==o)return;let s=new Ed(i,1);try{let a=this._languageFeaturesService.documentOnDropEditProvider.ordered(n),l=yield this._progressService.withProgress({location:15,delay:750,title:m("dropProgressTitle","Running drop handlers..."),cancellable:!0},()=>fY((()=>WS(this,void 0,void 0,function*(){for(let c of a){let d=yield c.provideDocumentOnDropEdits(n,e,r,s.token);if(s.token.isCancellationRequested)return;if(d)return d}}))(),s.token),()=>{s.cancel()});if(s.token.isCancellationRequested||i.getModel().getVersionId()!==o)return;if(l){let c=new E(e.lineNumber,e.column,e.lineNumber,e.column);_ae(i,typeof l.insertText=="string"?Ps.escape(l.insertText):l.insertText.snippet,[Se.fromRange(c,0)]),l.additionalEdit&&(yield this._bulkEditService.apply(kd.convert(l.additionalEdit),{editor:i}));return}}finally{s.dispose()}})}extractDataTransferData(i){return WS(this,void 0,void 0,function*(){if(!i.dataTransfer)return new Zb;let e=h9(i.dataTransfer);return obe(e,i),e})}};nw.ID="editor.contrib.dropIntoEditorController";nw=Aae([g1(1,rm),g1(2,Te),g1(3,QC),g1(4,kp)],nw);var y9=class{constructor(i){this._workspaceContextService=i}provideDocumentOnDropEdits(i,e,t,n){var o;return WS(this,void 0,void 0,function*(){let r=t.get(nr.uriList);if(r){let a=yield r.asString(),l=this.getUriListInsertText(a);if(l)return{insertText:l}}let s=(o=t.get("text"))!==null&&o!==void 0?o:t.get(nr.text);if(s)return{insertText:yield s.asString()}})}getUriListInsertText(i){let e=[];for(let t of xJ.parse(i))try{e.push($.parse(t))}catch{}if(e.length)return e.map(t=>{let n=this._workspaceContextService.getWorkspaceFolder(t);if(n){let o=wre(n.uri,t);if(o)return o}return t.fsPath}).join(" ")}};y9=Aae([g1(0,kp)],y9);Wt(nw.ID,nw);var Id=class i{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){let e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){let t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(let n of t){let o=n.options;if(o===i._FIND_MATCH_DECORATION||o===i._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let o=0,r=this._decorations.length;o<r;o++){let s=this._editor.getModel().getDecorationRange(this._decorations[o]);if(e.equalsRange(s)){t=this._decorations[o],n=o+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(o=>{if(this._highlightedDecorationId!==null&&(o.changeDecorationOptions(this._highlightedDecorationId,i._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,o.changeDecorationOptions(this._highlightedDecorationId,i._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(o.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let r=this._editor.getModel().getDecorationRange(t);if(r.startLineNumber!==r.endLineNumber&&r.endColumn===1){let s=r.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(s);r=new E(r.startLineNumber,r.startColumn,s,a)}this._rangeHighlightDecorationId=o.addDecoration(r,i._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let o=i._FIND_MATCH_DECORATION,r=[];if(e.length>1e3){o=i._FIND_MATCH_NO_OVERVIEW_DECORATION;let a=this._editor.getModel().getLineCount(),l=this._editor.getLayoutInfo().height/a,c=Math.max(2,Math.ceil(3/l)),d=e[0].range.startLineNumber,h=e[0].range.endLineNumber;for(let u=1,g=e.length;u<g;u++){let p=e[u].range;h+c>=p.startLineNumber?p.endLineNumber>h&&(h=p.endLineNumber):(r.push({range:new E(d,1,h,1),options:i._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),d=p.startLineNumber,h=p.endLineNumber)}r.push({range:new E(d,1,h,1),options:i._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let a=0,l=e.length;a<l;a++)s[a]={range:e[a].range,options:o};this._decorations=n.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,r),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,i._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],o=this._editor.getModel().getDecorationRange(n);if(!(!o||o.endLineNumber>e.lineNumber)&&(o.endLineNumber<e.lineNumber||!(o.endColumn>e.column)))return o}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let o=this._decorations[t],r=this._editor.getModel().getDecorationRange(o);if(!(!r||r.startLineNumber<e.lineNumber)&&(r.startLineNumber>e.lineNumber||!(r.startColumn<e.column)))return r}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};Id._CURRENT_FIND_MATCH_DECORATION=rt.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Xi(TY),position:us.Center},minimap:{color:Xi(af),position:xs.Inline}});Id._FIND_MATCH_DECORATION=rt.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Xi(TY),position:us.Center},minimap:{color:Xi(af),position:xs.Inline}});Id._FIND_MATCH_NO_OVERVIEW_DECORATION=rt.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Id._FIND_MATCH_ONLY_OVERVIEW_DECORATION=rt.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Xi(TY),position:us.Center}});Id._RANGE_HIGHLIGHT_DECORATION=rt.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Id._FIND_SCOPE_DECORATION=rt.register({description:"find-scope",className:"findScope",isWholeLine:!0});var S9=class{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let s=0;s<this._ranges.length;s++)n.push({range:this._ranges[s],text:this._replaceStrings[s]});n.sort((s,a)=>E.compareRangesUsingStarts(s.range,a.range));let o=[],r=n[0];for(let s=1;s<n.length;s++)r.range.endLineNumber===n[s].range.startLineNumber&&r.range.endColumn===n[s].range.startColumn?(r.range=r.range.plusRange(n[s].range),r.text=r.text+n[s].text):(o.push(r),r=n[s]);o.push(r);for(let s of o)t.addEditOperation(s.range,s.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}};function bae(i,e){if(i&&i[0]!==""){let t=qee(i,e,"-"),n=qee(i,e,"_");return t&&!n?$ee(i,e,"-"):!t&&n?$ee(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():jue(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function qee(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function $ee(i,e,t){let n=e.split(t),o=i[0].split(t),r="";return n.forEach((s,a)=>{r+=bae([o[a]],s)+t}),r.slice(0,-1)}var WE=class{constructor(e){this.staticValue=e,this.kind=0}},D9=class{constructor(e){this.pieces=e,this.kind=1}},ow=class i{constructor(e){!e||e.length===0?this._state=new WE(""):e.length===1&&e[0].staticValue!==null?this._state=new WE(e[0].staticValue):this._state=new D9(e)}static fromStaticValue(e){return new i([t_.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?bae(e,this._state.staticValue):this._state.staticValue;let n="";for(let o=0,r=this._state.pieces.length;o<r;o++){let s=this._state.pieces[o];if(s.staticValue!==null){n+=s.staticValue;continue}let a=i._substitute(s.matchIndex,e);if(s.caseOps!==null&&s.caseOps.length>0){let l=[],c=s.caseOps.length,d=0;for(let h=0,u=a.length;h<u;h++){if(d>=c){l.push(a.slice(h));break}switch(s.caseOps[d]){case"U":l.push(a[h].toUpperCase());break;case"u":l.push(a[h].toUpperCase()),d++;break;case"L":l.push(a[h].toLowerCase());break;case"l":l.push(a[h].toLowerCase()),d++;break;default:l.push(a[h])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}},t_=class i{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new i(e,-1,null)}static caseOps(e,t){return new i(null,e,t)}},x9=class{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=t_.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=t_.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=t_.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new ow(this._result)}};function gbe(i){if(!i||i.length===0)return new ow(null);let e=[],t=new x9(i);for(let n=0,o=i.length;n<o;n++){let r=i.charCodeAt(n);if(r===92){if(n++,n>=o)break;let s=i.charCodeAt(n);switch(s){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(s));break}continue}if(r===36){if(n++,n>=o)break;let s=i.charCodeAt(n);if(s===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(s===48||s===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=s&&s<=57){let a=s-48;if(n+1<o){let l=i.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}var Cu=new Le("findWidgetVisible",!1);Cu.toNegated();var uN=new Le("findInputFocussed",!1),EJ=new Le("replaceInputFocussed",!1),Vy={primary:545,mac:{primary:2593}},Uy={primary:565,mac:{primary:2613}},Qy={primary:560,mac:{primary:2608}},jy={primary:554,mac:{primary:2602}},Ky={primary:558,mac:{primary:2606}},Ci={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},_h=19999,pbe=240,k9=class i{constructor(e,t){this._toDispose=new ne,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Sr,this._decorations=new Id(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new jt(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,st(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},pbe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new E(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let o=this._findMatches(n,!1,_h);this._decorations.set(o,n);let r=this._editor.getSelection(),s=this._decorations.getCurrentMatchesPosition(r);if(s===0&&o.length>0){let a=Coe(o.map(l=>l.range),l=>E.compareRangesUsingStarts(l,r)>=0);s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(37).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:o}=e,r=this._editor.getModel();return t||o===1?(n===1?n=r.getLineCount():n--,o=r.getLineMaxColumn(n)):o--,new q(n,o)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){let d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<_h){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),o=i._getSearchRange(this._editor.getModel(),n);o.getEndPosition().isBefore(e)&&(e=o.getEndPosition()),e.isBefore(o.getStartPosition())&&(e=o.getEndPosition());let{lineNumber:r,column:s}=e,a=this._editor.getModel(),l=new q(r,s),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,!1)),!!c){if(!t&&!o.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:o}=e,r=this._editor.getModel();return t||o===r.getLineMaxColumn(n)?(n===r.getLineCount()?n=1:n++,o=1):o++,new q(n,o)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){let n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<_h){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,o=!1){if(this._cannotFind())return null;let r=this._decorations.getFindScope(),s=i._getSearchRange(this._editor.getModel(),r);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:a,column:l}=e,c=this._editor.getModel(),d=new q(a,l),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t)),h?!o&&!s.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,n,!0):h:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?gbe(this._state.replaceString):ow.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let o=e.buildReplaceString(n.matches,this._state.preserveCase),r=new Vn(t,o);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new q(t.startLineNumber,t.startColumn+o.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){let o=(e||[null]).map(r=>i._getSearchRange(this._editor.getModel(),r));return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t,n)}replaceAll(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=_h?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){let e=new Wc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null).parseSearchRequest();if(!e)return;let t=e.regex;if(!t.multiline){let d="mu";t.ignoreCase&&(d+="i"),t.global&&(d+="g"),t=new RegExp(t.source,d)}let n=this._editor.getModel(),o=n.getValue(1),r=n.getFullModelRange(),s=this._getReplacePattern(),a,l=this._state.preserveCase;s.hasReplacementPatterns||l?a=o.replace(t,function(){return s.buildReplaceString(arguments,l)}):a=o.replace(t,s.buildReplaceString(null,l));let c=new FA(r,a,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}_regularReplaceAll(e){let t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),o=[];for(let s=0,a=n.length;s<a;s++)o[s]=t.buildReplaceString(n[s].matches,this._state.preserveCase);let r=new S9(this._editor.getSelection(),n.map(s=>s.range),o);this._executeEditorCommand("replaceAll",r)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map(o=>new Se(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)),n=this._editor.getSelection();for(let o=0,r=t.length;o<r;o++)if(t[o].equalsRange(n)){t=[n].concat(t.slice(0,o)).concat(t.slice(o+1));break}this._editor.setSelections(t)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}},zE=class i extends hs{constructor(e,t,n,o){super(),this._hideSoon=this._register(new jt(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");let r=o.getColorTheme().getColor(ix),s=o.getColorTheme().getColor(ox),a=o.getColorTheme().getColor(nx);this.caseSensitive=this._register(new iE({appendTitle:this._keybindingLabelFor(Ci.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:r,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new nE({appendTitle:this._keybindingLabelFor(Ci.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:r,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new oE({appendTitle:this._keybindingLabelFor(Ci.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:r,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let c=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(le(this._domNode,Ee.MOUSE_LEAVE,l=>this._onMouseLeave())),this._register(le(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(o.getColorTheme()),this._register(o.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return i.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(ix),inputActiveOptionForeground:e.getColor(ox),inputActiveOptionBackground:e.getColor(nx)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}};zE.ID="editor.contrib.findOptionsWidget";xi((i,e)=>{let t=i.getColor(pn);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);let n=i.getColor(Qa);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);let o=i.getColor(Ua);o&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${o}; }`);let r=i.getColor(mt);r&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${r}; }`)});function qy(i,e){return i===1?!0:i===2?!1:e}var E9=class extends J{constructor(){super(),this._onFindReplaceStateChange=this._register(new Q),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return qy(this._isRegexOverride,this._isRegex)}get wholeWord(){return qy(this._wholeWordOverride,this._wholeWord)}get matchCase(){return qy(this._matchCaseOverride,this._matchCase)}get preserveCase(){return qy(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let o={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},r=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,o.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,o.matchesCount=!0,r=!0),typeof n<"u"&&(E.equalsRange(this._currentMatch,n)||(this._currentMatch=n,o.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(o)}change(e,t,n=!0){var o;let r={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},s=!1,a=this.isRegex,l=this.wholeWord,c=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,s=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,s=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,s=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,s=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((o=e.searchScope)===null||o===void 0)&&o.every(h=>{var u;return(u=this._searchScope)===null||u===void 0?void 0:u.some(g=>!E.equalsRange(g,h))})||(this._searchScope=e.searchScope,r.searchScope=!0,s=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,s=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,r.isSearching=!0,s=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,r.filters=!0,s=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(s=!0,r.isRegex=!0),l!==this.wholeWord&&(s=!0,r.wholeWord=!0),c!==this.matchCase&&(s=!0,r.matchCase=!0),d!==this.preserveCase&&(s=!0,r.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(r)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=_h}};function Gee(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var mbe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},fbe=mn("find-selection",_.selection,m("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Yee=mn("find-collapsed",_.chevronRight,m("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Jee=mn("find-expanded",_.chevronDown,m("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),_be=mn("find-replace",_.replace,m("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),vbe=mn("find-replace-all",_.replaceAll,m("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Abe=mn("find-previous-match",_.arrowUp,m("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),bbe=mn("find-next-match",_.arrowDown,m("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),wbe=m("label.find","Find"),Cbe=m("placeholder.find","Find"),ybe=m("label.previousMatchButton","Previous Match"),Sbe=m("label.nextMatchButton","Next Match"),Dbe=m("label.toggleSelectionFind","Find in Selection"),xbe=m("label.closeButton","Close"),kbe=m("label.replace","Replace"),Ebe=m("placeholder.replace","Replace"),Lbe=m("label.replaceButton","Replace"),Ibe=m("label.replaceAllButton","Replace All"),Tbe=m("label.toggleReplaceButton","Toggle Replace"),Mbe=m("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",_h),Nbe=m("label.matchesLocation","{0} of {1}"),Xee=m("label.noResults","No results"),_l=419,Rbe=275,Fbe=Rbe-54,xv=69,Bbe=33,Zee="ctrlEnterReplaceAll.windows.donotask",ete=gt?256:2048,G1=class{constructor(e){this.afterLineNumber=e,this.heightInPx=Bbe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}};function tte(i,e,t){let n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){i.stopPropagation();return}}function ite(i,e,t){let n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){i.stopPropagation();return}}var VE=class i extends hs{constructor(e,t,n,o,r,s,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=o,this._keybindingService=r,this._contextKeyService=s,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(Zee,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Gl(500),this._register(ct(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(83)&&(this._codeEditor.getOption(83)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(133)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(37)){let h=this._codeEditor.getOption(37).addExtraSpaceOnTop;h&&!this._viewZone&&(this._viewZone=new G1(0),this._showViewZone()),!h&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>mbe(this,void 0,void 0,function*(){if(this._isVisible){let d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=uN.bindTo(s),this._findFocusTracker=this._register(Oh(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=EJ.bindTo(s),this._replaceFocusTracker=this._register(Oh(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(37).addExtraSpaceOnTop&&(this._viewZone=new G1(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return i.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(83)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Xs(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Ye)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=xv+"px",this._state.matchesCount>=_h?this._matchesCount.title=Mbe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=_h&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=ws(Nbe,n,t)}else e=Xee;this._matchesCount.appendChild(document.createTextNode(e)),co(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),xv=Math.max(xv,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===Xee)return n===""?m("ariaSearchNoResultEmpty","{0} found",e):m("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){let o=m("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();return r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1?`${r.getLineContent(t.startLineNumber)}, ${o}`:o}return m("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(83);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;let e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(37).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{let n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(37).seedSearchStringFromSelection&&e){let n=this._codeEditor.getDomNode();if(n){let o=Eo(n),r=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),s=o.left+(r?r.left:0),a=r?r.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);let l=$ne(this._domNode).left;s>l&&(t=!1);let c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());o.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(37).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;let t=this._viewZone;this._viewZoneId!==void 0||!t||this._codeEditor.changeViewZones(n=>{t.heightInPx=this._getHeight(),this._viewZoneId=n.addZone(t),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+t.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(37).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new G1(0));let t=this._viewZone;this._codeEditor.changeViewZones(n=>{if(this._viewZoneId!==void 0){let o=this._getHeight();if(o===t.heightInPx)return;let r=o-t.heightInPx;t.heightInPx=o,n.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(77).top,o<=0)return;t.heightInPx=o,this._viewZoneId=n.addZone(t),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(ix),inputActiveOptionBackground:e.getColor(nx),inputActiveOptionForeground:e.getColor(ox),inputBackground:e.getColor(HM),inputForeground:e.getColor(WM),inputBorder:e.getColor(zM),inputValidationInfoBackground:e.getColor(_Y),inputValidationInfoForeground:e.getColor(vY),inputValidationInfoBorder:e.getColor(AY),inputValidationWarningBackground:e.getColor(bY),inputValidationWarningForeground:e.getColor(wY),inputValidationWarningBorder:e.getColor(CY),inputValidationErrorBackground:e.getColor(yY),inputValidationErrorForeground:e.getColor(SY),inputValidationErrorBorder:e.getColor(DY)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!iY(this._domNode))return;let e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");let t=e.width,n=e.minimap.minimapWidth,o=!1,r=!1,s=!1;if(this._resized&&Xs(this._domNode)>_l){this._domNode.style.maxWidth=`${t-28-n-15}px`,this._replaceInput.width=Xs(this._findInput.domNode);return}if(_l+28+n>=t&&(r=!0),_l+28+n-xv>=t&&(s=!0),_l+28+n-xv>=t+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",s),this._domNode.classList.toggle("reduced-find-widget",r),!s&&!o&&(this._domNode.style.maxWidth=`${t-28-n-15}px`),this._resized){this._findInput.inputBox.layout();let a=this._findInput.inputBox.element.clientWidth;a>0&&(this._replaceInput.width=a)}else this._isReplaceVisible&&(this._replaceInput.width=Xs(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){let e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));let n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!E.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(ete|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return tte(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return ite(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(ete|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Mn&&Ga&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(m("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Zee,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return tte(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return ite(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new V6(null,this._contextViewProvider,{width:Fbe,label:wbe,placeholder:Cbe,appendCaseSensitiveLabel:this._keybindingLabelFor(Ci.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Ci.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Ci.ToggleRegexCommand),validation:s=>{if(s.length===0||!this._findInput.getRegex())return null;try{return new RegExp(s,"gu"),null}catch(a){return{content:a.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Gee(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(s=>this._onFindInputKeyDown(s))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(s=>{s.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),s.preventDefault())})),this._register(this._findInput.onRegexKeyDown(s=>{s.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),s.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(s=>{this._tryUpdateHeight()&&this._showViewZone()})),go&&this._register(this._findInput.onMouseDown(s=>this._onFindInputMouseDown(s))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new ih({label:ybe+this._keybindingLabelFor(Ci.PreviousMatchFindAction),icon:Abe,onTrigger:()=>{this._codeEditor.getAction(Ci.PreviousMatchFindAction).run().then(void 0,Ye)}})),this._nextBtn=this._register(new ih({label:Sbe+this._keybindingLabelFor(Ci.NextMatchFindAction),icon:bbe,onTrigger:()=>{this._codeEditor.getAction(Ci.NextMatchFindAction).run().then(void 0,Ye)}}));let e=document.createElement("div");e.className="find-part",e.appendChild(this._findInput.domNode);let t=document.createElement("div");t.className="find-actions",e.appendChild(t),t.appendChild(this._matchesCount),t.appendChild(this._prevBtn.domNode),t.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new vp({icon:fbe,title:Dbe+this._keybindingLabelFor(Ci.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let s=this._codeEditor.getSelections();s.map(a=>(a.endColumn===1&&a.endLineNumber>a.startLineNumber&&(a=a.setEndPosition(a.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(a.endLineNumber-1))),a.isEmpty()?null:a)).filter(a=>!!a),s.length&&this._state.change({searchScope:s},!0)}}else this._state.change({searchScope:null},!0)})),t.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new ih({label:xbe+this._keybindingLabelFor(Ci.CloseFindWidgetCommand),icon:Qre,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:s=>{s.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),s.preventDefault())}})),t.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new U6(null,void 0,{label:kbe,placeholder:Ebe,appendPreserveCaseLabel:this._keybindingLabelFor(Ci.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Gee(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(s=>this._onReplaceInputKeyDown(s))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(s=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(s=>{s.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),s.preventDefault())})),this._replaceBtn=this._register(new ih({label:Lbe+this._keybindingLabelFor(Ci.ReplaceOneAction),icon:_be,onTrigger:()=>{this._controller.replace()},onKeyDown:s=>{s.equals(1026)&&(this._closeBtn.focus(),s.preventDefault())}})),this._replaceAllBtn=this._register(new ih({label:Ibe+this._keybindingLabelFor(Ci.ReplaceAllAction),icon:vbe,onTrigger:()=>{this._controller.replaceAll()}}));let n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);let o=document.createElement("div");o.className="replace-actions",n.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new ih({label:Tbe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Xs(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${_l}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(e),this._domNode.appendChild(n),this._resizeSash=new Ka(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let r=_l;this._register(this._resizeSash.onDidStart(()=>{r=Xs(this._domNode)})),this._register(this._resizeSash.onDidChange(s=>{this._resized=!0;let a=r+s.startX-s.currentX;if(a<_l)return;let l=parseFloat(vM(this._domNode).maxWidth)||0;a>l||(this._domNode.style.width=`${a}px`,this._isReplaceVisible&&(this._replaceInput.width=Xs(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{let s=Xs(this._domNode);if(s<_l)return;let a=_l;if(!this._resized||s===_l){let l=this._codeEditor.getLayoutInfo();a=l.width-28-l.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${a}px`,this._isReplaceVisible&&(this._replaceInput.width=Xs(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){let e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}};VE.ID="editor.contrib.findWidget";var ih=class extends hs{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+zt.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var o,r;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(r=(o=this._opts).onKeyDown)===null||r===void 0||r.call(o,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...zt.asClassNameArray(Yee)),this._domNode.classList.add(...zt.asClassNameArray(Jee))):(this._domNode.classList.remove(...zt.asClassNameArray(Jee)),this._domNode.classList.add(...zt.asClassNameArray(Yee)))}};xi((i,e)=>{let t=(p,f)=>{f&&e.addRule(`.monaco-editor ${p} { background-color: ${f}; }`)};t(".findMatch",i.getColor(Zc)),t(".currentFindMatch",i.getColor(Ppe)),t(".findScope",i.getColor(Ope));let n=i.getColor(pn);t(".find-widget",n);let o=i.getColor(Ua);o&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${o}; }`);let r=i.getColor(mg);r&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Io(i.type)?"dotted":"solid"} ${r}; box-sizing: border-box; }`);let s=i.getColor(Hpe);s&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${s}; padding: 1px; box-sizing: border-box; }`);let a=i.getColor(Wpe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${Io(i.type)?"dashed":"solid"} ${a}; }`);let l=i.getColor(mt);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);let c=i.getColor(Qa);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);let d=i.getColor(vpe);d&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${d}; }`);let h=i.getColor(xpe);if(h)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${h}; }`);else{let p=i.getColor(Jc);p&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${p}; }`)}let u=i.getColor($P);u&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${u} !important;
		}
	`);let g=i.getColor(ys);g&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${g}; }`)});var wae=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Sl=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Ip=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Pbe=524288;function L9(i,e="single",t=!1){if(!i.hasModel())return null;let n=i.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){let o=i.getConfiguredWordAtPosition(n.getStartPosition());if(o&&t===!1)return o.word}else if(i.getModel().getValueLengthInRange(n)<Pbe)return i.getModel().getValueInRange(n)}return null}var zr=class Cae extends J{constructor(e,t,n,o){super(),this._editor=e,this._findWidgetVisible=Cu.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=o,this._updateHistoryDelayer=new Gl(500),this._state=this._register(new E9),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(r=>this._onStateChanged(r))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let r=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),r&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(37).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(Cae.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!uN.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=cs(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return Ip(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){let o=L9(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);o&&(this._state.isRegex?n.searchString=cs(o):n.searchString=o)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let o=L9(this._editor,e.seedSearchStringFromSelection);o&&(n.searchString=o)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){let o=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;o&&(n.searchString=o)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){let o=this._editor.getSelections();o.some(r=>!r.isEmpty())&&(n.searchScope=o)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new k9(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return Ip(this,void 0,void 0,function*(){return this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};zr.ID="editor.contrib.findController";zr=wae([Sl(1,Ze),Sl(2,Ea),Sl(3,Da)],zr);var I9=class extends zr{constructor(i,e,t,n,o,r,s,a){super(i,t,s,a),this._contextViewService=e,this._keybindingService=n,this._themeService=o,this._notificationService=r,this._widget=null,this._findOptionsWidget=null}_start(i,e){let t=Object.create(null,{_start:{get:()=>super._start}});return Ip(this,void 0,void 0,function*(){this._widget||this._createFindWidget();let n=this._editor.getSelection(),o=!1;switch(this._editor.getOption(37).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":{o=!!n&&n.startLineNumber!==n.endLineNumber;break}}i.updateSearchScope=i.updateSearchScope||o,yield t._start.call(this,i,e),this._widget&&(i.shouldFocus===2?this._widget.focusReplaceInput():i.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(i=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!i?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new VE(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new zE(this._editor,this._state,this._keybindingService,this._themeService))}};I9=wae([Sl(1,om),Sl(2,Ze),Sl(3,An),Sl(4,mi),Sl(5,nn),Sl(6,Ea),Sl(7,Da)],I9);var Obe=foe(new BD({id:Ci.StartFindAction,label:m("startFindAction","Find"),alias:"Find",precondition:we.or(B.focus,we.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:z.MenubarEditMenu,group:"3_find",title:m({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));Obe.addImplementation(0,(i,e,t)=>{let n=zr.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(37).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(37).loop}):!1});var Hbe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:m("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:m("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:m("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:m("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]},T9=class extends Ie{constructor(){super({id:Ci.StartFindWithArgs,label:m("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Hbe})}run(e,t,n){return Ip(this,void 0,void 0,function*(){let o=zr.get(t);if(o){let r=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield o.start({forceRevealReplace:!1,seedSearchStringFromSelection:o.getState().searchString.length===0&&t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:n?.findInSelection||!1,loop:t.getOption(37).loop},r),o.setGlobalBufferTerm(o.getState().searchString)}})}},M9=class extends Ie{constructor(){super({id:Ci.StartFindWithSelection,label:m("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return Ip(this,void 0,void 0,function*(){let n=zr.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}},UE=class extends Ie{run(e,t){return Ip(this,void 0,void 0,function*(){let n=zr.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(n))})}},N9=class extends UE{constructor(){super({id:Ci.NextMatchFindAction,label:m("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:B.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:we.and(B.focus,uN),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}},R9=class extends UE{constructor(){super({id:Ci.PreviousMatchFindAction,label:m("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:B.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:we.and(B.focus,uN),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}},QE=class extends Ie{run(e,t){return Ip(this,void 0,void 0,function*(){let n=zr.get(t);if(!n)return;let o=t.getOption(37).seedSearchStringFromSelection==="selection",r=null;t.getOption(37).seedSearchStringFromSelection!=="never"&&(r=L9(t,"single",o)),r&&n.setSearchString(r),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:o,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(n))})}},F9=class extends QE{constructor(){super({id:Ci.NextSelectionMatchFindAction,label:m("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}},B9=class extends QE{constructor(){super({id:Ci.PreviousSelectionMatchFindAction,label:m("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}},Wbe=foe(new BD({id:Ci.StartFindReplaceAction,label:m("startReplace","Replace"),alias:"Replace",precondition:we.or(B.focus,we.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:z.MenubarEditMenu,group:"3_find",title:m({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Wbe.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(83))return!1;let n=zr.get(e);if(!n)return!1;let o=e.getSelection(),r=n.isFindInputFocused(),s=!o.isEmpty()&&o.startLineNumber===o.endLineNumber&&e.getOption(37).seedSearchStringFromSelection!=="never"&&!r,a=r||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(37).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(37).loop})});Wt(zr.ID,I9);fe(T9);fe(M9);fe(N9);fe(R9);fe(F9);fe(B9);var ul=$n.bindToContribution(zr.get);pe(new ul({id:Ci.CloseFindWidgetCommand,precondition:Cu,handler:i=>i.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:we.and(B.focus,we.not("isComposing")),primary:9,secondary:[1033]}}));pe(new ul({id:Ci.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:Vy.primary,mac:Vy.mac,win:Vy.win,linux:Vy.linux}}));pe(new ul({id:Ci.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:Uy.primary,mac:Uy.mac,win:Uy.win,linux:Uy.linux}}));pe(new ul({id:Ci.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:Qy.primary,mac:Qy.mac,win:Qy.win,linux:Qy.linux}}));pe(new ul({id:Ci.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:jy.primary,mac:jy.mac,win:jy.win,linux:jy.linux}}));pe(new ul({id:Ci.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:Ky.primary,mac:Ky.mac,win:Ky.win,linux:Ky.linux}}));pe(new ul({id:Ci.ReplaceOneAction,precondition:Cu,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:3094}}));pe(new ul({id:Ci.ReplaceOneAction,precondition:Cu,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:we.and(B.focus,EJ),primary:3}}));pe(new ul({id:Ci.ReplaceAllAction,precondition:Cu,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:2563}}));pe(new ul({id:Ci.ReplaceAllAction,precondition:Cu,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:we.and(B.focus,EJ),primary:void 0,mac:{primary:2051}}}));pe(new ul({id:Ci.SelectAllMatchesAction,precondition:Cu,handler:i=>i.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:B.focus,primary:515}}));var nte=65535,Ha=16777215,ote=4278190080,Y1=class{constructor(e){let t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){let t=e/32|0,n=e%32;return(this._states[t]&1<<n)!==0}set(e,t){let n=e/32|0,o=e%32,r=this._states[n];t?this._states[n]=r|1<<o:this._states[n]=r&~(1<<o)}},Zr=class i{constructor(e,t,n){if(this.sourceAbbr={0:" ",1:"u",2:"r"},e.length!==t.length||e.length>nte)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Y1(e.length),this._userDefinedStates=new Y1(e.length),this._recoveredStates=new Y1(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,o)=>{let r=e[e.length-1];return this.getStartLineNumber(r)<=n&&this.getEndLineNumber(r)>=o};for(let n=0,o=this._startIndexes.length;n<o;n++){let r=this._startIndexes[n],s=this._endIndexes[n];if(r>Ha||s>Ha)throw new Error("startLineNumber or endLineNumber must not exceed "+Ha);for(;e.length>0&&!t(r,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=r+((a&255)<<24),this._endIndexes[n]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Ha}getEndLineNumber(e){return this._endIndexes[e]&Ha}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let o=0;o<this._types.length;o++)this._types[o]===e&&(this.setCollapsed(o,t),n=!0);return n}toRegion(e){return new P9(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&ote)>>>24)+((this._endIndexes[e]&ote)>>>16);return t===nte?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let o=Math.floor((t+n)/2);e<this.getStartLineNumber(o)?n=o:t=o+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.sourceAbbr[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&Ha,endLineNumber:this._endIndexes[e]&Ha,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){let t=e.length,n=new Uint32Array(t),o=new Uint32Array(t),r=[],s=!1;for(let l=0;l<t;l++){let c=e[l];n[l]=c.startLineNumber,o[l]=c.endLineNumber,r.push(c.type),c.type&&(s=!0)}s||(r=void 0);let a=new i(n,o,r);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,n){n=n??Number.MAX_VALUE;let o=(f,v)=>Array.isArray(f)?b=>b<v?f[b]:void 0:b=>b<v?f.toFoldRange(b):void 0,r=o(e,e.length),s=o(t,t.length),a=0,l=0,c=r(0),d=s(0),h=[],u,g=0,p=[];for(;c||d;){let f;if(d&&(!c||c.startLineNumber>=d.startLineNumber))c&&c.startLineNumber===d.startLineNumber?(d.source===1?f=d:(f=c,f.isCollapsed=d.isCollapsed&&c.endLineNumber===d.endLineNumber,f.source=0),c=r(++a)):(f=d,d.isCollapsed&&d.source===0&&(f.source=2)),d=s(++l);else{let v=l,b=d;for(;;){if(!b||b.startLineNumber>c.endLineNumber){f=c;break}if(b.source===1&&b.endLineNumber>c.endLineNumber)break;b=s(++v)}c=r(++a)}if(f){for(;u&&u.endLineNumber<f.startLineNumber;)u=h.pop();f.endLineNumber>f.startLineNumber&&f.startLineNumber>g&&f.endLineNumber<=n&&(!u||u.endLineNumber>=f.endLineNumber)&&(p.push(f),g=f.startLineNumber,u&&h.push(u),u=f)}}return p}},P9=class{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}},O9=class{constructor(e,t){this._updateEventEmitter=new Q,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new Zr(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}get regions(){return this._regions}get textModel(){return this._textModel}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,o)=>n.regionIndex-o.regionIndex);let t={};this._decorationProvider.changeDecorations(n=>{let o=0,r=-1,s=-1,a=l=>{for(;o<l;){let c=this._regions.getEndLineNumber(o),d=this._regions.isCollapsed(o);if(c<=r){let h=this.regions.getSource(o)!==0;n.changeDecorationOptions(this._editorDecorationIds[o],this._decorationProvider.getDecorationOption(d,c<=s,h))}d&&c>s&&(s=c),o++}};for(let l of e){let c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);let h=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,h),r=Math.max(r,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){let t=new Array,n=o=>{for(let r of e)if(!(r.startLineNumber>o.endLineNumber||o.startLineNumber>r.endLineNumber))return!0;return!1};for(let o=0;o<this._regions.length;o++){let r=this._regions.toFoldRange(o);(r.source===0||!n(r))&&t.push(r)}this.updatePost(Zr.fromFoldRanges(t))}update(e,t=[]){let n=this._currentFoldedOrManualRanges(t),o=Zr.sanitizeAndMerge(e,n,this._textModel.getLineCount());this.updatePost(Zr.fromFoldRanges(o))}updatePost(e){let t=[],n=-1;for(let o=0,r=e.length;o<r;o++){let s=e.getStartLineNumber(o),a=e.getEndLineNumber(o),l=e.isCollapsed(o),c=e.getSource(o)!==0,d={startLineNumber:s,startColumn:this._textModel.getLineMaxColumn(s),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=n,c)}),l&&a>n&&(n=a)}this._decorationProvider.changeDecorations(o=>this._editorDecorationIds=o.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){let t=(o,r)=>{for(let s of e)if(o<s&&s<=r)return!0;return!1},n=[];for(let o=0,r=this._regions.length;o<r;o++){let s=this.regions.isCollapsed(o),a=this.regions.getSource(o);if(s||a!==0){let l=this._regions.toFoldRange(o),c=this._textModel.getDecorationRange(this._editorDecorationIds[o]);c&&(s&&(t(c.startLineNumber,c.endLineNumber)||c.endLineNumber-c.startLineNumber!==l.endLineNumber-l.startLineNumber)&&(s=!1),n.push({startLineNumber:c.startLineNumber,endLineNumber:c.endLineNumber,type:l.type,isCollapsed:s,source:a}))}}return n}getMemento(){let e=this._currentFoldedOrManualRanges(),t=[];for(let n=0,o=e.length;n<o;n++){let r=e[n],s=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,isCollapsed:r.isCollapsed,source:r.source,checksum:s})}return t.length>0?t:void 0}applyMemento(e){var t,n;if(!Array.isArray(e))return;let o=[],r=this._textModel.getLineCount();for(let a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>r)continue;let l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&o.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(n=a.source)!==null&&n!==void 0?n:0})}let s=Zr.sanitizeAndMerge(this._regions,o,r);this.updatePost(Zr.fromFoldRanges(s))}_getLinesChecksum(e,t){return $C(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let o=this._regions.findRange(e),r=1;for(;o>=0;){let s=this._regions.toRegion(o);(!t||t(s,r))&&n.push(s),r++,o=s.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],o=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){let s=[];for(let a=o,l=this._regions.length;a<l;a++){let c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<r){for(;s.length>0&&!c.containedBy(s[s.length-1]);)s.pop();s.push(c),t(c,s.length)&&n.push(c)}else break}}else for(let s=o,a=this._regions.length;s<a;s++){let l=this._regions.toRegion(s);if(this._regions.getStartLineNumber(s)<r)(!t||t(l))&&n.push(l);else break}return n}};function zbe(i,e,t){let n=[];for(let o of t){let r=i.getRegionAtLine(o);if(r){let s=!r.isCollapsed;if(n.push(r),e>1){let a=i.getRegionsInside(r,(l,c)=>l.isCollapsed!==s&&c<e);n.push(...a)}}}i.toggleCollapseState(n)}function lv(i,e,t=Number.MAX_VALUE,n){let o=[];if(n&&n.length>0)for(let r of n){let s=i.getRegionAtLine(r);if(s&&(s.isCollapsed!==e&&o.push(s),t>1)){let a=i.getRegionsInside(s,(l,c)=>l.isCollapsed!==e&&c<t);o.push(...a)}}else{let r=i.getRegionsInside(null,(s,a)=>s.isCollapsed!==e&&a<t);o.push(...r)}i.toggleCollapseState(o)}function yae(i,e,t,n){let o=[];for(let r of n){let s=i.getAllRegionsAtLine(r,(a,l)=>a.isCollapsed!==e&&l<=t);o.push(...s)}i.toggleCollapseState(o)}function Vbe(i,e,t){let n=[];for(let o of t){let r=i.getAllRegionsAtLine(o,s=>s.isCollapsed!==e);r.length>0&&n.push(r[0])}i.toggleCollapseState(n)}function Ube(i,e,t,n){let o=(s,a)=>a===e&&s.isCollapsed!==t&&!n.some(l=>s.containsLine(l)),r=i.getRegionsInside(null,o);i.toggleCollapseState(r)}function Sae(i,e,t){let n=[];for(let s of t){let a=i.getAllRegionsAtLine(s,void 0);a.length>0&&n.push(a[0])}let o=s=>n.every(a=>!a.containedBy(s)&&!s.containedBy(a))&&s.isCollapsed!==e,r=i.getRegionsInside(null,o);i.toggleCollapseState(r)}function LJ(i,e,t){let n=i.textModel,o=i.regions,r=[];for(let s=o.length-1;s>=0;s--)if(t!==o.isCollapsed(s)){let a=o.getStartLineNumber(s);e.test(n.getLineContent(a))&&r.push(o.toRegion(s))}i.toggleCollapseState(r)}function IJ(i,e,t){let n=i.regions,o=[];for(let r=n.length-1;r>=0;r--)t!==n.isCollapsed(r)&&e===n.getType(r)&&o.push(n.toRegion(r));i.toggleCollapseState(o)}function Qbe(i,e){let t=null,n=e.getRegionAtLine(i);if(n!==null&&(t=n.startLineNumber,i===t)){let o=n.parentIndex;o!==-1?t=e.regions.getStartLineNumber(o):t=null}return t}function jbe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,o=0;for(n!==-1&&(o=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=o)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function Kbe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){let n=t.parentIndex,o=0;if(n!==-1)o=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;o=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=o)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}var H9=class{constructor(e){this._updateEventEmitter=new Q,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||dp(t.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],n=0,o=0,r=Number.MAX_VALUE,s=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let l=a.getStartLineNumber(n)+1,c=a.getEndLineNumber(n);r<=l&&c<=s||(!e&&o<this._hiddenRanges.length&&this._hiddenRanges[o].startLineNumber===l&&this._hiddenRanges[o].endLineNumber===c?(t.push(this._hiddenRanges[o]),o++):(e=!0,t.push(new E(l,1,c,1))),r=l,s=c)}(this._hasLineChanges||e||o<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return rte(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,o=null,r=s=>((!o||!qbe(s,o))&&(o=rte(this._hiddenRanges,s)),o?o.startLineNumber-1:null);for(let s=0,a=e.length;s<a;s++){let l=e[s],c=r(l.startLineNumber);c&&(l=l.setStartPosition(c,n.getLineMaxColumn(c)),t=!0);let d=r(l.endLineNumber);d&&(l=l.setEndPosition(d,n.getLineMaxColumn(d)),t=!0),e[s]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}};function qbe(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function rte(i,e){let t=Coe(i,n=>e<n.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}var $be=5e3,Gbe="indent",W9=class{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.maxFoldingRegions=n,this.id=Gbe}dispose(){}compute(e,t){let n=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,o=n&&!!n.offSide,r=n&&n.markers;return Promise.resolve(Jbe(this.editorModel,o,r,this.maxFoldingRegions,t))}},Ybe=class{constructor(i,e){this._notifyTooManyRegions=e,this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=i}insertFirst(i,e,t){if(i>Ha||e>Ha)return;let n=this._length;this._startIndexes[n]=i,this._endIndexes[n]=e,this._length++,t<1e3&&(this._indentOccurrences[t]=(this._indentOccurrences[t]||0)+1)}toIndentRanges(i){var e;if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let o=this._length-1,r=0;o>=0;o--,r++)t[r]=this._startIndexes[o],n[r]=this._endIndexes[o];return new Zr(t,n)}else{(e=this._notifyTooManyRegions)===null||e===void 0||e.call(this,this._foldingRangesLimit);let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}let o=i.getOptions().tabSize,r=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let c=this._startIndexes[a],d=i.getLineContent(c),h=QM(d,o);(h<n||h===n&&t++<this._foldingRangesLimit)&&(r[l]=c,s[l]=this._endIndexes[a],l++)}return new Zr(r,s)}}};function Jbe(i,e,t,n,o){let r=i.getOptions().tabSize;n=n??$be;let s=new Ybe(n,o),a;t&&(a=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let l=[],c=i.getLineCount()+1;l.push({indent:-1,endAbove:c,line:c});for(let d=i.getLineCount();d>0;d--){let h=i.getLineContent(d),u=QM(h,r),g=l[l.length-1];if(u===-1){e&&(g.endAbove=d);continue}let p;if(a&&(p=h.match(a)))if(p[1]){let f=l.length-1;for(;f>0&&l[f].indent!==-2;)f--;if(f>0){l.length=f+1,g=l[f],s.insertFirst(d,g.line,u),g.line=d,g.indent=u,g.endAbove=d;continue}}else{l.push({indent:-2,endAbove:d,line:d});continue}if(g.indent>u){do l.pop(),g=l[l.length-1];while(g.indent>u);let f=g.endAbove-1;f-d>=1&&s.insertFirst(d,f,u)}g.indent===u?g.endAbove=d:l.push({indent:u,endAbove:d,line:d})}return s.toIndentRanges(i)}var XC=mn("folding-expanded",_.chevronDown,m("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),gN=mn("folding-collapsed",_.chevronRight,m("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),Dae=mn("folding-manual-collapsed",gN,m("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),TJ=mn("folding-manual-expanded",XC,m("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),Ca=class i{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,n){return t||this.showFoldingControls==="never"?i.HIDDEN_RANGE_DECORATION:e?n?this.showFoldingHighlights?i.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:i.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?i.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:i.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?n?i.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n?i.MANUALLY_EXPANDED_VISUAL_DECORATION:i.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};Ca.COLLAPSED_VISUAL_DECORATION=rt.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:zt.asClassName(gN)});Ca.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=rt.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:zt.asClassName(gN)});Ca.MANUALLY_COLLAPSED_VISUAL_DECORATION=rt.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+zt.asClassName(XC)});Ca.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=rt.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:zt.asClassName(Dae)});Ca.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=rt.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:zt.asClassName(XC)});Ca.EXPANDED_VISUAL_DECORATION=rt.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+zt.asClassName(XC)});Ca.MANUALLY_EXPANDED_VISUAL_DECORATION=rt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+zt.asClassName(TJ)});Ca.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=rt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:zt.asClassName(TJ)});Ca.HIDDEN_RANGE_DECORATION=rt.register({description:"folding-hidden-range-decoration",stickiness:1});var Xbe={},Zbe="syntax",z9=class{constructor(e,t,n,o){this.editorModel=e,this.providers=t,this.limit=o,this.id=Zbe;for(let r of t)typeof r.onDidChange=="function"&&(this.disposables||(this.disposables=new ne),this.disposables.add(r.onDidChange(n)))}compute(e,t){return ewe(this.providers,this.editorModel,e).then(n=>n?twe(n,this.limit,t):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}};function ewe(i,e,t){let n=null,o=i.map((r,s)=>Promise.resolve(r.provideFoldingRanges(e,Xbe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let l=e.getLineCount();for(let c of a)c.start>0&&c.end>c.start&&c.end<=l&&n.push({start:c.start,end:c.end,rank:s,kind:c.kind})}},Fn));return Promise.all(o).then(r=>n)}var V9=class{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,o){if(e>Ha||t>Ha)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=o,this._types[r]=n,this._length++,o<30&&(this._nestingLevelCounts[o]=(this._nestingLevelCounts[o]||0)+1)}toIndentRanges(){var e;if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let o=0;o<this._length;o++)t[o]=this._startIndexes[o],n[o]=this._endIndexes[o];return new Zr(t,n,this._types)}else{(e=this._notifyTooManyRegions)===null||e===void 0||e.call(this,this._foldingRangesLimit);let t=0,n=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){let l=this._nestingLevelCounts[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}let o=new Uint32Array(this._foldingRangesLimit),r=new Uint32Array(this._foldingRangesLimit),s=[];for(let a=0,l=0;a<this._length;a++){let c=this._nestingLevels[a];(c<n||c===n&&t++<this._foldingRangesLimit)&&(o[l]=this._startIndexes[a],r[l]=this._endIndexes[a],s[l]=this._types[a],l++)}return new Zr(o,r,s)}}};function twe(i,e,t){let n=i.sort((a,l)=>{let c=a.start-l.start;return c===0&&(c=a.rank-l.rank),c}),o=new V9(e,t),r,s=[];for(let a of n)if(!r)r=a,o.add(a.start,a.end,a.kind&&a.kind.value,s.length);else if(a.start>r.start)if(a.end<=r.end)s.push(r),r=a,o.add(a.start,a.end,a.kind&&a.kind.value,s.length);else{if(a.start>r.end){do r=s.pop();while(r&&a.start>r.end);r&&s.push(r),r=a}o.add(a.start,a.end,a.kind&&a.kind.value,s.length)}return o.toIndentRanges()}var iwe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},kv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Fo=new Le("foldingEnabled",!1),g0=class xae extends J{constructor(e,t,n,o,r,s){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=s,this._tooManyRegionsNotified=!1,this.localToDispose=this._register(new ne),this.editor=e;let a=this.editor.getOptions();this._isEnabled=a.get(39),this._useFoldingProviders=a.get(40)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(44),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(42),this._maxFoldingRegions=a.get(43),this.updateDebounceInfo=r.for(s.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new Ca(e),this.foldingDecorationProvider.showFoldingControls=a.get(101),this.foldingDecorationProvider.showFoldingHighlights=a.get(41),this.foldingEnabled=Fo.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._notifyTooManyRegions=l=>{this._tooManyRegionsNotified||(o.notify({severity:Mt.Warning,sticky:!0,message:m("maximum fold ranges",`The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?["editor.foldingMaximumRegions"]) to enable more.`,l)}),this._tooManyRegionsNotified=!0)},this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(39)&&(this._isEnabled=this.editor.getOptions().get(39),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(43)&&(this._maxFoldingRegions=this.editor.getOptions().get(43),this._tooManyRegionsNotified=!1,this.onModelChanged()),l.hasChanged(101)||l.hasChanged(41)){let c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(101),this.foldingDecorationProvider.showFoldingHighlights=c.get(41),this.triggerFoldingModelChanged()}l.hasChanged(40)&&(this._useFoldingProviders=this.editor.getOptions().get(40)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(44)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(44)),l.hasChanged(42)&&(this._foldingImportsByDefault=this.editor.getOptions().get(42))})),this.onModelChanged()}static get(e){return e.getContribution(xae.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&!(!e||e.lineCount!==t.getLineCount())&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new O9(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new H9(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Gl(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new jt(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new W9(e,this.languageConfigurationService,this._maxFoldingRegions),this._useFoldingProviders&&this.foldingModel){let t=this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);t.length>0&&(this.rangeProvider=new z9(e,t,()=>this.triggerFoldingModelChanged(),this._maxFoldingRegions))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{let e=this.foldingModel;if(!e)return null;let t=new sr(!0),n=this.getRangeProvider(e.textModel),o=this.foldingRegionPromise=Gn(r=>n.compute(r,this._notifyTooManyRegions));return o.then(r=>{if(r&&o===this.foldingRegionPromise){let s;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){let d=r.setCollapsedAllOfType(ol.Imports.value,!0);d&&(s=Zh.capture(this.editor),this._currentModelHasFoldedImports=d)}let a=this.editor.getSelections(),l=a?a.map(d=>d.startLineNumber):[];e.update(r,l),s?.restore(this.editor);let c=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=c)}return e})}).then(void 0,e=>(Ye(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){let e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let o=[];for(let r of n){let s=r.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(s)&&o.push(...t.getAllRegionsAtLine(s,a=>a.isCollapsed&&s>a.startLineNumber))}o.length&&(t.toggleCollapseState(o),this.reveal(n[0].getPosition()))}}}).then(void 0,Ye)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;let t=e.target.range,n=!1;switch(e.target.type){case 4:{let o=e.target.detail,r=e.target.element.offsetLeft;if(o.offsetX-r<5)return;n=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let o=this.editor.getModel();if(o&&t.startColumn===o.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){let t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,o=this.mouseDownInfo.iconClicked,r=e.target.range;if(!r||r.startLineNumber!==n)return;if(o){if(e.target.type!==4)return}else{let a=this.editor.getModel();if(!a||r.startColumn!==a.getLineMaxColumn(n))return}let s=t.getRegionAtLine(n);if(s&&s.startLineNumber===n){let a=s.isCollapsed;if(o||a){let l=e.event.altKey,c=[];if(l){let d=u=>!u.containedBy(s)&&!s.containedBy(u),h=t.getRegionsInside(null,d);for(let u of h)u.isCollapsed&&c.push(u);c.length===0&&(c=h)}else{let d=e.event.middleButton||e.event.shiftKey;if(d)for(let h of t.getRegionsInside(s))h.isCollapsed===a&&c.push(h);(a||!d||c.length===0)&&c.push(s)}t.toggleCollapseState(c),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};g0.ID="editor.contrib.folding";g0=iwe([kv(1,Ze),kv(2,Yi),kv(3,nn),kv(4,Us),kv(5,Te)],g0);var mo=class extends Ie{runEditorCommand(e,t,n){let o=e.get(Yi),r=g0.get(t);if(!r)return;let s=r.getFoldingModel();if(s)return this.reportTelemetry(e,t),s.then(a=>{if(a){this.invoke(r,a,t,n,o);let l=t.getSelection();l&&r.reveal(l.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}};function kae(i){if(!jo(i)){if(!jn(i))return!1;let e=i;if(!jo(e.levels)&&!Xa(e.levels)||!jo(e.direction)&&!Ji(e.direction)||!jo(e.selectionLines)&&(!Gg(e.selectionLines)||!e.selectionLines.every(Xa)))return!1}return!0}var U9=class extends mo{constructor(){super({id:"editor.unfold",label:m("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:kae,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,o){let r=o&&o.levels||1,s=this.getLineNumbers(o,n);o&&o.direction==="up"?yae(t,!1,r,s):lv(t,!1,r,s)}},Q9=class extends mo{constructor(){super({id:"editor.unfoldRecursively",label:m("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2137),weight:100}})}invoke(e,t,n,o){lv(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}},j9=class extends mo{constructor(){super({id:"editor.fold",label:m("foldAction.label","Fold"),alias:"Fold",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:kae,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,o){let r=this.getLineNumbers(o,n),s=o&&o.levels,a=o&&o.direction;typeof s!="number"&&typeof a!="string"?Vbe(t,!0,r):a==="up"?yae(t,!0,s||1,r):lv(t,!0,s||1,r)}},K9=class extends mo{constructor(){super({id:"editor.toggleFold",label:m("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2090),weight:100}})}invoke(e,t,n){let o=this.getSelectedLines(n);zbe(t,1,o)}},q9=class extends mo{constructor(){super({id:"editor.foldRecursively",label:m("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2135),weight:100}})}invoke(e,t,n){let o=this.getSelectedLines(n);lv(t,!0,Number.MAX_VALUE,o)}},$9=class extends mo{constructor(){super({id:"editor.foldAllBlockComments",label:m("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2133),weight:100}})}invoke(e,t,n,o,r){if(t.regions.hasTypes())IJ(t,ol.Comment.value,!0);else{let s=n.getModel();if(!s)return;let a=r.getLanguageConfiguration(s.getLanguageId()).comments;if(a&&a.blockCommentStartToken){let l=new RegExp("^\\s*"+cs(a.blockCommentStartToken));LJ(t,l,!0)}}}},G9=class extends mo{constructor(){super({id:"editor.foldAllMarkerRegions",label:m("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2077),weight:100}})}invoke(e,t,n,o,r){if(t.regions.hasTypes())IJ(t,ol.Region.value,!0);else{let s=n.getModel();if(!s)return;let a=r.getLanguageConfiguration(s.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){let l=new RegExp(a.markers.start);LJ(t,l,!0)}}}},Y9=class extends mo{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:m("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2078),weight:100}})}invoke(e,t,n,o,r){if(t.regions.hasTypes())IJ(t,ol.Region.value,!1);else{let s=n.getModel();if(!s)return;let a=r.getLanguageConfiguration(s.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){let l=new RegExp(a.markers.start);LJ(t,l,!1)}}}},J9=class extends mo{constructor(){super({id:"editor.foldAllExcept",label:m("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2131),weight:100}})}invoke(e,t,n){let o=this.getSelectedLines(n);Sae(t,!0,o)}},X9=class extends mo{constructor(){super({id:"editor.unfoldAllExcept",label:m("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2129),weight:100}})}invoke(e,t,n){let o=this.getSelectedLines(n);Sae(t,!1,o)}},Z9=class extends mo{constructor(){super({id:"editor.foldAll",label:m("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2069),weight:100}})}invoke(e,t,n){lv(t,!0)}},e7=class extends mo{constructor(){super({id:"editor.unfoldAll",label:m("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2088),weight:100}})}invoke(e,t,n){lv(t,!1)}},Tp=class i extends mo{getFoldingLevel(){return parseInt(this.id.substr(i.ID_PREFIX.length))}invoke(e,t,n){Ube(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}};Tp.ID_PREFIX="editor.foldLevel";Tp.ID=i=>Tp.ID_PREFIX+i;var t7=class extends mo{constructor(){super({id:"editor.gotoParentFold",label:m("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,n){let o=this.getSelectedLines(n);if(o.length>0){let r=Qbe(o[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}},i7=class extends mo{constructor(){super({id:"editor.gotoPreviousFold",label:m("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,n){let o=this.getSelectedLines(n);if(o.length>0){let r=jbe(o[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}},n7=class extends mo{constructor(){super({id:"editor.gotoNextFold",label:m("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,n){let o=this.getSelectedLines(n);if(o.length>0){let r=Kbe(o[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}},o7=class extends mo{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:m("createManualFoldRange.label","Create Manual Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2130),weight:100}})}invoke(e,t,n){var o;let r=[],s=n.getSelections();if(s){for(let a of s){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(r.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(r.length>0){r.sort((l,c)=>l.startLineNumber-c.startLineNumber);let a=Zr.sanitizeAndMerge(t.regions,r,(o=n.getModel())===null||o===void 0?void 0:o.getLineCount());t.updatePost(Zr.fromFoldRanges(a))}}}},r7=class extends mo{constructor(){super({id:"editor.removeManualFoldingRanges",label:m("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2132),weight:100}})}invoke(e,t,n){let o=n.getSelections();if(o){let r=[];for(let s of o){let{startLineNumber:a,endLineNumber:l}=s;r.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(r),e.triggerFoldingModelChanged()}}};Wt(g0.ID,g0);fe(U9);fe(Q9);fe(j9);fe(q9);fe(Z9);fe(e7);fe($9);fe(G9);fe(Y9);fe(J9);fe(X9);fe(K9);fe(t7);fe(i7);fe(n7);fe(o7);fe(r7);for(let i=1;i<=7;i++)_oe(new Tp({id:Tp.ID(i),label:m("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2048|21+i),weight:100}}));var nwe=P("editor.foldBackground",{light:Fe(Xc,.3),dark:Fe(Xc,.3),hcDark:null,hcLight:null},m("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),owe=P("editorGutter.foldingControlForeground",{dark:py,light:py,hcDark:py,hcLight:py},m("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));xi((i,e)=>{let t=i.getColor(nwe);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);let n=i.getColor(owe);n&&e.addRule(`
		.monaco-editor .cldr${zt.asCSSSelector(XC)},
		.monaco-editor .cldr${zt.asCSSSelector(gN)},
		.monaco-editor .cldr${zt.asCSSSelector(TJ)},
		.monaco-editor .cldr${zt.asCSSSelector(Dae)} {
			color: ${n} !important;
		}
		`)});var s7=class extends Ie{constructor(){super({id:"editor.action.fontZoomIn",label:m("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){yd.setZoomLevel(yd.getZoomLevel()+1)}},a7=class extends Ie{constructor(){super({id:"editor.action.fontZoomOut",label:m("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){yd.setZoomLevel(yd.getZoomLevel()-1)}},l7=class extends Ie{constructor(){super({id:"editor.action.fontZoomReset",label:m("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){yd.setZoomLevel(0)}};fe(s7);fe(a7);fe(l7);var rw=class i{static _handleEolEdits(e,t){let n,o=[];for(let r of t)typeof r.eol=="number"&&(n=r.eol),r.range&&typeof r.text=="string"&&o.push(r);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),o}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;let n=e.getModel(),o=n.validateRange(t.range);return n.getFullModelRange().equalsRange(o)}static execute(e,t,n){n&&e.pushUndoStop();let o=i._handleEolEdits(e,t);o.length===1&&i._isFullModelReplaceEdit(e,o[0])?e.executeEdits("formatEditsCommand",o.map(r=>Di.replace(E.lift(r.range),r.text))):e.executeEdits("formatEditsCommand",o.map(r=>Di.replaceMove(E.lift(r.range),r.text))),n&&e.pushUndoStop()}},pd=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},sl=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function MJ(i){if(i=i.filter(o=>o.range),!i.length)return;let{range:e}=i[0];for(let o=1;o<i.length;o++)e=E.plusRange(e,i[o].range);let{startLineNumber:t,endLineNumber:n}=e;t===n?i.length===1?co(m("hint11","Made 1 formatting edit on line {0}",t)):co(m("hintn1","Made {0} formatting edits on line {1}",i.length,t)):i.length===1?co(m("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):co(m("hintnn","Made {0} formatting edits between lines {1} and {2}",i.length,t,n))}function Eae(i,e,t){let n=[],o=new Set,r=i.ordered(t);for(let a of r)n.push(a),a.extensionId&&o.add(pd.toKey(a.extensionId));let s=e.ordered(t);for(let a of s){if(a.extensionId){if(o.has(pd.toKey(a.extensionId)))continue;o.add(pd.toKey(a.extensionId))}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return n}var p0=class i{static setFormatterSelector(e){return{dispose:i._selectors.unshift(e)}}static select(e,t,n){return sl(this,void 0,void 0,function*(){if(e.length===0)return;let o=At.first(i._selectors);if(o)return yield o(e,t,n)})}};p0._selectors=new ko;function Lae(i,e,t,n,o,r){return sl(this,void 0,void 0,function*(){let s=i.get(tt),{documentRangeFormattingEditProvider:a}=i.get(Te),l=nc(e)?e.getModel():e,c=a.ordered(l),d=yield p0.select(c,l,n);d&&(o.report(d),yield s.invokeFunction(rwe,d,e,t,r))})}function rwe(i,e,t,n,o){return sl(this,void 0,void 0,function*(){let r=i.get(Qr),s,a;nc(t)?(s=t.getModel(),a=new Ed(t,5,void 0,o)):(s=t,a=new kb(t,o));let l=[],c=0;for(let p of IM(n).sort(E.compareRangesUsingStarts))c>0&&E.areIntersectingOrTouching(l[c-1],p)?l[c-1]=E.fromPositions(l[c-1].getStartPosition(),p.getEndPosition()):c=l.push(p);let d=p=>sl(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(s,p,s.getFormattingOptions(),a.token))||[]}),h=(p,f)=>{if(!p.length||!f.length)return!1;let v=p.reduce((b,A)=>E.plusRange(b,A.range),p[0].range);if(!f.some(b=>E.intersectRanges(v,b.range)))return!1;for(let b of p)for(let A of f)if(E.intersectRanges(b.range,A.range))return!0;return!1},u=[],g=[];try{for(let p of l){if(a.token.isCancellationRequested)return!0;g.push(yield d(p))}for(let p=0;p<l.length;++p)for(let f=p+1;f<l.length;++f){if(a.token.isCancellationRequested)return!0;if(h(g[p],g[f])){let v=E.plusRange(l[p],l[f]),b=yield d(v);l.splice(f,1),l.splice(p,1),l.push(v),g.splice(f,1),g.splice(p,1),g.push(b),p=0,f=0}}for(let p of g){if(a.token.isCancellationRequested)return!0;let f=yield r.computeMoreMinimalEdits(s.uri,p);f&&u.push(...f)}}finally{a.dispose()}if(u.length===0)return!1;if(nc(t))rw.execute(t,u,!0),MJ(u),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{let[{range:p}]=u,f=new Se(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn);s.pushEditOperations([f],u.map(v=>({text:v.text,range:E.lift(v.range),forceMoveMarkers:!0})),v=>{for(let{range:b}of v)if(E.areIntersectingOrTouching(b,f))return[new Se(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn)];return null})}return!0})}function swe(i,e,t,n,o){return sl(this,void 0,void 0,function*(){let r=i.get(tt),s=i.get(Te),a=nc(e)?e.getModel():e,l=Eae(s.documentFormattingEditProvider,s.documentRangeFormattingEditProvider,a),c=yield p0.select(l,a,t);c&&(n.report(c),yield r.invokeFunction(awe,c,e,t,o))})}function awe(i,e,t,n,o){return sl(this,void 0,void 0,function*(){let r=i.get(Qr),s,a;nc(t)?(s=t.getModel(),a=new Ed(t,5,void 0,o)):(s=t,a=new kb(t,o));let l;try{let c=yield e.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(l=yield r.computeMoreMinimalEdits(s.uri,c),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(nc(t))rw.execute(t,l,n!==2),n!==2&&(MJ(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{let[{range:c}]=l,d=new Se(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn);s.pushEditOperations([d],l.map(h=>({text:h.text,range:E.lift(h.range),forceMoveMarkers:!0})),h=>{for(let{range:u}of h)if(E.areIntersectingOrTouching(u,d))return[new Se(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn)];return null})}return!0})}function lwe(i,e,t,n,o,r){return sl(this,void 0,void 0,function*(){let s=e.documentRangeFormattingEditProvider.ordered(t);for(let a of s){let l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,o,r)).catch(Fn);if(Dn(l))return yield i.computeMoreMinimalEdits(t.uri,l)}})}function cwe(i,e,t,n,o){return sl(this,void 0,void 0,function*(){let r=Eae(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(let s of r){let a=yield Promise.resolve(s.provideDocumentFormattingEdits(t,n,o)).catch(Fn);if(Dn(a))return yield i.computeMoreMinimalEdits(t.uri,a)}})}function Iae(i,e,t,n,o,r,s){let a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(o)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,o,r,s)).catch(Fn).then(l=>i.computeMoreMinimalEdits(t.uri,l))}ft.registerCommand("_executeFormatRangeProvider",function(i,...e){return sl(this,void 0,void 0,function*(){let[t,n,o]=e;ai($.isUri(t)),ai(E.isIRange(n));let r=i.get(io),s=i.get(Qr),a=i.get(Te),l=yield r.createModelReference(t);try{return lwe(s,a,l.object.textEditorModel,E.lift(n),o,et.None)}finally{l.dispose()}})});ft.registerCommand("_executeFormatDocumentProvider",function(i,...e){return sl(this,void 0,void 0,function*(){let[t,n]=e;ai($.isUri(t));let o=i.get(io),r=i.get(Qr),s=i.get(Te),a=yield o.createModelReference(t);try{return cwe(r,s,a.object.textEditorModel,n,et.None)}finally{a.dispose()}})});ft.registerCommand("_executeFormatOnTypeProvider",function(i,...e){return sl(this,void 0,void 0,function*(){let[t,n,o,r]=e;ai($.isUri(t)),ai(q.isIPosition(n)),ai(typeof o=="string");let s=i.get(io),a=i.get(Qr),l=i.get(Te),c=yield s.createModelReference(t);try{return Iae(a,l,c.object.textEditorModel,q.lift(n),o,r,et.None)}finally{c.dispose()}})});var Tae=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},jE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},NJ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},sw=class{constructor(i,e,t){this._editor=i,this._languageFeaturesService=e,this._workerService=t,this._disposables=new ne,this._sessionDisposables=new ne,this._disposables.add(e.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(i.onDidChangeModel(()=>this._update())),this._disposables.add(i.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(i.onDidChangeConfiguration(n=>{n.hasChanged(51)&&this._update()}))}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(51)||!this._editor.hasModel())return;let i=this._editor.getModel(),[e]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(i);if(!e||!e.autoFormatTriggerCharacters)return;let t=new uh;for(let n of e.autoFormatTriggerCharacters)t.add(n.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(n=>{let o=n.charCodeAt(n.length-1);t.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(i){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;let e=this._editor.getModel(),t=this._editor.getPosition(),n=new po,o=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){n.cancel(),o.dispose();return}for(let s=0,a=r.changes.length;s<a;s++)if(r.changes[s].range.endLineNumber<=t.lineNumber){n.cancel(),o.dispose();return}});Iae(this._workerService,this._languageFeaturesService,e,t,i,e.getFormattingOptions(),n.token).then(r=>{n.token.isCancellationRequested||Dn(r)&&(rw.execute(this._editor,r,!0),MJ(r))}).finally(()=>{o.dispose()})}};sw.ID="editor.contrib.autoFormat";sw=Tae([jE(1,Te),jE(2,Qr)],sw);var aw=class{constructor(i,e,t){this.editor=i,this._languageFeaturesService=e,this._instantiationService=t,this._callOnDispose=new ne,this._callOnModel=new ne,this._callOnDispose.add(i.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(i.onDidChangeModel(()=>this._update())),this._callOnDispose.add(i.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(e.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(50)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:i})=>this._trigger(i)))}_trigger(i){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(Lae,this.editor,i,2,ic.None,et.None).catch(Ye))}};aw.ID="editor.contrib.formatOnPaste";aw=Tae([jE(1,Te),jE(2,tt)],aw);var c7=class extends Ie{constructor(){super({id:"editor.action.formatDocument",label:m("formatDocument.label","Format Document"),alias:"Format Document",precondition:we.and(B.notInCompositeEditor,B.writable,B.hasDocumentFormattingProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return NJ(this,void 0,void 0,function*(){if(t.hasModel()){let n=e.get(tt);yield e.get(bu).showWhile(n.invokeFunction(swe,t,1,ic.None,et.None),250)}})}},d7=class extends Ie{constructor(){super({id:"editor.action.formatSelection",label:m("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:we.and(B.writable,B.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2084),weight:100},contextMenuOpts:{when:B.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return NJ(this,void 0,void 0,function*(){if(!t.hasModel())return;let n=e.get(tt),o=t.getModel(),r=t.getSelections().map(s=>s.isEmpty()?new E(s.startLineNumber,1,s.startLineNumber,o.getLineMaxColumn(s.startLineNumber)):s);yield e.get(bu).showWhile(n.invokeFunction(Lae,t,r,1,ic.None,et.None),250)})}};Wt(sw.ID,sw);Wt(aw.ID,aw);fe(c7);fe(d7);ft.registerCommand("editor.action.format",i=>NJ(void 0,void 0,void 0,function*(){let e=i.get(Ft).getFocusedCodeEditor();if(!e||!e.hasModel())return;let t=i.get(ji);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var dwe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},NR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},hwe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},vh=class{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let o=n;for(let r=0;t.children.get(o)!==void 0;r++)o=`${n}_${r}`;return o}static empty(e){return e.children.size===0}},m0=class extends vh{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}},h7=class extends vh{constructor(e,t,n,o){super(),this.id=e,this.parent=t,this.label=n,this.order=o,this.children=new Map}},KE=class i extends vh{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t,n){let o=new po(n),r=new i(t.uri),s=e.ordered(t),a=s.map((c,d)=>{var h;let u=vh.findId(`provider_${d}`,r),g=new h7(u,r,(h=c.displayName)!==null&&h!==void 0?h:"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,o.token)).then(p=>{for(let f of p||[])i._makeOutlineElement(f,g);return g},p=>(Fn(p),g)).then(p=>{vh.empty(p)?p.remove():r._groups.set(u,p)})}),l=e.onDidChange(()=>{let c=e.ordered(t);Zn(c,s)||o.cancel()});return Promise.all(a).then(()=>o.token.isCancellationRequested&&!n.isCancellationRequested?i.create(e,t,n):r._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){let n=vh.findId(e,t),o=new m0(n,t,e);if(e.children)for(let r of e.children)i._makeOutlineElement(r,o);t.children.set(o.id,o)}_compact(){let e=0;for(let[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=At.first(this._groups.values());for(let[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){let e=[];for(let t of this.children.values())t instanceof m0?e.push(t.symbol):e.push(...At.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>E.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){let e=this.getTopLevelSymbols(),t=[];return i._flattenDocumentSymbols(t,e,""),t.sort((n,o)=>q.compare(E.getStartPosition(n.range),E.getStartPosition(o.range))||q.compare(E.getEndPosition(o.range),E.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(let o of t)e.push({kind:o.kind,tags:o.tags,name:o.name,detail:o.detail,containerName:o.containerName||n,range:o.range,selectionRange:o.selectionRange,children:void 0}),o.children&&i._flattenDocumentSymbols(e,o.children,o.name)}},pN=ze("IOutlineModelService"),u7=class{constructor(i,e,t){this._languageFeaturesService=i,this._disposables=new ne,this._cache=new tc(10,.7),this._debounceInformation=e.for(i.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(t.onModelRemoved(n=>{this._cache.delete(n.id)}))}dispose(){this._disposables.dispose()}getOrCreate(i,e){return hwe(this,void 0,void 0,function*(){let t=this._languageFeaturesService.documentSymbolProvider,n=t.ordered(i),o=this._cache.get(i.id);if(!o||o.versionId!==i.getVersionId()||!Zn(o.provider,n)){let s=new po;o={versionId:i.getVersionId(),provider:n,promiseCnt:0,source:s,promise:KE.create(t,i,s.token),model:void 0},this._cache.set(i.id,o);let a=Date.now();o.promise.then(l=>{o.model=l,this._debounceInformation.update(i,Date.now()-a)}).catch(l=>{this._cache.delete(i.id)})}if(o.model)return o.model;o.promiseCnt+=1;let r=e.onCancellationRequested(()=>{--o.promiseCnt===0&&(o.source.cancel(),this._cache.delete(i.id))});try{return yield o.promise}finally{r.dispose()}})}};u7=dwe([NR(0,Te),NR(1,Us),NR(2,li)],u7);Ke(pN,u7,!0);var uwe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};ft.registerCommand("_executeDocumentSymbolProvider",function(i,...e){return uwe(this,void 0,void 0,function*(){let[t]=e;ai($.isUri(t));let n=i.get(pN),o=yield i.get(io).createModelReference(t);try{return(yield n.getOrCreate(o.object.textEditorModel,et.None)).getTopLevelSymbols()}finally{o.dispose()}})});var qE="editor.action.inlineSuggest.commit";function gwe(i,e){return{object:i,dispose:()=>e?.dispose()}}function pwe(i,e){let t=new g7(i),n=e.map(o=>{let r=E.lift(o.range);return{startOffset:t.getOffset(r.getStartPosition()),endOffset:t.getOffset(r.getEndPosition()),text:o.text}});n.sort((o,r)=>r.startOffset-o.startOffset);for(let o of n)i=i.substring(0,o.startOffset)+o.text+i.substring(o.endOffset);return i}var g7=class{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}},mwe=[];function fwe(){return mwe}var $E=class{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";let t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return pwe(n,this.parts.map(o=>({range:{startLineNumber:1,endLineNumber:1,startColumn:o.column,endColumn:o.column},text:o.lines.join(`
`)}))).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}},lw=class{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}},GE=class{constructor(e,t,n,o,r=0){this.lineNumber=e,this.columnStart=t,this.length=n,this.newLines=o,this.additionalReservedLineCount=r,this.parts=[new lw(this.columnStart+this.length,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join(`
`)}},YE=class extends J{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new Q,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(108)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}};function JE(i,e){if(!e)return e;let t=i.getValueInRange(e.range),n=Zg(t,e.insertText),o=i.getOffsetAt(e.range.getStartPosition())+n,r=i.getPositionAt(o),s=t.substr(n),a=kA(s,e.insertText),l=i.getPositionAt(Math.max(o,i.getOffsetAt(e.range.getEndPosition())-a));return{range:E.fromPositions(r,l),insertText:e.insertText.substr(n,e.insertText.length-n-a),snippetInfo:e.snippetInfo,filterText:e.filterText,additionalTextEdits:e.additionalTextEdits}}function _we(i,e){return i===e?!0:!i||!e?!1:i.range.equalsRange(e.range)&&i.insertText===e.insertText&&i.command===e.command}function Mae(i,e,t,n,o=0){if(i.range.startLineNumber!==i.range.endLineNumber)return;let r=e.getLineContent(i.range.startLineNumber),s=hi(r).length;if(i.range.startColumn-1<=s){let u=hi(i.insertText).length,g=r.substring(i.range.startColumn-1,s),p=E.fromPositions(i.range.getStartPosition().delta(0,g.length),i.range.getEndPosition()),f=i.insertText.startsWith(g)?i.insertText.substring(g.length):i.insertText.substring(u);i={range:p,insertText:f,command:i.command,snippetInfo:void 0,filterText:i.filterText,additionalTextEdits:i.additionalTextEdits}}let a=e.getValueInRange(i.range),l=vwe(a,i.insertText);if(!l)return;let c=i.range.startLineNumber,d=new Array;if(t==="prefix"){let u=l.filter(g=>g.originalLength===0);if(u.length>1||u.length===1&&u[0].originalStart!==a.length)return}let h=i.insertText.length-o;for(let u of l){let g=i.range.startColumn+u.originalStart+u.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===i.range.startLineNumber&&g<n.column||u.originalLength>0)return;if(u.modifiedLength===0)continue;let p=u.modifiedStart+u.modifiedLength,f=Math.max(u.modifiedStart,Math.min(p,h)),v=i.insertText.substring(u.modifiedStart,f),b=i.insertText.substring(f,Math.max(u.modifiedStart,p));if(v.length>0){let A=il(v);d.push(new lw(g,A,!1))}if(b.length>0){let A=il(b);d.push(new lw(g,A,!0))}}return new $E(c,d,0)}var Iu;function vwe(i,e){if(Iu?.originalValue===i&&Iu?.newValue===e)return Iu?.changes;{let t=ate(i,e,!0);if(t){let n=ste(t);if(n>0){let o=ate(i,e,!1);o&&ste(o)<n&&(t=o)}}return Iu={originalValue:i,newValue:e,changes:t},t}}function ste(i){let e=0;for(let t of i)e+=Math.max(t.originalLength-t.modifiedLength,0);return e}function ate(i,e,t){if(i.length>5e3||e.length>5e3)return;function n(c){let d=0;for(let h=0,u=c.length;h<u;h++){let g=c.charCodeAt(h);g>d&&(d=g)}return d}let o=Math.max(n(i),n(e));function r(c){if(c<0)throw new Error("unexpected");return o+c+1}function s(c){let d=0,h=0,u=new Int32Array(c.length);for(let g=0,p=c.length;g<p;g++)if(t&&c[g]==="("){let f=h*100+d;u[g]=r(2*f),d++}else if(t&&c[g]===")"){d=Math.max(d-1,0);let f=h*100+d;u[g]=r(2*f+1),d===0&&h++}else u[g]=c.charCodeAt(g);return u}let a=s(i),l=s(e);return new s0({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}function Awe(i,e){let t=new Xx,n=new nk(t,c=>e.getLanguageConfiguration(c)),o=new ik(new p7([i]),n),r=u5(o,[],void 0,!0),s="",a=i.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=Zi(d,c.openingBracket.length),c.child&&(l(c.child,d),d=Zi(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=Zi(d,c.closingBracket.length);else{let h=n.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);s+=h}else if(c.kind!==3){if(c.kind===0||c.kind===1)s+=a.substring(d,Zi(d,c.length));else if(c.kind===4)for(let h of c.children)l(h,d),d=Zi(d,h.length)}}return l(r,da),s}var p7=class{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}},bwe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Ev=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Vc=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},m7=class extends J{constructor(i,e,t,n,o,r,s){super(),this.editor=i,this.cache=e,this.commandService=t,this.languageConfigurationService=n,this.languageFeaturesService=o,this.debounceService=r,this.onDidChangeEmitter=new Q,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new eo),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(t.onDidExecuteCommand(a=>{new Set([Uf.Tab.id,Uf.DeleteLeft.id,Uf.DeleteRight.id,qE,"acceptSelectedSuggestion"]).has(a.commandId)&&i.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(a=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(a=>{(a.reason===3||this.session&&!this.session.isValid)&&this.hide()})),this._register(ct(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{s.getValue("editor.inlineSuggest.hideOnBlur")||this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var i;return(i=this.session)===null||i===void 0?void 0:i.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(i){var e;(e=this.session)===null||e===void 0||e.setExpanded(i)}setActive(i){var e;this.active=i,i&&((e=this.session)===null||e===void 0||e.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(57).enabled&&(this.session&&this.session.isValid||this.trigger(or.Automatic))}trigger(i){if(this.completionSession.value){i===or.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new f7(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,i,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var i;(i=this.session)===null||i===void 0||i.commitCurrentCompletion()}showNext(){var i;(i=this.session)===null||i===void 0||i.showNextInlineCompletion()}showPrevious(){var i;(i=this.session)===null||i===void 0||i.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var i;return Vc(this,void 0,void 0,function*(){let e=yield(i=this.session)===null||i===void 0?void 0:i.hasMultipleInlineCompletions();return e!==void 0?e:!1})}};m7=bwe([Ev(2,ji),Ev(3,Yi),Ev(4,Te),Ev(5,Us),Ev(6,Ot)],m7);var f7=class extends YE{constructor(e,t,n,o,r,s,a,l,c){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=o,this.cache=r,this.initialTriggerKind=s,this.languageConfigurationService=a,this.registry=l,this.debounce=c,this.minReservedLineCount=0,this.updateOperation=this._register(new eo),this.updateSoon=this._register(new jt(()=>{let h=this.initialTriggerKind;return this.initialTriggerKind=or.Automatic,this.update(h)},50)),this.filteredCompletions=[],this.currentlySelectedCompletionId=void 0;let d;this._register(this.onDidChange(()=>{var h;let u=this.currentCompletion;if(u&&u.sourceInlineCompletion!==d){d=u.sourceInlineCompletion;let g=u.sourceProvider;(h=g.handleItemDidShow)===null||h===void 0||h.call(g,u.sourceInlineCompletions,d)}})),this._register(ct(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(h=>{var u;h.reason!==3&&((u=this.cache.value)===null||u===void 0||u.updateRanges(),this.cache.value&&(this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire()))})),this._register(this.editor.onDidChangeModelContent(h=>{var u;(u=this.cache.value)===null||u===void 0||u.updateRanges(),this.updateFilteredInlineCompletions(),this.scheduleAutomaticUpdate()})),this._register(this.registry.onDidChange(()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))})),this.scheduleAutomaticUpdate()}updateFilteredInlineCompletions(){if(!this.cache.value){this.filteredCompletions=[];return}let e=this.editor.getModel(),t=e.validatePosition(this.editor.getPosition());this.filteredCompletions=this.cache.value.completions.filter(n=>{let o=e.getValueInRange(n.synchronizedRange).toLowerCase(),r=n.inlineCompletion.filterText.toLowerCase(),s=e.getLineIndentColumn(n.synchronizedRange.startLineNumber),a=Math.max(0,t.column-n.synchronizedRange.startColumn),l=r.substring(0,a),c=r.substring(a),d=o.substring(0,a),h=o.substring(a);return n.synchronizedRange.startColumn<=s&&(d=d.trimStart(),d.length===0&&(h=h.trimStart()),l=l.trimStart(),l.length===0&&(c=c.trimStart())),l.startsWith(d)&&Ire(h,c)})}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;let e=this.filteredCompletions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){return Vc(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();let e=this.filteredCompletions||[];if(e.length>0){let t=(this.fixAndGetIndexOfCurrentSelection()+1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){return Vc(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();let e=this.filteredCompletions||[];if(e.length>0){let t=(this.fixAndGetIndexOfCurrentSelection()+e.length-1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return Vc(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===or.Explicit?yield this.updateOperation.value.promise:yield this.update(or.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==or.Explicit&&(yield this.update(or.Explicit))})}hasMultipleInlineCompletions(){var e;return Vc(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){let e=this.currentCompletion;if(!e)return;let t=this.editor.getPosition();if(e.range.getEndPosition().isBefore(t))return;let n=this.editor.getOptions().get(57).mode,o=Mae(e,this.editor.getModel(),n,t);return o?o.isEmpty()?void 0:o:new GE(e.range.startLineNumber,e.range.startColumn,e.range.endColumn-e.range.startColumn,e.insertText.split(`
`),0)}get currentCompletion(){let e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(e){return Vc(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;let t=this.editor.getPosition(),n=new Date,o=Gn(s=>Vc(this,void 0,void 0,function*(){let a;try{a=yield Nae(this.registry,t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},s,this.languageConfigurationService);let l=new Date;this.debounce.update(this.editor.getModel(),l.getTime()-n.getTime())}catch(l){Ye(l);return}s.isCancellationRequested||(this.cache.setValue(this.editor,a,e),this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire())})),r=new XE(o,e);this.updateOperation.value=r,yield o,this.updateOperation.value===r&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;let e=this.currentCompletion;e&&this.commit(e)}commit(e){var t;let n=this.cache.clearAndLeak();e.snippetInfo?(this.editor.executeEdits("inlineSuggestion.accept",[Di.replaceMove(e.range,""),...e.additionalTextEdits]),this.editor.setPosition(e.snippetInfo.range.getStartPosition()),(t=Nn.get(this.editor))===null||t===void 0||t.insert(e.snippetInfo.snippet)):this.editor.executeEdits("inlineSuggestion.accept",[Di.replaceMove(e.range,e.insertText),...e.additionalTextEdits]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{n?.dispose()}).then(void 0,Fn):n?.dispose(),this.onDidChangeEmitter.fire()}get commands(){var e;return[...new Set(((e=this.cache.value)===null||e===void 0?void 0:e.completions.map(t=>t.inlineCompletion.sourceInlineCompletions))||[])].flatMap(t=>t.commands||[])}},XE=class{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}},_7=class extends J{constructor(e,t,n,o){super(),this.editor=t,this.onChange=n,this.triggerKind=o,this.isDisposing=!1;let r=t.changeDecorations(s=>s.deltaDecorations([],e.items.map(a=>({range:a.range,options:{description:"inline-completion-tracking-range"}}))));this._register(ct(()=>{this.isDisposing=!0,t.removeDecorations(r)})),this.completions=e.items.map((s,a)=>new v7(s,r[a])),this._register(t.onDidChangeModelContent(()=>{this.updateRanges()})),this._register(e)}updateRanges(){if(this.isDisposing)return;let e=!1,t=this.editor.getModel();for(let n of this.completions){let o=t.getDecorationRange(n.decorationId);if(!o){Ye(new Error("Decoration has no range"));continue}n.synchronizedRange.equalsRange(o)||(e=!0,n.synchronizedRange=o)}e&&this.onChange()}},v7=class{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.insertText,abbreviation:this.inlineCompletion.filterText,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{insertText:this.inlineCompletion.insertText,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion,snippetInfo:this.inlineCompletion.snippetInfo,filterText:this.inlineCompletion.filterText,additionalTextEdits:this.inlineCompletion.additionalTextEdits}}};function Nae(i,e,t,n,o=et.None,r){return Vc(this,void 0,void 0,function*(){let s=wwe(e,t),a=i.all(t),l=yield Promise.all(a.map(d=>Vc(this,void 0,void 0,function*(){let h=yield Promise.resolve(d.provideInlineCompletions(t,e,n,o)).catch(Fn);return{completions:h,provider:d,dispose:()=>{h&&d.freeInlineCompletions(h)}}}))),c=new Map;for(let d of l){let h=d.completions;if(h)for(let u of h.items){let g=u.range?E.lift(u.range):s;if(g.startLineNumber!==g.endLineNumber)continue;let p,f;if(typeof u.insertText=="string"){if(p=u.insertText,r&&u.completeBracketPairs){p=Cwe(p,g.getStartPosition(),t,r);let b=p.length-u.insertText.length;b!==0&&(g=new E(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn+b))}f=void 0}else"snippet"in u.insertText?(p=new Ps().parse(u.insertText.snippet).toString(),f={snippet:u.insertText.snippet,range:g}):_M(u.insertText);let v={insertText:p,snippetInfo:f,range:g,command:u.command,sourceProvider:d.provider,sourceInlineCompletions:h,sourceInlineCompletion:u,filterText:u.filterText||p,additionalTextEdits:u.additionalTextEdits||fwe()};c.set(JSON.stringify({insertText:p,range:u.range}),v)}}return{items:[...c.values()],dispose:()=>{for(let d of l)d.dispose()}}})}function wwe(i,e){let t=e.getWordAtPosition(i),n=e.getLineMaxColumn(i.lineNumber);return t?new E(i.lineNumber,t.startColumn,i.lineNumber,n):E.fromPositions(i,i.with(void 0,n))}function Cwe(i,e,t,n){let o=t.getLineContent(e.lineNumber).substring(0,e.column-1)+i,r=t.tokenization.tokenizeLineWithEdit(e,o.length-(e.column-1),i),s=r?.sliceAndInflate(e.column-1,o.length,0);return s?Awe(s,n):i}var ywe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},lte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},cw=class{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let o=n[0].score[0];for(let r=0;r<n.length;r++){let{score:s,completion:a}=n[r];if(s[0]!==o)break;if(a.preselect)return r}return 0}},ZE=class extends cw{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}},A7=class extends cw{constructor(){super("recentlyUsed"),this._cache=new tc(300,.66),this._seq=0}memorize(e,t,n){let o=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(o,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;let o=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(o))return super.select(e,t,n);let r=n[0].score[0],s=-1,a=-1,l=-1;for(let c=0;c<n.length&&n[c].score[0]===r;c++){let d=`${e.getLanguageId()}/${n[c].textLabel}`,h=this._cache.peek(d);if(h&&h.touch>l&&h.type===n[c].completion.kind&&h.insertText===n[c].completion.insertText&&(l=h.touch,a=c),n[c].completion.preselect&&s===-1)return s=c}return a!==-1?a:s!==-1?s:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(let[n,o]of e)o.touch=t,o.type=typeof o.type=="number"?o.type:ib.fromString(o.type),this._cache.set(n,o);this._seq=this._cache.size}},b7=class extends cw{constructor(){super("recentlyUsedByPrefix"),this._trie=gd.forStrings(),this._seq=0}memorize(e,t,n){let{word:o}=e.getWordUntilPosition(t),r=`${e.getLanguageId()}/${o}`;this._trie.set(r,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:o}=e.getWordUntilPosition(t);if(!o)return super.select(e,t,n);let r=`${e.getLanguageId()}/${o}`,s=this._trie.get(r);if(s||(s=this._trie.findSubstr(r)),s)for(let a=0;a<n.length;a++){let{kind:l,insertText:c}=n[a].completion;if(l===s.type&&c===s.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(let[t,n]of e)n.type=typeof n.type=="number"?n.type:ib.fromString(n.type),this._trie.set(t,n)}}},dw=class zS{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new ne,this._persistSoon=new jt(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===Vk.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;let o=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==o){this._saveState();let r=zS._strategyCtors.get(o)||ZE;this._strategy=new r;try{let s=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,a=this._storageService.get(`${zS._storagePrefix}/${o}`,s);a&&this._strategy.fromJSON(JSON.parse(a))}catch{}}return this._strategy}_saveState(){if(this._strategy){let e=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,t=JSON.stringify(this._strategy);this._storageService.store(`${zS._storagePrefix}/${this._strategy.name}`,t,e,1)}}};dw._strategyCtors=new Map([["recentlyUsedByPrefix",b7],["recentlyUsed",A7],["first",ZE]]);dw._storagePrefix="suggest/memories";dw=ywe([lte(0,Ea),lte(1,Ot)],dw);var mN=ze("ISuggestMemories");Ke(mN,dw,!0);var Swe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Dwe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},hw=class Rae{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=Rae.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(113)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){let e=this._editor.getOption(113)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){let t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}let n=this._editor.getModel(),o=this._editor.getSelection(),r=n.getWordAtPosition(o.getStartPosition());if(!r){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(r.endColumn===o.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};hw.AtEnd=new Le("atEndOfWord",!1);hw=Swe([Dwe(1,Ze)],hw);var xwe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},kwe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Mp=class VS{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=VS.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(VS._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let o=n;for(;o=(o+t.items.length+(e?1:-1))%t.items.length,!(o===n||!t.items[o].completion.additionalTextEdits););return o}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=VS._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Mp.OtherSuggestions=new Le("hasOtherSuggestions",!1);Mp=xwe([kwe(1,Ze)],Mp);var w7=class{constructor(e,t,n){this._disposables=new ne,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(o=>{if(this._active&&!t.isFrozen()){let r=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!Dn(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;let t=new uh;for(let n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}},Ewe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},f0=class i{provideSelectionRanges(e,t){return Ewe(this,void 0,void 0,function*(){let n=[];for(let o of t){let r=[];n.push(r);let s=new Map;yield new Promise(a=>i._bracketsRightYield(a,0,e,o,s)),yield new Promise(a=>i._bracketsLeftYield(a,0,e,o,s,r))}return n})}static _bracketsRightYield(e,t,n,o,r){let s=new Map,a=Date.now();for(;;){if(t>=i._maxRounds){e();break}if(!o){e();break}let l=n.bracketPairs.findNextBracket(o);if(!l){e();break}if(Date.now()-a>i._maxDuration){setTimeout(()=>i._bracketsRightYield(e,t+1,n,o,r));break}if(l.bracketInfo.isOpeningBracket){let c=l.bracketInfo.bracketText,d=s.has(c)?s.get(c):0;s.set(c,d+1)}else{let c=l.bracketInfo.getClosedBrackets()[0].bracketText,d=s.has(c)?s.get(c):0;if(d-=1,s.set(c,Math.max(0,d)),d<0){let h=r.get(c);h||(h=new ko,r.set(c,h)),h.push(l.range)}}o=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,o,r,s){let a=new Map,l=Date.now();for(;;){if(t>=i._maxRounds&&r.size===0){e();break}if(!o){e();break}let c=n.bracketPairs.findPrevBracket(o);if(!c){e();break}if(Date.now()-l>i._maxDuration){setTimeout(()=>i._bracketsLeftYield(e,t+1,n,o,r,s));break}if(c.bracketInfo.isOpeningBracket){let d=c.bracketInfo.bracketText,h=a.has(d)?a.get(d):0;if(h-=1,a.set(d,Math.max(0,h)),h<0){let u=r.get(d);if(u){let g=u.shift();u.size===0&&r.delete(d);let p=E.fromPositions(c.range.getEndPosition(),g.getStartPosition()),f=E.fromPositions(c.range.getStartPosition(),g.getEndPosition());s.push({range:p}),s.push({range:f}),i._addBracketLeading(n,f,s)}}}else{let d=c.bracketInfo.getClosedBrackets()[0].bracketText,h=a.has(d)?a.get(d):0;a.set(d,h+1)}o=c.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;let o=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(o);r!==0&&r!==t.startColumn&&(n.push({range:E.fromPositions(new q(o,r),t.getEndPosition())}),n.push({range:E.fromPositions(new q(o,1),t.getEndPosition())}));let s=o-1;if(s>0){let a=e.getLineFirstNonWhitespaceColumn(s);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(s)&&(n.push({range:E.fromPositions(new q(s,a),t.getEndPosition())}),n.push({range:E.fromPositions(new q(s,1),t.getEndPosition())}))}}};f0._maxDuration=30;f0._maxRounds=2;var Lwe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},_0=class i{static create(e,t){return Lwe(this,void 0,void 0,function*(){if(!t.getOption(108).localityBonus||!t.hasModel())return i.None;let n=t.getModel(),o=t.getPosition();if(!e.canComputeWordRanges(n.uri))return i.None;let[r]=yield new f0().provideSelectionRanges(n,[o]);if(r.length===0)return i.None;let s=yield e.computeWordRanges(n.uri,r[0].range);if(!s)return i.None;let a=n.getWordUntilPosition(o);return delete s[a.word],new class extends i{distance(l,c){if(!o.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;let d=typeof c.label=="string"?c.label:c.label.label,h=s[d];if(kM(h))return 2<<20;let u=xM(h,E.fromPositions(l),E.compareRangesUsingStarts),g=u>=0?h[u]:h[Math.max(0,~u-1)],p=r.length;for(let f of r){if(!E.containsRange(f.range,g))break;p-=1}return p}}})}};_0.None=new class extends _0{distance(){return 0}};var cte=class{constructor(i,e){this.leadingLineContent=i,this.characterCountDelta=e}},eL=class i{constructor(e,t,n,o,r,s,a=yb.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=i._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=o,this._options=r,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=a,s==="top"?this._snippetCompareFn=i._compareCompletionItemsSnippetsUp:s==="bottom"&&(this._snippetCompareFn=i._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();let e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;let e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext,o="",r="",s=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||s.length>2e3?X_:T0e;for(let c=0;c<s.length;c++){let d=s[c];if(d.isInvalid)continue;this._providerInfo.set(d.provider,!!d.container.incomplete);let h=d.position.column-d.editStart.column,u=h+n-(d.position.column-this._column);if(o.length!==u&&(o=u===0?"":t.slice(-u),r=o.toLowerCase()),d.word=o,u===0)d.score=Ja.Default;else{let g=0;for(;g<h;){let p=o.charCodeAt(g);if(p===32||p===9)g+=1;else break}if(g>=u)d.score=Ja.Default;else if(typeof d.completion.filterText=="string"){let p=l(o,r,g,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!p)continue;w_(d.completion.filterText,d.textLabel)===0?d.score=p:(d.score=k0e(o,r,g,d.textLabel,d.labelLow,0),d.score[0]=p[0])}else{let p=l(o,r,g,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!p)continue;d.score=p}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?MB(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return i._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return i._compareCompletionItems(e,t)}},Iwe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Tu=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Twe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},nh=class{constructor(e,t,n,o,r){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=o,this.noSelect=r}static shouldAutoTrigger(e){if(!e.hasModel())return!1;let t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);let o=t.getWordAtPosition(n);return!(!o||o.endColumn!==n.column||!isNaN(Number(o.word)))}};function Mwe(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;let n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function Nwe(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;let n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}var C7=class Fae{constructor(e,t,n,o,r,s,a,l){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=o,this._logService=r,this._contextKeyService=s,this._configurationService=a,this._languageFeaturesService=l,this._toDispose=new ne,this._triggerCharacterListener=new ne,this._triggerQuickSuggest=new Sr,this._state=0,this._completionDisposables=new ne,this._onDidCancel=new Q,this._onDidTrigger=new Q,this._onDidSuggest=new Q,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Se(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let c=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{c=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{c=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(d=>{c||this._onCursorChange(d)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{c||this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){st(this._triggerCharacterListener),st([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(83)||!this._editor.hasModel()||!this._editor.getOption(111))return;let e=new Map;for(let n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(let o of n.triggerCharacters||[]){let r=e.get(o);r||(r=new Set,r.add(IAe()),e.set(o,r)),r.add(n)}let t=n=>{if(!Nwe(this._editor,this._contextKeyService,this._configurationService)||nh.shouldAutoTrigger(this._editor))return;if(!n){let s=this._editor.getPosition();n=this._editor.getModel().getLineContent(s.lineNumber).substr(0,s.column-1)}let o="";ep(n.charCodeAt(n.length-1))?En(n.charCodeAt(n.length-2))&&(o=n.substr(n.length-2)):o=n.charAt(n.length-1);let r=e.get(o);if(r){let s=this._completionModel?{items:this._completionModel.adopt(r),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,noSelect:!1,triggerCharacter:o},!!this._completionModel,r,s)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1,noSelect:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;let t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;fh.isAllOff(this._editor.getOption(81))||this._editor.getOption(108).snippetsPreventQuickSuggestions&&!((e=Nn.get(this._editor))===null||e===void 0)&&e.isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!nh.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;let t=this._editor.getModel(),n=this._editor.getPosition(),o=this._editor.getOption(81);if(!fh.isAllOff(o)){if(!fh.isAllOn(o)){t.tokenization.tokenizeIfCheap(n.lineNumber);let r=t.tokenization.getLineTokens(n.lineNumber),s=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(fh.valueFor(o,s)!=="on")return}Mwe(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0,shy:!1,noSelect:!1})}},this._editor.getOption(82)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;let e=this._editor.getModel(),t=this._editor.getPosition(),n=new nh(e,t,this._state===2,!1,!1);this._onNewContext(n)})}trigger(e,t=!1,n,o,r){var s;if(!this._editor.hasModel())return;let a=this._editor.getModel(),l=e.auto,c=new nh(a,this._editor.getPosition(),l,e.shy,e.noSelect);this.cancel(t),this._state=l?2:1,this._onDidTrigger.fire({auto:l,shy:e.shy,position:this._editor.getPosition()}),this._context=c;let d={triggerKind:(s=e.triggerKind)!==null&&s!==void 0?s:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new po;let h=this._editor.getOption(103),u=1;switch(h){case"top":u=0;break;case"bottom":u=2;break}let{itemKind:g,showDeprecated:p}=Fae._createSuggestFilter(this._editor),f=new xp(u,r?new Set:g,n,p),v=_0.create(this._editorWorkerService,this._editor),b=CJ(this._languageFeaturesService.completionProvider,a,this._editor.getPosition(),f,d,this._requestToken.token);Promise.all([b,v]).then(([A,w])=>Twe(this,void 0,void 0,function*(){var C;if((C=this._requestToken)===null||C===void 0||C.dispose(),!this._editor.hasModel())return;let k=o?.clipboardText;if(!k&&A.needsClipboard&&(k=yield this._clipboardService.readText()),this._state===0)return;let L=this._editor.getModel(),S=A.items;if(o){let M=oae(u);S=S.concat(o.items).sort(M)}let y=new nh(L,this._editor.getPosition(),l,e.shy,e.noSelect);this._completionModel=new eL(S,this._context.column,{leadingLineContent:y.leadingLineContent,characterCountDelta:y.column-this._context.column},w,this._editor.getOption(108),this._editor.getOption(103),void 0,k),this._completionDisposables.add(A.disposable),this._onNewContext(y),this._reportDurationsTelemetry(A.durations)})).catch(Ye)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){let t=new Set;e.getOption(103)==="none"&&t.add(27);let n=e.getOption(108);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(27),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(hi(e.leadingLineContent)!==hi(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){let t=new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));for(let o of this._completionModel.allProvider)t.delete(o);let n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){let{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,noSelect:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(nh.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,noSelect:this._context.noSelect,isFrozen:n})}}}}};C7=Iwe([Tu(1,Qr),Tu(2,Da),Tu(3,Vs),Tu(4,no),Tu(5,Ze),Tu(6,Ot),Tu(7,Te)],C7);var tL=class i{constructor(e,t){this._disposables=new ne,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;let n=e.getSelections(),o=n.length,r=!1;for(let a=0;a<o;a++)if(!n[a].isEmpty()){r=!0;break}if(!r)return;this._lastOvertyped=[];let s=e.getModel();for(let a=0;a<o;a++){let l=n[a];if(s.getValueLengthInRange(l)>i._maxSelectionLength)return;this._lastOvertyped[a]={value:s.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};tL._maxSelectionLength=51200;function dte(i){let e=i.definition;for(;e instanceof _;)e=e.definition;return`.codicon-${i.id}:before { content: '${e.fontCharacter}'; }`}var Rwe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},RR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},y7=class i extends r0{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=m("ddd","{0} ({1})",this._action.label,i.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"\u23CE")}},S7=class{constructor(i,e,t,n){this._menuService=t,this._contextKeyService=n,this._menuDisposables=new ne,this.element=ae(i,ge(".suggest-status-bar"));let o=r=>r instanceof Uh?e.createInstance(y7,r,void 0):void 0;this._leftActions=new wa(this.element,{actionViewItemProvider:o}),this._rightActions=new wa(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){let i=this._menuService.createMenu(Eh,this._contextKeyService),e=()=>{let t=[],n=[];for(let[o,r]of i.getActions())o==="left"?t.push(...r):n.push(...r);this._leftActions.clear(),this._leftActions.push(t),this._rightActions.clear(),this._rightActions.push(n)};this._menuDisposables.add(i.onDidChange(()=>e())),this._menuDisposables.add(i)}hide(){this._menuDisposables.clear()}};S7=Rwe([RR(1,tt),RR(2,em),RR(3,Ze)],S7);var Fwe=P("symbolIcon.arrayForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Bwe=P("symbolIcon.booleanForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Pwe=P("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Owe=P("symbolIcon.colorForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Hwe=P("symbolIcon.constantForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Wwe=P("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zwe=P("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Vwe=P("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Uwe=P("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qwe=P("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jwe=P("symbolIcon.fileForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Kwe=P("symbolIcon.folderForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qwe=P("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$we=P("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Gwe=P("symbolIcon.keyForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ywe=P("symbolIcon.keywordForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jwe=P("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Xwe=P("symbolIcon.moduleForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Zwe=P("symbolIcon.namespaceForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),eCe=P("symbolIcon.nullForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),tCe=P("symbolIcon.numberForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),iCe=P("symbolIcon.objectForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),nCe=P("symbolIcon.operatorForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),oCe=P("symbolIcon.packageForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),rCe=P("symbolIcon.propertyForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),sCe=P("symbolIcon.referenceForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),aCe=P("symbolIcon.snippetForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),lCe=P("symbolIcon.stringForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),cCe=P("symbolIcon.structForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),dCe=P("symbolIcon.textForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hCe=P("symbolIcon.typeParameterForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),uCe=P("symbolIcon.unitForeground",{dark:ue,light:ue,hcDark:ue,hcLight:ue},m("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gCe=P("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));xi((i,e)=>{let t=i.getColor(Fwe);t&&e.addRule(`${_.symbolArray.cssSelector} { color: ${t}; }`);let n=i.getColor(Bwe);n&&e.addRule(`${_.symbolBoolean.cssSelector} { color: ${n}; }`);let o=i.getColor(Pwe);o&&e.addRule(`${_.symbolClass.cssSelector} { color: ${o}; }`);let r=i.getColor(Jwe);r&&e.addRule(`${_.symbolMethod.cssSelector} { color: ${r}; }`);let s=i.getColor(Owe);s&&e.addRule(`${_.symbolColor.cssSelector} { color: ${s}; }`);let a=i.getColor(Hwe);a&&e.addRule(`${_.symbolConstant.cssSelector} { color: ${a}; }`);let l=i.getColor(Wwe);l&&e.addRule(`${_.symbolConstructor.cssSelector} { color: ${l}; }`);let c=i.getColor(zwe);c&&e.addRule(`
			${_.symbolValue.cssSelector},${_.symbolEnum.cssSelector} { color: ${c}; }`);let d=i.getColor(Vwe);d&&e.addRule(`${_.symbolEnumMember.cssSelector} { color: ${d}; }`);let h=i.getColor(Uwe);h&&e.addRule(`${_.symbolEvent.cssSelector} { color: ${h}; }`);let u=i.getColor(Qwe);u&&e.addRule(`${_.symbolField.cssSelector} { color: ${u}; }`);let g=i.getColor(jwe);g&&e.addRule(`${_.symbolFile.cssSelector} { color: ${g}; }`);let p=i.getColor(Kwe);p&&e.addRule(`${_.symbolFolder.cssSelector} { color: ${p}; }`);let f=i.getColor(qwe);f&&e.addRule(`${_.symbolFunction.cssSelector} { color: ${f}; }`);let v=i.getColor($we);v&&e.addRule(`${_.symbolInterface.cssSelector} { color: ${v}; }`);let b=i.getColor(Gwe);b&&e.addRule(`${_.symbolKey.cssSelector} { color: ${b}; }`);let A=i.getColor(Ywe);A&&e.addRule(`${_.symbolKeyword.cssSelector} { color: ${A}; }`);let w=i.getColor(Xwe);w&&e.addRule(`${_.symbolModule.cssSelector} { color: ${w}; }`);let C=i.getColor(Zwe);C&&e.addRule(`${_.symbolNamespace.cssSelector} { color: ${C}; }`);let k=i.getColor(eCe);k&&e.addRule(`${_.symbolNull.cssSelector} { color: ${k}; }`);let L=i.getColor(tCe);L&&e.addRule(`${_.symbolNumber.cssSelector} { color: ${L}; }`);let S=i.getColor(iCe);S&&e.addRule(`${_.symbolObject.cssSelector} { color: ${S}; }`);let y=i.getColor(nCe);y&&e.addRule(`${_.symbolOperator.cssSelector} { color: ${y}; }`);let M=i.getColor(oCe);M&&e.addRule(`${_.symbolPackage.cssSelector} { color: ${M}; }`);let O=i.getColor(rCe);O&&e.addRule(`${_.symbolProperty.cssSelector} { color: ${O}; }`);let H=i.getColor(sCe);H&&e.addRule(`${_.symbolReference.cssSelector} { color: ${H}; }`);let D=i.getColor(aCe);D&&e.addRule(`${_.symbolSnippet.cssSelector} { color: ${D}; }`);let K=i.getColor(lCe);K&&e.addRule(`${_.symbolString.cssSelector} { color: ${K}; }`);let oe=i.getColor(cCe);oe&&e.addRule(`${_.symbolStruct.cssSelector} { color: ${oe}; }`);let ie=i.getColor(dCe);ie&&e.addRule(`${_.symbolText.cssSelector} { color: ${ie}; }`);let ce=i.getColor(hCe);ce&&e.addRule(`${_.symbolTypeParameter.cssSelector} { color: ${ce}; }`);let se=i.getColor(uCe);se&&e.addRule(`${_.symbolUnit.cssSelector} { color: ${se}; }`);let _e=i.getColor(gCe);_e&&e.addRule(`${_.symbolVariable.cssSelector} { color: ${_e}; }`)});var iL=class{constructor(){this._onDidWillResize=new Q,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new Q,this.onDidResize=this._onDidResize.event,this._sashListener=new ne,this._size=new Si(0,0),this._minSize=new Si(0,0),this._maxSize=new Si(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Ka(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Ka(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Ka(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:bk.North}),this._southSash=new Ka(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:bk.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Z.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Z.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(o=>{e&&(n=o.currentX-o.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(o=>{e&&(n=-(o.currentX-o.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(o=>{e&&(t=-(o.currentY-o.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(o=>{e&&(t=o.currentY-o.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Z.any(this._eastSash.onDidReset,this._westSash.onDidReset)(o=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Z.any(this._northSash.onDidReset,this._southSash.onDidReset)(o=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,o){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=o?3:0}layout(e=this.size.height,t=this.size.width){let{height:n,width:o}=this._minSize,{height:r,width:s}=this._maxSize;e=Math.max(n,Math.min(r,e)),t=Math.max(o,Math.min(s,t));let a=new Si(t,e);Si.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}},pCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},mCe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function RJ(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}var D7=class{constructor(i,e){this._editor=i,this._onDidClose=new Q,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new Q,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new ne,this._renderDisposeable=new ne,this._borderWidth=1,this._size=new Si(330,0),this.domNode=ge(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=e.createInstance(Ld,{editor:i}),this._body=ge(".body"),this._scrollbar=new ap(this._body,{alwaysConsumeMouseWheel:!0}),ae(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ae(this._body,ge(".header")),this._close=ae(this._header,ge("span"+_.close.cssSelector)),this._close.title=m("details.close","Close"),this._type=ae(this._header,ge("p.type")),this._docs=ae(this._body,ge("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(t=>{t.hasChanged(46)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){let i=this._editor.getOptions(),e=i.get(46),t=e.getMassagedFontFamily(),n=i.get(109)||e.fontSize,o=i.get(110)||e.lineHeight,r=e.fontWeight,s=`${n}px`,a=`${o}px`;this.domNode.style.fontSize=s,this.domNode.style.lineHeight=`${o/n}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=e.fontFeatureSettings,this._type.style.fontFamily=t,this._close.style.height=a,this._close.style.width=a}getLayoutInfo(){let i=this._editor.getOption(110)||this._editor.getOption(46).lineHeight,e=this._borderWidth,t=e*2;return{lineHeight:i,borderWidth:e,borderHeight:t,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=m("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(i,e){var t,n;this._renderDisposeable.clear();let{detail:o,documentation:r}=i.completion;if(e){let s="";s+=`score: ${i.score[0]}
`,s+=`prefix: ${(t=i.word)!==null&&t!==void 0?t:"(no prefix)"}
`,s+=`word: ${i.completion.filterText?i.completion.filterText+" (filterText)":i.textLabel}
`,s+=`distance: ${i.distance} (localityBonus-setting)
`,s+=`index: ${i.idx}, based on ${i.completion.sortText&&`sortText: "${i.completion.sortText}"`||"label"}
`,s+=`commit_chars: ${(n=i.completion.commitCharacters)===null||n===void 0?void 0:n.join("")}
`,r=new Zo().appendCodeblock("empty",s),o=`Provider: ${i.provider._debugDisplayName}`}if(!e&&!RJ(i)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),o){let s=o.length>1e5?`${o.substr(0,1e5)}\u2026`:o;this._type.textContent=s,this._type.title=s,_r(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(s))}else Sn(this._type),this._type.title="",Xo(this._type),this.domNode.classList.add("no-type");if(Sn(this._docs),typeof r=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),Sn(this._docs);let s=this._markdownRenderer.render(r);this._docs.appendChild(s.element),this._renderDisposeable.add(s),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=s=>{s.preventDefault(),s.stopPropagation()},this._close.onclick=s=>{s.preventDefault(),s.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(i,e){let t=new Si(i,e);Si.equals(t,this._size)||(this._size=t,Cue(this.domNode,i,e)),this._scrollbar.scanDomNode()}scrollDown(i=8){this._body.scrollTop+=i}scrollUp(i=8){this._body.scrollTop-=i}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(i){this._borderWidth=i}get borderWidth(){return this._borderWidth}};D7=pCe([mCe(1,tt)],D7);var x7=class{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new ne,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new iL,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,o,r=0,s=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,o=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&o){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(s=o.width-a.dimension.width,l=!0),a.north&&(r=o.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+r,left:n.left+s})}a.done&&(n=void 0,o=void 0,r=0,s=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;let o=e.getBoundingClientRect();this._anchorBox=o,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var o;let r=AM(document.body),s=this.widget.getLayoutInfo(),a=new Si(220,2*s.lineHeight),l=e.top,c=function(){let w=r.width-(e.left+e.width+s.borderWidth+s.horizontalPadding),C=-s.borderWidth+e.left+e.width,k=new Si(w,r.height-e.top-s.borderHeight-s.verticalPadding),L=k.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:l,left:C,fit:w-t.width,maxSizeTop:k,maxSizeBottom:L,minSize:a.with(Math.min(w,a.width))}}(),d=function(){let w=e.left-s.borderWidth-s.horizontalPadding,C=Math.max(s.horizontalPadding,e.left-t.width-s.borderWidth),k=new Si(w,r.height-e.top-s.borderHeight-s.verticalPadding),L=k.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:l,left:C,fit:w-t.width,maxSizeTop:k,maxSizeBottom:L,minSize:a.with(Math.min(w,a.width))}}(),h=function(){let w=e.left,C=-s.borderWidth+e.top+e.height,k=new Si(e.width-s.borderHeight,r.height-e.top-e.height-s.verticalPadding);return{top:C,left:w,fit:k.height-t.height,maxSizeBottom:k,maxSizeTop:k,minSize:a.with(k.width)}}(),u=[c,d,h],g=(o=u.find(w=>w.fit>=0))!==null&&o!==void 0?o:u.sort((w,C)=>C.fit-w.fit)[0],p=e.top+e.height-s.borderHeight,f,v=t.height,b=Math.max(g.maxSizeTop.height,g.maxSizeBottom.height);v>b&&(v=b);let A;n?v<=g.maxSizeTop.height?(f=!0,A=g.maxSizeTop):(f=!1,A=g.maxSizeBottom):v<=g.maxSizeBottom.height?(f=!1,A=g.maxSizeBottom):(f=!0,A=g.maxSizeTop),this._applyTopLeft({left:g.left,top:f?g.top:p-v}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!f,g===c,f,g!==c),this._resizable.minSize=g.minSize,this._resizable.maxSize=A,this._resizable.layout(v,Math.min(A.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}},ad;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(ad||(ad={}));var fCe=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function $y(i,e,t,n){let o=n===ad.ROOT_FOLDER?["rootfolder-icon"]:n===ad.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===Oe.data)r=Jh.parseMetaData(t).get(Jh.META_DATA_LABEL);else{let s=t.path.match(fCe);s?(r=Gy(s[2].toLowerCase()),s[1]&&o.push(`${Gy(s[1].toLowerCase())}-name-dir-icon`)):r=Gy(t.authority.toLowerCase())}if(n===ad.FOLDER)o.push(`${r}-name-folder-icon`);else{if(r){if(o.push(`${r}-name-file-icon`),o.push("name-file-icon"),r.length<=255){let a=r.split(".");for(let l=1;l<a.length;l++)o.push(`${a.slice(l).join(".")}-ext-file-icon`)}o.push("ext-file-icon")}let s=_Ce(i,e,t);s&&o.push(`${Gy(s)}-lang-file-icon`)}}return o}function _Ce(i,e,t){if(!t)return null;let n=null;if(t.scheme===Oe.data){let o=Jh.parseMetaData(t).get(Jh.META_DATA_MIME);o&&(n=e.getLanguageIdByMimeType(o))}else{let o=i.getModel(t);o&&(n=o.getLanguageId())}return n&&n!==Pr?n:e.guessLanguageIdByFilepathOrFirstLine(t)}function Gy(i){return i.replace(/[\11\12\14\15\40]/g,"/")}var vCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},FR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Lv;function Bae(i){return`suggest-aria-id:${i}`}var ACe=mn("suggest-more-info",_.chevronRight,m("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),bCe=new(Lv=class US{extract(e,t){if(e.textLabel.match(US._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(US._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){let n=US._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},Lv._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Lv._regexStrict=new RegExp(`^${Lv._regexRelaxed.source}$`,"i"),Lv),k7=class{constructor(i,e,t,n){this._editor=i,this._modelService=e,this._languageService=t,this._themeService=n,this._onDidToggleDetails=new Q,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(i){let e=Object.create(null);e.disposables=new ne,e.root=i,e.root.classList.add("show-file-icons"),e.icon=ae(i,ge(".icon")),e.colorspan=ae(e.icon,ge("span.colorspan"));let t=ae(i,ge(".contents")),n=ae(t,ge(".main"));e.iconContainer=ae(n,ge(".icon-label.codicon")),e.left=ae(n,ge("span.left")),e.right=ae(n,ge("span.right")),e.iconLabel=new a0(e.left,{supportHighlights:!0,supportIcons:!0}),e.disposables.add(e.iconLabel),e.parametersLabel=ae(e.left,ge("span.signature-label")),e.qualifierLabel=ae(e.left,ge("span.qualifier-label")),e.detailsLabel=ae(e.right,ge("span.details-label")),e.readMore=ae(e.right,ge("span.readMore"+zt.asCSSSelector(ACe))),e.readMore.title=m("readMore","Read More");let o=()=>{let r=this._editor.getOptions(),s=r.get(46),a=s.getMassagedFontFamily(),l=s.fontFeatureSettings,c=r.get(109)||s.fontSize,d=r.get(110)||s.lineHeight,h=s.fontWeight,u=s.letterSpacing,g=`${c}px`,p=`${d}px`,f=`${u}px`;e.root.style.fontSize=g,e.root.style.fontWeight=h,e.root.style.letterSpacing=f,n.style.fontFamily=a,n.style.fontFeatureSettings=l,n.style.lineHeight=p,e.icon.style.height=p,e.icon.style.width=p,e.readMore.style.height=p,e.readMore.style.width=p};return o(),e.disposables.add(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(46)||r.hasChanged(109)||r.hasChanged(110))&&o()})),e}renderElement(i,e,t){let{completion:n}=i;t.root.id=Bae(e),t.colorspan.style.backgroundColor="";let o={labelEscapeNewLines:!0,matches:$M(i.score)},r=[];if(n.kind===19&&bCe.extract(i,r))t.icon.className="icon customcolor",t.iconContainer.className="icon hide",t.colorspan.style.backgroundColor=r[0];else if(n.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){t.icon.className="icon hide",t.iconContainer.className="icon hide";let s=$y(this._modelService,this._languageService,$.from({scheme:"fake",path:i.textLabel}),ad.FILE),a=$y(this._modelService,this._languageService,$.from({scheme:"fake",path:n.detail}),ad.FILE);o.extraClasses=s.length>a.length?s:a}else n.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(t.icon.className="icon hide",t.iconContainer.className="icon hide",o.extraClasses=[$y(this._modelService,this._languageService,$.from({scheme:"fake",path:i.textLabel}),ad.FOLDER),$y(this._modelService,this._languageService,$.from({scheme:"fake",path:n.detail}),ad.FOLDER)].flat()):(t.icon.className="icon hide",t.iconContainer.className="",t.iconContainer.classList.add("suggest-icon",...ir.asClassNameArray(ib.toIcon(n.kind))));n.tags&&n.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),t.iconLabel.setLabel(i.textLabel,void 0,o),typeof n.label=="string"?(t.parametersLabel.textContent="",t.detailsLabel.textContent=BR(n.detail||""),t.root.classList.add("string-label")):(t.parametersLabel.textContent=BR(n.label.detail||""),t.detailsLabel.textContent=BR(n.label.description||""),t.root.classList.remove("string-label")),this._editor.getOption(108).showInlineDetails?_r(t.detailsLabel):Xo(t.detailsLabel),RJ(i)?(t.right.classList.add("can-expand-details"),_r(t.readMore),t.readMore.onmousedown=s=>{s.stopPropagation(),s.preventDefault()},t.readMore.onclick=s=>{s.stopPropagation(),s.preventDefault(),this._onDidToggleDetails.fire()}):(t.right.classList.remove("can-expand-details"),Xo(t.readMore),t.readMore.onmousedown=null,t.readMore.onclick=null)}disposeTemplate(i){i.disposables.dispose()}};k7=vCe([FR(1,li),FR(2,ki),FR(3,mi)],k7);function BR(i){return i.replace(/\r\n|\r|\n/g,"")}var wCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Yy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},CCe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};P("editorSuggestWidget.background",{dark:pn,light:pn,hcDark:pn,hcLight:pn},m("editorSuggestWidgetBackground","Background color of the suggest widget."));P("editorSuggestWidget.border",{dark:Jc,light:Jc,hcDark:Jc,hcLight:Jc},m("editorSuggestWidgetBorder","Border color of the suggest widget."));var Jy=P("editorSuggestWidget.foreground",{dark:os,light:os,hcDark:os,hcLight:os},m("editorSuggestWidgetForeground","Foreground color of the suggest widget."));P("editorSuggestWidget.selectedForeground",{dark:o1,light:o1,hcDark:o1,hcLight:o1},m("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));P("editorSuggestWidget.selectedIconForeground",{dark:r1,light:r1,hcDark:r1,hcLight:r1},m("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));var yCe=P("editorSuggestWidget.selectedBackground",{dark:s1,light:s1,hcDark:s1,hcLight:s1},m("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));P("editorSuggestWidget.highlightForeground",{dark:la,light:la,hcDark:la,hcLight:la},m("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));P("editorSuggestWidget.focusHighlightForeground",{dark:fy,light:fy,hcDark:fy,hcLight:fy},m("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));P("editorSuggestWidgetStatus.foreground",{dark:Fe(Jy,.5),light:Fe(Jy,.5),hcDark:Fe(Jy,.5),hcLight:Fe(Jy,.5)},m("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));var E7=class{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof _p}`}restore(){var e;let t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{let n=JSON.parse(t);if(Si.is(n))return Si.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}},uw=class L7{constructor(e,t,n,o,r){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Sr,this._disposables=new ne,this._onDidSelect=new Q,this._onDidFocus=new Q,this._onDidHide=new Q,this._onDidShow=new Q,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new Q,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new iL,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new I7(this,e),this._persistedSize=new E7(t,e);class s{constructor(g,p,f=!1,v=!1){this.persistedSize=g,this.currentSize=p,this.persistHeight=f,this.persistWidth=v}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new s(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(u=>{var g,p,f,v;if(this._resize(u.dimension.width,u.dimension.height),a&&(a.persistHeight=a.persistHeight||!!u.north||!!u.south,a.persistWidth=a.persistWidth||!!u.east||!!u.west),!!u.done){if(a){let{itemHeight:b,defaultSize:A}=this.getLayoutInfo(),w=Math.round(b/2),{width:C,height:k}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-k)<=w)&&(k=(p=(g=a.persistedSize)===null||g===void 0?void 0:g.height)!==null&&p!==void 0?p:A.height),(!a.persistWidth||Math.abs(a.currentSize.width-C)<=w)&&(C=(v=(f=a.persistedSize)===null||f===void 0?void 0:f.width)!==null&&v!==void 0?v:A.width),this._persistedSize.store(new Si(C,k))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=ae(this.element.domNode,ge(".message")),this._listElement=ae(this.element.domNode,ge(".tree"));let l=r.createInstance(D7,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new x7(l,this.editor);let c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(108).showIcons);c();let d=r.createInstance(k7,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new xa("SuggestWidget",this._listElement,{getHeight:u=>this.getLayoutInfo().itemHeight,getTemplateId:u=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>m("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:u=>{let g=u.textLabel;if(typeof u.completion.label!="string"){let{detail:b,description:A}=u.completion.label;b&&A?g=m("label.full","{0}{1}, {2}",g,b,A):b?g=m("label.detail","{0}{1}",g,b):A&&(g=m("label.desc","{0}, {1}",g,A))}if(!u.isResolved||!this._isDetailsVisible())return g;let{documentation:p,detail:f}=u.completion,v=ws("{0}{1}",f||"",p?typeof p=="string"?p:p.value:"");return m("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",g,v)}}}),this._status=r.createInstance(S7,this.element.domNode);let h=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(108).showStatusBar);h(),this._disposables.add(Ap(this._list,o,{listInactiveFocusBackground:yCe,listInactiveFocusOutline:Pi})),this._disposables.add(o.onDidColorThemeChange(u=>this._onThemeChange(u))),this._onThemeChange(o.getColorTheme()),this._disposables.add(this._list.onMouseDown(u=>this._onListMouseDownOrTap(u))),this._disposables.add(this._list.onTap(u=>this._onListMouseDownOrTap(u))),this._disposables.add(this._list.onDidChangeSelection(u=>this._onListSelection(u))),this._disposables.add(this._list.onDidChangeFocus(u=>this._onListFocus(u))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(u=>{u.hasChanged(108)&&(h(),c())})),this._ctxSuggestWidgetVisible=St.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=St.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=St.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=St.HasFocusedSuggestion.bindTo(n),this._disposables.add(Tn(this._details.widget.domNode,"keydown",u=>{this._onDetailsKeydown.fire(u)})),this._disposables.add(this.editor.onMouseDown(u=>this._onEditorMouseDown(u)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){let n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Io(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);let n=e.elements[0],o=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(o),this._currentSuggestionDetails=Gn(r=>CCe(this,void 0,void 0,function*(){let s=qh(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=r.onCancellationRequested(()=>s.dispose()),l=yield n.resolve(r);return s.dispose(),a.dispose(),l})),this._currentSuggestionDetails.then(()=>{o>=this._list.length||n!==this._list.element(o)||(this._ignoreFocusEvents=!0,this._list.splice(o,1,[n]),this._list.setFocus([o]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:Bae(o)}))}).catch(Ye)),this._onDidFocus.fire({item:n,index:o,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Xo(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=L7.LOADING_MESSAGE,Xo(this._listElement,this._status.element),_r(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=L7.NO_SUGGESTIONS_MESSAGE,Xo(this._listElement,this._status.element),_r(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Xo(this._messageElement),_r(this._listElement,this._status.element),this._show();break;case 4:Xo(this._messageElement),_r(this._listElement,this._status.element),this._show();break;case 5:Xo(this._messageElement),_r(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=qh(()=>this._setState(1),t)))}showSuggestions(e,t,n,o){var r,s;if(this._contentWidget.setPosition(this.editor.getPosition()),(r=this._loadingTimeout)===null||r===void 0||r.dispose(),(s=this._currentSuggestionDetails)===null||s===void 0||s.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}let a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(o?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),t>=0&&(this._list.reveal(t,0),this._list.setFocus([t])),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(RJ(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();let t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,o;if(!this.editor.hasModel()||!this.editor.getDomNode())return;let r=AM(document.body),s=this.getLayoutInfo();e||(e=s.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${s.itemHeight}px`,this._state===2||this._state===1)a=s.itemHeight+s.borderHeight,l=s.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Si(l,a),this._contentWidget.setPreference(2);else{let c=r.width-s.borderHeight-2*s.horizontalPadding;l>c&&(l=c);let d=this._completionModel?this._completionModel.stats.pLabelLen*s.typicalHalfwidthCharacterWidth:l,h=s.statusBarHeight+this._list.contentHeight+s.borderHeight,u=s.itemHeight+s.statusBarHeight,g=Eo(this.editor.getDomNode()),p=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),f=g.top+p.top+p.height,v=Math.min(r.height-f-s.verticalPadding,h),b=g.top+p.top-s.verticalPadding,A=Math.min(b,h),w=Math.min(Math.max(A,v)+s.borderHeight,h);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<u&&(a=u),a>w&&(a=w);let C=150;a>v||this._forceRenderingAbove&&b>C?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),w=A):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),w=v),this.element.preferredSize=new Si(d,s.defaultSize.height),this.element.maxSize=new Si(c,w),this.element.minSize=new Si(220,u),this._cappedHeight=a===h?{wanted:(o=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&o!==void 0?o:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){let{width:n,height:o}=this.element.maxSize;e=Math.min(n,e),t=Math.min(o,t);let{statusBarHeight:r}=this.getLayoutInfo();this._list.layout(t-r,e),this._listElement.style.height=`${t-r}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){let e=this.editor.getOption(46),t=pr(this.editor.getOption(110)||e.lineHeight,8,1e3),n=!this.editor.getOption(108).showStatusBar||this._state===2||this._state===1?0:t,o=this._details.widget.borderWidth,r=2*o;return{itemHeight:t,statusBarHeight:n,borderWidth:o,borderHeight:r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Si(430,n+12*t+r)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};uw.LOADING_MESSAGE=m("suggestWidget.loading","Loading...");uw.NO_SUGGESTIONS_MESSAGE=m("suggestWidget.noSuggestions","No suggestions.");uw=wCe([Yy(1,Ea),Yy(2,Ze),Yy(3,mi),Yy(4,tt)],uw);var I7=class{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){let{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:o}=this._widget.getLayoutInfo();return new Si(t+2*n+o,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}},SCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Lm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},T7=class{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){let n=e.getOffsetAt(t),o=e.getPositionAt(n+1);this._marker=e.deltaDecorations([],[{range:E.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){let t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}},ha=class Pae{constructor(e,t,n,o,r,s,a){this._memoryService=t,this._commandService=n,this._contextKeyService=o,this._instantiationService=r,this._logService=s,this._telemetryService=a,this._lineSuffix=new eo,this._toDispose=new ne,this._selectors=new M7(h=>h.priority),this._telemetryGate=0,this.editor=e,this.model=r.createInstance(C7,this.editor);let l=St.InsertMode.bindTo(o);l.set(e.getOption(108).insertMode),this.model.onDidTrigger(()=>l.set(e.getOption(108).insertMode)),this.widget=this._toDispose.add(new Hl(()=>{let h=this._instantiationService.createInstance(uw,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(v=>this._insertSuggestion(v,0),this));let u=new w7(this.editor,h,v=>this._insertSuggestion(v,2));this._toDispose.add(u),this._toDispose.add(this.model.onDidSuggest(v=>{v.completionModel.items.length===0&&u.reset()}));let g=St.MakesTextEdit.bindTo(this._contextKeyService),p=St.HasInsertAndReplaceRange.bindTo(this._contextKeyService),f=St.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(ct(()=>{g.reset(),p.reset(),f.reset()})),this._toDispose.add(h.onDidFocus(({item:v})=>{let b=this.editor.getPosition(),A=v.editStart.column,w=b.column,C=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!v.completion.additionalTextEdits&&!(v.completion.insertTextRules&4)&&w-A===v.completion.insertText.length&&(C=this.editor.getModel().getValueInRange({startLineNumber:b.lineNumber,startColumn:A,endLineNumber:b.lineNumber,endColumn:w})!==v.completion.insertText),g.set(C),p.set(!q.equals(v.editInsertEnd,v.editReplaceEnd)),f.set(!!v.provider.resolveCompletionItem||!!v.completion.documentation||v.completion.detail!==v.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(v=>{if(v.toKeybinding().equals(new ql(!0,!1,!1,!1,33))||gt&&v.toKeybinding().equals(new ql(!1,!1,!1,!0,33))){v.stopPropagation();return}v.toKeybinding().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new Hl(()=>this._toDispose.add(new tL(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Hl(()=>this._toDispose.add(new Mp(this.editor,this._contextKeyService)))),this._toDispose.add(r.createInstance(hw,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new T7(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(h.shy)return;let u=-1;if(!h.noSelect){for(let g of this._selectors.itemsOrderedByPriorityDesc)if(u=g.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),u!==-1)break;u===-1&&(u=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items))}this.widget.value.showSuggestions(h.completionModel,u,h.isFrozen,h.auto)})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let c=St.AcceptSuggestionsOnEnter.bindTo(o),d=()=>{let h=this.editor.getOption(1);c.set(h==="on"||h==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}static get(e){return e.getContribution(Pae.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;let n=Nn.get(this.editor);if(!n)return;let o=this.editor.getModel(),r=o.getAlternativeVersionId(),{item:s}=e,a=[],l=new po;t&1||this.editor.pushUndoStop();let c=this.getOverwriteInfo(s,!!(t&8));if(this._memoryService.memorize(o,this.editor.getPosition(),s),Array.isArray(s.completion.additionalTextEdits)){let h=Zh.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",s.completion.additionalTextEdits.map(u=>Di.replaceMove(E.lift(u.range),u.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!s.isResolved){let h=new sr(!0),u,g=o.onDidChangeContent(b=>{if(b.isFlush){l.cancel(),g.dispose();return}for(let A of b.changes){let w=E.getEndPosition(A.range);(!u||q.isBefore(w,u))&&(u=w)}}),p=t;t|=2;let f=!1,v=this.editor.onWillType(()=>{v.dispose(),f=!0,p&2||this.editor.pushUndoStop()});a.push(s.resolve(l.token).then(()=>{if(!s.completion.additionalTextEdits||l.token.isCancellationRequested||u&&s.completion.additionalTextEdits.some(A=>q.isBefore(u,E.getStartPosition(A.range))))return!1;f&&this.editor.pushUndoStop();let b=Zh.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",s.completion.additionalTextEdits.map(A=>Di.replaceMove(E.lift(A.range),A.text))),b.restoreRelativeVerticalPositionOfCursor(this.editor),(f||!(p&2))&&this.editor.pushUndoStop(),!0}).then(b=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),b),g.dispose(),v.dispose()}))}let{insertText:d}=s.completion;s.completion.insertTextRules&4||(d=Ps.escape(d)),n.insert(d,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(s.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),s.completion.command?s.completion.command.id===gw.id?this.model.trigger({auto:!0,shy:!1,noSelect:!1},!0):(a.push(this._commandService.executeCommand(s.completion.command.id,...s.completion.command.arguments?[...s.completion.command.arguments]:[]).catch(Ye)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,h=>{for(l.cancel();o.canUndo();){r!==o.getAlternativeVersionId()&&o.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(s),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(s,o,e),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n){var o;if(this._telemetryGate++%100!==0)return;let r=e.extensionId?e.extensionId.value:((o=n.item.provider._debugDisplayName)!==null&&o!==void 0?o:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:r,kind:e.completion.kind,basenameHash:$C(gs(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:m_e(t.uri)})}getOverwriteInfo(e,t){ai(this.editor.hasModel());let n=this.editor.getOption(108).insertMode==="replace";t&&(n=!n);let o=e.position.column-e.editStart.column,r=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,s=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:o+s,overwriteAfter:r+a}}_alertCompletionItem(e){if(Dn(e.completion.additionalTextEdits)){let t=m("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);co(t)}}triggerSuggest(e,t,n,o){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1,noSelect:o??!1},!1,e,void 0,n),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;let t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},o=r=>{if(r.completion.insertTextRules&4||r.completion.additionalTextEdits)return!0;let s=this.editor.getPosition(),a=r.editStart.column,l=s.column;return l-a!==r.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:s.lineNumber,startColumn:a,endLineNumber:s.lineNumber,endColumn:l})!==r.completion.insertText};Z.once(this.model.onDidTrigger)(r=>{let s=[];Z.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{st(s),n()},void 0,s),this.model.onDidSuggest(({completionModel:a})=>{if(st(s),a.items.length===0){n();return}let l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!o(c)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,s)}),this.model.trigger({auto:!1,shy:!0,noSelect:!1}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){let n=this.widget.value.getFocusedItem(),o=0;e&&(o|=4),t&&(o|=8),this._insertSuggestion(n,o)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};ha.ID="editor.contrib.suggestController";ha=SCe([Lm(1,mN),Lm(2,ji),Lm(3,Ze),Lm(4,tt),Lm(5,no),Lm(6,Vs)],ha);var M7=class{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{let t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}},gw=class i extends Ie{constructor(){super({id:i.id,label:m("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:we.and(B.writable,B.hasCompletionItemProvider),kbOpts:{kbExpr:B.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){let o=ha.get(t);if(!o)return;let r,s;n&&typeof n=="object"&&(n.auto===!0&&(r=!0),n.noSelection===!0&&(s=!0)),o.triggerSuggest(void 0,r,void 0,s)}};gw.id="editor.action.triggerSuggest";Wt(ha.ID,ha);fe(gw);var Os=100+90,Kr=$n.bindToContribution(ha.get);pe(new Kr({id:"acceptSelectedSuggestion",precondition:we.and(St.Visible,St.HasFocusedSuggestion),handler(i){i.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:we.and(St.Visible,B.textInputFocus),weight:Os},{primary:3,kbExpr:we.and(St.Visible,B.textInputFocus,St.AcceptSuggestionsOnEnter,St.MakesTextEdit),weight:Os}],menuOpts:[{menuId:Eh,title:m("accept.insert","Insert"),group:"left",order:1,when:St.HasInsertAndReplaceRange.toNegated()},{menuId:Eh,title:m("accept.insert","Insert"),group:"left",order:1,when:we.and(St.HasInsertAndReplaceRange,St.InsertMode.isEqualTo("insert"))},{menuId:Eh,title:m("accept.replace","Replace"),group:"left",order:1,when:we.and(St.HasInsertAndReplaceRange,St.InsertMode.isEqualTo("replace"))}]}));pe(new Kr({id:"acceptAlternativeSelectedSuggestion",precondition:we.and(St.Visible,B.textInputFocus,St.HasFocusedSuggestion),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Eh,group:"left",order:2,when:we.and(St.HasInsertAndReplaceRange,St.InsertMode.isEqualTo("insert")),title:m("accept.replace","Replace")},{menuId:Eh,group:"left",order:2,when:we.and(St.HasInsertAndReplaceRange,St.InsertMode.isEqualTo("replace")),title:m("accept.insert","Insert")}]}));ft.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");pe(new Kr({id:"hideSuggestWidget",precondition:St.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}}));pe(new Kr({id:"selectNextSuggestion",precondition:we.and(St.Visible,St.MultipleSuggestions),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));pe(new Kr({id:"selectNextPageSuggestion",precondition:we.and(St.Visible,St.MultipleSuggestions),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:12,secondary:[2060]}}));pe(new Kr({id:"selectLastSuggestion",precondition:we.and(St.Visible,St.MultipleSuggestions),handler:i=>i.selectLastSuggestion()}));pe(new Kr({id:"selectPrevSuggestion",precondition:we.and(St.Visible,St.MultipleSuggestions),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));pe(new Kr({id:"selectPrevPageSuggestion",precondition:we.and(St.Visible,St.MultipleSuggestions),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:11,secondary:[2059]}}));pe(new Kr({id:"selectFirstSuggestion",precondition:we.and(St.Visible,St.MultipleSuggestions),handler:i=>i.selectFirstSuggestion()}));pe(new Kr({id:"toggleSuggestionDetails",precondition:St.Visible,handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Eh,group:"right",order:1,when:we.and(St.DetailsVisible,St.CanResolve),title:m("detail.more","show less")},{menuId:Eh,group:"right",order:1,when:we.and(St.DetailsVisible.toNegated(),St.CanResolve),title:m("detail.less","show more")}]}));pe(new Kr({id:"toggleExplainMode",precondition:St.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));pe(new Kr({id:"toggleSuggestionFocus",precondition:St.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:2570,mac:{primary:778}}}));pe(new Kr({id:"insertBestCompletion",precondition:we.and(B.textInputFocus,we.equals("config.editor.tabCompletion","on"),hw.AtEnd,St.Visible.toNegated(),Mp.OtherSuggestions.toNegated(),Nn.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(jn(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Os,primary:2}}));pe(new Kr({id:"insertNextSuggestion",precondition:we.and(B.textInputFocus,we.equals("config.editor.tabCompletion","on"),Mp.OtherSuggestions,St.Visible.toNegated(),Nn.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:2}}));pe(new Kr({id:"insertPrevSuggestion",precondition:we.and(B.textInputFocus,we.equals("config.editor.tabCompletion","on"),Mp.OtherSuggestions,St.Visible.toNegated(),Nn.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:Os,kbExpr:B.textInputFocus,primary:1026}}));fe(class extends Ie{constructor(){super({id:"editor.action.resetSuggestSize",label:m("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){var t;(t=ha.get(e))===null||t===void 0||t.resetWidgetSize()}});var N7=class extends J{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new Q,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new jt(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(o=>{o.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(o=>{o.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));let n=ha.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(s,a,l)=>{let c=this.editor.getModel(),d=JE(c,this.suggestControllerPreselector());if(!d)return-1;let h=q.lift(a),u=l.map((p,f)=>{let v=hte(n,h,p,this.isShiftKeyPressed),b=JE(c,v?.normalizedInlineCompletion);if(!b)return;let A=DCe(d.range,b.range)&&d.insertText.startsWith(b.insertText);return{index:f,valid:A,prefixLength:b.insertText.length,suggestItem:p}}).filter(p=>p&&p.valid),g=Soe(u,y1(p=>p.prefixLength,vge));return g?g.index:-1}}));let o=!1,r=()=>{o||(o=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Z.once(n.model.onDidTrigger)(s=>{r()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){let t=this.getSuggestItemInfo(),n=!1;xCe(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){let e=ha.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;let t=e.widget.value.getFocusedItem();if(t)return hte(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){let e=ha.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){let e=ha.get(this.editor);e&&e.forceRenderingAbove()}};function DCe(i,e){return e.startLineNumber===i.startLineNumber&&e.startColumn===i.startColumn&&(e.endLineNumber<i.endLineNumber||e.endLineNumber===i.endLineNumber&&e.endColumn<=i.endColumn)}function xCe(i,e){return i===e?!0:!i||!e?!1:i.completionItemKind===e.completionItemKind&&i.isSnippetText===e.isSnippetText&&_we(i.normalizedInlineCompletion,e.normalizedInlineCompletion)}function hte(i,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:E.fromPositions(e,e),insertText:"",filterText:"",snippetInfo:void 0,additionalTextEdits:[]}};let{insertText:o}=t.completion,r=!1;if(t.completion.insertTextRules&4){let a=new Ps().parse(o),l=i.editor.getModel();if(a.children.length>100)return;HE.adjustWhitespace(l,e,a,!0,!0),o=a.toString(),r=!0}let s=i.getOverwriteInfo(t,n);return{isSnippetText:r,completionItemKind:t.completion.kind,normalizedInlineCompletion:{insertText:o,filterText:o,range:E.fromPositions(e.delta(0,-s.overwriteBefore),e.delta(0,Math.max(s.overwriteAfter,0))),snippetInfo:void 0,additionalTextEdits:[]}}}var kCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},ECe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ute=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},R7=class extends YE{constructor(i,e,t){super(i),this.cache=e,this.languageFeaturesService=t,this.suggestionInlineCompletionSource=this._register(new N7(this.editor,()=>{var n,o;return(o=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||o===void 0?void 0:o.toLiveInlineCompletion()})),this.updateOperation=this._register(new eo),this.updateCacheSoon=this._register(new jt(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{if(!this.editor.hasModel())return;this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);let n=this.ghostText;n&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,LCe(n.parts.map(o=>o.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(ct(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(108).preview}updateCache(){return ute(this,void 0,void 0,function*(){let i=this.suggestionInlineCompletionSource.state;if(!i||!i.selectedItem)return;let e={text:i.selectedItem.normalizedInlineCompletion.insertText,range:i.selectedItem.normalizedInlineCompletion.range,isSnippetText:i.selectedItem.isSnippetText,completionKind:i.selectedItem.completionItemKind},t=this.editor.getPosition();if(i.selectedItem.isSnippetText||i.selectedItem.completionItemKind===27||i.selectedItem.completionItemKind===20||i.selectedItem.completionItemKind===23){this.cache.clear();return}let n=Gn(r=>ute(this,void 0,void 0,function*(){let s;try{s=yield Nae(this.languageFeaturesService.inlineCompletionsProvider,t,this.editor.getModel(),{triggerKind:or.Automatic,selectedSuggestionInfo:e},r)}catch(a){Ye(a);return}if(r.isCancellationRequested){s.dispose();return}this.cache.setValue(this.editor,s,or.Automatic),this.onDidChangeEmitter.fire()})),o=new XE(n,or.Automatic);this.updateOperation.value=o,yield n,this.updateOperation.value===o&&this.updateOperation.clear()})}get ghostText(){var i,e,t;let n=this.isSuggestionPreviewEnabled(),o=this.editor.getModel(),r=JE(o,(e=(i=this.cache.value)===null||i===void 0?void 0:i.completions[0])===null||e===void 0?void 0:e.toLiveInlineCompletion()),s=this.suggestionInlineCompletionSource.state,a=JE(o,(t=s?.selectedItem)===null||t===void 0?void 0:t.normalizedInlineCompletion),l=r&&a&&r.insertText.startsWith(a.insertText)&&r.range.equalsRange(a.range);if(!n&&!l)return;let c=l?r:a||r,d=l?c.insertText.length-a.insertText.length:0;return this.toGhostText(c,d)}toGhostText(i,e){let t=this.editor.getOptions().get(108).previewMode;return i?Mae(i,this.editor.getModel(),t,this.editor.getPosition(),e)||new $E(i.range.endLineNumber,[],this.minReservedLineCount):void 0}};R7=kCe([ECe(2,Te)],R7);function LCe(i){return i.reduce((e,t)=>e+t,0)}var ICe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},TCe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},MCe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},F7=class extends J{constructor(){super(...arguments),this.onDidChangeEmitter=new Q,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new eo)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?gwe(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}},B7=class extends F7{constructor(i,e){super(),this.editor=i,this.instantiationService=e,this.sharedCache=this._register(new P7),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(R7,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance(m7,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(i){var e;let t=(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText;return t?t.parts.some(n=>i.containsPosition(new q(t.lineNumber,n.column))):!1}triggerInlineCompletion(){var i;(i=this.activeInlineCompletionsModel)===null||i===void 0||i.trigger(or.Explicit)}commitInlineCompletion(){var i;(i=this.activeInlineCompletionsModel)===null||i===void 0||i.commitCurrentSuggestion()}hideInlineCompletion(){var i;(i=this.activeInlineCompletionsModel)===null||i===void 0||i.hide()}showNextInlineCompletion(){var i;(i=this.activeInlineCompletionsModel)===null||i===void 0||i.showNext()}showPreviousInlineCompletion(){var i;(i=this.activeInlineCompletionsModel)===null||i===void 0||i.showPrevious()}hasMultipleInlineCompletions(){var i;return MCe(this,void 0,void 0,function*(){let e=yield(i=this.activeInlineCompletionsModel)===null||i===void 0?void 0:i.hasMultipleInlineCompletions();return e!==void 0?e:!1})}};B7=ICe([TCe(1,tt)],B7);var P7=class extends J{constructor(){super(...arguments),this.onDidChangeEmitter=new Q,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new eo)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new _7(t,e,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}},NCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},gte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},PR,pte=(PR=window.trustedTypes)===null||PR===void 0?void 0:PR.createPolicy("editorGhostText",{createHTML:i=>i}),O7=class extends J{constructor(i,e,t,n){super(),this.editor=i,this.model=e,this.instantiationService=t,this.languageService=n,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(W7,this.editor)),this.additionalLinesWidget=this._register(new z7(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this.replacementDecoration=this._register(new H7(this.editor)),this._register(this.editor.onDidChangeConfiguration(o=>{(o.hasChanged(29)||o.hasChanged(107)||o.hasChanged(90)||o.hasChanged(85)||o.hasChanged(47)||o.hasChanged(46)||o.hasChanged(61))&&this.update()})),this._register(ct(()=>{var o;this.disposed=!0,this.update(),(o=this.viewMoreContentWidget)===null||o===void 0||o.dispose(),this.viewMoreContentWidget=void 0})),this._register(e.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(i){return this.additionalLinesWidget.viewZoneId===i}update(){var i;let e=this.model.ghostText;if(!this.editor.hasModel()||!e||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear(),this.replacementDecoration.clear();return}let t=new Array,n=new Array;function o(l,c){if(n.length>0){let d=n[n.length-1];c&&d.decorations.push(new Aa(d.content.length+1,d.content.length+1+l[0].length,c,0)),d.content+=l[0],l=l.slice(1)}for(let d of l)n.push({content:d,decorations:c?[new Aa(1,d.length+1,c,0)]:[]})}e instanceof GE?this.replacementDecoration.setDecorations([{range:new E(e.lineNumber,e.columnStart,e.lineNumber,e.columnStart+e.length),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}]):this.replacementDecoration.setDecorations([]);let r=this.editor.getModel().getLineContent(e.lineNumber),s,a=0;for(let l of e.parts){let c=l.lines;s===void 0?(t.push({column:l.column,text:c[0],preview:l.preview}),c=c.slice(1)):o([r.substring(a,l.column-1)],void 0),c.length>0&&(o(c,"ghost-text"),s===void 0&&l.column<=r.length&&(s=l.column)),a=l.column-1}s!==void 0&&o([r.substring(a)],void 0),this.partsWidget.setParts(e.lineNumber,t,s!==void 0?{column:s,length:r.length+1-s}:void 0),this.additionalLinesWidget.updateLines(e.lineNumber,n,e.additionalReservedLineCount),(i=this.viewMoreContentWidget)===null||i===void 0||i.dispose(),this.viewMoreContentWidget=void 0}renderViewMoreLines(i,e,t){let n=this.editor.getOption(46),o=document.createElement("div");o.className="suggest-preview-additional-widget",To(o,n);let r=document.createElement("span");r.className="content-spacer",r.append(e),o.append(r);let s=document.createElement("span");s.className="content-newline suggest-preview-text",s.append("\u23CE  "),o.append(s);let a=new ne,l=document.createElement("div");return l.className="button suggest-preview-text",l.append(`+${t} lines\u2026`),a.add(Tn(l,"mousedown",c=>{var d;(d=this.model)===null||d===void 0||d.setExpanded(!0),c.preventDefault(),this.editor.focus()})),o.append(l),new V7(this.editor,i,o,a)}};O7=NCe([gte(2,tt),gte(3,ki)],O7);var H7=class{constructor(e){this.editor=e,this.decorationIds=[]}setDecorations(e){this.editor.changeDecorations(t=>{this.decorationIds=t.deltaDecorations(this.decorationIds,e)})}clear(){this.setDecorations([])}dispose(){this.clear()}},W7=class{constructor(e){this.editor=e,this.decorationIds=[]}dispose(){this.clear()}clear(){this.editor.changeDecorations(e=>{this.decorationIds=e.deltaDecorations(this.decorationIds,[])})}setParts(e,t,n){if(!this.editor.getModel())return;let o=new Array;n&&o.push({range:E.fromPositions(new q(e,n.column),new q(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.editor.changeDecorations(r=>{this.decorationIds=r.deltaDecorations(this.decorationIds,t.map(s=>({range:E.fromPositions(new q(e,s.column)),options:{description:"ghost-text",after:{content:s.text,inlineClassName:s.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:ja.Left},showIfCollapsed:!0}})).concat(o))})}},z7=class{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){let o=this.editor.getModel();if(!o)return;let{tabSize:r}=o.getOptions();this.editor.changeViewZones(s=>{this._viewZoneId&&(s.removeZone(this._viewZoneId),this._viewZoneId=void 0);let a=Math.max(t.length,n);if(a>0){let l=document.createElement("div");RCe(l,r,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=s.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}};function RCe(i,e,t,n,o){let r=n.get(29),s=n.get(107),a="none",l=n.get(85),c=n.get(47),d=n.get(46),h=n.get(61),u=jh(1e4);u.appendASCIIString('<div class="suggest-preview-text">');for(let f=0,v=t.length;f<v;f++){let b=t[f],A=b.content;u.appendASCIIString('<div class="view-line'),u.appendASCIIString('" style="top:'),u.appendASCIIString(String(f*h)),u.appendASCIIString('px;width:1000000px;">');let w=CM(A),C=y_(A),k=No.createEmpty(A,o);OC(new Xl(d.isMonospace&&!r,d.canUseHalfwidthRightwardsArrow,A,!1,w,C,0,k,b.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,s,a,l,c!==$l.OFF,null),u),u.appendASCIIString("</div>")}u.appendASCIIString("</div>"),To(i,d);let g=u.build(),p=pte?pte.createHTML(g):g;i.innerHTML=p}var V7=class extends J{constructor(e,t,n,o){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(o),this._register(ct(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}};xi((i,e)=>{let t=i.getColor(ffe);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));let n=i.getColor(_fe);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));let o=i.getColor(mfe);o&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${o}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${o}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${o}; }`))});var Oae=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},U7=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},fN=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Kn=class Hae extends J{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new eo),this.activeModelDidChangeEmitter=this._register(new Q),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(108)&&this.updateModelController(),n.hasChanged(57)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(Hae.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){let e=this.editor.getOption(108),t=this.editor.getOption(57);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(j7,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return fN(this,void 0,void 0,function*(){let t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};Kn.inlineSuggestionVisible=new Le("inlineSuggestionVisible",!1,m("inlineSuggestionVisible","Whether an inline suggestion is visible"));Kn.inlineSuggestionHasIndentation=new Le("inlineSuggestionHasIndentation",!1,m("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));Kn.inlineSuggestionHasIndentationLessThanTabSize=new Le("inlineSuggestionHasIndentationLessThanTabSize",!0,m("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));Kn.ID="editor.contrib.ghostTextController";Kn=Oae([U7(1,tt)],Kn);var Q7=class{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=Kn.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Kn.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Kn.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}},j7=class extends J{constructor(i,e,t){super(),this.editor=i,this.instantiationService=e,this.contextKeyService=t,this.contextKeys=new Q7(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(B7,this.editor)),this.widget=this._register(this.instantiationService.createInstance(O7,this.editor,this.model)),this._register(ct(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var i;this.contextKeys.inlineCompletionVisible.set(((i=this.model.activeInlineCompletionsModel)===null||i===void 0?void 0:i.ghostText)!==void 0);let e=!1,t=!0,n=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&n&&n.parts.length>0){let{column:o,lines:r}=n.parts[0],s=r[0],a=this.editor.getModel().getLineIndentColumn(n.lineNumber);if(o<=a){let l=rr(s);l===-1&&(l=s.length-1),e=l>0;let c=this.editor.getModel().getOptions().tabSize;t=bn.visibleColumnFromColumn(s,l+1,c)<c}}this.contextKeys.inlineCompletionSuggestsIndentation.set(e),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(t)}};j7=Oae([U7(1,tt),U7(2,Ze)],j7);var v0=class i extends Ie{constructor(){super({id:i.ID,label:m("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:we.and(B.writable,Kn.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return fN(this,void 0,void 0,function*(){let n=Kn.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}};v0.ID="editor.action.inlineSuggest.showNext";var A0=class i extends Ie{constructor(){super({id:i.ID,label:m("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:we.and(B.writable,Kn.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return fN(this,void 0,void 0,function*(){let n=Kn.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}};A0.ID="editor.action.inlineSuggest.showPrevious";var K7=class extends Ie{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:m("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:B.writable})}run(e,t){return fN(this,void 0,void 0,function*(){let n=Kn.get(t);n&&n.trigger()})}},FCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Im=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},q7=class{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}get commands(){var e,t,n;return((n=(t=(e=this.controller.activeModel)===null||e===void 0?void 0:e.activeInlineCompletionsModel)===null||t===void 0?void 0:t.completionSession.value)===null||n===void 0?void 0:n.commands)||[]}},$7=class{constructor(i,e,t,n,o,r,s){this._editor=i,this._commandService=e,this._menuService=t,this._contextKeyService=n,this._languageService=o,this._openerService=r,this.accessibilityService=s,this.hoverOrdinal=3}suggestHoverAnchor(i){let e=Kn.get(this._editor);if(!e)return null;let t=i.target;if(t.type===8){let n=t.detail;if(e.shouldShowHoverAtViewZone(n.viewZoneId))return new Zf(1e3,this,E.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return t.type===7&&e.shouldShowHoverAt(t.range)?new Zf(1e3,this,t.range):t.type===6&&t.detail.mightBeForeignElement&&e.shouldShowHoverAt(t.range)?new Zf(1e3,this,t.range):null}computeSync(i,e){let t=Kn.get(this._editor);return t&&t.shouldShowHoverAt(i.range)?[new q7(this,i.range,t)]:[]}renderHoverParts(i,e){let t=new ne,n=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(i,n,t);let o=t.add(this._menuService.createMenu(z.InlineCompletionsActions,this._contextKeyService)),r=i.statusBar.addAction({label:m("showNextInlineSuggestion","Next"),commandId:v0.ID,run:()=>this._commandService.executeCommand(v0.ID)}),s=i.statusBar.addAction({label:m("showPreviousInlineSuggestion","Previous"),commandId:A0.ID,run:()=>this._commandService.executeCommand(A0.ID)});i.statusBar.addAction({label:m("acceptInlineSuggestion","Accept"),commandId:qE,run:()=>this._commandService.executeCommand(qE)});let a=[r,s];for(let l of a)l.setEnabled(!1);n.hasMultipleSuggestions().then(l=>{for(let c of a)c.setEnabled(l)});for(let l of n.commands)i.statusBar.addAction({label:l.title,commandId:l.id,run:()=>this._commandService.executeCommand(l.id,...l.arguments||[])});for(let[l,c]of o.getActions())for(let d of c)d instanceof Uh&&i.statusBar.addAction({label:d.label,commandId:d.item.id,run:()=>this._commandService.executeCommand(d.item.id)});return t}renderScreenReaderText(i,e,t){var n,o;let r=ge,s=r("div.hover-row.markdown-hover"),a=ae(s,r("div.hover-contents")),l=t.add(new Ld({editor:this._editor},this._languageService,this._openerService)),c=h=>{t.add(l.onDidRenderAsync(()=>{a.className="hover-contents code-hover-contents",i.onContentsChanged()}));let u=m("inlineSuggestionFollows","Suggestion:"),g=t.add(l.render(new Zo().appendText(u).appendCodeblock("text",h)));a.replaceChildren(g.element)},d=(o=(n=e.controller.activeModel)===null||n===void 0?void 0:n.inlineCompletionsModel)===null||o===void 0?void 0:o.ghostText;if(d){let h=this._editor.getModel().getLineContent(d.lineNumber);c(d.renderForScreenReader(h))}i.fragment.appendChild(s)}};$7=FCe([Im(1,ji),Im(2,em),Im(3,Ze),Im(4,ki),Im(5,jr),Im(6,Rd)],$7);Wt(Kn.ID,Kn);fe(K7);fe(v0);fe(A0);hm.register($7);var Wae=$n.bindToContribution(Kn.get),G7=new Wae({id:qE,precondition:Kn.inlineSuggestionVisible,handler(i){i.commit(),i.editor.focus()}});pe(G7);Vr.registerKeybindingRule({primary:2,weight:200,id:G7.id,when:we.and(G7.precondition,B.tabMovesFocus.toNegated(),Kn.inlineSuggestionHasIndentationLessThanTabSize)});pe(new Wae({id:"editor.action.inlineSuggest.hide",precondition:Kn.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(i){i.hide()}}));function Ir(i,e){let t=0;for(let n=0;n<i.length;n++)i.charAt(n)==="	"?t+=e:t++;return t}function J1(i,e,t){i=i<0?0:i;let n="";if(!t){let o=Math.floor(i/e);i=i%e;for(let r=0;r<o;r++)n+="	"}for(let o=0;o<i;o++)n+=" ";return n}var BCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},PCe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function zae(i,e,t,n,o){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return[];let r=e.getLanguageConfiguration(i.getLanguageId()).indentationRules;if(!r)return[];for(n=Math.min(n,i.getLineCount());t<=n&&r.unIndentedLinePattern;){let v=i.getLineContent(t);if(!r.unIndentedLinePattern.test(v))break;t++}if(t>n-1)return[];let{tabSize:s,indentSize:a,insertSpaces:l}=i.getOptions(),c=(v,b)=>(b=b||1,As.shiftIndent(v,v.length+b,s,a,l)),d=(v,b)=>(b=b||1,As.unshiftIndent(v,v.length+b,s,a,l)),h=[],u,g=i.getLineContent(t),p=g;if(o!=null){u=o;let v=hi(g);p=u+g.substring(v.length),r.decreaseIndentPattern&&r.decreaseIndentPattern.test(p)&&(u=d(u),p=u+g.substring(v.length)),g!==p&&h.push(Di.replaceMove(new Se(t,1,t,v.length+1),PD(u,a,l)))}else u=hi(g);let f=u;r.increaseIndentPattern&&r.increaseIndentPattern.test(p)?(f=c(f),u=c(u)):r.indentNextLinePattern&&r.indentNextLinePattern.test(p)&&(f=c(f)),t++;for(let v=t;v<=n;v++){let b=i.getLineContent(v),A=hi(b),w=f+b.substring(A.length);r.decreaseIndentPattern&&r.decreaseIndentPattern.test(w)&&(f=d(f),u=d(u)),A!==f&&h.push(Di.replaceMove(new Se(v,1,v,A.length+1),PD(f,a,l))),!(r.unIndentedLinePattern&&r.unIndentedLinePattern.test(b))&&(r.increaseIndentPattern&&r.increaseIndentPattern.test(w)?(u=c(u),f=u):r.indentNextLinePattern&&r.indentNextLinePattern.test(w)?f=c(f):f=u)}return h}var nL=class i extends Ie{constructor(){super({id:i.ID,label:m("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:B.writable})}run(e,t){let n=t.getModel();if(!n)return;let o=n.getOptions(),r=t.getSelection();if(!r)return;let s=new Z7(r,o.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}};nL.ID="editor.action.indentationToSpaces";var oL=class i extends Ie{constructor(){super({id:i.ID,label:m("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:B.writable})}run(e,t){let n=t.getModel();if(!n)return;let o=n.getOptions(),r=t.getSelection();if(!r)return;let s=new eH(r,o.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}};oL.ID="editor.action.indentationToTabs";var rL=class extends Ie{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){let n=e.get(dl),o=e.get(li),r=t.getModel();if(!r)return;let s=o.getCreationOptions(r.getLanguageId(),r.uri,r.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(c=>({id:c.toString(),label:c.toString(),description:c===s.tabSize?m("configuredTabSize","Configured Tab Size"):void 0})),l=Math.min(r.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:m({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then(c=>{c&&r&&!r.isDisposed()&&r.updateOptions({tabSize:parseInt(c.label,10),insertSpaces:this.insertSpaces})})},50)}},sL=class i extends rL{constructor(){super(!1,{id:i.ID,label:m("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}};sL.ID="editor.action.indentUsingTabs";var aL=class i extends rL{constructor(){super(!0,{id:i.ID,label:m("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}};aL.ID="editor.action.indentUsingSpaces";var lL=class i extends Ie{constructor(){super({id:i.ID,label:m("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){let n=e.get(li),o=t.getModel();if(!o)return;let r=n.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget);o.detectIndentation(r.insertSpaces,r.tabSize)}};lL.ID="editor.action.detectIndentation";var Y7=class extends Ie{constructor(){super({id:"editor.action.reindentlines",label:m("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:B.writable})}run(e,t){let n=e.get(Yi),o=t.getModel();if(!o)return;let r=zae(o,n,1,o.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}},J7=class extends Ie{constructor(){super({id:"editor.action.reindentselectedlines",label:m("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:B.writable})}run(e,t){let n=e.get(Yi),o=t.getModel();if(!o)return;let r=t.getSelections();if(r===null)return;let s=[];for(let a of r){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;let d=zae(o,n,l,c);s.push(...d)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}},X7=class{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(let o of this._edits)t.addEditOperation(E.lift(o.range),o.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}},pw=class{constructor(i,e){this.editor=i,this._languageConfigurationService=e,this.callOnDispose=new ne,this.callOnModel=new ne,this.callOnDispose.add(i.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(i.onDidChangeModel(()=>this.update())),this.callOnDispose.add(i.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(50))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:i})=>{this.trigger(i)}))}trigger(i){let e=this.editor.getSelections();if(e===null||e.length>1)return;let t=this.editor.getModel();if(!t||!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber))return;let n=this.editor.getOption(9),{tabSize:o,indentSize:r,insertSpaces:s}=t.getOptions(),a=[],l={shiftIndent:u=>As.shiftIndent(u,u.length+1,o,r,s),unshiftIndent:u=>As.unshiftIndent(u,u.length+1,o,r,s)},c=i.startLineNumber;for(;c<=i.endLineNumber;){if(this.shouldIgnoreLine(t,c)){c++;continue}break}if(c>i.endLineNumber)return;let d=t.getLineContent(c);if(!/\S/.test(d.substring(0,i.startColumn-1))){let u=D1(n,t,t.getLanguageId(),c,l,this._languageConfigurationService);if(u!==null){let g=hi(d),p=Ir(u,o),f=Ir(g,o);if(p!==f){let v=J1(p,o,s);a.push({range:new E(c,1,c,g.length+1),text:v}),d=v+d.substr(g.length)}else{let v=Woe(t,c,this._languageConfigurationService);if(v===0||v===8)return}}}let h=c;for(;c<i.endLineNumber;){if(!/\S/.test(t.getLineContent(c+1))){c++;continue}break}if(c!==i.endLineNumber){let u=D1(n,{tokenization:{getLineTokens:g=>t.tokenization.getLineTokens(g),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(g,p)=>t.getLanguageIdAtPosition(g,p)},getLineContent:g=>g===h?d:t.getLineContent(g)},t.getLanguageId(),c+1,l,this._languageConfigurationService);if(u!==null){let g=Ir(u,o),p=Ir(hi(t.getLineContent(c+1)),o);if(g!==p){let f=g-p;for(let v=c+1;v<=i.endLineNumber;v++){let b=t.getLineContent(v),A=hi(b),w=Ir(A,o)+f,C=J1(w,o,s);C!==A&&a.push({range:new E(v,1,v,A.length+1),text:C})}}}}if(a.length>0){this.editor.pushUndoStop();let u=new X7(a,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",u),this.editor.pushUndoStop()}}shouldIgnoreLine(i,e){i.tokenization.forceTokenization(e);let t=i.getLineFirstNonWhitespaceColumn(e);if(t===0)return!0;let n=i.tokenization.getLineTokens(e);if(n.getCount()>0){let o=n.findTokenIndexAtOffset(t);if(o>=0&&n.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};pw.ID="editor.contrib.autoIndentOnPaste";pw=BCe([PCe(1,Yi)],pw);function Vae(i,e,t,n){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let o="";for(let s=0;s<t;s++)o+=" ";let r=new RegExp(o,"gi");for(let s=1,a=i.getLineCount();s<=a;s++){let l=i.getLineFirstNonWhitespaceColumn(s);if(l===0&&(l=i.getLineMaxColumn(s)),l===1)continue;let c=new E(s,1,s,l),d=i.getValueInRange(c),h=n?d.replace(/\t/ig,o):d.replace(r,"	");e.addEditOperation(c,h)}}var Z7=class{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Vae(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}},eH=class{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Vae(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}};Wt(pw.ID,pw);fe(nL);fe(oL);fe(sL);fe(aL);fe(lL);fe(Y7);fe(J7);var cL=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},dL=class{constructor(e,t){this.range=e,this.direction=t}},tH=class i{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(e){let t=new i(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return cL(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(e){var t,n;return cL(this,void 0,void 0,function*(){try{let o=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=o?.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(n=o?.label)!==null&&n!==void 0?n:this.hint.label,this._isResolved=!0}catch(o){Fn(o),this._isResolved=!1}})}},hL=class i{constructor(e,t,n){this._disposables=new ne,this.ranges=e,this.provider=new Set;let o=[];for(let[r,s]of t){this._disposables.add(r),this.provider.add(s);for(let a of r.hints){let l=n.validatePosition(a.position),c="before",d=i._getRangeAtPosition(n,l),h;d.getStartPosition().isBefore(l)?(h=E.fromPositions(d.getStartPosition(),l),c="after"):(h=E.fromPositions(l,d.getEndPosition()),c="before"),o.push(new tH(a,new dL(h,c),s))}}this.items=o.sort((r,s)=>q.compare(r.hint.position,s.hint.position))}static create(e,t,n,o){return cL(this,void 0,void 0,function*(){let r=[],s=e.ordered(t).reverse().map(a=>n.map(l=>cL(this,void 0,void 0,function*(){try{let c=yield a.provideInlayHints(t,l,o);c!=null&&c.hints.length&&r.push([c,a])}catch(c){Fn(c)}})));if(yield Promise.all(s.flat()),o.isCancellationRequested||t.isDisposed())throw new ya;return new i(n,r,t)})}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){let n=t.lineNumber,o=e.getWordAtPosition(t);if(o)return new E(n,o.startColumn,n,o.endColumn);e.tokenization.tokenizeIfCheap(n);let r=e.tokenization.getLineTokens(n),s=t.column-1,a=r.findTokenIndexAtOffset(s),l=r.getStartOffset(a),c=r.getEndOffset(a);return c-l===1&&(l===s&&a>1?(l=r.getStartOffset(a-1),c=r.getEndOffset(a-1)):c===s&&a<r.getCount()-1&&(l=r.getStartOffset(a+1),c=r.getEndOffset(a+1))),new E(n,l+1,n,c+1)}};function OCe(i){return $.from({scheme:Oe.command,path:i.id,query:i.arguments&&encodeURIComponent(JSON.stringify(i.arguments))}).toString()}var X1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function HCe(i,e,t,n){var o;return X1(this,void 0,void 0,function*(){let r=i.get(io),s=i.get(Fd),a=i.get(ji),l=i.get(tt),c=i.get(nn);if(yield n.item.resolve(et.None),!n.part.location)return;let d=n.part.location,h=[],u=new Set(Ds.getMenuItems(z.EditorContext).map(p=>Jm(p)?p.command.id:""));for(let p of xg.getEditorActions())p instanceof lc&&u.has(p.id)&&h.push(new ho(p.id,p.label,void 0,!0,()=>X1(this,void 0,void 0,function*(){let f=yield r.createModelReference(d.uri);try{yield l.invokeFunction(p.run.bind(p),e,new qb(f.object.textEditorModel,E.getStartPosition(d.range)))}finally{f.dispose()}})));if(n.part.command){let{command:p}=n.part;h.push(new Lo),h.push(new ho(p.id,p.title,void 0,!0,()=>X1(this,void 0,void 0,function*(){var f;try{yield a.executeCommand(p.id,...(f=p.arguments)!==null&&f!==void 0?f:[])}catch(v){c.notify({severity:zY.Error,source:n.item.provider.displayName,message:v})}})))}let g=e.getOption(117);s.showContextMenu({domForShadowRoot:g&&(o=e.getDomNode())!==null&&o!==void 0?o:void 0,getAnchor:()=>{let p=Eo(t);return{x:p.left,y:p.top+p.height+8}},getActions:()=>h,onHide:()=>{e.focus()},autoSelectFirstItem:!0})})}function WCe(i,e,t,n){return X1(this,void 0,void 0,function*(){let o=yield i.get(io).createModelReference(n.uri);yield t.invokeWithinContext(r=>X1(this,void 0,void 0,function*(){let s=e.hasSideBySideModifier,a=r.get(Ze),l=xr.inPeekEditor.getValue(a),c=!s&&t.getOption(80)&&!l;return new Sp({openToSide:s,openInPeek:c,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(r,t,{model:o.object.textEditorModel,position:E.getStartPosition(n.range)})})),o.dispose()})}var zCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Tm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Um=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},iH=class i{constructor(){this._entries=new tc(50)}get(e){let t=i._key(e);return this._entries.get(t)}set(e,t){let n=i._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}},Uae=ze("IInlayHintsCache");Ke(Uae,iH,!0);var mw=class{constructor(e,t){this.item=e,this.index=t}get part(){let e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}},nH=class{constructor(e,t){this.part=e,this.hasTriggerModifier=t}},Np=class oH{constructor(e,t,n,o,r,s,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=o,this._commandService=r,this._notificationService=s,this._instaService=a,this._disposables=new ne,this._sessionDisposables=new ne,this._decorationsMetadata=new Map,this._ruleFactory=new KA(this._editor),this._activeRenderMode=0,this._debounceInfo=n.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(129)&&this._update()})),this._update()}static get(e){var t;return(t=e.getContribution(oH.ID))!==null&&t!==void 0?t:void 0}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();let e=this._editor.getOption(129);if(e.enabled==="off")return;let t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;let n=this._inlayHintsCache.get(t);n&&this._updateHintsDecorators([t.getFullModelRange()],n),this._sessionDisposables.add(ct(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let o,r=new Set,s=new jt(()=>Um(this,void 0,void 0,function*(){let a=Date.now();o?.dispose(!0),o=new po;let l=t.onWillDispose(()=>o?.cancel());try{let c=o.token,d=yield hL.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(s.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(let h of d.provider)typeof h.onDidChangeInlayHints=="function"&&!r.has(h)&&(r.add(h),this._sessionDisposables.add(h.onDidChangeInlayHints(()=>{s.isScheduled()||s.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){Ye(c)}finally{o.dispose(),l.dispose()}}),this._debounceInfo.get(t));if(this._sessionDisposables.add(s),this._sessionDisposables.add(ct(()=>o?.dispose(!0))),s.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!s.isScheduled())&&s.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{let l=Math.max(s.delay,1250);s.schedule(l)})),e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(DA.getInstance().event(c=>{if(!this._editor.hasModel())return;let d=c.altKey&&c.ctrlKey?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;let h=this._editor.getModel(),u=this._copyInlayHintsWithCurrentAnchor(h);this._updateHintsDecorators([h.getFullModelRange()],u),s.schedule(0)}}))}this._sessionDisposables.add(this._installDblClickGesture(()=>s.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){let e=new ne,t=e.add(new Mb(this._editor)),n=new ne;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(o=>{let[r]=o,s=this._getInlayHintLabelPart(r),a=this._editor.getModel();if(!s||!a){n.clear();return}let l=new po;n.add(ct(()=>l.dispose(!0))),s.item.resolve(l.token),this._activeInlayHintPart=s.part.command||s.part.location?new nH(s,r.hasTriggerModifier):void 0;let c=s.item.hint.position.lineNumber,d=new E(c,1,c,a.getLineMaxColumn(c)),h=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],h),n.add(ct(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],h)}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(o=>Um(this,void 0,void 0,function*(){let r=this._getInlayHintLabelPart(o);if(r){let s=r.part;s.location?this._instaService.invokeFunction(WCe,o,this._editor,s.location):k4.is(s.command)&&(yield this._invokeCommand(s.command,r.item))}}))),e}_getInlineHintsForRange(e){let t=new Set;for(let n of this._decorationsMetadata.values())e.containsRange(n.item.anchor.range)&&t.add(n.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(t=>Um(this,void 0,void 0,function*(){if(t.event.detail!==2)return;let n=this._getInlayHintLabelPart(t);if(n&&(t.event.preventDefault(),yield n.item.resolve(et.None),Dn(n.item.hint.textEdits))){let o=n.item.hint.textEdits.map(r=>Di.replace(E.lift(r.range),r.text));this._editor.executeEdits("inlayHint.default",o),e()}}))}_installContextMenu(){return this._editor.onContextMenu(e=>Um(this,void 0,void 0,function*(){if(!(e.event.target instanceof HTMLElement))return;let t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(HCe,this._editor,e.event.target,t))}))}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;let n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(n instanceof j_&&n?.attachedData instanceof mw)return n.attachedData}_invokeCommand(e,t){var n;return Um(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(e.id,...(n=e.arguments)!==null&&n!==void 0?n:[])}catch(o){this._notificationService.notify({severity:zY.Error,source:t.provider.displayName,message:o})}})}_cacheHintsForFastRestore(e){let t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){let t=new Map;for(let[n,o]of this._decorationsMetadata){if(t.has(o.item))continue;let r=e.getDecorationRange(n);if(r){let s=new dL(r,o.item.anchor.direction),a=o.item.with({anchor:s});t.set(o.item,a)}}return Array.from(t.values())}_getHintsRanges(){let e=this._editor.getModel(),t=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(let o of t.sort(E.compareRangesUsingStarts)){let r=e.validateRange(new E(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));n.length===0||!E.areIntersectingOrTouching(n[n.length-1],r)?n.push(r):n[n.length-1]=E.plusRange(n[n.length-1],r)}return n}_updateHintsDecorators(e,t){var n,o;let r=[],s=(p,f,v,b,A)=>{let w={content:v,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:f.className,cursorStops:b,attachedData:A};r.push({item:p,classNameRef:f,decoration:{range:p.anchor.range,options:{description:"InlayHint",showIfCollapsed:p.anchor.range.isEmpty(),collapseOnReplaceEdit:!p.anchor.range.isEmpty(),stickiness:0,[p.anchor.direction]:this._activeRenderMode===0?w:void 0}}})},a=(p,f)=>{let v=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});s(p,v,"\u200A",f?ja.Right:ja.None)},{fontSize:l,fontFamily:c,padding:d,isUniform:h}=this._getLayoutInfo(),u="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(u,c);for(let p of t){p.hint.paddingLeft&&a(p,!1);let f=typeof p.hint.label=="string"?[{label:p.hint.label}]:p.hint.label;for(let v=0;v<f.length;v++){let b=f[v],A=v===0,w=v===f.length-1,C={fontSize:`${l}px`,fontFamily:`var(${u}), ${Or.fontFamily}`,verticalAlign:h?"baseline":"middle"};Dn(p.hint.textEdits)&&(C.cursor="default"),this._fillInColors(C,p.hint),(b.command||b.location)&&((n=this._activeInlayHintPart)===null||n===void 0?void 0:n.part.item)===p&&this._activeInlayHintPart.part.index===v&&(C.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(C.color=Xi(IY),C.cursor="pointer")),d&&(A&&w?(C.padding=`1px ${Math.max(1,l/4)|0}px`,C.borderRadius=`${l/4|0}px`):A?(C.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,C.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):w?(C.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,C.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):C.padding="1px 0 1px 0"),s(p,this._ruleFactory.createClassNameRef(C),VCe(b.label),w&&!p.hint.paddingRight?ja.Right:ja.None,new mw(p,v))}if(p.hint.paddingRight&&a(p,!0),r.length>oH._MAX_DECORATORS)break}let g=[];for(let p of e)for(let{id:f}of(o=this._editor.getDecorationsInRange(p))!==null&&o!==void 0?o:[]){let v=this._decorationsMetadata.get(f);v&&(g.push(f),v.classNameRef.dispose(),this._decorationsMetadata.delete(f))}this._editor.changeDecorations(p=>{let f=p.deltaDecorations(g,r.map(v=>v.decoration));for(let v=0;v<f.length;v++){let b=r[v];this._decorationsMetadata.set(f[v],b)}})}_fillInColors(e,t){t.kind===_x.Parameter?(e.backgroundColor=Xi(Kpe),e.color=Xi(jpe)):t.kind===_x.Type?(e.backgroundColor=Xi(Qpe),e.color=Xi(Upe)):(e.backgroundColor=Xi(td),e.color=Xi(ed))}_getLayoutInfo(){let e=this._editor.getOption(129),t=e.padding,n=this._editor.getOption(48),o=this._editor.getOption(45),r=e.fontSize;(!r||r<5||r>n)&&(r=n);let s=e.fontFamily||o;return{fontSize:r,fontFamily:s,padding:t,isUniform:!t&&s===o&&r===n}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};Np.ID="editor.contrib.InlayHints";Np._MAX_DECORATORS=1500;Np=zCe([Tm(1,Te),Tm(2,Us),Tm(3,Uae),Tm(4,ji),Tm(5,nn),Tm(6,tt)],Np);function VCe(i){let e="\xA0";return i.replace(/[ \t]/g,e)}ft.registerCommand("_executeInlayHintProvider",(i,...e)=>Um(void 0,void 0,void 0,function*(){let[t,n]=e;ai($.isUri(t)),ai(E.isIRange(n));let{inlayHintsProvider:o}=i.get(Te),r=yield i.get(io).createModelReference(t);try{let s=yield hL.create(o,r.object.textEditorModel,[E.lift(n)],et.None),a=s.items.map(l=>l.hint);return setTimeout(()=>s.dispose(),0),a}finally{r.dispose()}}));var UCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Iv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},mte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},QCe=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(s){return new Promise(function(a,l){s=i[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},s)}},uL=class extends Zf{constructor(e,t){super(10,t,e.item.anchor.range),this.part=e}},rH=class extends EE{constructor(i,e,t,n,o,r){super(i,e,t,n,r),this._resolverService=o,this.hoverOrdinal=6}suggestHoverAnchor(i){var e;if(!Np.get(this._editor)||i.target.type!==6)return null;let t=(e=i.target.detail.injectedText)===null||e===void 0?void 0:e.options;return t instanceof j_&&t.attachedData instanceof mw?new uL(t.attachedData,this):null}computeSync(){return[]}computeAsync(i,e,t){return i instanceof uL?new wr(n=>mte(this,void 0,void 0,function*(){var o,r;let{part:s}=i;if(yield s.item.resolve(t),t.isCancellationRequested)return;let a;typeof s.item.hint.tooltip=="string"?a=new Zo().appendText(s.item.hint.tooltip):s.item.hint.tooltip&&(a=s.item.hint.tooltip),a&&n.emitOne(new ra(this,i.range,[a],0)),Dn(s.item.hint.textEdits)&&n.emitOne(new ra(this,i.range,[new Zo().appendText(m("hint.dbl","Double click to insert"))],10001));let l;if(typeof s.part.tooltip=="string"?l=new Zo().appendText(s.part.tooltip):s.part.tooltip&&(l=s.part.tooltip),l&&n.emitOne(new ra(this,i.range,[l],1)),s.part.location||s.part.command){let u,g=this._editor.getOption(72)==="altKey"?gt?m("links.navigate.kb.meta.mac","cmd + click"):m("links.navigate.kb.meta","ctrl + click"):gt?m("links.navigate.kb.alt.mac","option + click"):m("links.navigate.kb.alt","alt + click");s.part.location&&s.part.command?u=new Zo().appendText(m("hint.defAndCommand","Go to Definition ({0}), right click for more",g)):s.part.location?u=new Zo().appendText(m("hint.def","Go to Definition ({0})",g)):s.part.command&&(u=new Zo(`[${m("hint.cmd","Execute Command")}](${OCe(s.part.command)} "${s.part.command.title}") (${g})`,{isTrusted:!0})),u&&n.emitOne(new ra(this,i.range,[u],1e4))}let c=yield this._resolveInlayHintLabelPartHover(s,t);try{for(var d=QCe(c),h;h=yield d.next(),!h.done;){let u=h.value;n.emitOne(u)}}catch(u){o={error:u}}finally{try{h&&!h.done&&(r=d.return)&&(yield r.call(d))}finally{if(o)throw o.error}}})):wr.EMPTY}_resolveInlayHintLabelPartHover(i,e){return mte(this,void 0,void 0,function*(){if(!i.part.location)return wr.EMPTY;let{uri:t,range:n}=i.part.location,o=yield this._resolverService.createModelReference(t);try{let r=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?DJ(this._languageFeaturesService.hoverProvider,r,new q(n.startLineNumber,n.startColumn),e).filter(s=>!Z_(s.hover.contents)).map(s=>new ra(this,i.item.anchor.range,s.hover.contents,2+s.ordinal)):wr.EMPTY}finally{o.dispose()}})}};rH=UCe([Iv(1,ki),Iv(2,jr),Iv(3,Ot),Iv(4,io),Iv(5,Te)],rH);Wt(Np.ID,Np);hm.register(rH);var sH=class{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Se(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new Se(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}},jCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},KCe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},lu=class aH{constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}static get(e){return e.getContribution(aH.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();let n=this.editor.getSelection(),o=this.editor.getModel();if(!o||!n)return;let r=n;if(r.startLineNumber!==r.endLineNumber)return;let s=new xb(this.editor,5),a=o.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=Gn(l=>this.editorWorkerService.navigateValueSet(a,r,t)),this.currentRequest.then(l=>{if(!l||!l.range||!l.value||!s.validate(this.editor))return;let c=E.lift(l.range),d=l.range,h=l.value.length-(r.endColumn-r.startColumn);d={startLineNumber:d.startLineNumber,startColumn:d.startColumn,endLineNumber:d.endLineNumber,endColumn:d.startColumn+l.value.length},h>1&&(r=new Se(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn+h-1));let u=new sH(c,r,l.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,u),this.editor.pushUndoStop(),this.decorations.set([{range:d,options:aH.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=Yl(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(Ye)}).catch(Ye)):Promise.resolve(void 0)}};lu.ID="editor.contrib.inPlaceReplaceController";lu.DECORATION=rt.register({description:"in-place-replace",className:"valueSetReplacement"});lu=jCe([KCe(1,Qr)],lu);var lH=class extends Ie{constructor(){super({id:"editor.action.inPlaceReplace.up",label:m("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:3154,weight:100}})}run(e,t){let n=lu.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}},cH=class extends Ie{constructor(){super({id:"editor.action.inPlaceReplace.down",label:m("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:3156,weight:100}})}run(e,t){let n=lu.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}};Wt(lu.ID,lu);fe(lH);fe(cH);xi((i,e)=>{let t=i.getColor(lre);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});var dH=class extends Ie{constructor(){super({id:"expandLineSelection",label:m("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:B.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;let o=t._getViewModel();o.model.pushStackElement(),o.setCursorStates(n.source,3,kn.expandLineSelection(o,o.getCursorStates())),o.revealPrimaryCursor(n.source,!0)}};fe(dH);var hH=class{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){let n=qCe(e,this._cursors);for(let o=0,r=n.length;o<r;o++){let s=n[o];t.addEditOperation(s.range,s.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};function qCe(i,e){e.sort((s,a)=>s.lineNumber===a.lineNumber?s.column-a.column:s.lineNumber-a.lineNumber);for(let s=e.length-2;s>=0;s--)e[s].lineNumber===e[s+1].lineNumber&&e.splice(s,1);let t=[],n=0,o=0,r=e.length;for(let s=1,a=i.getLineCount();s<=a;s++){let l=i.getLineContent(s),c=l.length+1,d=0;if(o<r&&e[o].lineNumber===s&&(d=e[o].column,o++,d===c)||l.length===0)continue;let h=Ol(l),u=0;if(h===-1)u=1;else if(h!==l.length-1)u=h+2;else continue;u=Math.max(d,u),t[n++]=Di.delete(new E(s,u,s,c))}return t}var gL=class{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let o=[];for(let s=n.startLineNumber;s<=n.endLineNumber;s++)o.push(e.getLineContent(s));let r=o.join(`
`);r===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new E(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new E(n.startLineNumber,1,n.startLineNumber,1),r+`
`):t.addEditOperation(new E(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+r),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let o=n.startLineNumber,r=n.startColumn,s=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(o=o+this._startLineNumberDelta,r=1),this._endLineNumberDelta!==0&&(s=s+this._endLineNumberDelta,a=1),n=Se.createWithDirection(o,r,s,a,this._selectionDirection)}return n}},$Ce=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},GCe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},uH=class{constructor(i,e,t,n){this._languageConfigurationService=n,this._selection=i,this._isMovingDown=e,this._autoIndent=t,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(i,e){let t=i.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===t){this._selectionId=e.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=e.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,i.getLineMaxColumn(n.endLineNumber-1)));let{tabSize:o,indentSize:r,insertSpaces:s}=i.getOptions(),a=this.buildIndentConverter(o,r,s),l={tokenization:{getLineTokens:c=>i.tokenization.getLineTokens(c),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(c,d)=>i.getLanguageIdAtPosition(c,d)},getLineContent:null};if(n.startLineNumber===n.endLineNumber&&i.getLineMaxColumn(n.startLineNumber)===1){let c=n.startLineNumber,d=this._isMovingDown?c+1:c-1;i.getLineMaxColumn(d)===1?e.addEditOperation(new E(1,1,1,1),null):(e.addEditOperation(new E(c,1,c,1),i.getLineContent(d)),e.addEditOperation(new E(d,1,d,i.getLineMaxColumn(d)),null)),n=new Se(d,1,d,1)}else{let c,d;if(this._isMovingDown){c=n.endLineNumber+1,d=i.getLineContent(c),e.addEditOperation(new E(c-1,i.getLineMaxColumn(c-1),c,i.getLineMaxColumn(c)),null);let h=d;if(this.shouldAutoIndent(i,n)){let u=this.matchEnterRule(i,a,o,c,n.startLineNumber-1);if(u!==null){let p=hi(i.getLineContent(c)),f=u+Ir(p,o);h=J1(f,o,s)+this.trimLeft(d)}else{l.getLineContent=f=>f===n.startLineNumber?i.getLineContent(c):i.getLineContent(f);let p=D1(this._autoIndent,l,i.getLanguageIdAtPosition(c,1),n.startLineNumber,a,this._languageConfigurationService);if(p!==null){let f=hi(i.getLineContent(c)),v=Ir(p,o),b=Ir(f,o);v!==b&&(h=J1(v,o,s)+this.trimLeft(d))}}e.addEditOperation(new E(n.startLineNumber,1,n.startLineNumber,1),h+`
`);let g=this.matchEnterRuleMovingDown(i,a,o,n.startLineNumber,c,h);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(i,e,n,o,s,g);else{l.getLineContent=f=>f===n.startLineNumber?h:f>=n.startLineNumber+1&&f<=n.endLineNumber+1?i.getLineContent(f-1):i.getLineContent(f);let p=D1(this._autoIndent,l,i.getLanguageIdAtPosition(c,1),n.startLineNumber+1,a,this._languageConfigurationService);if(p!==null){let f=hi(i.getLineContent(n.startLineNumber)),v=Ir(p,o),b=Ir(f,o);if(v!==b){let A=v-b;this.getIndentEditsOfMovingBlock(i,e,n,o,s,A)}}}}else e.addEditOperation(new E(n.startLineNumber,1,n.startLineNumber,1),h+`
`)}else if(c=n.startLineNumber-1,d=i.getLineContent(c),e.addEditOperation(new E(c,1,c+1,1),null),e.addEditOperation(new E(n.endLineNumber,i.getLineMaxColumn(n.endLineNumber),n.endLineNumber,i.getLineMaxColumn(n.endLineNumber)),`
`+d),this.shouldAutoIndent(i,n)){l.getLineContent=u=>u===c?i.getLineContent(n.startLineNumber):i.getLineContent(u);let h=this.matchEnterRule(i,a,o,n.startLineNumber,n.startLineNumber-2);if(h!==null)h!==0&&this.getIndentEditsOfMovingBlock(i,e,n,o,s,h);else{let u=D1(this._autoIndent,l,i.getLanguageIdAtPosition(n.startLineNumber,1),c,a,this._languageConfigurationService);if(u!==null){let g=hi(i.getLineContent(n.startLineNumber)),p=Ir(u,o),f=Ir(g,o);if(p!==f){let v=p-f;this.getIndentEditsOfMovingBlock(i,e,n,o,s,v)}}}}}this._selectionId=e.trackSelection(n)}buildIndentConverter(i,e,t){return{shiftIndent:n=>As.shiftIndent(n,n.length+1,i,e,t),unshiftIndent:n=>As.unshiftIndent(n,n.length+1,i,e,t)}}parseEnterResult(i,e,t,n,o){if(o){let r=o.indentation;o.indentAction===ln.None||o.indentAction===ln.Indent?r=o.indentation+o.appendText:o.indentAction===ln.IndentOutdent?r=o.indentation:o.indentAction===ln.Outdent&&(r=e.unshiftIndent(o.indentation)+o.appendText);let s=i.getLineContent(n);if(this.trimLeft(s).indexOf(this.trimLeft(r))>=0){let a=hi(i.getLineContent(n)),l=hi(r),c=Woe(i,n,this._languageConfigurationService);c!==null&&c&2&&(l=e.unshiftIndent(l));let d=Ir(l,t),h=Ir(a,t);return d-h}}return null}matchEnterRuleMovingDown(i,e,t,n,o,r){if(Ol(r)>=0){let s=i.getLineMaxColumn(o),a=Vf(this._autoIndent,i,new E(o,s,o,s),this._languageConfigurationService);return this.parseEnterResult(i,e,t,n,a)}else{let s=n-1;for(;s>=1;){let c=i.getLineContent(s);if(Ol(c)>=0)break;s--}if(s<1||n>i.getLineCount())return null;let a=i.getLineMaxColumn(s),l=Vf(this._autoIndent,i,new E(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(i,e,t,n,l)}}matchEnterRule(i,e,t,n,o,r){let s=o;for(;s>=1;){let c;if(s===o&&r!==void 0?c=r:c=i.getLineContent(s),Ol(c)>=0)break;s--}if(s<1||n>i.getLineCount())return null;let a=i.getLineMaxColumn(s),l=Vf(this._autoIndent,i,new E(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(i,e,t,n,l)}trimLeft(i){return i.replace(/^\s+/,"")}shouldAutoIndent(i,e){if(this._autoIndent<4||!i.tokenization.isCheapToTokenize(e.startLineNumber))return!1;let t=i.getLanguageIdAtPosition(e.startLineNumber,1),n=i.getLanguageIdAtPosition(e.endLineNumber,1);return!(t!==n||this._languageConfigurationService.getLanguageConfiguration(t).indentRulesSupport===null)}getIndentEditsOfMovingBlock(i,e,t,n,o,r){for(let s=t.startLineNumber;s<=t.endLineNumber;s++){let a=i.getLineContent(s),l=hi(a),c=Ir(l,n)+r,d=J1(c,n,o);d!==l&&(e.addEditOperation(new E(s,1,s,l.length+1),d),s===t.endLineNumber&&t.endColumn<=l.length+1&&d===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(i,e){let t=e.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(t=t.setEndPosition(t.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&t.startLineNumber<t.endLineNumber&&(t=t.setEndPosition(t.endLineNumber,2)),t}};uH=$Ce([GCe(3,Yi)],uH);var b0=class i{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return i._COLLATOR||(i._COLLATOR=new Intl.Collator),i._COLLATOR}getEditOperations(e,t){let n=YCe(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let o=Qae(e,t,n);if(!o)return!1;for(let r=0,s=o.before.length;r<s;r++)if(o.before[r]!==o.after[r])return!0;return!1}};b0._COLLATOR=null;function Qae(i,e,t){let n=e.startLineNumber,o=e.endLineNumber;if(e.endColumn===1&&o--,n>=o)return null;let r=[];for(let a=n;a<=o;a++)r.push(i.getLineContent(a));let s=r.slice(0);return s.sort(b0.getCollator().compare),t===!0&&(s=s.reverse()),{startLineNumber:n,endLineNumber:o,before:r,after:s}}function YCe(i,e,t){let n=Qae(i,e,t);return n?Di.replace(new E(n.startLineNumber,1,n.endLineNumber,i.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}var pL=class extends Ie{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;let n=t.getSelections().map((s,a)=>({selection:s,index:a,ignore:!1}));n.sort((s,a)=>E.compareRangesUsingStarts(s.selection,a.selection));let o=n[0];for(let s=1;s<n.length;s++){let a=n[s];o.selection.endLineNumber===a.selection.startLineNumber&&(o.index<a.index?a.ignore=!0:(o.ignore=!0,o=a))}let r=[];for(let s of n)r.push(new gL(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},gH=class extends pL{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:m("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"2_line",title:m({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}},pH=class extends pL{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:m("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"2_line",title:m({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}},mH=class extends Ie{constructor(){super({id:"editor.action.duplicateSelection",label:m("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:B.writable,menuOpts:{menuId:z.MenubarSelectionMenu,group:"2_line",title:m({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;let o=[],r=t.getSelections(),s=t.getModel();for(let a of r)if(a.isEmpty())o.push(new gL(a,!0));else{let l=new Se(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);o.push(new LB(l,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}},mL=class extends Ie{constructor(e,t){super(t),this.down=e}run(e,t){let n=e.get(Yi),o=[],r=t.getSelections()||[],s=t.getOption(9);for(let a of r)o.push(new uH(a,this.down,s,n));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}},fH=class extends mL{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:m("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"2_line",title:m({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}},_H=class extends mL{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:m("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"2_line",title:m({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}},fL=class extends Ie{constructor(e,t){super(t),this.descending=e}run(e,t){let n=t.getSelections()||[];for(let r of n)if(!b0.canRun(t.getModel(),r,this.descending))return;let o=[];for(let r=0,s=n.length;r<s;r++)o[r]=new b0(n[r],this.descending);t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}},vH=class extends fL{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:m("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:B.writable})}},AH=class extends fL{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:m("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:B.writable})}},bH=class extends Ie{constructor(){super({id:"editor.action.removeDuplicateLines",label:m("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:B.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let o=[],r=[],s=0;for(let a of t.getSelections()){let l=new Set,c=[];for(let g=a.startLineNumber;g<=a.endLineNumber;g++){let p=n.getLineContent(g);l.has(p)||(c.push(p),l.add(p))}let d=new Se(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),h=a.startLineNumber-s,u=new Se(h,1,h+c.length-1,c[c.length-1].length);o.push(Di.replace(d,c.join(`
`))),r.push(u),s+=a.endLineNumber-a.startLineNumber+1-c.length}t.pushUndoStop(),t.executeEdits(this.id,o,r),t.pushUndoStop()}},_L=class i extends Ie{constructor(){super({id:i.ID,label:m("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:xn(2089,2102),weight:100}})}run(e,t,n){let o=[];n.reason==="auto-save"&&(o=(t.getSelections()||[]).map(a=>new q(a.positionLineNumber,a.positionColumn)));let r=t.getSelection();if(r===null)return;let s=new hH(r,o);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}};_L.ID="editor.action.trimTrailingWhitespace";var wH=class extends Ie{constructor(){super({id:"editor.action.deleteLines",label:m("lines.delete","Delete Line"),alias:"Delete Line",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),o=t.getModel();if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return;let r=0,s=[],a=[];for(let l=0,c=n.length;l<c;l++){let d=n[l],h=d.startLineNumber,u=d.endLineNumber,g=1,p=o.getLineMaxColumn(u);u<o.getLineCount()?(u+=1,p=1):h>1&&(h-=1,g=o.getLineMaxColumn(h)),s.push(Di.replace(new Se(h,g,u,p),"")),a.push(new Se(h-r,d.positionColumn,h-r,d.positionColumn)),r+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(r=>{let s=r.endLineNumber;return r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(s-=1),{startLineNumber:r.startLineNumber,selectionStartColumn:r.selectionStartColumn,endLineNumber:s,positionColumn:r.positionColumn}});t.sort((r,s)=>r.startLineNumber===s.startLineNumber?r.endLineNumber-s.endLineNumber:r.startLineNumber-s.startLineNumber);let n=[],o=t[0];for(let r=1;r<t.length;r++)o.endLineNumber+1>=t[r].startLineNumber?o.endLineNumber=t[r].endLineNumber:(n.push(o),o=t[r]);return n.push(o),n}},CH=class extends Ie{constructor(){super({id:"editor.action.indentLines",label:m("lines.indent","Indent Line"),alias:"Indent Line",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:2137,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,bs.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}},yH=class extends Ie{constructor(){super({id:"editor.action.outdentLines",label:m("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:2135,weight:100}})}run(e,t){Uf.Outdent.runEditorCommand(e,t,null)}},SH=class extends Ie{constructor(){super({id:"editor.action.insertLineBefore",label:m("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:3075,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,bs.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}},DH=class extends Ie{constructor(){super({id:"editor.action.insertLineAfter",label:m("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:2051,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,bs.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}},vL=class extends Ie{run(e,t){if(!t.hasModel())return;let n=t.getSelection(),o=this._getRangesToDelete(t),r=[];for(let l=0,c=o.length-1;l<c;l++){let d=o[l],h=o[l+1];E.intersectRanges(d,h)===null?r.push(d):o[l+1]=E.plusRange(d,h)}r.push(o[o.length-1]);let s=this._getEndCursorState(n,r),a=r.map(l=>Di.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,s),t.pushUndoStop()}},xH=class extends vL{constructor(){super({id:"deleteAllLeft",label:m("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,o=[],r=0;return t.forEach(s=>{let a;if(s.endColumn===1&&r>0){let l=s.startLineNumber-r;a=new Se(l,s.startColumn,l,s.startColumn)}else a=new Se(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn);r+=s.endLineNumber-s.startLineNumber,s.intersectRanges(e)?n=a:o.push(a)}),n&&o.unshift(n),o}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,o=e.getModel();return o===null?[]:(n.sort(E.compareRangesUsingStarts),n=n.map(r=>{if(r.isEmpty())if(r.startColumn===1){let s=Math.max(1,r.startLineNumber-1),a=r.startLineNumber===1?1:o.getLineContent(s).length+1;return new E(s,a,r.startLineNumber,1)}else return new E(r.startLineNumber,1,r.startLineNumber,r.startColumn);else return new E(r.startLineNumber,1,r.endLineNumber,r.endColumn)}),n)}},kH=class extends vL{constructor(){super({id:"deleteAllRight",label:m("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,o=[];for(let r=0,s=t.length,a=0;r<s;r++){let l=t[r],c=new Se(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=c:o.push(c)}return n&&o.unshift(n),o}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let o=n.map(r=>{if(r.isEmpty()){let s=t.getLineMaxColumn(r.startLineNumber);return r.startColumn===s?new E(r.startLineNumber,r.startColumn,r.startLineNumber+1,1):new E(r.startLineNumber,r.startColumn,r.startLineNumber,s)}return r});return o.sort(E.compareRangesUsingStarts),o}},EH=class extends Ie{constructor(){super({id:"editor.action.joinLines",label:m("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let o=t.getSelection();if(o===null)return;n.sort(E.compareRangesUsingStarts);let r=[],s=n.reduce((u,g)=>u.isEmpty()?u.endLineNumber===g.startLineNumber?(o.equalsSelection(u)&&(o=g),g):g.startLineNumber>u.endLineNumber+1?(r.push(u),g):new Se(u.startLineNumber,u.startColumn,g.endLineNumber,g.endColumn):g.startLineNumber>u.endLineNumber?(r.push(u),g):new Se(u.startLineNumber,u.startColumn,g.endLineNumber,g.endColumn));r.push(s);let a=t.getModel();if(a===null)return;let l=[],c=[],d=o,h=0;for(let u=0,g=r.length;u<g;u++){let p=r[u],f=p.startLineNumber,v=1,b=0,A,w,C=a.getLineContent(p.endLineNumber).length-p.endColumn;if(p.isEmpty()||p.startLineNumber===p.endLineNumber){let S=p.getStartPosition();S.lineNumber<a.getLineCount()?(A=f+1,w=a.getLineMaxColumn(A)):(A=S.lineNumber,w=a.getLineMaxColumn(S.lineNumber))}else A=p.endLineNumber,w=a.getLineMaxColumn(A);let k=a.getLineContent(f);for(let S=f+1;S<=A;S++){let y=a.getLineContent(S),M=a.getLineFirstNonWhitespaceColumn(S);if(M>=1){let O=!0;k===""&&(O=!1),O&&(k.charAt(k.length-1)===" "||k.charAt(k.length-1)==="	")&&(O=!1,k=k.replace(/[\s\uFEFF\xA0]+$/g," "));let H=y.substr(M-1);k+=(O?" ":"")+H,O?b=H.length+1:b=H.length}else b=0}let L=new E(f,v,A,w);if(!L.isEmpty()){let S;p.isEmpty()?(l.push(Di.replace(L,k)),S=new Se(L.startLineNumber-h,k.length-b+1,f-h,k.length-b+1)):p.startLineNumber===p.endLineNumber?(l.push(Di.replace(L,k)),S=new Se(p.startLineNumber-h,p.startColumn,p.endLineNumber-h,p.endColumn)):(l.push(Di.replace(L,k)),S=new Se(p.startLineNumber-h,p.startColumn,p.startLineNumber-h,k.length-C)),E.intersectRanges(L,o)!==null?d=S:c.push(S)}h+=L.endLineNumber-L.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}},LH=class extends Ie{constructor(){super({id:"editor.action.transpose",label:m("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:B.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let o=t.getModel();if(o===null)return;let r=[];for(let s=0,a=n.length;s<a;s++){let l=n[s];if(!l.isEmpty())continue;let c=l.getStartPosition(),d=o.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===o.getLineCount())continue;let h=new E(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),u=o.getValueInRange(h).split("").reverse().join("");r.push(new Vn(new Se(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),u))}else{let h=new E(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),u=o.getValueInRange(h).split("").reverse().join("");r.push(new FA(h,u,new Se(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},Rp=class extends Ie{run(e,t){let n=t.getSelections();if(n===null)return;let o=t.getModel();if(o===null)return;let r=t.getOption(119),s=[];for(let a of n)if(a.isEmpty()){let l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;let d=new E(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),h=o.getValueInRange(d);s.push(Di.replace(d,this._modifyText(h,r)))}else{let l=o.getValueInRange(a);s.push(Di.replace(a,this._modifyText(l,r)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}},IH=class extends Rp{constructor(){super({id:"editor.action.transformToUppercase",label:m("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:B.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}},TH=class extends Rp{constructor(){super({id:"editor.action.transformToLowercase",label:m("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:B.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}},cu=class{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}},fw=class i extends Rp{constructor(){super({id:"editor.action.transformToTitlecase",label:m("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:B.writable})}_modifyText(e,t){let n=i.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,o=>o.toLocaleUpperCase()):e}};fw.titleBoundary=new cu("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");var Pg=class i extends Rp{constructor(){super({id:"editor.action.transformToSnakecase",label:m("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:B.writable})}_modifyText(e,t){let n=i.caseBoundary.get(),o=i.singleLetters.get();return!n||!o?e:e.replace(n,"$1_$2").replace(o,"$1_$2$3").toLocaleLowerCase()}};Pg.caseBoundary=new cu("(\\p{Ll})(\\p{Lu})","gmu");Pg.singleLetters=new cu("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");var Fp=class i extends Rp{constructor(){super({id:"editor.action.transformToKebabcase",label:m("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:B.writable})}static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(e=>e.isSupported())}_modifyText(e,t){let n=i.caseBoundary.get(),o=i.singleLetters.get(),r=i.underscoreBoundary.get();return!n||!o||!r?e:e.replace(r,"$1-$3").replace(n,"$1-$2").replace(o,"$1-$2").toLocaleLowerCase()}};Fp.caseBoundary=new cu("(\\p{Ll})(\\p{Lu})","gmu");Fp.singleLetters=new cu("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");Fp.underscoreBoundary=new cu("(\\S)(_)(\\S)","gm");fe(gH);fe(pH);fe(mH);fe(fH);fe(_H);fe(vH);fe(AH);fe(bH);fe(_L);fe(wH);fe(CH);fe(yH);fe(SH);fe(DH);fe(xH);fe(kH);fe(EH);fe(LH);fe(IH);fe(TH);Pg.caseBoundary.isSupported()&&Pg.singleLetters.isSupported()&&fe(Pg);fw.titleBoundary.isSupported()&&fe(fw);Fp.isSupported()&&fe(Fp);var JCe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Xy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},MH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},jae=new Le("LinkedEditingInputVisible",!1),Kae="linked-editing-decoration",du=class NH extends J{constructor(e,t,n,o,r){super(),this.languageConfigurationService=o,this._syncRangesToken=0,this._localToDispose=this._register(new ne),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=jae.bindTo(t),this._debounceInformation=r.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new ne),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(64)||s.hasChanged(84))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(NH.ID)}reinitialize(e){let t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(64)||this._editor.getOption(84))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(Z.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));let o=new Gl(this._debounceInformation.get(t)),r=()=>{var l;this._rangeUpdateTriggerPromise=o.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},s=new Gl(0),a=l=>{this._rangeSyncTriggerPromise=s.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{r()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){let c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}r()})),this._localToDispose.add({dispose:()=>{o.dispose(),s.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;let t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();let o=t.getValueInRange(n);if(this._currentWordPattern){let s=o.match(this._currentWordPattern);if((s?s[0].length:0)!==o.length)return this.clearRanges()}let r=[];for(let s=1,a=this._currentDecorations.length;s<a;s++){let l=this._currentDecorations.getRange(s);if(l)if(l.startLineNumber!==l.endLineNumber)r.push({range:l,text:o});else{let c=t.getValueInRange(l),d=o,h=l.startColumn,u=l.endColumn,g=Zg(c,d);h+=g,c=c.substr(g),d=d.substr(g);let p=kA(c,d);u-=p,c=c.substr(0,c.length-p),d=d.substr(0,d.length-p),(h!==u||d.length!==0)&&r.push({range:new E(l.startLineNumber,h,l.endLineNumber,u),text:d})}}if(r.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;let s=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",r),this._editor._getViewModel().setPrevEditOperationType(s)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return MH(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}let t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}let n=this._editor.getModel(),o=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===o){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){let s=this._currentDecorations.getRange(0);if(s&&s.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=o;let r=Gn(s=>MH(this,void 0,void 0,function*(){try{let a=new sr(!1),l=yield qae(this._providers,n,t,s);if(this._debounceInformation.update(n,a.elapsed()),r!==this._currentRequest||(this._currentRequest=null,o!==n.getVersionId()))return;let c=[];l!=null&&l.ranges&&(c=l.ranges),this._currentWordPattern=l?.wordPattern||this._languageWordPattern;let d=!1;for(let u=0,g=c.length;u<g;u++)if(E.containsPosition(c[u],t)){if(d=!0,u!==0){let p=c[u];c.splice(u,1),c.unshift(p)}break}if(!d){this.clearRanges();return}let h=c.map(u=>({range:u,options:NH.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(h),this._syncRangesToken++}catch(a){Ls(a)||Ye(a),(this._currentRequest===r||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=r,r})}};du.ID="editor.contrib.linkedEditing";du.DECORATION=rt.register({description:"linked-editing",stickiness:0,className:Kae});du=JCe([Xy(1,Ze),Xy(2,Te),Xy(3,Yi),Xy(4,Us)],du);var RH=class extends Ie{constructor(){super({id:"editor.action.linkedEditing",label:m("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:we.and(B.writable,B.hasRenameProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){let n=e.get(Ft),[o,r]=Array.isArray(t)&&t||[void 0,void 0];return $.isUri(o)&&q.isIPosition(r)?n.openCodeEditor({resource:o},n.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(r),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},Ye):super.runCommand(e,t)}run(e,t){let n=du.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}},XCe=$n.bindToContribution(du.get);pe(new XCe({id:"cancelLinkedEditingInput",precondition:jae,handler:i=>i.clearRanges(),kbOpts:{kbExpr:B.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function qae(i,e,t,n){let o=i.ordered(e);return Qoe(o.map(r=>()=>MH(this,void 0,void 0,function*(){try{return yield r.provideLinkedEditingRanges(e,t,n)}catch(s){Fn(s);return}})),r=>!!r&&Dn(r?.ranges))}var ZCe=P("editor.linkedEditingBackground",{dark:j.fromHex("#f00").transparent(.3),light:j.fromHex("#f00").transparent(.3),hcDark:j.fromHex("#f00").transparent(.3),hcLight:j.white},m("editorLinkedEditingBackground","Background color when the editor auto renames on type."));xi((i,e)=>{let t=i.getColor(ZCe);t&&e.addRule(`.monaco-editor .${Kae} { background: ${t}; border-left-color: ${t}; }`)});mc("_executeLinkedEditingProvider",(i,e,t)=>{let{linkedEditingRangeProvider:n}=i.get(Te);return qae(n,e,t,et.None)});Wt(du.ID,du);fe(RH);var $ae=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},eye=class{constructor(i,e){this._link=i,this._provider=e}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(i){return $ae(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,i)).then(e=>(this._link=e||this._link,this._link.url?this.resolve(i):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}},AL=class i{constructor(e){this._disposables=new ne;let t=[];for(let[n,o]of e){let r=n.links.map(s=>new eye(s,o));t=i._union(t,r),UG(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let n=[],o,r,s,a;for(o=0,s=0,r=e.length,a=t.length;o<r&&s<a;){let l=e[o],c=t[s];if(E.areIntersectingOrTouching(l.range,c.range)){o++;continue}E.compareRangesUsingStarts(l.range,c.range)<0?(n.push(l),o++):(n.push(c),s++)}for(;o<r;o++)n.push(e[o]);for(;s<a;s++)n.push(t[s]);return n}};function Gae(i,e,t){let n=[],o=i.ordered(e).reverse().map((r,s)=>Promise.resolve(r.provideLinks(e,t)).then(a=>{a&&(n[s]=[a,r])},Fn));return Promise.all(o).then(()=>{let r=new AL(Ns(n));return t.isCancellationRequested?(r.dispose(),new AL([])):r})}ft.registerCommand("_executeLinkProvider",(i,...e)=>$ae(void 0,void 0,void 0,function*(){let[t,n]=e;ai(t instanceof $),typeof n!="number"&&(n=0);let{linkProvider:o}=i.get(Te),r=i.get(li).getModel(t);if(!r)return[];let s=yield Gae(o,r,et.None);if(!s)return[];for(let l=0;l<Math.min(n,s.links.length);l++)yield s.links[l].resolve(et.None);let a=s.links.slice(0);return s.dispose(),a}));var tye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Zy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},iye=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},w0=class Yae extends J{constructor(e,t,n,o,r){super(),this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=o,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=r.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new jt(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;let s=this._register(new Mb(e));this._register(s.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(s.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(s.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(65)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}static get(e){return e.getContribution(Yae.ID)}computeLinksNow(){return iye(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(65))return;let e=this.editor.getModel();if(this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Gn(t=>Gae(this.providers,e,t));try{let t=new sr(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Ye(t)}finally{this.computePromise=null}}})}updateDecorations(e){let t=this.editor.getOption(72)==="altKey",n=[],o=Object.keys(this.currentOccurrences);for(let s of o){let a=this.currentOccurrences[s];n.push(a.decorationId)}let r=[];if(e)for(let s of e)r.push(bL.decoration(s,t));this.editor.changeDecorations(s=>{let a=s.deltaDecorations(n,r);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){let d=new bL(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){let n=this.editor.getOption(72)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();let o=this.getLinkOccurrence(e.target.position);o&&this.editor.changeDecorations(r=>{o.activate(r,n),this.activeLinkDecorationId=o.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){let e=this.editor.getOption(72)==="altKey";if(this.activeLinkDecorationId){let t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;let t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;let{link:o}=e;o.resolve(et.None).then(r=>{if(typeof r=="string"&&this.editor.hasModel()){let s=this.editor.getModel().uri;if(s.scheme===Oe.file&&r.startsWith(`${Oe.file}:`)){let a=$.parse(r);if(a.scheme===Oe.file){let l=Al(a),c=null;l.startsWith("/./")?c=`.${l.substr(1)}`:l.startsWith("//./")&&(c=`.${l.substr(2)}`),c&&(r=kl(s,c))}}}return this.openerService.open(r,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},r=>{let s=r instanceof Error?r.message:r;s==="invalid"?this.notificationService.warn(m("invalid.url","Failed to open this link because it is not well-formed: {0}",o.url.toString())):s==="missing"?this.notificationService.warn(m("missing.url","Failed to open this link because its target is missing.")):Ye(r)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;let t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(let n of t){let o=this.currentOccurrences[n.id];if(o)return o}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};w0.ID="editor.linkDetector";w0=tye([Zy(1,jr),Zy(2,nn),Zy(3,Te),Zy(4,Us)],w0);var fte={general:rt.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:rt.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},bL=class i{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:i._getOptions(e,t,!1)}}static _getOptions(e,t,n){let o=Object.assign({},n?fte.active:fte.general);return o.hoverMessage=nye(e,t),o}activate(e,t){e.changeDecorationOptions(this.decorationId,i._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,i._getOptions(this.link,t,!1))}};function nye(i,e){let t=i.url&&/^command:/i.test(i.url.toString()),n=i.tooltip?i.tooltip:t?m("links.navigate.executeCmd","Execute command"):m("links.navigate.follow","Follow link"),o=e?gt?m("links.navigate.kb.meta.mac","cmd + click"):m("links.navigate.kb.meta","ctrl + click"):gt?m("links.navigate.kb.alt.mac","option + click"):m("links.navigate.kb.alt","alt + click");if(i.url){let r="";if(/^command:/i.test(i.url.toString())){let s=i.url.toString().match(/^command:([^?#]+)/);if(s){let a=s[1];r=m("tooltip.explanation","Execute command {0}",a)}}return new Zo("",!0).appendLink(i.url.toString(!0).replace(/ /g,"%20"),n,r).appendMarkdown(` (${o})`)}else return new Zo().appendText(`${n} (${o})`)}var FH=class extends Ie{constructor(){super({id:"editor.action.openLink",label:m("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let n=w0.get(t);if(!n||!t.hasModel())return;let o=t.getSelections();for(let r of o){let s=n.getLinkOccurrence(r.getEndPosition());s&&n.openLinkOccurrence(s,!1)}}};Wt(w0.ID,w0);fe(FH);xi((i,e)=>{let t=i.getColor(IY);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});var oye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},rye=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function yu(i,e){let t=e.filter(n=>!i.find(o=>o.equals(n)));if(t.length>=1){let n=t.map(r=>`line ${r.viewState.position.lineNumber} column ${r.viewState.position.column}`).join(", "),o=t.length===1?m("cursorAdded","Cursor added: {0}",n):m("cursorsAdded","Cursors added: {0}",n);AD(o)}}var BH=class extends Ie{constructor(){super({id:"editor.action.insertCursorAbove",label:m("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let o=!0;n&&n.logicalLine===!1&&(o=!1);let r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();let s=r.getCursorStates();r.setCursorStates(n.source,3,kn.addCursorUp(r,s,o)),r.revealTopMostCursor(n.source),yu(s,r.getCursorStates())}},PH=class extends Ie{constructor(){super({id:"editor.action.insertCursorBelow",label:m("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let o=!0;n&&n.logicalLine===!1&&(o=!1);let r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();let s=r.getCursorStates();r.setCursorStates(n.source,3,kn.addCursorDown(r,s,o)),r.revealBottomMostCursor(n.source),yu(s,r.getCursorStates())}},OH=class extends Ie{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:m("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let o=e.startLineNumber;o<e.endLineNumber;o++){let r=t.getLineMaxColumn(o);n.push(new Se(o,r,o,r))}e.endColumn>1&&n.push(new Se(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;let n=t.getModel(),o=t.getSelections(),r=t._getViewModel(),s=r.getCursorStates(),a=[];o.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),yu(s,r.getCursorStates())}},HH=class extends Ie{constructor(){super({id:"editor.action.addCursorsToBottom",label:m("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;let n=t.getSelections(),o=t.getModel().getLineCount(),r=[];for(let l=n[0].startLineNumber;l<=o;l++)r.push(new Se(l,n[0].startColumn,l,n[0].endColumn));let s=t._getViewModel(),a=s.getCursorStates();r.length>0&&t.setSelections(r),yu(a,s.getCursorStates())}},WH=class extends Ie{constructor(){super({id:"editor.action.addCursorsToTop",label:m("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;let n=t.getSelections(),o=[];for(let a=n[0].startLineNumber;a>=1;a--)o.push(new Se(a,n[0].startColumn,a,n[0].endColumn));let r=t._getViewModel(),s=r.getCursorStates();o.length>0&&t.setSelections(o),yu(s,r.getCursorStates())}},vf=class{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}},wL=class i{constructor(e,t,n,o,r,s,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=o,this.wholeWord=r,this.matchCase=s,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;let n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new i(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let o=!1,r,s,a=e.getSelections();a.length===1&&a[0].isEmpty()?(o=!0,r=!0,s=!0):(r=n.wholeWord,s=n.matchCase);let l=e.getSelection(),c,d=null;if(l.isEmpty()){let h=e.getConfiguredWordAtPosition(l.getStartPosition());if(!h)return null;c=h.word,d=new Se(l.startLineNumber,h.startColumn,l.startLineNumber,h.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new i(e,t,o,c,r,s,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new vf(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new vf(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let o=this.currentMatch;return this.currentMatch=null,o}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return n?new Se(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new vf(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new vf(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let o=this.currentMatch;return this.currentMatch=null,o}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return n?new Se(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();let t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824)}},Bp=class i extends J{constructor(e){super(),this._sessionDispose=this._register(new ne),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(i.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){let t=wL.create(this._editor,e);if(!t)return;this._session=t;let n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(o=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(o=>{(o.matchCase||o.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){let e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;let n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new Se(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){let t=this._editor.getSelections();if(t.length>1){let n=e.getState().matchCase;if(!Jae(this._editor.getModel(),t,n)){let o=this._editor.getModel(),r=[];for(let s=0,a=t.length;s<a;s++)r[s]=this._expandEmptyToWord(o,t[s]);this._editor.setSelections(r);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null,n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){let o=this._editor.getModel();n.searchScope?t=o.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(119):null,!1,1073741824):t=o.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(119):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){let o=this._editor.getSelection();for(let r=0,s=t.length;r<s;r++){let a=t[r];if(a.range.intersectRanges(o)){t[r]=t[0],t[0]=a;break}}this._setSelections(t.map(r=>new Se(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)))}}};Bp.ID="editor.contrib.multiCursorController";var hu=class extends Ie{run(e,t){let n=Bp.get(t);if(!n)return;let o=zr.get(t);if(!o)return;let r=t._getViewModel();if(r){let s=r.getCursorStates();this._run(n,o),yu(s,r.getCursorStates())}}},zH=class extends hu{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:m("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:2082,weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}},VH=class extends hu{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:m("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:z.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}},UH=class extends hu{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:m("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:xn(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}},QH=class extends hu{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:m("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}},jH=class extends hu{constructor(){super({id:"editor.action.selectHighlights",label:m("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:3114,weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"3_multi",title:m({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}},KH=class extends hu{constructor(){super({id:"editor.action.changeAll",label:m("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:we.and(B.writable,B.editorTextFocus),kbOpts:{kbExpr:B.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}},qH=class{constructor(e,t,n,o,r){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=o,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,r&&this._model===r._model&&this._searchText===r._searchText&&this._matchCase===r._matchCase&&this._wordSeparators===r._wordSeparators&&this._modelVersionId===r._modelVersionId&&(this._cachedFindMatches=r._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(E.compareRangesUsingStarts)),this._cachedFindMatches}},Pp=class QS extends J{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(99),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new jt(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(o=>{this._isEnabled=e.getOption(99)})),this._register(e.onDidChangeCursorSelection(o=>{this._isEnabled&&(o.selection.isEmpty()?o.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(o=>{this._setState(null)})),this._register(e.onDidChangeModelContent(o=>{this._isEnabled&&this.updateSoon.schedule()}));let n=zr.get(e);n&&this._register(n.getState().onFindReplaceStateChange(o=>{this._update()}))}_update(){this._setState(QS._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;let o=n.getSelection();if(o.startLineNumber!==o.endLineNumber)return null;let r=Bp.get(n);if(!r)return null;let s=zr.get(n);if(!s)return null;let a=r.getSession(s);if(!a){let d=n.getSelections();if(d.length>1){let h=s.getState().matchCase;if(!Jae(n.getModel(),d,h))return null}a=wL.create(n,s)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;let l=s.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let h=a.searchText;if(c||(h=h.toLowerCase()),d===h&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new qH(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(119):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;let t=this.editor.getModel();if(t.isTooLargeForTokenization())return;let n=this.state.findMatches(),o=this.editor.getSelections();o.sort(E.compareRangesUsingStarts);let r=[];for(let l=0,c=0,d=n.length,h=o.length;l<d;){let u=n[l];if(c>=h)r.push(u),l++;else{let g=E.compareRangesUsingStarts(u,o[c]);g<0?((o[c].isEmpty()||!E.areIntersecting(u,o[c]))&&r.push(u),l++):(g>0||l++,c++)}}let s=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(74),a=r.map(l=>({range:l,options:s?QS._SELECTION_HIGHLIGHT:QS._SELECTION_HIGHLIGHT_OVERVIEW}));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}};Pp.ID="editor.contrib.selectionHighlighter";Pp._SELECTION_HIGHLIGHT_OVERVIEW=rt.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Xi(VM),position:xs.Inline},overviewRuler:{color:Xi(Xoe),position:us.Center}});Pp._SELECTION_HIGHLIGHT=rt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});Pp=oye([rye(1,Te)],Pp);function Jae(i,e,t){let n=_te(i,e[0],!t);for(let o=1,r=e.length;o<r;o++){let s=e[o];if(s.isEmpty())return!1;let a=_te(i,s,!t);if(n!==a)return!1}return!0}function _te(i,e,t){let n=i.getValueInRange(e);return t?n.toLowerCase():n}var $H=class extends Ie{constructor(){super({id:"editor.action.focusNextCursor",label:m("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:m("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;let o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();let r=Array.from(o.getCursorStates()),s=r.shift();s&&(r.push(s),o.setCursorStates(n.source,3,r),o.revealPrimaryCursor(n.source,!0),yu(r,o.getCursorStates()))}},GH=class extends Ie{constructor(){super({id:"editor.action.focusPreviousCursor",label:m("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:m("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;let o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();let r=Array.from(o.getCursorStates()),s=r.pop();s&&(r.unshift(s),o.setCursorStates(n.source,3,r),o.revealPrimaryCursor(n.source,!0),yu(r,o.getCursorStates()))}};Wt(Bp.ID,Bp);Wt(Pp.ID,Pp);fe(BH);fe(PH);fe(OH);fe(zH);fe(VH);fe(UH);fe(QH);fe(jH);fe(KH);fe(HH);fe(WH);fe($H);fe(GH);var Xae=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Op={Visible:new Le("parameterHintsVisible",!1),MultipleSignatures:new Le("parameterHintsMultipleSignatures",!1)};function Zae(i,e,t,n,o){return Xae(this,void 0,void 0,function*(){let r=i.ordered(e);for(let s of r)try{let a=yield s.provideSignatureHelp(e,t,o,n);if(a)return a}catch(a){Fn(a)}})}ft.registerCommand("_executeSignatureHelpProvider",(i,...e)=>Xae(void 0,void 0,void 0,function*(){let[t,n,o]=e;ai($.isUri(t)),ai(q.isIPosition(n)),ai(typeof o=="string"||!o);let r=i.get(Te),s=yield i.get(io).createModelReference(t);try{let a=yield Zae(r.signatureHelpProvider,s.object.textEditorModel,q.lift(n),{triggerKind:Wl.Invoke,isRetrigger:!1,triggerCharacter:o},et.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{s.dispose()}}));var sye=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},oh;(function(i){i.Default={type:0};class e{constructor(o,r){this.request=o,this.previouslyActiveHints=r,this.type=2}}i.Pending=e;class t{constructor(o){this.hints=o,this.type=1}}i.Active=t})(oh||(oh={}));var CL=class i extends J{constructor(e,t,n=i.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new Q),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=oh.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new eo),this.triggerChars=new uh,this.retriggerChars=new uh,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new Gl(n),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(o=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(o=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(o=>this.onCursorChange(o))),this._register(this.editor.onDidChangeModelContent(o=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(o=>this.onDidType(o))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=oh.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){let n=this.editor.getModel();if(!n||!this.providers.has(n))return;let o=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(o),t).catch(Ye)}next(){if(this.state.type!==1)return;let e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,o=this.editor.getOption(78).cycle;if((e<2||n)&&!o){this.cancel();return}this.updateActiveSignature(n&&o?0:t+1)}previous(){if(this.state.type!==1)return;let e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,o=this.editor.getOption(78).cycle;if((e<2||n)&&!o){this.cancel();return}this.updateActiveSignature(n&&o?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new oh.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return sye(this,void 0,void 0,function*(){let t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;let o=this._pendingTriggers.reduce(aye);this._pendingTriggers=[];let r={triggerKind:o.triggerKind,triggerCharacter:o.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;let s=this.editor.getModel(),a=this.editor.getPosition();this.state=new oh.Pending(Gn(l=>Zae(this.providers,s,a,r,l)),n);try{let l=yield this.state.request;return e!==this.triggerId?(l?.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new oh.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=oh.Default),Ye(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new uh,this.retriggerChars=new uh;let e=this.editor.getModel();if(e)for(let t of this.providers.ordered(e)){for(let n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(let n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;let t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:Wl.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Wl.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Wl.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(78).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};CL.DEFAULT_DELAY=120;function aye(i,e){switch(e.triggerKind){case Wl.Invoke:return e;case Wl.ContentChange:return i;case Wl.TriggerCharacter:default:return e}}var lye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},eS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qr=ge,cye=mn("parameter-hints-next",_.chevronDown,m("parameterHintsNextIcon","Icon for show next parameter hint.")),dye=mn("parameter-hints-previous",_.chevronUp,m("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),yL=class ele extends J{constructor(e,t,n,o,r){super(),this.editor=e,this.renderDisposeables=this._register(new ne),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Ld({editor:e},o,n)),this.model=this._register(new CL(e,r.signatureHelpProvider)),this.keyVisible=Op.Visible.bindTo(t),this.keyMultipleSignatures=Op.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(s=>{s?(this.show(),this.render(s)):this.hide()}))}createParameterHintDOMNodes(){let e=qr(".editor-widget.parameter-hints-widget"),t=ae(e,qr(".phwrapper"));t.tabIndex=-1;let n=ae(t,qr(".controls")),o=ae(n,qr(".button"+zt.asCSSSelector(dye))),r=ae(n,qr(".overloads")),s=ae(n,qr(".button"+zt.asCSSSelector(cye)));this._register(le(o,"click",u=>{ii.stop(u),this.previous()})),this._register(le(s,"click",u=>{ii.stop(u),this.next()}));let a=qr(".body"),l=new ap(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());let c=ae(a,qr(".signature")),d=ae(a,qr(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:r,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(u=>{this.visible&&this.editor.layoutContentWidget(this)}));let h=()=>{if(!this.domNodes)return;let u=this.editor.getOption(46);this.domNodes.element.style.fontSize=`${u.fontSize}px`,this.domNodes.element.style.lineHeight=`${u.lineHeight/u.fontSize}`};h(),this._register(Z.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(u=>u.hasChanged(46)).on(h,null)),this._register(this.editor.onDidLayoutChange(u=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;let n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";let o=e.signatures[e.activeSignature];if(!o)return;let r=ae(this.domNodes.signature,qr(".code")),s=this.editor.getOption(46);r.style.fontSize=`${s.fontSize}px`,r.style.fontFamily=s.fontFamily;let a=o.parameters.length>0,l=(t=o.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(r,o,l);else{let h=ae(r,qr("span"));h.textContent=o.label}let c=o.parameters[l];if(c!=null&&c.documentation){let h=qr("span.documentation");if(typeof c.documentation=="string")h.textContent=c.documentation;else{let u=this.renderMarkdownDocs(c.documentation);h.appendChild(u.element)}ae(this.domNodes.docs,qr("p",{},h))}if(o.documentation!==void 0)if(typeof o.documentation=="string")ae(this.domNodes.docs,qr("p",{},o.documentation));else{let h=this.renderMarkdownDocs(o.documentation);ae(this.domNodes.docs,h.element)}let d=this.hasDocs(o,c);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,c){let h="",u=o.parameters[l];Array.isArray(u.label)?h=o.label.substring(u.label[0],u.label[1]):h=u.label,u.documentation&&(h+=typeof u.documentation=="string"?`, ${u.documentation}`:`, ${u.documentation.value}`),o.documentation&&(h+=typeof o.documentation=="string"?`, ${o.documentation}`:`, ${o.documentation.value}`),this.announcedLabel!==h&&(co(m("hint","{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){let t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&Zv(t.documentation).length>0||t&&typeof t.documentation=="object"&&Zv(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&Zv(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&Zv(e.documentation.value).length>0)}renderParameters(e,t,n){let[o,r]=this.getParameterLabelOffsets(t,n),s=document.createElement("span");s.textContent=t.label.substring(0,o);let a=document.createElement("span");a.textContent=t.label.substring(o,r),a.className="parameter active";let l=document.createElement("span");l.textContent=t.label.substring(r),ae(e,s,a,l)}getParameterLabelOffsets(e,t){let n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){let o=new RegExp(`(\\W|^)${cs(n.label)}(?=\\W|$)`,"g");o.test(e.label);let r=o.lastIndex-n.label.length;return r>=0?[r,o.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return ele.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;let e=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=e;let t=this.domNodes.element.getElementsByClassName("phwrapper");t.length&&(t[0].style.maxHeight=e)}};yL.ID="editor.widget.parameterHintsWidget";yL=lye([eS(1,Ze),eS(2,jr),eS(3,ki),eS(4,Te)],yL);var hye=P("editorHoverWidget.highlightForeground",{dark:la,light:la,hcDark:la,hcLight:la},m("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));xi((i,e)=>{let t=i.getColor(LY);if(t){let c=Io(i.type)?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${c}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}let n=i.getColor(np);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);let o=i.getColor(PM);o&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${o}; }`);let r=i.getColor(OM);r&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${r}; }`);let s=i.getColor(EY);s&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${s}; }`);let a=i.getColor(qoe);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);let l=i.getColor(hye);l&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${l}}`)});var uye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},gye=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Hp=class tle extends J{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(yL,this.editor))}static get(e){return e.getContribution(tle.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};Hp.ID="editor.controller.parameterHints";Hp=uye([gye(1,tt)],Hp);var YH=class extends Ie{constructor(){super({id:"editor.action.triggerParameterHints",label:m("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:B.hasSignatureHelpProvider,kbOpts:{kbExpr:B.editorTextFocus,primary:3082,weight:100}})}run(e,t){let n=Hp.get(t);n&&n.trigger({triggerKind:Wl.Invoke})}};Wt(Hp.ID,Hp);fe(YH);var FJ=100+75,BJ=$n.bindToContribution(Hp.get);pe(new BJ({id:"closeParameterHints",precondition:Op.Visible,handler:i=>i.cancel(),kbOpts:{weight:FJ,kbExpr:B.focus,primary:9,secondary:[1033]}}));pe(new BJ({id:"showPrevParameterHint",precondition:we.and(Op.Visible,Op.MultipleSignatures),handler:i=>i.previous(),kbOpts:{weight:FJ,kbExpr:B.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));pe(new BJ({id:"showNextParameterHint",precondition:we.and(Op.Visible,Op.MultipleSignatures),handler:i=>i.next(),kbOpts:{weight:FJ,kbExpr:B.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var PJ=ze("textResourceConfigurationService"),ile=ze("textResourcePropertiesService"),pye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},OR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},_N=new Le("renameInputVisible",!1,m("renameInputVisible","Whether the rename input widget is visible")),JH=class{constructor(i,e,t,n,o){this._editor=i,this._acceptKeybindings=e,this._themeService=t,this._keybindingService=n,this._disposables=new ne,this.allowEditorOverflow=!0,this._visibleContextKey=_N.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(46)&&this._updateFont()})),this._disposables.add(t.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",m("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);let i=()=>{var e,t;let[n,o]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(n),this._label.innerText=m({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(e=this._keybindingService.lookupKeybinding(n))===null||e===void 0?void 0:e.getLabel(),(t=this._keybindingService.lookupKeybinding(o))===null||t===void 0?void 0:t.getLabel())};i(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(i)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(i){var e,t,n,o;if(!this._input||!this._domNode)return;let r=i.getColor(Ua);this._domNode.style.backgroundColor=String((e=i.getColor(pn))!==null&&e!==void 0?e:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.color=String((t=i.getColor(WM))!==null&&t!==void 0?t:""),this._input.style.backgroundColor=String((n=i.getColor(HM))!==null&&n!==void 0?n:"");let s=i.getColor(zM);this._input.style.borderWidth=s?"1px":"0px",this._input.style.borderStyle=s?"solid":"none",this._input.style.borderColor=(o=s?.toString())!==null&&o!==void 0?o:"none"}_updateFont(){if(!this._input||!this._label)return;let i=this._editor.getOption(46);this._input.style.fontFamily=i.fontFamily,this._input.style.fontWeight=i.fontWeight,this._input.style.fontSize=`${i.fontSize}px`,this._label.style.fontSize=`${i.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(i){i||this.cancelInput(!0)}acceptInput(i){var e;(e=this._currentAcceptInput)===null||e===void 0||e.call(this,i)}cancelInput(i){var e;(e=this._currentCancelInput)===null||e===void 0||e.call(this,i)}getInput(i,e,t,n,o,r){this._domNode.classList.toggle("preview",o),this._position=new q(i.startLineNumber,i.startColumn),this._input.value=e,this._input.setAttribute("selectionStart",t.toString()),this._input.setAttribute("selectionEnd",n.toString()),this._input.size=Math.max((i.endColumn-i.startColumn)*1.1,20);let s=new ne;return new Promise(a=>{this._currentCancelInput=l=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,a(l),!0),this._currentAcceptInput=l=>{if(this._input.value.trim().length===0||this._input.value===e){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,a({newName:this._input.value,wantsPreview:o&&l})},s.add(r.onCancellationRequested(()=>this.cancelInput(!0))),s.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{s.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};JH=pye([OR(2,mi),OR(3,An),OR(4,Ze)],JH);var mye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Mu=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Og=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},_w=class{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return Og(this,void 0,void 0,function*(){let t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){let o=this._providers[this._providerRenameIdx];if(!o.resolveRenameLocation)break;let r=yield o.resolveRenameLocation(this.model,this.position,e);if(r){if(r.rejectReason){t.push(r.rejectReason);continue}return r}}let n=this.model.getWordAtPosition(this.position);return n?{range:new E(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:E.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return Og(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,o){return Og(this,void 0,void 0,function*(){let r=this._providers[t];if(!r)return{edits:[],rejectReason:n.join(`
`)};let s=yield r.provideRenameEdits(this.model,this.position,e,o);if(s){if(s.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(s.rejectReason),o)}else return this._provideRenameEdits(e,t+1,n.concat(m("no result","No result.")),o);return s})}};function fye(i,e,t,n){return Og(this,void 0,void 0,function*(){let o=new _w(e,t,i),r=yield o.resolveRenameLocation(et.None);return r!=null&&r.rejectReason?{edits:[],rejectReason:r.rejectReason}:o.provideRenameEdits(n,et.None)})}var Wp=class nle{constructor(e,t,n,o,r,s,a,l){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=o,this._progressService=r,this._logService=s,this._configService=a,this._languageFeaturesService=l,this._disposableStore=new ne,this._cts=new po,this._renameInputField=this._disposableStore.add(new Hl(()=>this._disposableStore.add(this._instaService.createInstance(JH,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(nle.ID)}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return Og(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;let n=this.editor.getPosition(),o=new _w(this.editor.getModel(),n,this._languageFeaturesService.renameProvider);if(!o.hasProvider())return;this._cts=new Ed(this.editor,5);let r;try{let u=o.resolveRenameLocation(this._cts.token);this._progressService.showWhile(u,250),r=yield u}catch(u){(e=Wr.get(this.editor))===null||e===void 0||e.showMessage(u||m("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n);return}if(!r)return;if(r.rejectReason){(t=Wr.get(this.editor))===null||t===void 0||t.showMessage(r.rejectReason,n);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new Ed(this.editor,5,r.range);let s=this.editor.getSelection(),a=0,l=r.text.length;!E.isEmpty(s)&&!E.spansMultipleLines(s)&&E.containsRange(r.range,s)&&(a=Math.max(0,s.startColumn-r.range.startColumn),l=Math.min(r.range.endColumn,s.endColumn)-r.range.startColumn);let c=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),d=yield this._renameInputField.value.getInput(r.range,r.text,a,l,c,this._cts.token);if(typeof d=="boolean"){d&&this.editor.focus();return}this.editor.focus();let h=fY(o.provideRenameEdits(d.newName,this._cts.token),this._cts.token).then(u=>Og(this,void 0,void 0,function*(){if(!(!u||!this.editor.hasModel())){if(u.rejectReason){this._notificationService.info(u.rejectReason);return}this.editor.setSelection(E.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(kd.convert(u),{editor:this.editor,showPreview:d.wantsPreview,label:m("label","Renaming '{0}' to '{1}'",r?.text,d.newName),code:"undoredo.rename",quotableLabel:m("quotableLabel","Renaming {0} to {1}",r?.text,d.newName),respectAutoSaveConfig:!0}).then(g=>{g.ariaSummary&&co(m("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",r.text,d.newName,g.ariaSummary))}).catch(g=>{this._notificationService.error(m("rename.failedApply","Rename failed to apply edits")),this._logService.error(g)})}}),u=>{this._notificationService.error(m("rename.failed","Rename failed to compute edits")),this._logService.error(u)});return this._progressService.showWhile(h,250),h})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};Wp.ID="editor.contrib.renameController";Wp=mye([Mu(1,tt),Mu(2,nn),Mu(3,rm),Mu(4,bu),Mu(5,no),Mu(6,PJ),Mu(7,Te)],Wp);var XH=class extends Ie{constructor(){super({id:"editor.action.rename",label:m("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:we.and(B.writable,B.hasRenameProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){let n=e.get(Ft),[o,r]=Array.isArray(t)&&t||[void 0,void 0];return $.isUri(o)&&q.isIPosition(r)?n.openCodeEditor({resource:o},n.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(r),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},Ye):super.runCommand(e,t)}run(e,t){let n=Wp.get(t);return n?n.run():Promise.resolve()}};Wt(Wp.ID,Wp);fe(XH);var OJ=$n.bindToContribution(Wp.get);pe(new OJ({id:"acceptRenameInput",precondition:_N,handler:i=>i.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:B.focus,primary:3}}));pe(new OJ({id:"acceptRenameInputWithPreview",precondition:we.and(_N,we.has("config.editor.rename.enablePreview")),handler:i=>i.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:B.focus,primary:1024+3}}));pe(new OJ({id:"cancelRenameInput",precondition:_N,handler:i=>i.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:B.focus,primary:9,secondary:[1033]}}));mc("_executeDocumentRenameProvider",function(i,e,t,...n){let[o]=n;ai(typeof o=="string");let{renameProvider:r}=i.get(Te);return fye(r,e,t,o)});mc("_executePrepareRename",function(i,e,t){return Og(this,void 0,void 0,function*(){let{renameProvider:n}=i.get(Te),o=yield new _w(e,t,n).resolveRenameLocation(et.None);if(o!=null&&o.rejectReason)throw new Error(o.rejectReason);return o})});oi.as(Sa.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:m("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var _ye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},vye=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},vte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},HR,vw=class extends J{constructor(i,e){super(),this._sessionStore=new ne,this._ranges=[],this._rangesVersionId=0,this._editor=i,this._languageFeaturesService=e,this.stickyScrollWidget=new ZH(this._editor),this._register(this._editor.onDidChangeConfiguration(t=>{t.hasChanged(34)&&this.onConfigurationChange()})),this._updateSoon=this._register(new jt(()=>this._update(!0),50)),this.onConfigurationChange()}onConfigurationChange(){if(this._editor.getOption(34).stickyScroll.enabled===!1){this.stickyScrollWidget.emptyRootNode(),this._editor.removeOverlayWidget(this.stickyScrollWidget),this._sessionStore.clear();return}else this._editor.addOverlayWidget(this.stickyScrollWidget),this._sessionStore.add(this._editor.onDidChangeModel(()=>this._update(!0))),this._sessionStore.add(this._editor.onDidScrollChange(()=>this._update(!1))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this._update(!0))),this._sessionStore.add(this._editor.onDidChangeModelTokens(i=>this._onTokensChange(i))),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this._update(!0))),this._update(!0)}_needsUpdate(i){let e=this.stickyScrollWidget.getCurrentLines();for(let t of e)for(let n of i.ranges)if(t>=n.fromLineNumber&&t<=n.toLineNumber)return!0;return!1}_onTokensChange(i){this._needsUpdate(i)&&this._update(!1)}_update(i=!1){var e,t;return vte(this,void 0,void 0,function*(){i&&((e=this._cts)===null||e===void 0||e.dispose(!0),this._cts=new po,yield this._updateOutlineModel(this._cts.token));let n=(t=this._editor._getViewModel())===null||t===void 0?void 0:t.getHiddenAreas();if(n)for(let o of n)this._ranges=this._ranges.filter(r=>!(r[0]>=o.startLineNumber&&r[1]<=o.endLineNumber+1));this._renderStickyScroll()})}_findLineRanges(i,e){if(i!=null&&i.children.size){let t=!1;for(let n of i?.children.values()){let o=n.symbol.kind;(o===4||o===8||o===11||o===10||o===5||o===1)&&(t=!0,this._findLineRanges(n,e+1))}t||this._addOutlineRanges(i,e)}else this._addOutlineRanges(i,e)}_addOutlineRanges(i,e){let t=0,n=0;for(;i;){let o=i.symbol.kind;if((o===4||o===8||o===11||o===10||o===5||o===1)&&(t=i?.symbol.range.startLineNumber,n=i?.symbol.range.endLineNumber,this._ranges.push([t,n,e]),e--),i.parent instanceof m0)i=i.parent;else break}}_updateOutlineModel(i){return vte(this,void 0,void 0,function*(){if(this._editor.hasModel()){let e=this._editor.getModel(),t=e.getVersionId(),n=yield KE.create(this._languageFeaturesService.documentSymbolProvider,e,i);if(i.isCancellationRequested)return;this._ranges=[],this._rangesVersionId=t;for(let o of n.children.values()){if(o instanceof m0){let s=o.symbol.kind;s===4||s===8||s===11||s===10||s===5||s===1?this._findLineRanges(o,1):this._findLineRanges(o,0)}this._ranges=this._ranges.sort(function(s,a){return s[0]!==a[0]?s[0]-a[0]:s[1]!==a[1]?a[1]-s[1]:s[2]-a[2]});let r=[];for(let[s,a]of this._ranges.entries()){let[l,c,d]=a;r[0]===l&&r[1]===c?this._ranges.splice(s,1):r=a}}}})}_renderStickyScroll(){if(!this._editor.hasModel())return;let i=this._editor.getOption(61),e=this._editor.getModel();if(this._rangesVersionId!==e.getVersionId())return;let t=this._editor.getScrollTop();this.stickyScrollWidget.emptyRootNode();let n=new Set;for(let[o,r]of this._ranges.entries()){let[s,a,l]=r;if(a-s>0&&e.getLineContent(s)!==""){let c=(l-1)*i,d=l*i,h=this._editor.getBottomForLineNumber(s)-t,u=this._editor.getTopForLineNumber(a)-t,g=this._editor.getBottomForLineNumber(a)-t;if(n.has(s))this._ranges.splice(o,1);else if(c>=u-1&&c<g-2){n.add(s),this.stickyScrollWidget.pushCodeLine(new SL(s,l,this._editor,-1,g-d));break}else d>h&&d<g-1&&(n.add(s),this.stickyScrollWidget.pushCodeLine(new SL(s,l,this._editor,0,0)))}}this.stickyScrollWidget.updateRootNode()}dispose(){super.dispose(),this._sessionStore.dispose()}};vw.ID="store.contrib.stickyScrollController";vw=_ye([vye(1,Te)],vw);var Ate=(HR=window.trustedTypes)===null||HR===void 0?void 0:HR.createPolicy("stickyScrollViewLayer",{createHTML:i=>i}),SL=class{constructor(e,t,n,o,r){this._lineNumber=e,this._depth=t,this._editor=n,this._zIndex=o,this._relativePosition=r,this.effectiveLineHeight=0,this.effectiveLineHeight=this._editor.getOption(61)+this._relativePosition}get lineNumber(){return this._lineNumber}getDomNode(){let e=document.createElement("div"),t=this._editor._getViewModel(),n=t.coordinatesConverter.convertModelPositionToViewPosition(new q(this._lineNumber,1)).lineNumber,o=t.getViewLineRenderingData(n),r;try{r=Aa.filter(o.inlineDecorations,n,o.minColumn,o.maxColumn)}catch{r=[]}let s=new Xl(!0,!0,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,0,o.tokens,r,o.tabSize,o.startVisibleColumn,1,1,1,100,"none",!0,!0,null),a=jh(400);OC(s,a);let l;Ate?l=Ate.createHTML(a.build()):l=a.build();let c=document.createElement("span");c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",c.style.overflow="hidden",c.style.whiteSpace="nowrap",c.style.display="inline-block",c.style.lineHeight=this._editor.getOption(61).toString()+"px",c.innerHTML=l;let d=document.createElement("span");d.style.width=this._editor.getLayoutInfo().contentLeft.toString()+"px",d.style.backgroundColor="var(--vscode-editorStickyScroll-background)",d.style.color="var(--vscode-editorLineNumber-foreground)",d.style.display="inline-block",d.style.lineHeight=this._editor.getOption(61).toString()+"px";let h=document.createElement("span");return h.innerText=this._lineNumber.toString(),h.style.paddingLeft=this._editor.getLayoutInfo().lineNumbersLeft.toString()+"px",h.style.width=this._editor.getLayoutInfo().lineNumbersWidth.toString()+"px",h.style.backgroundColor="var(--vscode-editorStickyScroll-background)",h.style.textAlign="right",h.style.float="left",h.style.lineHeight=this._editor.getOption(61).toString()+"px",d.appendChild(h),e.onclick=u=>{u.stopPropagation(),u.preventDefault(),this._editor.revealPosition({lineNumber:this._lineNumber-this._depth+1,column:1})},e.onmouseover=u=>{h.style.background="var(--vscode-editorStickyScrollHover-background)",c.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",d.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",e.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",h.style.cursor="pointer",c.style.cursor="pointer",e.style.cursor="pointer",d.style.cursor="pointer"},e.onmouseleave=u=>{h.style.background="var(--vscode-editorStickyScroll-background)",c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",d.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.backgroundColor="var(--vscode-editorStickyScroll-background)"},this._editor.applyFontInfo(c),this._editor.applyFontInfo(h),e.appendChild(d),e.appendChild(c),e.style.zIndex=this._zIndex.toString(),e.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.width="100%",e.style.lineHeight=this._editor.getOption(61).toString()+"px",e.style.height=this._editor.getOption(61).toString()+"px",this._relativePosition&&(e.style.position="relative",e.style.top=this._relativePosition+"px",e.style.width="100%"),e}},ZH=class{constructor(e){this._editor=e,this.arrayOfCodeLines=[],this.rootDomNode=document.createElement("div"),this.rootDomNode=document.createElement("div"),this.rootDomNode.style.width="100%",this.rootDomNode.style.boxShadow="var(--vscode-scrollbar-shadow) 0 6px 6px -6px"}getCurrentLines(){let e=[];for(let t of this.arrayOfCodeLines)e.push(t.lineNumber);return e}pushCodeLine(e){this.arrayOfCodeLines.push(e)}updateRootNode(){let e=0;for(let t of this.arrayOfCodeLines)e+=t.effectiveLineHeight,this.rootDomNode.appendChild(t.getDomNode());this.rootDomNode.style.height=e.toString()+"px"}emptyRootNode(){this.arrayOfCodeLines.length=0,Sn(this.rootDomNode)}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this.rootDomNode.style.zIndex="2",this.rootDomNode.style.backgroundColor="var(--vscode-editorStickyScroll-background)",this.rootDomNode}getPosition(){return{preference:null}}};Wt(vw.ID,vw);var eW=class{provideSelectionRanges(e,t){let n=[];for(let o of t){let r=[];n.push(r),this._addInWordRanges(r,e,o),this._addWordRanges(r,e,o),this._addWhitespaceLine(r,e,o),r.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){let o=t.getWordAtPosition(n);if(!o)return;let{word:r,startColumn:s}=o,a=n.column-s,l=a,c=a,d=0;for(;l>=0;l--){let h=r.charCodeAt(l);if(l!==a&&(h===95||h===45)||hh(h)&&Dl(d))break;d=h}for(l+=1;c<r.length;c++){let h=r.charCodeAt(c);if(Dl(h)&&hh(d)||h===95||h===45)break;d=h}l<c&&e.push({range:new E(n.lineNumber,s+l,n.lineNumber,s+c)})}_addWordRanges(e,t,n){let o=t.getWordAtPosition(n);o&&e.push({range:new E(n.lineNumber,o.startColumn,n.lineNumber,o.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new E(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}},Aye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},bye=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},vN=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},tW=class i{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;let n=new i(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}},C0=class ole{constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}static get(e){return e.getContribution(ole.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return vN(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;let t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||(yield rle(this._languageFeaturesService.selectionRangeProvider,n,t.map(r=>r.getPosition()),this._editor.getOption(104),et.None).then(r=>{var s;if(!(!Dn(r)||r.length!==t.length)&&!(!this._editor.hasModel()||!Zn(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<r.length;a++)r[a]=r[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),r[a].unshift(t[a]);this._state=r.map(a=>new tW(0,a)),(s=this._selectionListener)===null||s===void 0||s.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(r=>r.mov(e));let o=this._state.map(r=>Se.fromPositions(r.ranges[r.index].getStartPosition(),r.ranges[r.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(o)}finally{this._ignoreSelection=!1}})}};C0.ID="editor.contrib.smartSelectController";C0=Aye([bye(1,Te)],C0);var DL=class extends Ie{constructor(e,t){super(t),this._forward=e}run(e,t){return vN(this,void 0,void 0,function*(){let n=C0.get(t);n&&(yield n.run(this._forward))})}},iW=class extends DL{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:m("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}};ft.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var nW=class extends DL{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:m("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:z.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}};Wt(C0.ID,C0);fe(iW);fe(nW);function rle(i,e,t,n,o){return vN(this,void 0,void 0,function*(){let r=i.all(e).concat(new eW);r.length===1&&r.unshift(new f0);let s=[],a=[];for(let l of r)s.push(Promise.resolve(l.provideSelectionRanges(e,t,o)).then(c=>{if(Dn(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(let h of c[d])E.isIRange(h.range)&&E.containsPosition(h.range,t[d])&&a[d].push(E.lift(h.range))}},Fn));return yield Promise.all(s),a.map(l=>{if(l.length===0)return[];l.sort((u,g)=>q.isBefore(u.getStartPosition(),g.getStartPosition())?1:q.isBefore(g.getStartPosition(),u.getStartPosition())||q.isBefore(u.getEndPosition(),g.getEndPosition())?-1:q.isBefore(g.getEndPosition(),u.getEndPosition())?1:0);let c=[],d;for(let u of l)(!d||E.containsRange(u,d)&&!E.equalsRange(u,d))&&(c.push(u),d=u);if(!n.selectLeadingAndTrailingWhitespace)return c;let h=[c[0]];for(let u=1;u<c.length;u++){let g=c[u-1],p=c[u];if(p.startLineNumber!==g.startLineNumber||p.endLineNumber!==g.endLineNumber){let f=new E(g.startLineNumber,e.getLineFirstNonWhitespaceColumn(g.startLineNumber),g.endLineNumber,e.getLineLastNonWhitespaceColumn(g.endLineNumber));f.containsRange(g)&&!f.equalsRange(g)&&p.containsRange(f)&&!p.equalsRange(f)&&h.push(f);let v=new E(g.startLineNumber,1,g.endLineNumber,e.getLineMaxColumn(g.endLineNumber));v.containsRange(g)&&!v.equalsRange(f)&&p.containsRange(v)&&!p.equalsRange(v)&&h.push(v)}h.push(p)}return h})})}ft.registerCommand("_executeSelectionRangeProvider",function(i,...e){return vN(this,void 0,void 0,function*(){let[t,n]=e;ai($.isUri(t));let o=i.get(Te).selectionRangeProvider,r=yield i.get(io).createModelReference(t);try{return rle(o,r.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0},et.None)}finally{r.dispose()}})});var oW;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(oW||(oW={}));var rW;(function(i){i[i.Invoke=1]="Invoke",i[i.Auto=2]="Auto"})(rW||(rW={}));var xL;(function(i){i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(xL||(xL={}));var sW;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(sW||(sW={}));var aW;(function(i){i[i.Deprecated=1]="Deprecated"})(aW||(aW={}));var lW;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(lW||(lW={}));var cW;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(cW||(cW={}));var dW;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(dW||(dW={}));var hW;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(hW||(hW={}));var uW;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(uW||(uW={}));var gW;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(gW||(gW={}));var pW;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.autoClosingBrackets=5]="autoClosingBrackets",i[i.autoClosingDelete=6]="autoClosingDelete",i[i.autoClosingOvertype=7]="autoClosingOvertype",i[i.autoClosingQuotes=8]="autoClosingQuotes",i[i.autoIndent=9]="autoIndent",i[i.automaticLayout=10]="automaticLayout",i[i.autoSurround=11]="autoSurround",i[i.bracketPairColorization=12]="bracketPairColorization",i[i.guides=13]="guides",i[i.codeLens=14]="codeLens",i[i.codeLensFontFamily=15]="codeLensFontFamily",i[i.codeLensFontSize=16]="codeLensFontSize",i[i.colorDecorators=17]="colorDecorators",i[i.columnSelection=18]="columnSelection",i[i.comments=19]="comments",i[i.contextmenu=20]="contextmenu",i[i.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",i[i.cursorBlinking=22]="cursorBlinking",i[i.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",i[i.cursorStyle=24]="cursorStyle",i[i.cursorSurroundingLines=25]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",i[i.cursorWidth=27]="cursorWidth",i[i.disableLayerHinting=28]="disableLayerHinting",i[i.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",i[i.domReadOnly=30]="domReadOnly",i[i.dragAndDrop=31]="dragAndDrop",i[i.dropIntoEditor=32]="dropIntoEditor",i[i.emptySelectionClipboard=33]="emptySelectionClipboard",i[i.experimental=34]="experimental",i[i.extraEditorClassName=35]="extraEditorClassName",i[i.fastScrollSensitivity=36]="fastScrollSensitivity",i[i.find=37]="find",i[i.fixedOverflowWidgets=38]="fixedOverflowWidgets",i[i.folding=39]="folding",i[i.foldingStrategy=40]="foldingStrategy",i[i.foldingHighlight=41]="foldingHighlight",i[i.foldingImportsByDefault=42]="foldingImportsByDefault",i[i.foldingMaximumRegions=43]="foldingMaximumRegions",i[i.unfoldOnClickAfterEndOfLine=44]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=45]="fontFamily",i[i.fontInfo=46]="fontInfo",i[i.fontLigatures=47]="fontLigatures",i[i.fontSize=48]="fontSize",i[i.fontWeight=49]="fontWeight",i[i.formatOnPaste=50]="formatOnPaste",i[i.formatOnType=51]="formatOnType",i[i.glyphMargin=52]="glyphMargin",i[i.gotoLocation=53]="gotoLocation",i[i.hideCursorInOverviewRuler=54]="hideCursorInOverviewRuler",i[i.hover=55]="hover",i[i.inDiffEditor=56]="inDiffEditor",i[i.inlineSuggest=57]="inlineSuggest",i[i.letterSpacing=58]="letterSpacing",i[i.lightbulb=59]="lightbulb",i[i.lineDecorationsWidth=60]="lineDecorationsWidth",i[i.lineHeight=61]="lineHeight",i[i.lineNumbers=62]="lineNumbers",i[i.lineNumbersMinChars=63]="lineNumbersMinChars",i[i.linkedEditing=64]="linkedEditing",i[i.links=65]="links",i[i.matchBrackets=66]="matchBrackets",i[i.minimap=67]="minimap",i[i.mouseStyle=68]="mouseStyle",i[i.mouseWheelScrollSensitivity=69]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=70]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=71]="multiCursorMergeOverlapping",i[i.multiCursorModifier=72]="multiCursorModifier",i[i.multiCursorPaste=73]="multiCursorPaste",i[i.occurrencesHighlight=74]="occurrencesHighlight",i[i.overviewRulerBorder=75]="overviewRulerBorder",i[i.overviewRulerLanes=76]="overviewRulerLanes",i[i.padding=77]="padding",i[i.parameterHints=78]="parameterHints",i[i.peekWidgetDefaultFocus=79]="peekWidgetDefaultFocus",i[i.definitionLinkOpensInPeek=80]="definitionLinkOpensInPeek",i[i.quickSuggestions=81]="quickSuggestions",i[i.quickSuggestionsDelay=82]="quickSuggestionsDelay",i[i.readOnly=83]="readOnly",i[i.renameOnType=84]="renameOnType",i[i.renderControlCharacters=85]="renderControlCharacters",i[i.renderFinalNewline=86]="renderFinalNewline",i[i.renderLineHighlight=87]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=88]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=89]="renderValidationDecorations",i[i.renderWhitespace=90]="renderWhitespace",i[i.revealHorizontalRightPadding=91]="revealHorizontalRightPadding",i[i.roundedSelection=92]="roundedSelection",i[i.rulers=93]="rulers",i[i.scrollbar=94]="scrollbar",i[i.scrollBeyondLastColumn=95]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=96]="scrollBeyondLastLine",i[i.scrollPredominantAxis=97]="scrollPredominantAxis",i[i.selectionClipboard=98]="selectionClipboard",i[i.selectionHighlight=99]="selectionHighlight",i[i.selectOnLineNumbers=100]="selectOnLineNumbers",i[i.showFoldingControls=101]="showFoldingControls",i[i.showUnused=102]="showUnused",i[i.snippetSuggestions=103]="snippetSuggestions",i[i.smartSelect=104]="smartSelect",i[i.smoothScrolling=105]="smoothScrolling",i[i.stickyTabStops=106]="stickyTabStops",i[i.stopRenderingLineAfter=107]="stopRenderingLineAfter",i[i.suggest=108]="suggest",i[i.suggestFontSize=109]="suggestFontSize",i[i.suggestLineHeight=110]="suggestLineHeight",i[i.suggestOnTriggerCharacters=111]="suggestOnTriggerCharacters",i[i.suggestSelection=112]="suggestSelection",i[i.tabCompletion=113]="tabCompletion",i[i.tabIndex=114]="tabIndex",i[i.unicodeHighlighting=115]="unicodeHighlighting",i[i.unusualLineTerminators=116]="unusualLineTerminators",i[i.useShadowDOM=117]="useShadowDOM",i[i.useTabStops=118]="useTabStops",i[i.wordSeparators=119]="wordSeparators",i[i.wordWrap=120]="wordWrap",i[i.wordWrapBreakAfterCharacters=121]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=122]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=123]="wordWrapColumn",i[i.wordWrapOverride1=124]="wordWrapOverride1",i[i.wordWrapOverride2=125]="wordWrapOverride2",i[i.wrappingIndent=126]="wrappingIndent",i[i.wrappingStrategy=127]="wrappingStrategy",i[i.showDeprecated=128]="showDeprecated",i[i.inlayHints=129]="inlayHints",i[i.editorClassName=130]="editorClassName",i[i.pixelRatio=131]="pixelRatio",i[i.tabFocusMode=132]="tabFocusMode",i[i.layoutInfo=133]="layoutInfo",i[i.wrappingInfo=134]="wrappingInfo"})(pW||(pW={}));var mW;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(mW||(mW={}));var fW;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(fW||(fW={}));var _W;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(_W||(_W={}));var vW;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(vW||(vW={}));var AW;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(AW||(AW={}));var bW;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(bW||(bW={}));var wW;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.NumLock=78]="NumLock",i[i.ScrollLock=79]="ScrollLock",i[i.Semicolon=80]="Semicolon",i[i.Equal=81]="Equal",i[i.Comma=82]="Comma",i[i.Minus=83]="Minus",i[i.Period=84]="Period",i[i.Slash=85]="Slash",i[i.Backquote=86]="Backquote",i[i.BracketLeft=87]="BracketLeft",i[i.Backslash=88]="Backslash",i[i.BracketRight=89]="BracketRight",i[i.Quote=90]="Quote",i[i.OEM_8=91]="OEM_8",i[i.IntlBackslash=92]="IntlBackslash",i[i.Numpad0=93]="Numpad0",i[i.Numpad1=94]="Numpad1",i[i.Numpad2=95]="Numpad2",i[i.Numpad3=96]="Numpad3",i[i.Numpad4=97]="Numpad4",i[i.Numpad5=98]="Numpad5",i[i.Numpad6=99]="Numpad6",i[i.Numpad7=100]="Numpad7",i[i.Numpad8=101]="Numpad8",i[i.Numpad9=102]="Numpad9",i[i.NumpadMultiply=103]="NumpadMultiply",i[i.NumpadAdd=104]="NumpadAdd",i[i.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=106]="NumpadSubtract",i[i.NumpadDecimal=107]="NumpadDecimal",i[i.NumpadDivide=108]="NumpadDivide",i[i.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",i[i.ABNT_C1=110]="ABNT_C1",i[i.ABNT_C2=111]="ABNT_C2",i[i.AudioVolumeMute=112]="AudioVolumeMute",i[i.AudioVolumeUp=113]="AudioVolumeUp",i[i.AudioVolumeDown=114]="AudioVolumeDown",i[i.BrowserSearch=115]="BrowserSearch",i[i.BrowserHome=116]="BrowserHome",i[i.BrowserBack=117]="BrowserBack",i[i.BrowserForward=118]="BrowserForward",i[i.MediaTrackNext=119]="MediaTrackNext",i[i.MediaTrackPrevious=120]="MediaTrackPrevious",i[i.MediaStop=121]="MediaStop",i[i.MediaPlayPause=122]="MediaPlayPause",i[i.LaunchMediaPlayer=123]="LaunchMediaPlayer",i[i.LaunchMail=124]="LaunchMail",i[i.LaunchApp2=125]="LaunchApp2",i[i.Clear=126]="Clear",i[i.MAX_VALUE=127]="MAX_VALUE"})(wW||(wW={}));var CW;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(CW||(CW={}));var yW;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(yW||(yW={}));var SW;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(SW||(SW={}));var DW;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(DW||(DW={}));var xW;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(xW||(xW={}));var kW;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(kW||(kW={}));var EW;(function(i){i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.None=2]="None",i[i.LeftOfInjectedText=3]="LeftOfInjectedText",i[i.RightOfInjectedText=4]="RightOfInjectedText"})(EW||(EW={}));var LW;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(LW||(LW={}));var IW;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(IW||(IW={}));var TW;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(TW||(TW={}));var MW;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(MW||(MW={}));var NW;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(NW||(NW={}));var RW;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(RW||(RW={}));var FW;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(FW||(FW={}));var BW;(function(i){i[i.Deprecated=1]="Deprecated"})(BW||(BW={}));var PW;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(PW||(PW={}));var OW;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(OW||(OW={}));var HW;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(HW||(HW={}));var WW;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(WW||(WW={}));var HJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Hg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},wye=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},zW=class{constructor(e,t,n,o,r,s){this.range=e,this.insertText=t,this.filterText=n,this.additionalTextEdits=o,this.command=r,this.completion=s}},VW=class extends KF{constructor(i,e,t,n,o,r){super(o.disposable),this.model=i,this.line=e,this.word=t,this.completionModel=n,this._suggestMemoryService=r}canBeReused(i,e,t){return this.model===i&&this.line===e&&this.word.word.length>0&&this.word.startColumn===t.startColumn&&this.word.endColumn<t.endColumn&&this.completionModel.incomplete.size===0}get items(){var i;let e=[],{items:t}=this.completionModel,n=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),o=At.slice(t,n),r=At.slice(t,0,n),s=5;for(let a of At.concat(o,r)){if(a.score===Ja.Default)continue;let l=new E(a.editStart.lineNumber,a.editStart.column,a.editInsertEnd.lineNumber,a.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),c=a.completion.insertTextRules&&a.completion.insertTextRules&xL.InsertAsSnippet?{snippet:a.completion.insertText}:a.completion.insertText;e.push(new zW(l,c,(i=a.filterTextLow)!==null&&i!==void 0?i:a.labelLow,a.completion.additionalTextEdits,a.completion.command,a)),s-->=0&&a.resolve(et.None)}return e}};VW=HJ([Hg(5,mN)],VW);var UW=class{constructor(i,e,t,n){this._getEditorOption=i,this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=n}provideInlineCompletions(i,e,t,n){var o;return wye(this,void 0,void 0,function*(){if(t.selectedSuggestionInfo)return;let r=this._getEditorOption(81,i);if(fh.isAllOff(r))return;i.tokenization.tokenizeIfCheap(e.lineNumber);let s=i.tokenization.getLineTokens(e.lineNumber),a=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(e.column-1-1,0)));if(fh.valueFor(r,a)!=="inline")return;let l=i.getWordAtPosition(e),c;if(l!=null&&l.word||(c=this._getTriggerCharacterInfo(i,e)),!(l!=null&&l.word)&&!c||(l||(l=i.getWordUntilPosition(e)),l.endColumn!==e.column))return;let d,h=i.getValueInRange(new E(e.lineNumber,1,e.lineNumber,e.column));if(!c&&!((o=this._lastResult)===null||o===void 0)&&o.canBeReused(i,e.lineNumber,l)){let u=new cte(h,e.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=u,this._lastResult.acquire(),d=this._lastResult}else{let u=yield CJ(this._languageFeatureService.completionProvider,i,e,new xp(void 0,void 0,c?.providers),c&&{triggerKind:1,triggerCharacter:c.ch},n),g;u.needsClipboard&&(g=yield this._clipboardService.readText());let p=new eL(u.items,e.column,new cte(h,0),_0.None,this._getEditorOption(108,i),this._getEditorOption(103,i),{boostFullMatch:!1,firstMatchCanBeWeak:!1},g);d=new VW(i,e.lineNumber,l,p,u,this._suggestMemoryService)}return this._lastResult=d,d})}handleItemDidShow(i,e){e.completion.resolve(et.None)}freeInlineCompletions(i){i.release()}_getTriggerCharacterInfo(i,e){var t;let n=i.getValueInRange(E.fromPositions({lineNumber:e.lineNumber,column:e.column-1},e)),o=new Set;for(let r of this._languageFeatureService.completionProvider.all(i))!((t=r.triggerCharacters)===null||t===void 0)&&t.includes(n)&&o.add(r);if(o.size!==0)return{providers:o,ch:n}}};UW=HJ([Hg(1,Te),Hg(2,Da),Hg(3,mN)],UW);var kL=class Qm{constructor(e,t,n,o){if(++Qm._counter===1){let r=o.createInstance(UW,(s,a)=>{var l;return((l=n.listCodeEditors().find(c=>c.getModel()===a))!==null&&l!==void 0?l:e).getOption(s)});Qm._disposable=t.inlineCompletionsProvider.register("*",r)}}dispose(){var e;--Qm._counter===0&&((e=Qm._disposable)===null||e===void 0||e.dispose(),Qm._disposable=void 0)}};kL._counter=0;kL=HJ([Hg(1,Te),Hg(2,Ft),Hg(3,tt)],kL);Wt("suggest.inlineCompletionsProvider",kL);var QW=class extends Ie{constructor(){super({id:"editor.action.forceRetokenize",label:m("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;let n=t.getModel();n.tokenization.resetTokenization();let o=new sr(!0);n.tokenization.forceTokenization(n.getLineCount()),o.stop(),console.log(`tokenization took ${o.elapsed()}`)}};fe(QW);var y0=class i extends Ie{constructor(){super({id:i.ID,label:m({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){let n=!tx.getTabFocusMode();tx.setTabFocusMode(n),co(n?m("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):m("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};y0.ID="editor.action.toggleTabFocusMode";fe(y0);var Aw=class{static computeUnicodeHighlights(e,t,n){let o=n?n.startLineNumber:1,r=n?n.endLineNumber:e.getLineCount(),s=new EL(t),a=s.getCandidateCodePoints(),l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${Cye(Array.from(a))}`,"g");let c=new ph(null,l),d=[],h=!1,u,g=0,p=0,f=0;e:for(let v=o,b=r;v<=b;v++){let A=e.getLineContent(v),w=A.length;c.reset(0);do if(u=c.next(A),u){let C=u.index,k=u.index+u[0].length;if(C>0){let M=A.charCodeAt(C-1);En(M)&&C--}if(k+1<w){let M=A.charCodeAt(k-1);En(M)&&k++}let L=A.substring(C,k),S=L_(C+1,dY,A,0),y=s.shouldHighlightNonBasicASCII(L,S?S.word:null);if(y!==0){y===3?g++:y===2?p++:y===1?f++:_M();let M=1e3;if(d.length>=M){h=!0;break e}d.push(new E(v,C+1,v,k+1))}}while(u)}return{ranges:d,hasMore:h,ambiguousCharacterCount:g,invisibleCharacterCount:p,nonBasicAsciiCharacterCount:f}}static computeUnicodeHighlightReason(e,t){let n=new EL(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{let o=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(o),s=nl.getLocales().filter(a=>!nl.getInstance(new Set([...t.allowedLocales,a])).isAmbiguous(o));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:s}}case 1:return{kind:2}}}};function Cye(i,e){return`[${cs(i.map(t=>String.fromCodePoint(t)).join(""))}]`}var EL=class{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=nl.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";let e=new Set;if(this.options.invisibleCharacters)for(let t of Sh.codePoints)bte(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(let t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(let t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){let n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let o=!1,r=!1;if(t)for(let s of t){let a=s.codePointAt(0),l=CM(s);o=o||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Sh.isInvisibleCharacter(a)&&(r=!0)}return!o&&r?0:this.options.invisibleCharacters&&!bte(e)&&Sh.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}};function bte(i){return i===" "||i===`
`||i==="	"}var yye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Sye=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},jW=class extends J{constructor(i,e,t={},n){var o;super(),this._link=e,this._enabled=!0,this.el=ae(i,ge("a.monaco-link",{tabIndex:(o=e.tabIndex)!==null&&o!==void 0?o:0,href:e.href,title:e.title},e.label)),this.el.setAttribute("role","button");let r=this._register(new kt(this.el,"click")),s=this._register(new kt(this.el,"keypress")),a=Z.chain(s.event).map(d=>new ni(d)).filter(d=>d.keyCode===3).event,l=this._register(new kt(this.el,yi.Tap)).event;this._register(to.addTarget(this.el));let c=Z.any(r.event,a,l);this._register(c(d=>{this.enabled&&(ii.stop(d,!0),t!=null&&t.opener?t.opener(this._link.href):n.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(i){i?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=i}};jW=yye([Sye(3,jr)],jW);xi((i,e)=>{let t=i.getColor(PM);t&&e.addRule(`.monaco-link { color: ${t}; }`);let n=i.getColor(OM);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var sle=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},ale=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Dye=26,KW=class extends J{constructor(i,e){super(),this._editor=i,this.instantiationService=e,this.banner=this._register(this.instantiationService.createInstance(qW))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(i){this.banner.show(Object.assign(Object.assign({},i),{onClose:()=>{var e;this.hide(),(e=i.onClose)===null||e===void 0||e.call(i)}})),this._editor.setBanner(this.banner.element,Dye)}};KW=sle([ale(1,tt)],KW);var qW=class extends J{constructor(i){super(),this.instantiationService=i,this.markdownRenderer=this.instantiationService.createInstance(Ld,{}),this.element=ge("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(i){if(i.ariaLabel)return i.ariaLabel;if(typeof i.message=="string")return i.message}getBannerMessage(i){if(typeof i=="string"){let e=ge("span");return e.innerText=i,e}return this.markdownRenderer.render(i).element}clear(){Sn(this.element)}show(i){Sn(this.element);let e=this.getAriaLabel(i);e&&this.element.setAttribute("aria-label",e);let t=ae(this.element,ge("div.icon-container"));t.setAttribute("aria-hidden","true"),i.icon&&t.appendChild(ge(`div${zt.asCSSSelector(i.icon)}`));let n=ae(this.element,ge("div.message-container"));if(n.setAttribute("aria-hidden","true"),n.appendChild(this.getBannerMessage(i.message)),this.messageActionsContainer=ae(this.element,ge("div.message-actions-container")),i.actions)for(let r of i.actions)this._register(this.instantiationService.createInstance(jW,this.messageActionsContainer,Object.assign(Object.assign({},r),{tabIndex:-1}),{}));let o=ae(this.element,ge("div.action-container"));this.actionBar=this._register(new wa(o)),this.actionBar.push(this._register(new ho("banner.close","Close Banner",zt.asClassName(Qre),!0,()=>{typeof i.onClose=="function"&&i.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};qW=sle([ale(0,tt)],qW);var lle=ze("workspaceTrustManagementService"),WJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},i_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},So=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},xye=mn("extensions-warning-message",_.warning,m("warningIcon","Icon shown with a warning message in the extensions editor.")),S0=class extends J{constructor(i,e,t,n){super(),this._editor=i,this._editorWorkerService=e,this._workspaceTrustService=t,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;let r=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount),s;if(o.nonBasicAsciiCharacterCount>=r)s={message:m("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new k0};else if(o.ambiguousCharacterCount>=r)s={message:m("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new uu};else if(o.invisibleCharacterCount>=r)s={message:m("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new x0};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:s.message,icon:xye,actions:[{label:s.command.shortLabel,href:`command:${s.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(n.createInstance(KW,i)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=i.getOption(115),this._register(t.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(i.onDidChangeConfiguration(o=>{o.hasChanged(115)&&(this._options=i.getOption(115),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;let i=kye(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([i.nonBasicASCII,i.ambiguousCharacters,i.invisibleCharacters].every(t=>t===!1))return;let e={nonBasicASCII:i.nonBasicASCII,ambiguousCharacters:i.ambiguousCharacters,invisibleCharacters:i.invisibleCharacters,includeComments:i.includeComments,includeStrings:i.includeStrings,allowedCodePoints:Object.keys(i.allowedCharacters).map(t=>t.codePointAt(0)),allowedLocales:Object.keys(i.allowedLocales).map(t=>t==="_os"?new Intl.NumberFormat().resolvedOptions().locale:t==="_vscode"?_he:t)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new $W(this._editor,e,this._updateState,this._editorWorkerService):this._highlighter=new GW(this._editor,e,this._updateState)}getDecorationInfo(i){return this._highlighter?this._highlighter.getDecorationInfo(i):null}};S0.ID="editor.contrib.unicodeHighlighter";S0=WJ([i_(1,Qr),i_(2,lle),i_(3,tt)],S0);function kye(i,e){return{nonBasicASCII:e.nonBasicASCII===Xr?!i:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Xr?!i:e.includeComments,includeStrings:e.includeStrings===Xr?!i:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}var $W=class extends J{constructor(i,e,t,n){super(),this._editor=i,this._options=e,this._updateState=t,this._editorWorkerService=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new jt(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}let i=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(e=>{if(this._model.isDisposed()||this._model.getVersionId()!==i)return;this._updateState(e);let t=[];if(!e.hasMore)for(let n of e.ranges)t.push({range:n,options:D0.instance.getDecorationFromOptions(this._options)});this._decorations.set(t)})}getDecorationInfo(i){if(!this._decorations.has(i))return null;let e=this._editor.getModel();if(!OY(e,i))return null;let t=e.getValueInRange(i.range);return{reason:cle(t,this._options),inComment:HY(e,i),inString:WY(e,i)}}};$W=WJ([i_(3,Qr)],$W);var GW=class extends J{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new jt(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}let e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(let o of e){let r=Aw.computeUnicodeHighlights(this._model,this._options,o);for(let s of r.ranges)n.ranges.push(s);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||r.hasMore}if(!n.hasMore)for(let o of n.ranges)t.push({range:o,options:D0.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;let t=this._editor.getModel(),n=t.getValueInRange(e.range);return OY(t,e)?{reason:cle(n,this._options),inComment:HY(t,e),inString:WY(t,e)}:null}},YW=class{constructor(i,e,t){this._editor=i,this._languageService=e,this._openerService=t,this.hoverOrdinal=4}computeSync(i,e){if(!this._editor.hasModel()||i.type!==1)return[];let t=this._editor.getModel(),n=this._editor.getContribution(S0.ID);if(!n)return[];let o=[],r=300;for(let s of e){let a=n.getDecorationInfo(s);if(!a)continue;let l=t.getValueInRange(s.range).codePointAt(0),c=wte(l),d;switch(a.reason.kind){case 0:d=m("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",c,wte(a.reason.confusableWith.codePointAt(0)));break;case 1:d=m("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",c);break;case 2:d=m("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",c);break}let h={codePoint:l,reason:a.reason,inComment:a.inComment,inString:a.inString},u=m("unicodeHighlight.adjustSettings","Adjust settings"),g=`command:${bw.ID}?${encodeURIComponent(JSON.stringify(h))}`,p=new Zo("",!0).appendMarkdown(d).appendText(" ").appendLink(g,u);o.push(new ra(this,s.range,[p],r++))}return o}renderHoverParts(i,e){return lae(i,e,this._editor,this._languageService,this._openerService)}};YW=WJ([i_(1,ki),i_(2,jr)],YW);function JW(i){return`U+${i.toString(16).padStart(4,"0")}`}function wte(i){let e=`\`${JW(i)}\``;return Sh.isInvisibleCharacter(i)||(e+=` "${`${Eye(i)}`}"`),e}function Eye(i){return i===96?"`` ` ``":"`"+String.fromCodePoint(i)+"`"}function cle(i,e){return Aw.computeUnicodeHighlightReason(i,e)}var D0=class{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){let n=`${e}${t}`,o=this.map.get(n);return o||(o=rt.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,o)),o}};D0.instance=new D0;var XW=class extends Ie{constructor(){super({id:uu.ID,label:m("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,t,n){return So(this,void 0,void 0,function*(){let o=e?.get(Ot);o&&this.runAction(o)})}runAction(e){return So(this,void 0,void 0,function*(){yield e.updateValue(mr.includeComments,!1,2)})}},ZW=class extends Ie{constructor(){super({id:uu.ID,label:m("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,t,n){return So(this,void 0,void 0,function*(){let o=e?.get(Ot);o&&this.runAction(o)})}runAction(e){return So(this,void 0,void 0,function*(){yield e.updateValue(mr.includeStrings,!1,2)})}},uu=class i extends Ie{constructor(){super({id:i.ID,label:m("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return So(this,void 0,void 0,function*(){let o=e?.get(Ot);o&&this.runAction(o)})}runAction(e){return So(this,void 0,void 0,function*(){yield e.updateValue(mr.ambiguousCharacters,!1,2)})}};uu.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";var x0=class i extends Ie{constructor(){super({id:i.ID,label:m("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return So(this,void 0,void 0,function*(){let o=e?.get(Ot);o&&this.runAction(o)})}runAction(e){return So(this,void 0,void 0,function*(){yield e.updateValue(mr.invisibleCharacters,!1,2)})}};x0.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";var k0=class i extends Ie{constructor(){super({id:i.ID,label:m("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return So(this,void 0,void 0,function*(){let o=e?.get(Ot);o&&this.runAction(o)})}runAction(e){return So(this,void 0,void 0,function*(){yield e.updateValue(mr.nonBasicASCII,!1,2)})}};k0.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";var bw=class i extends Ie{constructor(){super({id:i.ID,label:m("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return So(this,void 0,void 0,function*(){let{codePoint:o,reason:r,inString:s,inComment:a}=n,l=String.fromCodePoint(o),c=e.get(dl),d=e.get(Ot);function h(p){return Sh.isInvisibleCharacter(p)?m("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",JW(p)):m("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${JW(p)} "${l}"`)}let u=[];if(r.kind===0)for(let p of r.notAmbiguousInLocales)u.push({label:m("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',p),run:()=>So(this,void 0,void 0,function*(){Iye(d,[p])})});if(u.push({label:h(o),run:()=>Lye(d,[o])}),a){let p=new XW;u.push({label:p.label,run:()=>So(this,void 0,void 0,function*(){return p.runAction(d)})})}else if(s){let p=new ZW;u.push({label:p.label,run:()=>So(this,void 0,void 0,function*(){return p.runAction(d)})})}if(r.kind===0){let p=new uu;u.push({label:p.label,run:()=>So(this,void 0,void 0,function*(){return p.runAction(d)})})}else if(r.kind===1){let p=new x0;u.push({label:p.label,run:()=>So(this,void 0,void 0,function*(){return p.runAction(d)})})}else if(r.kind===2){let p=new k0;u.push({label:p.label,run:()=>So(this,void 0,void 0,function*(){return p.runAction(d)})})}else Tye(r);let g=yield c.pick(u,{title:m("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});g&&(yield g.run())})}};bw.ID="editor.action.unicodeHighlight.showExcludeOptions";function Lye(i,e){return So(this,void 0,void 0,function*(){let t=i.getValue(mr.allowedCharacters),n;typeof t=="object"&&t?n=t:n={};for(let o of e)n[String.fromCodePoint(o)]=!0;yield i.updateValue(mr.allowedCharacters,n,2)})}function Iye(i,e){var t;return So(this,void 0,void 0,function*(){let n=(t=i.inspect(mr.allowedLocales).user)===null||t===void 0?void 0:t.value,o;typeof n=="object"&&n?o=Object.assign({},n):o={};for(let r of e)o[r]=!0;yield i.updateValue(mr.allowedLocales,o,2)})}function Tye(i){throw new Error(`Unexpected value: ${i}`)}fe(uu);fe(x0);fe(k0);fe(bw);Wt(S0.ID,S0);hm.register(YW);var gm=ze("dialogService"),Mye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Cte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Nye=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},dle="ignoreUnusualLineTerminators";function Rye(i,e,t){i.setModelProperty(e.uri,dle,t)}function Fye(i,e){return i.getModelProperty(e.uri,dle)}var ww=class extends J{constructor(i,e,t){super(),this._editor=i,this._dialogService=e,this._codeEditorService=t,this._config=this._editor.getOption(116),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(116)&&(this._config=this._editor.getOption(116),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(n=>{n.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return Nye(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;let i=this._editor.getModel();if(!(!i.mightContainUnusualLineTerminators()||Fye(this._codeEditorService,i)===!0||this._editor.getOption(83))){if(this._config==="auto"){i.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:m("unusualLineTerminators.title","Unusual Line Terminators"),message:m("unusualLineTerminators.message","Detected unusual line terminators"),detail:m("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",gs(i.uri)),primaryButton:m("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:m("unusualLineTerminators.ignore","Ignore")})).confirmed){Rye(this._codeEditorService,i,!0);return}i.removeUnusualLineTerminators(this._editor.getSelections())}})}};ww.ID="editor.contrib.unusualLineTerminatorsDetector";ww=Mye([Cte(1,gm),Cte(2,Ft)],ww);Wt(ww.ID,ww);function Bye(i){for(let e=0,t=i.length;e<t;e+=4){let n=i[e+0],o=i[e+1],r=i[e+2],s=i[e+3];i[e+0]=s,i[e+1]=r,i[e+2]=o,i[e+3]=n}}function Pye(i){let e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return KG()||Bye(e),Gi.wrap(e)}function Cw(i){let e=new Uint32Array(Oye(i)),t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(let n of i.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return Pye(e)}function Oye(i){let e=0;if(e+=1+1,i.type==="full")e+=1+i.data.length;else{e+=1,e+=(1+1+1)*i.deltas.length;for(let t of i.deltas)t.data&&(e+=t.data.length)}return e}var gu=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function AN(i){return i&&!!i.data}function hle(i){return i&&Array.isArray(i.edits)}var ez=class{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}};function ule(i,e){return i.has(e)}function Hye(i,e){let t=i.orderedGroups(e);return t.length>0?t[0]:[]}function gle(i,e,t,n,o){return gu(this,void 0,void 0,function*(){let r=Hye(i,e),s=yield Promise.all(r.map(a=>gu(this,void 0,void 0,function*(){let l,c=null;try{l=yield a.provideDocumentSemanticTokens(e,a===t?n:null,o)}catch(d){c=d,l=null}return(!l||!AN(l)&&!hle(l))&&(l=null),new ez(a,l,c)})));for(let a of s){if(a.error)throw a.error;if(a.tokens)return a}return s.length>0?s[0]:null})}function Wye(i,e){let t=i.orderedGroups(e);return t.length>0?t[0]:null}var tz=class{constructor(e,t){this.provider=e,this.tokens=t}};function zye(i,e){return i.has(e)}function ple(i,e){let t=i.orderedGroups(e);return t.length>0?t[0]:[]}function zJ(i,e,t,n){return gu(this,void 0,void 0,function*(){let o=ple(i,e),r=yield Promise.all(o.map(s=>gu(this,void 0,void 0,function*(){let a;try{a=yield s.provideDocumentRangeSemanticTokens(e,t,n)}catch(l){Fn(l),a=null}return(!a||!AN(a))&&(a=null),new tz(s,a)})));for(let s of r)if(s.tokens)return s;return r.length>0?r[0]:null})}ft.registerCommand("_provideDocumentSemanticTokensLegend",(i,...e)=>gu(void 0,void 0,void 0,function*(){let[t]=e;ai(t instanceof $);let n=i.get(li).getModel(t);if(!n)return;let{documentSemanticTokensProvider:o}=i.get(Te),r=Wye(o,n);return r?r[0].getLegend():i.get(ji).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));ft.registerCommand("_provideDocumentSemanticTokens",(i,...e)=>gu(void 0,void 0,void 0,function*(){let[t]=e;ai(t instanceof $);let n=i.get(li).getModel(t);if(!n)return;let{documentSemanticTokensProvider:o}=i.get(Te);if(!ule(o,n))return i.get(ji).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());let r=yield gle(o,n,null,null,et.None);if(!r)return;let{provider:s,tokens:a}=r;if(!a||!AN(a))return;let l=Cw({id:0,type:"full",data:a.data});return a.resultId&&s.releaseDocumentSemanticTokens(a.resultId),l}));ft.registerCommand("_provideDocumentRangeSemanticTokensLegend",(i,...e)=>gu(void 0,void 0,void 0,function*(){let[t,n]=e;ai(t instanceof $);let o=i.get(li).getModel(t);if(!o)return;let{documentRangeSemanticTokensProvider:r}=i.get(Te),s=ple(r,o);if(s.length===0)return;if(s.length===1)return s[0].getLegend();if(!n||!E.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),s[0].getLegend();let a=yield zJ(r,o,E.lift(n),et.None);if(a)return a.provider.getLegend()}));ft.registerCommand("_provideDocumentRangeSemanticTokens",(i,...e)=>gu(void 0,void 0,void 0,function*(){let[t,n]=e;ai(t instanceof $),ai(E.isIRange(n));let o=i.get(li).getModel(t);if(!o)return;let{documentRangeSemanticTokensProvider:r}=i.get(Te),s=yield zJ(r,o,E.lift(n),et.None);if(!(!s||!s.tokens))return Cw({id:0,type:"full",data:s.tokens.data})}));var iz=class i{constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}static create(e,t){return new i(e,new nz(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){let e=this._tokens.getRange();return e&&new E(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[o,r,s]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new i(this._startLineNumber,o),new i(this._startLineNumber+s,r)]}applyEdit(e,t){let[n,o,r]=dp(t);this.acceptEdit(e,n,o,r,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,o,r){this._acceptDeleteRange(e),this._acceptInsertText(new q(e.startLineNumber,e.startColumn),t,n,o,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let r=n-t;this._startLineNumber-=r;return}let o=this._tokens.getMaxDeltaLine();if(!(t>=o+1)){if(t<0&&n>=o+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){let r=-t;this._startLineNumber-=r,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,o,r){if(t===0&&n===0)return;let s=e.lineNumber-this._startLineNumber;if(s<0){this._startLineNumber+=t;return}let a=this._tokens.getMaxDeltaLine();s>=a+1||this._tokens.acceptInsertText(s,e.column-1,t,n,o,r)}},nz=class i{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){let e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){let e=this._getTokenCount();if(e===0)return null;let t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),o=this._getEndCharacter(e-1);return new E(0,t+1,n,o+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){let o=t+Math.floor((n-t)/2),r=this._getDeltaLine(o);if(r<e)t=o+1;else if(r>e)n=o-1;else{let s=o;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let a=o;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new LL(this._tokens.subarray(4*s,4*a+4))}}return this._getDeltaLine(t)===e?new LL(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,o){let r=this._tokens,s=this._tokenCount,a=0,l=!1,c=0;for(let d=0;d<s;d++){let h=4*d,u=r[h],g=r[h+1],p=r[h+2],f=r[h+3];if((u>e||u===e&&p>=t)&&(u<n||u===n&&g<=o))l=!0;else{if(a===0&&(c=u),l){let v=4*a;r[v]=u-c,r[v+1]=g,r[v+2]=p,r[v+3]=f}a++}}return this._tokenCount=a,c}split(e,t,n,o){let r=this._tokens,s=this._tokenCount,a=[],l=[],c=a,d=0,h=0;for(let u=0;u<s;u++){let g=4*u,p=r[g],f=r[g+1],v=r[g+2],b=r[g+3];if(p>e||p===e&&v>=t){if(p<n||p===n&&f<=o)continue;c!==l&&(c=l,d=0,h=p)}c[d++]=p-h,c[d++]=f,c[d++]=v,c[d++]=b}return[new i(new Uint32Array(a)),new i(new Uint32Array(l)),h]}acceptDeleteRange(e,t,n,o,r){let s=this._tokens,a=this._tokenCount,l=o-t,c=0,d=!1;for(let h=0;h<a;h++){let u=4*h,g=s[u],p=s[u+1],f=s[u+2],v=s[u+3];if(g<t||g===t&&f<=n){c++;continue}else if(g===t&&p<n)g===o&&f>r?f-=r-n:f=n;else if(g===t&&p===n)if(g===o&&f>r)f-=r-n;else{d=!0;continue}else if(g<o||g===o&&p<r)if(g===o&&f>r)g===t?(p=n,f=p+(f-r)):(p=0,f=p+(f-r));else{d=!0;continue}else if(g>o){if(l===0&&!d){c=a;break}g-=l}else if(g===o&&p>=r)e&&g===0&&(p+=e,f+=e),g-=l,p-=r-n,f-=r-n;else throw new Error("Not possible!");let b=4*c;s[b]=g,s[b+1]=p,s[b+2]=f,s[b+3]=v,c++}this._tokenCount=c}acceptInsertText(e,t,n,o,r,s){let a=n===0&&o===1&&(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){let h=4*d,u=l[h],g=l[h+1],p=l[h+2];if(!(u<e||u===e&&p<t)){if(u===e&&p===t)if(a)p+=1;else continue;else if(u===e&&g<t&&t<p)n===0?p+=o:p=t;else{if(u===e&&g===t&&a)continue;if(u===e)if(u+=n,n===0)g+=o,p+=o;else{let f=p-g;g=r+(g-t),p=g+f}else u+=n}l[h]=u,l[h+1]=g,l[h+2]=p}}}},LL=class{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}},Vye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},WR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},oz=class{constructor(i,e,t,n){this._legend=i,this._themeService=e,this._languageService=t,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new IL}getMetadata(i,e,t){let n=this._languageService.languageIdCodec.encodeLanguageId(t),o=this._hashTable.get(i,e,n),r;if(o)r=o.metadata,this._logService.getLevel()===aa.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${i} / ${e}: foreground ${Qn.getForeground(r)}, fontStyle ${Qn.getFontStyle(r).toString(2)}`);else{let s=this._legend.tokenTypes[i],a=[];if(s){let l=e;for(let d=0;l>0&&d<this._legend.tokenModifiers.length;d++)l&1&&a.push(this._legend.tokenModifiers[d]),l=l>>1;l>0&&this._logService.getLevel()===aa.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${e.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),a.push("not-in-legend"));let c=this._themeService.getColorTheme().getTokenStyleMetadata(s,a,t);if(typeof c>"u")r=2147483647;else{if(r=0,typeof c.italic<"u"){let d=(c.italic?1:0)<<11;r|=d|1}if(typeof c.bold<"u"){let d=(c.bold?2:0)<<11;r|=d|2}if(typeof c.underline<"u"){let d=(c.underline?4:0)<<11;r|=d|4}if(typeof c.strikethrough<"u"){let d=(c.strikethrough?8:0)<<11;r|=d|8}if(c.foreground){let d=c.foreground<<15;r|=d|16}r===0&&(r=2147483647)}}else this._logService.getLevel()===aa.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${i} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,s="not-in-legend";this._hashTable.add(i,e,n,r),this._logService.getLevel()===aa.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${i} (${s}) / ${e} (${a.join(" ")}): foreground ${Qn.getForeground(r)}, fontStyle ${Qn.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(i,e){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${i}, column ${e}`))}warnInvalidLengthSemanticTokens(i,e){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${i}, column ${e}`))}warnInvalidEditStart(i,e,t,n,o){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${i}, resultId: ${e}) at edit #${t}: The provided start offset ${n} is outside the previous data (length ${o}).`))}};oz=Vye([WR(1,mi),WR(2,ki),WR(3,no)],oz);function mle(i,e,t){let n=i.data,o=i.data.length/5|0,r=Math.max(Math.ceil(o/1024),400),s=[],a=0,l=1,c=0;for(;a<o;){let d=a,h=Math.min(d+r,o);if(h<o){let A=h;for(;A-1>d&&n[5*A]===0;)A--;if(A-1===d){let w=h;for(;w+1<o&&n[5*w]===0;)w++;h=w}else h=A}let u=new Uint32Array((h-d)*4),g=0,p=0,f=0,v=0;for(;a<h;){let A=5*a,w=n[A],C=n[A+1],k=l+w|0,L=w===0?c+C|0:C,S=n[A+2],y=L+S|0,M=n[A+3],O=n[A+4];if(y<=L)e.warnInvalidLengthSemanticTokens(k,L+1);else if(f===k&&v>L)e.warnOverlappingSemanticTokens(k,L+1);else{let H=e.getMetadata(M,O,t);H!==2147483647&&(p===0&&(p=k),u[g]=k-p,u[g+1]=L,u[g+2]=y,u[g+3]=H,g+=4,f=k,v=y)}l=k,c=L,a++}g!==u.length&&(u=u.subarray(0,g));let b=iz.create(p,u);s.push(b)}return s}var rz=class{constructor(e,t,n,o){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=o,this.next=null}},IL=class i{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=i._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<i._SIZES.length?2/3*this._currentLength:0),this._elements=[],i._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){let o=this._hashFunc(e,t,n),r=this._elements[o];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next}return null}add(e,t,n,o){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){let r=this._elements;this._currentLengthIndex++,this._currentLength=i._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<i._SIZES.length?2/3*this._currentLength:0),this._elements=[],i._nullOutEntries(this._elements,this._currentLength);for(let s of r){let a=s;for(;a;){let l=a.next;a.next=null,this._add(a),a=l}}}this._add(new rz(e,t,n,o))}_add(e){let t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};IL._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];var VJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Yo=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function zd(i){return i.toString()}function yte(i){let e=new zk,t=i.createSnapshot(),n;for(;n=t.read();)e.update(n);return e.digest()}var sz=class{constructor(e,t,n){this._modelEventListeners=new ne,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(o=>n(e,o)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}},Uye=go||gt?1:2,az=class{constructor(e,t,n,o,r,s,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=o,this.heapSize=r,this.sha1=s,this.versionId=a,this.alternativeVersionId=l}},TL=class p1 extends J{constructor(e,t,n,o,r,s,a,l,c){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=o,this._undoRedoService=r,this._languageService=s,this._languageConfigurationService=a,this._languageFeatureDebounceService=l,this._onModelAdded=this._register(new Q),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Q),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Q),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new dz(this._themeService,this._languageService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new cz(this._semanticStyling,this,this._themeService,this._configurationService,this._languageFeatureDebounceService,c))}static _readModelOptions(e,t){var n;let o=xo.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){let g=parseInt(e.editor.tabSize,10);isNaN(g)||(o=g),o<1&&(o=1)}let r=o;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){let g=parseInt(e.editor.indentSize,10);isNaN(g)||(r=g),r<1&&(r=1)}let s=xo.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(s=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=Uye,l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=xo.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let d=xo.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let h=xo.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let u=xo.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(u={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:o,indentSize:r,insertSpaces:s,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:h,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);let n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:is===3||is===2?`
`:`\r
`}_shouldRestoreUndoStack(){let e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let o=this._modelCreationOptionsByLanguageAndResource[e+t];if(!o){let r=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),s=this._getEOL(t,e);o=p1._readModelOptions({editor:r,eol:s},n),this._modelCreationOptionsByLanguageAndResource[e+t]=o}return o}_updateModelOptions(){let e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let t=Object.keys(this._models);for(let n=0,o=t.length;n<o;n++){let r=t[n],s=this._models[r],a=s.model.getLanguageId(),l=s.model.uri,c=e[a+l],d=this.getCreationOptions(a,l,s.model.isForSimpleWidget);p1._setModelOptionsForModel(s.model,d,c)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&yr(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(zd(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){let t=this._disposedModels.get(zd(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(zd(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){let t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,o)=>n.time-o.time);t.length>0&&this._disposedModelsHeapSize>e;){let n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,o){let r=this.getCreationOptions(t,n,o),s=new Sd(e,t,r,n,this._undoRedoService,this._languageService,this._languageConfigurationService);if(n&&this._disposedModels.has(zd(n))){let c=this._removeDisposedModel(n),d=this._undoRedoService.getElements(n),h=yte(s)===c.sha1;if(h||c.sharesUndoRedoStack){for(let u of d.past)Hc(u)&&u.matchesResource(n)&&u.setModel(s);for(let u of d.future)Hc(u)&&u.matchesResource(n)&&u.setModel(s);this._undoRedoService.setElementsValidFlag(n,!0,u=>Hc(u)&&u.matchesResource(n)),h&&(s._overwriteVersionId(c.versionId),s._overwriteAlternativeVersionId(c.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}let a=zd(s.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");let l=new sz(s,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,n,o=!1){let r;return t?(r=this._createModelData(e,t.languageId,n,o),this.setMode(r.model,t)):r=this._createModelData(e,Pr,n,o),this._onModelAdded.fire(r.model),r.model}setMode(e,t){if(!t)return;let n=this._models[zd(e.uri)];n&&n.setLanguage(t)}getModels(){let e=[],t=Object.keys(this._models);for(let n=0,o=t.length;n<o;n++){let r=t[n];e.push(this._models[r].model)}return e}getModel(e){let t=zd(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Oe.file||e.scheme===Oe.vscodeRemote||e.scheme===Oe.vscodeUserData||e.scheme===Oe.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){let t=zd(e.uri),n=this._models[t],o=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString(),r=!1,s=0;if(o||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){let l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(let c of l.past)Hc(c)&&c.matchesResource(e.uri)&&(r=!0,s+=c.heapSize(e.uri),c.setModel(e.uri));for(let c of l.future)Hc(c)&&c.matchesResource(e.uri)&&(r=!0,s+=c.heapSize(e.uri),c.setModel(e.uri))}}let a=p1.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(r)if(!o&&s>a){let l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-s),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>Hc(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new az(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),o,s,yte(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!o){let l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){let n=t.oldLanguage,o=e.getLanguageId(),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),s=this.getCreationOptions(o,e.uri,e.isForSimpleWidget);p1._setModelOptionsForModel(e,s,r),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}};TL.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;TL=VJ([Yo(0,Ot),Yo(1,ile),Yo(2,mi),Yo(3,no),Yo(4,KM),Yo(5,ki),Yo(6,Yi),Yo(7,Us),Yo(8,Te)],TL);var UJ="editor.semanticHighlighting";function lz(i,e,t){var n;let o=(n=t.getValue(UJ,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||n===void 0?void 0:n.enabled;return typeof o=="boolean"?o:e.getColorTheme().semanticHighlighting}var cz=class extends J{constructor(i,e,t,n,o,r){super(),this._watchers=Object.create(null),this._semanticStyling=i;let s=c=>{this._watchers[c.uri.toString()]=new yw(c,this._semanticStyling,t,o,r)},a=(c,d)=>{d.dispose(),delete this._watchers[c.uri.toString()]},l=()=>{for(let c of e.getModels()){let d=this._watchers[c.uri.toString()];lz(c,t,n)?d||s(c):d&&a(c,d)}};this._register(e.onModelAdded(c=>{lz(c,t,n)&&s(c)})),this._register(e.onModelRemoved(c=>{let d=this._watchers[c.uri.toString()];d&&a(c,d)})),this._register(n.onDidChangeConfiguration(c=>{c.affectsConfiguration(UJ)&&l()})),this._register(t.onDidColorThemeChange(l))}dispose(){for(let i of Object.values(this._watchers))i.dispose();super.dispose()}};cz=VJ([Yo(1,li),Yo(2,mi),Yo(3,Ot),Yo(4,Us),Yo(5,Te)],cz);var dz=class extends J{constructor(e,t,n){super(),this._themeService=e,this._languageService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new oz(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}},hz=class{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}},yw=class Wu extends J{constructor(e,t,n,o,r){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=t,this._provider=r.documentSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentSemanticTokens",{min:Wu.REQUEST_MIN_DELAY,max:Wu.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new jt(()=>this._fetchDocumentSemanticTokensNow(),Wu.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));let s=()=>{st(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(let a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};s(),this._register(this._provider.onDidChange(()=>{s(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!ule(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}let e=new po,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,o=gle(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;let r=[],s=this._model.onDidChangeContent(l=>{r.push(l)}),a=new sr(!1);o.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,r);else{let{provider:c,tokens:d}=l,h=this._semanticStyling.get(c);this._setDocumentSemanticTokens(c,d||null,h,r)}},l=>{l&&(Ls(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||Ye(l),this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),r.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,o,r){r=Math.min(r,n.length-o,e.length-t);for(let s=0;s<r;s++)n[o+s]=e[t+s]}_setDocumentSemanticTokens(e,t,n,o){let r=this._currentDocumentResponse,s=()=>{o.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),s();return}if(hle(t)){if(!r){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:r.data};else{let a=0;for(let u of t.edits)a+=(u.data?u.data.length:0)-u.deleteCount;let l=r.data,c=new Uint32Array(l.length+a),d=l.length,h=c.length;for(let u=t.edits.length-1;u>=0;u--){let g=t.edits[u];if(g.start>l.length){n.warnInvalidEditStart(r.resultId,t.resultId,u,g.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}let p=d-(g.start+g.deleteCount);p>0&&(Wu._copy(l,d-p,c,h-p,p),h-=p),g.data&&(Wu._copy(g.data,0,c,h-g.data.length,g.data.length),h-=g.data.length),d=g.start}d>0&&Wu._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(AN(t)){this._currentDocumentResponse=new hz(e,t.resultId,t.data);let a=mle(t,n,this._model.getLanguageId());if(o.length>0)for(let l of o)for(let c of a)for(let d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);s()}};yw.REQUEST_MIN_DELAY=300;yw.REQUEST_MAX_DELAY=2e3;yw=VJ([Yo(2,mi),Yo(3,Us),Yo(4,Te)],yw);var Qye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Tv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Sw=class extends J{constructor(i,e,t,n,o,r){super(),this._modelService=e,this._themeService=t,this._configurationService=n,this._editor=i,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new jt(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];let s=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{s()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),s()})),this._register(this._editor.onDidChangeModelContent(a=>{this._cancelAll(),s()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),s()})),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration(UJ)&&(this._cancelAll(),s())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),s()}))}_cancelAll(){for(let i of this._outstandingRequests)i.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(i){for(let e=0,t=this._outstandingRequests.length;e<t;e++)if(this._outstandingRequests[e]===i){this._outstandingRequests.splice(e,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;let i=this._editor.getModel();if(i.tokenization.hasCompleteSemanticTokens())return;if(!lz(i,this._themeService,this._configurationService)){i.tokenization.hasSomeSemanticTokens()&&i.tokenization.setSemanticTokens(null,!1);return}if(!zye(this._provider,i)){i.tokenization.hasSomeSemanticTokens()&&i.tokenization.setSemanticTokens(null,!1);return}let e=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(e.map(t=>this._requestRange(i,t)))}_requestRange(i,e){let t=i.getVersionId(),n=Gn(r=>Promise.resolve(zJ(this._provider,i,e,r))),o=new sr(!1);return n.then(r=>{if(this._debounceInformation.update(i,o.elapsed()),!r||!r.tokens||i.isDisposed()||i.getVersionId()!==t)return;let{provider:s,tokens:a}=r,l=this._modelService.getSemanticTokensProviderStyling(s);i.tokenization.setPartialSemanticTokens(e,mle(a,l,i.getLanguageId()))}).then(()=>this._removeOutstandingRequest(n),()=>this._removeOutstandingRequest(n)),n}};Sw.ID="editor.contrib.viewportSemanticTokens";Sw=Qye([Tv(1,li),Tv(2,mi),Tv(3,Ot),Tv(4,Us),Tv(5,Te)],Sw);Wt(Sw.ID,Sw);var jye=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Ste=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Kye=P("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},m("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),qye=P("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},m("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),$ye=P("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Pi,hcLight:Pi},m("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),Gye=P("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Pi,hcLight:Pi},m("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),Yye=P("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},m("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Jye=P("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},m("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),bN=new Le("hasWordHighlights",!1);function fle(i,e,t,n){let o=i.ordered(e);return Qoe(o.map(r=>()=>Promise.resolve(r.provideDocumentHighlights(e,t,n)).then(void 0,Fn)),Dn)}var ML=class{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Gn(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){let n=e.getWordAtPosition(t.getPosition());return n?new E(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){let o=t.startLineNumber,r=t.startColumn,s=t.endColumn,a=this._getCurrentWordRange(e,t),l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=n.length;!l&&c<d;c++){let h=n.getRange(c);h&&h.startLineNumber===o&&h.startColumn<=r&&h.endColumn>=s&&(l=!0)}return l}cancel(){this.result.cancel()}},uz=class extends ML{constructor(e,t,n,o){super(e,t,n),this._providers=o}_compute(e,t,n,o){return fle(this._providers,e,t.getPosition(),o).then(r=>r||[])}},gz=class extends ML{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,o){return Yl(250,o).then(()=>{if(!t.isEmpty())return[];let r=e.getWordAtPosition(t.getPosition());return!r||r.word.length>1e3?[]:e.findMatches(r.word,!0,!1,!0,n,!1).map(s=>({range:s.range,kind:nb.Text}))})}isValid(e,t,n){let o=t.isEmpty();return this._selectionIsEmpty!==o?!1:super.isValid(e,t,n)}};function Xye(i,e,t,n){return i.has(e)?new uz(e,t,n,i):new gz(e,t,n)}mc("_executeDocumentHighlights",(i,e,t)=>{let n=i.get(Te);return fle(n.documentHighlightProvider,e,t,et.None)});var E0=class i{constructor(e,t,n){this.toUnhook=new ne,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this._hasWordHighlights=bN.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(74),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(o=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(o)})),this.toUnhook.add(e.onDidChangeModelContent(o=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(o=>{let r=this.editor.getOption(74);this.occurrencesHighlight!==r&&(this.occurrencesHighlight=r,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(E.compareRangesUsingStarts)}moveNext(){let e=this._getSortedHighlights(),t=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,n=e[t];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);let o=this._getWord();if(o){let r=this.editor.getModel().getLineContent(n.startLineNumber);co(`${r}, ${t+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),t=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,n=e[t];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);let o=this._getWord();if(o){let r=this.editor.getModel().getLineContent(n.startLineNumber);co(`${r}, ${t+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}let t=e.startColumn,n=e.endColumn,o=this._getWord();if(!o||o.startColumn>t||o.endColumn<n){this._stopAll();return}let r=this.workerRequest&&this.workerRequest.isValid(this.model,e,this.decorations);if(this.lastCursorPositionChangeTime=new Date().getTime(),r)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let s=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=Xye(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(119)),this.workerRequest.result.then(a=>{s===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},Ye)}}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(let t of this.workerRequestValue)t.range&&e.push({range:t.range,options:i._getDecorationOptions(t.kind)});this.decorations.set(e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===nb.Write?this._WRITE_OPTIONS:e===nb.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}};E0._WRITE_OPTIONS=rt.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Xi(Jye),position:us.Center},minimap:{color:Xi(VM),position:xs.Inline}});E0._TEXT_OPTIONS=rt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Xi(Xoe),position:us.Center},minimap:{color:Xi(VM),position:xs.Inline}});E0._REGULAR_OPTIONS=rt.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Xi(Yye),position:us.Center},minimap:{color:Xi(VM),position:xs.Inline}});var zp=class _le extends J{constructor(e,t,n){super(),this.wordHighlighter=null;let o=()=>{e.hasModel()&&(this.wordHighlighter=new E0(e,n.documentHighlightProvider,t))};this._register(e.onDidChangeModel(r=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),o()})),o()}static get(e){return e.getContribution(_le.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};zp.ID="editor.contrib.wordHighlighter";zp=jye([Ste(1,Ze),Ste(2,Te)],zp);var NL=class extends Ie{constructor(e,t){super(t),this._isNext=e}run(e,t){let n=zp.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}},pz=class extends NL{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:m("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:bN,kbOpts:{kbExpr:B.editorTextFocus,primary:65,weight:100}})}},mz=class extends NL{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:m("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:bN,kbOpts:{kbExpr:B.editorTextFocus,primary:1089,weight:100}})}},fz=class extends Ie{constructor(){super({id:"editor.action.wordHighlight.trigger",label:m("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:bN.toNegated(),kbOpts:{kbExpr:B.editorTextFocus,primary:0,weight:100}})}run(e,t,n){let o=zp.get(t);o&&o.restoreViewState(!0)}};Wt(zp.ID,zp);fe(pz);fe(mz);fe(fz);xi((i,e)=>{let t=i.getColor(kY);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));let n=i.getColor(Kye);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);let o=i.getColor(qye);o&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${o}; }`);let r=i.getColor(Bpe);r&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${Io(i.type)?"dotted":"solid"} ${r}; box-sizing: border-box; }`);let s=i.getColor($ye);s&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${Io(i.type)?"dashed":"solid"} ${s}; box-sizing: border-box; }`);let a=i.getColor(Gye);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${Io(i.type)?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});var L0=class extends $n{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;let o=Ms(t.getOption(119)),r=t.getModel(),s=t.getSelections().map(a=>{let l=new q(a.positionLineNumber,a.positionColumn),c=this._move(o,r,l,this._wordNavigationType);return this._moveTo(a,c,this._inSelectionMode)});if(r.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,s.map(a=>wt.fromModelSelection(a))),s.length===1){let a=new q(s[0].positionLineNumber,s[0].positionColumn);t.revealPosition(a,0)}}_moveTo(e,t,n){return n?new Se(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new Se(t.lineNumber,t.column,t.lineNumber,t.column)}},dc=class extends L0{_move(e,t,n,o){return Wn.moveWordLeft(e,t,n,o)}},hc=class extends L0{_move(e,t,n,o){return Wn.moveWordRight(e,t,n,o)}},_z=class extends dc{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}},vz=class extends dc{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}},Az=class extends dc{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:we.and(B.textInputFocus,(e=we.and(PC,eN))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}},bz=class extends dc{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}},wz=class extends dc{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}},Cz=class extends dc{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:we.and(B.textInputFocus,(e=we.and(PC,eN))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}},yz=class extends dc{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,o){return super._move(Ms(ll.wordSeparators.defaultValue),t,n,o)}},Sz=class extends dc{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,o){return super._move(Ms(ll.wordSeparators.defaultValue),t,n,o)}},Dz=class extends hc{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}},xz=class extends hc{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:we.and(B.textInputFocus,(e=we.and(PC,eN))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}},kz=class extends hc{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}},Ez=class extends hc{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}},Lz=class extends hc{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:we.and(B.textInputFocus,(e=we.and(PC,eN))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}},Iz=class extends hc{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}},Tz=class extends hc{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,o){return super._move(Ms(ll.wordSeparators.defaultValue),t,n,o)}},Mz=class extends hc{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,o){return super._move(Ms(ll.wordSeparators.defaultValue),t,n,o)}},I0=class extends $n{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){let o=e.get(Yi);if(!t.hasModel())return;let r=Ms(t.getOption(119)),s=t.getModel(),a=t.getSelections(),l=t.getOption(5),c=t.getOption(8),d=o.getLanguageConfiguration(s.getLanguageId()).getAutoClosingPairs(),h=t._getViewModel(),u=a.map(g=>{let p=this._delete({wordSeparators:r,model:s,selection:g,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Vn(p,"")});t.pushUndoStop(),t.executeCommands(this.id,u),t.pushUndoStop()}},Dw=class extends I0{_delete(e,t){return Wn.deleteWordLeft(e,t)||new E(1,1,1,1)}},xw=class extends I0{_delete(e,t){let n=Wn.deleteWordRight(e,t);if(n)return n;let o=e.model.getLineCount(),r=e.model.getLineMaxColumn(o);return new E(o,r,o,r)}},Nz=class extends Dw{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:B.writable})}},Rz=class extends Dw{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:B.writable})}},Fz=class extends Dw{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}},Bz=class extends xw{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:B.writable})}},Pz=class extends xw{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:B.writable})}},Oz=class extends xw{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}},Hz=class extends Ie{constructor(){super({id:"deleteInsideWord",precondition:B.writable,label:m("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;let o=Ms(t.getOption(119)),r=t.getModel(),s=t.getSelections().map(a=>{let l=Wn.deleteInsideWord(o,r,a);return new Vn(l,"")});t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}};pe(new _z);pe(new vz);pe(new Az);pe(new bz);pe(new wz);pe(new Cz);pe(new Dz);pe(new xz);pe(new kz);pe(new Ez);pe(new Lz);pe(new Iz);pe(new yz);pe(new Sz);pe(new Tz);pe(new Mz);pe(new Nz);pe(new Rz);pe(new Fz);pe(new Bz);pe(new Pz);pe(new Oz);fe(Hz);var Wz=class extends I0{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){return E_.deleteWordPartLeft(e)||new E(1,1,1,1)}},zz=class extends I0{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let n=E_.deleteWordPartRight(e);if(n)return n;let o=e.model.getLineCount(),r=e.model.getLineMaxColumn(o);return new E(o,r,o,r)}},RL=class extends L0{_move(e,t,n,o){return E_.moveWordPartLeft(e,t,n)}},Vz=class extends RL{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:783},weight:100}})}};ft.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");var Uz=class extends RL{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}};ft.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");var FL=class extends L0{_move(e,t,n,o){return E_.moveWordPartRight(e,t,n)}},Qz=class extends FL{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:785},weight:100}})}},jz=class extends FL{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}};pe(new Wz);pe(new zz);pe(new Vz);pe(new Uz);pe(new Qz);pe(new jz);var kw=class extends J{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){let e=Wr.get(this.editor);e&&this.editor.hasModel()&&(this.editor.isSimpleWidget?e.showMessage(m("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):e.showMessage(m("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}};kw.ID="editor.contrib.readOnlyMessageController";Wt(kw.ID,kw);var _n;(function(i){i.noSelection=m("noSelection","No selection"),i.singleSelectionRange=m("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),i.singleSelection=m("singleSelection","Line {0}, Column {1}"),i.multiSelectionRange=m("multiSelectionRange","{0} selections ({1} characters selected)"),i.multiSelection=m("multiSelection","{0} selections"),i.emergencyConfOn=m("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),i.openingDocs=m("openingDocs","Now opening the Editor Accessibility documentation page."),i.readonlyDiffEditor=m("readonlyDiffEditor"," in a read-only pane of a diff editor."),i.editableDiffEditor=m("editableDiffEditor"," in a pane of a diff editor."),i.readonlyEditor=m("readonlyEditor"," in a read-only code editor"),i.editableEditor=m("editableEditor"," in a code editor"),i.changeConfigToOnMac=m("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),i.changeConfigToOnWinLinux=m("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),i.auto_on=m("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),i.auto_off=m("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),i.tabFocusModeOnMsg=m("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),i.tabFocusModeOnMsgNoKb=m("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),i.tabFocusModeOffMsg=m("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),i.tabFocusModeOffMsgNoKb=m("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),i.openDocMac=m("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),i.openDocWinLinux=m("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),i.outroMsg=m("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),i.showAccessibilityHelpAction=m("showAccessibilityHelpAction","Show Accessibility Help")})(_n||(_n={}));var Kz;(function(i){i.inspectTokensAction=m("inspectTokens","Developer: Inspect Tokens")})(Kz||(Kz={}));var BL;(function(i){i.gotoLineActionLabel=m("gotoLineActionLabel","Go to Line/Column...")})(BL||(BL={}));var qz;(function(i){i.helpQuickAccessActionLabel=m("helpQuickAccess","Show all Quick Access Providers")})(qz||(qz={}));var PL;(function(i){i.quickCommandActionLabel=m("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=m("quickCommandActionHelp","Show And Run Commands")})(PL||(PL={}));var Ew;(function(i){i.quickOutlineActionLabel=m("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=m("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(Ew||(Ew={}));var OL;(function(i){i.editorViewAccessibleLabel=m("editorViewAccessibleLabel","Editor content"),i.accessibilityHelpMessage=m("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(OL||(OL={}));var $z;(function(i){i.toggleHighContrast=m("toggleHighContrast","Toggle High Contrast Theme")})($z||($z={}));var Gz;(function(i){i.bulkEditServiceSummary=m("bulkEditServiceSummary","Made {0} edits in {1} files")})(Gz||(Gz={}));var vle=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},jS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Ale=new Le("accessibilityHelpWidgetVisible",!1),Vp=class ble extends J{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(T0,this._editor))}static get(e){return e.getContribution(ble.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};Vp.ID="editor.contrib.accessibilityHelpController";Vp=vle([jS(1,tt)],Vp);function Zye(i,e){return!i||i.length===0?_n.noSelection:i.length===1?e?ws(_n.singleSelectionRange,i[0].positionLineNumber,i[0].positionColumn,e):ws(_n.singleSelection,i[0].positionLineNumber,i[0].positionColumn):e?ws(_n.multiSelectionRange,i.length,e):i.length>0?ws(_n.multiSelection,i.length):""}var T0=class KS extends hs{constructor(e,t,n,o){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=o,this._editor=e,this._isVisibleKey=Ale.bindTo(this._contextKeyService),this._domNode=Pt(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=Pt(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(Tn(this._contentDomNode.domNode,"keydown",r=>{if(this._isVisible&&(r.equals(2083)&&(co(_n.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),Sn(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),r.preventDefault(),r.stopPropagation()),r.equals(2086))){co(_n.openingDocs);let s=this._editor.getRawOptions().accessibilityHelpUrl;typeof s>"u"&&(s="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open($.parse(s)),r.preventDefault(),r.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return KS.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){let o=this._keybindingService.lookupKeybinding(e);return o?ws(t,o.getAriaLabel()):ws(n,e)}_buildContent(){let e=this._editor.getOptions(),t=this._editor.getSelections(),n=0;if(t){let a=this._editor.getModel();a&&t.forEach(l=>{n+=a.getValueLengthInRange(l)})}let o=Zye(t,n);e.get(56)?e.get(83)?o+=_n.readonlyDiffEditor:o+=_n.editableDiffEditor:e.get(83)?o+=_n.readonlyEditor:o+=_n.editableEditor;let r=gt?_n.changeConfigToOnMac:_n.changeConfigToOnWinLinux;switch(e.get(2)){case 0:o+=`

 - `+r;break;case 2:o+=`

 - `+_n.auto_on;break;case 1:o+=`

 - `+_n.auto_off,o+=" "+r;break}e.get(132)?o+=`

 - `+this._descriptionForCommand(y0.ID,_n.tabFocusModeOnMsg,_n.tabFocusModeOnMsgNoKb):o+=`

 - `+this._descriptionForCommand(y0.ID,_n.tabFocusModeOffMsg,_n.tabFocusModeOffMsgNoKb);let s=gt?_n.openDocMac:_n.openDocWinLinux;o+=`

 - `+s,o+=`

`+_n.outroMsg,this._contentDomNode.domNode.appendChild(Ise(o)),this._contentDomNode.domNode.setAttribute("aria-label",o)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Sn(this._contentDomNode.domNode),this._editor.focus())}_layout(){let e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(KS.WIDTH,e.width-40)),n=Math.max(5,Math.min(KS.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);let o=Math.round((e.height-n)/2);this._domNode.setTop(o);let r=Math.round((e.width-t)/2);this._domNode.setLeft(r)}};T0.ID="editor.contrib.accessibilityHelpWidget";T0.WIDTH=500;T0.HEIGHT=300;T0=vle([jS(1,Ze),jS(2,An),jS(3,jr)],T0);var Yz=class extends Ie{constructor(){super({id:"editor.action.showAccessibilityHelp",label:_n.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){let n=Vp.get(t);n&&n.show()}};Wt(Vp.ID,Vp);fe(Yz);var eSe=$n.bindToContribution(Vp.get);pe(new eSe({id:"closeAccessibilityHelp",precondition:Ale,handler:i=>i.hide(),kbOpts:{weight:100+100,kbExpr:B.focus,primary:9,secondary:[1033]}}));xi((i,e)=>{let t=i.getColor(pn);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);let n=i.getColor(Qa);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);let o=i.getColor(Ua);o&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${o}; }`);let r=i.getColor(mt);r&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${r}; }`)});var Lw=class extends J{constructor(e){super(),this.editor=e,this.widget=null,jl&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){let e=!this.editor.getOption(83);!this.widget&&e?this.widget=new HL(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}};Lw.ID="editor.contrib.iPadShowKeyboard";var HL=class i extends J{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(le(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(le(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return i.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}};HL.ID="editor.contrib.ShowKeyboardWidget";Wt(Lw.ID,Lw);var ps=ze("themeService"),tSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Dte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},M0=class wle extends J{constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(o=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(o=>this.stop())),this._register(Ui.onDidChange(o=>this.stop())),this._register(this._editor.onKeyUp(o=>o.keyCode===9&&this.stop()))}static get(e){return e.getContribution(wle.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new WL(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};M0.ID="editor.contrib.inspectTokens";M0=tSe([Dte(1,ps),Dte(2,ki)],M0);var Jz=class extends Ie{constructor(){super({id:"editor.action.inspectTokens",label:Kz.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){let n=M0.get(t);n&&n.launch()}};function iSe(i){let e="";for(let t=0,n=i.length;t<n;t++){let o=i.charCodeAt(t);switch(o){case 9:e+="\u2192";break;case 32:e+="\xB7";break;default:e+=String.fromCharCode(o)}}return e}function nSe(i,e){let t=Ui.get(e);if(t)return t;let n=i.encodeLanguageId(e);return{getInitialState:()=>U_,tokenize:(o,r,s)=>PY(e,s),tokenizeEncoded:(o,r,s)=>jM(n,s)}}var WL=class i extends J{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=nSe(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return i._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),n=0;for(let l=t.tokens1.length-1;l>=0;l--){let c=t.tokens1[l];if(e.column-1>=c.offset){n=l;break}}let o=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){o=l;break}let r=this._model.getLineContent(e.lineNumber),s="";if(n<t.tokens1.length){let l=t.tokens1[n].offset,c=n+1<t.tokens1.length?t.tokens1[n+1].offset:r.length;s=r.substring(l,c)}Hh(this._domNode,ge("h2.tm-token",void 0,iSe(s),ge("span.tm-token-length",void 0,`${s.length} ${s.length===1?"char":"chars"}`))),ae(this._domNode,ge("hr.tokens-inspect-separator",{style:"clear:both"}));let a=(o<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(o<<1)+1]):null;ae(this._domNode,ge("table.tm-metadata-table",void 0,ge("tbody",void 0,ge("tr",void 0,ge("td.tm-metadata-key",void 0,"language"),ge("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),ge("tr",void 0,ge("td.tm-metadata-key",void 0,"token type"),ge("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),ge("tr",void 0,ge("td.tm-metadata-key",void 0,"font style"),ge("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),ge("tr",void 0,ge("td.tm-metadata-key",void 0,"foreground"),ge("td.tm-metadata-value",void 0,`${a?j.Format.CSS.formatHex(a.foreground):"-?-"}`)),ge("tr",void 0,ge("td.tm-metadata-key",void 0,"background"),ge("td.tm-metadata-value",void 0,`${a?j.Format.CSS.formatHex(a.background):"-?-"}`))))),ae(this._domNode,ge("hr.tokens-inspect-separator")),n<t.tokens1.length&&ae(this._domNode,ge("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=Ui.getColorMap(),n=Qn.getLanguageId(e),o=Qn.getTokenType(e),r=Qn.getFontStyle(e),s=Qn.getForeground(e),a=Qn.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:o,fontStyle:r,foreground:t[s],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),o=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:o.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}};WL._ID="editor.contrib.inspectTokensWidget";Wt(M0.ID,M0);fe(Jz);xi((i,e)=>{let t=i.getColor(LY);if(t){let r=Io(i.type)?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${r}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}let n=i.getColor(np);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);let o=i.getColor(EY);o&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${o}; }`)});var Xz;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(Xz||(Xz={}));var pm={Quickaccess:"workbench.contributions.quickaccess"},Zz=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),ct(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Ns([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(t=>e.startsWith(t.prefix))||void 0||this.defaultProvider}};oi.add(pm.Quickaccess,new Zz);var oSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},xte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},zL=class qS{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=oi.as(pm.Quickaccess)}provide(e){let t=new ne;return t.add(e.onDidAccept(()=>{let[n]=e.selectedItems;n&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(n=>{let o=this.registry.getQuickAccessProvider(n.substr(qS.PREFIX.length));o&&o.prefix&&o.prefix!==qS.PREFIX&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders(),t}getQuickAccessProviders(){let e=[];for(let t of this.registry.getQuickAccessProviders().sort((n,o)=>n.prefix.localeCompare(o.prefix)))if(t.prefix!==qS.PREFIX)for(let n of t.helpEntries){let o=n.prefix||t.prefix,r=o||"\u2026";e.push({prefix:o,label:r,keybinding:n.commandId?this.keybindingService.lookupKeybinding(n.commandId):void 0,ariaLabel:m("helpPickAriaLabel","{0}, {1}",r,n.description),description:n.description})}return e}};zL.PREFIX="?";zL=oSe([xte(0,dl),xte(1,An)],zL);oi.as(pm.Quickaccess).registerQuickAccessProvider({ctor:zL,prefix:"",helpEntries:[{description:qz.helpQuickAccessActionLabel}]});var VL=class{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;let o=new ne;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let r=o.add(new eo);return r.value=this.doProvide(e,t),o.add(this.onDidActiveTextEditorControlChange(()=>{r.value=void 0,r.value=this.doProvide(e,t)})),o}doProvide(e,t){let n=new ne,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){let r={editor:o},s=Lse(o);if(s){let a=tr(o.saveViewState());n.add(s.onDidChangeCursorPosition(()=>{a=tr(o.saveViewState())})),r.restoreViewState=()=>{a&&o===this.activeTextEditorControl&&o.restoreViewState(a)},n.add(Ql(t.onCancellationRequested)(()=>{var l;return(l=r.restoreViewState)===null||l===void 0?void 0:l.call(r)}))}n.add(ct(()=>this.clearDecorations(o))),n.add(this.provideWithTextEditor(r,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return aJ(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{let o=[];this.rangeHighlightDecorationId&&(o.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),o.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);let r=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Xi(vfe),position:us.Full}}}],[s,a]=n.deltaDecorations(o,r);this.rangeHighlightDecorationId={rangeHighlightId:s,overviewRulerDecorationId:a}})}clearDecorations(e){let t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}},UL=class i extends VL{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){let t=m("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,J.None}provideWithTextEditor(e,t,n){let o=e.editor,r=new ne;r.add(t.onDidAccept(l=>{let[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(o,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));let s=()=>{let l=this.parsePosition(o,t.value.trim().substr(i.PREFIX.length)),c=this.getPickLabel(o,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(o,l.lineNumber)){this.clearDecorations(o);return}let d=this.toRange(l.lineNumber,l.column);o.revealRangeInCenter(d,0),this.addDecorations(o,d)};s(),r.add(t.onDidChangeValue(()=>s()));let a=Lse(o);return a&&a.getOptions().get(62).renderType===2&&(a.updateOptions({lineNumbers:"on"}),r.add(ct(()=>a.updateOptions({lineNumbers:"relative"})))),r}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){let n=t.split(/,|:|#/).map(r=>parseInt(r,10)).filter(r=>!isNaN(r)),o=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:o+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?m("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):m("gotoLineLabel","Go to line {0}.",t);let o=e.getPosition()||{lineNumber:1,column:1},r=this.lineCount(e);return r>1?m("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",o.lineNumber,o.column,r):m("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",o.lineNumber,o.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;let o=this.getModel(e);if(!o)return!1;let r={lineNumber:t,column:n};return o.validatePosition(r).equals(r)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}};UL.PREFIX=":";var rSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},sSe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Iw=class extends UL{constructor(i){super(),this.editorService=i,this.onDidActiveTextEditorControlChange=Z.None}get activeTextEditorControl(){return tr(this.editorService.getFocusedCodeEditor())}};Iw=rSe([sSe(0,Ft)],Iw);var wN=class extends Ie{constructor(){super({id:wN.ID,label:BL.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:2085,mac:{primary:293},weight:100}})}run(i){i.get(dl).quickAccess.show(Iw.PREFIX)}};wN.ID="editor.action.gotoLine";fe(wN);oi.as(pm.Quickaccess).registerQuickAccessProvider({ctor:Iw,prefix:Iw.PREFIX,helpEntries:[{description:BL.gotoLineActionLabel,commandId:wN.ID}]});var Cle=[void 0,[]];function zR(i,e,t=0,n=0){let o=e;return o.values&&o.values.length>1?aSe(i,o.values,t,n):yle(i,e,t,n)}function aSe(i,e,t,n){let o=0,r=[];for(let s of e){let[a,l]=yle(i,s,t,n);if(typeof a!="number")return Cle;o+=a,r.push(...l)}return[o,lSe(r)]}function yle(i,e,t,n){let o=X_(e.original,e.originalLowercase,t,i,i.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return o?[o[0],$M(o)]:Cle}function lSe(i){let e=i.sort((o,r)=>o.start-r.start),t=[],n;for(let o of e)!n||!cSe(n,o)?(n=o,t.push(o)):(n.start=Math.min(n.start,o.start),n.end=Math.max(n.end,o.end));return t}function cSe(i,e){return!(i.end<e.start||e.end<i.start)}function kte(i){return i.startsWith('"')&&i.endsWith('"')}var Sle=" ";function eV(i){typeof i!="string"&&(i="");let e=i.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:o}=Ete(i),r=t.indexOf(Ss)>=0,s=kte(i),a,l=i.split(Sle);if(l.length>1)for(let c of l){let d=kte(c),{pathNormalized:h,normalized:u,normalizedLowercase:g}=Ete(c);u&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:h,normalized:u,normalizedLowercase:g,expectContiguousMatch:d}))}return{original:i,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:o,values:a,containsPathSeparator:r,expectContiguousMatch:s}}function Ete(i){let e;Mn?e=i.replace(/\//g,Ss):e=i.replace(/\\/g,Ss);let t=Hue(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function Lte(i){return Array.isArray(i)?eV(i.map(e=>e.original).join(Sle)):eV(i.original)}var dSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Ite=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Mv=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},_a=class tV extends VL{constructor(e,t,n=Object.create(null)){super(n),this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,m("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),J.None}provideWithTextEditor(e,t,n){let o=e.editor,r=this.getModel(o);return r?this._languageFeaturesService.documentSymbolProvider.has(r)?this.doProvideWithEditorSymbols(e,r,t,n):this.doProvideWithoutEditorSymbols(e,r,t,n):J.None}doProvideWithoutEditorSymbols(e,t,n,o){let r=new ne;return this.provideLabelPick(n,m("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),Mv(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,r))||o.isCancellationRequested||r.add(this.doProvideWithEditorSymbols(e,t,n,o))}),r}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return Mv(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;let n=new UA,o=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(o.dispose(),n.complete(!0))}));return t.add(ct(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,o){var r;let s=e.editor,a=new ne;a.add(n.onDidAccept(u=>{let[g]=n.selectedItems;g&&g.range&&(this.gotoLocation(e,{range:g.range.selection,keyMods:n.keyMods,preserveFocus:u.inBackground}),u.inBackground||n.hide())})),a.add(n.onDidTriggerItemButton(({item:u})=>{u&&u.range&&(this.gotoLocation(e,{range:u.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));let l=this.getDocumentSymbols(t,o),c,d=u=>Mv(this,void 0,void 0,function*(){c?.dispose(!0),n.busy=!1,c=new po(o),n.busy=!0;try{let g=eV(n.value.substr(tV.PREFIX.length).trim()),p=yield this.doGetSymbolPicks(l,g,void 0,c.token);if(o.isCancellationRequested)return;if(p.length>0){if(n.items=p,u&&g.original.length===0){let f=zD(p,v=>!!(v.type!=="separator"&&v.range&&E.containsPosition(v.range.decoration,u)));f&&(n.activeItems=[f])}}else g.original.length>0?this.provideLabelPick(n,m("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,m("noSymbolResults","No editor symbols"))}finally{o.isCancellationRequested||(n.busy=!1)}});a.add(n.onDidChangeValue(()=>d(void 0))),d((r=s.getSelection())===null||r===void 0?void 0:r.getPosition());let h=2;return a.add(n.onDidChangeActive(()=>{let[u]=n.activeItems;if(u&&u.range){if(h-- >0)return;s.revealRangeInCenter(u.range.selection,0),this.addDecorations(s,u.range.decoration)}})),a}doGetSymbolPicks(e,t,n,o){return Mv(this,void 0,void 0,function*(){let r=yield e;if(o.isCancellationRequested)return[];let s=t.original.indexOf(tV.SCOPE_PREFIX)===0,a=s?1:0,l,c;t.values&&t.values.length>1?(l=Lte(t.values[0]),c=Lte(t.values.slice(1))):l=t;let d=[];for(let g=0;g<r.length;g++){let p=r[g],f=Pue(p.name),v=`$(${x4.toIcon(p.kind).id}) ${f}`,b=v.length-f.length,A=p.containerName;n!=null&&n.extraContainerLabel&&(A?A=`${n.extraContainerLabel} \u2022 ${A}`:A=n.extraContainerLabel);let w,C,k,L;if(t.original.length>a){let y=!1;if(l!==t&&([w,C]=zR(v,Object.assign(Object.assign({},t),{values:void 0}),a,b),typeof w=="number"&&(y=!0)),typeof w!="number"&&([w,C]=zR(v,l,a,b),typeof w!="number"))continue;if(!y&&c){if(A&&c.original.length>0&&([k,L]=zR(A,c)),typeof k!="number")continue;typeof w=="number"&&(w+=k)}}let S=p.tags&&p.tags.indexOf(1)>=0;d.push({index:g,kind:p.kind,score:w,label:v,ariaLabel:f,description:A,highlights:S?void 0:{label:C,description:L},range:{selection:E.collapseToStart(p.selectionRange),decoration:p.range},strikethrough:S,buttons:(()=>{var y,M;let O=!((y=this.options)===null||y===void 0)&&y.openSideBySideDirection?(M=this.options)===null||M===void 0?void 0:M.openSideBySideDirection():void 0;if(O)return[{iconClass:O==="right"?_.splitHorizontal.classNames:_.splitVertical.classNames,tooltip:O==="right"?m("openToSide","Open to the Side"):m("openToBottom","Open to the Bottom")}]})()})}let h=d.sort((g,p)=>s?this.compareByKindAndScore(g,p):this.compareByScore(g,p)),u=[];if(s){let g=function(){f&&typeof p=="number"&&v>0&&(f.label=ws(UR[p]||VR,v))},p,f,v=0;for(let b of h)p!==b.kind?(g(),p=b.kind,v=1,f={type:"separator"},u.push(f)):v++,u.push(b);g()}else h.length>0&&(u=[{label:m("symbols","symbols ({0})",d.length),type:"separator"},...h]);return u})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){let n=UR[e.kind]||VR,o=UR[t.kind]||VR,r=n.localeCompare(o);return r===0?this.compareByScore(e,t):r}getDocumentSymbols(e,t){return Mv(this,void 0,void 0,function*(){let n=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}};_a.PREFIX="@";_a.SCOPE_PREFIX=":";_a.PREFIX_BY_CATEGORY=`${_a.PREFIX}${_a.SCOPE_PREFIX}`;_a=dSe([Ite(0,Te),Ite(1,pN)],_a);var VR=m("property","properties ({0})"),UR={5:m("method","methods ({0})"),11:m("function","functions ({0})"),8:m("_constructor","constructors ({0})"),12:m("variable","variables ({0})"),4:m("class","classes ({0})"),22:m("struct","structs ({0})"),23:m("event","events ({0})"),24:m("operator","operators ({0})"),10:m("interface","interfaces ({0})"),2:m("namespace","namespaces ({0})"),3:m("package","packages ({0})"),25:m("typeParameter","type parameters ({0})"),1:m("modules","modules ({0})"),6:m("property","properties ({0})"),9:m("enum","enumerations ({0})"),21:m("enumMember","enumeration members ({0})"),14:m("string","strings ({0})"),0:m("file","files ({0})"),17:m("array","arrays ({0})"),15:m("number","numbers ({0})"),16:m("boolean","booleans ({0})"),18:m("object","objects ({0})"),19:m("key","keys ({0})"),7:m("field","fields ({0})"),13:m("constant","constants ({0})")},hSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},QR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},iV=class extends _a{constructor(i,e,t){super(e,t),this.editorService=i,this.onDidActiveTextEditorControlChange=Z.None}get activeTextEditorControl(){return tr(this.editorService.getFocusedCodeEditor())}};iV=hSe([QR(0,Ft),QR(1,Te),QR(2,pN)],iV);var Tw=class i extends Ie{constructor(){super({id:i.ID,label:Ew.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:B.hasDocumentSymbolProvider,kbOpts:{kbExpr:B.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(dl).quickAccess.show(_a.PREFIX)}};Tw.ID="editor.action.quickOutline";fe(Tw);oi.as(pm.Quickaccess).registerQuickAccessProvider({ctor:iV,prefix:_a.PREFIX,helpEntries:[{description:Ew.quickOutlineActionLabel,prefix:_a.PREFIX,commandId:Tw.ID},{description:Ew.quickOutlineByCategoryActionLabel,prefix:_a.PREFIX_BY_CATEGORY}]});function jR(i,e){return e&&(i.stack||i.stacktrace)?m("stackTrace.format","{0}: {1}",Mte(i),Tte(i.stack)||Tte(i.stacktrace)):Mte(i)}function Tte(i){return Array.isArray(i)?i.join(`
`):i}function Mte(i){return typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?m("nodeExceptionMessage","A system error occurred ({0})",i.message):i.message||m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function CN(i=null,e=!1){if(!i)return m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){let t=Ns(i),n=CN(t[0],e);return t.length>1?m("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(Ji(i))return i;if(i.detail){let t=i.detail;if(t.error)return jR(t.error,e);if(t.exception)return jR(t.exception,e)}return i.stack?jR(i,e):i.message?i.message:m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var tS=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Af;(function(i){i[i.NO_ACTION=0]="NO_ACTION",i[i.CLOSE_PICKER=1]="CLOSE_PICKER",i[i.REFRESH_PICKER=2]="REFRESH_PICKER",i[i.REMOVE_ITEM=3]="REMOVE_ITEM"})(Af||(Af={}));function KR(i){let e=i;return Array.isArray(e.items)}function uSe(i){let e=i;return!!e.picks&&e.additionalPicks instanceof Promise}var QL=class i extends J{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var n;let o=new ne;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let r,s=o.add(new eo),a=()=>tS(this,void 0,void 0,function*(){let l=s.value=new ne;r?.dispose(!0),e.busy=!1,r=new po(t);let c=r.token,d=e.value.substr(this.prefix.length).trim(),h=this._getPicks(d,l,c),u=(g,p)=>{var f;let v,b;if(KR(g)?(v=g.items,b=g.active):v=g,v.length===0){if(p)return!1;d.length>0&&!((f=this.options)===null||f===void 0)&&f.noResultsPick&&(v=[this.options.noResultsPick])}return e.items=v,b&&(e.activeItems=[b]),!0};if(h!==null)if(uSe(h)){let g=!1,p=!1;yield Promise.all([(()=>tS(this,void 0,void 0,function*(){yield Yl(i.FAST_PICKS_RACE_DELAY),!c.isCancellationRequested&&(p||(g=u(h.picks,!0)))}))(),(()=>tS(this,void 0,void 0,function*(){e.busy=!0;try{let f=yield h.additionalPicks;if(c.isCancellationRequested)return;let v,b;KR(h.picks)?(v=h.picks.items,b=h.picks.active):v=h.picks;let A,w;if(KR(f)?(A=f.items,w=f.active):A=f,A.length>0||!g){let C;if(!b&&!w){let k=e.activeItems[0];k&&v.indexOf(k)!==-1&&(C=k)}u({items:[...v,...A],active:b||w||C})}}finally{c.isCancellationRequested||(e.busy=!1),p=!0}}))()])}else if(!(h instanceof Promise))u(h);else{e.busy=!0;try{let g=yield h;if(c.isCancellationRequested)return;u(g)}finally{c.isCancellationRequested||(e.busy=!1)}}});return o.add(e.onDidChangeValue(()=>a())),a(),o.add(e.onDidAccept(l=>{let[c]=e.selectedItems;typeof c?.accept=="function"&&(l.inBackground||e.hide(),c.accept(e.keyMods,l))})),o.add(e.onDidTriggerItemButton(({button:l,item:c})=>tS(this,void 0,void 0,function*(){var d,h;if(typeof c.trigger=="function"){let u=(h=(d=c.buttons)===null||d===void 0?void 0:d.indexOf(l))!==null&&h!==void 0?h:-1;if(u>=0){let g=c.trigger(u,e.keyMods),p=typeof g=="number"?g:yield g;if(t.isCancellationRequested)return;switch(p){case Af.NO_ACTION:break;case Af.CLOSE_PICKER:e.hide();break;case Af.REFRESH_PICKER:a();break;case Af.REMOVE_ITEM:{let f=e.items.indexOf(c);if(f!==-1){let v=e.items.slice(),b=v.splice(f,1),A=e.activeItems.filter(C=>C!==b[0]),w=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=v,A&&(e.activeItems=A),e.keepScrollPosition=w}break}}}}}))),o}};QL.FAST_PICKS_RACE_DELAY=200;var Dle=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},tg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Nte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Mw=class $S extends QL{constructor(e,t,n,o,r,s){super($S.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=o,this.telemetryService=r,this.dialogService=s,this.commandsHistory=this._register(this.instantiationService.createInstance(Up)),this.options=e}_getPicks(e,t,n){return Nte(this,void 0,void 0,function*(){let o=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];let r=[];for(let c of o){let d=tr($S.WORD_FILTER(e,c.label)),h=c.commandAlias?tr($S.WORD_FILTER(e,c.commandAlias)):void 0;d||h?(c.highlights={label:d,detail:this.options.showAlias?h:void 0},r.push(c)):e===c.commandId&&r.push(c)}let s=new Map;for(let c of r){let d=s.get(c.label);d?(c.description=c.commandId,d.description=d.commandId):s.set(c.label,c)}r.sort((c,d)=>{let h=this.commandsHistory.peek(c.commandId),u=this.commandsHistory.peek(d.commandId);return h&&u?h>u?-1:1:h?-1:u?1:c.label.localeCompare(d.label)});let a=[],l=!1;for(let c=0;c<r.length;c++){let d=r[c],h=this.keybindingService.lookupKeybinding(d.commandId),u=h?m("commandPickAriaLabelWithKeybinding","{0}, {1}",d.label,h.getAriaLabel()):d.label;c===0&&this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:m("recentlyUsed","recently used")}),l=!0),c!==0&&l&&!this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:m("morecCommands","other commands")}),l=!1),a.push(Object.assign(Object.assign({},d),{ariaLabel:u,detail:this.options.showAlias&&d.commandAlias!==d.label?d.commandAlias:void 0,keybinding:h,accept:()=>Nte(this,void 0,void 0,function*(){this.commandsHistory.push(d.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"quick open"});try{yield this.commandService.executeCommand(d.commandId)}catch(g){Ls(g)||this.dialogService.show(Mt.Error,m("canNotRun","Command '{0}' resulted in an error ({1})",d.label,CN(g)))}})}))}return a})}};Mw.PREFIX=">";Mw.WORD_FILTER=UY(UC,S0e,Lre);Mw=Dle([tg(1,tt),tg(2,An),tg(3,ji),tg(4,Vs),tg(5,gm)],Mw);var Up=class On extends J{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=On.getConfiguredCommandHistoryLength(this.configurationService),On.cache&&On.cache.limit!==this.configuredCommandsHistoryLength&&(On.cache.limit=this.configuredCommandsHistoryLength,On.saveState(this.storageService))}load(){let e=this.storageService.get(On.PREF_KEY_CACHE,0),t;if(e)try{t=JSON.parse(e)}catch{}let n=On.cache=new tc(this.configuredCommandsHistoryLength,1);if(t){let o;t.usesLRU?o=t.entries:o=t.entries.sort((r,s)=>r.value-s.value),o.forEach(r=>n.set(r.key,r.value))}On.counter=this.storageService.getNumber(On.PREF_KEY_COUNTER,0,On.counter)}push(e){On.cache&&(On.cache.set(e,On.counter++),On.saveState(this.storageService))}peek(e){var t;return(t=On.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!On.cache)return;let t={usesLRU:!0,entries:[]};On.cache.forEach((n,o)=>t.entries.push({key:o,value:n})),e.store(On.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(On.PREF_KEY_COUNTER,On.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;let o=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof o=="number"?o:On.DEFAULT_COMMANDS_HISTORY_LENGTH}};Up.DEFAULT_COMMANDS_HISTORY_LENGTH=50;Up.PREF_KEY_CACHE="commandPalette.mru.cache";Up.PREF_KEY_COUNTER="commandPalette.mru.counter";Up.counter=1;Up=Dle([tg(0,Ea),tg(1,Ot)],Up);var nV=class extends Mw{constructor(e,t,n,o,r,s){super(e,t,n,o,r,s)}getCodeEditorCommandPicks(){let e=this.activeTextEditorControl;if(!e)return[];let t=[];for(let n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:GY(n.label)||n.id});return t}},gSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Mm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},pSe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Nw=class extends nV{constructor(i,e,t,n,o,r){super({showAlias:!1},i,t,n,o,r),this.codeEditorService=e}get activeTextEditorControl(){return tr(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return pSe(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};Nw=gSe([Mm(0,tt),Mm(1,Ft),Mm(2,An),Mm(3,ji),Mm(4,Vs),Mm(5,gm)],Nw);var Rw=class i extends Ie{constructor(){super({id:i.ID,label:PL.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(dl).quickAccess.show(Nw.PREFIX)}};Rw.ID="editor.action.quickCommand";fe(Rw);oi.as(pm.Quickaccess).registerQuickAccessProvider({ctor:Nw,prefix:Nw.PREFIX,helpEntries:[{description:PL.quickCommandHelp,commandId:Rw.ID}]});var mSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Nm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},oV=class extends nu{constructor(i,e,t,n,o,r,s){super(!0,i,e,t,n,o,r,s)}};oV=mSe([Nm(1,Ze),Nm(2,Ft),Nm(3,nn),Nm(4,tt),Nm(5,Ea),Nm(6,Ot)],oV);Wt(nu.ID,oV);var rV=class{constructor(e,t,n,o,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=o,this.background=r}};function fSe(i){if(!i||!Array.isArray(i))return[];let e=[],t=0;for(let n=0,o=i.length;n<o;n++){let r=i[n],s=-1;if(typeof r.fontStyle=="string"){s=0;let c=r.fontStyle.split(" ");for(let d=0,h=c.length;d<h;d++)switch(c[d]){case"italic":s=s|1;break;case"bold":s=s|2;break;case"underline":s=s|4;break;case"strikethrough":s=s|8;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new rV(r.token||"",n,s,a,l)}return e}function _Se(i,e){i.sort((d,h)=>{let u=wSe(d.token,h.token);return u!==0?u:d.index-h.index});let t=0,n="000000",o="ffffff";for(;i.length>=1&&i[0].token==="";){let d=i.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(n=d.foreground),d.background!==null&&(o=d.background)}let r=new sV;for(let d of e)r.getId(d);let s=r.getId(n),a=r.getId(o),l=new aV(t,s,a),c=new lV(l);for(let d=0,h=i.length;d<h;d++){let u=i[d];c.insert(u.token,u.fontStyle,r.getId(u.foreground),r.getId(u.background))}return new jL(r,c)}var vSe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,sV=class{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;let t=e.match(vSe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=j.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}},jL=class{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(fSe(e),t)}static createFromParsedTokenTheme(e,t){return _Se(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let o=this._match(t),r=bSe(t);n=(o.metadata|r<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}},ASe=/\b(comment|string|regex|regexp)\b/;function bSe(i){let e=i.match(ASe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function wSe(i,e){return i<e?-1:i>e?1:0}var aV=class i{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new i(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}},lV=class i{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,o;t===-1?(n=e,o=""):(n=e.substring(0,t),o=e.substring(t+1));let r=this._children.get(n);return typeof r<"u"?r.match(o):this._mainRule}insert(e,t,n,o){if(e===""){this._mainRule.acceptOverwrite(t,n,o);return}let r=e.indexOf("."),s,a;r===-1?(s=e,a=""):(s=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(s);typeof l>"u"&&(l=new i(this._mainRule.clone()),this._children.set(s,l)),l.insert(a,t,n,o)}};function CSe(i){let e=[];for(let t=1,n=i.length;t<n;t++){let o=i[t];e[t]=`.mtk${t} { color: ${o}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}var ySe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[yn]:"#FFFFFE",[os]:"#000000",[xY]:"#E5EBF1",[HC]:"#D3D3D3",[WC]:"#939393",[kY]:"#ADD6FF4D"}},SSe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[yn]:"#1E1E1E",[os]:"#D4D4D4",[xY]:"#3A3D41",[HC]:"#404040",[WC]:"#707070",[kY]:"#ADD6FF26"}},DSe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[yn]:"#000000",[os]:"#FFFFFF",[HC]:"#FFFFFF",[WC]:"#FFFFFF"}},xSe={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[yn]:"#FFFFFF",[os]:"#292929",[HC]:"#292929",[WC]:"#292929"}};function kSe(i){let e=new Q,t=zre();return t.onDidChange(()=>e.fire()),i?.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){let n=i?i.getProductIconTheme():new KL,o={},r=a=>{let l=n.getIcon(a);if(!l)return;let c=l.font;return c?(o[c.id]=c.definition,`.codicon-${a.id}:before { content: '${l.fontCharacter}'; font-family: ${QX(c.id)}; }`):`.codicon-${a.id}:before { content: '${l.fontCharacter}'; }`},s=[];for(let a of t.getIcons()){let l=r(a);l&&s.push(l)}for(let a in o){let l=o[a],c=l.weight?`font-weight: ${l.weight};`:"",d=l.style?`font-style: ${l.style};`:"",h=l.src.map(u=>`${Jg(u.location)} format('${u.format}')`).join(", ");s.push(`@font-face { src: ${h}; font-family: ${QX(a)};${c}${d} font-display: block; }`)}return s.join(`
`)}}}var KL=class{getIcon(e){let t=zre(),n=e.defaults;for(;zt.isThemeIcon(n);){let o=t.getIcon(n.id);if(!o)return;n=o.defaults}return n}},$c="vs",n_="vs-dark",Wg="hc-black",zg="hc-light",xle=oi.as(Koe.ColorContribution),ESe=oi.as(hoe.ThemingContribution),qL=class{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(GS(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){let e=new Map;for(let t in this.themeData.colors)e.set(t,j.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=cV(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,j.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){let n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=xle.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case $c:return Cs.LIGHT;case Wg:return Cs.HIGH_CONTRAST_DARK;case zg:return Cs.HIGH_CONTRAST_LIGHT;default:return Cs.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let r=cV(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}let n=this.themeData.colors["editor.foreground"],o=this.themeData.colors["editor.background"];if(n||o){let r={token:""};n&&(r.foreground=n),o&&(r.background=o),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=jL.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){let o=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=Qn.getForeground(o),s=Qn.getFontStyle(o);return{foreground:r,italic:!!(s&1),bold:!!(s&2),underline:!!(s&4),strikethrough:!!(s&8)}}};function GS(i){return i===$c||i===n_||i===Wg||i===zg}function cV(i){switch(i){case $c:return ySe;case n_:return SSe;case Wg:return DSe;case zg:return xSe}}function iS(i){let e=cV(i);return new qL(i,e)}var dV=class extends J{constructor(){super(),this._onColorThemeChange=this._register(new Q),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new Q),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new KL,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set($c,iS($c)),this._knownThemes.set(n_,iS(n_)),this._knownThemes.set(Wg,iS(Wg)),this._knownThemes.set(zg,iS(zg));let e=kSe(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme($c),this._onOSSchemeChanged(),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),bA("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return yA(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=ls(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),J.None}_registerShadowDomContainer(e){let t=ls(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!GS(t.base)&&!GS(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new qL(e,t)),GS(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get($c),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){let e=window.matchMedia("(forced-colors: active)").matches;if(e!==Io(this._theme.type)){let t;NA(this._theme.type)?t=e?Wg:n_:t=e?zg:$c,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:s=>{t[s]||(e.push(s),t[s]=!0)}};ESe.getThemingParticipants().forEach(s=>s(this._theme,n,this._environment));let o=[];for(let s of xle.getColors()){let a=this._theme.getColor(s.id,!0);a&&o.push(`${joe(s.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${o.join(`
`)} }`);let r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(CSe(r)),this._themeCSS=e.join(`
`),this._updateCSS(),Ui.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}},hV=class extends Ie{constructor(){super({id:"editor.action.toggleHighContrast",label:$z.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){let n=e.get(ps),o=n.getColorTheme();Io(o.type)?(n.setTheme(this._originalThemeName||(NA(o.type)?n_:$c)),this._originalThemeName=null):(n.setTheme(NA(o.type)?Wg:zg),this._originalThemeName=o.themeName)}};fe(hV);var ZC=class{static chord(i,e){return xn(i,e)}};ZC.CtrlCmd=2048;ZC.Shift=1024;ZC.Alt=512;ZC.WinCtrl=256;function kle(){return{editor:void 0,languages:void 0,CancellationTokenSource:po,Emitter:Q,KeyCode:wW,KeyMod:ZC,Position:q,Range:E,Selection:Se,SelectionDirection:NW,MarkerSeverity:CW,MarkerTag:yW,Uri:$,Token:eb}}var LSe="$initialize",Rte=!1;function uV(i){gc&&(Rte||(Rte=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}var gV=class{constructor(e,t,n,o){this.vsWorker=e,this.req=t,this.method=n,this.args=o,this.type=0}},$L=class{constructor(e,t,n,o){this.vsWorker=e,this.seq=t,this.res=n,this.err=o,this.type=1}},pV=class{constructor(e,t,n,o){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=o,this.type=2}},mV=class{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}},fV=class{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}},_V=class{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){let n=String(++this._lastSentReq);return new Promise((o,r)=>{this._pendingReplies[n]={resolve:o,reject:r},this._send(new gV(this._workerId,n,e,t))})}listen(e,t){let n=null,o=new Q({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,o),this._send(new pV(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new fV(this._workerId,n)),n=null}});return o.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(n=>{this._send(new $L(this._workerId,t,n,void 0))},n=>{n.detail instanceof Error&&(n.detail=VF(n.detail)),this._send(new $L(this._workerId,t,void 0,VF(n)))})}_handleSubscribeEventMessage(e){let t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(o=>{this._send(new mV(this._workerId,t,o))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}},vV=class extends J{constructor(e,t,n){super();let o=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{o?.(c)})),this._protocol=new _V({sendMessage:(c,d)=>{this._worker.postMessage(c,d)},handleMessage:(c,d)=>{if(typeof n[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(n[c].apply(n,d))}catch(h){return Promise.reject(h)}},handleEvent:(c,d)=>{if(Lle(c)){let h=n[c].call(n,d);if(typeof h!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return h}if(Ele(c)){let h=n[c];if(typeof h!="function")throw new Error(`Missing event ${c} on main thread host.`);return h}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let r=null;typeof cn.require<"u"&&typeof cn.require.getConfig=="function"?r=cn.require.getConfig():typeof cn.requirejs<"u"&&(r=cn.requirejs.s.contexts._.config);let s=JG(n);this._onModuleLoaded=this._protocol.sendMessage(LSe,[this._worker.getId(),JSON.parse(JSON.stringify(r)),t,s]);let a=(c,d)=>this._request(c,d),l=(c,d)=>this._protocol.listen(c,d);this._lazyProxy=new Promise((c,d)=>{o=d,this._onModuleLoaded.then(h=>{c(ISe(h,a,l))},h=>{d(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,o)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,o)},o)})}_onError(e,t){console.error(e),console.info(t)}};function Ele(i){return i[0]==="o"&&i[1]==="n"&&Dl(i.charCodeAt(2))}function Lle(i){return/^onDynamic/.test(i)&&Dl(i.charCodeAt(9))}function ISe(i,e,t){let n=s=>function(){let a=Array.prototype.slice.call(arguments,0);return e(s,a)},o=s=>function(a){return t(s,a)},r={};for(let s of i){if(Lle(s)){r[s]=o(s);continue}if(Ele(s)){r[s]=t(s,void 0);continue}r[s]=n(s)}return r}var qR,Fte=(qR=window.trustedTypes)===null||qR===void 0?void 0:qR.createPolicy("defaultWorkerFactory",{createScriptURL:i=>i});function TSe(i){if(cn.MonacoEnvironment){if(typeof cn.MonacoEnvironment.getWorker=="function")return cn.MonacoEnvironment.getWorker("workerMain.js",i);if(typeof cn.MonacoEnvironment.getWorkerUrl=="function"){let e=cn.MonacoEnvironment.getWorkerUrl("workerMain.js",i);return new Worker(Fte?Fte.createScriptURL(e):e,{name:i})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function MSe(i){return typeof i.then=="function"}var AV=class{constructor(e,t,n,o,r){this.id=t;let s=TSe(n);MSe(s)?this.worker=s:this.worker=Promise.resolve(s),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){o(l.data)},a.onmessageerror=r,typeof a.addEventListener=="function"&&a.addEventListener("error",r)})}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)===null||n===void 0||n.then(o=>o.postMessage(e,t))}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(t=>t.terminate()),this.worker=null}},GL=class i{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let o=++i.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new AV(e,o,this._label||"anonymous"+o,t,r=>{uV(r),this._webWorkerFailedBeforeError=r,n(r)})}};GL.LAST_WORKER_ID=0;var NSe=3;function Ile(i,e,t,n){return new s0(i,e,t).ComputeDiff(n)}var YL=class{constructor(e){let t=[],n=[];for(let o=0,r=e.length;o<r;o++)t[o]=CV(e[o],1),n[o]=yV(e[o],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){let e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){let o=[],r=[],s=[],a=0;for(let l=t;l<=n;l++){let c=this.lines[l],d=e?this._startColumns[l]:1,h=e?this._endColumns[l]:c.length+1;for(let u=d;u<h;u++)o[a]=c.charCodeAt(u-1),r[a]=l+1,s[a]=u,a++;!e&&l<n&&(o[a]=10,r[a]=l+1,s[a]=c.length+1,a++)}return new bV(o,r,s)}},bV=class{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}},Fw=class i{constructor(e,t,n,o,r,s,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=o,this.modifiedStartLineNumber=r,this.modifiedStartColumn=s,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){let o=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),s=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new i(o,r,s,a,l,c,d,h)}};function RSe(i){if(i.length<=1)return i;let e=[i[0]],t=e[0];for(let n=1,o=i.length;n<o;n++){let r=i[n],s=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(s,a)<NSe?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}var Z1=class i{constructor(e,t,n,o,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=o,this.charChanges=r}static createFromDiffResult(e,t,n,o,r,s,a){let l,c,d,h,u;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=o.getStartLineNumber(t.modifiedStart)-1,h=0):(d=o.getStartLineNumber(t.modifiedStart),h=o.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),s&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){let g=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),p=o.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(g.getElements().length>0&&p.getElements().length>0){let f=Ile(g,p,r,!0).changes;a&&(f=RSe(f)),u=[];for(let v=0,b=f.length;v<b;v++)u.push(Fw.createFromDiffChange(f[v],g,p))}}return new i(l,c,d,h,u)}},wV=class{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new YL(e),this.modified=new YL(t),this.continueLineDiff=Bte(n.maxComputationTime),this.continueCharDiff=Bte(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};let e=Ile(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){let a=[];for(let l=0,c=t.length;l<c;l++)a.push(Z1.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}let o=[],r=0,s=0;for(let a=-1,l=t.length;a<l;a++){let c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,h=c?c.modifiedStart:this.modifiedLines.length;for(;r<d&&s<h;){let u=this.originalLines[r],g=this.modifiedLines[s];if(u!==g){{let p=CV(u,1),f=CV(g,1);for(;p>1&&f>1;){let v=u.charCodeAt(p-2),b=g.charCodeAt(f-2);if(v!==b)break;p--,f--}(p>1||f>1)&&this._pushTrimWhitespaceCharChange(o,r+1,1,p,s+1,1,f)}{let p=yV(u,1),f=yV(g,1),v=u.length+1,b=g.length+1;for(;p<v&&f<b;){let A=u.charCodeAt(p-1),w=u.charCodeAt(f-1);if(A!==w)break;p++,f++}(p<v||f<b)&&this._pushTrimWhitespaceCharChange(o,r+1,p,v,s+1,f,b)}}r++,s++}c&&(o.push(Z1.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,s+=c.modifiedLength)}return{quitEarly:n,changes:o}}_pushTrimWhitespaceCharChange(e,t,n,o,r,s,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,o,r,s,a))return;let l;this.shouldComputeCharChanges&&(l=[new Fw(t,n,t,o,r,s,r,a)]),e.push(new Z1(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,n,o,r,s,a){let l=e.length;if(l===0)return!1;let c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Fw(t,n,t,o,r,s,r,a)),!0):!1}};function CV(i,e){let t=rr(i);return t===-1?e:t+1}function yV(i,e){let t=Ol(i);return t===-1?e:t+2}function Bte(i){if(i===0)return()=>!0;let e=Date.now();return()=>Date.now()-e<i}var JL=class{constructor(e,t,n,o){this._uri=e,this._lines=t,this._eol=n,this._versionId=o,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);let t=e.changes;for(let n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new q(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let o=0;o<t;o++)n[o]=this._lines[o].length+e;this._lineStarts=new G5(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=il(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let o=new Uint32Array(n.length-1);for(let r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),o[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,o)}},SV=class{constructor(e,t,n){let o=new Uint8Array(e*t);for(let r=0,s=e*t;r<s;r++)o[r]=n;this._data=o,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}},DV=class{constructor(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++){let[a,l,c]=e[r];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;let o=new SV(n,t,0);for(let r=0,s=e.length;r<s;r++){let[a,l,c]=e[r];o.set(a,l,c)}this._states=o,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}},$R=null;function FSe(){return $R===null&&($R=new DV([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),$R}var Nv=null;function BSe(){if(Nv===null){Nv=new k_(0);let i=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let t=0;t<i.length;t++)Nv.set(i.charCodeAt(t),1);let e=".,;:";for(let t=0;t<e.length;t++)Nv.set(e.charCodeAt(t),2)}return Nv}var xV=class i{static _createLink(e,t,n,o,r){let s=r-1;do{let a=t.charCodeAt(s);if(e.get(a)!==2)break;s--}while(s>o);if(o>0){let a=t.charCodeAt(o-1),l=t.charCodeAt(s);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&s--}return{range:{startLineNumber:n,startColumn:o+1,endLineNumber:n,endColumn:s+2},url:t.substring(o,s+1)}}static computeLinks(e,t=FSe()){let n=BSe(),o=[];for(let r=1,s=e.getLineCount();r<=s;r++){let a=e.getLineContent(r),l=a.length,c=0,d=0,h=0,u=1,g=!1,p=!1,f=!1,v=!1;for(;c<l;){let b=!1,A=a.charCodeAt(c);if(u===13){let w;switch(A){case 40:g=!0,w=0;break;case 41:w=g?0:1;break;case 91:f=!0,p=!0,w=0;break;case 93:f=!1,w=p?0:1;break;case 123:v=!0,w=0;break;case 125:w=v?0:1;break;case 39:w=h===39?1:0;break;case 34:w=h===34?1:0;break;case 96:w=h===96?1:0;break;case 42:w=h===42?1:0;break;case 124:w=h===124?1:0;break;case 32:w=f?0:1;break;default:w=n.get(A)}w===1&&(o.push(i._createLink(n,a,r,d,c)),b=!0)}else if(u===12){let w;A===91?(p=!0,w=0):w=n.get(A),w===1?b=!0:u=13}else u=t.nextState(u,A),u===0&&(b=!0);b&&(u=1,g=!1,p=!1,v=!1,d=c+1,h=A),c++}u===13&&o.push(i._createLink(n,a,r,d,l))}return o}};function PSe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:xV.computeLinks(i)}var Bw=class{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,o,r){if(e&&t){let s=this.doNavigateValueSet(t,r);if(s)return{range:e,value:s}}if(n&&o){let s=this.doNavigateValueSet(o,r);if(s)return{range:n,value:s}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),o=Number(e),r=parseFloat(e);return!isNaN(o)&&!isNaN(r)&&o===r?o===0&&!t?null:(o=Math.floor(o*n),o+=t?n:-n,String(o/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let o=null;for(let r=0,s=e.length;o===null&&r<s;r++)o=this.valueSetReplace(e[r],t,n);return o}valueSetReplace(e,t,n){let o=e.indexOf(t);return o>=0?(o+=n?1:-1,o<0?o=e.length-1:o%=e.length,e[o]):null}};Bw.INSTANCE=new Bw;var Nu=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},kV=class extends JL{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=L_(e.column,hY(t),this._lines[e.lineNumber-1],0);return n?new E(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){let t=this._lines,n=this._wordenize.bind(this),o=0,r="",s=0,a=[];return{*[Symbol.iterator](){for(;;)if(s<a.length){let l=r.substring(a[s].start,a[s].end);s+=1,yield l}else if(o<t.length)r=t[o],a=n(r,e),s=0,o+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],o=this._wordenize(n,t),r=[];for(let s of o)r.push({word:n.substring(s.start,s.end),startColumn:s.start+1,endColumn:s.end+1});return r}_wordenize(e,t){let n=[],o;for(t.lastIndex=0;(o=t.exec(e))&&o[0].length!==0;)n.push({start:o.index,end:o.index+o[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,o=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(let s=n+1;s<o;s++)r.push(this._lines[s]);return r.push(this._lines[o].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){let t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!q.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,o=!1;if(t<1)t=1,n=1,o=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,o=!0;else{let r=this._lines[t-1].length+1;n<1?(n=1,o=!0):n>r&&(n=r,o=!0)}return o?{lineNumber:t,column:n}:e}},N0=class i{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new kV($.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){this._models[e]&&this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return Nu(this,void 0,void 0,function*(){let o=this._getModel(e);return o?Aw.computeUnicodeHighlights(o,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,o){return Nu(this,void 0,void 0,function*(){let r=this._getModel(e),s=this._getModel(t);return!r||!s?null:i.computeDiff(r,s,n,o)})}static computeDiff(e,t,n,o){let r=e.getLinesContent(),s=t.getLinesContent(),a=new wV(r,s,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:o}).computeDiff(),l=a.changes.length>0?!1:this._modelsAreIdentical(e,t);return{quitEarly:a.quitEarly,identical:l,changes:a.changes}}static _modelsAreIdentical(e,t){let n=e.getLineCount(),o=t.getLineCount();if(n!==o)return!1;for(let r=1;r<=n;r++){let s=e.getLineContent(r),a=t.getLineContent(r);if(s!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return Nu(this,void 0,void 0,function*(){let n=this._getModel(e);if(!n)return t;let o=[],r;t=t.slice(0).sort((s,a)=>{if(s.range&&a.range)return E.compareRangesUsingStarts(s.range,a.range);let l=s.range?0:1,c=a.range?0:1;return l-c});for(let{range:s,text:a,eol:l}of t){if(typeof l=="number"&&(r=l),E.isEmpty(s)&&!a)continue;let c=n.getValueInRange(s);if(a=a.replace(/\r\n|\n|\r/g,n.eol),c===a)continue;if(Math.max(a.length,c.length)>i._diffLimit){o.push({range:s,text:a});continue}let d=Y1e(c,a,!1),h=n.offsetAt(E.lift(s).getStartPosition());for(let u of d){let g=n.positionAt(h+u.originalStart),p=n.positionAt(h+u.originalStart+u.originalLength),f={text:a.substr(u.modifiedStart,u.modifiedLength),range:{startLineNumber:g.lineNumber,startColumn:g.column,endLineNumber:p.lineNumber,endColumn:p.column}};n.getValueInRange(f.range)!==f.text&&o.push(f)}}return typeof r=="number"&&o.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),o})}computeLinks(e){return Nu(this,void 0,void 0,function*(){let t=this._getModel(e);return t?PSe(t):null})}textualSuggest(e,t,n,o){return Nu(this,void 0,void 0,function*(){let r=new sr(!0),s=new RegExp(n,o),a=new Set;e:for(let l of e){let c=this._getModel(l);if(c){for(let d of c.words(s))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>i._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}})}computeWordRanges(e,t,n,o){return Nu(this,void 0,void 0,function*(){let r=this._getModel(e);if(!r)return Object.create(null);let s=new RegExp(n,o),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let c=r.getLineWords(l,s);for(let d of c){if(!isNaN(Number(d.word)))continue;let h=a[d.word];h||(h=[],a[d.word]=h),h.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,n,o,r){return Nu(this,void 0,void 0,function*(){let s=this._getModel(e);if(!s)return null;let a=new RegExp(o,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=s.getValueInRange(t),c=s.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;let d=s.getValueInRange(c);return Bw.INSTANCE.navigateValueSet(t,l,c,d,n)})}loadForeignModule(e,t,n){let o={host:xhe(n,(r,s)=>this._host.fhr(r,s)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(JG(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}};N0._diffLimit=1e5;N0._suggestionsLimit=1e4;typeof importScripts=="function"&&(cn.monaco=kle());var OSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Rv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},EV=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Pte=60*1e3,Ote=5*60*1e3;function ig(i,e){let t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}var LV=class extends J{constructor(i,e,t,n,o){super(),this._modelService=i,this._workerManager=this._register(new TV(this._modelService,n)),this._logService=t,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,s)=>ig(this._modelService,r.uri)?this._workerManager.withWorker().then(a=>a.computeLinks(r.uri)).then(a=>a&&{links:a}):Promise.resolve({links:[]})})),this._register(o.completionProvider.register("*",new IV(this._workerManager,e,this._modelService,n)))}dispose(){super.dispose()}canComputeUnicodeHighlights(i){return ig(this._modelService,i)}computedUnicodeHighlights(i,e,t){return this._workerManager.withWorker().then(n=>n.computedUnicodeHighlights(i,e,t))}computeDiff(i,e,t,n){return this._workerManager.withWorker().then(o=>o.computeDiff(i,e,t,n))}computeMoreMinimalEdits(i,e){if(Dn(e)){if(!ig(this._modelService,i))return Promise.resolve(e);let t=sr.create(!0),n=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(i,e));return n.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",i.toString(!0),t.elapsed())),Promise.race([n,Yl(1e3).then(()=>e)])}else return Promise.resolve(void 0)}canNavigateValueSet(i){return ig(this._modelService,i)}navigateValueSet(i,e,t){return this._workerManager.withWorker().then(n=>n.navigateValueSet(i,e,t))}canComputeWordRanges(i){return ig(this._modelService,i)}computeWordRanges(i,e){return this._workerManager.withWorker().then(t=>t.computeWordRanges(i,e))}};LV=OSe([Rv(0,li),Rv(1,PJ),Rv(2,no),Rv(3,Yi),Rv(4,Te)],LV);var IV=class{constructor(e,t,n,o){this.languageConfigurationService=o,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return EV(this,void 0,void 0,function*(){let n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;let o=[];if(n.wordBasedSuggestionsMode==="currentDocument")ig(this._modelService,e.uri)&&o.push(e.uri);else for(let d of this._modelService.getModels())ig(this._modelService,d.uri)&&(d===e?o.unshift(d.uri):(n.wordBasedSuggestionsMode==="allDocuments"||d.getLanguageId()===e.getLanguageId())&&o.push(d.uri));if(o.length===0)return;let r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),s=e.getWordAtPosition(t),a=s?new E(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):E.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),c=yield(yield this._workerManager.withWorker()).textualSuggest(o,s?.word,r);if(c)return{duration:c.duration,suggestions:c.words.map(d=>({kind:18,label:d,insertText:d,range:{insert:l,replace:a}}))}})}},TV=class extends J{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new ip).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(Ote/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){this._editorWorkerClient&&this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){this._editorWorkerClient&&new Date().getTime()-this._lastWorkerUsedTime>Ote&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new ZL(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}},MV=class extends J{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let o=new ip;o.cancelAndSet(()=>this._checkStopModelSync(),Math.round(Pte/2)),this._register(o)}}dispose(){for(let e in this._syncedModels)st(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(let n of e){let o=n.toString();this._syncedModels[o]||this._beginModelSync(n,t),this._syncedModels[o]&&(this._syncedModelsLastUsedTime[o]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>Pte&&t.push(n);for(let n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let o=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});let r=new ne;r.add(n.onDidChangeContent(s=>{this._proxy.acceptModelChanged(o.toString(),s)})),r.add(n.onWillDispose(()=>{this._stopModelSync(o)})),r.add(ct(()=>{this._proxy.acceptRemovedModel(o)})),this._syncedModels[o]=r}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],st(t)}},XL=class{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}},eA=class{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}},ZL=class extends J{constructor(e,t,n,o){super(),this.languageConfigurationService=o,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new GL(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new vV(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new eA(this)))}catch(e){uV(e),this._worker=new XL(new N0(new eA(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(uV(e),this._worker=new XL(new N0(new eA(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new MV(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return EV(this,void 0,void 0,function*(){return this._disposed?Promise.reject(sD()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(o=>o.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,o){return this._withSyncedResources([e,t],!0).then(r=>r.computeDiff(e.toString(),t.toString(),n,o))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return EV(this,void 0,void 0,function*(){let o=yield this._withSyncedResources(e),r=n.source,s=LS(n);return o.textualSuggest(e.map(a=>a.toString()),t,r,s)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let o=this._modelService.getModel(e);if(!o)return Promise.resolve(null);let r=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId()).getWordDefinition(),s=r.source,a=LS(r);return n.computeWordRanges(e.toString(),t,s,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(o=>{let r=this._modelService.getModel(e);if(!r)return null;let s=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId()).getWordDefinition(),a=s.source,l=LS(s);return o.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}};function HSe(i,e,t){return new NV(i,e,t)}var NV=class extends ZL{constructor(e,t,n){super(e,n.keepIdleModels||!1,n.label,t),this._foreignModuleId=n.moduleId,this._foreignModuleCreateData=n.createData||null,this._foreignModuleHost=n.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{let t=this._foreignModuleHost?JG(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;let o=(a,l)=>e.fmr(a,l),r=(a,l)=>function(){let c=Array.prototype.slice.call(arguments,0);return l(a,c)},s={};for(let a of n)s[a]=r(a,o);return s})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}};function WSe(i){return Array.isArray(i)}function zSe(i){return!WSe(i)}function Tle(i){return typeof i=="string"}function Hte(i){return!Tle(i)}function jm(i){return!i}function Lh(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function Wte(i){return i.replace(/[&<>'"_]/g,"-")}function VSe(i,e){console.log(`${i.languageId}: ${e}`)}function wi(i,e){return new Error(`${i.languageId}: ${e}`)}function dh(i,e,t,n,o){let r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,s=null;return e.replace(r,function(a,l,c,d,h,u,g,p,f){return jm(c)?jm(d)?!jm(h)&&h<n.length?Lh(i,n[h]):!jm(g)&&i&&typeof i[g]=="string"?i[g]:(s===null&&(s=o.split("."),s.unshift(o)),!jm(u)&&u<s.length?Lh(i,s[u]):""):Lh(i,t):"$"})}function nS(i,e){let t=e;for(;t&&t.length>0;){let n=i.tokenizer[t];if(n)return n;let o=t.lastIndexOf(".");o<0?t=null:t=t.substr(0,o)}return null}function USe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;let n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return!1}var QSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},jSe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Mle=5,Qp=class{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new o_(e,t);let n=o_.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let o=this._entries[n];return o||(o=new o_(e,t),this._entries[n]=o,o)}};Qp._INSTANCE=new Qp(Mle);var o_=class i{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return i._equals(this,e)}push(e){return Qp.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Qp.create(this.parent,e)}},bf=class i{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new i(this.languageId,this.state)}},Il=class{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new tA(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new tA(e,t);let n=o_.getStackElementId(e),o=this._entries[n];return o||(o=new tA(e,null),this._entries[n]=o,o)}};Il._INSTANCE=new Il(Mle);var tA=class i{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Il.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof i)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}},RV=class{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new eb(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,o){let r=n.languageId,s=n.state,a=Ui.get(r);if(!a)return this.enterLanguage(r),this.emit(o,""),s;let l=a.tokenize(e,t,s);if(o!==0)for(let c of l.tokens)this._tokens.push(new eb(c.offset+o,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new tb(this._tokens,e)}},FV=class i{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let o=e!==null?e.length:0,r=t.length,s=n!==null?n.length:0;if(o===0&&r===0&&s===0)return new Uint32Array(0);if(o===0&&r===0)return n;if(r===0&&s===0)return e;let a=new Uint32Array(o+r+s);e!==null&&a.set(e);for(let l=0;l<r;l++)a[o+l]=t[l];return n!==null&&a.set(n,o+r),a}nestedLanguageTokenize(e,t,n,o){let r=n.languageId,s=n.state,a=Ui.get(r);if(!a)return this.enterLanguage(r),this.emit(o,""),s;let l=a.tokenizeEncoded(e,t,s);if(o!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=o;return this._prependTokens=i._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new H_(i._merge(this._prependTokens,this._tokens,null),e)}},Pw=class Nle{constructor(e,t,n,o,r){this._configurationService=r,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=o,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let s=!1;this._tokenizationRegistryListener=Ui.onDidChange(a=>{if(s)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){let h=a.changedLanguages[c];if(this._embeddedLanguages[h]){l=!0;break}}l&&(s=!0,Ui.fire([this._languageId]),s=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedLanguages){let n=Ui.get(t);if(n){if(n instanceof Nle){let o=n.getLoadStatus();o.loaded===!1&&e.push(o.promise)}continue}Ui.isResolved(t)||e.push(Ui.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=Qp.create(null,this._lexer.start);return Il.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return PY(this._languageId,n);let o=new RV,r=this._tokenize(e,t,n,o);return o.finalize(r)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return jM(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);let o=new FV(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),r=this._tokenize(e,t,n,o);return o.finalize(r)}_tokenize(e,t,n,o){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,o):this._myTokenize(e,t,n,0,o)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=nS(this._lexer,t.stack.state),!n))throw wi(this._lexer,"tokenizer state is not defined: "+t.stack.state);let o=-1,r=!1;for(let s of n){if(!Hte(s.action)||s.action.nextEmbedded!=="@pop")continue;r=!0;let a=s.regex,l=s.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}let c=e.search(a);c===-1||c!==0&&s.matchOnlyAtLineStart||(o===-1||c<o)&&(o=c)}if(!r)throw wi(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return o}_nestedTokenize(e,t,n,o,r){let s=this._findLeavingNestedLanguageOffset(e,n);if(s===-1){let c=r.nestedLanguageTokenize(e,t,n.embeddedLanguageData,o);return Il.create(n.stack,new bf(n.embeddedLanguageData.languageId,c))}let a=e.substring(0,s);a.length>0&&r.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,o);let l=e.substring(s);return this._myTokenize(l,t,n,o+s,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,o,r){r.enterLanguage(this._languageId);let s=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length,c=n.embeddedLanguageData,d=n.stack,h=0,u=null,g=!0;for(;g||h<l;){let p=h,f=d.depth,v=u?u.groups.length:0,b=d.state,A=null,w=null,C=null,k=null,L=null;if(u){A=u.matches;let M=u.groups.shift();w=M.matched,C=M.action,k=u.rule,u.groups.length===0&&(u=null)}else{if(!g&&h>=l)break;g=!1;let M=this._lexer.tokenizer[b];if(!M&&(M=nS(this._lexer,b),!M))throw wi(this._lexer,"tokenizer state is not defined: "+b);let O=a.substr(h);for(let H of M)if((h===0||!H.matchOnlyAtLineStart)&&(A=O.match(H.regex),A)){w=A[0],C=H.action;break}}if(A||(A=[""],w=""),C||(h<l&&(A=[a.charAt(h)],w=A[0]),C=this._lexer.defaultToken),w===null)break;for(h+=w.length;zSe(C)&&Hte(C)&&C.test;)C=C.test(w,A,b,h===l);let S=null;if(typeof C=="string"||Array.isArray(C))S=C;else if(C.group)S=C.group;else if(C.token!==null&&C.token!==void 0){if(C.tokenSubst?S=dh(this._lexer,C.token,w,A,b):S=C.token,C.nextEmbedded)if(C.nextEmbedded==="@pop"){if(!c)throw wi(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw wi(this._lexer,"cannot enter embedded language from within an embedded language");L=dh(this._lexer,C.nextEmbedded,w,A,b)}if(C.goBack&&(h=Math.max(0,h-C.goBack)),C.switchTo&&typeof C.switchTo=="string"){let M=dh(this._lexer,C.switchTo,w,A,b);if(M[0]==="@"&&(M=M.substr(1)),nS(this._lexer,M))d=d.switchTo(M);else throw wi(this._lexer,"trying to switch to a state '"+M+"' that is undefined in rule: "+this._safeRuleName(k))}else{if(C.transform&&typeof C.transform=="function")throw wi(this._lexer,"action.transform not supported");if(C.next)if(C.next==="@push"){if(d.depth>=this._lexer.maxStack)throw wi(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(b)}else if(C.next==="@pop"){if(d.depth<=1)throw wi(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(k));d=d.pop()}else if(C.next==="@popall")d=d.popall();else{let M=dh(this._lexer,C.next,w,A,b);if(M[0]==="@"&&(M=M.substr(1)),nS(this._lexer,M))d=d.push(M);else throw wi(this._lexer,"trying to set a next state '"+M+"' that is undefined in rule: "+this._safeRuleName(k))}}C.log&&typeof C.log=="string"&&VSe(this._lexer,this._lexer.languageId+": "+dh(this._lexer,C.log,w,A,b))}if(S===null)throw wi(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(k));let y=M=>{let O=this._languageService.getLanguageIdByLanguageName(M)||this._languageService.getLanguageIdByMimeType(M)||M,H=this._getNestedEmbeddedLanguageData(O);if(h<l){let D=e.substr(h);return this._nestedTokenize(D,t,Il.create(d,H),o+h,r)}else return Il.create(d,H)};if(Array.isArray(S)){if(u&&u.groups.length>0)throw wi(this._lexer,"groups cannot be nested: "+this._safeRuleName(k));if(A.length!==S.length+1)throw wi(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(k));let M=0;for(let O=1;O<A.length;O++)M+=A[O].length;if(M!==w.length)throw wi(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(k));u={rule:k,matches:A,groups:[]};for(let O=0;O<S.length;O++)u.groups[O]={action:S[O],matched:A[O+1]};h-=w.length;continue}else{if(S==="@rematch"&&(h-=w.length,w="",A=null,S="",L!==null))return y(L);if(w.length===0){if(l===0||f!==d.depth||b!==d.state||(u?u.groups.length:0)!==v)continue;throw wi(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(k))}let M=null;if(Tle(S)&&S.indexOf("@brackets")===0){let O=S.substr(9),H=KSe(this._lexer,w);if(!H)throw wi(this._lexer,"@brackets token returned but no bracket defined as: "+w);M=Wte(H.token+O)}else{let O=S===""?"":S+this._lexer.tokenPostfix;M=Wte(O)}p<s&&r.emit(p+o,M)}if(L!==null)return y(L)}return Il.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new bf(e,U_);e!==this._languageId&&(Ui.getOrCreate(e),this._embeddedLanguages[e]=!0);let t=Ui.get(e);return t?new bf(e,t.getInitialState()):new bf(e,U_)}};Pw=QSe([jSe(4,Ot)],Pw);function KSe(i,e){if(!e)return null;e=Lh(i,e);let t=i.brackets;for(let n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}var qSe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},GR,zte=(GR=window.trustedTypes)===null||GR===void 0?void 0:GR.createPolicy("standaloneColorizer",{createHTML:i=>i}),Ow=class{static colorizeElement(e,t,n,o){o=o||{};let r=o.theme||"vs",s=o.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!s)return console.error("Mode not detected"),Promise.resolve();let a=t.getLanguageIdByMimeType(s)||s;e.setTheme(r);let l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+r;let c=d=>{var h;let u=(h=zte?.createHTML(d))!==null&&h!==void 0?h:d;n.innerHTML=u};return this.colorize(t,l||"",a,o).then(c,d=>console.error(d))}static colorize(e,t,n,o){return qSe(this,void 0,void 0,function*(){let r=e.languageIdCodec,s=4;o&&typeof o.tabSize=="number"&&(s=o.tabSize),aY(t)&&(t=t.substr(1));let a=il(t);if(!e.isRegisteredLanguageId(n))return Vte(a,s,r);let l=yield Ui.getOrCreate(n);return l?$Se(a,s,l,r):Vte(a,s,r)})}static colorizeLine(e,t,n,o,r=4){let s=Rs.isBasicASCII(e,t),a=Rs.containsRTL(e,s,n);return UM(new Xl(!1,!0,e,!1,s,a,0,o,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let o=e.getLineContent(t);e.tokenization.forceTokenization(t);let r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(o,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,n)}};function $Se(i,e,t,n){return new Promise((o,r)=>{let s=()=>{let a=GSe(i,e,t,n);if(t instanceof Pw){let l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(s,r);return}}o(a)};s()})}function Vte(i,e,t){let n=[],o=new Uint32Array(2);o[0]=0,o[1]=33587200;for(let r=0,s=i.length;r<s;r++){let a=i[r];o[0]=a.length;let l=new No(o,a,t),c=Rs.isBasicASCII(a,!0),d=Rs.containsRTL(a,c,!0),h=UM(new Xl(!1,!0,a,!1,c,d,0,l,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(h.html),n.push("<br/>")}return n.join("")}function GSe(i,e,t,n){let o=[],r=t.getInitialState();for(let s=0,a=i.length;s<a;s++){let l=i[s],c=t.tokenizeEncoded(l,!0,r);No.convertToEndOffset(c.tokens,l.length);let d=new No(c.tokens,l,n),h=Rs.isBasicASCII(l,!0),u=Rs.containsRTL(l,h,!0),g=UM(new Xl(!1,!0,l,!1,h,u,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));o=o.concat(g.html),o.push("<br/>"),r=c.endState}return o.join("")}var YSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},JSe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},XSe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},BV=class extends J{constructor(i){super(),this._themeService=i,this._onCodeEditorAdd=this._register(new Q),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Q),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new Q),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new Q),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new ko,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(i){this._codeEditors[i.getId()]=i,this._onCodeEditorAdd.fire(i)}removeCodeEditor(i){delete this._codeEditors[i.getId()]&&this._onCodeEditorRemove.fire(i)}listCodeEditors(){return Object.keys(this._codeEditors).map(i=>this._codeEditors[i])}addDiffEditor(i){this._diffEditors[i.getId()]=i,this._onDiffEditorAdd.fire(i)}removeDiffEditor(i){delete this._diffEditors[i.getId()]&&this._onDiffEditorRemove.fire(i)}listDiffEditors(){return Object.keys(this._diffEditors).map(i=>this._diffEditors[i])}getFocusedCodeEditor(){let i=null,e=this.listCodeEditors();for(let t of e){if(t.hasTextFocus())return t;t.hasWidgetFocus()&&(i=t)}return i}removeDecorationType(i){let e=this._decorationOptionProviders.get(i);e&&(e.refCount--,e.refCount<=0&&(this._decorationOptionProviders.delete(i),e.dispose(),this.listCodeEditors().forEach(t=>t.removeDecorationsByType(i))))}setModelProperty(i,e,t){let n=i.toString(),o;this._modelProperties.has(n)?o=this._modelProperties.get(n):(o=new Map,this._modelProperties.set(n,o)),o.set(e,t)}getModelProperty(i,e){let t=i.toString();if(this._modelProperties.has(t))return this._modelProperties.get(t).get(e)}openCodeEditor(i,e,t){return XSe(this,void 0,void 0,function*(){for(let n of this._codeEditorOpenHandlers){let o=yield n(i,e,t);if(o!==null)return o}return null})}registerCodeEditorOpenHandler(i){let e=this._codeEditorOpenHandlers.unshift(i);return ct(e)}};BV=YSe([JSe(0,mi)],BV);var ZSe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Ute=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},eDe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},eI=class extends BV{constructor(i,e){super(e),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=i.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((t,n,o)=>eDe(this,void 0,void 0,function*(){return n?this.doOpenEditor(n,t):null}))}_checkContextKey(){let i=!1;for(let e of this.listCodeEditors())if(!e.isSimpleWidget){i=!0;break}this._editorIsOpen.set(i)}setActiveCodeEditor(i){this._activeCodeEditor=i}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(i,e){if(!this.findModel(i,e.resource)){if(e.resource){let n=e.resource.scheme;if(n===Oe.http||n===Oe.https)return eoe(e.resource.toString()),i}return null}let t=e.options?e.options.selection:null;if(t)if(typeof t.endLineNumber=="number"&&typeof t.endColumn=="number")i.setSelection(t),i.revealRangeInCenter(t,1);else{let n={lineNumber:t.startLineNumber,column:t.startColumn};i.setPosition(n),i.revealPositionInCenter(n,1)}return i}findModel(i,e){let t=i.getModel();return t&&t.uri.toString()!==e.toString()?null:t}};eI=ZSe([Ute(0,Ze),Ute(1,mi)],eI);Ke(Ft,eI);var cv=ze("layoutService"),Rle=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Fle=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},tI=class{constructor(i){this._codeEditorService=i,this.onDidLayout=Z.None,this.offset={top:0,quickPickTop:0}}get dimension(){return this._dimension||(this._dimension=AM(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var i;(i=this._codeEditorService.getFocusedCodeEditor())===null||i===void 0||i.focus()}};tI=Rle([Fle(0,Ft)],tI);var PV=class extends tI{constructor(i,e){super(e),this._container=i}get hasContainer(){return!1}get container(){return this._container}};PV=Rle([Fle(1,Ft)],PV);Ke(cv,tI);var tDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Qte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},oS=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function rS(i){return i.scheme===Oe.file?i.fsPath:i.path}var Ble=0,wf=class{constructor(e,t,n,o,r,s,a){this.id=++Ble,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=o,this.groupOrder=r,this.sourceId=s,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}},iI=class{constructor(e,t){this.resourceLabel=e,this.reason=t}},nI=class{constructor(){this.elements=new Map}createMessage(){let e=[],t=[];for(let[,o]of this.elements)(o.reason===0?e:t).push(o.resourceLabel);let n=[];return e.length>0&&n.push(m({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(m({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}},OV=class{constructor(e,t,n,o,r,s,a){this.id=++Ble,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=o,this.groupOrder=r,this.sourceId=s,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new nI),this.removedResources.has(t)||this.removedResources.set(t,new iI(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new nI),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new iI(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}},oI=class{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(let e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(let e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(let n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(let n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(let t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){let t=[];for(let n=0,o=this._past.length;n<o;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new uk(e,t)}restoreSnapshot(e){let t=e.elements.length,n=!0,o=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,o++){let c=this._past[a];n&&(o>=t||c.id!==e.elements[o])&&(n=!1,r=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let s=-1;for(let a=this._future.length-1;a>=0;a--,o++){let l=this._future[a];n&&(o>=t||l.id!==e.elements[o])&&(n=!1,s=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),s!==-1&&(this._future=this._future.slice(s+1)),this.versionId++}getElements(){let e=[],t=[];for(let n of this._past)e.push(n.actual);for(let n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}},iA=class{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}},Ple=new oI("","");Ple.locked=!0;var HV=class{constructor(i,e){this._dialogService=i,this._notificationService=e,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(i){for(let e of this._uriComparisonKeyComputers)if(e[0]===i.scheme)return e[1].getComparisonKey(i);return i.toString()}_print(i){console.log("------------------------------------"),console.log(`AFTER ${i}: `);let e=[];for(let t of this._editStacks)e.push(t[1].toString());console.log(e.join(`
`))}pushElement(i,e=Q_.None,t=Ll.None){if(i.type===0){let n=rS(i.resource),o=this.getUriComparisonKey(i.resource);this._pushElement(new wf(i,n,o,e.id,e.nextOrder(),t.id,t.nextOrder()))}else{let n=new Set,o=[],r=[];for(let s of i.resources){let a=rS(s),l=this.getUriComparisonKey(s);n.has(l)||(n.add(l),o.push(a),r.push(l))}o.length===1?this._pushElement(new wf(i,o[0],r[0],e.id,e.nextOrder(),t.id,t.nextOrder())):this._pushElement(new OV(i,o,r,e.id,e.nextOrder(),t.id,t.nextOrder()))}}_pushElement(i){for(let e=0,t=i.strResources.length;e<t;e++){let n=i.resourceLabels[e],o=i.strResources[e],r;this._editStacks.has(o)?r=this._editStacks.get(o):(r=new oI(n,o),this._editStacks.set(o,r)),r.pushElement(i)}}getLastElement(i){let e=this.getUriComparisonKey(i);if(this._editStacks.has(e)){let t=this._editStacks.get(e);if(t.hasFutureElements())return null;let n=t.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(i,e){let t=i.actual.split(),n=new Map;for(let o of t){let r=rS(o.resource),s=this.getUriComparisonKey(o.resource),a=new wf(o,r,s,0,0,0,0);n.set(a.strResource,a)}for(let o of i.strResources)e&&e.has(o)||this._editStacks.get(o).splitPastWorkspaceElement(i,n)}_splitFutureWorkspaceElement(i,e){let t=i.actual.split(),n=new Map;for(let o of t){let r=rS(o.resource),s=this.getUriComparisonKey(o.resource),a=new wf(o,r,s,0,0,0,0);n.set(a.strResource,a)}for(let o of i.strResources)e&&e.has(o)||this._editStacks.get(o).splitFutureWorkspaceElement(i,n)}removeElements(i){let e=typeof i=="string"?i:this.getUriComparisonKey(i);this._editStacks.has(e)&&(this._editStacks.get(e).dispose(),this._editStacks.delete(e))}setElementsValidFlag(i,e,t){let n=this.getUriComparisonKey(i);this._editStacks.has(n)&&this._editStacks.get(n).setElementsValidFlag(e,t)}createSnapshot(i){let e=this.getUriComparisonKey(i);return this._editStacks.has(e)?this._editStacks.get(e).createSnapshot(i):new uk(i,[])}restoreSnapshot(i){let e=this.getUriComparisonKey(i.resource);if(this._editStacks.has(e)){let t=this._editStacks.get(e);t.restoreSnapshot(i),!t.hasPastElements()&&!t.hasFutureElements()&&(t.dispose(),this._editStacks.delete(e))}}getElements(i){let e=this.getUriComparisonKey(i);return this._editStacks.has(e)?this._editStacks.get(e).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(i){if(!i)return[null,null];let e=null,t=null;for(let[n,o]of this._editStacks){let r=o.getClosestPastElement();r&&r.sourceId===i&&(!e||r.sourceOrder>e.sourceOrder)&&(e=r,t=n)}return[e,t]}canUndo(i){if(i instanceof Ll){let[,t]=this._findClosestUndoElementWithSource(i.id);return!!t}let e=this.getUriComparisonKey(i);return this._editStacks.has(e)?this._editStacks.get(e).hasPastElements():!1}_onError(i,e){Ye(i);for(let t of e.strResources)this.removeElements(t);this._notificationService.error(i)}_acquireLocks(i){for(let e of i.editStacks)if(e.locked)throw new Error("Cannot acquire edit stack lock");for(let e of i.editStacks)e.locked=!0;return()=>{for(let e of i.editStacks)e.locked=!1}}_safeInvokeWithLocks(i,e,t,n,o){let r=this._acquireLocks(t),s;try{s=e()}catch(a){return r(),n.dispose(),this._onError(a,i)}return s?s.then(()=>(r(),n.dispose(),o()),a=>(r(),n.dispose(),this._onError(a,i))):(r(),n.dispose(),o())}_invokeWorkspacePrepare(i){return oS(this,void 0,void 0,function*(){if(typeof i.actual.prepareUndoRedo>"u")return J.None;let e=i.actual.prepareUndoRedo();return typeof e>"u"?J.None:e})}_invokeResourcePrepare(i,e){if(i.actual.type!==1||typeof i.actual.prepareUndoRedo>"u")return e(J.None);let t=i.actual.prepareUndoRedo();return t?UG(t)?e(t):t.then(n=>e(n)):e(J.None)}_getAffectedEditStacks(i){let e=[];for(let t of i.strResources)e.push(this._editStacks.get(t)||Ple);return new iA(e)}_tryToSplitAndUndo(i,e,t,n){if(e.canSplit())return this._splitPastWorkspaceElement(e,t),this._notificationService.warn(n),new Cf(this._undo(i,0,!0));for(let o of e.strResources)this.removeElements(o);return this._notificationService.warn(n),new Cf}_checkWorkspaceUndo(i,e,t,n){if(e.removedResources)return this._tryToSplitAndUndo(i,e,e.removedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",e.label,e.removedResources.createMessage()));if(n&&e.invalidatedResources)return this._tryToSplitAndUndo(i,e,e.invalidatedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",e.label,e.invalidatedResources.createMessage()));let o=[];for(let s of t.editStacks)s.getClosestPastElement()!==e&&o.push(s.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(i,e,null,m({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",e.label,o.join(", ")));let r=[];for(let s of t.editStacks)s.locked&&r.push(s.resourceLabel);return r.length>0?this._tryToSplitAndUndo(i,e,null,m({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",e.label,r.join(", "))):t.isValid()?null:this._tryToSplitAndUndo(i,e,null,m({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",e.label))}_workspaceUndo(i,e,t){let n=this._getAffectedEditStacks(e),o=this._checkWorkspaceUndo(i,e,n,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(i,e,n,t)}_isPartOfUndoGroup(i){if(!i.groupId)return!1;for(let[,e]of this._editStacks){let t=e.getClosestPastElement();if(t){if(t===i){let n=e.getSecondClosestPastElement();if(n&&n.groupId===i.groupId)return!0}if(t.groupId===i.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(i,e,t,n){return oS(this,void 0,void 0,function*(){if(e.canSplit()&&!this._isPartOfUndoGroup(e)){let s=yield this._dialogService.show(Mt.Info,m("confirmWorkspace","Would you like to undo '{0}' across all files?",e.label),[m({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",t.editStacks.length),m("nok","Undo this File"),m("cancel","Cancel")],{cancelId:2});if(s.choice===2)return;if(s.choice===1)return this._splitPastWorkspaceElement(e,null),this._undo(i,0,!0);let a=this._checkWorkspaceUndo(i,e,t,!1);if(a)return a.returnValue;n=!0}let o;try{o=yield this._invokeWorkspacePrepare(e)}catch(s){return this._onError(s,e)}let r=this._checkWorkspaceUndo(i,e,t,!0);if(r)return o.dispose(),r.returnValue;for(let s of t.editStacks)s.moveBackward(e);return this._safeInvokeWithLocks(e,()=>e.actual.undo(),t,o,()=>this._continueUndoInGroup(e.groupId,n))})}_resourceUndo(i,e,t){if(!e.isValid){i.flushAllElements();return}if(i.locked){let n=m({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",e.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(e,n=>(i.moveBackward(e),this._safeInvokeWithLocks(e,()=>e.actual.undo(),new iA([i]),n,()=>this._continueUndoInGroup(e.groupId,t))))}_findClosestUndoElementInGroup(i){if(!i)return[null,null];let e=null,t=null;for(let[n,o]of this._editStacks){let r=o.getClosestPastElement();r&&r.groupId===i&&(!e||r.groupOrder>e.groupOrder)&&(e=r,t=n)}return[e,t]}_continueUndoInGroup(i,e){if(!i)return;let[,t]=this._findClosestUndoElementInGroup(i);if(t)return this._undo(t,0,e)}undo(i){if(i instanceof Ll){let[,e]=this._findClosestUndoElementWithSource(i.id);return e?this._undo(e,i.id,!1):void 0}return typeof i=="string"?this._undo(i,0,!1):this._undo(this.getUriComparisonKey(i),0,!1)}_undo(i,e=0,t){if(!this._editStacks.has(i))return;let n=this._editStacks.get(i),o=n.getClosestPastElement();if(o){if(o.groupId){let[r,s]=this._findClosestUndoElementInGroup(o.groupId);if(o!==r&&s)return this._undo(s,e,t)}if((o.sourceId!==e||o.confirmBeforeUndo)&&!t)return this._confirmAndContinueUndo(i,e,o);try{return o.type===1?this._workspaceUndo(i,o,t):this._resourceUndo(n,o,t)}finally{}}}_confirmAndContinueUndo(i,e,t){return oS(this,void 0,void 0,function*(){if((yield this._dialogService.show(Mt.Info,m("confirmDifferentSource","Would you like to undo '{0}'?",t.label),[m("confirmDifferentSource.yes","Yes"),m("confirmDifferentSource.no","No")],{cancelId:1})).choice!==1)return this._undo(i,e,!0)})}_findClosestRedoElementWithSource(i){if(!i)return[null,null];let e=null,t=null;for(let[n,o]of this._editStacks){let r=o.getClosestFutureElement();r&&r.sourceId===i&&(!e||r.sourceOrder<e.sourceOrder)&&(e=r,t=n)}return[e,t]}canRedo(i){if(i instanceof Ll){let[,t]=this._findClosestRedoElementWithSource(i.id);return!!t}let e=this.getUriComparisonKey(i);return this._editStacks.has(e)?this._editStacks.get(e).hasFutureElements():!1}_tryToSplitAndRedo(i,e,t,n){if(e.canSplit())return this._splitFutureWorkspaceElement(e,t),this._notificationService.warn(n),new Cf(this._redo(i));for(let o of e.strResources)this.removeElements(o);return this._notificationService.warn(n),new Cf}_checkWorkspaceRedo(i,e,t,n){if(e.removedResources)return this._tryToSplitAndRedo(i,e,e.removedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",e.label,e.removedResources.createMessage()));if(n&&e.invalidatedResources)return this._tryToSplitAndRedo(i,e,e.invalidatedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",e.label,e.invalidatedResources.createMessage()));let o=[];for(let s of t.editStacks)s.getClosestFutureElement()!==e&&o.push(s.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(i,e,null,m({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",e.label,o.join(", ")));let r=[];for(let s of t.editStacks)s.locked&&r.push(s.resourceLabel);return r.length>0?this._tryToSplitAndRedo(i,e,null,m({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",e.label,r.join(", "))):t.isValid()?null:this._tryToSplitAndRedo(i,e,null,m({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",e.label))}_workspaceRedo(i,e){let t=this._getAffectedEditStacks(e),n=this._checkWorkspaceRedo(i,e,t,!1);return n?n.returnValue:this._executeWorkspaceRedo(i,e,t)}_executeWorkspaceRedo(i,e,t){return oS(this,void 0,void 0,function*(){let n;try{n=yield this._invokeWorkspacePrepare(e)}catch(r){return this._onError(r,e)}let o=this._checkWorkspaceRedo(i,e,t,!0);if(o)return n.dispose(),o.returnValue;for(let r of t.editStacks)r.moveForward(e);return this._safeInvokeWithLocks(e,()=>e.actual.redo(),t,n,()=>this._continueRedoInGroup(e.groupId))})}_resourceRedo(i,e){if(!e.isValid){i.flushAllElements();return}if(i.locked){let t=m({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",e.label);this._notificationService.warn(t);return}return this._invokeResourcePrepare(e,t=>(i.moveForward(e),this._safeInvokeWithLocks(e,()=>e.actual.redo(),new iA([i]),t,()=>this._continueRedoInGroup(e.groupId))))}_findClosestRedoElementInGroup(i){if(!i)return[null,null];let e=null,t=null;for(let[n,o]of this._editStacks){let r=o.getClosestFutureElement();r&&r.groupId===i&&(!e||r.groupOrder<e.groupOrder)&&(e=r,t=n)}return[e,t]}_continueRedoInGroup(i){if(!i)return;let[,e]=this._findClosestRedoElementInGroup(i);if(e)return this._redo(e)}redo(i){if(i instanceof Ll){let[,e]=this._findClosestRedoElementWithSource(i.id);return e?this._redo(e):void 0}return typeof i=="string"?this._redo(i):this._redo(this.getUriComparisonKey(i))}_redo(i){if(!this._editStacks.has(i))return;let e=this._editStacks.get(i),t=e.getClosestFutureElement();if(t){if(t.groupId){let[n,o]=this._findClosestRedoElementInGroup(t.groupId);if(t!==n&&o)return this._redo(o)}try{return t.type===1?this._workspaceRedo(i,t):this._resourceRedo(e,t)}finally{}}}};HV=tDe([Qte(0,gm),Qte(1,nn)],HV);var Cf=class{constructor(e){this.returnValue=e}};Ke(KM,HV);var Jo=class{constructor(i={},e=[],t=[]){this._contents=i,this._keys=e,this._overrides=t,this.frozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(i){return i?I_(this.contents,i):this.contents}getOverrideValue(i,e){let t=this.getContentsForOverrideIdentifer(e);return t?i?I_(t,i):t:void 0}override(i){let e=this.overrideConfigurations.get(i);return e||(e=this.createOverrideConfigurationModel(i),this.overrideConfigurations.set(i,e)),e}merge(...i){let e=Co(this.contents),t=Co(this.overrides),n=[...this.keys];for(let o of i)if(!o.isEmpty()){this.mergeContents(e,o.contents);for(let r of o.overrides){let[s]=t.filter(a=>Zn(a.identifiers,r.identifiers));s?(this.mergeContents(s.contents,r.contents),s.keys.push(...r.keys),s.keys=br(s.keys)):t.push(Co(r))}for(let r of o.keys)n.indexOf(r)===-1&&n.push(r)}return new Jo(e,n,t)}freeze(){return this.frozen=!0,this}createOverrideConfigurationModel(i){let e=this.getContentsForOverrideIdentifer(i);if(!e||typeof e!="object"||!Object.keys(e).length)return this;let t={};for(let n of br([...Object.keys(this.contents),...Object.keys(e)])){let o=this.contents[n],r=e[n];r&&(typeof o=="object"&&typeof r=="object"?(o=Co(o),this.mergeContents(o,r)):o=r),t[n]=o}return new Jo(t,this.keys,this.overrides)}mergeContents(i,e){for(let t of Object.keys(e)){if(t in i&&jn(i[t])&&jn(e[t])){this.mergeContents(i[t],e[t]);continue}i[t]=Co(e[t])}}checkAndFreeze(i){return this.frozen&&!Object.isFrozen(i)?mY(i):i}getContentsForOverrideIdentifer(i){let e=null,t=null,n=o=>{o&&(t?this.mergeContents(t,o):t=Co(o))};for(let o of this.overrides)Zn(o.identifiers,[i])?e=o.contents:o.identifiers.includes(i)&&n(o.contents);return n(e),t}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(i,e){this.addKey(i),NM(this.contents,i,e,t=>{throw new Error(t)})}removeValue(i){this.removeKey(i)&&Noe(this.contents,i)}addKey(i){let e=this.keys.length;for(let t=0;t<e;t++)i.indexOf(this.keys[t])===0&&(e=t);this.keys.splice(e,1,i)}removeKey(i){let e=this.keys.indexOf(i);return e!==-1?(this.keys.splice(e,1),!0):!1}},jp=class{constructor(i,e,t,n,o=new Jo,r=new Jo,s=new en,a=new Jo,l=new en,c=!0){this._defaultConfiguration=i,this._policyConfiguration=e,this._applicationConfiguration=t,this._localUserConfiguration=n,this._remoteUserConfiguration=o,this._workspaceConfiguration=r,this._folderConfigurations=s,this._memoryConfiguration=a,this._memoryConfigurationByResource=l,this._freeze=c,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new en,this._userConfiguration=null}getValue(i,e,t){return this.getConsolidatedConfigurationModel(i,e,t).getValue(i)}updateValue(i,e,t={}){let n;t.resource?(n=this._memoryConfigurationByResource.get(t.resource),n||(n=new Jo,this._memoryConfigurationByResource.set(t.resource,n))):n=this._memoryConfiguration,e===void 0?n.removeValue(i):n.setValue(i,e),t.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(i,e,t){let n=this.getConsolidatedConfigurationModel(i,e,t),o=this.getFolderConfigurationModelForResource(e.resource,t),r=e.resource?this._memoryConfigurationByResource.get(e.resource)||this._memoryConfiguration:this._memoryConfiguration,s=e.overrideIdentifier?this._defaultConfiguration.freeze().override(e.overrideIdentifier).getValue(i):this._defaultConfiguration.freeze().getValue(i),a=this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze().getValue(i),l=this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze().getValue(i),c=e.overrideIdentifier?this.userConfiguration.freeze().override(e.overrideIdentifier).getValue(i):this.userConfiguration.freeze().getValue(i),d=e.overrideIdentifier?this.localUserConfiguration.freeze().override(e.overrideIdentifier).getValue(i):this.localUserConfiguration.freeze().getValue(i),h=e.overrideIdentifier?this.remoteUserConfiguration.freeze().override(e.overrideIdentifier).getValue(i):this.remoteUserConfiguration.freeze().getValue(i),u=t?e.overrideIdentifier?this._workspaceConfiguration.freeze().override(e.overrideIdentifier).getValue(i):this._workspaceConfiguration.freeze().getValue(i):void 0,g=o?e.overrideIdentifier?o.freeze().override(e.overrideIdentifier).getValue(i):o.freeze().getValue(i):void 0,p=e.overrideIdentifier?r.override(e.overrideIdentifier).getValue(i):r.getValue(i),f=n.getValue(i),v=br(n.overrides.map(b=>b.identifiers).flat()).filter(b=>n.getOverrideValue(i,b)!==void 0);return{defaultValue:s,policyValue:a,applicationValue:l,userValue:c,userLocalValue:d,userRemoteValue:h,workspaceValue:u,workspaceFolderValue:g,memoryValue:p,value:f,default:s!==void 0?{value:this._defaultConfiguration.freeze().getValue(i),override:e.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(i,e.overrideIdentifier):void 0}:void 0,policy:a!==void 0?{value:a}:void 0,application:l!==void 0?{value:l,override:e.overrideIdentifier?this.applicationConfiguration.freeze().getOverrideValue(i,e.overrideIdentifier):void 0}:void 0,user:c!==void 0?{value:this.userConfiguration.freeze().getValue(i),override:e.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(i,e.overrideIdentifier):void 0}:void 0,userLocal:d!==void 0?{value:this.localUserConfiguration.freeze().getValue(i),override:e.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(i,e.overrideIdentifier):void 0}:void 0,userRemote:h!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(i),override:e.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(i,e.overrideIdentifier):void 0}:void 0,workspace:u!==void 0?{value:this._workspaceConfiguration.freeze().getValue(i),override:e.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(i,e.overrideIdentifier):void 0}:void 0,workspaceFolder:g!==void 0?{value:o?.freeze().getValue(i),override:e.overrideIdentifier?o?.freeze().getOverrideValue(i,e.overrideIdentifier):void 0}:void 0,memory:p!==void 0?{value:r.getValue(i),override:e.overrideIdentifier?r.getOverrideValue(i,e.overrideIdentifier):void 0}:void 0,overrideIdentifiers:v.length?v:void 0}}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(i,e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier&&(n=n.override(e.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(i)!==void 0&&(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource({resource:i},e){let t=this.getWorkspaceConsolidatedConfiguration();if(e&&i){let n=e.getFolder(i);n&&(t=this.getFolderConsolidatedConfiguration(n.uri)||t);let o=this._memoryConfigurationByResource.get(i);o&&(t=t.merge(o))}return t}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(i){let e=this._foldersConsolidatedConfigurations.get(i);if(!e){let t=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(i);n?(e=t.merge(n),this._freeze&&(e=e.freeze()),this._foldersConsolidatedConfigurations.set(i,e)):e=t}return e}getFolderConfigurationModelForResource(i,e){if(e&&i){let t=e.getFolder(i);if(t)return this._folderConfigurations.get(t.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((i,e)=>{let{contents:t,overrides:n,keys:o}=this._folderConfigurations.get(e);return i.push([e,{contents:t,overrides:n,keys:o}]),i},[])}}static parse(i){let e=this.parseConfigurationModel(i.defaults),t=this.parseConfigurationModel(i.policy),n=this.parseConfigurationModel(i.application),o=this.parseConfigurationModel(i.user),r=this.parseConfigurationModel(i.workspace),s=i.folders.reduce((a,l)=>(a.set($.revive(l[0]),this.parseConfigurationModel(l[1])),a),new en);return new jp(e,t,n,o,new Jo,r,s,new Jo,new en,!1)}static parseConfigurationModel(i){return new Jo(i.contents,i.keys,i.overrides).freeze()}},Hw=class{constructor(e,t,n,o){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=o,this._previousConfiguration=void 0;let r=new Set;e.keys.forEach(a=>r.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>r.add(l))),this.affectedKeys=[...r.values()];let s=new Jo;this.affectedKeys.forEach(a=>s.setValue(a,{})),this.affectedKeysTree=s.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=jp.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){let o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,r=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!yr(o,r)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=Moe({[t]:!0},()=>{}),o;for(;typeof n=="object"&&(o=Object.keys(n)[0]);){if(e=e[o],!e)return!1;n=n[o]}return!0}},iDe=/^(cursor|delete)/,WV=class extends J{constructor(e,t,n,o,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=o,this._logService=r,this._onDidUpdateKeybindings=this._register(new Q),this._currentChord=null,this._currentChordChecker=new ip,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Ah.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Sr,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Z.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){let n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");let n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;let[o]=n.getDispatchParts();if(o===null)return this._log("\\ Keyboard event cannot be dispatched"),null;let r=this._contextKeyService.getContext(t),s=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(r,s,o)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(m("first.chord","({0}) was pressed. Waiting for second key of chord...",t));let n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){let n=this.resolveKeyboardEvent(e),[o]=n.getSingleModifierDispatchParts();if(o)return this._ignoreSingleModifiers.has(o)?(this._log(`+ Ignoring single modifier ${o} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Ah.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Ah.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${o}.`),this._currentSingleModifier=o,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):o===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${o} ${o}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${o}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));let[r]=n.getParts();return this._ignoreSingleModifiers=new Ah(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let o=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let r=null,s=null;if(n){let[d]=e.getSingleModifierDispatchParts();r=d,s=d}else[r]=e.getDispatchParts(),s=this._currentChord?this._currentChord.keypress:null;if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),o;let a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,s,r);return this._logService.trace("KeybindingService#dispatch",l,c?.commandId),c&&c.enterChord?(o=!0,this._enterChordMode(r,l),this._log("+ Entering chord mode..."),o):(this._currentChord&&(!c||!c.commandId)&&(this._log(`+ Leaving chord mode: Nothing bound to "${this._currentChord.label} ${l}".`),this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),o=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(o=!0),this._log(`+ Invoking command ${c.commandId}.`),typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d)),iDe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding"})),o)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}},Ah=class{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};Ah.EMPTY=new Ah(null);var zV=class i{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let o of e){let r=o.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=i.handleRemovals([].concat(e).concat(t));for(let o=0,r=this._keybindings.length;o<r;o++){let s=this._keybindings[o];s.keypressParts.length!==0&&(s.when&&s.when.type===0||this._addKeyPress(s.keypressParts[0],s))}}static _isTargetedForRemoval(e,t,n,o){return!(t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||o&&(!e.when||!Xue(o,e.when)))}static handleRemovals(e){let t=new Map;for(let o=0,r=e.length;o<r;o++){let s=e[o];if(s.command&&s.command.charAt(0)==="-"){let a=s.command.substring(1);t.has(a)?t.get(a).push(s):t.set(a,[s])}}if(t.size===0)return e;let n=[];for(let o=0,r=e.length;o<r;o++){let s=e[o];if(!s.command||s.command.length===0){n.push(s);continue}if(s.command.charAt(0)==="-")continue;let a=t.get(s.command);if(!a||!s.isDefault){n.push(s);continue}let l=!1;for(let c of a){let d=c.keypressParts[0],h=c.keypressParts[1],u=c.when;if(this._isTargetedForRemoval(s,d,h,u)){l=!0;break}}if(!l){n.push(s);continue}}return n}_addKeyPress(e,t){let n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let o=n.length-1;o>=0;o--){let r=n[o];if(r.command===t.command)continue;let s=r.keypressParts.length>1,a=t.keypressParts.length>1;s&&a&&r.keypressParts[1]!==t.keypressParts[1]||i.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,o=t.length;n<o;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:doe(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){let n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let o=n.length-1;o>=0;o--){let r=n[o];if(t.contextMatchesRules(r.when))return r}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let o=null;if(t!==null){let s=this._map.get(t);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;o=[];for(let a=0,l=s.length;a<l;a++){let c=s[a];c.keypressParts[1]===n&&o.push(c)}}else{let s=this._map.get(n);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;o=s}let r=this._findCommand(e,o);return r?t===null&&r.keypressParts.length>1&&r.keypressParts[1]!==null?(this._log(`\\ From ${o.length} keybinding entries, matched chord, when: ${jte(r.when)}, source: ${Kte(r)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${o.length} keybinding entries, matched ${r.command}, when: ${jte(r.when)}, source: ${Kte(r)}.`),{enterChord:!1,leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let o=t[n];if(i._contextMatchesRules(e,o.when))return o}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}};function jte(i){return i?`${i.serialize()}`:"no when condition"}function Kte(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}var rI=class{constructor(e,t,n,o,r,s,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?VV(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=VV(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=o,this.isDefault=r,this.extensionId=s,this.isBuiltinExtension=a}};function VV(i){let e=[];for(let t=0,n=i.length;t<n;t++){let o=i[t];if(!o)return e;e.push(o)}return e}var UV=class extends aB{constructor(e,t){if(super(),t.length===0)throw Nt("parts");this._os=e,this._parts=t}getLabel(){return rJ.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return x1e.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:k1e.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new sB(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}},Vg=class i extends UV{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return cg.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":cg.toString(e.keyCode)}_getElectronAccelerator(e){return cg.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return i.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=cg.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){let t=ZG[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof ql)return e;let t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new ql(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){let n=VV(e.map(o=>this._resolveSimpleUserBinding(o)));return n.length>0?[new i(new b_(n),t)]:[]}},bh;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})(bh||(bh={}));function yf(i,e,t){let n=t.mode===bh.ALIGN?t.offset:t.offset+t.size,o=t.mode===bh.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=o?o-e:Math.max(i-e,0):e<=o?o-e:e<=i-n?n:0}var Ww=class i extends J{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=J.None,this.toDisposeOnSetContainer=J.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ge(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Xo(this.view),this.setContainer(e,t),this._register(ct(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=ge(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});let r=document.createElement("style");r.textContent=nDe,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ge("slot"))}else this.container.appendChild(this.view);let o=new ne;i.BUBBLE_UP_EVENTS.forEach(r=>{o.add(Tn(this.container,r,s=>{this.onDOMEvent(s,!1)}))}),i.BUBBLE_DOWN_EVENTS.forEach(r=>{o.add(Tn(this.container,r,s=>{this.onDOMEvent(s,!0)},!0))}),this.toDisposeOnSetContainer=o}}show(e){var t,n;this.isVisible()&&this.hide(),Sn(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",_r(this.view),this.toDisposeOnClean=e.render(this.view)||J.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)===null||n===void 0||n.call(t)}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(jl&&XG.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(Xne(e)){let h=Eo(e),u=yue(e);t={top:h.top*u,left:h.left*u,width:h.width*u,height:h.height*u}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};let n=Xs(this.view),o=pB(this.view),r=this.delegate.anchorPosition||0,s=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0,l,c;if(a===0){let h={offset:t.top-window.pageYOffset,size:t.height,position:r===0?0:1},u={offset:t.left,size:t.width,position:s===0?0:1,mode:bh.ALIGN};l=yf(window.innerHeight,o,h)+window.pageYOffset,Ao.intersects({start:l,end:l+o},{start:h.offset,end:h.offset+h.size})&&(u.mode=bh.AVOID),c=yf(window.innerWidth,n,u)}else{let h={offset:t.left,size:t.width,position:s===0?0:1},u={offset:t.top,size:t.height,position:r===0?0:1,mode:bh.ALIGN};c=yf(window.innerWidth,n,h),Ao.intersects({start:c,end:c+n},{start:h.offset,end:h.offset+h.size})&&(u.mode=bh.AVOID),l=yf(window.innerHeight,o,u)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(s===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);let d=Eo(this.container);this.view.style.top=`${l-(this.useFixedPosition?Eo(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Eo(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){let t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Xo(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!hd(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};Ww.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];Ww.BUBBLE_DOWN_EVENTS=["click"];var nDe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`,oDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},rDe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},QV=class extends J{constructor(i){super(),this.layoutService=i,this.currentViewDisposable=J.None,this.container=i.hasContainer?i.container:null,this.contextView=this._register(new Ww(this.container,1)),this.layout(),this._register(i.onDidLayout(()=>this.layout()))}setContainer(i,e){this.contextView.setContainer(i,e||1)}showContextView(i,e,t){e?(e!==this.container||this.shadowRoot!==t)&&(this.container=e,this.setContainer(e,t?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=t,this.contextView.show(i);let n=ct(()=>{this.currentViewDisposable===n&&this.hideContextView()});return this.currentViewDisposable=n,n}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(i){this.contextView.hide(i)}};QV=oDe([rDe(0,cv)],QV);var qte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},sS="**",$te="/",YS="[/\\\\]",JS="[^/\\\\]",sDe=/\//g;function Gte(i,e){switch(i){case 0:return"";case 1:return`${JS}*?`;default:return`(?:${YS}|${JS}+${YS}${e?`|${YS}${JS}+`:""})*?`}}function Yte(i,e){if(!i)return[];let t=[],n=!1,o=!1,r="";for(let s of i){switch(s){case e:if(!n&&!o){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":o=!0;break;case"]":o=!1;break}r+=s}return r&&t.push(r),t}function Ole(i){if(!i)return"";let e="",t=Yte(i,$te);if(t.every(n=>n===sS))e=".*";else{let n=!1;t.forEach((o,r)=>{if(o===sS){if(n)return;e+=Gte(2,r===t.length-1)}else{let s=!1,a="",l=!1,c="";for(let d of o){if(d!=="}"&&s){a+=d;continue}if(l&&(d!=="]"||!c)){let h;d==="-"?h=d:(d==="^"||d==="!")&&!c?h="^":d===$te?h="":h=cs(d),c+=h;continue}switch(d){case"{":s=!0;continue;case"[":l=!0;continue;case"}":{let h=`(?:${Yte(a,",").map(u=>Ole(u)).join("|")})`;e+=h,s=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=JS;continue;case"*":e+=Gte(1);continue;default:e+=cs(d)}}r<t.length-1&&(t[r+1]!==sS||r+2<t.length)&&(e+=YS)}n=o===sS})}return e}var aDe=/^\*\*\/\*\.[\w\.-]+$/,lDe=/^\*\*\/([\w\.-]+)\/?$/,cDe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,dDe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,hDe=/^\*\*((\/[\w\.-]+)+)\/?$/,uDe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Jte=new tc(1e4),Xte=function(){return!1},Vl=function(){return null};function QJ(i,e){if(!i)return Vl;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();let n=`${t}_${!!e.trimForExclusions}`,o=Jte.get(n);if(o)return Zte(o,i);let r;return aDe.test(t)?o=gDe(t.substr(4),t):(r=lDe.exec(YR(t,e)))?o=pDe(r[1],t):(e.trimForExclusions?dDe:cDe).test(t)?o=mDe(t,e):(r=hDe.exec(YR(t,e)))?o=eie(r[1].substr(1),t,!0):(r=uDe.exec(YR(t,e)))?o=eie(r[1],t,!1):o=fDe(t),Jte.set(n,o),Zte(o,i)}function Zte(i,e){if(typeof e=="string")return i;let t=function(n,o){return vb(n,e.base,!go)?i(n.substr(e.base.length+1),o):null};return t.allBasenames=i.allBasenames,t.allPaths=i.allPaths,t.basenames=i.basenames,t.patterns=i.patterns,t}function YR(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function gDe(i,e){return function(t,n){return typeof t=="string"&&t.endsWith(i)?e:null}}function pDe(i,e){let t=`/${i}`,n=`\\${i}`,o=function(s,a){return typeof s!="string"?null:a?a===i?e:null:s===i||s.endsWith(t)||s.endsWith(n)?e:null},r=[i];return o.basenames=r,o.patterns=[e],o.allBasenames=r,o}function mDe(i,e){let t=Wle(i.slice(1,-1).split(",").map(a=>QJ(a,e)).filter(a=>a!==Vl),i),n=t.length;if(!n)return Vl;if(n===1)return t[0];let o=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return i;return null},r=t.find(a=>!!a.allBasenames);r&&(o.allBasenames=r.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(o.allPaths=s),o}function eie(i,e,t){let n=Ss===Mi.sep,o=n?i:i.replace(sDe,Ss),r=Ss+o,s=Mi.sep+i,a;return t?a=function(l,c){return typeof l=="string"&&(l===o||l.endsWith(r)||!n&&(l===i||l.endsWith(s)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===o||!n&&l===i)?e:null},a.allPaths=[(t?"*/":"./")+i],a}function fDe(i){try{let e=new RegExp(`^${Ole(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return Vl}}function _De(i,e,t){return!i||typeof e!="string"?!1:Hle(i)(e,void 0,t)}function Hle(i,e={}){if(!i)return Xte;if(typeof i=="string"||vDe(i)){let t=QJ(i,e);if(t===Vl)return Xte;let n=function(o,r){return!!t(o,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return ADe(i,e)}function vDe(i){let e=i;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function ADe(i,e){let t=Wle(Object.getOwnPropertyNames(i).map(a=>bDe(a,i[a],e)).filter(a=>a!==Vl)),n=t.length;if(!n)return Vl;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];let a=function(d,h){let u;for(let g=0,p=t.length;g<p;g++){let f=t[g](d,h);if(typeof f=="string")return f;WP(f)&&(u||(u=[]),u.push(f))}return u?(()=>qte(this,void 0,void 0,function*(){for(let g of u){let p=yield g;if(typeof p=="string")return p}return null}))():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);let c=t.reduce((d,h)=>h.allPaths?d.concat(h.allPaths):d,[]);return c.length&&(a.allPaths=c),a}let o=function(a,l,c){let d,h;for(let u=0,g=t.length;u<g;u++){let p=t[u];p.requiresSiblings&&c&&(l||(l=Dg(a)),d||(d=l.substr(0,l.length-cue(a).length)));let f=p(a,l,d,c);if(typeof f=="string")return f;WP(f)&&(h||(h=[]),h.push(f))}return h?(()=>qte(this,void 0,void 0,function*(){for(let u of h){let g=yield u;if(typeof g=="string")return g}return null}))():null},r=t.find(a=>!!a.allBasenames);r&&(o.allBasenames=r.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(o.allPaths=s),o}function bDe(i,e,t){if(e===!1)return Vl;let n=QJ(i,t);if(n===Vl)return Vl;if(typeof e=="boolean")return n;if(e){let o=e.when;if(typeof o=="string"){let r=(s,a,l,c)=>{if(!c||!n(s,a))return null;let d=o.replace("$(basename)",l),h=c(d);return WP(h)?h.then(u=>u?i:null):h?i:null};return r.requiresSiblings=!0,r}}return n}function Wle(i,e){let t=i.filter(a=>!!a.basenames);if(t.length<2)return i;let n=t.reduce((a,l)=>{let c=l.basenames;return c?a.concat(c):a},[]),o;if(e){o=[];for(let a=0,l=n.length;a<l;a++)o.push(e)}else o=t.reduce((a,l)=>{let c=l.patterns;return c?a.concat(c):a},[]);let r=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){let h=a.charCodeAt(d-1);if(h===47||h===92)break}l=a.substr(d)}let c=n.indexOf(l);return c!==-1?o[c]:null};r.basenames=n,r.patterns=o,r.allBasenames=n;let s=i.filter(a=>!a.basenames);return s.push(r),s}var R0=[],jJ=[],zle=[];function wh(i,e=!1){wDe(i,!1,e)}function wDe(i,e,t){let n=CDe(i,e);R0.push(n),n.userConfigured?zle.push(n):jJ.push(n),t&&!n.userConfigured&&R0.forEach(o=>{o.mime===n.mime||o.userConfigured||(n.extension&&o.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&o.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&o.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&o.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function CDe(i,e){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:e,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?Hle(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(Mi.sep)>=0:!1}}function Vle(){R0=R0.filter(i=>i.userConfigured),jJ=[]}function Ule(i,e){return yDe(i,e).map(t=>t.id)}function yDe(i,e){let t;if(i)switch(i.scheme){case Oe.file:t=i.fsPath;break;case Oe.data:{t=Jh.parseMetaData(i).get(Jh.META_DATA_LABEL);break}case Oe.vscodeNotebookCell:t=void 0;break;default:t=i.path}if(!t)return[{id:"unknown",mime:nr.unknown}];t=t.toLowerCase();let n=Dg(t),o=tie(t,n,zle);if(o)return[o,{id:Pr,mime:nr.text}];let r=tie(t,n,jJ);if(r)return[r,{id:Pr,mime:nr.text}];if(e){let s=SDe(e);if(s)return[s,{id:Pr,mime:nr.text}]}return[{id:"unknown",mime:nr.unknown}]}function tie(i,e,t){var n;let o,r,s;for(let a=t.length-1;a>=0;a--){let l=t[a];if(e===l.filenameLowercase){o=l;break}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){let c=l.filepatternOnPath?i:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,c)&&(r=l)}l.extension&&(!s||l.extension.length>s.extension.length)&&e.endsWith(l.extensionLowercase)&&(s=l)}if(o)return o;if(r)return r;if(s)return s}function SDe(i){if(aY(i)&&(i=i.substr(1)),i.length>0)for(let e=R0.length-1;e>=0;e--){let t=R0[e];if(!t.firstline)continue;let n=i.match(t.firstline);if(n&&n.length>0)return t}}var aS=Object.prototype.hasOwnProperty,iie="vs.editor.nullLanguage",DDe=class{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(iie,0),this._register(Pr,1),this._nextLanguageId=2}_register(i,e){this._languageIdToLanguage[e]=i,this._languageToLanguageId.set(i,e)}register(i){if(this._languageToLanguageId.has(i))return;let e=this._nextLanguageId++;this._register(i,e)}encodeLanguageId(i){return this._languageToLanguageId.get(i)||0}decodeLanguageId(i){return this._languageIdToLanguage[i]||iie}},F0=class extends J{constructor(i=!0,e=!1){super(),this._onDidChange=this._register(new Q),this.onDidChange=this._onDidChange.event,F0.instanceCount++,this._warnOnOverwrite=e,this.languageIdCodec=new DDe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},i&&(this._initializeFromRegistry(),this._register(ud.onDidChangeLanguages(t=>{this._initializeFromRegistry()})))}dispose(){F0.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Vle();let i=[].concat(ud.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(i)}_registerLanguages(i){for(let e of i)this._registerLanguage(e);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(e=>{let t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach(n=>{this._lowercaseNameMap[n.toLowerCase()]=t.identifier}),t.mimetypes.forEach(n=>{this._mimeTypesMap[n]=t.identifier})}),oi.as(Sa.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(i){let e=i.id,t;aS.call(this._languages,e)?t=this._languages[e]:(this.languageIdCodec.register(e),t={identifier:e,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[e]=t),this._mergeLanguage(t,i)}_mergeLanguage(i,e){let t=e.id,n=null;if(Array.isArray(e.mimetypes)&&e.mimetypes.length>0&&(i.mimetypes.push(...e.mimetypes),n=e.mimetypes[0]),n||(n=`text/x-${t}`,i.mimetypes.push(n)),Array.isArray(e.extensions)){e.configuration?i.extensions=e.extensions.concat(i.extensions):i.extensions=i.extensions.concat(e.extensions);for(let s of e.extensions)wh({id:t,mime:n,extension:s},this._warnOnOverwrite)}if(Array.isArray(e.filenames))for(let s of e.filenames)wh({id:t,mime:n,filename:s},this._warnOnOverwrite),i.filenames.push(s);if(Array.isArray(e.filenamePatterns))for(let s of e.filenamePatterns)wh({id:t,mime:n,filepattern:s},this._warnOnOverwrite);if(typeof e.firstLine=="string"&&e.firstLine.length>0){let s=e.firstLine;s.charAt(0)!=="^"&&(s="^"+s);try{let a=new RegExp(s);wM(a)||wh({id:t,mime:n,firstline:a},this._warnOnOverwrite)}catch(a){Ye(a)}}i.aliases.push(t);let o=null;if(typeof e.aliases<"u"&&Array.isArray(e.aliases)&&(e.aliases.length===0?o=[null]:o=e.aliases),o!==null)for(let s of o)!s||s.length===0||i.aliases.push(s);let r=o!==null&&o.length>0;if(!(r&&o[0]===null)){let s=(r?o[0]:null)||t;(r||!i.name)&&(i.name=s)}e.configuration&&i.configurationFiles.push(e.configuration),e.icon&&i.icons.push(e.icon)}isRegisteredLanguageId(i){return i?aS.call(this._languages,i):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(i){let e=i.toLowerCase();return aS.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}getLanguageIdByMimeType(i){return i&&aS.call(this._mimeTypesMap,i)?this._mimeTypesMap[i]:null}guessLanguageIdByFilepathOrFirstLine(i,e){return!i&&!e?[]:Ule(i,e)}};F0.instanceCount=0;var zw=class extends J{constructor(i=!1){super(),this._onDidEncounterLanguage=this._register(new Q),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new Q({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,zw.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new F0(!0,i)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){zw.instanceCount--,super.dispose()}isRegisteredLanguageId(i){return this._registry.isRegisteredLanguageId(i)}getLanguageIdByLanguageName(i){return this._registry.getLanguageIdByLanguageName(i)}getLanguageIdByMimeType(i){return this._registry.getLanguageIdByMimeType(i)}guessLanguageIdByFilepathOrFirstLine(i,e){let t=this._registry.guessLanguageIdByFilepathOrFirstLine(i,e);return EM(t,null)}createById(i){return new nie(this.onDidChange,()=>this._createAndGetLanguageIdentifier(i))}createByFilepathOrFirstLine(i,e){return new nie(this.onDidChange,()=>{let t=this.guessLanguageIdByFilepathOrFirstLine(i,e);return this._createAndGetLanguageIdentifier(t)})}_createAndGetLanguageIdentifier(i){return(!i||!this.isRegisteredLanguageId(i))&&(i=Pr),this._encounteredLanguages.has(i)||(this._encounteredLanguages.add(i),Ui.getOrCreate(i),this._onDidEncounterLanguage.fire(i)),i}};zw.instanceCount=0;var nie=class{constructor(i,e){this._onDidChangeLanguages=i,this._selector=e,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new Q({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var i;let e=this._selector();e!==this.languageId&&(this.languageId=e,(i=this._emitter)===null||i===void 0||i.fire(this.languageId))}},jV=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,JR=/(&amp;)?(&amp;)([^\s&])/g,sI;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(sI||(sI={}));var nA=class extends wa{constructor(i,e,t={}){i.classList.add("monaco-menu-container"),i.setAttribute("role","presentation");let n=document.createElement("div");n.classList.add("monaco-menu"),n.setAttribute("role","presentation"),super(n,{orientation:1,actionViewItemProvider:s=>this.doGetActionViewItem(s,t,o),context:t.context,actionRunner:t.actionRunner,ariaLabel:t.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...gt||go?[10]:[]],keyDown:!0}}),this.menuElement=n,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new ne),this.initializeOrUpdateStyleSheet(i,{}),this._register(to.addTarget(n)),le(n,Ee.KEY_DOWN,s=>{new ni(s).equals(2)&&s.preventDefault()}),t.enableMnemonics&&this.menuDisposables.add(le(n,Ee.KEY_DOWN,s=>{let a=s.key.toLocaleLowerCase();if(this.mnemonics.has(a)){ii.stop(s,!0);let l=this.mnemonics.get(a);if(l.length===1&&(l[0]instanceof aI&&l[0].container&&this.focusItemByElement(l[0].container),l[0].onClick(s)),l.length>1){let c=l.shift();c&&c.container&&(this.focusItemByElement(c.container),l.push(c)),this.mnemonics.set(a,l)}}})),go&&this._register(le(n,Ee.KEY_DOWN,s=>{let a=new ni(s);a.equals(14)||a.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),ii.stop(s,!0)):(a.equals(13)||a.equals(12))&&(this.focusedItem=0,this.focusPrevious(),ii.stop(s,!0))})),this._register(le(this.domNode,Ee.MOUSE_OUT,s=>{let a=s.relatedTarget;hd(a,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),s.stopPropagation())})),this._register(le(this.actionsList,Ee.MOUSE_OVER,s=>{let a=s.target;if(!(!a||!hd(a,this.actionsList)||a===this.actionsList)){for(;a.parentElement!==this.actionsList&&a.parentElement!==null;)a=a.parentElement;if(a.classList.contains("action-item")){let l=this.focusedItem;this.setFocusedItem(a),l!==this.focusedItem&&this.updateFocus()}}})),this._register(to.addTarget(this.actionsList)),this._register(le(this.actionsList,yi.Tap,s=>{let a=s.initialTarget;if(!(!a||!hd(a,this.actionsList)||a===this.actionsList)){for(;a.parentElement!==this.actionsList&&a.parentElement!==null;)a=a.parentElement;if(a.classList.contains("action-item")){let l=this.focusedItem;this.setFocusedItem(a),l!==this.focusedItem&&this.updateFocus()}}}));let o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new ap(n,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));let r=this.scrollableElement.getDomNode();r.style.position="",this._register(le(n,yi.Change,s=>{ii.stop(s,!0);let a=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:a-s.translationY})})),this._register(le(r,Ee.MOUSE_UP,s=>{s.preventDefault()})),n.style.maxHeight=`${Math.max(10,window.innerHeight-i.getBoundingClientRect().top-35)}px`,e=e.filter(s=>{var a;return!((a=t.submenuIds)===null||a===void 0)&&a.has(s.id)?(console.warn(`Found submenu cycle: ${s.id}`),!1):!0}),this.push(e,{icon:!0,label:!0,isMenu:!0}),i.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(s=>!(s instanceof oA)).forEach((s,a,l)=>{s.updatePositionInSet(a+1,l.length)})}initializeOrUpdateStyleSheet(i,e){this.styleSheet||(yA(i)?this.styleSheet=ls(i):(nA.globalStyleSheet||(nA.globalStyleSheet=ls()),this.styleSheet=nA.globalStyleSheet)),this.styleSheet.textContent=kDe(e,yA(i))}style(i){let e=this.getContainer();this.initializeOrUpdateStyleSheet(e,i);let t=i.foregroundColor?`${i.foregroundColor}`:"",n=i.backgroundColor?`${i.backgroundColor}`:"",o=i.borderColor?`1px solid ${i.borderColor}`:"",r="5px",s=i.shadowColor?`0 2px 8px ${i.shadowColor}`:"";e.style.outline=o,e.style.borderRadius=r,e.style.color=t,e.style.backgroundColor=n,e.style.boxShadow=s,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof Vw||a instanceof oA)&&a.style(i)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(i){let e=this.focusedItem;this.setFocusedItem(i),e!==this.focusedItem&&this.updateFocus()}setFocusedItem(i){for(let e=0;e<this.actionsList.children.length;e++){let t=this.actionsList.children[e];if(i===t){this.focusedItem=e;break}}}updateFocus(i){super.updateFocus(i,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(i,e,t){if(i instanceof Lo)return new oA(e.context,i,{icon:!0});if(i instanceof Xg){let n=new aI(i,i.actions,t,Object.assign(Object.assign({},e),{submenuIds:new Set([...e.submenuIds||[],i.id])}));if(e.enableMnemonics){let o=n.getMnemonic();if(o&&n.isEnabled()){let r=[];this.mnemonics.has(o)&&(r=this.mnemonics.get(o)),r.push(n),this.mnemonics.set(o,r)}}return n}else{let n={enableMnemonics:e.enableMnemonics,useEventAsContext:e.useEventAsContext};if(e.getKeyBinding){let r=e.getKeyBinding(i);if(r){let s=r.getLabel();s&&(n.keybinding=s)}}let o=new Vw(e.context,i,n);if(e.enableMnemonics){let r=o.getMnemonic();if(r&&o.isEnabled()){let s=[];this.mnemonics.has(r)&&(s=this.mnemonics.get(r)),s.push(o),this.mnemonics.set(r,s)}}return o}}},Vw=class extends ta{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let o=this.getAction().label;if(o){let r=jV.exec(o);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new jt(()=>{this.element&&(this._register(le(this.element,Ee.MOUSE_UP,o=>{if(ii.stop(o,!0),as){if(new sa(o).rightButton)return;this.onClick(o)}else setTimeout(()=>{this.onClick(o)},0)})),this._register(le(this.element,Ee.CONTEXT_MENU,o=>{ii.stop(o,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ae(this.element,ge("a.action-menu-item")),this._action.id===Lo.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ae(this.item,ge("span.menu-item-check"+_.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=ae(this.item,ge("span.action-label")),this.options.label&&this.options.keybinding&&(ae(this.item,ge("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){Sn(this.label);let t=GY(this.getAction().label);if(t){let n=xDe(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));let o=jV.exec(t);if(o){t=nY(t),JR.lastIndex=0;let r=JR.exec(t);for(;r&&r[1];)r=JR.exec(t);let s=a=>a.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(bM(s(t.substr(0,r.index))," "),ge("u",{"aria-hidden":"true"},r[3]),ioe(s(t.substr(r.index+r[0].length))," ")):this.label.innerText=s(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(o[1]?o[1]:o[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;let e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;let e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,o=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():"",this.item.style.outline=o,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=t?t.toString():"")}style(e){this.menuStyle=e,this.applyStyle()}},aI=class extends Vw{constructor(e,t,n,o){super(e,e,o),this.submenuActions=t,this.parentData=n,this.submenuOptions=o,this.mysubmenu=null,this.submenuDisposables=this._register(new ne),this.mouseOver=!1,this.expandDirection=o&&o.expandDirection!==void 0?o.expandDirection:sI.Right,this.showScheduler=new jt(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new jt(()=>{this.element&&!hd(Of(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ae(this.item,ge("span.submenu-indicator"+_.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(le(this.element,Ee.KEY_UP,t=>{let n=new ni(t);(n.equals(17)||n.equals(3))&&(ii.stop(t,!0),this.createSubmenu(!0))})),this._register(le(this.element,Ee.KEY_DOWN,t=>{let n=new ni(t);Of()===this.item&&(n.equals(17)||n.equals(3))&&ii.stop(t,!0)})),this._register(le(this.element,Ee.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(le(this.element,Ee.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(le(this.element,Ee.FOCUS_OUT,t=>{this.element&&!hd(Of(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){ii.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,o){let r={top:0,left:0};return r.left=yf(e.width,t.width,{position:o===sI.Right?0:1,offset:n.left,size:n.width}),r.left>=n.left&&r.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(r.left=n.left+10),n.top+=10,n.height=0),r.top=yf(e.height,t.height,{position:0,offset:n.top,size:0}),r.top+t.height===n.top&&r.top+n.height+t.height<=e.height&&(r.top+=n.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ae(this.element,ge("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");let t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new nA(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new wD],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);let o=this.element.getBoundingClientRect(),r={top:o.top-n,left:o.left,height:o.height+2*n,width:o.width},s=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Si(window.innerWidth,window.innerHeight),Si.lift(s),r,this.expandDirection);this.submenuContainer.style.left=`${l-s.left}px`,this.submenuContainer.style.top=`${a-s.top}px`,this.submenuDisposables.add(le(this.submenuContainer,Ee.KEY_UP,c=>{new ni(c).equals(15)&&(ii.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(le(this.submenuContainer,Ee.KEY_DOWN,c=>{new ni(c).equals(15)&&ii.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){var e;if(super.applyStyle(),!this.menuStyle)return;let t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),(e=this.parentData.submenu)===null||e===void 0||e.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}},oA=class extends hp{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}};function xDe(i){let e=jV,t=e.exec(i);if(!t)return i;let n=!t[1];return i.replace(e,n?"$2$3":"").trim()}function kDe(i,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${dte(_.menuSelection)}
${dte(_.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .6em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;let n=i.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);let o=i.scrollbarSliderBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${o};
				}
			`);let r=i.scrollbarSliderHoverBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${r};
				}
			`);let s=i.scrollbarSliderActiveBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${s};
				}
			`)}return t}var KV=class{constructor(e,t,n,o,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=o,this.themeService=r,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){let t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,o=Xne(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{let s=e.getMenuClassName?e.getMenuClassName():"";s&&(r.className+=" "+s),this.options.blockMouse&&(this.block=r.appendChild(ge(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",le(this.block,Ee.MOUSE_DOWN,c=>c.stopPropagation()));let a=new ne,l=e.actionRunner||new Wh;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new nA(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)}),a.add(hAe(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(le(window,Ee.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(le(window,Ee.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;let d=new sa(c),h=d.target;if(!d.rightButton){for(;h;){if(h===r)return;h=h.parentElement}this.contextViewService.hideContextView(!0)}})),ss(a,n)},focus:()=>{n?.focus(!!e.autoSelectFirstItem)},onHide:r=>{var s;(s=e.onHide)===null||s===void 0||s.call(e,!!r),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},o,!!o)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Ls(e.error)&&this.notificationService.error(e.error)}},EDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Fv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qV=class extends J{constructor(i,e,t,n,o){super(),this._onDidShowContextMenu=new Q,this._onDidHideContextMenu=new Q,this.contextMenuHandler=new KV(t,i,e,n,o)}configure(i){this.contextMenuHandler.configure(i)}showContextMenu(i){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},i),{onHide:e=>{var t;(t=i.onHide)===null||t===void 0||t.call(i,e),this._onDidHideContextMenu.fire()}})),DA.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};qV=EDe([Fv(0,Vs),Fv(1,nn),Fv(2,om),Fv(3,An),Fv(4,mi)],qV);var lI;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(lI||(lI={}));var KJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},cI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ng=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},$V=class{constructor(i){this._commandService=i}open(i,e){return ng(this,void 0,void 0,function*(){if(!Tb(i,Oe.command))return!1;if(!(e!=null&&e.allowCommands))return!0;typeof i=="string"&&(i=$.parse(i));let t=[];try{t=Yb(decodeURIComponent(i.query))}catch{try{t=Yb(i.query)}catch{}}return Array.isArray(t)||(t=[t]),yield this._commandService.executeCommand(i.path,...t),!0})}};$V=KJ([cI(0,ji)],$V);var GV=class{constructor(i){this._editorService=i}open(i,e){return ng(this,void 0,void 0,function*(){typeof i=="string"&&(i=$.parse(i));let{selection:t,uri:n}=Ase(i);return i=n,i.scheme===Oe.file&&(i=f_e(i)),yield this._editorService.openCodeEditor({resource:i,options:Object.assign({selection:t,source:e!=null&&e.fromUserGesture?lI.USER:lI.API},e?.editorOptions)},this._editorService.getFocusedCodeEditor(),e?.openToSide),!0})}};GV=KJ([cI(0,Ft)],GV);var YV=class{constructor(i,e){this._openers=new ko,this._validators=new ko,this._resolvers=new ko,this._resolvedUriTargets=new en(t=>t.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new ko,this._defaultExternalOpener={openExternal:t=>ng(this,void 0,void 0,function*(){return fee(t,Oe.http,Oe.https)?eoe(t):window.location.href=t,!0})},this._openers.push({open:(t,n)=>ng(this,void 0,void 0,function*(){return n!=null&&n.openExternal||fee(t,Oe.mailto,Oe.http,Oe.https,Oe.vsls)?(yield this._doOpenExternal(t,n),!0):!1})}),this._openers.push(new $V(e)),this._openers.push(new GV(i))}registerOpener(i){return{dispose:this._openers.unshift(i)}}registerValidator(i){return{dispose:this._validators.push(i)}}registerExternalUriResolver(i){return{dispose:this._resolvers.push(i)}}setDefaultExternalOpener(i){this._defaultExternalOpener=i}registerExternalOpener(i){return{dispose:this._externalOpeners.push(i)}}open(i,e){var t;return ng(this,void 0,void 0,function*(){let n=typeof i=="string"?$.parse(i):i,o=(t=this._resolvedUriTargets.get(n))!==null&&t!==void 0?t:i;for(let r of this._validators)if(!(yield r.shouldOpen(o,e)))return!1;for(let r of this._openers)if(yield r.open(i,e))return!0;return!1})}resolveExternalUri(i,e){return ng(this,void 0,void 0,function*(){for(let t of this._resolvers)try{let n=yield t.resolveExternalUri(i,e);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,i),n}catch{}throw new Error("Could not resolve external URI: "+i.toString())})}_doOpenExternal(i,e){return ng(this,void 0,void 0,function*(){let t=typeof i=="string"?$.parse(i):i,n;try{n=(yield this.resolveExternalUri(t,e)).resolved}catch{n=t}let o;if(typeof i=="string"&&t.toString()===n.toString()?o=i:o=encodeURI(n.toString(!0)),e!=null&&e.allowContributedOpeners){let r=typeof e?.allowContributedOpeners=="string"?e?.allowContributedOpeners:void 0;for(let s of this._externalOpeners)if(yield s.openExternal(o,{sourceUri:t,preferredOpenerId:r},et.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:t},et.None)})}dispose(){this._validators.clear()}};YV=KJ([cI(0,Ft),cI(1,ji)],YV);var LDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},oie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},JV=class extends J{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(ct(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){let n=[...this._markersData.keys()];this._markersData.clear();let o=this.model.deltaDecorations(n,t);for(let r=0;r<o.length;r++)this._markersData.set(o[r],e[r]);return n.length!==0||o.length!==0}getMarker(e){return this._markersData.get(e.id)}},XV=class extends J{constructor(i,e){super(),this._markerService=e,this._onDidChangeMarker=this._register(new Q),this._markerDecorations=new en,i.getModels().forEach(t=>this._onModelAdded(t)),this._register(i.onModelAdded(this._onModelAdded,this)),this._register(i.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(i=>i.dispose()),this._markerDecorations.clear()}getMarker(i,e){let t=this._markerDecorations.get(i);return t&&t.getMarker(e)||null}_handleMarkerChange(i){i.forEach(e=>{let t=this._markerDecorations.get(e);t&&this._updateDecorations(t)})}_onModelAdded(i){let e=new JV(i);this._markerDecorations.set(i.uri,e),this._updateDecorations(e)}_onModelRemoved(i){var e;let t=this._markerDecorations.get(i.uri);t&&(t.dispose(),this._markerDecorations.delete(i.uri)),(i.uri.scheme===Oe.inMemory||i.uri.scheme===Oe.internal||i.uri.scheme===Oe.vscode)&&((e=this._markerService)===null||e===void 0||e.read({resource:i.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[i.uri])))}_updateDecorations(i){let e=this._markerService.read({resource:i.model.uri,take:500}),t=e.map(n=>({range:this._createDecorationRange(i.model,n),options:this._createDecorationOption(n)}));i.update(e,t)&&this._onDidChangeMarker.fire(i.model)}_createDecorationRange(i,e){let t=E.lift(e);if(e.severity===Xt.Hint&&!this._hasMarkerTag(e,1)&&!this._hasMarkerTag(e,2)&&(t=t.setEndPosition(t.startLineNumber,t.startColumn+2)),t=i.validateRange(t),t.isEmpty()){let n=i.getLineLastNonWhitespaceColumn(t.startLineNumber)||i.getLineMaxColumn(t.startLineNumber);if(n===1||t.endColumn>=n)return t;let o=i.getWordAtPosition(t.getStartPosition());o&&(t=new E(t.startLineNumber,o.startColumn,t.endLineNumber,o.endColumn))}else if(e.endColumn===Number.MAX_VALUE&&e.startColumn===1&&t.startLineNumber===t.endLineNumber){let n=i.getLineFirstNonWhitespaceColumn(e.startLineNumber);n<t.endColumn&&(t=new E(t.startLineNumber,n,t.endLineNumber,t.endColumn),e.startColumn=n)}return t}_createDecorationOption(i){let e,t,n,o,r;switch(i.severity){case Xt.Hint:this._hasMarkerTag(i,2)?e=void 0:this._hasMarkerTag(i,1)?e="squiggly-unnecessary":e="squiggly-hint",n=0;break;case Xt.Warning:e="squiggly-warning",t=Xi(bfe),n=20,r={color:Xi(Mme),position:xs.Inline};break;case Xt.Info:e="squiggly-info",t=Xi(wfe),n=10;break;case Xt.Error:default:e="squiggly-error",t=Xi(Afe),n=30,r={color:Xi(Tme),position:xs.Inline};break}return i.tags&&(i.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),i.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:e,showIfCollapsed:!0,overviewRuler:{color:t,position:us.Right},minimap:r,zIndex:n,inlineClassName:o}}_hasMarkerTag(i,e){return i.tags?i.tags.indexOf(e)>=0:!1}};XV=LDe([oie(0,li),oie(1,ka)],XV);var IDe={buttonBackground:j.fromHex("#0E639C"),buttonHoverBackground:j.fromHex("#006BB3"),buttonSeparator:j.white,buttonForeground:j.white},dI=class extends J{constructor(e,t){super(),this._onDidClick=this._register(new Q),this.options=t||Object.create(null),Ur(this.options,IDe,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(to.addTarget(this._element)),[Ee.CLICK,yi.Tap].forEach(n=>{this._register(le(this._element,n,o=>{if(!this.enabled){ii.stop(o);return}this._onDidClick.fire(o)}))}),this._register(le(this._element,Ee.KEY_DOWN,n=>{let o=new ni(n),r=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(n),r=!0):o.equals(9)&&(this._element.blur(),r=!0),r&&ii.stop(o,!0)})),this._register(le(this._element,Ee.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(le(this._element,Ee.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(Oh(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.setHoverBackground()})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.applyStyles()})),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");let n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?Hh(this._element,...Rg(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}},rie="done",sie="active",XR="infinite",ZR="infinite-long-running",aie="discrete",TDe={progressBarBackground:j.fromHex("#0E70C0")},yN=class extends J{constructor(i,e){super(),this.options=e||Object.create(null),Ur(this.options,TDe,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new jt(()=>_r(this.element),0)),this.longRunningScheduler=this._register(new jt(()=>this.infiniteLongRunning(),yN.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(i)}create(i){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),i.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(sie,XR,ZR,aie),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(i){return this.element.classList.add(rie),this.element.classList.contains(XR)?(this.bit.style.opacity="0",i?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",i?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(aie,rie,ZR),this.element.classList.add(sie,XR),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(ZR)}getContainer(){return this.element}style(i){this.progressBarBackground=i.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){let i=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=i}}};yN.LONG_RUNNING_INFINITE_THRESHOLD=1e4;var eF={},MDe=new iu("quick-input-button-icon-");function ZV(i){if(!i)return;let e,t=i.dark.toString();return eF[t]?e=eF[t]:(e=MDe.nextId(),mB(`.${e}, .hc-light .${e}`,`background-image: ${Jg(i.light||i.dark)}`),mB(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Jg(i.dark)}`),eF[t]=e),e}var NDe=ge,eU=class extends J{constructor(e){super(),this.parent=e,this.onKeyDown=t=>le(this.inputBox.inputElement,Ee.KEY_DOWN,n=>{t(new ni(n))}),this.onMouseDown=t=>le(this.inputBox.inputElement,Ee.MOUSE_DOWN,n=>{t(new sa(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=ae(this.parent,NDe(".quick-input-box")),this.inputBox=this._register(new rE(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Mt.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Mt.Info?1:e===Mt.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Mt.Info?1:e===Mt.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}},lS=ge,tU=class i{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=ae(e,lS(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&i.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(ae(this.domNode,lS("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Sn(this.domNode),this.keyElements.clear()}renderPart(e,t,n){let o=rJ.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,o.ctrlKey,!!n?.ctrlKey,o.separator),t.shiftKey&&this.renderKey(e,o.shiftKey,!!n?.shiftKey,o.separator),t.altKey&&this.renderKey(e,o.altKey,!!n?.altKey,o.separator),t.metaKey&&this.renderKey(e,o.metaKey,!!n?.metaKey,o.separator);let r=t.keyLabel;r&&this.renderKey(e,r,!!n?.keyCode,"")}renderKey(e,t,n,o){ae(e,this.createKeyElement(t,n?".highlight":"")),o&&ae(e,lS("span.monaco-keybinding-key-separator",void 0,o))}renderUnbound(e){ae(e,this.createKeyElement(m("unbound","Unbound")))}createKeyElement(e,t=""){let n=lS("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(let t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&yr(e.firstPart,t.firstPart)&&yr(e.chordPart,t.chordPart)}},lie=new Hl(()=>{let i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});new Hl(()=>({collator:new Intl.Collator(void 0,{numeric:!0})}));new Hl(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function RDe(i,e,t=!1){let n=i||"",o=e||"",r=lie.value.collator.compare(n,o);return lie.value.collatorIsNumeric&&r===0&&n!==o?n<o?-1:1:r}function FDe(i,e,t){let n=i.toLowerCase(),o=e.toLowerCase(),r=BDe(i,e,t);if(r)return r;let s=n.endsWith(t),a=o.endsWith(t);if(s!==a)return s?-1:1;let l=RDe(n,o);return l!==0?l:n.localeCompare(o)}function BDe(i,e,t){let n=i.toLowerCase(),o=e.toLowerCase(),r=n.startsWith(t),s=o.startsWith(t);if(r!==s)return r?-1:1;if(r&&s){if(n.length<o.length)return-1;if(n.length>o.length)return 1}return 0}var Qle=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},PDe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},bl=ge,iU=class{constructor(e){this.hidden=!1,this._onChecked=new Q,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}},Uw=class i{get templateId(){return i.ID}renderTemplate(e){let t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=ae(e,bl(".quick-input-list-entry"));let n=ae(t.entry,bl("label.quick-input-list-label"));t.toDisposeTemplate.push(Tn(n,Ee.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=ae(n,bl("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Tn(t.checkbox,Ee.CHANGE,c=>{t.element.checked=t.checkbox.checked}));let o=ae(n,bl(".quick-input-list-rows")),r=ae(o,bl(".quick-input-list-row")),s=ae(o,bl(".quick-input-list-row"));t.label=new a0(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});let a=ae(r,bl(".quick-input-list-entry-keybinding"));t.keybinding=new tU(a,is);let l=ae(s,bl(".quick-input-list-label-meta"));return t.detail=new a0(l,{supportHighlights:!0,supportIcons:!0}),t.separator=ae(t.entry,bl(".quick-input-list-separator")),t.actionBar=new wa(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=st(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(c=>n.checkbox.checked=c));let{labelHighlights:o,descriptionHighlights:r,detailHighlights:s}=e,a=Object.create(null);a.matches=o||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=r||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:s,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();let l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((c,d)=>{let h=c.iconClass||(c.iconPath?ZV(c.iconPath):void 0);c.alwaysVisible&&(h=h?`${h} always-visible`:"always-visible");let u=new ho(`id-${d}`,"",h,!0,()=>PDe(this,void 0,void 0,function*(){e.fireButtonTriggered({button:c,item:e.item})}));return u.tooltip=c.tooltip||"",u}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=st(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=st(e.toDisposeElement),e.toDisposeTemplate=st(e.toDisposeTemplate)}};Uw.ID="listelement";var nU=class{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return Uw.ID}},gn;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage"})(gn||(gn={}));var Qw=class{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new Q,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new Q,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new Q,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new Q,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new Q,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new Q,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Q,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=ae(this.parent,bl(".quick-input-list"));let o=new nU,r=new oU;this.list=n.createList("QuickInput",this.container,o,[new Uw],{identityProvider:{getId:s=>s.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(s=>{let a=new ni(s);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(gt?s.metaKey:s.ctrlKey)&&this.list.setFocus(vo(this.list.length));break;case 16:{let l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break}case 18:{let l=this.list.getFocus();l.length===1&&l[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(s=>{s.browserEvent.button!==2&&s.browserEvent.preventDefault()})),this.disposables.push(le(this.container,Ee.CLICK,s=>{(s.x||s.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(s=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(s=>{typeof s.index=="number"&&(s.browserEvent.preventDefault(),this.list.setSelection([s.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Z.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Z.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,o=e.length;n<o;n++){let r=e[n];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0,t=this.elements;for(let n=0,o=t.length;n<o;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0,t=this.elements;for(let n=0,o=t.length;n<o;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=st(this.elementDisposables);let t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,o,r)=>{var s,a,l;if(o.type!=="separator"){let c=r&&e[r-1],d=o.label&&o.label.replace(/\r?\n/g," "),h=Sm(d).text.trim(),u=o.meta&&o.meta.replace(/\r?\n/g," "),g=o.description&&o.description.replace(/\r?\n/g," "),p=o.detail&&o.detail.replace(/\r?\n/g," "),f=o.ariaLabel||[d,g,p].map(b=>Fue(b)).filter(b=>!!b).join(", "),v=this.parent.classList.contains("show-checkboxes");n.push(new iU({hasCheckbox:v,index:r,item:o,saneLabel:d,saneSortLabel:h,saneMeta:u,saneAriaLabel:f,saneDescription:g,saneDetail:p,labelHighlights:(s=o.highlights)===null||s===void 0?void 0:s.label,descriptionHighlights:(a=o.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=o.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:c&&c.type==="separator"?c:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,o,r)=>(n.set(o.item,r),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){let t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;let t=new Set;for(let n of e)t.add(n);for(let n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===gn.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=gn.First),e===gn.Previous&&this.list.getFocus()[0]===0&&(e=gn.Last),e===gn.Second&&this.list.length<2&&(e=gn.First),e){case gn.First:this.list.focusFirst();break;case gn.Second:this.list.focusNth(1);break;case gn.Last:this.list.focusLast();break;case gn.Next:this.list.focusNext();break;case gn.Previous:this.list.focusPrevious();break;case gn.NextPage:this.list.focusNextPage();break;case gn.PreviousPage:this.list.focusPreviousPage();break}let t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;let t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(o=>{o.labelHighlights=void 0,o.descriptionHighlights=void 0,o.detailHighlights=void 0,o.hidden=!1;let r=o.index&&this.inputElements[o.index-1];o.separator=r&&r.type==="separator"?r:void 0});else{let o;this.elements.forEach(r=>{let s;this.matchOnLabelMode==="fuzzy"?s=this.matchOnLabel?tr(Ey(e,Sm(r.saneLabel))):void 0:s=this.matchOnLabel?tr(ODe(t,Sm(r.saneLabel))):void 0;let a=this.matchOnDescription?tr(Ey(e,Sm(r.saneDescription||""))):void 0,l=this.matchOnDetail?tr(Ey(e,Sm(r.saneDetail||""))):void 0,c=this.matchOnMeta?tr(Ey(e,Sm(r.saneMeta||""))):void 0;if(s||a||l||c?(r.labelHighlights=s,r.descriptionHighlights=a,r.detailHighlights=l,r.hidden=!1):(r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=!r.item.alwaysShow),r.separator=void 0,!this.sortByLabel){let d=r.index&&this.inputElements[r.index-1];o=d&&d.type==="separator"?d:o,o&&!r.hidden&&(r.separator=o,o=void 0)}})}let n=this.elements.filter(o=>!o.hidden);if(this.sortByLabel&&e){let o=e.toLowerCase();n.sort((r,s)=>HDe(r,s,o))}return this.elementsToIndexes=n.reduce((o,r,s)=>(o.set(r.item,s),o),new Map),this.list.splice(0,this.list.length,n),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(n.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;let e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(let n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=st(this.elementDisposables),this.disposables=st(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}};Qle([vn],Qw.prototype,"onDidChangeFocus",null);Qle([vn],Qw.prototype,"onDidChangeSelection",null);function ODe(i,e){let{text:t,iconOffsets:n}=e;if(!n||n.length===0)return cie(i,t);let o=bM(t," "),r=t.length-o.length,s=cie(i,o);if(s)for(let a of s){let l=n[a.start+r]+r;a.start+=l,a.end+=l}return s}function cie(i,e){let t=e.toLowerCase().indexOf(i.toLowerCase());return t!==-1?[{start:t,end:t+i.length}]:null}function HDe(i,e,t){let n=i.labelHighlights||[],o=e.labelHighlights||[];return n.length&&!o.length?-1:!n.length&&o.length?1:n.length===0&&o.length===0?0:FDe(i.saneSortLabel,e.saneSortLabel,t)}var oU=class{getWidgetAriaLabel(){return m("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}},die=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},$r=ge,rU={iconClass:_.quickInputBack.classNames,tooltip:m("quickInput.back","Back"),handle:-1},hI=class i extends J{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=i.noPromptMessage,this._severity=Mt.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new Q),this.onDidHideEmitter=this._register(new Q),this.onDisposeEmitter=this._register(new Q),this.visibleDisposables=this._register(new ne),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){let t=this._ignoreFocusOut!==e&&!jl;this._ignoreFocusOut=e&&!jl,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=Ib.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;let e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");let t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Sr,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();let o=this.buttons.filter(s=>s===rU);this.ui.leftActionBar.push(o.map((s,a)=>{let l=new ho(`id-${a}`,"",s.iconClass||ZV(s.iconPath),!0,()=>die(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return l.tooltip=s.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();let r=this.buttons.filter(s=>s!==rU);this.ui.rightActionBar.push(r.map((s,a)=>{let l=new ho(`id-${a}`,"",s.iconClass||ZV(s.iconPath),!0,()=>die(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return l.tooltip=s.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);let n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,Hh(this.ui.message,...Rg(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?m("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Mt.Ignore){let t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};hI.noPromptMessage=m("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");var jw=class i extends hI{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Q),this.onWillAcceptEmitter=this._register(new Q),this.onDidAcceptEmitter=this._register(new Q),this.onDidCustomEmitter=this._register(new Q),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?Ba.NONE:Ba.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Q),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Q),this.onDidTriggerItemButtonEmitter=this._register(new Q),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?h1e:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(gn.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(gn.Next),this.canSelectMany&&this.ui.list.domFocus(),ii.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(gn.Previous):this.ui.list.focus(gn.Last),this.canSelectMany&&this.ui.list.domFocus(),ii.stop(e,!0);break;case 12:this.ui.list.focus(gn.NextPage),this.canSelectMany&&this.ui.list.domFocus(),ii.stop(e,!0);break;case 11:this.ui.list.focus(gn.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),ii.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(gn.First),ii.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(gn.Last),ii.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Zn(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Zn(e,this._selectedItems,(n,o)=>n===o)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&Zn(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return le(this.ui.container,Ee.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;let t=new ni(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{let[r,s]=o.getParts();return s?!1:r.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(r.altKey&&n===6||r.ctrlKey&&n===5||r.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;let e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);let n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let o=this.ariaLabel;if(o||(o=this.placeholder||i.DEFAULT_ARIA_LABEL,this.title&&(o+=` - ${this.title}`)),this.ui.inputBox.ariaLabel!==o&&(this.ui.inputBox.ariaLabel=o),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Ba.NONE:this._itemActivation=Ba.FIRST;break;case Ba.SECOND:this.ui.list.focus(gn.Second),this._itemActivation=Ba.FIRST;break;case Ba.LAST:this.ui.list.focus(gn.Last),this._itemActivation=Ba.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(gn.First)),this.keepScrollPosition&&(this.scrollTop=e)}};jw.DEFAULT_ARIA_LABEL=m("quickInputBox.ariaLabel","Type to narrow down results.");var pu=class i extends J{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Q),this.onDidCustomEmitter=this._register(new Q),this.onDidTriggerButtonEmitter=this._register(new Q),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Q),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Q),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){let e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(le(window,Ee.KEY_DOWN,e,!0)),this._register(le(window,Ee.KEY_UP,e,!0)),this._register(le(window,Ee.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;let e=ae(this.parentElement,$r(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";let t=ls(e),n=ae(e,$r(".quick-input-titlebar")),o=this._register(new wa(n));o.domNode.classList.add("quick-input-left-action-bar");let r=ae(n,$r(".quick-input-title")),s=this._register(new wa(n));s.domNode.classList.add("quick-input-right-action-bar");let a=ae(e,$r(".quick-input-description")),l=ae(e,$r(".quick-input-header")),c=ae(l,$r("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",m("quickInput.checkAll","Toggle all checkboxes")),this._register(Tn(c,Ee.CHANGE,O=>{let H=c.checked;S.setAllVisibleChecked(H)})),this._register(le(c,Ee.CLICK,O=>{(O.x||O.y)&&g.setFocus()}));let d=ae(l,$r(".quick-input-description")),h=ae(l,$r(".quick-input-and-message")),u=ae(h,$r(".quick-input-filter")),g=this._register(new eU(u));g.setAttribute("aria-describedby",`${this.idPrefix}message`);let p=ae(u,$r(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");let f=new Ub(p,{countFormat:m({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),v=ae(u,$r(".quick-input-count"));v.setAttribute("aria-live","polite");let b=new Ub(v,{countFormat:m({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),A=ae(l,$r(".quick-input-action")),w=new dI(A);w.label=m("ok","OK"),this._register(w.onDidClick(O=>{this.onDidAcceptEmitter.fire()}));let C=ae(l,$r(".quick-input-action")),k=new dI(C);k.label=m("custom","Custom"),this._register(k.onDidClick(O=>{this.onDidCustomEmitter.fire()}));let L=ae(h,$r(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new Qw(e,this.idPrefix+"list",this.options));this._register(S.onChangedAllVisibleChecked(O=>{c.checked=O})),this._register(S.onChangedVisibleCount(O=>{f.setCount(O)})),this._register(S.onChangedCheckedCount(O=>{b.setCount(O)})),this._register(S.onLeave(()=>{setTimeout(()=>{g.setFocus(),this.controller instanceof jw&&this.controller.canSelectMany&&S.clearFocus()},0)})),this._register(S.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));let y=new yN(e);y.getContainer().classList.add("quick-input-progress");let M=Oh(e);return this._register(M),this._register(le(e,Ee.FOCUS,O=>{this.previousFocusElement=O.relatedTarget instanceof HTMLElement?O.relatedTarget:void 0},!0)),this._register(M.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Ib.Blur),this.previousFocusElement=void 0})),this._register(le(e,Ee.FOCUS,O=>{g.setFocus()})),this._register(le(e,Ee.KEY_DOWN,O=>{let H=new ni(O);switch(H.keyCode){case 3:ii.stop(O,!0),this.onDidAcceptEmitter.fire();break;case 9:ii.stop(O,!0),this.hide(Ib.Gesture);break;case 2:if(!H.altKey&&!H.ctrlKey&&!H.metaKey){let D=[".action-label.codicon"];e.classList.contains("show-checkboxes")?D.push("input"):D.push("input[type=text]"),this.getUI().list.isDisplayed()&&D.push(".monaco-list");let K=e.querySelectorAll(D.join(", "));H.shiftKey&&H.target===K[0]?(ii.stop(O,!0),K[K.length-1].focus()):!H.shiftKey&&H.target===K[K.length-1]&&(ii.stop(O,!0),K[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:o,titleBar:n,title:r,description1:a,description2:d,rightActionBar:s,checkAll:c,filterContainer:u,inputBox:g,visibleCountContainer:p,visibleCount:f,countContainer:v,count:b,okContainer:A,ok:w,message:L,customButtonContainer:C,customButton:k,list:S,progressBar:y,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:O=>this.show(O),hide:()=>this.hide(),setVisibilities:O=>this.setVisibilities(O),setComboboxAccessibility:O=>this.setComboboxAccessibility(O),setEnabled:O=>this.setEnabled(O),setContextKey:O=>this.options.setContextKey(O)},this.updateStyles(),this.ui}pick(e,t={},n=et.None){return new Promise((o,r)=>{let s=d=>{var h;s=o,(h=t.onKeyMods)===null||h===void 0||h.call(t,a.keyMods),o(d)};if(n.isCancellationRequested){s(void 0);return}let a=this.createQuickPick(),l,c=[a,a.onDidAccept(()=>{if(a.canSelectMany)s(a.selectedItems.slice()),a.hide();else{let d=a.activeItems[0];d&&(s(d),a.hide())}}),a.onDidChangeActive(d=>{let h=d[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){let h=d[0];h&&(s(h),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{let h=a.items.indexOf(d.item);if(h!==-1){let u=a.items.slice(),g=u.splice(h,1),p=a.activeItems.filter(v=>v!==g[0]),f=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=u,p&&(a.activeItems=p),a.keepScrollPosition=f}}}))),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{st(c),s(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,h])=>{l=h,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(u=>u.type!=="separator"&&u.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{r(d),a.hide()})})}createQuickPick(){let e=this.getUI();return new jw(e)}show(e){let t=this.getUI();this.onShowEmitter.fire();let n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Mt.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Hh(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";let o=this.options.backKeybindingLabel();rU.tooltip=o?m("quickInput.backWithKeybinding","Back ({0})",o):m("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){let t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){let t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(let t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(let t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;let n=this.controller;if(n){let o=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!o){let r=this.previousFocusElement;for(;r&&!r.offsetParent;)r=tr(r.parentElement);r!=null&&r.offsetParent?(r.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;let e=this.ui.container.style,t=Math.min(this.dimension.width*.62,i.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){let{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:o,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=o?`1px solid ${o}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);let s=[];this.styles.list.pickerGroupBorder&&s.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&s.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(s.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&s.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&s.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&s.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&s.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&s.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),s.push("}"));let a=s.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}};pu.MAX_WIDTH=600;var WDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},hie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},sU=class extends J{constructor(i,e){super(),this.quickInputService=i,this.instantiationService=e,this.registry=oi.as(pm.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(i="",e){this.doShowOrPick(i,!1,e)}doShowOrPick(i,e,t){var n;let[o,r]=this.getOrInstantiateProvider(i),s=this.visibleQuickAccess,a=s?.descriptor;if(s&&r&&a===r){i!==r.prefix&&!(t!=null&&t.preserveValue)&&(s.picker.value=i),this.adjustValueSelection(s.picker,r,t);return}if(r&&!(t!=null&&t.preserveValue)){let u;if(s&&a&&a!==r){let g=s.value.substr(a.prefix.length);g&&(u=`${r.prefix}${g}`)}if(!u){let g=o?.defaultFilterValue;g===Xz.LAST?u=this.lastAcceptedPickerValues.get(r):typeof g=="string"&&(u=`${r.prefix}${g}`)}typeof u=="string"&&(i=u)}let l=new ne,c=l.add(this.quickInputService.createQuickPick());c.value=i,this.adjustValueSelection(c,r,t),c.placeholder=r?.placeholder,c.quickNavigate=t?.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!s,(typeof t?.itemActivation=="number"||t!=null&&t.quickNavigateConfiguration)&&(c.itemActivation=(n=t?.itemActivation)!==null&&n!==void 0?n:Ba.SECOND),c.contextKey=r?.contextKey,c.filterValue=u=>u.substring(r?r.prefix.length:0),r!=null&&r.placeholder&&(c.ariaLabel=r?.placeholder);let d;e&&(d=new UA,l.add(Ql(c.onWillAccept)(u=>{u.veto(),c.hide()}))),l.add(this.registerPickerListeners(c,o,r,i));let h=l.add(new po);if(o&&l.add(o.provide(c,h.token)),Ql(c.onDidHide)(()=>{c.selectedItems.length===0&&h.cancel(),l.dispose(),d?.complete(c.selectedItems.slice(0))}),c.show(),e)return d?.p}adjustValueSelection(i,e,t){var n;let o;t!=null&&t.preserveValue?o=[i.value.length,i.value.length]:o=[(n=e?.prefix.length)!==null&&n!==void 0?n:0,i.value.length],i.valueSelection=o}registerPickerListeners(i,e,t,n){let o=new ne,r=this.visibleQuickAccess={picker:i,descriptor:t,value:n};return o.add(ct(()=>{r===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(i.onDidChangeValue(s=>{let[a]=this.getOrInstantiateProvider(s);a!==e?this.show(s,{preserveValue:!0}):r.value=s})),t&&o.add(i.onDidAccept(()=>{this.lastAcceptedPickerValues.set(t,i.value)})),o}getOrInstantiateProvider(i){let e=this.registry.getQuickAccessProvider(i);if(!e)return[void 0,void 0];let t=this.mapProviderToDescriptor.get(e);return t||(t=this.instantiationService.createInstance(e.ctor),this.mapProviderToDescriptor.set(e,t)),[t,e]}};sU=WDe([hie(0,dl),hie(1,tt)],sU);var zDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Bv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},aU=class extends goe{constructor(i,e,t,n,o){super(t),this.instantiationService=i,this.contextKeyService=e,this.accessibilityService=n,this.layoutService=o,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(sU))),this._quickAccess}createController(i=this.layoutService,e){let t={idPrefix:"quickInput_",container:i.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:o=>this.setContextKey(o),returnFocus:()=>i.focus(),createList:(o,r,s,a,l)=>this.instantiationService.createInstance(g6,o,r,s,a,l),styles:this.computeStyles()},n=this._register(new pu(Object.assign(Object.assign({},t),e)));return n.layout(i.dimension,i.offset.quickPickTop),this._register(i.onDidLayout(o=>n.layout(o,i.offset.quickPickTop))),this._register(n.onShow(()=>this.resetContextKeys())),this._register(n.onHide(()=>this.resetContextKeys())),n}setContextKey(i){let e;i&&(e=this.contexts.get(i),e||(e=new Le(i,!1).bindTo(this.contextKeyService),this.contexts.set(i,e))),!(e&&e.get())&&(this.resetContextKeys(),e?.set(!0))}resetContextKeys(){this.contexts.forEach(i=>{i.get()&&i.reset()})}pick(i,e={},t=et.None){return this.controller.pick(i,e,t)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Pa(this.theme,{quickInputBackground:gZ,quickInputForeground:kpe,quickInputTitleBackground:Epe,contrastBorder:mt,widgetShadow:Ua})),inputBox:Pa(this.theme,{inputForeground:WM,inputBackground:HM,inputBorder:zM,inputValidationInfoBackground:_Y,inputValidationInfoForeground:vY,inputValidationInfoBorder:AY,inputValidationWarningBackground:bY,inputValidationWarningForeground:wY,inputValidationWarningBorder:CY,inputValidationErrorBackground:yY,inputValidationErrorForeground:SY,inputValidationErrorBorder:DY}),countBadge:Pa(this.theme,{badgeBackground:tf,badgeForeground:nf,badgeBorder:mt}),button:Pa(this.theme,{buttonForeground:i1,buttonBackground:jP,buttonHoverBackground:Ape,buttonBorder:mt}),progressBar:Pa(this.theme,{progressBarBackground:bpe}),keybindingLabel:Pa(this.theme,{keybindingLabelBackground:Tpe,keybindingLabelForeground:Mpe,keybindingLabelBorder:Npe,keybindingLabelBottomBorder:Rpe,keybindingLabelShadow:Ua}),list:Pa(this.theme,{listBackground:gZ,listInactiveFocusForeground:o1,listInactiveSelectionIconForeground:r1,listInactiveFocusBackground:s1,listFocusOutline:Pi,listInactiveFocusOutline:Pi,pickerGroupBorder:Ipe,pickerGroupForeground:Lpe})}}};aU=zDe([Bv(0,tt),Bv(1,Ze),Bv(2,mi),Bv(3,Rd),Bv(4,cv)],aU);var jle=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},og=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},lU=class extends aU{constructor(i,e,t,n,o,r){super(e,t,n,o,new PV(i.getContainerDomNode(),r)),this.host=void 0;let s=B0.get(i);if(s){let a=s.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return a.getDomNode()},get dimension(){return i.getLayoutInfo()},get onDidLayout(){return i.onDidLayoutChange},focus:()=>i.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}};lU=jle([og(1,tt),og(2,Ze),og(3,mi),og(4,Rd),og(5,Ft)],lU);var cU=class{constructor(i,e){this.instantiationService=i,this.codeEditorService=e,this.mapEditorToService=new Map}get activeService(){let i=this.codeEditorService.getFocusedCodeEditor();if(!i)throw new Error("Quick input service needs a focused editor to work.");let e=this.mapEditorToService.get(i);if(!e){let t=e=this.instantiationService.createInstance(lU,i);this.mapEditorToService.set(i,e),Ql(i.onDidDispose)(()=>{t.dispose(),this.mapEditorToService.delete(i)})}return e}get quickAccess(){return this.activeService.quickAccess}pick(i,e={},t=et.None){return this.activeService.pick(i,e,t)}createQuickPick(){return this.activeService.createQuickPick()}};cU=jle([og(0,tt),og(1,Ft)],cU);var B0=class i{constructor(e){this.editor=e,this.widget=new uI(this.editor)}static get(e){return e.getContribution(i.ID)}dispose(){this.widget.dispose()}};B0.ID="editor.controller.quickInput";var uI=class i{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return i.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};uI.ID="editor.contrib.quickInputWidget";Wt(B0.ID,B0);var VDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},tF=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},dU=class extends J{constructor(i,e,t){super(),this._contextKeyService=i,this._layoutService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Q,this._onDidChangeReducedMotion=new Q,this._accessibilityModeEnabledContext=PC.bindTo(this._contextKeyService);let n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),n(),this._register(this.onDidChangeScreenReaderOptimized(()=>n()));let o=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=o.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(o)}initReducedMotionListeners(i){if(!this._layoutService.hasContainer)return;this._register(le(i,"change",()=>{this._systemMotionReduced=i.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));let e=()=>{let t=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",t),this._layoutService.container.classList.toggle("enable-motion",!t)};e(),this._register(this.onDidChangeReducedMotion(()=>e()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){let i=this._configurationService.getValue("editor.accessibilitySupport");return i==="on"||i==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){let i=this._configMotionReduced;return i==="on"||i==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};dU=VDe([tF(0,Ze),tF(1,cv),tF(2,Ot)],dU);var qJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},r_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},hU=class{constructor(i,e){this._commandService=i,this._hiddenStates=new gI(e)}createMenu(i,e,t){return new uU(i,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},t),this._commandService,e,this)}};hU=qJ([r_(0,ji),r_(1,Ea)],hU);var gI=class m1{constructor(e){this._storageService=e,this._disposables=new ne,this._onDidChange=new Q,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1;try{let t=e.get(m1._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(t=>{if(t.key===m1._key){if(!this._ignoreChangeEvent)try{let n=e.get(m1._key,0,"{}");this._data=JSON.parse(n)}catch(n){console.log("FAILED to read storage after UPDATE",n)}this._onDidChange.fire()}}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}isHidden(e,t){var n,o;return(o=(n=this._data[e.id])===null||n===void 0?void 0:n.includes(t))!==null&&o!==void 0?o:!1}updateHidden(e,t,n){let o=this._data[e.id];if(n)o?o.indexOf(t)<0&&o.push(t):this._data[e.id]=[t];else if(o){let r=o.indexOf(t);r>=0&&pge(o,r),o.length===0&&delete this._data[e.id]}this._persist()}_persist(){try{this._ignoreChangeEvent=!0;let e=JSON.stringify(this._data);this._storageService.store(m1._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};gI._key="menu.hiddenCommands";gI=qJ([r_(0,Ea)],gI);var uU=class Km{constructor(e,t,n,o,r,s){this._id=e,this._hiddenStates=t,this._options=n,this._commandService=o,this._contextKeyService=r,this._menuService=s,this._disposables=new ne,this._menuGroups=[],this._contextKeys=new Set,this._build();let a=new jt(()=>{this._build(),this._onDidChange.fire(this)},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Ds.onDidChangeMenu(d=>{d.has(e)&&a.schedule()}));let l=this._disposables.add(new ne),c=()=>{let d=new jt(()=>this._onDidChange.fire(this),n.eventDebounceDelay);l.add(d),l.add(r.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&d.schedule()})),l.add(t.onDidChange(()=>{d.schedule()}))};this._onDidChange=new Q({onFirstListenerAdd:c,onLastListenerRemove:l.clear.bind(l)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();let e=Ds.getMenuItems(this._id),t;e.sort(Km._compareMenuItems);for(let n of e){let o=n.group||"";(!t||t[0]!==o)&&(t=[o,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(Km._fillInKbExprKeys(e.when,this._contextKeys),Jm(e)){if(e.command.precondition&&Km._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){let t=e.command.toggled.condition||e.command.toggled;Km._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Ds.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){let t=[];for(let n of this._menuGroups){let[o,r]=n,s=[],a=[];for(let l of r)if(this._contextKeyService.contextMatchesRules(l.when)){let c;if(Jm(l)){let d=UDe(this._id,l.command,this._hiddenStates);c=new Uh(l.command,l.alt,e,d,this._contextKeyService,this._commandService)}else c=new RA(l,this._menuService,this._contextKeyService,e),c.actions.length===0&&(c.dispose(),c=void 0);c&&a.push(c)}a.length>0&&t.push([o,a]),s.length>0}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,o=t.group;if(n!==o){if(n){if(!o)return-1}else return 1;if(n==="navigation")return-1;if(o==="navigation")return 1;let a=n.localeCompare(o);if(a!==0)return a}let r=e.order||0,s=t.order||0;return r<s?-1:r>s?1:Km._compareTitles(Jm(e)?e.command.title:e.title,Jm(t)?t.command.title:t.title)}static _compareTitles(e,t){let n=typeof e=="string"?e:e.original,o=typeof t=="string"?t:t.original;return n.localeCompare(o)}};uU=qJ([r_(3,ji),r_(4,Ze),r_(5,em)],uU);function UDe(i,e,t){let n=`${i.id}/${e.id}`,o=typeof e.title=="string"?e.title:e.title.value,r=KX({id:n,label:m("hide.label","Hide '{0}'",o),run(){t.updateHidden(i,e.id,!0)}}),s=KX({id:n,label:o,get checked(){return!t.isHidden(i,e.id)},run(){let a=!t.isHidden(i,e.id);t.updateHidden(i,e.id,a)}});return{hide:r,toggle:s,get isHidden(){return!s.checked}}}var QDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},uie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Rm=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},gU=class extends J{constructor(i,e){super(),this.layoutService=i,this.logService=e,this.mapTextToType=new Map,this.findText="",this.resources=[],(bd||GG)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){let i=()=>{let e=new UA;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=e,navigator.clipboard.write([new ClipboardItem({"text/plain":e.p})]).catch(t=>Rm(this,void 0,void 0,function*(){(!(t instanceof Error)||t.name!=="NotAllowedError"||!e.isRejected)&&this.logService.error(t)}))};this.layoutService.hasContainer&&(this._register(le(this.layoutService.container,"click",i)),this._register(le(this.layoutService.container,"keydown",i)))}writeText(i,e){return Rm(this,void 0,void 0,function*(){if(e){this.mapTextToType.set(e,i);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(i);try{return yield navigator.clipboard.writeText(i)}catch(o){console.error(o)}let t=document.activeElement,n=document.body.appendChild(ge("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=i,n.focus(),n.select(),document.execCommand("copy"),t instanceof HTMLElement&&t.focus(),document.body.removeChild(n)})}readText(i){return Rm(this,void 0,void 0,function*(){if(i)return this.mapTextToType.get(i)||"";try{return yield navigator.clipboard.readText()}catch(e){return console.error(e),""}})}readFindText(){return Rm(this,void 0,void 0,function*(){return this.findText})}writeFindText(i){return Rm(this,void 0,void 0,function*(){this.findText=i})}readResources(){return Rm(this,void 0,void 0,function*(){return this.resources})}};gU=QDe([uie(0,cv),uie(1,no)],gU);var jDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},KDe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rA="data-keybinding-context",Kw=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){let t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}},mu=class extends Kw{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};mu.INSTANCE=new mu;var pI=class i extends Kw{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=gd.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(o=>{if(o.source===7){let r=Array.from(At.map(this._values,([s])=>s));this._values.clear(),n.fire(new fI(r))}else{let r=[];for(let s of o.affectedKeys){let a=`config.${s}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...At.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}n.fire(new fI(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(i._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);let t=e.substr(i._keyPrefix.length),n=this._configurationService.getValue(t),o;switch(typeof n){case"number":case"boolean":case"string":o=n;break;default:Array.isArray(n)?o=JSON.stringify(n):o=n}return this._values.set(e,o),o}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};pI._keyPrefix="config.";var pU=class{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}},mI=class{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}},fI=class{constructor(e){this.keys=e}affectsSome(e){for(let t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}},mU=class{constructor(e){this.events=e}affectsSome(e){for(let t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}};function qDe(i,e){return i.allKeysContainedIn(new Set(Object.keys(e)))}var _I=class{constructor(e){this._onDidChangeContext=new Bh({merge:t=>new mU(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new pU(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new _U(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");let t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;let n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new mI(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new mI(e))}getContext(e){return this._isDisposed?mu.INSTANCE:this.getContextValuesContainer($De(e))}},fU=class extends _I{constructor(i){super(0),this._contexts=new Map,this._toDispose=new ne,this._lastContextId=0;let e=new pI(this._myContextId,i,this._onDidChangeContext);this._contexts.set(this._myContextId,e),this._toDispose.add(e)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(i){return this._isDisposed?mu.INSTANCE:this._contexts.get(i)||mu.INSTANCE}createChildContext(i=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let e=++this._lastContextId;return this._contexts.set(e,new Kw(e,this.getContextValuesContainer(i))),e}disposeContext(i){this._isDisposed||this._contexts.delete(i)}};fU=jDe([KDe(0,Ot)],fU);var _U=class extends _I{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new eo,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(rA)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(rA,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{let t=this._parent.getContextValuesContainer(this._myContextId).value;qDe(e,t)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(rA),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?mu.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}};function $De(i){for(;i;){if(i.hasAttribute(rA)){let e=i.getAttribute(rA);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}function GDe(i,e,t){i.get(Ze).createKey(String(e),YDe(t))}function YDe(i){return WA(i,e=>{if(typeof e=="object"&&e.$mid===1)return $.revive(e).toString();if(e instanceof $)return e.toString()})}ft.registerCommand(Zue,GDe);ft.registerCommand({id:"getContextKeyInfo",handler(){return[...Le.all()].sort((i,e)=>i.key.localeCompare(e.key))},description:{description:m("getContextKeyInfo","A command that returns information about context keys"),args:[]}});ft.registerCommand("_generateContextKeyInfo",function(){let i=[],e=new Set;for(let t of Le.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});var JDe=class{constructor(i){this.incoming=new Map,this.outgoing=new Map,this.data=i}},vU=class{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){let e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){let n=this.lookupOrInsertNode(e),o=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),o),o.incoming.set(this._hashFn(e),n)}removeNode(e){let t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){let t=this._hashFn(e),n=this._nodes.get(t);return n||(n=new JDe(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){let n=new Set([e]),o=this._findCycle(t,n);if(o)return o}}_findCycle(e,t){for(let[n,o]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);let r=this._findCycle(o,t);if(r)return r;t.delete(n)}}},vI=class extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},AU=class i{constructor(e=new $_,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(tt,this)}createChild(e){return new i(e,this._strict,this)}invokeFunction(e,...t){let n=Ih.traceInvocation(e),o=!1;try{return e({get:r=>{if(o)throw uhe("service accessor is only valid during the invocation of its target method");let s=this._getOrCreateServiceInstance(r,n);if(!s)throw new Error(`[invokeFunction] unknown service '${r}'`);return s}},...t)}finally{o=!0,n.stop()}}createInstance(e,...t){let n,o;return e instanceof ea?(n=Ih.traceCreation(e.ctor),o=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Ih.traceCreation(e),o=this._createInstance(e,t,n)),n.stop(),o}_createInstance(e,t=[],n){let o=Va.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(let a of o){let l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),r.push(l)}let s=o.length>0?o[0].index:t.length;if(t.length!==s){console.trace(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);let a=s-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,s)}return new e(...t,...r)}_setServiceInstance(e,t){if(this._services.get(e)instanceof ea)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof ea?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){let o=new vU(a=>a.id.toString()),r=0,s=[{id:e,desc:t,_trace:n}];for(;s.length;){let a=s.pop();if(o.lookupOrInsertNode(a),r++>1e3)throw new vI(o);for(let l of Va.getServiceDependencies(a.desc.ctor)){let c=this._getServiceInstanceOrDescriptor(l.id);if(c||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),c instanceof ea){let d={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};o.insertEdge(a,d),s.push(d)}}}for(;;){let a=o.roots();if(a.length===0){if(!o.isEmpty())throw new vI(o);break}for(let{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof ea){let c=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,c)}o.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],o,r){if(this._services.get(e)instanceof ea)return this._createServiceInstance(t,n,o,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,o,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,o){if(n){let r=new Hl(()=>this._createInstance(e,t,o));return new Proxy(Object.create(null),{get(s,a){if(a in s)return s[a];let l=r.value,c=l[a];return typeof c!="function"||(c=c.bind(l),s[a]=c),c},set(s,a,l){return r.value[a]=l,!0}})}else return this._createInstance(e,t,o)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}},Ih=class i{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return i._None}static traceCreation(e){return i._None}branch(e,t){let n=new i(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;i._totals+=e;let t=!1;function n(r,s){let a=[],l=new Array(r+1).join("	");for(let[c,d,h]of s._dep)if(d&&h){t=!0,a.push(`${l}CREATES -> ${c}`);let u=n(r+1,h);u&&a.push(u)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}let o=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${i._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(o.join(`
`))}};Ih._None=new class extends Ih{constructor(){super(-1,null)}stop(){}branch(){return this}};Ih._totals=0;var bU=class{constructor(){this._byResource=new en,this._byOwner=new Map}set(e,t,n){let o=this._byResource.get(e);o||(o=new Map,this._byResource.set(e,o)),o.set(t,n);let r=this._byOwner.get(t);r||(r=new en,this._byOwner.set(t,r)),r.set(e,n)}get(e,t){let n=this._byResource.get(e);return n?.get(t)}delete(e,t){let n=!1,o=!1,r=this._byResource.get(e);r&&(n=r.delete(t));let s=this._byOwner.get(t);if(s&&(o=s.delete(e)),n!==o)throw new Error("illegal state");return n&&o}values(e){var t,n,o,r;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:At.empty():$.isUri(e)?(r=(o=this._byResource.get(e))===null||o===void 0?void 0:o.values())!==null&&r!==void 0?r:At.empty():At.map(At.concat(...this._byOwner.values()),s=>s[1])}},wU=class{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new en,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(let t of e){let n=this._data.get(t);n&&this._substract(n);let o=this._resourceStats(t);this._add(o),this._data.set(t,o)}}_resourceStats(e){let t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Oe.inMemory||e.scheme===Oe.walkThrough||e.scheme===Oe.walkThroughSnippet||e.scheme===Oe.vscodeSourceControl)return t;for(let{severity:n}of this._service.read({resource:e}))n===Xt.Error?t.errors+=1:n===Xt.Warning?t.warnings+=1:n===Xt.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}},CU=class i{constructor(){this._onMarkerChanged=new hD({delay:0,merge:i._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new bU,this._stats=new wU(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(let n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(kM(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{let o=[];for(let r of n){let s=i._toMarker(e,t,r);s&&o.push(s)}this._data.set(t,e,o),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:o,severity:r,message:s,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:u,tags:g}=n;if(s)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,h=h>0?h:c,{resource:t,owner:e,code:o,severity:r,message:s,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:u,tags:g}}changeAll(e,t){let n=[],o=this._data.values(e);if(o)for(let r of o){let s=At.first(r);s&&(n.push(s.resource),this._data.delete(s.resource,e))}if(Dn(t)){let r=new en;for(let{resource:s,marker:a}of t){let l=i._toMarker(e,s,a);if(!l)continue;let c=r.get(s);c?c.push(l):(r.set(s,[l]),n.push(s))}for(let[s,a]of r)this._data.set(s,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:o,take:r}=e;if((!r||r<0)&&(r=-1),t&&n){let s=this._data.get(n,t);if(s){let a=[];for(let l of s)if(i._accept(l,o)){let c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!n){let s=[];for(let a of this._data.values())for(let l of a)if(i._accept(l,o)){let c=s.push(l);if(r>0&&c===r)return s}return s}else{let s=this._data.values(n??t),a=[];for(let l of s)for(let c of l)if(i._accept(c,o)){let d=a.push(c);if(r>0&&d===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){let t=new en;for(let n of e)for(let o of n)t.set(o,!0);return Array.from(t.keys())}};function $J(i,e,t,n,o,r){if(Array.isArray(i)){let s=0;for(let a of i){let l=$J(a,e,t,n,o,r);if(l===10)return l;l>s&&(s=l)}return s}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){let{language:s,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=i;if(!n&&!c)return 0;d&&o&&(e=o);let h=0;if(l)if(l===e.scheme)h=10;else if(l==="*")h=5;else return 0;if(s)if(s===t)h=10;else if(s==="*")h=Math.max(h,5);else return 0;if(d)if(d===r)h=10;else if(d==="*"&&r!==void 0)h=Math.max(h,5);else return 0;if(a){let u;if(typeof a=="string"?u=a:u=Object.assign(Object.assign({},a),{base:eY(a.base)}),u===e.fsPath||_De(u,e.fsPath))h=10;else return 0}return h}else return 0}}function Kle(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(Kle):!!i.exclusive}var AI=class{constructor(e,t,n,o){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=o}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((n=e.notebookUri)===null||n===void 0?void 0:n.toString())}},Bi=class i{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new Q,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),ct(()=>{if(n){let o=this._entries.indexOf(n);o>=0&&(this._entries.splice(o,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);let t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){let t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){let t=[],n,o;return this._orderedForEach(e,r=>{n&&o===r._score?n.push(r.provider):(o=r._score,n=[r.provider],t.push(n))}),t}_orderedForEach(e,t){this._updateScores(e);for(let n of this._entries)n._score>0&&t(n)}_updateScores(e){var t,n;let o=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),r=o?new AI(e.uri,e.getLanguageId(),o.uri,o.type):new AI(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((n=this._lastCandidate)===null||n===void 0)&&n.equals(r))){this._lastCandidate=r;for(let s of this._entries)if(s._score=$J(s.selector,r.uri,r.languageId,qf(e),r.notebookUri,r.notebookType),Kle(s.selector)&&s._score>0){for(let a of this._entries)a._score=0;s._score=1e3;break}this._entries.sort(i._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}},yU=class{constructor(){this.referenceProvider=new Bi(this._score.bind(this)),this.renameProvider=new Bi(this._score.bind(this)),this.codeActionProvider=new Bi(this._score.bind(this)),this.definitionProvider=new Bi(this._score.bind(this)),this.typeDefinitionProvider=new Bi(this._score.bind(this)),this.declarationProvider=new Bi(this._score.bind(this)),this.implementationProvider=new Bi(this._score.bind(this)),this.documentSymbolProvider=new Bi(this._score.bind(this)),this.inlayHintsProvider=new Bi(this._score.bind(this)),this.colorProvider=new Bi(this._score.bind(this)),this.codeLensProvider=new Bi(this._score.bind(this)),this.documentFormattingEditProvider=new Bi(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Bi(this._score.bind(this)),this.onTypeFormattingEditProvider=new Bi(this._score.bind(this)),this.signatureHelpProvider=new Bi(this._score.bind(this)),this.hoverProvider=new Bi(this._score.bind(this)),this.documentHighlightProvider=new Bi(this._score.bind(this)),this.selectionRangeProvider=new Bi(this._score.bind(this)),this.foldingRangeProvider=new Bi(this._score.bind(this)),this.linkProvider=new Bi(this._score.bind(this)),this.inlineCompletionsProvider=new Bi(this._score.bind(this)),this.completionProvider=new Bi(this._score.bind(this)),this.linkedEditingRangeProvider=new Bi(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Bi(this._score.bind(this)),this.documentSemanticTokensProvider=new Bi(this._score.bind(this)),this.documentOnDropEditProvider=new Bi(this._score.bind(this)),this.documentPasteEditProvider=new Bi(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}};Ke(Te,yU,!0);var bI=class extends Jo{constructor(e={}){let t=oi.as(Sa.Configuration).getConfigurationProperties(),n=Object.keys(t),o=Object.create(null),r=[];for(let s in t){let a=e[s],l=a!==void 0?a:t[s].default;NM(o,s,l,c=>console.error(`Conflict in default settings: ${c}`))}for(let s of Object.keys(o))T_.test(s)&&r.push({identifiers:gY(s),keys:Object.keys(o[s]),contents:Moe(o[s],a=>console.error(`Conflict in default settings file: ${a}`))});super(o,n,r)}},Su=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Vo=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qle=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},SU=class{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Q}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}},DU=class{constructor(i){this.modelService=i}createModelReference(i){let e=this.modelService.getModel(i);return e?Promise.resolve(new $F(new SU(e))):Promise.reject(new Error("Model not found"))}};DU=Su([Vo(0,li)],DU);var wI=class i{show(){return i.NULL_PROGRESS_RUNNER}showWhile(e,t){return qle(this,void 0,void 0,function*(){yield e})}};wI.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};var xU=class{withProgress(e,t,n){return t({report:()=>{}})}},kU=class{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,o){return Promise.resolve({choice:0})}},CI=class i{info(e){return this.notify({severity:Mt.Info,message:e})}warn(e){return this.notify({severity:Mt.Warning,message:e})}error(e){return this.notify({severity:Mt.Error,message:e})}notify(e){switch(e.severity){case Mt.Error:console.error(e.message);break;case Mt.Warning:console.warn(e.message);break;default:console.log(e.message);break}return i.NO_OP}status(e,t){return J.None}};CI.NO_OP=new VY;var EU=class{constructor(i){this._onWillExecuteCommand=new Q,this._onDidExecuteCommand=new Q,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=i}executeCommand(i,...e){let t=ft.getCommand(i);if(!t)return Promise.reject(new Error(`command '${i}' not found`));try{this._onWillExecuteCommand.fire({commandId:i,args:e});let n=this._instantiationService.invokeFunction.apply(this._instantiationService,[t.handler,...e]);return this._onDidExecuteCommand.fire({commandId:i,args:e}),Promise.resolve(n)}catch(n){return Promise.reject(n)}}};EU=Su([Vo(0,tt)],EU);var P0=class extends WV{constructor(i,e,t,n,o,r){super(i,e,t,n,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];let s=u=>{let g=new ne;g.add(le(u,Ee.KEY_DOWN,p=>{let f=new ni(p);this._dispatch(f,f.target)&&(f.preventDefault(),f.stopPropagation())})),g.add(le(u,Ee.KEY_UP,p=>{let f=new ni(p);this._singleModifierDispatch(f,f.target)&&f.preventDefault()})),this._domNodeListeners.push(new LU(u,g))},a=u=>{for(let g=0;g<this._domNodeListeners.length;g++){let p=this._domNodeListeners[g];p.domNode===u&&(this._domNodeListeners.splice(g,1),p.dispose())}},l=u=>{u.getOption(56)||s(u.getContainerDomNode())},c=u=>{u.getOption(56)||a(u.getContainerDomNode())};this._register(r.onCodeEditorAdd(l)),this._register(r.onCodeEditorRemove(c)),r.listCodeEditors().forEach(l);let d=u=>{s(u.getContainerDomNode())},h=u=>{a(u.getContainerDomNode())};this._register(r.onDiffEditorAdd(d)),this._register(r.onDiffEditorRemove(h)),r.listDiffEditors().forEach(d)}addDynamicKeybinding(i,e,t,n){return ss(ft.registerCommand(i,t),this.addDynamicKeybindings([{keybinding:e,command:i,when:n}]))}addDynamicKeybindings(i){let e=i.map(t=>{var n,o;let r=rB(t.keybinding,is);return{keybinding:(n=r?.parts)!==null&&n!==void 0?n:null,command:(o=t.command)!==null&&o!==void 0?o:null,commandArgs:t.commandArgs,when:t.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(e),this.updateResolver(),ct(()=>{for(let t=0;t<this._dynamicKeybindings.length;t++)if(this._dynamicKeybindings[t]===e[0]){this._dynamicKeybindings.splice(t,e.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){let i=this._toNormalizedKeybindingItems(Vr.getDefaultKeybindings(),!0),e=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new zV(i,e,t=>this._log(t))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(i,e){let t=[],n=0;for(let o of i){let r=o.when||void 0,s=o.keybinding;if(!s)t[n++]=new rI(void 0,o.command,o.commandArgs,r,e,null,!1);else{let a=Vg.resolveUserBinding(s,is);for(let l of a)t[n++]=new rI(l,o.command,o.commandArgs,r,e,null,!1)}}return t}resolveKeyboardEvent(i){let e=new ql(i.ctrlKey,i.shiftKey,i.altKey,i.metaKey,i.keyCode).toChord();return new Vg(e,is)}};P0=Su([Vo(0,Ze),Vo(1,ji),Vo(2,Vs),Vo(3,nn),Vo(4,no),Vo(5,Ft)],P0);var LU=class extends J{constructor(e,t){super(),this.domNode=e,this._register(t)}};function gie(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof $)}var GJ=class{constructor(){this._onDidChangeConfiguration=new Q,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new jp(new bI,new Jo,new Jo,new Jo)}getValue(i,e){let t=typeof i=="string"?i:void 0,n=gie(i)?i:gie(e)?e:{};return this._configuration.getValue(t,n,void 0)}updateValues(i){let e={data:this._configuration.toData()},t=[];for(let n of i){let[o,r]=n;this.getValue(o)!==r&&(this._configuration.updateValue(o,r),t.push(o))}if(t.length>0){let n=new Hw({keys:t,overrides:[]},e,this._configuration);n.source=8,n.sourceConfig=null,this._onDidChangeConfiguration.fire(n)}return Promise.resolve()}updateValue(i,e,t,n){return this.updateValues([[i,e]])}inspect(i,e={}){return this._configuration.inspect(i,e,void 0)}},IU=class{constructor(i){this.configurationService=i,this._onDidChangeConfiguration=new Q,this.configurationService.onDidChangeConfiguration(e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,n)=>e.affectsConfiguration(n)})})}getValue(i,e,t){let n=q.isIPosition(e)&&e?typeof t=="string"?t:void 0:typeof e=="string"?e:void 0;return typeof n>"u"?this.configurationService.getValue():this.configurationService.getValue(n)}};IU=Su([Vo(0,Ot)],IU);var TU=class{constructor(i){this.configurationService=i}getEOL(i,e){let t=this.configurationService.getValue("files.eol",{overrideIdentifier:e,resource:i});return t&&typeof t=="string"&&t!=="auto"?t:go||gt?`
`:`\r
`}};TU=Su([Vo(0,Ot)],TU);var MU=class{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}},yI=class i{constructor(){let e=$.from({scheme:i.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new kJ({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===i.SCHEME?this.workspace.folders[0]:null}};yI.SCHEME="inmemory";function SI(i,e,t){if(!e||!(i instanceof GJ))return;let n=[];Object.keys(e).forEach(o=>{e1e(o)&&n.push([`editor.${o}`,e[o]]),t&&t1e(o)&&n.push([`diffEditor.${o}`,e[o]])}),n.length>0&&i.updateValues(n)}var NU=class{constructor(i){this._modelService=i}hasPreviewHandler(){return!1}apply(i,e){return qle(this,void 0,void 0,function*(){let t=new Map;for(let r of i){if(!(r instanceof gp))throw new Error("bad edit - only text edits are supported");let s=this._modelService.getModel(r.resource);if(!s)throw new Error("bad edit - model not found");if(typeof r.versionId=="number"&&s.getVersionId()!==r.versionId)throw new Error("bad state - model changed in the meantime");let a=t.get(s);a||(a=[],t.set(s,a)),a.push(Di.replaceMove(E.lift(r.textEdit.range),r.textEdit.text))}let n=0,o=0;for(let[r,s]of t)r.pushStackElement(),r.pushEditOperations([],s,()=>[]),r.pushStackElement(),o+=1,n+=s.length;return{ariaSummary:ws(Gz.bulkEditServiceSummary,n,o)}})}};NU=Su([Vo(0,li)],NU);var XDe=class{getUriLabel(i,e){return i.scheme==="file"?i.fsPath:i.path}getUriBasenameLabel(i){return gs(i)}},RU=class extends QV{constructor(i,e){super(i),this._codeEditorService=e}showContextView(i,e,t){if(!e){let n=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();n&&(e=n.getContainerDomNode())}return super.showContextView(i,e,t)}};RU=Su([Vo(0,cv),Vo(1,Ft)],RU);var FU=class{constructor(){this._neverEmitter=new Q,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}},BU=class extends zw{constructor(){super()}},PU=class extends cY{constructor(){super(new DB)}},OU=class extends qV{constructor(i,e,t,n,o){super(i,e,t,n,o),this.configure({blockMouse:!1})}};OU=Su([Vo(0,Vs),Vo(1,nn),Vo(2,om),Vo(3,An),Vo(4,mi)],OU);Ke(Ot,GJ);Ke(PJ,IU);Ke(ile,TU);Ke(kp,yI);Ke(yp,XDe);Ke(Vs,MU);Ke(gm,kU);Ke(nn,CI);Ke(ka,CU);Ke(ki,BU);Ke(ps,dV);Ke(no,PU);Ke(li,TL);Ke(pY,XV);Ke(Ze,fU);Ke(QC,xU);Ke(bu,wI);Ke(Ea,c8);Ke(Qr,LV);Ke(rm,NU);Ke(lle,FU);Ke(io,DU);Ke(Rd,dU);Ke(Qs,d6);Ke(ji,EU);Ke(An,P0);Ke(dl,cU);Ke(om,RU);Ke(jr,YV);Ke(Da,gU);Ke(Fd,OU);Ke(em,hU);var ye;(function(i){let e=new $_;for(let[s,a]of zB())e.set(s,a);let t=new AU(e,!0);e.set(tt,t);function n(s){let a=e.get(s);if(!a)throw new Error("Missing service "+s);return a instanceof ea?t.invokeFunction(l=>l.get(s)):a}i.get=n;let o=!1;function r(s){if(o)return t;o=!0;for(let[a,l]of zB())e.get(a)||e.set(a,l);for(let a in s)if(s.hasOwnProperty(a)){let l=ze(a);e.get(l)instanceof ea&&e.set(l,s[a])}return t}i.initialize=r})(ye||(ye={}));var YJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r},Ti=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ZDe=0,pie=!1;function exe(i){if(!i){if(pie)return;pie=!0}Nue(i||document.body)}var DI=class extends G_{constructor(i,e,t,n,o,r,s,a,l,c,d,h){let u=Object.assign({},e);u.ariaLabel=u.ariaLabel||OL.editorViewAccessibleLabel,u.ariaLabel=u.ariaLabel+";"+OL.accessibilityHelpMessage,super(i,u,{},t,n,o,r,a,l,c,d,h),s instanceof P0?this._standaloneKeybindingService=s:this._standaloneKeybindingService=null,exe(u.ariaContainerElement)}addCommand(i,e,t){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let n="DYNAMIC_"+ ++ZDe,o=we.deserialize(t);return this._standaloneKeybindingService.addDynamicKeybinding(n,i,e,o),n}createContextKey(i,e){return this._contextKeyService.createKey(i,e)}addAction(i){if(typeof i.id!="string"||typeof i.label!="string"||typeof i.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),J.None;let e=i.id,t=i.label,n=we.and(we.equals("editorId",this.getId()),we.deserialize(i.precondition)),o=i.keybindings,r=we.and(n,we.deserialize(i.keybindingContext)),s=i.contextMenuGroupId||null,a=i.contextMenuOrder||0,l=(u,...g)=>Promise.resolve(i.run(this,...g)),c=new ne,d=this.getId()+":"+e;if(c.add(ft.registerCommand(d,l)),s){let u={command:{id:d,title:t},when:n,group:s,order:a};c.add(Ds.appendMenuItem(z.EditorContext,u))}if(Array.isArray(o))for(let u of o)c.add(this._standaloneKeybindingService.addDynamicKeybinding(d,u,l,r));let h=new Yx(d,t,t,n,l,this._contextKeyService);return this._actions[e]=h,c.add(ct(()=>{delete this._actions[e]})),c}_triggerCommand(i,e){if(this._codeEditorService instanceof eI)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(i,e)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(i,e)}};DI=YJ([Ti(2,tt),Ti(3,Ft),Ti(4,ji),Ti(5,Ze),Ti(6,An),Ti(7,mi),Ti(8,nn),Ti(9,Rd),Ti(10,Yi),Ti(11,Te)],DI);var HU=class extends DI{constructor(i,e,t,n,o,r,s,a,l,c,d,h,u,g,p){let f=Object.assign({},e);SI(c,f,!1);let v=a.registerEditorContainer(i);typeof f.theme=="string"&&a.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&a.setAutoDetectHighContrast(!!f.autoDetectHighContrast);let b=f.model;delete f.model,super(i,f,t,n,o,r,s,a,l,d,g,p),this._configurationService=c,this._standaloneThemeService=a,this._register(v);let A;if(typeof b>"u"){let w=u.getLanguageIdByMimeType(f.language)||f.language||Pr;A=$le(h,u,f.value||"",w,void 0),this._ownsModel=!0}else A=b,this._ownsModel=!1;if(this._attachModel(A),A){let w={oldModelUrl:null,newModelUrl:A.uri};this._onDidChangeModel.fire(w)}}dispose(){super.dispose()}updateOptions(i){SI(this._configurationService,i,!1),typeof i.theme=="string"&&this._standaloneThemeService.setTheme(i.theme),typeof i.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!i.autoDetectHighContrast),super.updateOptions(i)}_postDetachModelCleanup(i){super._postDetachModelCleanup(i),i&&this._ownsModel&&(i.dispose(),this._ownsModel=!1)}};HU=YJ([Ti(2,tt),Ti(3,Ft),Ti(4,ji),Ti(5,Ze),Ti(6,An),Ti(7,ps),Ti(8,nn),Ti(9,Ot),Ti(10,Rd),Ti(11,li),Ti(12,ki),Ti(13,Yi),Ti(14,Te)],HU);var WU=class extends eu{constructor(i,e,t,n,o,r,s,a,l,c,d,h){let u=Object.assign({},e);SI(l,u,!0);let g=s.registerEditorContainer(i);typeof u.theme=="string"&&s.setTheme(u.theme),typeof u.autoDetectHighContrast<"u"&&s.setAutoDetectHighContrast(!!u.autoDetectHighContrast),super(i,u,{},h,o,n,t,r,s,a,c,d),this._configurationService=l,this._standaloneThemeService=s,this._register(g)}dispose(){super.dispose()}updateOptions(i){SI(this._configurationService,i,!0),typeof i.theme=="string"&&this._standaloneThemeService.setTheme(i.theme),typeof i.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!i.autoDetectHighContrast),super.updateOptions(i)}_createInnerEditor(i,e,t){return i.createInstance(DI,e,t)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(i,e,t){return this.getModifiedEditor().addCommand(i,e,t)}createContextKey(i,e){return this.getModifiedEditor().createContextKey(i,e)}addAction(i){return this.getModifiedEditor().addAction(i)}};WU=YJ([Ti(2,tt),Ti(3,Ze),Ti(4,Qr),Ti(5,Ft),Ti(6,ps),Ti(7,nn),Ti(8,Ot),Ti(9,Fd),Ti(10,bu),Ti(11,Da)],WU);function $le(i,e,t,n,o){if(t=t||"",!n){let r=t.indexOf(`
`),s=t;return r!==-1&&(s=t.substring(0,r)),mie(i,t,e.createByFilepathOrFirstLine(o||null,s),o)}return mie(i,t,e.createById(n),o)}function mie(i,e,t,n){return i.createModel(e,t,n)}function txe(i,e,t){return ye.initialize(t||{}).createInstance(HU,i,e)}function ixe(i){return ye.get(Ft).onCodeEditorAdd(e=>{i(e)})}function nxe(i){return ye.get(Ft).onDiffEditorAdd(e=>{i(e)})}function oxe(){return ye.get(Ft).listCodeEditors()}function rxe(){return ye.get(Ft).listDiffEditors()}function sxe(i,e,t){return ye.initialize(t||{}).createInstance(WU,i,e)}function axe(i,e){return new E3(i,e)}function lxe(i){if(typeof i.id!="string"||typeof i.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return ft.registerCommand(i.id,i.run)}function cxe(i){if(typeof i.id!="string"||typeof i.label!="string"||typeof i.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");let e=we.deserialize(i.precondition),t=(o,...r)=>$n.runEditorCommand(o,r,e,(s,a,l)=>Promise.resolve(i.run(a,...l))),n=new ne;if(n.add(ft.registerCommand(i.id,t)),i.contextMenuGroupId){let o={command:{id:i.id,title:i.label},when:e,group:i.contextMenuGroupId,order:i.contextMenuOrder||0};n.add(Ds.appendMenuItem(z.EditorContext,o))}if(Array.isArray(i.keybindings)){let o=ye.get(An);if(!(o instanceof P0))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{let r=we.and(e,we.deserialize(i.keybindingContext));n.add(o.addDynamicKeybindings(i.keybindings.map(s=>({keybinding:s,command:i.id,when:r}))))}}return n}function dxe(i){return Gle([i])}function Gle(i){let e=ye.get(An);return e instanceof P0?e.addDynamicKeybindings(i.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:we.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),J.None)}function hxe(i,e,t){let n=ye.get(ki),o=n.getLanguageIdByMimeType(e)||e;return $le(ye.get(li),n,i,o,t)}function uxe(i,e){let t=ye.get(ki);ye.get(li).setMode(i,t.createById(e))}function gxe(i,e,t){i&&ye.get(ka).changeOne(e,i.uri,t)}function pxe(i){ye.get(ka).changeAll(i,[])}function mxe(i){return ye.get(ka).read(i)}function fxe(i){return ye.get(ka).onMarkerChanged(i)}function _xe(i){return ye.get(li).getModel(i)}function vxe(){return ye.get(li).getModels()}function Axe(i){return ye.get(li).onModelAdded(i)}function bxe(i){return ye.get(li).onModelRemoved(i)}function wxe(i){return ye.get(li).onModelLanguageChanged(e=>{i({model:e.model,oldLanguage:e.oldLanguageId})})}function Cxe(i){return HSe(ye.get(li),ye.get(Yi),i)}function yxe(i,e){let t=ye.get(ki),n=ye.get(ps);return n.registerEditorContainer(i),Ow.colorizeElement(n,t,i,e)}function Sxe(i,e,t){let n=ye.get(ki);return ye.get(ps).registerEditorContainer(document.body),Ow.colorize(n,i,e,t)}function Dxe(i,e,t=4){return ye.get(ps).registerEditorContainer(document.body),Ow.colorizeModelLine(i,e,t)}function xxe(i){return Ui.get(i)||{getInitialState:()=>U_,tokenize:(t,n,o)=>PY(i,o)}}function kxe(i,e){Ui.getOrCreate(e);let t=xxe(e),n=il(i),o=[],r=t.getInitialState();for(let s=0,a=n.length;s<a;s++){let l=n[s],c=t.tokenize(l,!0,r);o[s]=c.tokens,r=c.endState}return o}function Exe(i,e){ye.get(ps).defineTheme(i,e)}function Lxe(i){ye.get(ps).setTheme(i)}function Ixe(){FP.clearAllFontInfos()}function Txe(i,e){return ft.registerCommand({id:i,handler:e})}function Mxe(){return{create:txe,getEditors:oxe,getDiffEditors:rxe,onDidCreateEditor:ixe,onDidCreateDiffEditor:nxe,createDiffEditor:sxe,createDiffNavigator:axe,addCommand:lxe,addEditorAction:cxe,addKeybindingRule:dxe,addKeybindingRules:Gle,createModel:hxe,setModelLanguage:uxe,setModelMarkers:gxe,getModelMarkers:mxe,removeAllMarkers:pxe,onDidChangeMarkers:fxe,getModels:vxe,getModel:_xe,onDidCreateModel:Axe,onWillDisposeModel:bxe,onDidChangeModelLanguage:wxe,createWebWorker:Cxe,colorizeElement:yxe,colorize:Sxe,colorizeModelLine:Dxe,tokenize:kxe,defineTheme:Exe,setTheme:Lxe,remeasureFonts:Ixe,registerCommand:Txe,AccessibilitySupport:oW,ContentWidgetPositionPreference:cW,CursorChangeReason:dW,DefaultEndOfLine:hW,EditorAutoIndentStrategy:gW,EditorOption:pW,EndOfLinePreference:mW,EndOfLineSequence:fW,MinimapPosition:SW,MouseTargetType:DW,OverlayWidgetPositionPreference:xW,OverviewRulerLane:kW,RenderLineNumbersType:LW,RenderMinimap:IW,ScrollbarVisibility:MW,ScrollType:TW,TextEditorCursorBlinkingStyle:PW,TextEditorCursorStyle:OW,TrackedRangeStickiness:HW,WrappingIndent:WW,InjectedTextCursorStops:vW,PositionAffinity:EW,ConfigurationChangedEvent:YD,BareFontInfo:zA,FontInfo:VA,TextModelResolvedOptions:Kf,FindMatch:lp,ApplyUpdateResult:kg,EditorType:zC,EditorOptions:ll}}function Nxe(i,e){if(!e||!Array.isArray(e))return!1;for(let t of e)if(!i(t))return!1;return!0}function cS(i,e){return typeof i=="boolean"?i:e}function fie(i,e){return typeof i=="string"?i:e}function Rxe(i){let e={};for(let t of i)e[t]=!0;return e}function _ie(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));let t=Rxe(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function zU(i,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(r,s){n=!0;let a="";if(typeof i[s]=="string")a=i[s];else if(i[s]&&i[s]instanceof RegExp)a=i[s].source;else throw i[s]===void 0?wi(i,"language definition does not contain attribute '"+s+"', used at: "+e):wi(i,"attribute reference '"+s+"' must be a string, used at: "+e);return jm(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let o=(i.ignoreCase?"i":"")+(i.unicode?"u":"");return new RegExp(e,o)}function Fxe(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;let o=t.split(".");if(o.unshift(t),n<o.length)return o[n]}return null}function Bxe(i,e,t,n){let o=-1,r=t,s=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);s&&(s[3]&&(o=parseInt(s[3]),s[2]&&(o=o+100)),r=s[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(s=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),s&&(a=s[1],l=s[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let d=_ie(l.split("|"),i.ignoreCase);c=function(h){return a==="~"?d(h):!d(h)}}else if(a==="@"||a==="!@"){let d=i[l];if(!d)throw wi(i,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!Nxe(function(u){return typeof u=="string"},d))throw wi(i,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let h=_ie(d,i.ignoreCase);c=function(u){return a==="@"?h(u):!h(u)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let d=zU(i,"^"+l+"$");c=function(h){return a==="~"?d.test(h):!d.test(h)}}else c=function(d,h,u,g){return zU(i,"^"+dh(i,l,h,u,g)+"$").test(d)};else if(l.indexOf("$")<0){let d=Lh(i,l);c=function(h){return a==="=="?h===d:h!==d}}else{let d=Lh(i,l);c=function(h,u,g,p,f){let v=dh(i,d,u,g,p);return a==="=="?h===v:h!==v}}return o===-1?{name:t,value:n,test:function(d,h,u,g){return c(d,d,h,u,g)}}:{name:t,value:n,test:function(d,h,u,g){let p=Fxe(d,h,u,o);return c(p||"",d,h,u,g)}}}function VU(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw wi(i,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw wi(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw wi(i,"the next state must be a string value in rule: "+e);{let o=t.next;if(!/^(@pop|@push|@popall)$/.test(o)&&(o[0]==="@"&&(o=o.substr(1)),o.indexOf("$")<0&&!USe(i,dh(i,o,"",[],""))))throw wi(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=o}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let o=0,r=t.length;o<r;o++)n[o]=VU(i,e,t[o]);return{group:n}}else if(t.cases){let n=[];for(let r in t.cases)if(t.cases.hasOwnProperty(r)){let s=VU(i,e,t.cases[r]);r==="@default"||r==="@"||r===""?n.push({test:void 0,value:s,name:r}):r==="@eos"?n.push({test:function(a,l,c,d){return d},value:s,name:r}):n.push(Bxe(i,e,r,s))}let o=i.defaultToken;return{test:function(r,s,a,l){for(let c of n)if(!c.test||c.test(r,s,a,l))return c.value;return o}}}else throw wi(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}var UU=class{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw wi(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=zU(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=VU(e,this.name,t)}};function Yle(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=i,t.includeLF=cS(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=cS(e.ignoreCase,!1),t.unicode=cS(e.unicode,!1),t.tokenPostfix=fie(e.tokenPostfix,"."+t.languageId),t.defaultToken=fie(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function o(s,a,l){for(let c of l){let d=c.include;if(d){if(typeof d!="string")throw wi(t,"an 'include' attribute must be a string at: "+s);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw wi(t,"include target '"+d+"' is not defined at: "+s);o(s+"."+d,a,e.tokenizer[d])}else{let h=new UU(s);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(h.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")h.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){let u=c[1];u.next=c[2],h.setAction(n,u)}else throw wi(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+s);else h.setAction(n,c[1]);else{if(!c.regex)throw wi(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+s);c.name&&typeof c.name=="string"&&(h.name=c.name),c.matchOnlyAtStart&&(h.matchOnlyAtLineStart=cS(c.matchOnlyAtLineStart,!1)),h.setRegex(n,c.regex),h.setAction(n,c.action)}a.push(h)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw wi(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let s in e.tokenizer)if(e.tokenizer.hasOwnProperty(s)){t.start||(t.start=s);let a=e.tokenizer[s];t.tokenizer[s]=new Array,o("tokenizer."+s,t.tokenizer[s],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw wi(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let r=[];for(let s of e.brackets){let a=s;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw wi(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:Lh(t,a.open),close:Lh(t,a.close)});else throw wi(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}var Pxe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function Oxe(i){ud.registerLanguage(i)}function Hxe(){let i=[];return i=i.concat(ud.getLanguages()),i}function Wxe(i){return ye.get(ki).languageIdCodec.encodeLanguageId(i)}function zxe(i,e){let t=ye.get(ki).onDidEncounterLanguage(n=>{n===i&&(t.dispose(),e())});return t}function Vxe(i,e){if(!ye.get(ki).isRegisteredLanguageId(i))throw new Error(`Cannot set configuration for unknown language ${i}`);return ye.get(Yi).register(i,e,100)}var QU=class{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return xI.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){let o=this._actual.tokenizeEncoded(e,n);return new H_(o.tokens,o.endState)}},xI=class i{constructor(e,t,n,o){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=o}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){let n=[],o=0;for(let r=0,s=e.length;r<s;r++){let a=e[r],l=a.startIndex;r===0?l=0:l<o&&(l=o),n[r]=new eb(l,a.scopes,t),o=l}return n}static adaptTokenize(e,t,n,o){let r=t.tokenize(n,o),s=i._toClassicTokens(r.tokens,e),a;return r.endState.equals(o)?a=o:a=r.endState,new tb(s,a)}tokenize(e,t,n){return i.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){let n=e.encodeLanguageId(this._languageId),o=this._standaloneThemeService.getColorTheme().tokenTheme,r=[],s=0,a=0;for(let c=0,d=t.length;c<d;c++){let h=t[c],u=o.match(n,h.scopes);if(s>0&&r[s-1]===u)continue;let g=h.startIndex;c===0?g=0:g<a&&(g=a),r[s++]=g,r[s++]=u,a=g}let l=new Uint32Array(s);for(let c=0;c<s;c++)l[c]=r[c];return l}tokenizeEncoded(e,t,n){let o=this._actual.tokenize(e,n),r=this._toBinaryTokens(this._languageService.languageIdCodec,o.tokens),s;return o.endState.equals(n)?s=n:s=o.endState,new H_(r,s)}};function Uxe(i){return typeof i.getInitialState=="function"}function Qxe(i){return"tokenizeEncoded"in i}function Jle(i){return i&&typeof i.then=="function"}function jxe(i){let e=ye.get(ps);if(i){let t=[null];for(let n=1,o=i.length;n<o;n++)t[n]=j.fromHex(i[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function Xle(i,e){return Qxe(e)?new QU(i,e):new xI(i,e,ye.get(ki),ye.get(ps))}function JJ(i,e){let t={createTokenizationSupport:()=>Pxe(this,void 0,void 0,function*(){let n=yield Promise.resolve(e.create());return n?Uxe(n)?Xle(i,n):new Pw(ye.get(ki),ye.get(ps),i,Yle(i,n),ye.get(Ot)):null})};return Ui.registerFactory(i,t)}function Kxe(i,e){if(!ye.get(ki).isRegisteredLanguageId(i))throw new Error(`Cannot set tokens provider for unknown language ${i}`);return Jle(e)?JJ(i,{create:()=>e}):Ui.register(i,Xle(i,e))}function qxe(i,e){let t=n=>new Pw(ye.get(ki),ye.get(ps),i,Yle(i,n),ye.get(Ot));return Jle(e)?JJ(i,{create:()=>e}):Ui.register(i,t(e))}function $xe(i,e){return ye.get(Te).referenceProvider.register(i,e)}function Gxe(i,e){return ye.get(Te).renameProvider.register(i,e)}function Yxe(i,e){return ye.get(Te).signatureHelpProvider.register(i,e)}function Jxe(i,e){return ye.get(Te).hoverProvider.register(i,{provideHover:(t,n,o)=>{let r=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,o)).then(s=>{if(s)return!s.range&&r&&(s.range=new E(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)),s.range||(s.range=new E(n.lineNumber,n.column,n.lineNumber,n.column)),s})}})}function Xxe(i,e){return ye.get(Te).documentSymbolProvider.register(i,e)}function Zxe(i,e){return ye.get(Te).documentHighlightProvider.register(i,e)}function eke(i,e){return ye.get(Te).linkedEditingRangeProvider.register(i,e)}function tke(i,e){return ye.get(Te).definitionProvider.register(i,e)}function ike(i,e){return ye.get(Te).implementationProvider.register(i,e)}function nke(i,e){return ye.get(Te).typeDefinitionProvider.register(i,e)}function oke(i,e){return ye.get(Te).codeLensProvider.register(i,e)}function rke(i,e,t){return ye.get(Te).codeActionProvider.register(i,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(n,o,r,s)=>{let a=ye.get(ka).read({resource:n.uri}).filter(l=>E.areIntersectingOrTouching(l,o));return e.provideCodeActions(n,o,{markers:a,only:r.only,trigger:r.trigger},s)},resolveCodeAction:e.resolveCodeAction})}function ske(i,e){return ye.get(Te).documentFormattingEditProvider.register(i,e)}function ake(i,e){return ye.get(Te).documentRangeFormattingEditProvider.register(i,e)}function lke(i,e){return ye.get(Te).onTypeFormattingEditProvider.register(i,e)}function cke(i,e){return ye.get(Te).linkProvider.register(i,e)}function dke(i,e){return ye.get(Te).completionProvider.register(i,e)}function hke(i,e){return ye.get(Te).colorProvider.register(i,e)}function uke(i,e){return ye.get(Te).foldingRangeProvider.register(i,e)}function gke(i,e){return ye.get(Te).declarationProvider.register(i,e)}function pke(i,e){return ye.get(Te).selectionRangeProvider.register(i,e)}function mke(i,e){return ye.get(Te).documentSemanticTokensProvider.register(i,e)}function fke(i,e){return ye.get(Te).documentRangeSemanticTokensProvider.register(i,e)}function _ke(i,e){return ye.get(Te).inlineCompletionsProvider.register(i,e)}function vke(i,e){return ye.get(Te).inlayHintsProvider.register(i,e)}function Ake(){return{register:Oxe,getLanguages:Hxe,onLanguage:zxe,getEncodedLanguageId:Wxe,setLanguageConfiguration:Vxe,setColorMap:jxe,registerTokensProviderFactory:JJ,setTokensProvider:Kxe,setMonarchTokensProvider:qxe,registerReferenceProvider:$xe,registerRenameProvider:Gxe,registerCompletionItemProvider:dke,registerSignatureHelpProvider:Yxe,registerHoverProvider:Jxe,registerDocumentSymbolProvider:Xxe,registerDocumentHighlightProvider:Zxe,registerLinkedEditingRangeProvider:eke,registerDefinitionProvider:tke,registerImplementationProvider:ike,registerTypeDefinitionProvider:nke,registerCodeLensProvider:oke,registerCodeActionProvider:rke,registerDocumentFormattingEditProvider:ske,registerDocumentRangeFormattingEditProvider:ake,registerOnTypeFormattingEditProvider:lke,registerLinkProvider:cke,registerColorProvider:hke,registerFoldingRangeProvider:uke,registerDeclarationProvider:gke,registerSelectionRangeProvider:pke,registerDocumentSemanticTokensProvider:mke,registerDocumentRangeSemanticTokensProvider:fke,registerInlineCompletionsProvider:_ke,registerInlayHintsProvider:vke,DocumentHighlightKind:uW,CompletionItemKind:sW,CompletionItemTag:aW,CompletionItemInsertTextRule:xL,SymbolKind:FW,SymbolTag:BW,IndentAction:_W,CompletionTriggerKind:lW,SignatureHelpTriggerKind:RW,InlayHintKind:AW,InlineCompletionTriggerKind:bW,CodeActionTriggerType:rW,FoldingRangeKind:ol}}var iF;ll.wrappingIndent.defaultValue=0;ll.glyphMargin.defaultValue=!1;ll.autoIndent.defaultValue=3;ll.overviewRulerLanes.defaultValue=2;p0.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));var lr=kle();lr.editor=Mxe();lr.languages=Ake();var Zle=lr.CancellationTokenSource,ece=lr.Emitter,bke=lr.KeyCode,wke=lr.KeyMod,tce=lr.Position,ice=lr.Range,nce=lr.Selection,Cke=lr.SelectionDirection,yke=lr.MarkerSeverity,Ske=lr.MarkerTag,XS=lr.Uri,Dke=lr.Token,Na=lr.editor,Sf=lr.languages;(!((iF=cn.MonacoEnvironment)===null||iF===void 0)&&iF.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=lr);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var xke=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:Zle,Emitter:ece,KeyCode:bke,KeyMod:wke,Position:tce,Range:ice,Selection:nce,SelectionDirection:Cke,MarkerSeverity:yke,MarkerTag:Ske,Uri:XS,Token:Dke,editor:Na,languages:Sf},Symbol.toStringTag,{value:"Module"})),nt=ece;function kke(i,e,t){let n=[];function o(a,l,c){if(l===0&&c.length===0)return;let d=n[n.length-1];d&&d.start+d.deleteCount===a?(d.deleteCount+=l,d.toInsert.push(...c)):n.push({start:a,deleteCount:l,toInsert:c})}let r=0,s=0;for(;;){if(r===i.length){o(r,0,e.slice(s));break}if(s===e.length){o(r,i.length-r,[]);break}let a=i[r],l=e[s],c=t(a,l);c===0?(r+=1,s+=1):c<0?(o(r,1,[]),r+=1):c>0&&(o(r,0,[l]),s+=1)}return n}function Eke(i,e,t){let n=kke(i,e,t),o=[],r=[];for(let s of n)o.push(...i.slice(s.start,s.start+s.deleteCount)),r.push(...s.toInsert);return{removed:o,added:r}}function Lke(i){let e=0;for(let t=0;t<i.length;t++)i[t]&&(i[e]=i[t],e+=1);i.length=e}function vie(i,e){let t;if(typeof e=="number"){let n=e;t=()=>{let o=Math.sin(n++)*179426549;return o-Math.floor(o)}}else t=Math.random;for(let n=i.length-1;n>0;n-=1){let o=Math.floor(t()*(n+1)),r=i[n];i[n]=i[o],i[o]=r}}function Aie(i,e){return Array.isArray(i)?i.map(e):e(i)}var bie;(function(i){i[i.WORKSPACE=0]="WORKSPACE",i[i.PROFILE=1]="PROFILE",i[i.APPLICATION=2]="APPLICATION"})(bie||(bie={}));var wie;(function(i){i[i.OFF=0]="OFF",i[i.SILENT=1]="SILENT",i[i.ERROR=2]="ERROR"})(wie||(wie={}));var jU=class{constructor(){this.progress=new KU,this.onDidClose=Z.None,this.onDidChangeVisibility=Z.None}updateSeverity(e){}updateMessage(e){}updateActions(e){}close(){}},KU=class{infinite(){}done(){}total(e){}worked(e){}};function Ne(i,e,t,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r}function Be(i,e){return function(t,n){e(t,n,i)}}function vt(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)}function Th(i,e,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(i,t):o?o.value=t:e.set(i,t),t}var Ro=new Map;Ro.set("false",!1);Ro.set("true",!0);Ro.set("isMac",gt);Ro.set("isLinux",go);Ro.set("isWindows",Mn);Ro.set("isWeb",gc);Ro.set("isMacNative",gt&&!gc);Ro.set("isEdge",Ene);Ro.set("isFirefox",xne);Ro.set("isChrome",qG);Ro.set("isSafari",kne);var Cie;(function(i){i[i.False=0]="False",i[i.True=1]="True",i[i.Defined=2]="Defined",i[i.Not=3]="Not",i[i.Equals=4]="Equals",i[i.NotEquals=5]="NotEquals",i[i.And=6]="And",i[i.Regex=7]="Regex",i[i.NotRegex=8]="NotRegex",i[i.Or=9]="Or",i[i.In=10]="In",i[i.NotIn=11]="NotIn",i[i.Greater=12]="Greater",i[i.GreaterEquals=13]="GreaterEquals",i[i.Smaller=14]="Smaller",i[i.SmallerEquals=15]="SmallerEquals"})(Cie||(Cie={}));var Hs=class{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return Ws.INSTANCE}};Hs.INSTANCE=new Hs;var Ws=class{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return Hs.INSTANCE}};Ws.INSTANCE=new Ws;var O0=class i{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){let n=Ro.get(e);return typeof n=="boolean"?n?Ws.INSTANCE:Hs.INSTANCE:new i(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:oce(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=Ro.get(this.key);return typeof e=="boolean"?e?Ws.INSTANCE:Hs.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=qw.create(this.key,this)),this.negated}},kI=class i{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?O0.create(e,n):qw.create(e,n);let o=Ro.get(e);return typeof o=="boolean"?t===(o?"true":"false")?Ws.INSTANCE:Hs.INSTANCE:new i(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:rce(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=Ro.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Ws.INSTANCE:Hs.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=EI.create(this.key,this.value,this)),this.negated}},EI=class i{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?qw.create(e,n):O0.create(e,n);let o=Ro.get(e);return typeof o=="boolean"?t===(o?"true":"false")?Hs.INSTANCE:Ws.INSTANCE:new i(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:rce(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=Ro.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Hs.INSTANCE:Ws.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=kI.create(this.key,this.value,this)),this.negated}},qw=class i{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){let n=Ro.get(e);return typeof n=="boolean"?n?Hs.INSTANCE:Ws.INSTANCE:new i(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:oce(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=Ro.get(this.key);return typeof e=="boolean"?e?Hs.INSTANCE:Ws.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=O0.create(this.key,this)),this.negated}},LI=class i extends O0{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?i._info.push({...n,key:e}):n!==!0&&i._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return i._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return kI.create(this.key,e)}notEqualsTo(e){return EI.create(this.key,e)}};LI._info=[];function oce(i,e){return i<e?-1:i>e?1:0}function rce(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function Ike(i){let e=i;return typeof e?.id=="string"&&$.isUri(e.configPath)}var Tke=class{constructor(i,e){this.raw=e,this.uri=i.uri,this.index=i.index,this.name=i.name}toResource(i){return kl(this.uri,i)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}},qU=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?II.isErrorNoTelemetry(e)?new II(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function nF(i){return i?new Error(`readonly property '${i} cannot be changed'`):new Error("readonly property cannot be changed")}function Ru(i){let e=new Error(`${i} has been disposed`);return e.name="DISPOSED",e}var $U=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},II=class i extends Error{constructor(e){super(e),this.name="ErrorNoTelemetry"}static fromError(e){if(e instanceof i)return e;let t=new i;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="ErrorNoTelemetry"}},dS=typeof Buffer<"u",oF,rF,Mh=class i{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static alloc(e){return dS?new i(Buffer.allocUnsafe(e)):new i(new Uint8Array(e))}static wrap(e){return dS&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new i(e)}static fromString(e,t){return!t?.dontUseNodeBuffer&&dS?new i(Buffer.from(e)):(oF||(oF=new TextEncoder),new i(oF.encode(e)))}static fromByteArray(e){let t=i.alloc(e.length);for(let n=0,o=e.length;n<o;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].byteLength}let n=i.alloc(t),o=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];n.set(a,o),o+=a.byteLength}return n}clone(){let e=i.alloc(this.byteLength);return e.set(this),e}toString(){return dS?this.buffer.toString():(rF||(rF=new TextDecoder),rF.decode(this.buffer))}slice(e,t){return new i(this.buffer.subarray(e,t))}set(e,t){if(e instanceof i)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return Mke(this.buffer,e)}writeUInt32BE(e,t){Nke(this.buffer,e,t)}readUInt32LE(e){return Rke(this.buffer,e)}writeUInt32LE(e,t){Fke(this.buffer,e,t)}readUInt8(e){return Bke(this.buffer,e)}writeUInt8(e,t){Pke(this.buffer,e,t)}};function Mke(i,e){return i[e]*2**24+i[e+1]*2**16+i[e+2]*2**8+i[e+3]}function Nke(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function Rke(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0|i[e+2]<<16>>>0|i[e+3]<<24>>>0}function Fke(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255,e=e>>>8,i[t+2]=e&255,e=e>>>8,i[t+3]=e&255}function Bke(i,e){return i[e]}function Pke(i,e,t){i[t]=e}var Oke={ThemingContribution:"base.contributions.theming"},GU=class extends J{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}getColor(e,t){let n=this.theme.getColor(e);return n&&t&&(n=t(n,this.theme)),n?n.toString():null}},Hke={JSONContribution:"base.contributions.json"},sF="done",aF="active",hS="infinite",uS="infinite-long-running",lF="discrete",Wke={progressBarBackground:j.fromHex("#0E70C0")},TI=class i extends J{constructor(e,t){super(),this.options=t||Object.create(null),Ur(this.options,Wke,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new jt(()=>_r(this.element),0)),this.longRunningScheduler=this._register(new jt(()=>this.infiniteLongRunning(),i.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(aF,hS,uS,lF),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(sF),this.element.classList.contains(hS)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(lF,sF,uS),this.element.classList.add(aF,hS),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(uS)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute("aria-valuemax",e.toString()),this}hasTotal(){return Xa(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){let t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(hS,uS,sF),this.element.classList.add(aF,lF),this.element.setAttribute("aria-valuenow",e.toString()),this.bit.style.width=100*(this.workedVal/t)+"%",this}getContainer(){return this.element}show(e){this.showDelayedScheduler.cancel(),typeof e=="number"?this.showDelayedScheduler.schedule(e):_r(this.element)}hide(){Xo(this.element),this.showDelayedScheduler.cancel()}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){let e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}};TI.LONG_RUNNING_INFINITE_THRESHOLD=1e4;var MI=class i extends J{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new nt),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new nt({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,i.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new F0(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){i.instanceCount--,super.dispose()}registerLanguage(e){return this._registry.registerLanguage(e)}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getRegisteredLanguageIds(){return this._registry.getRegisteredLanguageIds()}getSortedRegisteredLanguageNames(){return this._registry.getSortedRegisteredLanguageNames()}getLanguageName(e){return this._registry.getLanguageName(e)}getMimeType(e){return this._registry.getMimeType(e)}getIcon(e){return this._registry.getIcon(e)}getExtensions(e){return this._registry.getExtensions(e)}getFilenames(e){return this._registry.getFilenames(e)}getConfigurationFiles(e){return this._registry.getConfigurationFiles(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){let n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return EM(n,null)}createById(e){return new sA(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByMimeType(e){return new sA(this.onDidChange,()=>{let t=this.getLanguageIdByMimeType(e);return this._createAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new sA(this.onDidChange,()=>{let n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Pr),this._encounteredLanguages.has(e)||(this._encounteredLanguages.add(e),Ui.getOrCreate(e),this._onDidEncounterLanguage.fire(e)),e}};MI.instanceCount=0;var sA=class{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new nt({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;let t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)==null||e.fire(this.languageId))}},yie;(function(i){i.DEFAULT={allowTrailingComma:!0}})(yie||(yie={}));var Sie,Die,YU=class{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){let t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}},JU=class{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?FC(e,this._value,0,e.length,this._from,this._to):Xp(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},NI=class{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){let n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){let t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?FC(e,this._value,0,e.length,this._from,this._to):Xp(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},XU=class{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new NI(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return w_(e,this._value.scheme);if(this._states[this._stateIdx]===2)return w_(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Is(e,this._value.query);if(this._states[this._stateIdx]===5)return Is(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}},Df=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){let e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}},ZU=class i{constructor(e){this._iter=e}static forUris(e=()=>!1,t=()=>!1){return new i(new XU(e,t))}static forPaths(e=!1){return new i(new NI(void 0,!e))}static forStrings(){return new i(new YU)}static forConfigKeys(){return new i(new JU)}clear(){this._root=void 0}fill(e,t){if(t){let n=t.slice(0);vie(n);for(let o of n)this.set(o,e)}else{let n=e.slice(0);vie(n);for(let o of n)this.set(o[0],o[1])}}set(e,t){let n=this._iter.reset(e),o;this._root||(this._root=new Df,this._root.segment=n.value());let r=[];for(o=this._root;;){let a=n.cmp(o.segment);if(a>0)o.left||(o.left=new Df,o.left.segment=n.value()),r.push([-1,o]),o=o.left;else if(a<0)o.right||(o.right=new Df,o.right.segment=n.value()),r.push([1,o]),o=o.right;else if(n.hasNext())n.next(),o.mid||(o.mid=new Df,o.mid.segment=n.value()),r.push([0,o]),o=o.mid;else break}let s=o.value;o.value=t,o.key=e;for(let a=r.length-1;a>=0;a--){let l=r[a][1];l.updateHeight();let c=l.balanceFactor();if(c<-1||c>1){let d=r[a][0],h=r[a+1][0];if(d===1&&h===1)r[a][1]=l.rotateLeft();else if(d===-1&&h===-1)r[a][1]=l.rotateRight();else if(d===1&&h===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(d===-1&&h===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return s}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){let t=this._iter.reset(e),n=this._root;for(;n;){let o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){let t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){let n=this._iter.reset(e),o=[],r=this._root;for(;r;){let s=n.cmp(r.segment);if(s>0)o.push([-1,r]),r=r.left;else if(s<0)o.push([1,r]),r=r.right;else if(n.hasNext())n.next(),o.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){let s=this._min(r.right),{key:a,value:l,segment:c}=s;this._delete(s.key,!1),r.key=a,r.value=l,r.segment=c}else{let s=r.left??r.right;if(o.length>0){let[a,l]=o[o.length-1];switch(a){case-1:l.left=s;break;case 0:l.mid=s;break;case 1:l.right=s;break}}else this._root=s}for(let s=o.length-1;s>=0;s--){let a=o[s][1];a.updateHeight();let l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),o[s][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),o[s][1]=a.rotateRight()),s>0)switch(o[s-1][0]){case-1:o[s-1][1].left=o[s][1];break;case 1:o[s-1][1].right=o[s][1];break;case 0:o[s-1][1].mid=o[s][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){let t=this._iter.reset(e),n=this._root,o;for(;n;){let r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),o=n.value||o,n=n.mid;else break}return n&&n.value||o}findSuperstr(e){let t=this._iter.reset(e),n=this._root;for(;n;){let o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(let[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){let t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){let e=t=>{if(!t)return!0;let n=t.balanceFactor();return n<-1||n>1?!1:e(t.left)&&e(t.right)};return e(this._root)}},eQ=class{constructor(e,t){this.uri=e,this.value=t}},$w=class i{constructor(e,t){this[Sie]="ResourceMap",e instanceof i?(this.map=new Map(e.map),this.toKey=t??i.defaultToKey):(this.map=new Map,this.toKey=e??i.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new eQ(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,o]of this.map)e(o.value,o.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(Sie=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}};$w.defaultToKey=i=>i.toString();var tQ=class{constructor(e,t){this[Die]="ResourceSet",!e||typeof e=="function"?this._map=new $w(e):(this._map=new $w(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,o)=>e.call(t,o,o,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(Die=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},Pc=class i{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.frozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}isFrozen(){return this.frozen}getValue(e){return e?I_(this.contents,e):this.contents}getOverrideValue(e,t){let n=this.getContentsForOverrideIdentifer(t);return n?e?I_(n,e):n:void 0}getKeysForOverrideIdentifier(e){let t=[];for(let n of this.overrides)n.identifiers.includes(e)&&t.push(...n.keys);return br(t)}getAllOverrideIdentifiers(){let e=[];for(let t of this.overrides)e.push(...t.identifiers);return br(e)}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){let t=Co(this.contents),n=Co(this.overrides),o=[...this.keys];for(let r of e)if(!r.isEmpty()){this.mergeContents(t,r.contents);for(let s of r.overrides){let[a]=n.filter(l=>Zn(l.identifiers,s.identifiers));a?(this.mergeContents(a.contents,s.contents),a.keys.push(...s.keys),a.keys=br(a.keys)):n.push(Co(s))}for(let s of r.keys)o.indexOf(s)===-1&&o.push(s)}return new i(t,o,n)}freeze(){return this.frozen=!0,this}clone(){return new i(Co(this.contents),[...this.keys],Co(this.overrides))}createOverrideConfigurationModel(e){let t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(let o of br([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[o],s=t[o];s&&(typeof r=="object"&&typeof s=="object"?(r=Co(r),this.mergeContents(r,s)):r=s),n[o]=r}return new i(n,this.keys,this.overrides)}mergeContents(e,t){for(let n of Object.keys(t)){if(n in e&&jn(e[n])&&jn(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Co(t[n])}}checkAndFreeze(e){return this.frozen&&!Object.isFrozen(e)?mY(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null,o=r=>{r&&(n?this.mergeContents(n,r):n=Co(r))};for(let r of this.overrides)Zn(r.identifiers,[e])?t=r.contents:r.identifiers.includes(e)&&o(r.contents);return o(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),NM(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&Noe(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}},iQ=class i{constructor(e,t,n,o,r=new Pc,s=new Pc,a=new en,l=new Pc,c=new en,d=!0){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=o,this._remoteUserConfiguration=r,this._workspaceConfiguration=s,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this._freeze=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new en,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let o;n.resource?(o=this._memoryConfigurationByResource.get(n.resource),o||(o=new Pc,this._memoryConfigurationByResource.set(n.resource,o))):o=this._memoryConfiguration,t===void 0?o.removeValue(e):o.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){let o=this.getConsolidatedConfigurationModel(e,t,n),r=this.getFolderConfigurationModelForResource(t.resource,n),s=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),l=this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze().getValue(e),c=this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze().getValue(e),d=t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),h=t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),u=t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),g=n?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,p=r?t.overrideIdentifier?r.freeze().override(t.overrideIdentifier).getValue(e):r.freeze().getValue(e):void 0,f=t.overrideIdentifier?s.override(t.overrideIdentifier).getValue(e):s.getValue(e),v=o.getValue(e),b=br(o.overrides.map(A=>A.identifiers).flat()).filter(A=>o.getOverrideValue(e,A)!==void 0);return{defaultValue:a,policyValue:l,applicationValue:c,userValue:d,userLocalValue:h,userRemoteValue:u,workspaceValue:g,workspaceFolderValue:p,memoryValue:f,value:v,default:a!==void 0?{value:this._defaultConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,policy:l!==void 0?{value:l}:void 0,application:c!==void 0?{value:c,override:t.overrideIdentifier?this.applicationConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,user:d!==void 0?{value:this.userConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userLocal:h!==void 0?{value:this.localUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userRemote:u!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspace:g!==void 0?{value:this._workspaceConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspaceFolder:p!==void 0?{value:r?.freeze().getValue(e),override:t.overrideIdentifier?r?.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,memory:f!==void 0?{value:s.getValue(e),override:t.overrideIdentifier?s.getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,overrideIdentifiers:b.length?b:void 0}}keys(e){let t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.freeze().keys,user:this.userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:t?t.freeze().keys:[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(e){this._policyConfiguration=e}updateApplicationConfiguration(e){this._applicationConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){let n=[];if(!t){let{added:o,updated:r,removed:s}=Vd(this._defaultConfiguration,e);t=[...o,...r,...s]}for(let o of t)for(let r of gY(o)){let s=this._defaultConfiguration.getKeysForOverrideIdentifier(r),a=e.getKeysForOverrideIdentifier(r),l=[...a.filter(c=>s.indexOf(c)===-1),...s.filter(c=>a.indexOf(c)===-1),...s.filter(c=>!yr(this._defaultConfiguration.override(r).getValue(c),e.override(r).getValue(c)))];n.push([r,l])}return this.updateDefaultConfiguration(e),{keys:t,overrides:n}}compareAndUpdatePolicyConfiguration(e){let{added:t,updated:n,removed:o}=Vd(this._policyConfiguration,e),r=[...t,...n,...o];return r.length&&this.updatePolicyConfiguration(e),{keys:r,overrides:[]}}compareAndUpdateApplicationConfiguration(e){let{added:t,updated:n,removed:o,overrides:r}=Vd(this.applicationConfiguration,e),s=[...t,...n,...o];return s.length&&this.updateApplicationConfiguration(e),{keys:s,overrides:r}}compareAndUpdateLocalUserConfiguration(e){let{added:t,updated:n,removed:o,overrides:r}=Vd(this.localUserConfiguration,e),s=[...t,...n,...o];return s.length&&this.updateLocalUserConfiguration(e),{keys:s,overrides:r}}compareAndUpdateRemoteUserConfiguration(e){let{added:t,updated:n,removed:o,overrides:r}=Vd(this.remoteUserConfiguration,e),s=[...t,...n,...o];return s.length&&this.updateRemoteUserConfiguration(e),{keys:s,overrides:r}}compareAndUpdateWorkspaceConfiguration(e){let{added:t,updated:n,removed:o,overrides:r}=Vd(this.workspaceConfiguration,e),s=[...t,...n,...o];return s.length&&this.updateWorkspaceConfiguration(e),{keys:s,overrides:r}}compareAndUpdateFolderConfiguration(e,t){let n=this.folderConfigurations.get(e),{added:o,updated:r,removed:s,overrides:a}=Vd(n,t),l=[...o,...r,...s];return(l.length||!n)&&this.updateFolderConfiguration(e,t),{keys:l,overrides:a}}compareAndDeleteFolderConfiguration(e){let t=this.folderConfigurations.get(e);if(!t)throw new Error("Unknown folder");this.deleteFolderConfiguration(e);let{added:n,updated:o,removed:r,overrides:s}=Vd(t,void 0);return{keys:[...n,...o,...r],overrides:s}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(e,t,n){let o=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(o=o.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(o=o.merge(this._policyConfiguration)),o}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){let o=t.getFolder(e);o&&(n=this.getFolderConsolidatedConfiguration(o.uri)||n);let r=this._memoryConfigurationByResource.get(e);r&&(n=n.merge(r))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){let n=this.getWorkspaceConsolidatedConfiguration(),o=this._folderConfigurations.get(e);o?(t=n.merge(o),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){let n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{let{contents:n,overrides:o,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:o,keys:r}]),e},[])}}allKeys(){let e=new Set;return this._defaultConfiguration.freeze().keys.forEach(t=>e.add(t)),this.userConfiguration.freeze().keys.forEach(t=>e.add(t)),this._workspaceConfiguration.freeze().keys.forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.freeze().keys.forEach(n=>e.add(n))),[...e.values()]}allOverrideIdentifiers(){let e=new Set;return this._defaultConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>e.add(t)),this.userConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._workspaceConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.freeze().getAllOverrideIdentifiers().forEach(n=>e.add(n))),[...e.values()]}getAllKeysForOverrideIdentifier(e){let t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this._folderConfigurations.forEach(n=>n.getKeysForOverrideIdentifier(e).forEach(o=>t.add(o))),[...t.values()]}static parse(e){let t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.policy),o=this.parseConfigurationModel(e.application),r=this.parseConfigurationModel(e.user),s=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,c)=>(l.set($.revive(c[0]),this.parseConfigurationModel(c[1])),l),new en);return new i(t,n,o,r,new Pc,s,a,new Pc,new en,!1)}static parseConfigurationModel(e){return new Pc(e.contents,e.keys,e.overrides).freeze()}};function Vd(i,e){let{added:t,removed:n,updated:o}=xie(e,i),r=[],s=i?.getAllOverrideIdentifiers()||[],a=e?.getAllOverrideIdentifiers()||[];if(e){let l=a.filter(c=>!s.includes(c));for(let c of l)r.push([c,e.getKeysForOverrideIdentifier(c)])}if(i){let l=s.filter(c=>!a.includes(c));for(let c of l)r.push([c,i.getKeysForOverrideIdentifier(c)])}if(e&&i){for(let l of s)if(a.includes(l)){let c=xie({contents:i.getOverrideValue(void 0,l)||{},keys:i.getKeysForOverrideIdentifier(l)},{contents:e.getOverrideValue(void 0,l)||{},keys:e.getKeysForOverrideIdentifier(l)});r.push([l,[...c.added,...c.removed,...c.updated]])}}return{added:t,removed:n,updated:o,overrides:r}}function xie(i,e){let t=i?e?i.keys.filter(r=>e.keys.indexOf(r)===-1):[...i.keys]:[],n=e?i?e.keys.filter(r=>i.keys.indexOf(r)===-1):[...e.keys]:[],o=[];if(i&&e){for(let r of e.keys)if(i.keys.indexOf(r)!==-1){let s=I_(e.contents,r),a=I_(i.contents,r);yr(s,a)||o.push(r)}}return{added:t,removed:n,updated:o}}function Ys(){return new Date().toISOString()}var Uc;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(Uc||(Uc={}));var sce=Uc.Info,nQ=class extends J{constructor(){super(...arguments),this.level=sce,this._onDidChangeLogLevel=this._register(new nt),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}},oQ=class extends nQ{constructor(e=sce){super(),this.setLevel(e),this.useColors=!Mn}trace(e,...t){this.getLevel()<=Uc.Trace&&(this.useColors?console.log(`\x1B[90m[main ${Ys()}]\x1B[0m`,e,...t):console.log(`[main ${Ys()}]`,e,...t))}debug(e,...t){this.getLevel()<=Uc.Debug&&(this.useColors?console.log(`\x1B[90m[main ${Ys()}]\x1B[0m`,e,...t):console.log(`[main ${Ys()}]`,e,...t))}info(e,...t){this.getLevel()<=Uc.Info&&(this.useColors?console.log(`\x1B[90m[main ${Ys()}]\x1B[0m`,e,...t):console.log(`[main ${Ys()}]`,e,...t))}warn(e,...t){this.getLevel()<=Uc.Warning&&(this.useColors?console.warn(`\x1B[93m[main ${Ys()}]\x1B[0m`,e,...t):console.warn(`[main ${Ys()}]`,e,...t))}error(e,...t){this.getLevel()<=Uc.Error&&(this.useColors?console.error(`\x1B[91m[main ${Ys()}]\x1B[0m`,e,...t):console.error(`[main ${Ys()}]`,e,...t))}critical(e,...t){this.getLevel()<=Uc.Critical&&(this.useColors?console.error(`\x1B[90m[main ${Ys()}]\x1B[0m`,e,...t):console.error(`[main ${Ys()}]`,e,...t))}dispose(){}flush(){}},rQ=class extends J{constructor(e){super(),this.logger=e,this._register(e)}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}critical(e,...t){this.logger.critical(e,...t)}flush(){this.logger.flush()}};function kie(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof $)}var sQ=class{constructor(){this._onDidChangeConfiguration=new nt,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new jp(new bI,new Jo,new Jo,new Jo)}getValue(e,t){let n=typeof e=="string"?e:void 0,o=kie(e)?e:kie(t)?t:{};return this._configuration.getValue(n,o,void 0)}updateValues(e){let t={data:this._configuration.toData()},n=[];for(let o of e){let[r,s]=o;this.getValue(r)!==s&&(this._configuration.updateValue(r,s),n.push(r))}if(n.length>0){let o=new Hw({keys:n,overrides:[]},t,this._configuration);o.source=8,o.sourceConfig=null,this._onDidChangeConfiguration.fire(o)}return Promise.resolve()}updateValue(e,t,n,o){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}keys(){return this._configuration.keys(void 0)}reloadConfiguration(){return Promise.resolve(void 0)}getConfigurationData(){let e={contents:{},keys:[],overrides:[]};return{defaults:e,policy:e,application:e,user:e,workspace:e,folders:[]}}},Ta=Object.prototype.hasOwnProperty,Eie="vs.editor.nullLanguage",aQ=class{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(Eie,0),this._register(Pr,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;let t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||Eie}},RI=class i extends J{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new nt),this.onDidChange=this._onDidChange.event,i.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new aQ,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(ud.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){i.instanceCount--,super.dispose()}setDynamicLanguages(e){this._dynamicLanguages=e,this._initializeFromRegistry()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Vle();let e=[].concat(ud.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}registerLanguage(e){return ud.registerLanguage(e)}_registerLanguages(e){for(let t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(o=>{this._lowercaseNameMap[o.toLowerCase()]=n.identifier}),n.mimetypes.forEach(o=>{this._mimeTypesMap[o]=n.identifier})}),oi.as(Sa.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){let t=e.id,n;Ta.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){let n=t.id,o=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),o=t.mimetypes[0]),o||(o=`text/x-${n}`,e.mimetypes.push(o)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)wh({id:n,mime:o,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)wh({id:n,mime:o,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)wh({id:n,mime:o,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);wM(l)||wh({id:n,mime:o,firstline:l},this._warnOnOverwrite)}catch(l){Ye(l)}}e.aliases.push(n);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(let a of r)!a||a.length===0||e.aliases.push(a);let s=r!==null&&r.length>0;if(!(s&&r[0]===null)){let a=(s?r[0]:null)||n;(s||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?Ta.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getSortedRegisteredLanguageNames(){let e=[];for(let t in this._nameMap)Ta.call(this._nameMap,t)&&e.push({languageName:t,languageId:this._nameMap[t]});return e.sort((t,n)=>w_(t.languageName,n.languageName)),e}getLanguageName(e){return Ta.call(this._languages,e)?this._languages[e].name:null}getMimeType(e){return Ta.call(this._languages,e)&&this._languages[e].mimetypes[0]||null}getExtensions(e){return Ta.call(this._languages,e)?this._languages[e].extensions:[]}getFilenames(e){return Ta.call(this._languages,e)?this._languages[e].filenames:[]}getIcon(e){return Ta.call(this._languages,e)&&this._languages[e].icons[0]||null}getConfigurationFiles(e){return Ta.call(this._languages,e)?this._languages[e].configurationFiles||[]:[]}getLanguageIdByLanguageName(e){let t=e.toLowerCase();return Ta.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&Ta.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:Ule(e,t)}};RI.instanceCount=0;var lQ=class{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){let o=this.renderedElements.findIndex(r=>r.templateData===n);if(o>=0){let r=this.renderedElements[o];this.trait.unrender(n),r.index=t}else{let r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){let o=[];for(let r of this.renderedElements)r.index<e?o.push(r):r.index>=e+t&&o.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=o}renderIndexes(e){for(let{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){let t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}},Gw=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new nt,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new lQ(this)}splice(e,t,n){t=Math.max(0,Math.min(t,this.length-e));let o=n.length-t,r=e+t,s=[...this.sortedIndexes.filter(l=>l<e),...n.map((l,c)=>l?c+e:-1).filter(l=>l!==-1),...this.sortedIndexes.filter(l=>l>=r).map(l=>l+o)],a=this.length+o;if(this.sortedIndexes.length>0&&s.length===0&&a>0){let l=this.sortedIndexes.find(c=>c>=e)??a-1;s.push(Math.min(l,a-1))}this.renderer.splice(e,t,n.length),this._set(s,s),this.length=a}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(Iie),t)}_set(e,t,n){let o=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let s=mQ(r,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),o}get(){return this.indexes}contains(e){return xM(this.sortedIndexes,e,Iie)>=0}dispose(){st(this._onChange)}},cQ=class extends Gw{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}},aA=class{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));let o=this.trait.get().map(s=>this.identityProvider.getId(this.view.element(s)).toString()),r=n.map(s=>o.indexOf(this.identityProvider.getId(s).toString())>-1);this.trait.splice(e,t,r)}};function Yw(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function f1(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:f1(i.parentElement)}var dQ=class{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new ne,this.multipleSelectionDisposables=new ne,this.onKeyDown.filter(o=>o.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(o=>o.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(o=>o.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(o=>o.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(o=>o.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(o=>o.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(o=>(gt?o.metaKey:o.ctrlKey)&&o.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return this.disposables.add(Z.chain(this.disposables.add(new kt(this.view.domNode,"keydown")).event).filter(e=>!Yw(e.target)).map(e=>new ni(e)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(gt?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(vo(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}},lA;(function(i){i[i.Automatic=0]="Automatic",i[i.Trigger=1]="Trigger"})(lA||(lA={}));var xf;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(xf||(xf={}));var zke=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}},hQ=class{constructor(e,t,n,o,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=o,this.delegate=r,this.enabled=!1,this.state=xf.Idle,this.mode=lA.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ne,this.disposables=new ne,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??lA.Automatic}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1,t=this.enabledDisposables.add(Z.chain(this.enabledDisposables.add(new kt(this.view.domNode,"keydown")).event)).filter(o=>!Yw(o.target)).filter(()=>this.mode===lA.Automatic||this.triggered).map(o=>new ni(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(Y_).map(o=>o.browserEvent.key).event,n=Z.debounce(t,()=>null,800,void 0,void 0,this.enabledDisposables);Z.reduce(Z.any(t,n),(o,r)=>r===null?null:(o||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;let t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){let n=(e=this.list.options.accessibilityProvider)==null?void 0:e.getAriaLabel(this.list.element(t[0]));n&&co(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=xf.Idle,this.triggered=!1;return}let t=this.list.getFocus(),n=t.length>0?t[0]:0,o=this.state===xf.Idle?1:0;this.state=xf.Typing;for(let r=0;r<this.list.length;r++){let s=(n+r+o)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),l=a&&a.toString();if(typeof l>"u"||UC(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},uQ=class{constructor(e,t){this.list=e,this.view=t,this.disposables=new ne,this.disposables.add(Z.chain(this.disposables.add(new kt(t.domNode,"keydown")).event)).filter(n=>!Yw(n.target)).map(n=>new ni(n)).filter(n=>n.keyCode===2&&!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&!n.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let n=this.view.domElement(t[0]);if(!n)return;let o=n.querySelector("[tabIndex]");if(!o||!(o instanceof HTMLElement)||o.tabIndex===-1)return;let r=window.getComputedStyle(o);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),o.focus())}dispose(){this.disposables.dispose()}};function Vke(i){return gt?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function Uke(i){return i.browserEvent.shiftKey}function Qke(i){return i instanceof MouseEvent&&i.button===2}var Lie={isSelectionSingleChangeEvent:Vke,isSelectionRangeChangeEvent:Uke},gQ=class{constructor(e){this.list=e,this.disposables=new ne,this._onPointer=new nt,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Lie),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(to.addTarget(e.getHTMLElement()))),Z.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Lie))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){f1(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(f1(e.browserEvent.target))return;let t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Yw(e.browserEvent.target)||f1(e.browserEvent.target))return;let t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Qke(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Yw(e.browserEvent.target)||f1(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));let o=Math.min(n,t),r=Math.max(n,t),s=vo(o,r+1),a=this.list.getSelection(),l=qke(mQ(a,[n]),n);if(l.length===0)return;let c=mQ(s,$ke(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let o=this.list.getSelection(),r=o.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),o.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}},pQ=class{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):gt||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionOutline&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { outline-color: ${e.listFocusAndSelectionOutline} !important; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}},jke={listFocusBackground:j.fromHex("#7FB0D0"),listActiveSelectionBackground:j.fromHex("#0E639C"),listActiveSelectionForeground:j.fromHex("#FFFFFF"),listActiveSelectionIconForeground:j.fromHex("#FFFFFF"),listFocusAndSelectionOutline:j.fromHex("#90C2F9"),listFocusAndSelectionBackground:j.fromHex("#094771"),listFocusAndSelectionForeground:j.fromHex("#FFFFFF"),listInactiveSelectionBackground:j.fromHex("#3F3F46"),listInactiveSelectionIconForeground:j.fromHex("#FFFFFF"),listHoverBackground:j.fromHex("#2A2D2E"),listDropBackground:j.fromHex("#383B3D"),treeIndentGuidesStroke:j.fromHex("#a9a9a9"),tableColumnsBorder:j.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:j.fromHex("#cccccc").transparent(.04)},Kke={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function qke(i,e){let t=i.indexOf(e);if(t===-1)return[];let n=[],o=t-1;for(;o>=0&&i[o]===e-(t-o);)n.push(i[o--]);for(n.reverse(),o=t;o<i.length&&i[o]===e+(o-t);)n.push(i[o++]);return n}function mQ(i,e){let t=[],n=0,o=0;for(;n<i.length||o<e.length;)if(n>=i.length)t.push(e[o++]);else if(o>=e.length)t.push(i[n++]);else if(i[n]===e[o]){t.push(i[n]),n++,o++;continue}else i[n]<e[o]?t.push(i[n++]):t.push(e[o++]);return t}function $ke(i,e){let t=[],n=0,o=0;for(;n<i.length||o<e.length;)if(n>=i.length)t.push(e[o++]);else if(o>=e.length)t.push(i[n++]);else if(i[n]===e[o]){n++,o++;continue}else i[n]<e[o]?t.push(i[n++]):o++;return t}var Iie=(i,e)=>i-e,fQ=class{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,o){let r=0;for(let s of this.renderers)s.renderElement(e,t,n[r++],o)}disposeElement(e,t,n,o){var r;let s=0;for(let a of this.renderers)(r=a.disposeElement)==null||r.call(a,e,t,n[s],o),s+=1}disposeTemplate(e){let t=0;for(let n of this.renderers)n.disposeTemplate(e[t++])}},_Q=class{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){let o=this.accessibilityProvider.getAriaLabel(e);o?n.setAttribute("aria-label",o):n.removeAttribute("aria-label");let r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?n.setAttribute("aria-level",`${r}`):n.removeAttribute("aria-level")}disposeTemplate(e){}},vQ=class{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,o;(o=(n=this.dnd).onDragStart)==null||o.call(n,e,t)}onDragOver(e,t,n,o){return this.dnd.onDragOver(e,t,n,o)}onDragLeave(e,t,n,o){var r,s;(s=(r=this.dnd).onDragLeave)==null||s.call(r,e,t,n,o)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}drop(e,t,n,o){this.dnd.drop(e,t,n,o)}},AQ=class{constructor(e,t,n,o,r=Kke){var s,a,l;this.user=e,this._options=r,this.focus=new Gw("focused"),this.anchor=new Gw("anchor"),this.eventBufferer=new v_,this._ariaLabel="",this.disposables=new ne,this._onDidDispose=new nt,this.onDidDispose=this._onDidDispose.event;let c=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(s=this._options.accessibilityProvider)==null?void 0:s.getWidgetRole():"list";this.selection=new cQ(c!=="listbox"),Ur(r,jke,!1);let d=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(d.push(new _Q(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)==null||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),o=o.map(u=>new fQ(u.templateId,[...d,u]));let h={...r,dnd:r.dnd&&new vQ(this,r.dnd)};if(this.view=new Fs(t,n,o,h),this.view.domNode.setAttribute("role",c),r.styleController)this.styleController=r.styleController(this.view.domId);else{let u=ls(this.view.domNode);this.styleController=new pQ(u,this.view.domId)}if(this.spliceable=new Mk([new aA(this.focus,this.view,r.identityProvider),new aA(this.selection,this.view,r.identityProvider),new aA(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new uQ(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new dQ(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){let u=r.keyboardNavigationDelegate||zke;this.typeNavigationController=new hQ(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),u),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Z.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Z.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=this.disposables.add(Z.chain(this.disposables.add(new kt(this.view.domNode,"keydown")).event)).map(r=>new ni(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(Y_).filter(()=>!1).event,n=this.disposables.add(Z.chain(this.disposables.add(new kt(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(r=>new ni(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(Y_).map(({browserEvent:r})=>{let s=this.getFocus(),a=s.length?s[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,c=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:r}}).event,o=this.disposables.add(Z.chain(this.view.onContextMenu)).filter(r=>!e).map(({element:r,index:s,browserEvent:a})=>({element:r,index:s,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return Z.any(t,n,o)}get onKeyDown(){return this.disposables.add(new kt(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new kt(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new kt(this.view.domNode,"keypress")).event}get onDidFocus(){return Z.signal(this.disposables.add(new kt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Z.signal(this.disposables.add(new kt(this.view.domNode,"blur",!0)).event)}createMouseController(e){return new gQ(this)}updateOptions(e={}){var t,n;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)==null||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new Nr(this.user,`Invalid start index: ${e}`);if(t<0)throw new Nr(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController&&this.typeNavigationController.trigger()}setSelection(e,t){for(let n of e)if(n<0||n>=this.length)throw new Nr(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Nr(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return EM(this.anchor.get(),void 0)}getAnchorElement(){let e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(let n of e)if(n<0||n>=this.length)throw new Nr(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,o){if(this.length===0)return;let r=this.focus.get(),s=this.findNextIndex(r.length>0?r[0]+e:0,t,o);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,o){if(this.length===0)return;let r=this.focus.get(),s=this.findPreviousIndex(r.length>0?r[0]-e:0,t,o);s>-1&&this.setFocus([s],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;let o=this.getFocus()[0];if(o!==n&&(o===void 0||n>o)){let r=this.findPreviousIndex(n,!1,t);r>-1&&o!==r?this.setFocus([r],e):this.setFocus([n],e)}else{let r=this.view.getScrollTop(),s=r+this.view.renderHeight;n>o&&(s-=this.view.elementHeight(n)),this.view.setScrollTop(s),this.view.getScrollTop()!==r&&(this.setFocus([]),await Yl(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t){let n,o=this.view.getScrollTop();o===0?n=this.view.indexAt(o):n=this.view.indexAfter(o-1);let r=this.getFocus()[0];if(r!==n&&(r===void 0||r>=n)){let s=this.findNextIndex(n,!1,t);s>-1&&r!==s?this.setFocus([s],e):this.setFocus([n],e)}else{let s=o;this.view.setScrollTop(o-this.view.renderHeight),this.view.getScrollTop()!==s&&(this.setFocus([]),await Yl(0),await this.focusPreviousPage(e,t))}}focusLast(e,t){if(this.length===0)return;let n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;let o=this.findNextIndex(e,!1,n);o>-1&&this.setFocus([o],t)}findNextIndex(e,t=!1,n){for(let o=0;o<this.length;o++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let o=0;o<this.length;o++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new Nr(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),o=this.view.elementTop(e),r=this.view.elementHeight(e);if(Xa(t)){let s=r-this.view.renderHeight;this.view.setScrollTop(s*pr(t,0,1)+o)}else{let s=o+r,a=n+this.view.renderHeight;o<n&&s>=a||(o<n||s>=a&&r>=this.view.renderHeight?this.view.setScrollTop(o):s>=a&&this.view.setScrollTop(s-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new Nr(this.user,`Invalid index ${e}`);let t=this.view.getScrollTop(),n=this.view.elementTop(e),o=this.view.elementHeight(e);if(n<t||n+o>t+this.view.renderHeight)return null;let r=o-this.view.renderHeight;return Math.abs((t-n)/r)}isDOMFocused(){return this.view.domNode===document.activeElement}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;let t=this.focus.get();if(t.length>0){let n;(e=this.accessibilityProvider)!=null&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};function Nh(i,e){let t=Math.pow(10,e);return Math.round(i*t)/t}var wn=class{constructor(e,t,n,o=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Nh(Math.max(Math.min(1,o),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},rh=class i{constructor(e,t,n,o){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Nh(Math.max(Math.min(1,t),0),3),this.l=Nh(Math.max(Math.min(1,n),0),3),this.a=Nh(Math.max(Math.min(1,o),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,o=e.b/255,r=e.a,s=Math.max(t,n,o),a=Math.min(t,n,o),l=0,c=0,d=(a+s)/2,h=s-a;if(h>0){switch(c=Math.min(d<=.5?h/(2*d):h/(2-2*d),1),s){case t:l=(n-o)/h+(n<o?6:0);break;case n:l=(o-t)/h+2;break;case o:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new i(l,c,d,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){let t=e.h/360,{s:n,l:o,a:r}=e,s,a,l;if(n===0)s=a=l=o;else{let c=o<.5?o*(1+n):o+n-o*n,d=2*o-c;s=i._hue2rgb(d,c,t+1/3),a=i._hue2rgb(d,c,t),l=i._hue2rgb(d,c,t-1/3)}return new wn(Math.round(s*255),Math.round(a*255),Math.round(l*255),r)}},kf=class i{constructor(e,t,n,o){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Nh(Math.max(Math.min(1,t),0),3),this.v=Nh(Math.max(Math.min(1,n),0),3),this.a=Nh(Math.max(Math.min(1,o),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,o=e.b/255,r=Math.max(t,n,o),s=Math.min(t,n,o),a=r-s,l=r===0?0:a/r,c;return a===0?c=0:r===t?c=((n-o)/a%6+6)%6:r===n?c=(o-t)/a+2:c=(t-n)/a+4,new i(Math.round(c*60),l,r,e.a)}static toRGBA(e){let{h:t,s:n,v:o,a:r}=e,s=o*n,a=s*(1-Math.abs(t/60%2-1)),l=o-s,[c,d,h]=[0,0,0];return t<60?(c=s,d=a):t<120?(c=a,d=s):t<180?(d=s,h=a):t<240?(d=a,h=s):t<300?(c=a,h=s):t<=360&&(c=s,h=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),h=Math.round((h+l)*255),new wn(c,d,h,r)}},di=class{constructor(i){if(i)if(i instanceof wn)this.rgba=i;else if(i instanceof rh)this._hsla=i,this.rgba=rh.toRGBA(i);else if(i instanceof kf)this._hsva=i,this.rgba=kf.toRGBA(i);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(i){return di.Format.CSS.parseHex(i)||di.red}get hsla(){return this._hsla?this._hsla:rh.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:kf.fromRGBA(this.rgba)}equals(i){return!!i&&wn.equals(this.rgba,i.rgba)&&rh.equals(this.hsla,i.hsla)&&kf.equals(this.hsva,i.hsva)}getRelativeLuminance(){let i=di._relativeLuminanceForComponent(this.rgba.r),e=di._relativeLuminanceForComponent(this.rgba.g),t=di._relativeLuminanceForComponent(this.rgba.b),n=.2126*i+.7152*e+.0722*t;return Nh(n,4)}static _relativeLuminanceForComponent(i){let e=i/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}getContrastRatio(i){let e=this.getRelativeLuminance(),t=i.getRelativeLuminance();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(i){let e=this.getRelativeLuminance(),t=i.getRelativeLuminance();return e>t}isDarkerThan(i){let e=this.getRelativeLuminance(),t=i.getRelativeLuminance();return e<t}lighten(i){return new di(new rh(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*i,this.hsla.a))}darken(i){return new di(new rh(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*i,this.hsla.a))}transparent(i){let{r:e,g:t,b:n,a:o}=this.rgba;return new di(new wn(e,t,n,o*i))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new di(new wn(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(i){let e=i.rgba,t=this.rgba.a,n=e.a,o=t+n*(1-t);if(o<1e-6)return di.transparent;let r=this.rgba.r*t/o+e.r*n*(1-t)/o,s=this.rgba.g*t/o+e.g*n*(1-t)/o,a=this.rgba.b*t/o+e.b*n*(1-t)/o;return new di(new wn(r,s,a,o))}makeOpaque(i){if(this.isOpaque()||i.rgba.a!==1)return this;let{r:e,g:t,b:n,a:o}=this.rgba;return new di(new wn(i.rgba.r-o*(i.rgba.r-e),i.rgba.g-o*(i.rgba.g-t),i.rgba.b-o*(i.rgba.b-n),1))}flatten(...i){let e=i.reduceRight((t,n)=>di._flatten(n,t));return di._flatten(this,e)}static _flatten(i,e){let t=1-i.rgba.a;return new di(new wn(t*e.rgba.r+i.rgba.a*i.rgba.r,t*e.rgba.g+i.rgba.a*i.rgba.g,t*e.rgba.b+i.rgba.a*i.rgba.b))}toString(){return this._toString||(this._toString=di.Format.CSS.format(this)),this._toString}static getLighterColor(i,e,t){if(i.isLighterThan(e))return i;t=t||.5;let n=i.getRelativeLuminance(),o=e.getRelativeLuminance();return t=t*(o-n)/o,i.lighten(t)}static getDarkerColor(i,e,t){if(i.isDarkerThan(e))return i;t=t||.5;let n=i.getRelativeLuminance(),o=e.getRelativeLuminance();return t=t*(n-o)/n,i.darken(t)}};di.white=new di(new wn(255,255,255,1));di.black=new di(new wn(0,0,0,1));di.red=new di(new wn(255,0,0,1));di.blue=new di(new wn(0,0,255,1));di.green=new di(new wn(0,255,0,1));di.cyan=new di(new wn(0,255,255,1));di.lightgrey=new di(new wn(211,211,211,1));di.transparent=new di(new wn(0,0,0,0));(function(i){(function(e){(function(t){function n(g){return g.rgba.a===1?`rgb(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b})`:i.Format.CSS.formatRGBA(g)}t.formatRGB=n;function o(g){return`rgba(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b}, ${+g.rgba.a.toFixed(2)})`}t.formatRGBA=o;function r(g){return g.hsla.a===1?`hsl(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(g)}t.formatHSL=r;function s(g){return`hsla(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%, ${g.hsla.a.toFixed(2)})`}t.formatHSLA=s;function a(g){let p=g.toString(16);return p.length!==2?"0"+p:p}function l(g){return`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}`}t.formatHex=l;function c(g,p=!1){return p&&g.rgba.a===1?i.Format.CSS.formatHex(g):`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}${a(Math.round(g.rgba.a*255))}`}t.formatHexA=c;function d(g){return g.isOpaque()?i.Format.CSS.formatHex(g):i.Format.CSS.formatRGBA(g)}t.format=d;function h(g){let p=g.length;if(p===0||g.charCodeAt(0)!==35)return null;if(p===7){let f=16*u(g.charCodeAt(1))+u(g.charCodeAt(2)),v=16*u(g.charCodeAt(3))+u(g.charCodeAt(4)),b=16*u(g.charCodeAt(5))+u(g.charCodeAt(6));return new i(new wn(f,v,b,1))}if(p===9){let f=16*u(g.charCodeAt(1))+u(g.charCodeAt(2)),v=16*u(g.charCodeAt(3))+u(g.charCodeAt(4)),b=16*u(g.charCodeAt(5))+u(g.charCodeAt(6)),A=16*u(g.charCodeAt(7))+u(g.charCodeAt(8));return new i(new wn(f,v,b,A/255))}if(p===4){let f=u(g.charCodeAt(1)),v=u(g.charCodeAt(2)),b=u(g.charCodeAt(3));return new i(new wn(16*f+f,16*v+v,16*b+b))}if(p===5){let f=u(g.charCodeAt(1)),v=u(g.charCodeAt(2)),b=u(g.charCodeAt(3)),A=u(g.charCodeAt(4));return new i(new wn(16*f+f,16*v+v,16*b+b,(16*A+A)/255))}return null}t.parseHex=h;function u(g){switch(g){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(di||(di={}));var Tie,Mie;Ps.prototype.text==null?Ps.prototype.text=function(i){return this.parse(i).toString()}:console.warn("Useless polyfill: SnippetParser");function js(i,e){Object.defineProperties(i,Object.getOwnPropertyDescriptors(e))}function ace(i,e,t,n){for(let o of Object.getOwnPropertyNames(e))Object.hasOwnProperty.call(i,o)||(i[o]=function(...r){return t(e[o].call(this,...r.map(n)))})}js(cY.prototype,rQ.prototype);js(xa.prototype,AQ.prototype);js(kJ.prototype,Tke.prototype);js(F0.prototype,RI.prototype);js(Cne.prototype,qU.prototype);js(Le.prototype,LI.prototype);js(jp.prototype,iQ.prototype);js(gd.prototype,ZU.prototype);js(GJ.prototype,sQ.prototype);js(zw.prototype,MI.prototype);js(VY.prototype,jU.prototype);js(goe.prototype,GU.prototype);js(yN.prototype,TI.prototype);var s_=oi.as(Hke.JSONContribution);s_.getSchemaContributions??(s_.getSchemaContributions=()=>({schemas:s_.schemasById}));s_.onDidChangeSchema??(s_.onDidChangeSchema=s_._onDidChangeSchema.event);var cF=oi.as(Oke.ThemingContribution);cF.onThemingParticipantAdded??(cF.onThemingParticipantAdded=cF.onThemingParticipantAddedEmitter.event);var md=oi.as(Sa.Configuration);md.onDidUpdateConfiguration??(md.onDidUpdateConfiguration=md._onDidUpdateConfiguration.event);md.onDidSchemaChange??(md.onDidSchemaChange=md._onDidSchemaChange.event);md.notifyConfigurationSchemaUpdated??(md.notifyConfigurationSchemaUpdated=()=>{md._onDidSchemaChange.fire()});(Tie=VY.prototype).onDidClose??(Tie.onDidClose=Z.None);function lce(i){return function(){let e=i.call(this);return e.onDidTriggerButton??(e.onDidTriggerButton=e.onDidTriggerButtonEmitter.event),e}}pu.prototype.createQuickPick=lce(pu.prototype.createQuickPick);pu.prototype.createInputBox=lce(pu.prototype.createInputBox);var Gke=zB().find(([i])=>i===yp)[1].ctor;(Mie=Gke.prototype).onDidChangeFormatters??(Mie.onDidChangeFormatters=Z.None);function cce(i){return i instanceof Gi?Mh.wrap(i.buffer):i}function dce(i){return i instanceof Mh?Gi.wrap(i.buffer):i}for(let i of Object.getOwnPropertyNames(Mh))if(!Object.hasOwnProperty.call(Gi,i)){let e=Mh[i];Mh[i]=Gi[i]=function(...t){return dce(e.call(Gi,...t.map(cce)))}}ace(Gi.prototype,Mh.prototype,dce,cce);function Yke(i){if(i instanceof di){let e=i.rgba;return new j(new Ct(e.r,e.g,e.g,e.a))}return i}function Jke(i){if(i instanceof j){let e=i.rgba;return new di(new wn(e.r,e.g,e.g,e.a))}return i}ace(j.prototype,di.prototype,Yke,Jke);var dv=ze("environmentService"),SN=Zle,ey=ze("fileService"),bQ;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(bQ||(bQ={}));var wQ;(function(i){i[i.Readonly=1]="Readonly"})(wQ||(wQ={}));var Oc;(function(i){i.FileExists="EntryExists",i.FileNotFound="EntryNotFound",i.FileNotADirectory="EntryNotADirectory",i.FileIsADirectory="EntryIsADirectory",i.FileExceedsMemoryLimit="EntryExceedsMemoryLimit",i.FileTooLarge="EntryTooLarge",i.FileWriteLocked="EntryWriteLocked",i.NoPermissions="NoPermissions",i.Unavailable="Unavailable",i.Unknown="Unknown"})(Oc||(Oc={}));function Xke(i,e){return i.name=e?`${e} (FileSystemError)`:"FileSystemError",i}var hv=ze("IUriIdentityService");function Zke(i){let e=i;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&$.isUri(e.location)&&$.isUri(e.globalStorageHome)&&$.isUri(e.settingsResource)&&$.isUri(e.keybindingsResource)&&$.isUri(e.tasksResource)&&$.isUri(e.snippetsHome)&&(jo(e.extensionsResource)||$.isUri(e.extensionsResource)))}var qm="workbench.experimental.settingsProfiles.enabled",XJ=ze("IUserDataProfilesService"),eEe="extensions.json";function gS(i,e,t){return{id:$C(e.path).toString(16),name:i,location:e,isDefault:!1,globalStorageHome:kl(e,"globalStorage"),settingsResource:kl(e,"settings.json"),keybindingsResource:kl(e,"keybindings.json"),tasksResource:kl(e,"tasks.json"),snippetsHome:kl(e,"snippets"),extensionsResource:kl(e,eEe),useDefaultFlags:t}}var FI=class extends J{constructor(i,e,t,n){super(),this.environmentService=i,this.fileService=e,this.uriIdentityService=t,this.logService=n,this.enabled=!1,this.defaultProfileShouldIncludeExtensionsResourceAlways=!1,this._onDidChangeProfiles=this._register(new nt),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this._onWillCreateProfile=this._register(new nt),this.onWillCreateProfile=this._onWillCreateProfile.event,this._onWillRemoveProfile=this._register(new nt),this.onWillRemoveProfile=this._onWillRemoveProfile.event,this.profilesHome=kl(this.environmentService.userRoamingDataHome,"profiles")}get defaultProfile(){return this.profiles[0]}get profiles(){return this.profilesObject.profiles}setEnablement(i){this.enabled!==i&&(this._profilesObject=void 0,this.enabled=i)}get profilesObject(){if(!this._profilesObject){let i=this.enabled?this.getStoredProfiles().map(o=>gS(o.name,o.location,o.useDefaultFlags)):[],e,t=new en;if(i.length){let o=this.getStoredProfileAssociations();if(o.workspaces)for(let[r,s]of Object.entries(o.workspaces)){let a=$.parse(r),l=$.parse(s),c=i.find(d=>this.uriIdentityService.extUri.isEqual(d.location,l));c&&t.set(a,c)}if(o.emptyWindow){let r=$.parse(o.emptyWindow);e=i.find(s=>this.uriIdentityService.extUri.isEqual(s.location,r))}}let n=gS(m("defaultProfile","Default"),this.environmentService.userRoamingDataHome);i.unshift({...n,isDefault:!0,extensionsResource:this.defaultProfileShouldIncludeExtensionsResourceAlways||i.length>0?n.extensionsResource:void 0}),this._profilesObject={profiles:i,workspaces:t,emptyWindow:e}}return this._profilesObject}getProfile(i){let e=this.getWorkspace(i);return($.isUri(e)?this.profilesObject.workspaces.get(e):this.profilesObject.emptyWindow)??this.defaultProfile}getWorkspace(i){return u9(i)?i.uri:Ike(i)?i.configPath:"empty-window"}async createProfile(i,e,t){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${qm}' setting.`);if(this.getStoredProfiles().some(r=>r.name===i))throw new Error(`Profile with name ${i} already exists`);let n=gS(i,kl(this.profilesHome,$C(um()).toString(16)),e);await this.fileService.createFolder(n.location);let o=[];return this._onWillCreateProfile.fire({profile:n,join(r){o.push(r)}}),await $h.settled(o),this.updateProfiles([n],[],[]),t&&await this.setProfileForWorkspace(n,t),n}async updateProfile(i,e,t){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${qm}' setting.`);let n=this.profiles.find(o=>o.id===i.id);if(!n)throw new Error(`Profile '${i.name}' does not exist`);return n=gS(e,n.location,t),this.updateProfiles([],[],[n]),n}async setProfileForWorkspace(i,e){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${qm}' setting.`);let t=this.profiles.find(n=>n.id===i.id);if(!t)throw new Error(`Profile '${i.name}' does not exist`);this.updateWorkspaceAssociation(e,t)}async unsetWorkspace(i){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${qm}' setting.`);this.updateWorkspaceAssociation(i)}async removeProfile(i){var e,t;if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${qm}' setting.`);if(i.isDefault)throw new Error("Cannot remove default profile");let n=this.profiles.find(r=>r.id===i.id);if(!n)throw new Error(`Profile '${i.name}' does not exist`);let o=[];this._onWillRemoveProfile.fire({profile:n,join(r){o.push(r)}}),await $h.settled(o),n.id===((e=this.profilesObject.emptyWindow)==null?void 0:e.id)&&(this.profilesObject.emptyWindow=void 0);for(let r of[...this.profilesObject.workspaces.keys()])n.id===((t=this.profilesObject.workspaces.get(r))==null?void 0:t.id)&&this.profilesObject.workspaces.delete(r);this.updateStoredProfileAssociations(),this.updateProfiles([],[n],[]);try{this.profiles.length===1?await this.fileService.del(this.profilesHome,{recursive:!0}):await this.fileService.del(n.location,{recursive:!0})}catch(r){this.logService.error(r)}}updateProfiles(i,e,t){let n=[];for(let o of[...this.profilesObject.profiles,...i])o.isDefault||e.some(r=>o.id===r.id)||(o=t.find(r=>o.id===r.id)??o,n.push({location:o.location,name:o.name,useDefaultFlags:o.useDefaultFlags}));this.saveStoredProfiles(n),this._profilesObject=void 0,this.triggerProfilesChanges(i,e,t)}triggerProfilesChanges(i,e,t){this._onDidChangeProfiles.fire({added:i,removed:e,updated:t,all:this.profiles})}updateWorkspaceAssociation(i,e){let t=this.getWorkspace(i);$.isUri(t)?(this.profilesObject.workspaces.delete(t),e&&!e.isDefault&&this.profilesObject.workspaces.set(t,e)):this.profilesObject.emptyWindow=e!=null&&e.isDefault?void 0:e,this.updateStoredProfileAssociations()}updateStoredProfileAssociations(){var i;let e={};for(let[n,o]of this.profilesObject.workspaces.entries())e[n.toString()]=o.location.toString();let t=(i=this.profilesObject.emptyWindow)==null?void 0:i.location.toString();this.saveStoredProfileAssociations({workspaces:e,emptyWindow:t}),this._profilesObject=void 0}getStoredProfiles(){return[]}saveStoredProfiles(i){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(i){throw new Error("not implemented")}};FI.PROFILES_KEY="userDataProfiles";FI.PROFILE_ASSOCIATIONS_KEY="profileAssociations";FI=Ne([Be(0,dv),Be(1,ey),Be(2,hv),Be(3,no)],FI);var tEe="__$__isNewStorageMarker",pS="__$__targetStorageMarker",Ef;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(Ef||(Ef={}));var Nie;(function(i){i[i.APPLICATION=-1]="APPLICATION",i[i.PROFILE=0]="PROFILE",i[i.WORKSPACE=1]="WORKSPACE"})(Nie||(Nie={}));var Rie;(function(i){i[i.USER=0]="USER",i[i.MACHINE=1]="MACHINE"})(Rie||(Rie={}));var CQ=class i extends J{constructor(e={flushInterval:i.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Bh),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new Bh),this.onDidChangeTarget=this._onDidChangeTarget.event,this._onWillSaveState=this._register(new nt),this.onWillSaveState=this._onWillSaveState.event,this.flushWhenIdleScheduler=this._register(new jt(()=>this.doFlushWhenIdle(),this.options.flushInterval)),this.runFlushWhenIdle=this._register(new eo),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}doFlushWhenIdle(){this.runFlushWhenIdle.value=R_(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){st([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{try{await this.doInitialize()}finally{}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(e,t){if(t===pS){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}emitWillSaveState(e){this._onWillSaveState.fire({reason:e})}get(e,t,n){var o;return(o=this.getStorage(t))==null?void 0:o.get(e,n)}getBoolean(e,t,n){var o;return(o=this.getStorage(t))==null?void 0:o.getBoolean(e,n)}getNumber(e,t,n){var o;return(o=this.getStorage(t))==null?void 0:o.getNumber(e,n)}store(e,t,n,o){if(Uo(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,n,o),(r=this.getStorage(n))==null||r.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))==null||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(e,t){let n=[],o=this.getKeyTargets(e);for(let r of Object.keys(o))o[r]===t&&n.push(r);return n}updateKeyTarget(e,t,n){var o,r;let s=this.getKeyTargets(t);typeof n=="number"?s[e]!==n&&(s[e]=n,(o=this.getStorage(t))==null||o.set(pS,JSON.stringify(s))):typeof s[e]=="number"&&(delete s[e],(r=this.getStorage(t))==null||r.set(pS,JSON.stringify(s)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){let t=this.get(pS,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}isNew(e){return this.getBoolean(tEe,e)===!0}async flush(e=Ef.NONE){this._onWillSaveState.fire({reason:e});let t=this.getStorage(-1),n=this.getStorage(0),o=this.getStorage(1);switch(e){case Ef.NONE:await $h.settled([t?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve(),o?.whenFlushed()??Promise.resolve()]);break;case Ef.SHUTDOWN:await $h.settled([t?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve(),o?.flush(0)??Promise.resolve()]);break}}async log(){var e,t,n;let o=((e=this.getStorage(-1))==null?void 0:e.items)??new Map,r=((t=this.getStorage(0))==null?void 0:t.items)??new Map,s=((n=this.getStorage(1))==null?void 0:n.items)??new Map;return iEe(o,r,s,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async switch(e,t){return this.emitWillSaveState(Ef.NONE),Zke(e)?this.switchToProfile(e,t):this.switchToWorkspace(e,t)}canSwitchProfile(e,t){return!(e.id===t.id||Fie(t)&&Fie(e))}switchData(e,t,n,o){this.withPausedEmitters(()=>{if(o)for(let[r,s]of e)t.set(r,s);else{let r=new Set;for(let[s,a]of e)r.add(s),t.get(s)!==a&&this.emitDidChangeValue(n,s);for(let[s]of t.items)r.has(s)||this.emitDidChangeValue(n,s)}})}};CQ.DEFAULT_FLUSH_INTERVAL=60*1e3;function Fie(i){var e;return i.isDefault||!!((e=i.useDefaultFlags)!=null&&e.uiState)}async function iEe(i,e,t,n,o,r){let s=f=>{try{return JSON.parse(f)}catch{return f}},a=new Map,l=new Map;i.forEach((f,v)=>{a.set(v,f),l.set(v,s(f))});let c=new Map,d=new Map;e.forEach((f,v)=>{c.set(v,f),d.set(v,s(f))});let h=new Map,u=new Map;t.forEach((f,v)=>{h.set(v,f),u.set(v,s(f))}),console.group(n!==o?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);let g=[];if(a.forEach((f,v)=>{g.push({key:v,value:f})}),console.table(g),console.groupEnd(),console.log(l),n!==o){console.group(`Storage: Profile (path: ${o}, profile specific)`);let f=[];c.forEach((v,b)=>{f.push({key:b,value:v})}),console.table(f),console.groupEnd(),console.log(d)}console.group(`Storage: Workspace (path: ${r})`);let p=[];h.forEach((f,v)=>{p.push({key:v,value:f})}),console.table(p),console.groupEnd(),console.log(u)}var DN=ze("editorGroupsService"),ty=ze("editorService"),yQ=-1,ZS=-2,xN=ze("textFileService"),kN=dv,EN=ze("workingCopyFileService"),LN=ze("pathService"),IN=ze("paneCompositePartService"),ZJ=ze("productService"),nEe="vscode://schemas/vscode-product",eX=ze("ILanguageStatusService"),tX=ze("hostService"),oEe=ze("snippetService"),Pv,ot;(function(i){i.get=()=>Pv??{};function e(t){return Pv!=null&&console.warn("Services have been overridden"),Pv=t,{dispose:()=>{Pv===t&&(Pv=void 0)}}}i.install=e})(ot||(ot={}));function rEe(i){return typeof i=="string"}function sEe(i){return Array.isArray(i)&&i.every(e=>rEe(e))}function Ov(i){return typeof i>"u"?null:i}var hce,fu=class i{constructor(e){this.confusableDictionary=e}static getInstance(e){return i.cache.get(Array.from(e))}static getLocales(){return i._locales.getValue()}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};hce=fu;fu.ambiguousCharacterData=new tl(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));fu.cache=new CD(i=>{function e(c){let d=new Map;for(let h=0;h<c.length;h+=2)d.set(c[h],c[h+1]);return d}function t(c,d){let h=new Map(c);for(let[u,g]of d)h.set(u,g);return h}function n(c,d){if(!c)return d;let h=new Map;for(let[u,g]of c)d.has(u)&&h.set(u,g);return h}let o=hce.ambiguousCharacterData.getValue(),r=i.filter(c=>!c.startsWith("_")&&c in o);r.length===0&&(r=["_default"]);let s;for(let c of r){let d=e(o[c]);s=n(s,d)}let a=e(o._common),l=t(a,s);return new fu(l)});fu._locales=new tl(()=>Object.keys(fu.ambiguousCharacterData.getValue()).filter(i=>!i.startsWith("_")));function aEe(i,e){return new Promise((t,n)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(new ya)});i.then(t,n).finally(()=>o.dispose())})}var SQ=class{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}},lEe=ze("policy"),cEe=["Azure","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],Bie="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",iX=ze("extensionService");function Kp(i,e){return i.enabledApiProposals?i.enabledApiProposals.includes(e):!1}function dEe(i,e){var t;if(!Kp(i,e))throw new Error(`Extension '${i.identifier.value}' CANNOT use API proposal: ${e}.
Its package.json#enabledApiProposals-property declares: ${((t=i.enabledApiProposals)==null?void 0:t.join(", "))??"[]"} but NOT ${e}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${i.identifier.value}`)}var DQ=class{constructor(){this.onDidRegisterExtensions=Z.None,this.onDidChangeExtensionsStatus=Z.None,this.onDidChangeExtensions=Z.None,this.onWillActivateByEvent=Z.None,this.onDidChangeResponsiveChange=Z.None}activateByEvent(e){return Promise.resolve(void 0)}activationEventIsDone(e){return!1}whenInstalledExtensionsRegistered(){return Promise.resolve(!0)}getExtensions(){return Promise.resolve([])}getExtension(){return Promise.resolve(void 0)}readExtensionPointContributions(e){return Promise.resolve(Object.create(null))}getExtensionsStatus(){return Object.create(null)}getInspectPort(e,t){return Promise.resolve(0)}getInspectPorts(e,t){return Promise.resolve([])}stopExtensionHosts(){}async restartExtensionHost(){}async startExtensionHosts(){}async setRemoteEnvironment(e){}canAddExtension(){return!1}canRemoveExtension(){return!1}_activateById(e,t){return Promise.resolve()}},hEe=ze("lifecycleService"),uEe=ze("ILanguageDetectionService"),gEe=ze("keyboardLayoutService"),xQ=class{constructor(e){this._OS=e}dumpDebugInfo(){return"FallbackKeyboardMapper dispatching on keyCode"}resolveKeybinding(e){return[new Vg(e,this._OS)]}resolveKeyboardEvent(e){let t=new ql(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Vg(t.toChord(),this._OS)}resolveUserBinding(e){return Vg.resolveUserBinding(e,this._OS)}},pEe=dv,BI=Object.freeze({authSession:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts",badges:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.badges.d.ts",commentsResolvedState:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsResolvedState.d.ts",contribEditSessions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts",contribLabelFormatterWorkspaceTooltip:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts",contribMenuBarHome:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts",contribMergeEditorToolbar:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorToolbar.d.ts",contribRemoteHelp:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts",contribShareMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts",contribViewSize:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewSize.d.ts",contribViewsRemote:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts",contribViewsWelcome:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts",contribWebviewContext:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribWebviewContext.d.ts",customEditorMove:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts",diffCommand:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts",documentFiltersExclusive:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts",documentPaste:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts",editorInsets:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts",extensionRuntime:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts",extensionsAny:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts",externalUriOpener:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts",fileSearchProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts",findTextInFiles:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts",fsChunks:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts",idToken:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts",inlineCompletionsAdditions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts",inlineCompletionsNew:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsNew.d.ts",interactiveWindow:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts",ipc:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts",notebookCellExecutionState:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts",notebookContentProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookContentProvider.d.ts",notebookControllerKind:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerKind.d.ts",notebookDebugOptions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDebugOptions.d.ts",notebookDeprecated:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts",notebookEditor:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookEditor.d.ts",notebookEditorEdit:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookEditorEdit.d.ts",notebookKernelSource:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts",notebookLiveShare:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts",notebookMessaging:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts",notebookMime:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts",notebookWorkspaceEdit:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookWorkspaceEdit.d.ts",portsAttributes:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts",quickPickSortByLabel:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts",resolvers:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts",scmActionButton:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts",scmSelectedProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts",scmValidation:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts",snippetWorkspaceEdit:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.snippetWorkspaceEdit.d.ts",tabInputTextMerge:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts",taskPresentationGroup:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts",telemetry:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts",terminalDataWriteEvent:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts",terminalDimensions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts",terminalExitReason:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExitReason.d.ts",testCoverage:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testCoverage.d.ts",testObserver:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts",textSearchProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts",timeline:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts",tokenInformation:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts",treeViewReveal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts",workspaceTrust:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}),nX=oi.as(ev.JSONContribution),kQ=class i{constructor(e,t){this.added=e,this.removed=t}static _toSet(e){let t=new Set;for(let n=0,o=e.length;n<o;n++)t.add(pd.toKey(e[n].description.identifier));return t}static compute(e,t){if(!e||!e.length)return new i(t,[]);if(!t||!t.length)return new i([],e);let n=this._toSet(e),o=this._toSet(t),r=t.filter(a=>!n.has(pd.toKey(a.description.identifier))),s=e.filter(a=>!o.has(pd.toKey(a.description.identifier)));return new i(r,s)}},EQ=class{constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");this._handler=e,this._handle()}acceptUsers(e){this._delta=kQ.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){Ye(e)}}},mEe={type:"string",enum:["ui","workspace"],enumDescriptions:[m("ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),m("workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},uce="vscode://schemas/vscode-extensions",LQ={properties:{engines:{type:"object",description:m("vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:m("vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:m("vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:m("vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:m("vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:cEe},{type:"string",const:"Languages",deprecationMessage:m("vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:m("vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:m("vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:m("vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:m("vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:m("vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:m("vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:m("vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(BI),markdownEnumDescriptions:Object.values(BI)}},activationEvents:{description:m("vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:m("vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:m("vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:m("vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:m("vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:m("vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:m("vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:m("vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:m("vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:m("vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:m("vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:m("vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:m("vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onSearch",description:m("vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:m("vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onIdentity",body:"onIdentity:${8:identity}",description:m("vscode.extension.activationEvents.onIdentity","An activation event emitted whenever the specified user identity.")},{label:"onUri",body:"onUri",description:m("vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:m("vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:m("vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:m("vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:m("vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:m("vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:m("vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:m("vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"*",description:m("vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:m("vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:m("vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:m("vscode.extension.badges.href","Badge link.")},description:{type:"string",description:m("vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:m("vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:m("vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:m("vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:Bie}},extensionPack:{description:m("vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:Bie}},extensionKind:{description:m("extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:mEe,default:["workspace"],defaultSnippets:[{body:["ui"],description:m("extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:m("extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:m("extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:m("extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:m("extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:m("vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:m("vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:m("vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[m("vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),m("vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),m("vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:m("vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:m("vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:m("vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[m("vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),m("vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),m("vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:m("vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:m("vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:m("vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:m("vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:m("vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:m("vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:m("vscode.extension.icon","The path to a 128x128 pixel icon.")}}},IQ=class{constructor(){this._extensionPoints=new Map}registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);let t=new EQ(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),LQ.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,nX.registerSchema(uce,LQ),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}},gce={ExtensionsRegistry:"ExtensionsRegistry"};oi.add(gce.ExtensionsRegistry,new IQ);oi.as(gce.ExtensionsRegistry);nX.registerSchema(uce,LQ);nX.registerSchema(nEe,{properties:{extensionEnabledApiProposals:{description:m("product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(BI),markdownEnumDescriptions:Object.values(BI)}}]}}}});mn("settings-sync-view-icon",_.sync,m("syncViewIcon","View icon of the Settings Sync view."));var fEe=ze("IUserDataInitializationService"),_Ee=ze("hostColorSchemeService"),TQ=class extends J{constructor(){super(),this._onDidSchemeChangeEvent=this._register(new nt),this.registerListeners()}registerListeners(){bA("(prefers-color-scheme: dark)",()=>{this._onDidSchemeChangeEvent.fire()}),bA("(forced-colors: active)",()=>{this._onDidSchemeChangeEvent.fire()})}get onDidChangeColorScheme(){return this._onDidSchemeChangeEvent.event}get dark(){return window.matchMedia("(prefers-color-scheme: light)").matches?!1:!!window.matchMedia("(prefers-color-scheme: dark)").matches}get highContrast(){return!!window.matchMedia("(forced-colors: active)").matches}},vEe=ze("preferencesService"),AEe=ze("textMateService"),bEe=ze("IUserDataProfileService");we.and(lAe.notEqualsTo("stable"),Vh.create(`config.${qm}`));var MQ=class extends J{constructor(i,e){super(),this._onDidChangeCurrentProfile=this._register(new nt),this.onDidChangeCurrentProfile=this._onDidChangeCurrentProfile.event,this._onDidUpdateCurrentProfile=this._register(new nt),this.onDidUpdateCurrentProfile=this._onDidUpdateCurrentProfile.event,this._currentProfile=i,this._register(e.onDidChangeProfiles(t=>{if(this._currentProfile.isDefault){this._currentProfile=e.defaultProfile;return}let n=t.updated.find(o=>this._currentProfile.id===o.id);n&&(this._currentProfile=n,this._onDidUpdateCurrentProfile.fire())}))}get currentProfile(){return this._currentProfile}async updateCurrentProfile(i,e){if(this._currentProfile.id===i.id)return;let t=this._currentProfile;this._currentProfile=i;let n=[];this._onDidChangeCurrentProfile.fire({preserveData:e,previous:t,profile:i,join(o){n.push(o)}}),await $h.settled(n)}};MQ=Ne([Be(1,XJ)],MQ);function te(){throw new Error("unsupported")}Ke(ty,class{constructor(){this._serviceBrand=void 0,this.onDidActiveEditorChange=Z.None,this.onDidVisibleEditorsChange=Z.None,this.onDidEditorsChange=Z.None,this.onDidCloseEditor=Z.None,this.activeEditorPane=void 0,this.activeEditor=void 0,this.activeTextEditorLanguageId=void 0,this.visibleEditorPanes=[],this.visibleEditors=[],this.visibleTextEditorControls=[],this.editors=[],this.count=0,this.getEditors=()=>[],this.openEditor=te,this.openEditors=te,this.replaceEditors=async()=>{},this.isOpened=()=>!1,this.isVisible=()=>!1,this.closeEditor=async()=>{},this.closeEditors=async()=>{},this.findEditors=()=>[],this.save=async()=>!1,this.saveAll=async()=>!1,this.revert=async()=>!1,this.revertAll=async()=>!1}get activeTextEditorControl(){return ye.get(Ft).getFocusedCodeEditor()??void 0}});Ke(IN,class{constructor(){this._serviceBrand=void 0,this.onDidPaneCompositeOpen=Z.None,this.onDidPaneCompositeClose=Z.None,this.openPaneComposite=te,this.getActivePaneComposite=()=>{},this.getPaneComposite=()=>{},this.getPaneComposites=()=>[],this.getPinnedPaneCompositeIds=()=>[],this.getVisiblePaneCompositeIds=()=>[],this.getProgressIndicator=()=>{},this.hideActivePaneComposite=()=>{},this.getLastActivePaneCompositeId=te,this.showActivity=te}});Ke(hv,class{constructor(){this._serviceBrand=void 0,this.extUri=new ov(()=>!1)}asCanonicalUri(i){return i}});var wEe=new nt,NQ=class{constructor(){this.onDidCreate=Z.None,this.onDidResolve=Z.None,this.onDidChangeDirty=Z.None,this.onDidChangeReadonly=Z.None,this.onDidRemove=Z.None,this.onDidChangeOrphaned=Z.None,this.onDidChangeEncoding=Z.None,this.onDidSaveError=Z.None,this.onDidSave=wEe.event,this.onDidRevert=Z.None,this.models=[],this.saveErrorHandler={onSaveError:te},this.get=()=>{},this.resolve=te,this.addSaveParticipant=te,this.runSaveParticipants=te}canDispose(){return!0}};Ke(xN,class{constructor(){this._serviceBrand=void 0,this.files=new NQ,this.isDirty=()=>!1,this.save=te,this.saveAs=te,this.revert=te,this.read=te,this.readStream=te,this.write=te,this.create=te,this.getEncodedReadable=te,this.getDecodedStream=te}get untitled(){return te()}get encoding(){return te()}dispose(){}});Ke(ey,class{constructor(){this._serviceBrand=void 0,this.onDidChangeFileSystemProviderRegistrations=Z.None,this.onDidChangeFileSystemProviderCapabilities=Z.None,this.onWillActivateFileSystemProvider=Z.None,this.registerProvider=te,this.getProvider=function(){},this.activateProvider=async()=>{},this.canHandleResource=async()=>!1,this.hasProvider=()=>!1,this.hasCapability=()=>!1,this.listCapabilities=()=>[],this.onDidFilesChange=Z.None,this.onDidRunOperation=Z.None,this.resolve=te,this.resolveAll=te,this.stat=te,this.exists=async()=>!1,this.readFile=te,this.readFileStream=te,this.writeFile=te,this.move=te,this.canMove=te,this.copy=te,this.canCopy=te,this.cloneFile=te,this.createFile=te,this.canCreateFile=te,this.createFolder=te,this.del=te,this.canDelete=te,this.onDidWatchError=Z.None,this.watch=te}dispose(){}});var RQ=class{constructor(){this.onDidModelChange=Z.None,this.onWillDispose=Z.None,this.onDidActiveEditorChange=Z.None,this.onWillCloseEditor=Z.None,this.onDidCloseEditor=Z.None,this.onWillMoveEditor=Z.None,this.onWillOpenEditor=Z.None,this.id=0,this.index=0,this.label="main",this.ariaLabel="main",this.activeEditorPane=void 0,this.activeEditor=null,this.previewEditor=null,this.count=0,this.isEmpty=!1,this.isLocked=!1,this.stickyCount=0,this.editors=[],this.getEditors=te,this.findEditors=te,this.getEditorByIndex=te,this.getIndexOfEditor=te,this.openEditor=te,this.openEditors=te,this.isPinned=te,this.isSticky=te,this.isActive=te,this.contains=te,this.moveEditor=te,this.moveEditors=te,this.copyEditor=te,this.copyEditors=te,this.closeEditor=te,this.closeEditors=te,this.closeAllEditors=te,this.replaceEditors=te,this.pinEditor=te,this.stickEditor=te,this.unstickEditor=te,this.lock=te,this.isFirst=()=>!0,this.isLast=()=>!0}get scopedContextKeyService(){return ye.get(Ze)}focus(){}};Ke(DN,class{constructor(){this._serviceBrand=void 0,this.onDidChangeActiveGroup=Z.None,this.onDidAddGroup=Z.None,this.onDidRemoveGroup=Z.None,this.onDidMoveGroup=Z.None,this.onDidActivateGroup=Z.None,this.onDidLayout=Z.None,this.onDidScroll=Z.None,this.onDidChangeGroupIndex=Z.None,this.onDidChangeGroupLocked=Z.None,this.activeGroup=new RQ,this.groups=[],this.count=0,this.orientation=0,this.isReady=!1,this.whenReady=Promise.resolve(),this.whenRestored=Promise.resolve(),this.hasRestorableState=!1,this.getGroups=()=>[],this.getGroup=()=>{},this.activateGroup=te,this.getSize=te,this.setSize=te,this.arrangeGroups=te,this.applyLayout=te,this.centerLayout=te,this.isLayoutCentered=()=>!1,this.setGroupOrientation=te,this.findGroup=()=>{},this.addGroup=te,this.removeGroup=te,this.moveGroup=te,this.mergeGroup=te,this.mergeAllGroups=te,this.copyGroup=te,this.onDidChangeEditorPartOptions=Z.None,this.enforcePartOptions=te}get contentDimension(){return te()}get sideGroup(){return te()}get partOptions(){return te()}});var Jw=class{constructor(){this._serviceBrand=void 0,this.skipReleaseNotes=!0,this.skipWelcome=!0,this.disableWorkspaceTrust=!0,this.debugRenderer=!1,this.sync=void 0,this.isExtensionDevelopment=!1,this.disableExtensions=!1,this.logsPath="",this.verbose=!1,this.isBuilt=!0,this.disableTelemetry=!1}get logFile(){return te()}get extHostLogsPath(){return te()}get webviewExternalEndpoint(){return te()}get userRoamingDataHome(){return te()}get keyboardLayoutResource(){return te()}get argvResource(){return te()}get snippetsHome(){return $.from({scheme:"user",path:"/snippets"})}get untitledWorkspacesHome(){return te()}get globalStorageHome(){return te()}get workspaceStorageHome(){return te()}get localHistoryHome(){return te()}get cacheHome(){return te()}get userDataSyncHome(){return te()}get userDataSyncLogResource(){return te()}get debugExtensionHost(){return te()}get telemetryLogResource(){return te()}get serviceMachineIdResource(){return te()}get stateResource(){return te()}get editSessionsLogResource(){return te()}};Ke(kN,Jw);Ke(dv,Jw);Ke(pEe,Jw);Ke(EN,class{constructor(){this._serviceBrand=void 0,this.onWillRunWorkingCopyFileOperation=Z.None,this.onDidFailWorkingCopyFileOperation=Z.None,this.onDidRunWorkingCopyFileOperation=Z.None,this.addFileOperationParticipant=te,this.hasSaveParticipants=!1,this.addSaveParticipant=te,this.runSaveParticipants=te,this.create=te,this.createFolder=te,this.move=te,this.copy=te,this.delete=te,this.registerWorkingCopyProvider=te,this.getDirty=te}});Ke(LN,class{constructor(){this._serviceBrand=void 0,this.defaultUriScheme=Oe.file,this.userHome=te,this.hasValidBasename=te,this.resolvedUserHome=void 0}get path(){return te()}async fileURI(i){return $.file(i)}});Ke(QC,class{constructor(){this._serviceBrand=void 0}withProgress(i,e,t){let{window:n}=ot.get();return n?.withProgress!=null?n.withProgress(i,e,t):e({report:()=>{}})}});Ke(ZJ,class{constructor(){this._serviceBrand=void 0,this.version="1.69.0",this.nameShort="Code - OSS Dev",this.nameLong="Code - OSS Dev",this.applicationName="code-oss",this.dataFolderName=".vscode-oss",this.urlProtocol="code-oss",this.reportIssueUrl="https://github.com/microsoft/vscode/issues/new",this.licenseName="MIT",this.licenseUrl="https://github.com/microsoft/vscode/blob/main/LICENSE.txt",this.serverApplicationName="code-server-oss"}});Ke(eX,class{constructor(){this._provider=new Bi,this.onDidChange=this._provider.onDidChange}addStatus(i){return this._provider.register(i.selector,i)}getLanguageStatus(i){return this._provider.ordered(i).sort((e,t)=>{let n=t.severity-e.severity;return n===0&&(n=Is(e.source,t.source)),n===0&&(n=Is(e.id,t.id)),n})}});var Pie=Oh(window),CEe=new kt(window.document,"visibilitychange"),yEe=Z.latch(Z.any(Z.map(Pie.onDidFocus,()=>document.hasFocus()),Z.map(Pie.onDidBlur,()=>document.hasFocus()),Z.map(CEe.event,()=>document.hasFocus())));Ke(tX,class{constructor(){this.onDidChangeFocus=yEe,this.openWindow=te,this.restart=te,this.reload=te,this.close=te}get hasFocus(){return document.hasFocus()}async hadLastFocus(){return!0}async focus(){window.focus()}async toggleFullScreen(){document.fullscreenEnabled?await document.body.requestFullscreen():await document.exitFullscreen()}});Ke(hEe,class{constructor(){this.startupKind=1,this.phase=2,this.onBeforeShutdown=Z.None,this.onShutdownVeto=Z.None,this.onBeforeShutdownError=Z.None,this.onWillShutdown=Z.None,this.onDidShutdown=Z.None,this.shutdown=te}async when(){}});Ke(uEe,class{isEnabledForLanguage(){return!1}async detectLanguage(){}});Ke(iX,DQ);Ke(gEe,class{constructor(){this.onDidChangeKeyboardLayout=Z.None,this.getRawKeyboardMapping=()=>null,this.getCurrentKeyboardLayout=()=>null,this.getAllKeyboardLayouts=()=>[],this.getKeyboardMapper=()=>new xQ(is),this.validateCurrentKeyboardMapping=()=>{}}});Ke(fEe,class{async requiresInitialization(){return!1}async whenInitializationFinished(){}async initializeRequiredResources(){}async initializeInstalledExtensions(){}async initializeOtherResources(){}});Ke(_Ee,TQ);Ke(vEe,class{constructor(){this.workspaceSettingsResource=null,this.getFolderSettingsResource=te,this.createPreferencesEditorModel=te,this.resolveModel=te,this.createSettings2EditorModel=te,this.openRawDefaultSettings=te,this.openSettings=te,this.openUserSettings=te,this.openRemoteSettings=te,this.openWorkspaceSettings=te,this.openFolderSettings=te,this.openGlobalKeybindingSettings=te,this.openDefaultKeybindingsFile=te,this.getEditableSettingsURI=te,this.createSplitJsonEditorInput=te,this.openApplicationSettings=te,this.openLanguageSpecificSettings=te}get userSettingsResource(){return te()}});Ke(AEe,class{constructor(){this.onDidEncounterLanguage=Z.None,this.createGrammar=te,this.startDebugMode=te}});var eD={id:"default",isDefault:!0,name:"default",location:$.from({scheme:"user",path:"/profile.json"}),get globalStorageHome(){return te()},settingsResource:$.from({scheme:"user",path:"/settings.json"}),keybindingsResource:$.from({scheme:"user",path:"/keybindings.json"}),get tasksResource(){return te()},get snippetsHome(){return $.from({scheme:"user",path:"/snippets"})},extensionsResource:void 0};Ke(XJ,class{constructor(){this.defaultProfile=eD,this.onDidChangeProfiles=Z.None,this.profiles=[eD],this.createProfile=te,this.updateProfile=te,this.setProfileForWorkspace=te,this.getProfile=()=>eD,this.removeProfile=te}get profilesHome(){return te()}});var FQ=class extends MQ{constructor(i){super(eD,i)}};FQ=Ne([Be(0,XJ)],FQ);Ke(bEe,FQ);Ke(lEe,class{constructor(){this.onDidChange=Z.None,this.registerPolicyDefinitions=te,this.getPolicyValue=()=>{},this.serialize=()=>{}}});Ke(oEe,class{constructor(){this.getSnippetFiles=te,this.isEnabled=te,this.updateEnablement=te,this.updateUsageTimestamp=te,this.getSnippets=async()=>[],this.getSnippetsSync=te}});function kc(i){return CA(i,!0)}var BQ=class{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Is(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===Oe.file)return vb(kc(e),kc(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(Oie(e.authority,t.authority))return vb(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return $.joinPath(e,...t)}basenameOrAuthority(e){return SEe(e)||e.authority}basename(e){return Mi.basename(e.path)}extname(e){return Mi.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Oe.file?t=$.file(tY(kc(e))).path:(t=Mi.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Oe.file?t=$.file(eY(kc(e))).path:t=Mi.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Oie(e.authority,t.authority))return;if(e.scheme===Oe.file){let r=Wne(kc(e),kc(t));return Mn?MY(r):r}let n=e.path||"/",o=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(let s=Math.min(n.length,o.length);r<s&&!(n.charCodeAt(r)!==o.charCodeAt(r)&&n.charAt(r).toLowerCase()!==o.charAt(r).toLowerCase());r++);n=o.substr(0,r)+n.substr(r)}return Mi.relative(n,o)}resolvePath(e,t){if(e.scheme===Oe.file){let n=$.file(Hne(kc(e),t));return e.with({authority:n.authority,path:n.path})}return t=vre(t),e.with({path:Mi.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&dg(e,t)}hasTrailingPathSeparator(e,t=Ss){if(e.scheme===Oe.file){let n=kc(e);return n.length>rk(n).length&&n[n.length-1]===t}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Ss){return Hie(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Ss){let n=!1;if(e.scheme===Oe.file){let o=kc(e);n=o!==void 0&&o.length===rk(o).length&&o[o.length-1]===t}else{t="/";let o=e.path;n=o.length===1&&o.charCodeAt(o.length-1)===47}return!n&&!Hie(e,t)?e.with({path:e.path+"/"}):e}},Oi=new BQ(()=>!1);Oi.isEqual.bind(Oi);Oi.isEqualOrParent.bind(Oi);Oi.getComparisonKey.bind(Oi);Oi.basenameOrAuthority.bind(Oi);var SEe=Oi.basename.bind(Oi);Oi.extname.bind(Oi);Oi.dirname.bind(Oi);Oi.joinPath.bind(Oi);Oi.normalizePath.bind(Oi);Oi.relativePath.bind(Oi);Oi.resolvePath.bind(Oi);Oi.isAbsolutePath.bind(Oi);var Oie=Oi.isEqualAuthority.bind(Oi),Hie=Oi.hasTrailingPathSeparator.bind(Oi);Oi.removeTrailingPathSeparator.bind(Oi);Oi.addTrailingPathSeparator.bind(Oi);function DEe(i,e,t){if(e){let n=i.path;return n&&n[0]!==Mi.sep&&(n=Mi.sep+n),i.with({scheme:t,authority:e,path:n})}return i.with({scheme:t})}var _u=ice,dF=Sf.FoldingRangeKind,Wie;(function(i){i[i.APPLICATION=1]="APPLICATION",i[i.MACHINE=2]="MACHINE",i[i.WINDOW=3]="WINDOW",i[i.RESOURCE=4]="RESOURCE",i[i.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",i[i.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(Wie||(Wie={}));var Fm="vscode://schemas/settings/resourceLanguage",mS=oi.as(ev.JSONContribution),PQ=class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new nt,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new nt,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:m("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},mS.registerSchema(Fm,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let n=this.doRegisterConfigurations(e,t);mS.registerSchema(Fm,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){let t=this.doDeregisterConfigurations(e);mS.registerSchema(Fm,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){let n=[];n.push(...this.doDeregisterConfigurations(t)),n.push(...this.doRegisterConfigurations(e,!1)),mS.registerSchema(Fm,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:br(n)})}registerDefaultConfigurations(e){let t=[],n=[];for(let{overrides:o,source:r}of e)for(let s in o)if(t.push(s),cA.test(s)){let a=this.configurationDefaultsOverrides.get(s),l=a?.valuesSources??new Map;if(r)for(let u of Object.keys(o[s]))l.set(u,r);let c={...a?.value||{},...o[s]};this.configurationDefaultsOverrides.set(s,{source:r,value:c,valuesSources:l});let d=Foe(s),h={type:"object",default:c,description:m("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",d),$ref:Fm,defaultDefaultValue:c,source:Ji(r)?void 0:r,defaultValueSource:r};n.push(...kEe(s)),this.configurationProperties[s]=h,this.defaultLanguageConfigurationOverridesNode.properties[s]=h}else{this.configurationDefaultsOverrides.set(s,{value:o[s],source:r});let a=this.configurationProperties[s];a&&(this.updatePropertyDefaultValue(s,a),this.updateSchema(s,a))}this.registerOverrideIdentifiers(n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}deregisterDefaultConfigurations(e){var t;let n=[];for(let{overrides:o,source:r}of e)for(let s in o){let a=this.configurationDefaultsOverrides.get(s),l=Ji(r)?r:r?.id,c=Ji(a?.source)?a?.source:(t=a?.source)==null?void 0:t.id;if(l===c)if(n.push(s),this.configurationDefaultsOverrides.delete(s),cA.test(s))delete this.configurationProperties[s],delete this.defaultLanguageConfigurationOverridesNode.properties[s];else{let d=this.configurationProperties[s];d&&(this.updatePropertyDefaultValue(s,d),this.updateSchema(s,d))}}this.updateOverridePropertyPatternKey(),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){let n=[];return e.forEach(o=>{n.push(...this.validateAndRegisterProperties(o,t,o.extensionInfo,o.restrictedProperties)),this.configurationContributors.push(o),this.registerJSONConfiguration(o)}),n}doDeregisterConfigurations(e){let t=[],n=o=>{var r,s;if(o.properties)for(let a in o.properties){t.push(a);let l=this.configurationProperties[a];(r=l?.policy)!=null&&r.name&&this.policyConfigurations.delete(l.policy.name),delete this.configurationProperties[a],this.removeFromSchema(a,o.properties[a])}(s=o.allOf)==null||s.forEach(a=>n(a))};for(let o of e){n(o);let r=this.configurationContributors.indexOf(o);r!==-1&&this.configurationContributors.splice(r,1)}return t}validateAndRegisterProperties(e,t=!0,n,o,r=3){var s;r=Uo(e.scope)?r:e.scope;let a=[],l=e.properties;if(l)for(let d in l){let h=l[d];if(t&&LEe(d,h)){delete l[d];continue}if(h.source=n,h.defaultDefaultValue=l[d].default,this.updatePropertyDefaultValue(d,h),cA.test(d)?h.scope=void 0:(h.scope=Uo(h.scope)?r:h.scope,h.restricted=Uo(h.restricted)?!!(o!=null&&o.includes(d)):h.restricted),l[d].hasOwnProperty("included")&&!l[d].included){this.excludedConfigurationProperties[d]=l[d],delete l[d];continue}else this.configurationProperties[d]=l[d],(s=l[d].policy)!=null&&s.name&&this.policyConfigurations.set(l[d].policy.name,d);!l[d].deprecationMessage&&l[d].markdownDeprecationMessage&&(l[d].deprecationMessage=l[d].markdownDeprecationMessage),a.push(d)}let c=e.allOf;if(c)for(let d of c)a.push(...this.validateAndRegisterProperties(d,t,n,o,r));return a}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getConfigurationDefaultsOverrides(){return this.configurationDefaultsOverrides}registerJSONConfiguration(e){let t=n=>{let o=n.properties;if(o)for(let s in o)this.updateSchema(s,o[s]);let r=n.allOf;r?.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:case 5:delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,n={type:"object",description:m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:m("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Fm};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.configurationDefaultsOverrides.get(e),o=n?.value,r=n?.source;jo(o)&&(o=t.defaultDefaultValue,r=void 0),jo(o)&&(o=EEe(t.type)),t.default=o,t.defaultValueSource=r}},pce="\\[([^\\]]+)\\]",zie=new RegExp(pce,"g"),xEe=`^(${pce})+$`,cA=new RegExp(xEe);function kEe(i){let e=[];if(cA.test(i)){let t=zie.exec(i);for(;t!=null&&t.length;){let n=t[1].trim();n&&e.push(n),t=zie.exec(i)}}return br(e)}function EEe(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var tD=new PQ;function LEe(i,e){var t,n,o,r;return i.trim()?cA.test(i)?m("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):tD.getConfigurationProperties()[i]!==void 0?m("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):(t=e.policy)!=null&&t.name&&tD.getPolicyConfigurations().get((n=e.policy)==null?void 0:n.name)!==void 0?m("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,(o=e.policy)==null?void 0:o.name,tD.getPolicyConfigurations().get((r=e.policy)==null?void 0:r.name)):null:m("config.property.empty","Cannot register an empty property")}function IEe(){let i=[],e=tD.getConfigurationProperties();for(let t of Object.keys(e))i.push([t,e[t].scope]);return i.push(["launch",4]),i.push(["task",4]),i}var TEe=tce,MEe=/^(.+)\/(.+?)(;.+)?$/;function mce(i,e){let t=MEe.exec(i);return t?`${t[1].toLowerCase()}/${t[2].toLowerCase()}${t[3]??""}`:e?void 0:i}var Vie=G6.marked;function NEe(i,e){let t=[],n=[];for(let o of i)e.has(o)||t.push(o);for(let o of e)i.has(o)||n.push(o);return{removed:t,added:n}}function REe(i,e){let t=[],n=[];for(let[o,r]of i)e.has(o)||t.push(r);for(let[o,r]of e)i.has(o)||n.push(r);return{removed:t,added:n}}var OQ=class{constructor(){this._next=0}getNext(){return this._next++}},$m,hr,Ud,fce,_ce,HQ,zu,Tc,WQ,Vu,Yd,Uu,zQ,VQ,iD,_1,UQ,Tl,wl,QQ,kr,jQ;function it(i){function e(){return Reflect.construct(i,arguments,this.constructor)}return Object.defineProperty(e,"name",Object.getOwnPropertyDescriptor(i,"name")),Object.setPrototypeOf(e,i),Object.setPrototypeOf(e.prototype,i.prototype),e}var ia=HQ=class{constructor(i){$m.set(this,void 0),Th(this,$m,i,"f")}static from(...i){let e=i;return new HQ(function(){if(e){for(let t of e)t&&typeof t.dispose=="function"&&t.dispose();e=void 0}})}dispose(){typeof vt(this,$m,"f")=="function"&&(vt(this,$m,"f").call(this),Th(this,$m,void 0,"f"))}};$m=new WeakMap;ia=HQ=Ne([it],ia);var ti=zu=class{constructor(i,e){if(i<0)throw Nt("line must be non-negative");if(e<0)throw Nt("character must be non-negative");this._line=i,this._character=e}static Min(...i){if(i.length===0)throw new TypeError;let e=i[0];for(let t=1;t<i.length;t++){let n=i[t];n.isBefore(e)&&(e=n)}return e}static Max(...i){if(i.length===0)throw new TypeError;let e=i[0];for(let t=1;t<i.length;t++){let n=i[t];n.isAfter(e)&&(e=n)}return e}static isPosition(i){if(!i)return!1;if(i instanceof zu)return!0;let{line:e,character:t}=i;return typeof e=="number"&&typeof t=="number"}static of(i){if(i instanceof zu)return i;if(this.isPosition(i))return new zu(i.line,i.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this._line}get character(){return this._character}isBefore(i){return this._line<i._line?!0:i._line<this._line?!1:this._character<i._character}isBeforeOrEqual(i){return this._line<i._line?!0:i._line<this._line?!1:this._character<=i._character}isAfter(i){return!this.isBeforeOrEqual(i)}isAfterOrEqual(i){return!this.isBefore(i)}isEqual(i){return this._line===i._line&&this._character===i._character}compareTo(i){return this._line<i._line?-1:this._line>i.line?1:this._character<i._character?-1:this._character>i._character?1:0}translate(i,e=0){if(i===null||e===null)throw Nt();let t;return typeof i>"u"?t=0:typeof i=="number"?t=i:(t=typeof i.lineDelta=="number"?i.lineDelta:0,e=typeof i.characterDelta=="number"?i.characterDelta:0),t===0&&e===0?this:new zu(this.line+t,this.character+e)}with(i,e=this.character){if(i===null||e===null)throw Nt();let t;return typeof i>"u"?t=this.line:typeof i=="number"?t=i:(t=typeof i.line=="number"?i.line:this.line,e=typeof i.character=="number"?i.character:this.character),t===this.line&&e===this.character?this:new zu(t,e)}toJSON(){return{line:this.line,character:this.character}}};ti=zu=Ne([it],ti);var Zt=Tc=class{constructor(i,e,t,n){let o,r;if(typeof i=="number"&&typeof e=="number"&&typeof t=="number"&&typeof n=="number"?(o=new ti(i,e),r=new ti(t,n)):ti.isPosition(i)&&ti.isPosition(e)&&(o=ti.of(i),r=ti.of(e)),!o||!r)throw new Error("Invalid arguments");o.isBefore(r)?(this._start=o,this._end=r):(this._start=r,this._end=o)}static isRange(i){return i instanceof Tc?!0:i?ti.isPosition(i.start)&&ti.isPosition(i.end):!1}static of(i){if(i instanceof Tc)return i;if(this.isRange(i))return new Tc(i.start,i.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this._start}get end(){return this._end}contains(i){return Tc.isRange(i)?this.contains(i.start)&&this.contains(i.end):ti.isPosition(i)?!(ti.of(i).isBefore(this._start)||this._end.isBefore(i)):!1}isEqual(i){return this._start.isEqual(i._start)&&this._end.isEqual(i._end)}intersection(i){let e=ti.Max(i.start,this._start),t=ti.Min(i.end,this._end);if(!e.isAfter(t))return new Tc(e,t)}union(i){if(this.contains(i))return this;if(i.contains(this))return i;let e=ti.Min(i.start,this._start),t=ti.Max(i.end,this.end);return new Tc(e,t)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(i,e=this.end){if(i===null||e===null)throw Nt();let t;return i?ti.isPosition(i)?t=i:(t=i.start||this.start,e=i.end||this.end):t=this.start,t.isEqual(this._start)&&e.isEqual(this.end)?this:new Tc(t,e)}toJSON(){return[this.start,this.end]}};Zt=Tc=Ne([it],Zt);var H0=WQ=class extends Zt{constructor(i,e,t,n){let o,r;if(typeof i=="number"&&typeof e=="number"&&typeof t=="number"&&typeof n=="number"?(o=new ti(i,e),r=new ti(t,n)):ti.isPosition(i)&&ti.isPosition(e)&&(o=ti.of(i),r=ti.of(e)),!o||!r)throw new Error("Invalid arguments");super(o,r),this._anchor=o,this._active=r}static isSelection(i){return i instanceof WQ?!0:i?Zt.isRange(i)&&ti.isPosition(i.anchor)&&ti.isPosition(i.active)&&typeof i.isReversed=="boolean":!1}get anchor(){return this._anchor}get active(){return this._active}get isReversed(){return this._anchor===this._end}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}};H0=WQ=Ne([it],H0);var $a;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})($a||($a={}));var KQ;(function(i){i[i.Replace=1]="Replace",i[i.Append=2]="Append",i[i.Prepend=3]="Prepend"})(KQ||(KQ={}));var Xw=Vu=class{constructor(i,e){this._range=i,this._newText=e}static isTextEdit(i){return i instanceof Vu?!0:i?Zt.isRange(i)&&typeof i.newText=="string":!1}static replace(i,e){return new Vu(i,e)}static insert(i,e){return Vu.replace(new Zt(i,i),e)}static delete(i){return Vu.replace(i,"")}static setEndOfLine(i){let e=new Vu(new Zt(new ti(0,0),new ti(0,0)),"");return e.newEol=i,e}get range(){return this._range}set range(i){if(i&&!Zt.isRange(i))throw Nt("range");this._range=i}get newText(){return this._newText||""}set newText(i){if(i&&typeof i!="string")throw Nt("newText");this._newText=i}get newEol(){return this._newEol}set newEol(i){if(i&&typeof i!="number")throw Nt("newEol");this._newEol=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};Xw=Vu=Ne([it],Xw);var qQ=Yd=class{constructor(i,e){this.range=i,this.newCells=e}static isNotebookCellEdit(i){return i instanceof Yd?!0:i?Pl.isNotebookRange(i)&&Array.isArray(i.newCells):!1}static replaceCells(i,e){return new Yd(i,e)}static insertCells(i,e){return new Yd(new Pl(i,i),e)}static deleteCells(i){return new Yd(i,[])}static updateCellMetadata(i,e){let t=new Yd(new Pl(i,i),[]);return t.newCellMetadata=e,t}static updateNotebookMetadata(i){let e=new Yd(new Pl(0,0),[]);return e.newNotebookMetadata=i,e}};qQ=Yd=Ne([it],qQ);var Zw=class{constructor(){this._edits=[]}_allEntries(){return this._edits}renameFile(i,e,t,n){this._edits.push({_type:1,from:i,to:e,options:t,metadata:n})}createFile(i,e,t){this._edits.push({_type:1,from:void 0,to:i,options:e,metadata:t})}deleteFile(i,e,t){this._edits.push({_type:1,from:i,to:void 0,options:e,metadata:t})}replaceNotebookMetadata(i,e,t){this._edits.push({_type:3,metadata:t,uri:i,edit:{editType:5,metadata:e},notebookMetadata:e})}replaceNotebookCells(i,e,t,n,o){let r,s,a=[],l;if(Pl.isNotebookRange(e)&&Qg.isNotebookCellDataArray(t)&&!Qg.isNotebookCellDataArray(n)?(r=e.start,s=e.end,a=t,l=n):typeof e=="number"&&typeof t=="number"&&Qg.isNotebookCellDataArray(n)&&(r=e,s=t,a=n,l=o),r===void 0||s===void 0)throw new Error("Invalid arguments");(r!==s||a.length>0)&&this._edits.push({_type:5,uri:i,index:r,count:s-r,cells:a,metadata:l})}replaceNotebookCellMetadata(i,e,t,n){this._edits.push({_type:3,metadata:n,uri:i,edit:{editType:8,index:e,metadata:t}})}replace(i,e,t,n){typeof t=="string"?this._edits.push({_type:2,uri:i,edit:new Xw(e,t),metadata:n}):this._edits.push({_type:6,uri:i,range:e,edit:t,metadata:n})}insert(i,e,t,n){this.replace(i,new Zt(e,e),t,n)}delete(i,e,t){this.replace(i,e,"",t)}has(i){return this._edits.some(e=>e._type===2&&e.uri.toString()===i.toString())}set(i,e){if(e)for(let t of e)t&&(qQ.isNotebookCellEdit(t)?t.newCellMetadata?this.replaceNotebookCellMetadata(i,t.range.start,t.newCellMetadata):t.newNotebookMetadata?this.replaceNotebookMetadata(i,t.newNotebookMetadata):this.replaceNotebookCells(i,t.range,t.newCells):this._edits.push({_type:2,uri:i,edit:t}));else{for(let t=0;t<this._edits.length;t++){let n=this._edits[t];n._type===2&&n.uri.toString()===i.toString()&&(this._edits[t]=void 0)}Lke(this._edits)}}get(i){let e=[];for(let t of this._edits)t._type===2&&t.uri.toString()===i.toString()&&e.push(t.edit);return e}entries(){let i=new en;for(let e of this._edits)if(e._type===2){let t=i.get(e.uri);t||(t=[e.uri,[]],i.set(e.uri,t)),t[1].push(e.edit)}return[...i.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Zw=Ne([it],Zw);var PI=Uu=class{constructor(i){this._tabstop=1,this.value=i||""}static isSnippetString(i){return i instanceof Uu?!0:i?typeof i.value=="string":!1}static _escape(i){return i.replace(/\$|}|\\/g,"\\$&")}appendText(i){return this.value+=Uu._escape(i),this}appendTabstop(i=this._tabstop++){return this.value+="$",this.value+=i,this}appendPlaceholder(i,e=this._tabstop++){if(typeof i=="function"){let t=new Uu;t._tabstop=this._tabstop,i(t),this._tabstop=t._tabstop,i=t.value}else i=Uu._escape(i);return this.value+="${",this.value+=e,this.value+=":",this.value+=i,this.value+="}",this}appendChoice(i,e=this._tabstop++){let t=i.map(n=>n.replace(/\$|}|\\|,/g,"\\$&")).join(",");return this.value+="${",this.value+=e,this.value+="|",this.value+=t,this.value+="|}",this}appendVariable(i,e){if(typeof e=="function"){let t=new Uu;t._tabstop=this._tabstop,e(t),this._tabstop=t._tabstop,e=t.value}else typeof e=="string"&&(e=e.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=i,e&&(this.value+=":",this.value+=e),this.value+="}",this}};PI=Uu=Ne([it],PI);var Ag;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(Ag||(Ag={}));var zo;(function(i){i[i.Hint=3]="Hint",i[i.Information=2]="Information",i[i.Warning=1]="Warning",i[i.Error=0]="Error"})(zo||(zo={}));var Td=zQ=class{constructor(i,e){if(this.uri=i,e)if(Zt.isRange(e))this.range=Zt.of(e);else if(ti.isPosition(e))this.range=new Zt(e,e);else throw new Error("Illegal argument")}static isLocation(i){return i instanceof zQ?!0:i?Zt.isRange(i.range)&&$.isUri(i.uri):!1}toJSON(){return{uri:this.uri,range:this.range}}};Td=zQ=Ne([it],Td);var eC=class{constructor(i,e){this.location=i,this.message=e}static is(i){return i?typeof i.message=="string"&&i.location&&Zt.isRange(i.location.range)&&$.isUri(i.location.uri):!1}static isEqual(i,e){return i===e?!0:!i||!e?!1:i.message===e.message&&i.location.range.isEqual(e.location.range)&&i.location.uri.toString()===e.location.uri.toString()}};eC=Ne([it],eC);var OI=class{constructor(i,e,t=zo.Error){if(!Zt.isRange(i))throw new TypeError("range must be set");if(!e)throw new TypeError("message must be set");this.range=i,this.message=e,this.severity=t}toJSON(){return{severity:zo[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(i,e){return i===e?!0:!i||!e?!1:i.message===e.message&&i.severity===e.severity&&i.code===e.code&&i.severity===e.severity&&i.source===e.source&&i.range.isEqual(e.range)&&Zn(i.tags,e.tags)&&Zn(i.relatedInformation,e.relatedInformation,eC.isEqual)}};OI=Ne([it],OI);var HI=class{constructor(i,e){if(!i)throw new Error("Illegal argument, contents must be defined");Array.isArray(i)?this.contents=i:this.contents=[i],this.range=e}};HI=Ne([it],HI);var tC;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(tC||(tC={}));var WI=class{constructor(i,e=tC.Text){this.range=i,this.kind=e}toJSON(){return{range:this.range,kind:tC[this.kind]}}};WI=Ne([it],WI);var zi;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(zi||(zi={}));var iC;(function(i){i[i.Deprecated=1]="Deprecated"})(iC||(iC={}));var zI=VQ=class{constructor(i,e,t,n,o){this.name=i,this.kind=e,this.containerName=o,typeof t=="string"&&(this.containerName=t),n instanceof Td?this.location=n:t instanceof Zt&&(this.location=new Td(n,t)),VQ.validate(this)}static validate(i){if(!i.name)throw new Error("name must not be falsy")}toJSON(){return{name:this.name,kind:zi[this.kind],location:this.location,containerName:this.containerName}}};zI=VQ=Ne([it],zI);var nC=iD=class{constructor(i,e,t,n,o){this.name=i,this.detail=e,this.kind=t,this.range=n,this.selectionRange=o,this.children=[],iD.validate(this)}static validate(i){var e;if(!i.name)throw new Error("name must not be falsy");if(!i.range.contains(i.selectionRange))throw new Error("selectionRange must be contained in fullRange");(e=i.children)==null||e.forEach(iD.validate)}};nC=iD=Ne([it],nC);var oC;(function(i){i[i.Invoke=1]="Invoke",i[i.Automatic=2]="Automatic"})(oC||(oC={}));var $Q=class{constructor(i,e){this.title=i,this.kind=e}};$Q=Ne([it],$Q);var Rn=_1=class{constructor(i){this.value=i}append(i){return new _1(this.value?this.value+_1.sep+i:i)}intersects(i){return this.contains(i)||i.contains(this)}contains(i){return this.value===i.value||i.value.startsWith(this.value+_1.sep)}};Rn.sep=".";Rn=_1=Ne([it],Rn);Rn.Empty=new Rn("");Rn.QuickFix=Rn.Empty.append("quickfix");Rn.Refactor=Rn.Empty.append("refactor");Rn.RefactorExtract=Rn.Refactor.append("extract");Rn.RefactorInline=Rn.Refactor.append("inline");Rn.RefactorRewrite=Rn.Refactor.append("rewrite");Rn.Source=Rn.Empty.append("source");Rn.SourceOrganizeImports=Rn.Source.append("organizeImports");Rn.SourceFixAll=Rn.Source.append("fixAll");var VI=class{constructor(i,e){if(this.range=i,this.parent=e,e&&!e.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};VI=Ne([it],VI);var UI=class{constructor(e,t,n,o,r,s){this.kind=e,this.name=t,this.detail=n,this.uri=o,this.range=r,this.selectionRange=s}},FEe=class{constructor(i,e){this.fromRanges=e,this.from=i}},BEe=class{constructor(i,e){this.fromRanges=e,this.to=i}},a_;(function(i){i[i.Information=0]="Information",i[i.Warning=1]="Warning",i[i.Error=2]="Error"})(a_||(a_={}));var GQ=class{constructor(i,e){this.range=i,this.command=e}get isResolved(){return!!this.command}};GQ=Ne([it],GQ);var W0=UQ=class{constructor(i,e=!1){hr.set(this,void 0),Th(this,hr,new Zo(i,{supportThemeIcons:e}),"f")}static isMarkdownString(i){return i instanceof UQ?!0:i&&i.appendCodeblock&&i.appendMarkdown&&i.appendText&&i.value!==void 0}get value(){return vt(this,hr,"f").value}set value(i){vt(this,hr,"f").value=i}get isTrusted(){return vt(this,hr,"f").isTrusted}set isTrusted(i){vt(this,hr,"f").isTrusted=i}get supportThemeIcons(){return vt(this,hr,"f").supportThemeIcons}set supportThemeIcons(i){vt(this,hr,"f").supportThemeIcons=i}get supportHtml(){return vt(this,hr,"f").supportHtml}set supportHtml(i){vt(this,hr,"f").supportHtml=i}get baseUri(){return vt(this,hr,"f").baseUri}set baseUri(i){vt(this,hr,"f").baseUri=i}appendText(i){return vt(this,hr,"f").appendText(i),this}appendMarkdown(i){return vt(this,hr,"f").appendMarkdown(i),this}appendCodeblock(i,e){return vt(this,hr,"f").appendCodeblock(e??"",i),this}};hr=new WeakMap;W0=UQ=Ne([it],W0);var YQ=class{constructor(i,e){this.label=i,this.documentation=e}};YQ=Ne([it],YQ);var JQ=class{constructor(i,e){this.label=i,this.documentation=e,this.parameters=[]}};JQ=Ne([it],JQ);var XQ=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};XQ=Ne([it],XQ);var ZQ;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(ZQ||(ZQ={}));var ej;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(ej||(ej={}));var tj=class{constructor(i){this.value=i}};tj=Ne([it],tj);var ij=class{constructor(i,e,t){this.position=i,this.label=e,this.kind=t}};ij=Ne([it],ij);var l_;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(l_||(l_={}));var lt;(function(i){i[i.Text=0]="Text",i[i.Method=1]="Method",i[i.Function=2]="Function",i[i.Constructor=3]="Constructor",i[i.Field=4]="Field",i[i.Variable=5]="Variable",i[i.Class=6]="Class",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Unit=10]="Unit",i[i.Value=11]="Value",i[i.Enum=12]="Enum",i[i.Keyword=13]="Keyword",i[i.Snippet=14]="Snippet",i[i.Color=15]="Color",i[i.File=16]="File",i[i.Reference=17]="Reference",i[i.Folder=18]="Folder",i[i.EnumMember=19]="EnumMember",i[i.Constant=20]="Constant",i[i.Struct=21]="Struct",i[i.Event=22]="Event",i[i.Operator=23]="Operator",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue"})(lt||(lt={}));var rC;(function(i){i[i.Deprecated=1]="Deprecated"})(rC||(rC={}));var nj=class{constructor(i,e){this.label=i,this.kind=e}toJSON(){return{label:this.label,kind:this.kind&&lt[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};nj=Ne([it],nj);var QI=class{constructor(i=[],e=!1){this.items=i,this.isIncomplete=e}};QI=Ne([it],QI);var oj=class{constructor(i,e,t){this.insertText=i,this.range=e,this.command=t}};oj=Ne([it],oj);var rj=class{constructor(i){this.commands=void 0,this.items=i}};rj=Ne([it],rj);var z0;(function(i){i[i.Active=-1]="Active",i[i.Beside=-2]="Beside",i[i.One=1]="One",i[i.Two=2]="Two",i[i.Three=3]="Three",i[i.Four=4]="Four",i[i.Five=5]="Five",i[i.Six=6]="Six",i[i.Seven=7]="Seven",i[i.Eight=8]="Eight",i[i.Nine=9]="Nine"})(z0||(z0={}));var sj;(function(i){i[i.Left=1]="Left",i[i.Right=2]="Right"})(sj||(sj={}));var Qc;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative"})(Qc||(Qc={}));var aj;(function(i){i[i.Manual=1]="Manual",i[i.AfterDelay=2]="AfterDelay",i[i.FocusOut=3]="FocusOut"})(aj||(aj={}));var jI;(function(i){i[i.Default=0]="Default",i[i.InCenter=1]="InCenter",i[i.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",i[i.AtTop=3]="AtTop"})(jI||(jI={}));var V0;(function(i){i[i.Keyboard=1]="Keyboard",i[i.Mouse=2]="Mouse",i[i.Command=3]="Command"})(V0||(V0={}));var sC;(function(i){i[i.Undo=1]="Undo",i[i.Redo=2]="Redo"})(sC||(sC={}));var bg;(function(i){i[i.OpenOpen=0]="OpenOpen",i[i.ClosedClosed=1]="ClosedClosed",i[i.OpenClosed=2]="OpenClosed",i[i.ClosedOpen=3]="ClosedOpen"})(bg||(bg={}));(function(i){function e(t){switch(t){case"keyboard":return i.Keyboard;case"mouse":return i.Mouse;case"api":return i.Command}}i.fromValue=e})(V0||(V0={}));var KI=class{constructor(i,e){if(e&&!$.isUri(e))throw Nt("target");if(!Zt.isRange(i)||i.isEmpty)throw Nt("range");this.range=i,this.target=e}};KI=Ne([it],KI);var aC=class{constructor(i,e,t,n){this.red=i,this.green=e,this.blue=t,this.alpha=n}};aC=Ne([it],aC);var lj=class{constructor(i,e){if(e&&!(e instanceof aC))throw Nt("color");if(!Zt.isRange(i)||i.isEmpty)throw Nt("range");this.range=i,this.color=e}};lj=Ne([it],lj);var qI=class{constructor(i){if(!i||typeof i!="string")throw Nt("label");this.label=i}};qI=Ne([it],qI);var PEe=class{constructor(i,e,t){if(this.startIndex=i,this.length=e,this.tooltip=t,typeof i!="number"||i<0)throw Nt("startIndex");if(typeof e!="number"||e<1)throw Nt("length");if(t!==void 0&&typeof t!="string")throw Nt("tooltip")}},cj;(function(i){i[i.Panel=1]="Panel",i[i.Editor=2]="Editor"})(cj||(cj={}));var OEe=class{constructor(i){if(this.options=i,typeof i!="object")throw Nt("options")}},dj;(function(i){i[i.Always=1]="Always",i[i.Silent=2]="Silent",i[i.Never=3]="Never"})(dj||(dj={}));var hj;(function(i){i[i.Shared=1]="Shared",i[i.Dedicated=2]="Dedicated",i[i.New=3]="New"})(hj||(hj={}));var qp=Tl=class{constructor(i,e){if(this.label=e,typeof i!="string"||typeof e!="string")throw Nt("name");this._id=i}static from(i){switch(i){case"clean":return Tl.Clean;case"build":return Tl.Build;case"rebuild":return Tl.Rebuild;case"test":return Tl.Test;default:return}}get id(){return this._id}};qp.Clean=new Tl("clean","Clean");qp.Build=new Tl("build","Build");qp.Rebuild=new Tl("rebuild","Rebuild");qp.Test=new Tl("test","Test");qp=Tl=Ne([it],qp);function vce(i){let e="";for(let t=0;t<i.length;t++)e+=i[t].replace(/,/g,",,")+",";return e}var $I=class{constructor(i,e,t){if(typeof i!="string")throw Nt("process");this._args=[],this._process=i,e!==void 0&&(Array.isArray(e)?(this._args=e,this._options=t):this._options=e)}get process(){return this._process}set process(i){if(typeof i!="string")throw Nt("process");this._process=i}get args(){return this._args}set args(i){Array.isArray(i)||(i=[]),this._args=i}get options(){return this._options}set options(i){this._options=i}computeId(){let i=[];if(i.push("process"),this._process!==void 0&&i.push(this._process),this._args&&this._args.length>0)for(let e of this._args)i.push(e);return vce(i)}};$I=Ne([it],$I);var GI=class{constructor(i,e,t){if(this._args=[],Array.isArray(e)){if(!i)throw Nt("command can't be undefined or null");if(typeof i!="string"&&typeof i.value!="string")throw Nt("command");this._command=i,this._args=e,this._options=t}else{if(typeof i!="string")throw Nt("commandLine");this._commandLine=i,this._options=e}}get commandLine(){return this._commandLine}set commandLine(i){if(typeof i!="string")throw Nt("commandLine");this._commandLine=i}get command(){return this._command?this._command:""}set command(i){if(typeof i!="string"&&typeof i.value!="string")throw Nt("command");this._command=i}get args(){return this._args}set args(i){this._args=i||[]}get options(){return this._options}set options(i){this._options=i}computeId(){let i=[];if(i.push("shell"),this._commandLine!==void 0&&i.push(this._commandLine),this._command!==void 0&&i.push(typeof this._command=="string"?this._command:this._command.value),this._args&&this._args.length>0)for(let e of this._args)i.push(typeof e=="string"?e:e.value);return vce(i)}};GI=Ne([it],GI);var uj;(function(i){i[i.Escape=1]="Escape",i[i.Strong=2]="Strong",i[i.Weak=3]="Weak"})(uj||(uj={}));var lC;(function(i){i[i.Global=1]="Global",i[i.Workspace=2]="Workspace"})(lC||(lC={}));var Ace=class{constructor(i){this._callback=i}computeId(){return"customExecution"+um()}set callback(i){this._callback=i}get callback(){return this._callback}},$p=wl=class{constructor(i,e,t,n,o,r){this.__deprecated=!1,this._definition=this.definition=i;let s;typeof e=="string"?(this._name=this.name=e,this._source=this.source=t,this.execution=n,s=o,this.__deprecated=!0):e===lC.Global||e===lC.Workspace?(this.target=e,this._name=this.name=t,this._source=this.source=n,this.execution=o,s=r):(this.target=e,this._name=this.name=t,this._source=this.source=n,this.execution=o,s=r),typeof s=="string"?(this._problemMatchers=[s],this._hasDefinedMatchers=!0):Array.isArray(s)?(this._problemMatchers=s,this._hasDefinedMatchers=!0):(this._problemMatchers=[],this._hasDefinedMatchers=!1),this._isBackground=!1,this._presentationOptions=Object.create(null),this._runOptions=Object.create(null)}get _id(){return this.__id}set _id(i){this.__id=i}get _deprecated(){return this.__deprecated}clear(){this.__id!==void 0&&(this.__id=void 0,this._scope=void 0,this.computeDefinitionBasedOnExecution())}computeDefinitionBasedOnExecution(){this._execution instanceof $I?this._definition={type:wl.ProcessType,id:this._execution.computeId()}:this._execution instanceof GI?this._definition={type:wl.ShellType,id:this._execution.computeId()}:this._execution instanceof Ace?this._definition={type:wl.ExtensionCallbackType,id:this._execution.computeId()}:this._definition={type:wl.EmptyType,id:um()}}get definition(){return this._definition}set definition(i){if(i==null)throw Nt("Kind can't be undefined or null");this.clear(),this._definition=i}get scope(){return this._scope}set target(i){this.clear(),this._scope=i}get name(){return this._name}set name(i){if(typeof i!="string")throw Nt("name");this.clear(),this._name=i}get execution(){return this._execution}set execution(i){i===null&&(i=void 0),this.clear(),this._execution=i;let e=this._definition.type;(wl.EmptyType===e||wl.ProcessType===e||wl.ShellType===e||wl.ExtensionCallbackType===e)&&this.computeDefinitionBasedOnExecution()}get problemMatchers(){return this._problemMatchers}set problemMatchers(i){if(Array.isArray(i))this.clear(),this._problemMatchers=i,this._hasDefinedMatchers=!0;else{this.clear(),this._problemMatchers=[],this._hasDefinedMatchers=!1;return}}get hasDefinedMatchers(){return this._hasDefinedMatchers}get isBackground(){return this._isBackground}set isBackground(i){i!==!0&&i!==!1&&(i=!1),this.clear(),this._isBackground=i}get source(){return this._source}set source(i){if(typeof i!="string"||i.length===0)throw Nt("source must be a string of length > 0");this.clear(),this._source=i}get group(){return this._group}set group(i){i===null&&(i=void 0),this.clear(),this._group=i}get detail(){return this._detail}set detail(i){i===null&&(i=void 0),this._detail=i}get presentationOptions(){return this._presentationOptions}set presentationOptions(i){i==null&&(i=Object.create(null)),this.clear(),this._presentationOptions=i}get runOptions(){return this._runOptions}set runOptions(i){i==null&&(i=Object.create(null)),this.clear(),this._runOptions=i}};$p.ExtensionCallbackType="customExecution";$p.ProcessType="process";$p.ShellType="shell";$p.EmptyType="$empty";$p=wl=Ne([it],$p);var Ug;(function(i){i[i.SourceControl=1]="SourceControl",i[i.Window=10]="Window",i[i.Notification=15]="Notification"})(Ug||(Ug={}));var gj=QQ=class{constructor(i,e=c_.None){this.collapsibleState=e,$.isUri(i)?this.resourceUri=i:this.label=i}static isTreeItem(i){if(i instanceof QQ)return!0;let e=i;return e.label!==void 0&&!Ji(e.label)&&!e.label.label?(console.log("INVALID tree item, invalid label",e.label),!1):e.id!==void 0&&!Ji(e.id)?(console.log("INVALID tree item, invalid id",e.id),!1):e.iconPath!==void 0&&!Ji(e.iconPath)&&!$.isUri(e.iconPath)&&!Ji(e.iconPath.id)?(console.log("INVALID tree item, invalid iconPath",e.iconPath),!1):e.description!==void 0&&!Ji(e.description)&&typeof e.description!="boolean"?(console.log("INVALID tree item, invalid description",e.description),!1):e.resourceUri!==void 0&&!$.isUri(e.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",e.resourceUri),!1):e.tooltip!==void 0&&!Ji(e.tooltip)&&!(e.tooltip instanceof W0)?(console.log("INVALID tree item, invalid tooltip",e.tooltip),!1):e.command!==void 0&&!e.command.command?(console.log("INVALID tree item, invalid command",e.command),!1):e.collapsibleState!==void 0&&e.collapsibleState<c_.None&&e.collapsibleState>c_.Expanded?(console.log("INVALID tree item, invalid collapsibleState",e.collapsibleState),!1):e.contextValue!==void 0&&!Ji(e.contextValue)?(console.log("INVALID tree item, invalid contextValue",e.contextValue),!1):e.accessibilityInformation!==void 0&&!e.accessibilityInformation.label?(console.log("INVALID tree item, invalid accessibilityInformation",e.accessibilityInformation),!1):!0}};gj=QQ=Ne([it],gj);var c_;(function(i){i[i.None=0]="None",i[i.Collapsed=1]="Collapsed",i[i.Expanded=2]="Expanded"})(c_||(c_={}));var YI=class{constructor(i){this.value=i}async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}};YI=Ne([it],YI);var pj=class{constructor(i){Ud.set(this,new Map);for(let[e,t]of i??[]){let n=vt(this,Ud,"f").get(e);n?n.push(t):vt(this,Ud,"f").set(e,[t])}}get(i){var e;return(e=vt(this,Ud,"f").get(i))==null?void 0:e[0]}set(i,e){vt(this,Ud,"f").set(i,[e])}forEach(i,e){for(let[t,n]of vt(this,Ud,"f"))for(let o of n)i.call(e,o,t,this)}*[(Ud=new WeakMap,Symbol.iterator)](){for(let[i,e]of vt(this,Ud,"f"))for(let t of e)yield[i,t]}};pj=Ne([it],pj);var mj=class{constructor(i){this.insertText=i}};mj=Ne([it],mj);var Md=class{constructor(i,e){this.id=i,this.color=e}};Md=Ne([it],Md);Md.File=new Md("file");Md.Folder=new Md("folder");var fj=class{constructor(i){this.id=i}};fj=Ne([it],fj);var d_;(function(i){i[i.Global=1]="Global",i[i.Workspace=2]="Workspace",i[i.WorkspaceFolder=3]="WorkspaceFolder"})(d_||(d_={}));var h_=class{constructor(i,e){if(typeof i!="string"&&(!i||!$.isUri(i)&&!$.isUri(i.uri)))throw Nt("base");if(typeof e!="string")throw Nt("pattern");typeof i=="string"?this.baseUri=$.file(i):$.isUri(i)?this.baseUri=i:this.baseUri=i.uri,this.pattern=e}get base(){return this._base}set base(i){this._base=i,this._baseUri=$.file(i)}get baseUri(){return this._baseUri}set baseUri(i){this._baseUri=i,this._base=i.fsPath}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};h_=Ne([it],h_);var cC=class{constructor(i,e,t,n){this.enabled=typeof i=="boolean"?i:!0,typeof e=="string"&&(this.condition=e),typeof t=="string"&&(this.hitCondition=t),typeof n=="string"&&(this.logMessage=n)}get id(){return this._id||(this._id=um()),this._id}};cC=Ne([it],cC);var _j=class extends cC{constructor(i,e,t,n,o){if(super(e,t,n,o),i===null)throw Nt("location");this.location=i}};_j=Ne([it],_j);var vj=class extends cC{constructor(i,e,t,n,o){super(e,t,n,o),this.functionName=i}};vj=Ne([it],vj);var Aj=class{constructor(i,e,t){this.command=i,this.args=e||[],this.options=t}};Aj=Ne([it],Aj);var bj=class{constructor(i,e){this.port=i,this.host=e}};bj=Ne([it],bj);var wj=class{constructor(i){this.path=i}};wj=Ne([it],wj);var Cj=class{constructor(i){this.implementation=i}};Cj=Ne([it],Cj);var JI=class{constructor(i,e){this.range=i,this.expression=e}};JI=Ne([it],JI);var dC;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(dC||(dC={}));var XI;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(XI||(XI={}));var ZI=class{constructor(i,e){this.range=i,this.text=e}};ZI=Ne([it],ZI);var eT=class{constructor(i,e,t=!0){this.range=i,this.variableName=e,this.caseSensitiveLookup=t}};eT=Ne([it],eT);var tT=class{constructor(i,e){this.range=i,this.expression=e}};tT=Ne([it],tT);var yj=class{constructor(i,e){this.frameId=i,this.stoppedLocation=e}};yj=Ne([it],yj);var Sj;(function(i){i[i.Changed=1]="Changed",i[i.Created=2]="Created",i[i.Deleted=3]="Deleted"})(Sj||(Sj={}));var Dj=kr=class extends Error{constructor(i,e=Oc.Unknown,t){super($.isUri(i)?i.toString(!0):i),this.code=t?.name??"Unknown",Xke(this,e),typeof Object.setPrototypeOf=="function"&&Object.setPrototypeOf(this,kr.prototype),typeof Error.captureStackTrace=="function"&&typeof t=="function"&&Error.captureStackTrace(this,t)}static FileExists(i){return new kr(i,Oc.FileExists,kr.FileExists)}static FileNotFound(i){return new kr(i,Oc.FileNotFound,kr.FileNotFound)}static FileNotADirectory(i){return new kr(i,Oc.FileNotADirectory,kr.FileNotADirectory)}static FileIsADirectory(i){return new kr(i,Oc.FileIsADirectory,kr.FileIsADirectory)}static NoPermissions(i){return new kr(i,Oc.NoPermissions,kr.NoPermissions)}static Unavailable(i){return new kr(i,Oc.Unavailable,kr.Unavailable)}};Dj=kr=Ne([it],Dj);var xj=class{constructor(i,e,t){this.start=i,this.end=e,this.kind=t}};xj=Ne([it],xj);var u_;(function(i){i[i.Comment=1]="Comment",i[i.Imports=2]="Imports",i[i.Region=3]="Region"})(u_||(u_={}));var kj;(function(i){i[i.Collapsed=0]="Collapsed",i[i.Expanded=1]="Expanded"})(kj||(kj={}));var Ej;(function(i){i[i.Editing=0]="Editing",i[i.Preview=1]="Preview"})(Ej||(Ej={}));var HEe=class{constructor(i,e=[]){this.tokenTypes=i,this.tokenModifiers=e}};function WEe(i){return typeof i>"u"||sEe(i)}var bce=class{constructor(i){if(this._prevLine=0,this._prevChar=0,this._dataIsSortedAndDeltaEncoded=!0,this._data=[],this._dataLen=0,this._tokenTypeStrToInt=new Map,this._tokenModifierStrToInt=new Map,this._hasLegend=!1,i){this._hasLegend=!0;for(let e=0,t=i.tokenTypes.length;e<t;e++)this._tokenTypeStrToInt.set(i.tokenTypes[e],e);for(let e=0,t=i.tokenModifiers.length;e<t;e++)this._tokenModifierStrToInt.set(i.tokenModifiers[e],e)}}push(i,e,t,n,o){if(typeof i=="number"&&typeof e=="number"&&typeof t=="number"&&typeof n=="number"&&(typeof o=="number"||typeof o>"u"))return typeof o>"u"&&(o=0),this._pushEncoded(i,e,t,n,o);if(Zt.isRange(i)&&typeof e=="string"&&WEe(t))return this._push(i,e,t);throw Nt()}_push(i,e,t){if(!this._hasLegend)throw new Error("Legend must be provided in constructor");if(i.start.line!==i.end.line)throw new Error("`range` cannot span multiple lines");if(!this._tokenTypeStrToInt.has(e))throw new Error("`tokenType` is not in the provided legend");let n=i.start.line,o=i.start.character,r=i.end.character-i.start.character,s=this._tokenTypeStrToInt.get(e),a=0;if(t)for(let l of t){if(!this._tokenModifierStrToInt.has(l))throw new Error("`tokenModifier` is not in the provided legend");let c=this._tokenModifierStrToInt.get(l);a|=1<<c>>>0}this._pushEncoded(n,o,r,s,a)}_pushEncoded(i,e,t,n,o){if(this._dataIsSortedAndDeltaEncoded&&(i<this._prevLine||i===this._prevLine&&e<this._prevChar)){this._dataIsSortedAndDeltaEncoded=!1;let a=this._data.length/5|0,l=0,c=0;for(let d=0;d<a;d++){let h=this._data[5*d],u=this._data[5*d+1];h===0?(h=l,u+=c):h+=l,this._data[5*d]=h,this._data[5*d+1]=u,l=h,c=u}}let r=i,s=e;this._dataIsSortedAndDeltaEncoded&&this._dataLen>0&&(r-=this._prevLine,r===0&&(s-=this._prevChar)),this._data[this._dataLen++]=r,this._data[this._dataLen++]=s,this._data[this._dataLen++]=t,this._data[this._dataLen++]=n,this._data[this._dataLen++]=o,this._prevLine=i,this._prevChar=e}static _sortAndDeltaEncode(i){let e=[],t=i.length/5|0;for(let s=0;s<t;s++)e[s]=s;e.sort((s,a)=>{let l=i[5*s],c=i[5*a];if(l===c){let d=i[5*s+1],h=i[5*a+1];return d-h}return l-c});let n=new Uint32Array(i.length),o=0,r=0;for(let s=0;s<t;s++){let a=5*e[s],l=i[a+0],c=i[a+1],d=i[a+2],h=i[a+3],u=i[a+4],g=l-o,p=g===0?c-r:c,f=5*s;n[f+0]=g,n[f+1]=p,n[f+2]=d,n[f+3]=h,n[f+4]=u,o=l,r=c}return n}build(i){return this._dataIsSortedAndDeltaEncoded?new iT(new Uint32Array(this._data),i):new iT(bce._sortAndDeltaEncode(this._data),i)}},iT=class{constructor(i,e){this.resultId=e,this.data=i}},wce=class{constructor(i,e,t){this.start=i,this.deleteCount=e,this.data=t}},nD=class{constructor(i,e){this.resultId=e,this.edits=i}},Lj;(function(i){i[i.Separate=0]="Separate",i[i.MergeWithParent=1]="MergeWithParent"})(Lj||(Lj={}));var U0=class{constructor(){}};U0.Back={iconPath:new Md("arrow-left")};U0=Ne([it],U0);var hC;(function(i){i[i.Separator=-1]="Separator",i[i.Default=0]="Default"})(hC||(hC={}));var g_;(function(i){i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(g_||(g_={}));var Ij;(function(i){i[i.UI=1]="UI",i[i.Workspace=2]="Workspace"})(Ij||(Ij={}));var zEe=class{constructor(i,e,t){this.badge=i,this.tooltip=e,this.color=t}static validate(i){if(i.badge){let e=LA(i.badge,0);if(e<i.badge.length&&(e+=LA(i.badge,e)),i.badge.length>e)throw new Error("The 'badge'-property must be undefined or a short character")}if(!i.color&&!i.badge&&!i.tooltip)throw new Error("The decoration is empty");return!0}},Pl=class i{constructor(e,t){if(e<0)throw Nt("start must be positive");if(t<0)throw Nt("end must be positive");e<=t?(this._start=e,this._end=t):(this._start=t,this._end=e)}static isNotebookRange(e){return e instanceof i?!0:e?typeof e.start=="number"&&typeof e.end=="number":!1}get start(){return this._start}get end(){return this._end}get isEmpty(){return this._start===this._end}with(e){let t=this._start,n=this._end;return e.start!==void 0&&(t=e.start),e.end!==void 0&&(n=e.end),t===this._start&&n===this._end?this:new i(t,n)}},Qg=class i{constructor(e,t,n,o,r,s,a){this.kind=e,this.value=t,this.languageId=n,this.mime=o,this.outputs=r??[],this.metadata=s,this.executionSummary=a,i.validate(this)}static validate(e){if(typeof e.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof e.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof e.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(e){return Array.isArray(e)&&e.every(t=>i.isNotebookCellData(t))}static isNotebookCellData(e){return!0}},VEe=class{constructor(i){this.cells=i}},uC=class i{constructor(e,t){this.data=e,this.mime=t;let n=mce(t,!0);if(!n)throw new Error(`INVALID mime type: ${t}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=n}static isNotebookCellOutputItem(e){return e instanceof i?!0:e?typeof e.mime=="string"&&e.data instanceof Uint8Array:!1}static error(e){let t={name:e.name,message:e.message,stack:e.stack};return i.json(t,"application/vnd.code.notebook.error")}static stdout(e){return i.text(e,"application/vnd.code.notebook.stdout")}static stderr(e){return i.text(e,"application/vnd.code.notebook.stderr")}static bytes(e,t="application/octet-stream"){return new i(e,t)}static text(e,t=nr.text){let n=vt(i,fce,"f",_ce).encode(String(e));return new i(n,t)}static json(e,t="text/x-json"){let n=JSON.stringify(e,void 0,"	");return i.text(n,t)}};fce=uC;_ce={value:new TextEncoder};var nT=class i{constructor(e,t,n){this.items=i.ensureUniqueMimeTypes(e,!0),typeof t=="string"?(this.id=t,this.metadata=n):(this.id=um(),this.metadata=t??n)}static isNotebookCellOutput(e){return e instanceof i?!0:!e||typeof e!="object"?!1:typeof e.id=="string"&&Gg(e.items)}static ensureUniqueMimeTypes(e,t=!1){let n=new Set,o=new Set;for(let r=0;r<e.length;r++){let s=e[r],a=mce(s.mime);if(!n.has(a)){n.add(a);continue}o.add(r),t&&console.warn(`DUPLICATED mime type '${s.mime}' will be dropped`)}return o.size===0?e:e.filter((r,s)=>!o.has(s))}},wg;(function(i){i[i.Markup=1]="Markup",i[i.Code=2]="Code"})(wg||(wg={}));var Tj;(function(i){i[i.Left=1]="Left",i[i.Right=2]="Right"})(Tj||(Tj={}));var Mj;(function(i){i[i.Default=0]="Default",i[i.InCenter=1]="InCenter",i[i.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",i[i.AtTop=3]="AtTop"})(Mj||(Mj={}));var UEe=class{constructor(i,e){this.text=i,this.alignment=e}},Nj;(function(i){i[i.Default=1]="Default",i[i.Preferred=2]="Preferred"})(Nj||(Nj={}));var Rj;(function(i){i[i.Production=1]="Production",i[i.Development=2]="Development",i[i.Test=3]="Test"})(Rj||(Rj={}));var Cg;(function(i){i[i.Other=0]="Other",i[i.Comment=1]="Comment",i[i.String=2]="String",i[i.RegEx=3]="RegEx"})(Cg||(Cg={}));var QEe=class{constructor(i,e){this.ranges=i,this.wordPattern=e}},Fj;(function(i){i[i.Run=1]="Run",i[i.Debug=2]="Debug",i[i.Coverage=3]="Coverage"})(Fj||(Fj={}));var Bj=class{constructor(i=void 0,e=void 0,t=void 0){this.include=i,this.exclude=e,this.profile=t}};Bj=Ne([it],Bj);var Pj=jQ=class{constructor(i){this.message=i}static diff(i,e,t){let n=new jQ(i);return n.expectedOutput=e,n.actualOutput=t,n}};Pj=jQ=Ne([it],Pj);var Oj=class{constructor(i){this.id=i}};Oj=Ne([it],Oj);var oT=class{constructor(e,t,n,o,r,s){this.kind=e,this.name=t,this.detail=n,this.uri=o,this.range=r,this.selectionRange=s}},Hj=class{constructor(e,t){this.original=e,this.modified=t}},Wj=class{constructor(e,t){this.uri=e,this.viewType=t}},zj=class{constructor(e){this.viewType=e}},Vj=class{constructor(e,t){this.uri=e,this.notebookType=t}},Uj=class{constructor(e,t,n){this.original=e,this.modified=t,this.notebookType=n}},Qj=class{constructor(){}},gC;(function(i){i[i.Desktop=1]="Desktop",i[i.Web=2]="Web"})(gC||(gC={}));var sh;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(sh||(sh={}));function jEe(i){switch(i){case sh.Line:return"line";case sh.Block:return"block";case sh.Underline:return"underline";case sh.LineThin:return"line-thin";case sh.BlockOutline:return"block-outline";case sh.UnderlineThin:return"underline-thin"}}var jj;(function(i){i[i.ACTIVATE=1]="ACTIVATE",i[i.RESTORE=2]="RESTORE",i[i.PRESERVE=3]="PRESERVE"})(jj||(jj={}));var Kj;(function(i){i[i.PICK=0]="PICK",i[i.DISABLED=1]="DISABLED",i[i.EXCLUSIVE_ONLY=2]="EXCLUSIVE_ONLY"})(Kj||(Kj={}));var Lf;(function(i){i[i.Markup=1]="Markup",i[i.Code=2]="Code"})(Lf||(Lf={}));var Gp;(function(i){function e(n){let{selectionStartLineNumber:o,selectionStartColumn:r,positionLineNumber:s,positionColumn:a}=n,l=new ti(o-1,r-1),c=new ti(s-1,a-1);return new H0(l,c)}i.to=e;function t(n){let{anchor:o,active:r}=n;return{selectionStartLineNumber:o.line+1,selectionStartColumn:o.character+1,positionLineNumber:r.line+1,positionColumn:r.character+1}}i.from=t})(Gp||(Gp={}));var Re;(function(i){function e(n){if(!n)return;let{start:o,end:r}=n;return{startLineNumber:o.line+1,startColumn:o.character+1,endLineNumber:r.line+1,endColumn:r.character+1}}i.from=e;function t(n){if(!n)return;let{startLineNumber:o,startColumn:r,endLineNumber:s,endColumn:a}=n;return new Zt(o-1,r-1,s-1,a-1)}i.to=t})(Re||(Re={}));var qj;(function(i){function e(t){switch(t){case 1:return Cg.Comment;case 0:return Cg.Other;case 3:return Cg.RegEx;case 2:return Cg.String}}i.to=e})(qj||(qj={}));var tn;(function(i){function e(n){return new ti(n.lineNumber-1,n.column-1)}i.to=e;function t(n){return{lineNumber:n.line+1,column:n.character+1}}i.from=t})(tn||(tn={}));var rT;(function(i){function e(o,r){return Ns(IM(o).map(s=>t(s,r)))}i.from=e;function t(o,r){if(typeof o=="string")return{$serialized:!0,language:o};if(o)return{$serialized:!0,language:o.language,scheme:n(o.scheme,r),pattern:K0.from(o.pattern)??void 0,exclusive:o.exclusive,notebookType:o.notebookType}}function n(o,r){return r&&typeof o=="string"?r.transformOutgoingScheme(o):o}})(rT||(rT={}));var sT;(function(i){function e(n){switch(n){case Ag.Unnecessary:return 1;case Ag.Deprecated:return 2}}i.from=e;function t(n){switch(n){case 1:return Ag.Unnecessary;case 2:return Ag.Deprecated;default:return}}i.to=t})(sT||(sT={}));var Q0;(function(i){function e(n){let o;return n.code&&(Ji(n.code)||Xa(n.code)?o=String(n.code):o={value:String(n.code.value),target:n.code.target}),{...Re.from(n.range),message:n.message,source:n.source,code:o,severity:lT.from(n.severity),relatedInformation:n.relatedInformation&&n.relatedInformation.map(aT.from),tags:Array.isArray(n.tags)?Ns(n.tags.map(sT.from)):void 0}}i.from=e;function t(n){var o;let r=new OI(Re.to(n),n.message,lT.to(n.severity));return r.source=n.source,r.code=Ji(n.code)?n.code:(o=n.code)==null?void 0:o.value,r.relatedInformation=n.relatedInformation&&n.relatedInformation.map(aT.to),r.tags=n.tags&&Ns(n.tags.map(sT.to)),r}i.to=t})(Q0||(Q0={}));var aT;(function(i){function e(n){return{...Re.from(n.location.range),message:n.message,resource:n.location.uri}}i.from=e;function t(n){return new eC(new Td(n.resource,Re.to(n)),n.message)}i.to=t})(aT||(aT={}));var lT;(function(i){function e(n){switch(n){case zo.Error:return Xt.Error;case zo.Warning:return Xt.Warning;case zo.Information:return Xt.Info;case zo.Hint:return Xt.Hint}return Xt.Error}i.from=e;function t(n){switch(n){case Xt.Info:return zo.Information;case Xt.Warning:return zo.Warning;case Xt.Error:return zo.Error;case Xt.Hint:return zo.Hint;default:return zo.Error}}i.to=t})(lT||(lT={}));var jg;(function(i){function e(n){return typeof n=="number"&&n>=z0.One?n-1:n===z0.Beside?ZS:yQ}i.from=e;function t(n){if(typeof n=="number"&&n>=0)return n+1;throw new Error("invalid 'EditorGroupColumn'")}i.to=t})(jg||(jg={}));function KEe(i){return typeof i.range<"u"}function Cce(i){return i.length===0?!0:!!KEe(i[0])}var zs;(function(i){function e(a){return a.map(i.from)}i.fromMany=e;function t(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function n(a){let l;if(t(a)){let{language:u,value:g}=a;l={value:"```"+u+`
`+g+"\n```\n"}}else W0.isMarkdownString(a)?l={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?l={value:a}:l={value:""};let c=Object.create(null);l.uris=c;let d=u=>{try{let g=$.parse(u,!0);g=g.with({query:o(g.query,c)}),c[u]=g}catch{}return""},h=new Vie.Renderer;return h.link=d,h.image=u=>typeof u=="string"?d(Hre(u).href):"",Vie(l.value,{renderer:h}),l}i.from=n;function o(a,l){if(!a)return a;let c;try{c=Yb(a)}catch{}if(!c)return a;let d=!1;return c=WA(c,h=>{if($.isUri(h)){let u=`__uri_${Math.random().toString(16).slice(2,8)}`;return l[u]=h,d=!0,u}else return}),d?JSON.stringify(c):a}function r(a){let l=new W0(a.value,a.supportThemeIcons);return l.isTrusted=a.isTrusted,l.supportHtml=a.supportHtml,l.baseUri=a.baseUri?$.from(a.baseUri):void 0,l}i.to=r;function s(a){if(a)return typeof a=="string"?a:i.from(a)}i.fromStrict=s})(zs||(zs={}));function qEe(i){return Cce(i)?i.map(e=>({range:Re.from(e.range),hoverMessage:Array.isArray(e.hoverMessage)?zs.fromMany(e.hoverMessage):e.hoverMessage?zs.from(e.hoverMessage):void 0,renderOptions:e.renderOptions})):i.map(e=>({range:Re.from(e)}))}function oX(i){return typeof i>"u"?i:typeof i=="string"?$.file(i):i}var j0;(function(i){function e(t){return typeof t>"u"?t:{contentText:t.contentText,contentIconPath:t.contentIconPath?oX(t.contentIconPath):void 0,border:t.border,borderColor:t.borderColor,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,color:t.color,backgroundColor:t.backgroundColor,margin:t.margin,width:t.width,height:t.height}}i.from=e})(j0||(j0={}));var cT;(function(i){function e(t){return typeof t>"u"?t:{backgroundColor:t.backgroundColor,outline:t.outline,outlineColor:t.outlineColor,outlineStyle:t.outlineStyle,outlineWidth:t.outlineWidth,border:t.border,borderColor:t.borderColor,borderRadius:t.borderRadius,borderSpacing:t.borderSpacing,borderStyle:t.borderStyle,borderWidth:t.borderWidth,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,cursor:t.cursor,color:t.color,opacity:t.opacity,letterSpacing:t.letterSpacing,gutterIconPath:t.gutterIconPath?oX(t.gutterIconPath):void 0,gutterIconSize:t.gutterIconSize,overviewRulerColor:t.overviewRulerColor,before:t.before?j0.from(t.before):void 0,after:t.after?j0.from(t.after):void 0}}i.from=e})(cT||(cT={}));var $j;(function(i){function e(t){if(typeof t>"u")return t;switch(t){case bg.OpenOpen:return 0;case bg.ClosedClosed:return 1;case bg.OpenClosed:return 2;case bg.ClosedOpen:return 3}}i.from=e})($j||($j={}));var Gj;(function(i){function e(t){return{isWholeLine:t.isWholeLine,rangeBehavior:t.rangeBehavior?$j.from(t.rangeBehavior):void 0,overviewRulerLane:t.overviewRulerLane,light:t.light?cT.from(t.light):void 0,dark:t.dark?cT.from(t.dark):void 0,backgroundColor:t.backgroundColor,outline:t.outline,outlineColor:t.outlineColor,outlineStyle:t.outlineStyle,outlineWidth:t.outlineWidth,border:t.border,borderColor:t.borderColor,borderRadius:t.borderRadius,borderSpacing:t.borderSpacing,borderStyle:t.borderStyle,borderWidth:t.borderWidth,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,cursor:t.cursor,color:t.color,opacity:t.opacity,letterSpacing:t.letterSpacing,gutterIconPath:t.gutterIconPath?oX(t.gutterIconPath):void 0,gutterIconSize:t.gutterIconSize,overviewRulerColor:t.overviewRulerColor,before:t.before?j0.from(t.before):void 0,after:t.after?j0.from(t.after):void 0}}i.from=e})(Gj||(Gj={}));var ua;(function(i){function e(n){return{text:n.newText,eol:n.newEol&&pC.from(n.newEol),range:Re.from(n.range)}}i.from=e;function t(n){let o=new Xw(Re.to(n.range),n.text);return o.newEol=typeof n.eol>"u"?void 0:pC.to(n.eol),o}i.to=t})(ua||(ua={}));var vu;(function(i){function e(n,o,r){let s={edits:[]};if(n instanceof Zw){let a=new tQ;for(let l of n._allEntries())l._type===1&&$.isUri(l.to)&&l.from===void 0&&a.add(l.to);for(let l of n._allEntries())if(l._type===1)s.edits.push({oldResource:l.from,newResource:l.to,options:l.options,metadata:l.metadata});else if(l._type===2)s.edits.push({resource:l.uri,textEdit:ua.from(l.edit),versionId:a.has(l.uri)||o==null?void 0:o.getTextDocumentVersion(l.uri),metadata:l.metadata});else if(l._type===6){if(!r){console.warn("DROPPING snippet text edit because proposal IS NOT ENABLED",l);continue}s.edits.push({resource:l.uri,textEdit:{range:Re.from(l.range),text:l.edit.value,insertAsSnippet:!0},versionId:a.has(l.uri)||o==null?void 0:o.getTextDocumentVersion(l.uri),metadata:l.metadata})}else l._type===3?s.edits.push({metadata:l.metadata,resource:l.uri,cellEdit:l.edit,notebookMetadata:l.notebookMetadata,notebookVersionId:o?.getNotebookDocumentVersion(l.uri)}):l._type===5&&s.edits.push({metadata:l.metadata,resource:l.uri,notebookVersionId:o?.getNotebookDocumentVersion(l.uri),cellEdit:{editType:1,index:l.index,count:l.count,cells:l.cells.map(mK.from)}})}return s}i.from=e;function t(n){let o=new Zw;for(let r of n.edits)r.textEdit?o.replace($.revive(r.resource),Re.to(r.textEdit.range),r.textEdit.text):o.renameFile($.revive(r.oldResource),$.revive(r.newResource),r.options);return o}i.to=t})(vu||(vu={}));var al;(function(i){let e=Object.create(null);e[zi.File]=0,e[zi.Module]=1,e[zi.Namespace]=2,e[zi.Package]=3,e[zi.Class]=4,e[zi.Method]=5,e[zi.Property]=6,e[zi.Field]=7,e[zi.Constructor]=8,e[zi.Enum]=9,e[zi.Interface]=10,e[zi.Function]=11,e[zi.Variable]=12,e[zi.Constant]=13,e[zi.String]=14,e[zi.Number]=15,e[zi.Boolean]=16,e[zi.Array]=17,e[zi.Object]=18,e[zi.Key]=19,e[zi.Null]=20,e[zi.EnumMember]=21,e[zi.Struct]=22,e[zi.Event]=23,e[zi.Operator]=24,e[zi.TypeParameter]=25;function t(o){return typeof e[o]=="number"?e[o]:6}i.from=t;function n(o){for(let r in e)if(e[r]===o)return Number(r);return zi.Property}i.to=n})(al||(al={}));var Nd;(function(i){function e(n){switch(n){case iC.Deprecated:return 1}}i.from=e;function t(n){switch(n){case 1:return iC.Deprecated}}i.to=t})(Nd||(Nd={}));var dT;(function(i){function e(n){return{name:n.name,kind:al.from(n.kind),tags:n.tags&&n.tags.map(Nd.from),containerName:n.containerName,location:Au.from(n.location)}}i.from=e;function t(n){let o=new zI(n.name,al.to(n.kind),n.containerName,Au.to(n.location));return o.tags=n.tags&&n.tags.map(Nd.to),o}i.to=t})(dT||(dT={}));var Yj;(function(i){function e(n){var o;let r={name:n.name||"!!MISSING: name!!",detail:n.detail,range:Re.from(n.range),selectionRange:Re.from(n.selectionRange),kind:al.from(n.kind),tags:((o=n.tags)==null?void 0:o.map(Nd.from))??[]};return n.children&&(r.children=n.children.map(e)),r}i.from=e;function t(n){let o=new nC(n.name,n.detail,al.to(n.kind),Re.to(n.range),Re.to(n.selectionRange));return Dn(n.tags)&&(o.tags=n.tags.map(Nd.to)),n.children&&(o.children=n.children.map(t)),o}i.to=t})(Yj||(Yj={}));var Jj;(function(i){function e(n){let o=new UI(al.to(n.kind),n.name,n.detail||"",$.revive(n.uri),Re.to(n.range),Re.to(n.selectionRange));return o._sessionId=n._sessionId,o._itemId=n._itemId,o}i.to=e;function t(n,o,r){var s;if(o=o??n._sessionId,r=r??n._itemId,o===void 0||r===void 0)throw new Error("invalid item");return{_sessionId:o,_itemId:r,name:n.name,detail:n.detail,kind:al.from(n.kind),uri:n.uri,range:Re.from(n.range),selectionRange:Re.from(n.selectionRange),tags:(s=n.tags)==null?void 0:s.map(Nd.from)}}i.from=t})(Jj||(Jj={}));var Au;(function(i){function e(n){return{range:n.range&&Re.from(n.range),uri:n.uri}}i.from=e;function t(n){return new Td($.revive(n.uri),Re.to(n.range))}i.to=t})(Au||(Au={}));var hT;(function(i){function e(n){let o=n,r=n;return{originSelectionRange:o.originSelectionRange?Re.from(o.originSelectionRange):void 0,uri:o.targetUri?o.targetUri:r.uri,range:Re.from(o.targetRange?o.targetRange:r.range),targetSelectionRange:o.targetSelectionRange?Re.from(o.targetSelectionRange):void 0}}i.from=e;function t(n){return{targetUri:$.revive(n.uri),targetRange:Re.to(n.range),targetSelectionRange:n.targetSelectionRange?Re.to(n.targetSelectionRange):void 0,originSelectionRange:n.originSelectionRange?Re.to(n.originSelectionRange):void 0}}i.to=t})(hT||(hT={}));var Xj;(function(i){function e(n){return{range:Re.from(n.range),contents:zs.fromMany(n.contents)}}i.from=e;function t(n){return new HI(n.contents.map(zs.to),Re.to(n.range))}i.to=t})(Xj||(Xj={}));var Zj;(function(i){function e(n){return{range:Re.from(n.range),expression:n.expression}}i.from=e;function t(n){return new JI(Re.to(n.range),n.expression)}i.to=t})(Zj||(Zj={}));var eK;(function(i){function e(n){if(n instanceof ZI)return{type:"text",range:Re.from(n.range),text:n.text};if(n instanceof eT)return{type:"variable",range:Re.from(n.range),variableName:n.variableName,caseSensitiveLookup:n.caseSensitiveLookup};if(n instanceof tT)return{type:"expression",range:Re.from(n.range),expression:n.expression};throw new Error("Unknown 'InlineValue' type")}i.from=e;function t(n){switch(n.type){case"text":return{range:Re.to(n.range),text:n.text};case"variable":return{range:Re.to(n.range),variableName:n.variableName,caseSensitiveLookup:n.caseSensitiveLookup};case"expression":return{range:Re.to(n.range),expression:n.expression}}}i.to=t})(eK||(eK={}));var tK;(function(i){function e(n){return{frameId:n.frameId,stoppedLocation:Re.from(n.stoppedLocation)}}i.from=e;function t(n){return new yj(n.frameId,Re.to(n.stoppedLocation))}i.to=t})(tK||(tK={}));var iK;(function(i){function e(n){return{range:Re.from(n.range),kind:n.kind}}i.from=e;function t(n){return new WI(Re.to(n.range),n.kind)}i.to=t})(iK||(iK={}));var nK;(function(i){function e(t){switch(t){case 1:return l_.TriggerCharacter;case 2:return l_.TriggerForIncompleteCompletions;case 0:default:return l_.Invoke}}i.to=e})(nK||(nK={}));var oK;(function(i){function e(t){return{triggerKind:nK.to(t.triggerKind),triggerCharacter:t.triggerCharacter}}i.to=e})(oK||(oK={}));var rK;(function(i){function e(n){switch(n){case rC.Deprecated:return 1}}i.from=e;function t(n){switch(n){case 1:return rC.Deprecated}}i.to=t})(rK||(rK={}));var sK;(function(i){let e=new Map([[lt.Method,0],[lt.Function,1],[lt.Constructor,2],[lt.Field,3],[lt.Variable,4],[lt.Class,5],[lt.Interface,7],[lt.Struct,6],[lt.Module,8],[lt.Property,9],[lt.Unit,12],[lt.Value,13],[lt.Constant,14],[lt.Enum,15],[lt.EnumMember,16],[lt.Keyword,17],[lt.Snippet,27],[lt.Text,18],[lt.Color,19],[lt.File,20],[lt.Reference,21],[lt.Folder,23],[lt.Event,10],[lt.Operator,11],[lt.TypeParameter,24],[lt.Issue,26],[lt.User,25]]);function t(r){return e.get(r)??9}i.from=t;let n=new Map([[0,lt.Method],[1,lt.Function],[2,lt.Constructor],[3,lt.Field],[4,lt.Variable],[5,lt.Class],[7,lt.Interface],[6,lt.Struct],[8,lt.Module],[9,lt.Property],[12,lt.Unit],[13,lt.Value],[14,lt.Constant],[15,lt.Enum],[16,lt.EnumMember],[17,lt.Keyword],[27,lt.Snippet],[18,lt.Text],[19,lt.Color],[20,lt.File],[21,lt.Reference],[23,lt.Folder],[10,lt.Event],[11,lt.Operator],[24,lt.TypeParameter],[25,lt.User],[26,lt.Issue]]);function o(r){return n.get(r)??lt.Property}i.to=o})(sK||(sK={}));var uT;(function(i){function e(n){return{label:n.label,documentation:zs.fromStrict(n.documentation)}}i.from=e;function t(n){return{label:n.label,documentation:GM(n.documentation)?zs.to(n.documentation):n.documentation}}i.to=t})(uT||(uT={}));var gT;(function(i){function e(n){return{label:n.label,documentation:zs.fromStrict(n.documentation),parameters:Array.isArray(n.parameters)?n.parameters.map(uT.from):[],activeParameter:n.activeParameter}}i.from=e;function t(n){return{label:n.label,documentation:GM(n.documentation)?zs.to(n.documentation):n.documentation,parameters:Array.isArray(n.parameters)?n.parameters.map(uT.to):[],activeParameter:n.activeParameter}}i.to=t})(gT||(gT={}));var pT;(function(i){function e(n){return{activeSignature:n.activeSignature,activeParameter:n.activeParameter,signatures:Array.isArray(n.signatures)?n.signatures.map(gT.from):[]}}i.from=e;function t(n){return{activeSignature:n.activeSignature,activeParameter:n.activeParameter,signatures:Array.isArray(n.signatures)?n.signatures.map(gT.to):[]}}i.to=t})(pT||(pT={}));var aK;(function(i){function e(n){return n}i.from=e;function t(n){return n}i.to=t})(aK||(aK={}));var dA;(function(i){function e(n){return{range:Re.from(n.range),url:n.target,tooltip:n.tooltip}}i.from=e;function t(n){let o;if(n.url)try{o=typeof n.url=="string"?$.parse(n.url,!0):$.revive(n.url)}catch{}return new KI(Re.to(n.range),o)}i.to=t})(dA||(dA={}));var lK;(function(i){function e(n){let o=new qI(n.label);return n.textEdit&&(o.textEdit=ua.to(n.textEdit)),n.additionalTextEdits&&(o.additionalTextEdits=n.additionalTextEdits.map(r=>ua.to(r))),o}i.to=e;function t(n){return{label:n.label,textEdit:n.textEdit?ua.from(n.textEdit):void 0,additionalTextEdits:n.additionalTextEdits?n.additionalTextEdits.map(o=>ua.from(o)):void 0}}i.from=t})(lK||(lK={}));var mT;(function(i){function e(n){return new aC(n[0],n[1],n[2],n[3])}i.to=e;function t(n){return[n.red,n.green,n.blue,n.alpha]}i.from=t})(mT||(mT={}));var cK;(function(i){function e(n){return{range:Re.from(n.range)}}i.from=e;function t(n){return new VI(Re.to(n.range))}i.to=t})(cK||(cK={}));var p_;(function(i){function e(n){switch(n){case Qc.Off:return 0;case Qc.Relative:return 2;case Qc.On:default:return 1}}i.from=e;function t(n){switch(n){case 0:return Qc.Off;case 2:return Qc.Relative;case 1:default:return Qc.On}}i.to=t})(p_||(p_={}));var pC;(function(i){function e(n){if(n===$a.CRLF)return 1;if(n===$a.LF)return 0}i.from=e;function t(n){if(n===1)return $a.CRLF;if(n===0)return $a.LF}i.to=t})(pC||(pC={}));var dK;(function(i){function e(t){if(typeof t=="object")return t.viewId;switch(t){case Ug.SourceControl:return 3;case Ug.Window:return 10;case Ug.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}i.from=e})(dK||(dK={}));var hK;(function(i){function e(t){let n={start:t.start+1,end:t.end+1};return t.kind&&(n.kind=uK.from(t.kind)),n}i.from=e})(hK||(hK={}));var uK;(function(i){function e(t){if(t)switch(t){case u_.Comment:return dF.Comment;case u_.Imports:return dF.Imports;case u_.Region:return dF.Region}}i.from=e})(uK||(uK={}));var K0;(function(i){function e(r){return r instanceof h_?r.toJSON():typeof r=="string"?r:t(r)||n(r)?new h_(r.baseUri??r.base,r.pattern).toJSON():r}i.from=e;function t(r){let s=r;return s?$.isUri(s.baseUri)&&typeof s.pattern=="string":!1}function n(r){let s=r;return s?typeof s.base=="string"&&typeof s.pattern=="string":!1}function o(r){return typeof r=="string"?r:new h_($.revive(r.baseUri),r.pattern)}i.to=o})(K0||(K0={}));var gK;(function(i){function e(t){if(t){if(Array.isArray(t))return t.map(e);if(typeof t=="string")return t;{let n=t;return{language:n.language,scheme:n.scheme,pattern:K0.from(n.pattern),exclusive:n.exclusive,notebookType:n.notebookType}}}else return}i.from=e})(gK||(gK={}));var pK;(function(i){function e(n){return{start:n.start,end:n.end}}i.from=e;function t(n){return new Pl(n.start,n.end)}i.to=t})(pK||(pK={}));var fT;(function(i){function e(n){return{timing:typeof n.runStartTime=="number"&&typeof n.runEndTime=="number"?{startTime:n.runStartTime,endTime:n.runEndTime}:void 0,executionOrder:n.executionOrder,success:n.lastRunSuccess}}i.to=e;function t(n){var o,r;return{lastRunSuccess:n.success,runStartTime:(o=n.timing)==null?void 0:o.startTime,runEndTime:(r=n.timing)==null?void 0:r.endTime,executionOrder:n.executionOrder}}i.from=t})(fT||(fT={}));var _T;(function(i){function e(n){switch(n){case wg.Markup:return Lf.Markup;case wg.Code:default:return Lf.Code}}i.from=e;function t(n){switch(n){case Lf.Markup:return wg.Markup;case Lf.Code:default:return wg.Code}}i.to=t})(_T||(_T={}));var mK;(function(i){function e(n){return{cellKind:_T.from(n.kind),language:n.languageId,mime:n.mime,source:n.value,metadata:n.metadata,internalMetadata:fT.from(n.executionSummary??{}),outputs:n.outputs?n.outputs.map(AT.from):[]}}i.from=e;function t(n){return new Qg(_T.to(n.cellKind),n.source,n.language,n.mime,n.outputs?n.outputs.map(AT.to):void 0,n.metadata,n.internalMetadata?fT.to(n.internalMetadata):void 0)}i.to=t})(mK||(mK={}));var vT;(function(i){function e(n){return{mime:n.mime,valueBytes:Gi.wrap(n.data)}}i.from=e;function t(n){return new uC(n.valueBytes.buffer,n.mime)}i.to=t})(vT||(vT={}));var AT;(function(i){function e(n){return{outputId:n.id,items:n.items.map(vT.from),metadata:n.metadata}}i.from=e;function t(n){let o=n.items.map(vT.to);return new nT(o,n.outputId,n.metadata)}i.to=t})(AT||(AT={}));var fK;(function(i){function e(t){switch(t){case 1:return oC.Invoke;case 2:return oC.Automatic}}i.to=e})(fK||(fK={}));var _K;(function(i){function e(n){let o=new oT(al.to(n.kind),n.name,n.detail||"",$.revive(n.uri),Re.to(n.range),Re.to(n.selectionRange));return o._sessionId=n._sessionId,o._itemId=n._itemId,o}i.to=e;function t(n,o,r){var s;if(o=o??n._sessionId,r=r??n._itemId,o===void 0||r===void 0)throw new Error("invalid item");return{_sessionId:o,_itemId:r,kind:al.from(n.kind),name:n.name,detail:n.detail??"",uri:n.uri,range:Re.from(n.range),selectionRange:Re.from(n.selectionRange),tags:(s=n.tags)==null?void 0:s.map(Nd.from)}}i.from=t})(_K||(_K={}));var vK;(function(i){function e(t,n){let o=t.fileData;return o?new class extends YI{asFile(){return{name:o.name,uri:$.revive(o.uri),data:Ql(()=>n())}}}(""):new YI(t.asString)}i.toDataTransferItem=e})(vK||(vK={}));var fd;(function(i){function e(n,o){let r=n.items.map(([s,a],l)=>[s,vK.toDataTransferItem(a,()=>o(l))]);return new pj(r)}i.toDataTransfer=e;async function t(n){let o={items:[]},r=[];return n.forEach((s,a)=>{r.push((async()=>{let l=await s.asString(),c=s.asFile();o.items.push([a,{asString:l,fileData:c?{name:c.name,uri:c.uri}:void 0}])})())}),await Promise.all(r),o}i.toDataTransferDTO=t})(fd||(fd={}));var mC=class i{constructor(e){this._proxyIdentifierBrand=void 0,this.sid=e,this.nid=++i.count}};mC.count=0;var yce=[];function De(i){let e=new mC(i);return yce[e.nid]=e,e}function fS(i){return yce[i].sid}var ld=class{constructor(e){this.value=e}},If;(function(i){i[i.Default=0]="Default",i[i.InCenter=1]="InCenter",i[i.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",i[i.AtTop=3]="AtTop"})(If||(If={}));function m_(i){return i&&i.edits&&cc(i),i}var Tt={MainThreadAuthentication:De("MainThreadAuthentication"),MainThreadBulkEdits:De("MainThreadBulkEdits"),MainThreadClipboard:De("MainThreadClipboard"),MainThreadCommands:De("MainThreadCommands"),MainThreadComments:De("MainThreadComments"),MainThreadConfiguration:De("MainThreadConfiguration"),MainThreadConsole:De("MainThreadConsole"),MainThreadDebugService:De("MainThreadDebugService"),MainThreadDecorations:De("MainThreadDecorations"),MainThreadDiagnostics:De("MainThreadDiagnostics"),MainThreadDialogs:De("MainThreadDiaglogs"),MainThreadDocuments:De("MainThreadDocuments"),MainThreadDocumentContentProviders:De("MainThreadDocumentContentProviders"),MainThreadTextEditors:De("MainThreadTextEditors"),MainThreadEditorInsets:De("MainThreadEditorInsets"),MainThreadEditorTabs:De("MainThreadEditorTabs"),MainThreadErrors:De("MainThreadErrors"),MainThreadTreeViews:De("MainThreadTreeViews"),MainThreadDownloadService:De("MainThreadDownloadService"),MainThreadKeytar:De("MainThreadKeytar"),MainThreadLanguageFeatures:De("MainThreadLanguageFeatures"),MainThreadLanguages:De("MainThreadLanguages"),MainThreadLogger:De("MainThreadLogger"),MainThreadMessageService:De("MainThreadMessageService"),MainThreadOutputService:De("MainThreadOutputService"),MainThreadProgress:De("MainThreadProgress"),MainThreadQuickOpen:De("MainThreadQuickOpen"),MainThreadStatusBar:De("MainThreadStatusBar"),MainThreadSecretState:De("MainThreadSecretState"),MainThreadStorage:De("MainThreadStorage"),MainThreadTelemetry:De("MainThreadTelemetry"),MainThreadTerminalService:De("MainThreadTerminalService"),MainThreadWebviews:De("MainThreadWebviews"),MainThreadWebviewPanels:De("MainThreadWebviewPanels"),MainThreadWebviewViews:De("MainThreadWebviewViews"),MainThreadCustomEditors:De("MainThreadCustomEditors"),MainThreadUrls:De("MainThreadUrls"),MainThreadUriOpeners:De("MainThreadUriOpeners"),MainThreadWorkspace:De("MainThreadWorkspace"),MainThreadFileSystem:De("MainThreadFileSystem"),MainThreadExtensionService:De("MainThreadExtensionService"),MainThreadSCM:De("MainThreadSCM"),MainThreadSearch:De("MainThreadSearch"),MainThreadTask:De("MainThreadTask"),MainThreadWindow:De("MainThreadWindow"),MainThreadLabelService:De("MainThreadLabelService"),MainThreadNotebook:De("MainThreadNotebook"),MainThreadNotebookDocuments:De("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:De("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:De("MainThreadNotebookKernels"),MainThreadNotebookRenderers:De("MainThreadNotebookRenderers"),MainThreadInteractive:De("MainThreadInteractive"),MainThreadTheming:De("MainThreadTheming"),MainThreadTunnelService:De("MainThreadTunnelService"),MainThreadTimeline:De("MainThreadTimeline"),MainThreadTesting:De("MainThreadTesting")},sn={ExtHostCommands:De("ExtHostCommands"),ExtHostConfiguration:De("ExtHostConfiguration"),ExtHostDiagnostics:De("ExtHostDiagnostics"),ExtHostDebugService:De("ExtHostDebugService"),ExtHostDecorations:De("ExtHostDecorations"),ExtHostDocumentsAndEditors:De("ExtHostDocumentsAndEditors"),ExtHostDocuments:De("ExtHostDocuments"),ExtHostDocumentContentProviders:De("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:De("ExtHostDocumentSaveParticipant"),ExtHostEditors:De("ExtHostEditors"),ExtHostTreeViews:De("ExtHostTreeViews"),ExtHostFileSystem:De("ExtHostFileSystem"),ExtHostFileSystemInfo:De("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:De("ExtHostFileSystemEventService"),ExtHostLanguages:De("ExtHostLanguages"),ExtHostLanguageFeatures:De("ExtHostLanguageFeatures"),ExtHostQuickOpen:De("ExtHostQuickOpen"),ExtHostExtensionService:De("ExtHostExtensionService"),ExtHostLogLevelServiceShape:De("ExtHostLogLevelServiceShape"),ExtHostTerminalService:De("ExtHostTerminalService"),ExtHostSCM:De("ExtHostSCM"),ExtHostSearch:De("ExtHostSearch"),ExtHostTask:De("ExtHostTask"),ExtHostWorkspace:De("ExtHostWorkspace"),ExtHostWindow:De("ExtHostWindow"),ExtHostWebviews:De("ExtHostWebviews"),ExtHostWebviewPanels:De("ExtHostWebviewPanels"),ExtHostCustomEditors:De("ExtHostCustomEditors"),ExtHostWebviewViews:De("ExtHostWebviewViews"),ExtHostEditorInsets:De("ExtHostEditorInsets"),ExtHostEditorTabs:De("ExtHostEditorTabs"),ExtHostProgress:De("ExtHostProgress"),ExtHostComments:De("ExtHostComments"),ExtHostSecretState:De("ExtHostSecretState"),ExtHostStorage:De("ExtHostStorage"),ExtHostUrls:De("ExtHostUrls"),ExtHostUriOpeners:De("ExtHostUriOpeners"),ExtHostOutputService:De("ExtHostOutputService"),ExtHosLabelService:De("ExtHostLabelService"),ExtHostNotebook:De("ExtHostNotebook"),ExtHostNotebookDocuments:De("ExtHostNotebookDocuments"),ExtHostNotebookEditors:De("ExtHostNotebookEditors"),ExtHostNotebookKernels:De("ExtHostNotebookKernels"),ExtHostNotebookRenderers:De("ExtHostNotebookRenderers"),ExtHostInteractive:De("ExtHostInteractive"),ExtHostTheming:De("ExtHostTheming"),ExtHostTunnelService:De("ExtHostTunnelService"),ExtHostAuthentication:De("ExtHostAuthentication"),ExtHostTimeline:De("ExtHostTimeline"),ExtHostTesting:De("ExtHostTesting"),ExtHostTelemetry:De("ExtHostTelemetry")},mm=ze("IExtHostRpcService"),Jd,oD,AK=class{constructor(i,e){Jd.set(this,void 0),this._commands=new Map,this._apiCommands=new Map,oD.set(this,void 0),Th(this,Jd,i.getProxy(Tt.MainThreadCommands),"f"),this._logService=e,Th(this,oD,i.getProxy(Tt.MainThreadTelemetry),"f"),this.converter=new bK(this,t=>{let n=this._apiCommands.get(t);return n?.result===fC.Void?n:void 0},e),this._argumentProcessors=[{processArgument(t){return cc(t)}},{processArgument(t){return WA(t,function(n){if(_u.isIRange(n))return Re.to(n);if(TEe.isIPosition(n))return tn.to(n);if(_u.isIRange(n.range)&&$.isUri(n.uri))return Au.to(n);if(n instanceof Gi)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(i){this._argumentProcessors.push(i)}registerApiCommand(i){let e=this.registerCommand(!1,i.id,async(...t)=>{let n=i.args.map((r,s)=>{if(!r.validate(t[s]))throw new Error(`Invalid argument '${r.name}' when running '${i.id}', received: ${t[s]}`);return r.convert(t[s])}),o=await this.executeCommand(i.internalId,...n);return i.result.convert(o,t,this.converter)},void 0,{description:i.description,args:i.args,returns:i.result.description});return this._apiCommands.set(i.id,i),new ia(()=>{e.dispose(),this._apiCommands.delete(i.id)})}registerCommand(i,e,t,n,o,r){if(this._logService.trace("ExtHostCommands#registerCommand",e),!e.trim().length)throw new Error("invalid id");if(this._commands.has(e))throw new Error(`command '${e}' already exists`);return this._commands.set(e,{callback:t,thisArg:n,description:o,extension:r}),i&&vt(this,Jd,"f").$registerCommand(e),new ia(()=>{this._commands.delete(e)&&i&&vt(this,Jd,"f").$unregisterCommand(e)})}executeCommand(i,...e){return this._logService.trace("ExtHostCommands#executeCommand",i),this._doExecuteCommand(i,e,!0)}async _doExecuteCommand(i,e,t){if(this._commands.has(i))return vt(this,Jd,"f").$fireCommandActivationEvent(i),this._executeContributedCommand(i,e,!1);{let n=!1,o=WA(e,function(r){if(r instanceof ti)return tn.from(r);if(r instanceof Zt)return Re.from(r);if(r instanceof Td)return Au.from(r);if(Pl.isNotebookRange(r))return pK.from(r);if(r instanceof ArrayBuffer)return n=!0,Gi.wrap(new Uint8Array(r));if(r instanceof Uint8Array)return n=!0,Gi.wrap(r);if(r instanceof Gi)return n=!0,r;if(!Array.isArray(r))return r});try{let r=await vt(this,Jd,"f").$executeCommand(i,n?new ld(o):o,t);return cc(r)}catch(r){if(r instanceof Error&&r.message==="$executeCommand:retry")return this._doExecuteCommand(i,e,!1);throw r}}}async _executeContributedCommand(i,e,t){var n;let o=this._commands.get(i);if(!o)throw new Error("Unknown command");this._reportTelemetry(o,i);let{callback:r,thisArg:s,description:a}=o;if(a)for(let l=0;l<a.args.length;l++)try{Mne(e[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${i}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}try{return await r.apply(s,e)}catch(l){if(i===this.converter.delegatingCommandId){let c=this.converter.getActualCommand(...e);c&&(i=c.command)}throw this._logService.error(l,i,(n=o.extension)==null?void 0:n.identifier),t?new class extends Error{constructor(){var c,d;super(CN(l)),this.id=i,this.source=((c=o.extension)==null?void 0:c.displayName)??((d=o.extension)==null?void 0:d.name)}}:l}}_reportTelemetry(i,e){!i.extension||i.extension.isBuiltin||vt(this,oD,"f").$publicLog2("Extension:ActionExecuted",{extensionId:i.extension.identifier.value,id:e})}$executeContributedCommand(i,...e){return this._logService.trace("ExtHostCommands#$executeContributedCommand",i),this._commands.has(i)?(e=e.map(t=>this._argumentProcessors.reduce((n,o)=>o.processArgument(n),t)),this._executeContributedCommand(i,e,!0)):Promise.reject(new Error(`Contributed command '${i}' does not exist.`))}getCommands(i=!1){return this._logService.trace("ExtHostCommands#getCommands",i),vt(this,Jd,"f").$getCommands().then(e=>(i&&(e=e.filter(t=>t[0]!=="_")),e))}$getContributedCommandHandlerDescriptions(){let i=Object.create(null);for(let[e,t]of this._commands){let{description:n}=t;n&&(i[e]=n)}return Promise.resolve(i)}};Jd=new WeakMap,oD=new WeakMap;AK=Ne([Be(0,mm),Be(1,no)],AK);var bK=class{constructor(e,t,n){this._commands=e,this._lookupApiCommand=t,this._logService=n,this.delegatingCommandId=`_vscode_delegate_cmd_${Date.now().toString(36)}`,this._cache=new Map,this._cachIdPool=0,this._commands.registerCommand(!0,this.delegatingCommandId,this._executeConvertedCommand,this)}toInternal(e,t){if(!e)return;let n={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return n;let o=this._lookupApiCommand(e.command);if(o)n.id=o.internalId,n.arguments=o.args.map((r,s)=>r.convert(e.arguments&&e.arguments[s]));else if(Dn(e.arguments)){let r=++this._cachIdPool;this._cache.set(r,e),t.add(ct(()=>{this._cache.delete(r),this._logService.trace("CommandsConverter#DISPOSE",r)})),n.$ident=r,n.id=this.delegatingCommandId,n.arguments=[r],this._logService.trace("CommandsConverter#CREATE",e.command,r)}return n}fromInternal(e){return typeof e.$ident=="number"?this._cache.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this._cache.get(e[0])}_executeConvertedCommand(...e){let t=this.getActualCommand(...e);return this._logService.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this._commands.executeCommand(t.command,...t.arguments||[]):Promise.reject("actual command NOT FOUND")}},fC=class{constructor(e,t){this.description=e,this.convert=t}};fC.Void=new fC("no result",i=>i);function Ks(i){return function(e){q0.INSTANCE.registerNamedCustomer(i,e)}}function $Ee(i){q0.INSTANCE.registerCustomer(i)}var q0=class{constructor(){this._namedCustomers=[],this._customers=[]}registerNamedCustomer(e,t){let n=[e,t];this._namedCustomers.push(n)}getNamedCustomers(){return this._namedCustomers}registerCustomer(e){this._customers.push(e)}getCustomers(){return this._customers}};q0.INSTANCE=new q0;var wK=class{constructor(i,e,t){this._commandService=e,this._extensionService=t,this._commandRegistrations=new Map,this._proxy=i.getProxy(sn.ExtHostCommands),this._generateCommandsDocumentationRegistration=ft.registerCommand("_generateCommandsDocumentation",()=>this._generateCommandsDocumentation())}dispose(){st(this._commandRegistrations.values()),this._commandRegistrations.clear(),this._generateCommandsDocumentationRegistration.dispose()}async _generateCommandsDocumentation(){let i=await this._proxy.$getContributedCommandHandlerDescriptions(),e=ft.getCommands();for(let[n,o]of e)o.description&&(i[n]=o.description);let t=[];for(let n in i)t.push("`"+n+"` - "+GEe(i[n]));console.log(t.join(`
`))}$registerCommand(i){this._commandRegistrations.set(i,ft.registerCommand(i,(e,...t)=>this._proxy.$executeContributedCommand(i,...t).then(n=>cc(n))))}$unregisterCommand(i){let e=this._commandRegistrations.get(i);e&&(e.dispose(),this._commandRegistrations.delete(i))}$fireCommandActivationEvent(i){let e=`onCommand:${i}`;this._extensionService.activationEventIsDone(e)||this._extensionService.activateByEvent(e)}async $executeCommand(i,e,t){e instanceof ld&&(e=e.value);for(let n=0;n<e.length;n++)e[n]=cc(e[n]);if(t&&e.length>0&&!ft.getCommand(i))throw await this._extensionService.activateByEvent(`onCommand:${i}`),new Error("$executeCommand:retry");return this._commandService.executeCommand(i,...e)}$getCommands(){return Promise.resolve([...ft.getCommands().keys()])}};wK=Ne([Ks(Tt.MainThreadCommands),Be(1,ji),Be(2,iX)],wK);function GEe(i){if(typeof i=="string")return i;{let e=[i.description];if(e.push(`

`),i.args)for(let t of i.args)e.push(`* _${t.name}_ - ${t.description||""}
`);return i.returns&&e.push(`* _(returns)_ - ${i.returns}`),e.push(`

`),e.join("")}}var CK=class{constructor(i,e){this._extHostLogService=e,this._reportedUsages=new Set,this._telemetryShape=i.getProxy(Tt.MainThreadTelemetry)}report(i,e,t){let n=this.getUsageKey(i,e);this._reportedUsages.has(n)||(this._reportedUsages.add(n),e.isUnderDevelopment&&this._extHostLogService.warn(`[Deprecation Warning] '${i}' is deprecated. ${t}`),this._telemetryShape.$publicLog2("extHostDeprecatedApiUsage",{extensionId:e.identifier.value,apiId:i}))}getUsageKey(i,e){return`${i}-${e.identifier.value}`}};CK=Ne([Be(0,mm),Be(1,no)],CK);var yK=class{constructor(){this._systemSchemes=new Set(Object.keys(Oe)),this._providerInfo=new Map,this.extUri=new ov(e=>{let t=this._providerInfo.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this._providerInfo.delete(e.scheme):this._providerInfo.set(e.scheme,t)}isFreeScheme(e){return!this._providerInfo.has(e)&&!this._systemSchemes.has(e)}getCapabilities(e){return this._providerInfo.get(e)}},Sce=ze("IExtHostFileSystemInfo"),Qd,Fu,Po,bT=class i{constructor(e,t,n,o,r,s){this._name=e,this._owner=t,this._maxDiagnosticsPerFile=n,Qd.set(this,void 0),Fu.set(this,void 0),Po.set(this,void 0),this._isDisposed=!1,Th(this,Po,new en(a=>o.getComparisonKey(a)),"f"),Th(this,Qd,r,"f"),Th(this,Fu,s,"f")}dispose(){var e;this._isDisposed||(vt(this,Fu,"f").fire([...vt(this,Po,"f").keys()]),(e=vt(this,Qd,"f"))==null||e.$clear(this._owner),vt(this,Po,"f").clear(),this._isDisposed=!0)}get name(){return this._checkDisposed(),this._name}set(e,t){if(!e){this.clear();return}this._checkDisposed();let n=[];if($.isUri(e)){if(!t){this.delete(e);return}vt(this,Po,"f").set(e,t.slice()),n=[e]}else if(Array.isArray(e)){n=[];let r;e=[...e].sort(i._compareIndexedTuplesByUri);for(let s of e){let[a,l]=s;if((!r||a.toString()!==r.toString())&&(r&&vt(this,Po,"f").get(r).length===0&&vt(this,Po,"f").delete(r),r=a,n.push(a),vt(this,Po,"f").set(a,[])),l){let c=vt(this,Po,"f").get(a);c?.push(...l)}else{let c=vt(this,Po,"f").get(a);c&&(c.length=0)}}}if(vt(this,Fu,"f").fire(n),!vt(this,Qd,"f"))return;let o=[];for(let r of n){let s=[],a=vt(this,Po,"f").get(r);if(a)if(a.length>this._maxDiagnosticsPerFile){s=[];let l=[zo.Error,zo.Warning,zo.Information,zo.Hint];e:for(let c=0;c<4;c++)for(let d of a)if(d.severity===l[c]&&s.push(Q0.from(d))===this._maxDiagnosticsPerFile)break e;s.push({severity:Xt.Info,message:m({key:"limitHit",comment:["amount of errors/warning skipped due to limits"]},"Not showing {0} further errors and warnings.",a.length-this._maxDiagnosticsPerFile),startLineNumber:s[s.length-1].startLineNumber,startColumn:s[s.length-1].startColumn,endLineNumber:s[s.length-1].endLineNumber,endColumn:s[s.length-1].endColumn})}else s=a.map(l=>Q0.from(l));o.push([r,s])}vt(this,Qd,"f").$changeMany(this._owner,o)}delete(e){var t;this._checkDisposed(),vt(this,Fu,"f").fire([e]),vt(this,Po,"f").delete(e),(t=vt(this,Qd,"f"))==null||t.$changeMany(this._owner,[[e,void 0]])}clear(){var e;this._checkDisposed(),vt(this,Fu,"f").fire([...vt(this,Po,"f").keys()]),vt(this,Po,"f").clear(),(e=vt(this,Qd,"f"))==null||e.$clear(this._owner)}forEach(e,t){this._checkDisposed();for(let[n,o]of this)e.call(t,n,o,this)}*[(Qd=new WeakMap,Fu=new WeakMap,Po=new WeakMap,Symbol.iterator)](){this._checkDisposed();for(let e of vt(this,Po,"f").keys())yield[e,this.get(e)]}get(e){this._checkDisposed();let t=vt(this,Po,"f").get(e);return Array.isArray(t)?Object.freeze(t.slice(0)):[]}has(e){return this._checkDisposed(),Array.isArray(vt(this,Po,"f").get(e))}_checkDisposed(){if(this._isDisposed)throw new Error("illegal state - object is disposed")}static _compareIndexedTuplesByUri(e,t){return e[0].toString()<t[0].toString()?-1:e[0].toString()>t[0].toString()?1:0}},_C=class Gm{constructor(e,t,n){this._logService=t,this._fileSystemInfoService=n,this._collections=new Map,this._onDidChangeDiagnostics=new hD({merge:o=>o.flat(),delay:50}),this.onDidChangeDiagnostics=Z.map(this._onDidChangeDiagnostics.event,Gm._mapper),this._proxy=e.getProxy(Tt.MainThreadDiagnostics)}static _mapper(e){let t=new en;for(let n of e)t.set(n,n);return{uris:Object.freeze(Array.from(t.values()))}}createDiagnosticCollection(e,t){let{_collections:n,_proxy:o,_onDidChangeDiagnostics:r,_logService:s,_fileSystemInfoService:a}=this,l=new class{$changeMany(d,h){o.$changeMany(d,h),s.trace("[DiagnosticCollection] change many (extension, owner, uris)",e.value,d,h.length===0?"CLEARING":h)}$clear(d){o.$clear(d),s.trace("[DiagnosticCollection] remove all (extension, owner)",e.value,d)}dispose(){o.dispose()}},c;if(!t)t="_generated_diagnostic_collection_name_#"+Gm._idPool++,c=t;else if(!n.has(t))c=t;else{this._logService.warn(`DiagnosticCollection with name '${t}' does already exist.`);do c=t+Gm._idPool++;while(n.has(c))}return new class extends bT{constructor(){super(t,c,Gm._maxDiagnosticsPerFile,a.extUri,l,r),n.set(c,this)}dispose(){super.dispose(),n.delete(c)}}}getDiagnostics(e){if(e)return this._getDiagnostics(e);{let t=new Map,n=[];for(let o of this._collections.values())o.forEach((r,s)=>{let a=t.get(r.toString());typeof a>"u"&&(a=n.length,t.set(r.toString(),a),n.push([r,[]])),n[a][1]=n[a][1].concat(...s)});return n}}_getDiagnostics(e){let t=[];for(let n of this._collections.values())n.has(e)&&(t=t.concat(n.get(e)));return t}$acceptMarkersChange(e){if(!this._mirrorCollection){let t="_generated_mirror",n=new bT(t,t,Gm._maxDiagnosticsPerFile,this._fileSystemInfoService.extUri,void 0,this._onDidChangeDiagnostics);this._collections.set(t,n),this._mirrorCollection=n}for(let[t,n]of e)this._mirrorCollection.set($.revive(t),n.map(Q0.to))}};_C._idPool=0;_C._maxDiagnosticsPerFile=1e3;_C=Ne([Be(1,no),Be(2,Sce)],_C);function Dce(i,e,t,n){if(!i||n>200)return null;if(typeof i=="object"){if(i.$mid===1)return t?$.revive(e.transformIncoming(i)):e.transformIncoming(i);for(let o in i)if(Object.hasOwnProperty.call(i,o)){let r=Dce(i[o],e,t,n+1);r!==null&&(i[o]=r)}}return null}function Hv(i,e){let t=Dce(i,e,!1,0);return t===null?i:t}var wT=class{constructor(){this._actual=null,this._actualOk=null,this._actualErr=null,this._hasValue=!1,this._value=null,this._hasErr=!1,this._err=null}get[Symbol.toStringTag](){return this.toString()}_ensureActual(){return this._actual||(this._actual=new Promise((e,t)=>{this._actualOk=e,this._actualErr=t,this._hasValue&&this._actualOk(this._value),this._hasErr&&this._actualErr(this._err)})),this._actual}resolveOk(e){this._hasValue||this._hasErr||(this._hasValue=!0,this._value=e,this._actual&&this._actualOk(e))}resolveErr(e){this._hasValue||this._hasErr||(this._hasErr=!0,this._err=e,this._actual?this._actualErr(e):Ye(e))}then(e,t){return this._ensureActual().then(e,t)}catch(e){return this._ensureActual().then(void 0,e)}finally(e){return this._ensureActual().finally(e)}},SK=class extends wT{constructor(){super(),this._hasErr=!0,this._err=new ya}},xce;function DK(i,e){try{return JSON.stringify(i,e)}catch{return"null"}}var rX="$$ref$$",YEe={[rX]:-1};function Uie(i,e=null,t=!1){let n=[];return{jsonString:(t?DK:JSON.stringify)(i,(o,r)=>{if(typeof r>"u")return YEe;if(typeof r=="object"){if(r instanceof Gi){let s=n.push(r)-1;return{[rX]:s}}if(e)return e(o,r)}return r}),referencedBuffers:n}}function kce(i,e,t){return JSON.parse(i,(n,o)=>{if(o){let r=o[rX];if(typeof r=="number")return e[r];if(t&&o.$mid===1)return t.transformIncoming(o)}return o})}function Qie(i,e){return JSON.stringify(i,e)}function JEe(i){return i?(e,t)=>t&&t.$mid===1?i.transformOutgoing(t):t:null}var XEe=()=>{},ZEe=Symbol.for("rpcProtocol"),eLe=Symbol.for("rpcProxy"),CT=class i extends J{constructor(e,t=null,n=null){super(),this[xce]=!0,this._onDidChangeResponsiveState=this._register(new nt),this.onDidChangeResponsiveState=this._onDidChangeResponsiveState.event,this._protocol=e,this._logger=t,this._uriTransformer=n,this._uriReplacer=JEe(this._uriTransformer),this._isDisposed=!1,this._locals=[],this._proxies=[];for(let o=0,r=mC.count;o<r;o++)this._locals[o]=null,this._proxies[o]=null;this._lastMessageId=0,this._cancelInvokedHandlers=Object.create(null),this._pendingRPCReplies={},this._responsiveState=0,this._unacknowledgedCount=0,this._unresponsiveTime=0,this._asyncCheckUresponsive=this._register(new jt(()=>this._checkUnresponsive(),1e3)),this._protocol.onMessage(o=>this._receiveOneMessage(o))}dispose(){this._isDisposed=!0,Object.keys(this._pendingRPCReplies).forEach(e=>{this._pendingRPCReplies[e].resolveErr(sD())})}drain(){return typeof this._protocol.drain=="function"?this._protocol.drain():Promise.resolve()}_onWillSendRequest(e){this._unacknowledgedCount===0&&(this._unresponsiveTime=Date.now()+i.UNRESPONSIVE_TIME),this._unacknowledgedCount++,this._asyncCheckUresponsive.isScheduled()||this._asyncCheckUresponsive.schedule()}_onDidReceiveAcknowledge(e){this._unresponsiveTime=Date.now()+i.UNRESPONSIVE_TIME,this._unacknowledgedCount--,this._unacknowledgedCount===0&&this._asyncCheckUresponsive.cancel(),this._setResponsiveState(0)}_checkUnresponsive(){this._unacknowledgedCount!==0&&(Date.now()>this._unresponsiveTime?this._setResponsiveState(1):this._asyncCheckUresponsive.schedule())}_setResponsiveState(e){this._responsiveState!==e&&(this._responsiveState=e,this._onDidChangeResponsiveState.fire(this._responsiveState))}get responsiveState(){return this._responsiveState}transformIncomingURIs(e){return this._uriTransformer?Hv(e,this._uriTransformer):e}getProxy(e){let{nid:t,sid:n}=e;return this._proxies[t]||(this._proxies[t]=this._createProxy(t,n)),this._proxies[t]}_createProxy(e,t){let n={get:(o,r)=>(typeof r=="string"&&!o[r]&&r.charCodeAt(0)===36&&(o[r]=(...s)=>this._remoteCall(e,r,s)),r===eLe?t:o[r])};return new Proxy(Object.create(null),n)}set(e,t){return this._locals[e.nid]=t,t}assertRegistered(e){for(let t=0,n=e.length;t<n;t++){let o=e[t];if(!this._locals[o.nid])throw new Error(`Missing proxy instance ${o.sid}`)}}_receiveOneMessage(e){var t;if(this._isDisposed)return;let n=e.byteLength,o=un.read(e,0),r=o.readUInt8(),s=o.readUInt32();switch(r){case 1:case 2:{let{rpcId:a,method:l,args:c}=Lr.deserializeRequestJSONArgs(o);this._uriTransformer&&(c=Hv(c,this._uriTransformer)),this._receiveRequest(n,s,a,l,c,r===2);break}case 3:case 4:{let{rpcId:a,method:l,args:c}=Lr.deserializeRequestMixedArgs(o);this._uriTransformer&&(c=Hv(c,this._uriTransformer)),this._receiveRequest(n,s,a,l,c,r===4);break}case 5:{(t=this._logger)==null||t.logIncoming(n,s,0,"ack"),this._onDidReceiveAcknowledge(s);break}case 6:{this._receiveCancel(n,s);break}case 7:{this._receiveReply(n,s,void 0);break}case 9:{let a=Lr.deserializeReplyOKJSON(o);this._uriTransformer&&(a=Hv(a,this._uriTransformer)),this._receiveReply(n,s,a);break}case 10:{let a=Lr.deserializeReplyOKJSONWithBuffers(o,this._uriTransformer);this._receiveReply(n,s,a);break}case 8:{let a=Lr.deserializeReplyOKVSBuffer(o);this._receiveReply(n,s,a);break}case 11:{let a=Lr.deserializeReplyErrError(o);this._uriTransformer&&(a=Hv(a,this._uriTransformer)),this._receiveReplyErr(n,s,a);break}case 12:{this._receiveReplyErr(n,s,void 0);break}default:console.error("received unexpected message"),console.error(e)}}_receiveRequest(e,t,n,o,r,s){var a,l;(a=this._logger)==null||a.logIncoming(e,t,1,`receiveRequest ${fS(n)}.${o}(`,r);let c=String(t),d,h;if(s){let g=new SN;r.push(g.token),d=this._invokeHandler(n,o,r),h=()=>g.cancel()}else d=this._invokeHandler(n,o,r),h=XEe;this._cancelInvokedHandlers[c]=h;let u=Lr.serializeAcknowledged(t);(l=this._logger)==null||l.logOutgoing(u.byteLength,t,1,"ack"),this._protocol.send(u),d.then(g=>{var p;delete this._cancelInvokedHandlers[c];let f=Lr.serializeReplyOK(t,g,this._uriReplacer);(p=this._logger)==null||p.logOutgoing(f.byteLength,t,1,"reply:",g),this._protocol.send(f)},g=>{var p;delete this._cancelInvokedHandlers[c];let f=Lr.serializeReplyErr(t,g);(p=this._logger)==null||p.logOutgoing(f.byteLength,t,1,"replyErr:",g),this._protocol.send(f)})}_receiveCancel(e,t){var n,o,r;(n=this._logger)==null||n.logIncoming(e,t,1,"receiveCancel");let s=String(t);(r=(o=this._cancelInvokedHandlers)[s])==null||r.call(o)}_receiveReply(e,t,n){var o;(o=this._logger)==null||o.logIncoming(e,t,0,"receiveReply:",n);let r=String(t);if(!this._pendingRPCReplies.hasOwnProperty(r))return;let s=this._pendingRPCReplies[r];delete this._pendingRPCReplies[r],s.resolveOk(n)}_receiveReplyErr(e,t,n){var o;(o=this._logger)==null||o.logIncoming(e,t,0,"receiveReplyErr:",n);let r=String(t);if(!this._pendingRPCReplies.hasOwnProperty(r))return;let s=this._pendingRPCReplies[r];delete this._pendingRPCReplies[r];let a;n&&(n.$isError?(a=new Error,a.name=n.name,a.message=n.message,a.stack=n.stack):a=n),s.resolveErr(a)}_invokeHandler(e,t,n){try{return Promise.resolve(this._doInvokeHandler(e,t,n))}catch(o){return Promise.reject(o)}}_doInvokeHandler(e,t,n){let o=this._locals[e];if(!o)throw new Error("Unknown actor "+fS(e));let r=o[t];if(typeof r!="function")throw new Error("Unknown method "+t+" on actor "+fS(e));return r.apply(o,n)}_remoteCall(e,t,n){var o;if(this._isDisposed)return new SK;let r=null;if(n.length>0&&et.isCancellationToken(n[n.length-1])&&(r=n.pop()),r&&r.isCancellationRequested)return Promise.reject(sD());let s=Lr.serializeRequestArguments(n,this._uriReplacer),a=++this._lastMessageId,l=String(a),c=new wT;r&&r.onCancellationRequested(()=>{var h;let u=Lr.serializeCancel(a);(h=this._logger)==null||h.logOutgoing(u.byteLength,a,0,"cancel"),this._protocol.send(Lr.serializeCancel(a))}),this._pendingRPCReplies[l]=c,this._onWillSendRequest(a);let d=Lr.serializeRequest(a,e,t,s,!!r);return(o=this._logger)==null||o.logOutgoing(d.byteLength,a,0,`request: ${fS(e)}.${t}(`,n),this._protocol.send(d),c}};xce=ZEe;CT.UNRESPONSIVE_TIME=3*1e3;var un=class{constructor(i,e){this._buff=i,this._offset=e}static alloc(i,e,t){let n=new un(Gi.alloc(t+1+4),0);return n.writeUInt8(i),n.writeUInt32(e),n}static read(i,e){return new un(i,e)}get buffer(){return this._buff}static sizeUInt8(){return 1}writeUInt8(i){this._buff.writeUInt8(i,this._offset),this._offset+=1}readUInt8(){let i=this._buff.readUInt8(this._offset);return this._offset+=1,i}writeUInt32(i){this._buff.writeUInt32BE(i,this._offset),this._offset+=4}readUInt32(){let i=this._buff.readUInt32BE(this._offset);return this._offset+=4,i}static sizeShortString(i){return 1+i.byteLength}writeShortString(i){this._buff.writeUInt8(i.byteLength,this._offset),this._offset+=1,this._buff.set(i,this._offset),this._offset+=i.byteLength}readShortString(){let i=this._buff.readUInt8(this._offset);this._offset+=1;let e=this._buff.slice(this._offset,this._offset+i).toString();return this._offset+=i,e}static sizeLongString(i){return 4+i.byteLength}writeLongString(i){this._buff.writeUInt32BE(i.byteLength,this._offset),this._offset+=4,this._buff.set(i,this._offset),this._offset+=i.byteLength}readLongString(){let i=this._buff.readUInt32BE(this._offset);this._offset+=4;let e=this._buff.slice(this._offset,this._offset+i).toString();return this._offset+=i,e}writeBuffer(i){this._buff.writeUInt32BE(i.byteLength,this._offset),this._offset+=4,this._buff.set(i,this._offset),this._offset+=i.byteLength}static sizeVSBuffer(i){return 4+i.byteLength}writeVSBuffer(i){this._buff.writeUInt32BE(i.byteLength,this._offset),this._offset+=4,this._buff.set(i,this._offset),this._offset+=i.byteLength}readVSBuffer(){let i=this._buff.readUInt32BE(this._offset);this._offset+=4;let e=this._buff.slice(this._offset,this._offset+i);return this._offset+=i,e}static sizeMixedArray(i){let e=0;e+=1;for(let t=0,n=i.length;t<n;t++){let o=i[t];switch(e+=1,o.type){case 1:e+=this.sizeLongString(o.value);break;case 2:e+=this.sizeVSBuffer(o.value);break;case 3:e+=this.sizeUInt32,e+=this.sizeLongString(o.value);for(let r=0;r<o.buffers.length;++r)e+=this.sizeVSBuffer(o.buffers[r]);break}}return e}writeMixedArray(i){this._buff.writeUInt8(i.length,this._offset),this._offset+=1;for(let e=0,t=i.length;e<t;e++){let n=i[e];switch(n.type){case 1:this.writeUInt8(1),this.writeLongString(n.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(n.value);break;case 3:this.writeUInt8(3),this.writeUInt32(n.buffers.length),this.writeLongString(n.value);for(let o=0;o<n.buffers.length;++o)this.writeBuffer(n.buffers[o]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){let i=this._buff.readUInt8(this._offset);this._offset+=1;let e=new Array(i);for(let t=0;t<i;t++)switch(this.readUInt8()){case 1:e[t]=this.readLongString();break;case 2:e[t]=this.readVSBuffer();break;case 3:{let n=this.readUInt32(),o=this.readLongString(),r=[];for(let s=0;s<n;++s)r.push(this.readVSBuffer());e[t]=new ld(kce(o,r,null));break}case 4:e[t]=void 0;break}return e}};un.sizeUInt32=4;var Lr=class{static _useMixedArgSerialization(e){for(let t=0,n=e.length;t<n;t++)if(e[t]instanceof Gi||e[t]instanceof ld||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this._useMixedArgSerialization(e)){let n=[];for(let o=0,r=e.length;o<r;o++){let s=e[o];if(s instanceof Gi)n[o]={type:2,value:s};else if(typeof s>"u")n[o]={type:4};else if(s instanceof ld){let{jsonString:a,referencedBuffers:l}=Uie(s.value,t);n[o]={type:3,value:Gi.fromString(a),buffers:l}}else n[o]={type:1,value:Gi.fromString(Qie(s,t))}}return{type:1,args:n}}return{type:0,args:Qie(e,t)}}static serializeRequest(e,t,n,o,r){switch(o.type){case 0:return this._requestJSONArgs(e,t,n,o.args,r);case 1:return this._requestMixedArgs(e,t,n,o.args,r)}}static _requestJSONArgs(e,t,n,o,r){let s=Gi.fromString(n),a=Gi.fromString(o),l=0;l+=un.sizeUInt8(),l+=un.sizeShortString(s),l+=un.sizeLongString(a);let c=un.alloc(r?2:1,e,l);return c.writeUInt8(t),c.writeShortString(s),c.writeLongString(a),c.buffer}static deserializeRequestJSONArgs(e){let t=e.readUInt8(),n=e.readShortString(),o=e.readLongString();return{rpcId:t,method:n,args:JSON.parse(o)}}static _requestMixedArgs(e,t,n,o,r){let s=Gi.fromString(n),a=0;a+=un.sizeUInt8(),a+=un.sizeShortString(s),a+=un.sizeMixedArray(o);let l=un.alloc(r?4:3,e,a);return l.writeUInt8(t),l.writeShortString(s),l.writeMixedArray(o),l.buffer}static deserializeRequestMixedArgs(e){let t=e.readUInt8(),n=e.readShortString(),o=e.readMixedArray(),r=new Array(o.length);for(let s=0,a=o.length;s<a;s++){let l=o[s];typeof l=="string"?r[s]=JSON.parse(l):r[s]=l}return{rpcId:t,method:n,args:r}}static serializeAcknowledged(e){return un.alloc(5,e,0).buffer}static serializeCancel(e){return un.alloc(6,e,0).buffer}static serializeReplyOK(e,t,n){if(typeof t>"u")return this._serializeReplyOKEmpty(e);if(t instanceof Gi)return this._serializeReplyOKVSBuffer(e,t);if(t instanceof ld){let{jsonString:o,referencedBuffers:r}=Uie(t.value,n,!0);return this._serializeReplyOKJSONWithBuffers(e,o,r)}else return this._serializeReplyOKJSON(e,DK(t,n))}static _serializeReplyOKEmpty(e){return un.alloc(7,e,0).buffer}static _serializeReplyOKVSBuffer(e,t){let n=0;n+=un.sizeVSBuffer(t);let o=un.alloc(8,e,n);return o.writeVSBuffer(t),o.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static _serializeReplyOKJSON(e,t){let n=Gi.fromString(t),o=0;o+=un.sizeLongString(n);let r=un.alloc(9,e,o);return r.writeLongString(n),r.buffer}static _serializeReplyOKJSONWithBuffers(e,t,n){let o=Gi.fromString(t),r=0;r+=un.sizeUInt32,r+=un.sizeLongString(o);for(let a of n)r+=un.sizeVSBuffer(a);let s=un.alloc(10,e,r);s.writeUInt32(n.length),s.writeLongString(o);for(let a of n)s.writeBuffer(a);return s.buffer}static deserializeReplyOKJSON(e){let t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){let n=e.readUInt32(),o=e.readLongString(),r=[];for(let s=0;s<n;++s)r.push(e.readVSBuffer());return new ld(kce(o,r,t))}static serializeReplyErr(e,t){let n=t?DK(VF(t),null):void 0;if(typeof n!="string")return this._serializeReplyErrEmpty(e);let o=Gi.fromString(n),r=0;r+=un.sizeLongString(o);let s=un.alloc(11,e,r);return s.writeLongString(o),s.buffer}static deserializeReplyErrError(e){let t=e.readLongString();return JSON.parse(t)}static _serializeReplyErrEmpty(e){return un.alloc(12,e,0).buffer}},ah;(function(i){i[i.Undefined=0]="Undefined",i[i.String=1]="String",i[i.Buffer=2]="Buffer",i[i.VSBuffer=3]="VSBuffer",i[i.Array=4]="Array",i[i.Object=5]="Object"})(ah||(ah={}));function Bm(i){let e=Gi.alloc(1);return e.writeUInt8(i,0),e}Bm(ah.Undefined),Bm(ah.String),Bm(ah.Buffer),Bm(ah.VSBuffer),Bm(ah.Array),Bm(ah.Object);var xK=class{constructor(){this._hasListeners=!1,this._isDeliveringMessages=!1,this._bufferedMessages=[],this._emitter=new nt({onFirstListenerAdd:()=>{this._hasListeners=!0,queueMicrotask(()=>this._deliverMessages())},onLastListenerRemove:()=>{this._hasListeners=!1}}),this.event=this._emitter.event}_deliverMessages(){if(!this._isDeliveringMessages){for(this._isDeliveringMessages=!0;this._hasListeners&&this._bufferedMessages.length>0;)this._emitter.fire(this._bufferedMessages.shift());this._isDeliveringMessages=!1}}fire(e){this._hasListeners?this._bufferedMessages.length>0?this._bufferedMessages.push(e):this._emitter.fire(e):this._bufferedMessages.push(e)}flushBuffer(){this._bufferedMessages=[]}},kK=new Map;function tLe(i,e){e?kK.set(i,e):kK.delete(i)}function iLe(i){return kK.get(i)}var EK=class extends JL{constructor(e,t,n,o,r,s,a,l){super(t,n,o,r),this._proxy=e,this._languageId=s,this._isDirty=a,this.notebook=l,this._isDisposed=!1}dispose(){vr(!this._isDisposed),this._isDisposed=!0,this._isDirty=!1}equalLines(e){return Zn(this._lines,e)}get document(){if(!this._document){let e=this;this._document={get uri(){return e._uri},get fileName(){return e._uri.fsPath},get isUntitled(){return e._uri.scheme===Oe.untitled},get languageId(){return e._languageId},get version(){return e._versionId},get isClosed(){return e._isDisposed},get isDirty(){return e._isDirty},save(){return e._save()},getText(t){return t?e._getTextInRange(t):e.getText()},get eol(){return e._eol===`
`?$a.LF:$a.CRLF},get lineCount(){return e._lines.length},lineAt(t){return e._lineAt(t)},offsetAt(t){return e._offsetAt(t)},positionAt(t){return e._positionAt(t)},validateRange(t){return e._validateRange(t)},validatePosition(t){return e._validatePosition(t)},getWordRangeAtPosition(t,n){return e._getWordRangeAtPosition(t,n)}}}return Object.freeze(this._document)}_acceptLanguageId(e){vr(!this._isDisposed),this._languageId=e}_acceptIsDirty(e){vr(!this._isDisposed),this._isDirty=e}_save(){return this._isDisposed?Promise.reject(new Error("Document has been closed")):this._proxy.$trySaveDocument(this._uri)}_getTextInRange(e){let t=this._validateRange(e);if(t.isEmpty)return"";if(t.isSingleLine)return this._lines[t.start.line].substring(t.start.character,t.end.character);let n=this._eol,o=t.start.line,r=t.end.line,s=[];s.push(this._lines[o].substring(t.start.character));for(let a=o+1;a<r;a++)s.push(this._lines[a]);return s.push(this._lines[r].substring(0,t.end.character)),s.join(n)}_lineAt(e){let t;if(e instanceof ti?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this._lines.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new LK(t,this._lines[t],t===this._lines.length-1)}_offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}_positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return new ti(t.index,Math.min(t.remainder,n))}_validateRange(e){if(!(e instanceof Zt))throw new Error("Invalid argument");let t=this._validatePosition(e.start),n=this._validatePosition(e.end);return t===e.start&&n===e.end?e:new Zt(t.line,t.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ti))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:t,character:n}=e,o=!1;if(t<0)t=0,n=0,o=!0;else if(t>=this._lines.length)t=this._lines.length-1,n=this._lines[t].length,o=!0;else{let r=this._lines[t].length;n<0?(n=0,o=!0):n>r&&(n=r,o=!0)}return o?new ti(t,n):e}_getWordRangeAtPosition(e,t){let n=this._validatePosition(e);if(!t)t=iLe(this._languageId);else if(wM(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);let o=L_(n.character+1,hY(t),this._lines[n.line],0);if(o)return new Zt(n.line,o.startColumn-1,n.line,o.endColumn-1)}},LK=class{constructor(e,t,n){this._line=e,this._text=t,this._isLastLine=n}get lineNumber(){return this._line}get text(){return this._text}get range(){return new Zt(this._line,0,this._line,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Zt(this._line,0,this._line+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}},IK=class{constructor(e,t){this._onDidAddDocument=new nt,this._onDidRemoveDocument=new nt,this._onDidChangeDocument=new nt,this._onDidSaveDocument=new nt,this.onDidAddDocument=this._onDidAddDocument.event,this.onDidRemoveDocument=this._onDidRemoveDocument.event,this.onDidChangeDocument=this._onDidChangeDocument.event,this.onDidSaveDocument=this._onDidSaveDocument.event,this._toDispose=new ne,this._documentLoader=new Map,this._proxy=e.getProxy(Tt.MainThreadDocuments),this._documentsAndEditors=t,this._documentsAndEditors.onDidRemoveDocuments(n=>{for(let o of n)this._onDidRemoveDocument.fire(o.document)},void 0,this._toDispose),this._documentsAndEditors.onDidAddDocuments(n=>{for(let o of n)this._onDidAddDocument.fire(o.document)},void 0,this._toDispose)}dispose(){this._toDispose.dispose()}getAllDocumentData(){return[...this._documentsAndEditors.allDocuments()]}getDocumentData(e){if(!e)return;let t=this._documentsAndEditors.getDocument(e);if(t)return t}getDocument(e){let t=this.getDocumentData(e);if(!(t!=null&&t.document))throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){let t=this._documentsAndEditors.getDocument(e);if(t)return Promise.resolve(t);let n=this._documentLoader.get(e.toString());return n||(n=this._proxy.$tryOpenDocument(e).then(o=>{this._documentLoader.delete(e.toString());let r=$.revive(o);return Zv(this._documentsAndEditors.getDocument(r))},o=>(this._documentLoader.delete(e.toString()),Promise.reject(o))),this._documentLoader.set(e.toString(),n)),n}createDocumentData(e){return this._proxy.$tryCreateDocument(e).then(t=>$.revive(t))}$acceptModelLanguageChanged(e,t){let n=$.revive(e),o=this._documentsAndEditors.getDocument(n);if(!o)throw new Error("unknown document");this._onDidRemoveDocument.fire(o.document),o._acceptLanguageId(t),this._onDidAddDocument.fire(o.document)}$acceptModelSaved(e){let t=$.revive(e),n=this._documentsAndEditors.getDocument(t);if(!n)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this._onDidSaveDocument.fire(n.document)}$acceptDirtyStateChanged(e,t){let n=$.revive(e),o=this._documentsAndEditors.getDocument(n);if(!o)throw new Error("unknown document");o._acceptIsDirty(t),this._onDidChangeDocument.fire({document:o.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,n){let o=$.revive(e),r=this._documentsAndEditors.getDocument(o);if(!r)throw new Error("unknown document");r._acceptIsDirty(n),r.onEvents(t);let s;t.isUndoing?s=sC.Undo:t.isRedoing&&(s=sC.Redo),this._onDidChangeDocument.fire(mY({document:r.document,contentChanges:t.changes.map(a=>({range:Re.to(a.range),rangeOffset:a.rangeOffset,rangeLength:a.rangeLength,text:a.text})),reason:s}))}setWordDefinitionFor(e,t){tLe(e,t)}};function nLe(i,e,t){let n=i.getProxy(Tt.MainThreadQuickOpen);class o{constructor(g,p){this._sessions=new Map,this._instances=0,this._workspace=g,this._commands=p}showQuickPick(g,p,f=et.None){this._onDidSelectItem=void 0;let v=Promise.resolve(g),b=++this._instances,A=n.$show(b,{title:p?.title,placeHolder:p?.placeHolder,matchOnDescription:p?.matchOnDescription,matchOnDetail:p?.matchOnDetail,ignoreFocusLost:p?.ignoreFocusOut,canPickMany:p?.canPickMany},f),w={},C=A.then(()=>w);return Promise.race([C,v]).then(k=>{if(k!==w)return v.then(L=>{let S=[];for(let y=0;y<L.length;y++){let M=L[y];typeof M=="string"?S.push({label:M,handle:y}):M.kind===hC.Separator?S.push({type:"separator",label:M.label}):S.push({label:M.label,description:M.description,detail:M.detail,picked:M.picked,alwaysShow:M.alwaysShow,handle:y})}return p&&typeof p.onDidSelectItem=="function"&&(this._onDidSelectItem=y=>{p.onDidSelectItem(L[y])}),n.$setItems(b,S),A.then(y=>{if(typeof y=="number")return L[y];if(Array.isArray(y))return y.map(M=>L[M])})})}).then(void 0,k=>{if(!Ls(k))return n.$setError(b,k),Promise.reject(k)})}$onItemSelected(g){var p;(p=this._onDidSelectItem)==null||p.call(this,g)}showInput(g,p=et.None){return this._validateInput=g?.validateInput,n.$input(g,typeof this._validateInput=="function",p).then(void 0,f=>{if(!Ls(f))return Promise.reject(f)})}async $validateInput(g){if(!this._validateInput)return;let p=await this._validateInput(g);if(!p||typeof p=="string")return p;let f;switch(p.severity){case g_.Info:f=Mt.Info;break;case g_.Warning:f=Mt.Warning;break;case g_.Error:f=Mt.Error;break;default:f=p.message?Mt.Error:Mt.Ignore;break}return{content:p.message,severity:f}}async showWorkspaceFolderPick(g,p=et.None){let f=await this._commands.executeCommand("_workbench.pickWorkspaceFolder",[g]);if(!f)return;let v=await this._workspace.getWorkspaceFolders2();if(v)return v.find(b=>b.uri.toString()===f.uri.toString())}createQuickPick(g){let p=new d(g,()=>this._sessions.delete(p._id));return this._sessions.set(p._id,p),p}createInputBox(g){let p=new h(g,()=>this._sessions.delete(p._id));return this._sessions.set(p._id,p),p}$onDidChangeValue(g,p){let f=this._sessions.get(g);f?._fireDidChangeValue(p)}$onDidAccept(g){let p=this._sessions.get(g);p&&p._fireDidAccept()}$onDidChangeActive(g,p){let f=this._sessions.get(g);f instanceof d&&f._fireDidChangeActive(p)}$onDidChangeSelection(g,p){let f=this._sessions.get(g);f instanceof d&&f._fireDidChangeSelection(p)}$onDidTriggerButton(g,p){let f=this._sessions.get(g);f?._fireDidTriggerButton(p)}$onDidTriggerItemButton(g,p,f){let v=this._sessions.get(g);v instanceof d&&v._fireDidTriggerItemButton(p,f)}$onDidHide(g){let p=this._sessions.get(g);p&&p._fireDidHide()}}class r{constructor(g,p){this._extensionId=g,this._onDidDispose=p,this._id=d._nextId++,this._visible=!1,this._expectingHide=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!0,this._value="",this._buttons=[],this._handlesToButtons=new Map,this._onDidAcceptEmitter=new nt,this._onDidChangeValueEmitter=new nt,this._onDidTriggerButtonEmitter=new nt,this._onDidHideEmitter=new nt,this._pendingUpdate={id:this._id},this._disposed=!1,this._disposables=[this._onDidTriggerButtonEmitter,this._onDidHideEmitter,this._onDidAcceptEmitter,this._onDidChangeValueEmitter],this.onDidChangeValue=this._onDidChangeValueEmitter.event,this.onDidAccept=this._onDidAcceptEmitter.event,this.onDidTriggerButton=this._onDidTriggerButtonEmitter.event,this.onDidHide=this._onDidHideEmitter.event}get title(){return this._title}set title(g){this._title=g,this.update({title:g})}get step(){return this._steps}set step(g){this._steps=g,this.update({step:g})}get totalSteps(){return this._totalSteps}set totalSteps(g){this._totalSteps=g,this.update({totalSteps:g})}get enabled(){return this._enabled}set enabled(g){this._enabled=g,this.update({enabled:g})}get busy(){return this._busy}set busy(g){this._busy=g,this.update({busy:g})}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(g){this._ignoreFocusOut=g,this.update({ignoreFocusOut:g})}get value(){return this._value}set value(g){this._value=g,this.update({value:g})}get placeholder(){return this._placeholder}set placeholder(g){this._placeholder=g,this.update({placeholder:g})}get buttons(){return this._buttons}set buttons(g){this._buttons=g.slice(),this._handlesToButtons.clear(),g.forEach((p,f)=>{let v=p===U0.Back?-1:f;this._handlesToButtons.set(v,p)}),this.update({buttons:g.map((p,f)=>({...c(p),tooltip:p.tooltip,handle:p===U0.Back?-1:f}))})}show(){this._visible=!0,this._expectingHide=!0,this.update({visible:!0})}hide(){this._visible=!1,this.update({visible:!1})}_fireDidAccept(){this._onDidAcceptEmitter.fire()}_fireDidChangeValue(g){this._value=g,this._onDidChangeValueEmitter.fire(g)}_fireDidTriggerButton(g){let p=this._handlesToButtons.get(g);p&&this._onDidTriggerButtonEmitter.fire(p)}_fireDidHide(){this._expectingHide&&(this._expectingHide=this._visible,this._onDidHideEmitter.fire())}dispose(){this._disposed||(this._disposed=!0,this._fireDidHide(),this._disposables=st(this._disposables),this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this._onDidDispose(),n.$dispose(this._id))}update(g){if(!this._disposed){for(let p of Object.keys(g)){let f=g[p];this._pendingUpdate[p]=f===void 0?null:f}"visible"in this._pendingUpdate?(this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this.dispatchUpdate()):this._visible&&!this._updateTimeout&&(this._updateTimeout=setTimeout(()=>{this._updateTimeout=void 0,this.dispatchUpdate()},0))}}dispatchUpdate(){n.$createOrUpdate(this._pendingUpdate),this._pendingUpdate={id:this._id}}}r._nextId=1;function s(u){if(u instanceof Md)return{id:u.id};let g=l(u),p=a(u);return{dark:typeof g=="string"?$.file(g):g,light:typeof p=="string"?$.file(p):p}}function a(u){return typeof u=="object"&&"light"in u?u.light:u}function l(u){return typeof u=="object"&&"dark"in u?u.dark:u}function c(u){let g=s(u.iconPath),p,f;return"id"in g?f=zt.asClassName(g):p=g,{iconPath:p,iconClass:f}}class d extends r{constructor(g,p){super(g.identifier,p),this._items=[],this._handlesToItems=new Map,this._itemsToHandles=new Map,this._canSelectMany=!1,this._matchOnDescription=!0,this._matchOnDetail=!0,this._sortByLabel=!0,this._keepScrollPosition=!1,this._activeItems=[],this._onDidChangeActiveEmitter=new nt,this._selectedItems=[],this._onDidChangeSelectionEmitter=new nt,this._onDidTriggerItemButtonEmitter=new nt,this.onDidChangeActive=this._onDidChangeActiveEmitter.event,this.onDidChangeSelection=this._onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this._onDidTriggerItemButtonEmitter.event,this._disposables.push(this._onDidChangeActiveEmitter,this._onDidChangeSelectionEmitter,this._onDidTriggerItemButtonEmitter),this.update({type:"quickPick"})}get items(){return this._items}set items(g){var p;this._items=g.slice(),this._handlesToItems.clear(),this._itemsToHandles.clear(),g.forEach((v,b)=>{this._handlesToItems.set(b,v),this._itemsToHandles.set(v,b)});let f=[];for(let v=0;v<g.length;v++){let b=g[v];b.kind===hC.Separator?f.push({type:"separator",label:b.label}):f.push({handle:v,label:b.label,description:b.description,detail:b.detail,picked:b.picked,alwaysShow:b.alwaysShow,buttons:(p=b.buttons)==null?void 0:p.map((A,w)=>({...c(A),tooltip:A.tooltip,handle:w}))})}this.update({items:f})}get canSelectMany(){return this._canSelectMany}set canSelectMany(g){this._canSelectMany=g,this.update({canSelectMany:g})}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(g){this._matchOnDescription=g,this.update({matchOnDescription:g})}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(g){this._matchOnDetail=g,this.update({matchOnDetail:g})}get sortByLabel(){return this._sortByLabel}set sortByLabel(g){this._sortByLabel=g,this.update({sortByLabel:g})}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(g){this._keepScrollPosition=g,this.update({keepScrollPosition:g})}get activeItems(){return this._activeItems}set activeItems(g){this._activeItems=g.filter(p=>this._itemsToHandles.has(p)),this.update({activeItems:this._activeItems.map(p=>this._itemsToHandles.get(p))})}get selectedItems(){return this._selectedItems}set selectedItems(g){this._selectedItems=g.filter(p=>this._itemsToHandles.has(p)),this.update({selectedItems:this._selectedItems.map(p=>this._itemsToHandles.get(p))})}_fireDidChangeActive(g){let p=Ns(g.map(f=>this._handlesToItems.get(f)));this._activeItems=p,this._onDidChangeActiveEmitter.fire(p)}_fireDidChangeSelection(g){let p=Ns(g.map(f=>this._handlesToItems.get(f)));this._selectedItems=p,this._onDidChangeSelectionEmitter.fire(p)}_fireDidTriggerItemButton(g,p){let f=this._handlesToItems.get(g);if(!f||!f.buttons||!f.buttons.length)return;let v=f.buttons[p];v&&this._onDidTriggerItemButtonEmitter.fire({button:v,item:f})}}class h extends r{constructor(g,p){super(g.identifier,p),this._password=!1,this.update({type:"inputBox"})}get password(){return this._password}set password(g){this._password=g,this.update({password:g})}get prompt(){return this._prompt}set prompt(g){this._prompt=g,this.update({prompt:g})}get validationMessage(){return this._validationMessage}set validationMessage(g){this._validationMessage=g,g?typeof g=="string"?this.update({validationMessage:g,severity:Mt.Error}):this.update({validationMessage:g.message,severity:g.severity??Mt.Error}):this.update({validationMessage:void 0,severity:Mt.Ignore})}}return new o(e,t)}var oLe=ze("IExtHostInitDataService");function rLe(i){return!!i.preview}function vC(i,e,t){return new ov(n=>sX(n,t)).isEqual(i,e)}function sLe(i,e,t){return vC(i.uri,e.uri,t)?0:Is(i.uri.toString(),e.uri.toString())}function aLe(i,e,t){return i.index!==e.index?i.index<e.index?-1:1:vC(i.uri,e.uri,t)?Is(i.name,e.name):Is(i.uri.toString(),e.uri.toString())}function Ece(i,e,t,n){let o=i.slice(0).sort((s,a)=>t(s,a,n)),r=e.slice(0).sort((s,a)=>t(s,a,n));return Eke(o,r,(s,a)=>t(s,a,n))}function sX(i,e){let t=e.getCapabilities(i.scheme);return!(t&&t&1024)}var hA=class i extends g9{constructor(e,t,n,o,r,s,a){super(e,n.map(l=>new kJ(l)),o,r,a),this._name=t,this._isUntitled=s,this._workspaceFolders=[],this._structure=gd.forUris(a),n.forEach(l=>{this._workspaceFolders.push(l),this._structure.set(l.uri,l)})}static toExtHostWorkspace(e,t,n,o){if(!e)return{workspace:null,added:[],removed:[]};let{id:r,name:s,folders:a,configuration:l,transient:c,isUntitled:d}=e,h=[],u=t;t?a.forEach((v,b)=>{let A=$.revive(v.uri),w=i._findFolder(n||t,A,o);w?(w.name=v.name,w.index=v.index,h.push(w)):h.push({uri:A,name:v.name,index:b})}):h.push(...a.map(({uri:v,name:b,index:A})=>({uri:$.revive(v),name:b,index:A}))),h.sort((v,b)=>v.index<b.index?-1:1);let g=new i(r,s,h,!!c,l?$.revive(l):null,!!d,v=>sX(v,o)),{added:p,removed:f}=Ece(u?u.workspaceFolders:[],g.workspaceFolders,sLe,o);return{workspace:g,added:p,removed:f}}static _findFolder(e,t,n){for(let o=0;o<e.folders.length;o++){let r=e.workspaceFolders[o];if(vC(r.uri,t,n))return r}}get name(){return this._name}get isUntitled(){return this._isUntitled}get workspaceFolders(){return this._workspaceFolders.slice(0)}getWorkspaceFolder(e,t){return t&&this._structure.get(e)&&(e=rv(e)),this._structure.findSubstr(e)}resolveWorkspaceFolder(e){return this._structure.get(e)}},TK=class{constructor(i,e,t,n){this._onDidChangeWorkspace=new nt,this.onDidChangeWorkspace=this._onDidChangeWorkspace.event,this._onDidGrantWorkspaceTrust=new nt,this.onDidGrantWorkspaceTrust=this._onDidGrantWorkspaceTrust.event,this._activeSearchCallbacks=[],this._trusted=!1,this._logService=n,this._extHostFileSystemInfo=t,this._requestIdProvider=new OQ,this._barrier=new SQ,this._proxy=i.getProxy(Tt.MainThreadWorkspace),this._messageService=i.getProxy(Tt.MainThreadMessageService);let o=e.workspace;this._confirmedWorkspace=o?new hA(o.id,o.name,[],!!o.transient,o.configuration?$.revive(o.configuration):null,!!o.isUntitled,r=>sX(r,t)):void 0}$initializeWorkspace(i,e){this._trusted=e,this.$acceptWorkspaceData(i),this._barrier.open()}waitForInitializeCall(){return this._barrier.wait()}get workspace(){return this._actualWorkspace}get name(){return this._actualWorkspace?this._actualWorkspace.name:void 0}get workspaceFile(){if(this._actualWorkspace&&this._actualWorkspace.configuration)return this._actualWorkspace.isUntitled?$.from({scheme:Oe.untitled,path:gs(rv(this._actualWorkspace.configuration))}):this._actualWorkspace.configuration}get _actualWorkspace(){return this._unconfirmedWorkspace||this._confirmedWorkspace}getWorkspaceFolders(){if(this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}updateWorkspaceFolders(i,e,t,...n){let o=[];if(Array.isArray(n)&&n.forEach(c=>{$.isUri(c.uri)&&!o.some(d=>vC(d.uri,c.uri,this._extHostFileSystemInfo))&&o.push({uri:c.uri,name:c.name||w5(c.uri)})}),this._unconfirmedWorkspace||[e,t].some(c=>typeof c!="number"||c<0)||t===0&&o.length===0)return!1;let r=this._actualWorkspace?this._actualWorkspace.workspaceFolders:[];if(e+t>r.length)return!1;let s=r.slice(0);s.splice(e,t,...o.map(c=>({uri:c.uri,name:c.name||w5(c.uri),index:void 0})));for(let c=0;c<s.length;c++){let d=s[c];if(s.some((h,u)=>u!==c&&vC(d.uri,h.uri,this._extHostFileSystemInfo)))return!1}s.forEach((c,d)=>c.index=d);let{added:a,removed:l}=Ece(r,s,aLe,this._extHostFileSystemInfo);if(a.length===0&&l.length===0)return!1;if(this._proxy){let c=i.displayName||i.name;this._proxy.$updateWorkspaceFolders(c,e,t,o).then(void 0,d=>{this._unconfirmedWorkspace=void 0;let h={source:{identifier:i.identifier,label:i.displayName||i.name}};this._messageService.$showMessage(zY.Error,m("updateerror","Extension '{0}' failed to update workspace folders: {1}",c,d.toString()),h,[])})}return this.trySetWorkspaceFolders(s),!0}getWorkspaceFolder(i,e){if(this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(i,e)}async getWorkspaceFolder2(i,e){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(i,e)}async resolveWorkspaceFolder(i){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.resolveWorkspaceFolder(i)}getPath(){if(!this._actualWorkspace)return;let{folders:i}=this._actualWorkspace;if(i.length!==0)return i[0].uri.fsPath}getRelativePath(i,e){let t,n="";if(typeof i=="string"?(t=$.file(i),n=i):typeof i<"u"&&(t=i,n=i.fsPath),!t)return n;let o=this.getWorkspaceFolder(t,!0);if(!o)return n;typeof e>"u"&&this._actualWorkspace&&(e=this._actualWorkspace.folders.length>1);let r=wre(o.uri,t);return e&&o.name&&(r=`${o.name}/${r}`),r}trySetWorkspaceFolders(i){this._actualWorkspace&&(this._unconfirmedWorkspace=hA.toExtHostWorkspace({id:this._actualWorkspace.id,name:this._actualWorkspace.name,configuration:this._actualWorkspace.configuration,folders:i,isUntitled:this._actualWorkspace.isUntitled},this._actualWorkspace,void 0,this._extHostFileSystemInfo).workspace||void 0)}$acceptWorkspaceData(i){let{workspace:e,added:t,removed:n}=hA.toExtHostWorkspace(i,this._confirmedWorkspace,this._unconfirmedWorkspace,this._extHostFileSystemInfo);this._confirmedWorkspace=e||void 0,this._unconfirmedWorkspace=void 0,this._onDidChangeWorkspace.fire(Object.freeze({added:t,removed:n}))}findFiles(i,e,t,n,o=et.None){this._logService.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${n.value}, entryPoint: findFiles`);let r;if(e===null?r=!1:e&&(typeof e=="string"?r=e:r=e.pattern),o&&o.isCancellationRequested)return Promise.resolve([]);let{includePattern:s,folder:a}=jie(K0.from(i));return this._proxy.$startFileSearch(Ov(s),Ov(a),Ov(r),Ov(t),o).then(l=>Array.isArray(l)?l.map(c=>$.revive(c)):[])}async findTextInFiles(i,e,t,n,o=et.None){this._logService.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${n.value}, entryPoint: findTextInFiles`);let r=this._requestIdProvider.getNext(),s=typeof e.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:e.previewOptions,{includePattern:a,folder:l}=jie(K0.from(e.include)),c=typeof e.exclude=="string"?e.exclude:e.exclude?e.exclude.pattern:void 0,d={ignoreSymlinks:typeof e.followSymlinks=="boolean"?!e.followSymlinks:void 0,disregardIgnoreFiles:typeof e.useIgnoreFiles=="boolean"?!e.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof e.useGlobalIgnoreFiles=="boolean"?!e.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof e.useParentIgnoreFiles=="boolean"?!e.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof e.useDefaultExcludes=="boolean"?!e.useDefaultExcludes:!0,fileEncoding:e.encoding,maxResults:e.maxResults,previewOptions:s,afterContext:e.afterContext,beforeContext:e.beforeContext,includePattern:a,excludePattern:c};if(this._activeSearchCallbacks[r]=h=>{let u=$.revive(h.resource);h.results.forEach(g=>{rLe(g)?t({uri:u,preview:{text:g.preview.text,matches:Aie(g.preview.matches,p=>new Zt(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn))},ranges:Aie(g.ranges,p=>new Zt(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn))}):t({uri:u,text:g.text,lineNumber:g.lineNumber})})},o.isCancellationRequested)return{};try{let h=await this._proxy.$startTextSearch(i,Ov(l),d,r,o);return delete this._activeSearchCallbacks[r],h||{}}catch(h){throw delete this._activeSearchCallbacks[r],h}}$handleTextSearchResult(i,e){var t,n;(n=(t=this._activeSearchCallbacks)[e])==null||n.call(t,i)}saveAll(i){return this._proxy.$saveAll(i)}resolveProxy(i){return this._proxy.$resolveProxy(i)}get trusted(){return this._trusted}requestWorkspaceTrust(i){return this._proxy.$requestWorkspaceTrust(i)}$onDidGrantWorkspaceTrust(){this._trusted||(this._trusted=!0,this._onDidGrantWorkspaceTrust.fire())}};TK=Ne([Be(0,mm),Be(1,oLe),Be(2,Sce),Be(3,no)],TK);var lLe=ze("IExtHostWorkspace");function jie(i){let e,t;return i&&(typeof i=="string"?e=i:(e=i.pattern,t=$.revive(i.baseUri))),{includePattern:e,folder:t}}function Kie(i){i.dark=$.revive(i.dark),i.light&&(i.light=$.revive(i.light))}var MK=class{constructor(i,e){this._items={},this.sessions=new Map,this._proxy=i.getProxy(sn.ExtHostQuickOpen),this._quickInputService=e}dispose(){}$show(i,e,t){let n=new Promise((o,r)=>{this._items[i]={resolve:o,reject:r}});return e={...e,onDidFocus:o=>{o&&this._proxy.$onItemSelected(o.handle)}},e.canPickMany?this._quickInputService.pick(n,e,t).then(o=>{if(o)return o.map(r=>r.handle)}):this._quickInputService.pick(n,e,t).then(o=>{if(o)return o.handle})}$setItems(i,e){return this._items[i]&&(this._items[i].resolve(e),delete this._items[i]),Promise.resolve()}$setError(i,e){return this._items[i]&&(this._items[i].reject(e),delete this._items[i]),Promise.resolve()}$input(i,e,t){let n=Object.create(null);return i&&(n.title=i.title,n.password=i.password,n.placeHolder=i.placeHolder,n.valueSelection=i.valueSelection,n.prompt=i.prompt,n.value=i.value,n.ignoreFocusLost=i.ignoreFocusOut),e&&(n.validateInput=o=>this._proxy.$validateInput(o)),this._quickInputService.input(n,t)}$createOrUpdate(i){let e=i.id,t=this.sessions.get(e);if(!t){let r=i.type==="quickPick"?this._quickInputService.createQuickPick():this._quickInputService.createInputBox();if(r.onDidAccept(()=>{this._proxy.$onDidAccept(e)}),r.onDidTriggerButton(s=>{this._proxy.$onDidTriggerButton(e,s.handle)}),r.onDidChangeValue(s=>{this._proxy.$onDidChangeValue(e,s)}),r.onDidHide(()=>{this._proxy.$onDidHide(e)}),i.type==="quickPick"){let s=r;s.onDidChangeActive(a=>{this._proxy.$onDidChangeActive(e,a.map(l=>l.handle))}),s.onDidChangeSelection(a=>{this._proxy.$onDidChangeSelection(e,a.map(l=>l.handle))}),s.onDidTriggerItemButton(a=>{this._proxy.$onDidTriggerItemButton(e,a.item.handle,a.button.handle)})}t={input:r,handlesToItems:new Map},this.sessions.set(e,t)}let{input:n,handlesToItems:o}=t;for(let r in i)r==="id"||r==="type"||(r==="visible"?i.visible?n.show():n.hide():r==="items"?(o.clear(),i[r].forEach(s=>{s.type!=="separator"&&(s.buttons&&(s.buttons=s.buttons.map(a=>(a.iconPath&&Kie(a.iconPath),a))),o.set(s.handle,s))}),n[r]=i[r]):r==="activeItems"||r==="selectedItems"?n[r]=i[r].filter(s=>o.has(s)).map(s=>o.get(s)):r==="buttons"?n[r]=i.buttons.map(s=>s.handle===-1?this._quickInputService.backButton:(s.iconPath&&Kie(s.iconPath),s)):n[r]=i[r]);return Promise.resolve(void 0)}$dispose(i){let e=this.sessions.get(i);return e&&(e.input.dispose(),this.sessions.delete(i)),Promise.resolve(void 0)}};MK=Ne([Ks(Tt.MainThreadQuickOpen),Be(1,dl)],MK);function cLe(i){return i&&i.title}var NK=class{constructor(i,e){this._logService=e,this._proxy=i.getProxy(Tt.MainThreadMessageService)}showMessage(i,e,t,n,o){let r={source:{identifier:i.identifier,label:i.displayName||i.name}},s;typeof n=="string"||cLe(n)?s=[n,...o]:(r.modal=n?.modal,r.useCustom=n?.useCustom,r.detail=n?.detail,s=o),r.useCustom&&dEe(i,"resolvers");let a=[];for(let l=0;l<s.length;l++){let c=s[l];if(typeof c=="string")a.push({title:c,handle:l,isCloseAffordance:!1});else if(typeof c=="object"){let{title:d,isCloseAffordance:h}=c;a.push({title:d,isCloseAffordance:!!h,handle:l})}else this._logService.warn("Invalid message item:",c)}return this._proxy.$showMessage(e,t,r,a).then(l=>{if(typeof l=="number")return s[l]})}};NK=Ne([Be(1,no)],NK);var RK=class{constructor(i,e,t,n){this._notificationService=e,this._commandService=t,this._dialogService=n}dispose(){}$showMessage(i,e,t,n){return t.modal?this._showModalMessage(i,e,t.detail,n,t.useCustom):this._showMessage(i,e,n,t)}_showMessage(i,e,t,n){return new Promise(o=>{let r=[];class s extends ho{constructor(u,g,p){super(u,g,void 0,!0,()=>(o(p),Promise.resolve()))}}class a extends ho{constructor(u,g,p){super(u.value,g,void 0,!0,()=>p.executeCommand("_extensions.manage",u.value))}}t.forEach(h=>{r.push(new s("_extension_message_handle_"+h.handle,h.title,h.handle))});let l;n.source&&(l={label:m("extensionSource","{0} (Extension)",n.source.label),id:n.source.identifier.value}),l||(l=m("defaultSource","Extension"));let c=[];n.source&&c.push(new a(n.source.identifier,m("manageExtension","Manage Extension"),this._commandService));let d=this._notificationService.notify({severity:i,message:e,actions:{primary:r,secondary:c},source:l});Z.once(d.onDidClose)(()=>{st(r),st(c),o(void 0)})})}async _showModalMessage(i,e,t,n,o){let r,s=n.map((l,c)=>(l.isCloseAffordance===!0&&(r=c),l.title));r===void 0&&(s.length>0?s.push(m("cancel","Cancel")):s.push(m("ok","OK")),r=s.length-1);let{choice:a}=await this._dialogService.show(i,e,s,{cancelId:r,custom:o,detail:t});return a===n.length?void 0:n[a].handle}};RK=Ne([Ks(Tt.MainThreadMessageService),Be(1,nn),Be(2,ji),Be(3,gm)],RK);var FK=class{constructor(e){this._handles=0,this._mapHandleToCancellationSource=new Map,this._proxy=e}async withProgress(e,t,n){let o=this._handles++,{title:r,location:s,cancellable:a}=t,l={label:m("extensionSource","{0} (Extension)",e.displayName||e.name),id:e.identifier.value};return this._proxy.$startProgress(o,{location:dK.from(s),title:r,source:l,cancellable:a},e.isUnderDevelopment?void 0:e.identifier.value).catch(Fn),this._withProgress(o,n,!!a)}_withProgress(e,t,n){let o;n&&(o=new SN,this._mapHandleToCancellationSource.set(e,o));let r=a=>{this._proxy.$progressEnd(a),this._mapHandleToCancellationSource.delete(a),o&&o.dispose()},s;try{s=t(new BK(this._proxy,e),n&&o?o.token:et.None)}catch(a){throw r(e),a}return s.then(a=>r(e),a=>r(e)),s}$acceptProgressCanceled(e){let t=this._mapHandleToCancellationSource.get(e);t&&(t.cancel(),this._mapHandleToCancellationSource.delete(e))}},BK=class extends ic{constructor(e,t){super(n=>this.throttledReport(n)),this._proxy=e,this._handle=t}throttledReport(e){this._proxy.$progressReport(this._handle,e)}},PK=class extends ho{constructor(e,t,n){super(e,t,void 0,!0,()=>n.executeCommand("_extensions.manage",e))}},OK=class{constructor(i,e,t){this._commandService=t,this._progress=new Map,this._proxy=i.getProxy(sn.ExtHostProgress),this._progressService=e}dispose(){this._progress.forEach(i=>i.resolve()),this._progress.clear()}async $startProgress(i,e,t){let n=this._createTask(i);e.location===15&&t&&(e={...e,location:15,secondaryActions:[new PK(t,m("manageExtension","Manage Extension"),this._commandService)]}),this._progressService.withProgress(e,n,()=>this._proxy.$acceptProgressCanceled(i))}$progressReport(i,e){let t=this._progress.get(i);t?.progress.report(e)}$progressEnd(i){let e=this._progress.get(i);e&&(e.resolve(),this._progress.delete(i))}_createTask(i){return e=>new Promise(t=>{this._progress.set(i,{resolve:t,progress:e})})}};OK=Ne([Ks(Tt.MainThreadProgress),Be(1,QC),Be(2,ji)],OK);var HK=class{constructor(i,e,t,n,o){this._textModelResolverService=e,this._languageService=t,this._modelService=n,this._editorWorkerService=o,this._resourceContentProvider=new Map,this._pendingUpdate=new Map,this._proxy=i.getProxy(sn.ExtHostDocumentContentProviders)}dispose(){st(this._resourceContentProvider.values()),st(this._pendingUpdate.values())}$registerTextContentProvider(i,e){let t=this._textModelResolverService.registerTextModelContentProvider(e,{provideTextContent:n=>this._proxy.$provideTextDocumentContent(i,n).then(o=>{if(typeof o=="string"){let r=o.substr(0,1+o.search(/\r?\n/)),s=this._languageService.createByFilepathOrFirstLine(n,r);return this._modelService.createModel(o,s,n)}return null})});this._resourceContentProvider.set(i,t)}$unregisterTextContentProvider(i){let e=this._resourceContentProvider.get(i);e&&(e.dispose(),this._resourceContentProvider.delete(i))}$onVirtualDocumentChange(i,e){let t=this._modelService.getModel($.revive(i));if(!t)return;let n=this._pendingUpdate.get(t.id);n&&n.cancel();let o=new SN;this._pendingUpdate.set(t.id,o),this._editorWorkerService.computeMoreMinimalEdits(t.uri,[{text:e,range:t.getFullModelRange()}]).then(r=>{this._pendingUpdate.delete(t.id),!o.token.isCancellationRequested&&r&&r.length>0&&t.applyEdits(r.map(s=>Di.replace(_u.lift(s.range),s.text)))}).catch(Ye)}};HK=Ne([Ks(Tt.MainThreadDocumentContentProviders),Be(1,io),Be(2,ki),Be(3,li),Be(4,Qr)],HK);var yT=class i{constructor(e,t,n){this._documentsAndEditors=t,this._logService=n,this._documentContentProviders=new Map,this._proxy=e.getProxy(Tt.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(e,t){if(Object.keys(Oe).indexOf(e)>=0)throw new Error(`scheme '${e}' already registered`);let n=i._handlePool++;this._documentContentProviders.set(n,t),this._proxy.$registerTextContentProvider(n,e);let o;return typeof t.onDidChange=="function"&&(o=t.onDidChange(r=>{if(r.scheme!==e){this._logService.warn(`Provider for scheme '${e}' is firing event for schema '${r.scheme}' which will be IGNORED`);return}this._documentsAndEditors.getDocument(r)&&this.$provideTextDocumentContent(n,r).then(s=>{if(!s&&typeof s!="string")return;let a=this._documentsAndEditors.getDocument(r);if(!a)return;let l=il(s);if(!a.equalLines(l))return this._proxy.$onVirtualDocumentChange(r,s)},Ye)})),new ia(()=>{this._documentContentProviders.delete(n)&&this._proxy.$unregisterTextContentProvider(n),o&&(o.dispose(),o=void 0)})}$provideTextDocumentContent(e,t){let n=this._documentContentProviders.get(e);return n?Promise.resolve(n.provideTextDocumentContent($.revive(t),et.None)):Promise.reject(new Error(`unsupported uri-scheme: ${t.scheme}`))}};yT._handlePool=0;var ST=class i{constructor(e,t,n){let o=i._Keys.nextId();e.$registerTextEditorDecorationType(t.identifier,o,Gj.from(n)),this.value=Object.freeze({key:o,dispose(){e.$removeTextEditorDecorationType(o)}})}};ST._Keys=new iu("TextEditorDecorationType");var WK=class{constructor(e,t){this._collectedEdits=[],this._setEndOfLine=void 0,this._finalized=!1,this._document=e,this._documentVersionId=e.version,this._undoStopBefore=t.undoStopBefore,this._undoStopAfter=t.undoStopAfter}finalize(){return this._finalized=!0,{documentVersionId:this._documentVersionId,edits:this._collectedEdits,setEndOfLine:this._setEndOfLine,undoStopBefore:this._undoStopBefore,undoStopAfter:this._undoStopAfter}}_throwIfFinalized(){if(this._finalized)throw new Error("Edit is only valid while callback runs")}replace(e,t){this._throwIfFinalized();let n=null;if(e instanceof ti)n=new Zt(e,e);else if(e instanceof Zt)n=e;else throw new Error("Unrecognized location");this._pushEdit(n,t,!1)}insert(e,t){this._throwIfFinalized(),this._pushEdit(new Zt(e,e),t,!0)}delete(e){this._throwIfFinalized();let t=null;if(e instanceof Zt)t=e;else throw new Error("Unrecognized location");this._pushEdit(t,null,!0)}_pushEdit(e,t,n){let o=this._document.validateRange(e);this._collectedEdits.push({range:o,text:t,forceMoveMarkers:n})}setEndOfLine(e){if(this._throwIfFinalized(),e!==$a.LF&&e!==$a.CRLF)throw Nt("endOfLine");this._setEndOfLine=e}},zK=class{constructor(e,t,n,o){this._proxy=e,this._id=t,this._accept(n),this._logService=o;let r=this;this.value={get tabSize(){return r._tabSize},set tabSize(s){r._setTabSize(s)},get insertSpaces(){return r._insertSpaces},set insertSpaces(s){r._setInsertSpaces(s)},get cursorStyle(){return r._cursorStyle},set cursorStyle(s){r._setCursorStyle(s)},get lineNumbers(){return r._lineNumbers},set lineNumbers(s){r._setLineNumbers(s)}}}_accept(e){this._tabSize=e.tabSize,this._insertSpaces=e.insertSpaces,this._cursorStyle=e.cursorStyle,this._lineNumbers=p_.to(e.lineNumbers)}_validateTabSize(e){if(e==="auto")return"auto";if(typeof e=="number"){let t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){let t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}_setTabSize(e){let t=this._validateTabSize(e);if(t!==null){if(typeof t=="number"){if(this._tabSize===t)return;this._tabSize=t}this._warnOnError("setTabSize",this._proxy.$trySetOptions(this._id,{tabSize:t}))}}_validateInsertSpaces(e){return e==="auto"?"auto":e==="false"?!1:!!e}_setInsertSpaces(e){let t=this._validateInsertSpaces(e);if(typeof t=="boolean"){if(this._insertSpaces===t)return;this._insertSpaces=t}this._warnOnError("setInsertSpaces",this._proxy.$trySetOptions(this._id,{insertSpaces:t}))}_setCursorStyle(e){this._cursorStyle!==e&&(this._cursorStyle=e,this._warnOnError("setCursorStyle",this._proxy.$trySetOptions(this._id,{cursorStyle:e})))}_setLineNumbers(e){this._lineNumbers!==e&&(this._lineNumbers=e,this._warnOnError("setLineNumbers",this._proxy.$trySetOptions(this._id,{lineNumbers:p_.from(e)})))}assign(e){let t={},n=!1;if(typeof e.tabSize<"u"){let o=this._validateTabSize(e.tabSize);o==="auto"?(n=!0,t.tabSize=o):typeof o=="number"&&this._tabSize!==o&&(this._tabSize=o,n=!0,t.tabSize=o)}if(typeof e.insertSpaces<"u"){let o=this._validateInsertSpaces(e.insertSpaces);o==="auto"?(n=!0,t.insertSpaces=o):this._insertSpaces!==o&&(this._insertSpaces=o,n=!0,t.insertSpaces=o)}typeof e.cursorStyle<"u"&&this._cursorStyle!==e.cursorStyle&&(this._cursorStyle=e.cursorStyle,n=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this._lineNumbers!==e.lineNumbers&&(this._lineNumbers=e.lineNumbers,n=!0,t.lineNumbers=p_.from(e.lineNumbers)),n&&this._warnOnError("setOptions",this._proxy.$trySetOptions(this._id,t))}_warnOnError(e,t){t.catch(n=>{this._logService.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this._logService.warn(n)})}},VK=class{constructor(e,t,n,o,r,s,a,l){this.id=e,this._proxy=t,this._logService=n,this._disposed=!1,this._hasDecorationsForKey=new Set,this._selections=r,this._options=new zK(this._proxy,this.id,s,n),this._visibleRanges=a,this._viewColumn=l;let c=this;this.value=Object.freeze({get document(){return o.getValue()},set document(d){throw nF("document")},get selection(){return c._selections&&c._selections[0]},set selection(d){if(!(d instanceof H0))throw Nt("selection");c._selections=[d],c._trySetSelection()},get selections(){return c._selections},set selections(d){if(!Array.isArray(d)||d.some(h=>!(h instanceof H0)))throw Nt("selections");c._selections=d,c._trySetSelection()},get visibleRanges(){return c._visibleRanges},set visibleRanges(d){throw nF("visibleRanges")},get options(){return c._options.value},set options(d){c._disposed||c._options.assign(d)},get viewColumn(){return c._viewColumn},set viewColumn(d){throw nF("viewColumn")},edit(d,h={undoStopBefore:!0,undoStopAfter:!0}){if(c._disposed)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));let u=new WK(o.getValue(),h);return d(u),c._applyEdit(u)},insertSnippet(d,h,u={undoStopBefore:!0,undoStopAfter:!0}){if(c._disposed)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let g;if(!h||Array.isArray(h)&&h.length===0)g=c._selections.map(p=>Re.from(p));else if(h instanceof ti){let{lineNumber:p,column:f}=tn.from(h);g=[{startLineNumber:p,startColumn:f,endLineNumber:p,endColumn:f}]}else if(h instanceof Zt)g=[Re.from(h)];else{g=[];for(let p of h)if(p instanceof Zt)g.push(Re.from(p));else{let{lineNumber:f,column:v}=tn.from(p);g.push({startLineNumber:f,startColumn:v,endLineNumber:f,endColumn:v})}}return t.$tryInsertSnippet(e,o.getValue().version,d.value,g,u)},setDecorations(d,h){let u=h.length===0;u&&!c._hasDecorationsForKey.has(d.key)||(u?c._hasDecorationsForKey.delete(d.key):c._hasDecorationsForKey.add(d.key),c._runOnProxy(()=>{if(Cce(h))return t.$trySetDecorations(e,d.key,qEe(h));{let g=new Array(4*h.length);for(let p=0,f=h.length;p<f;p++){let v=h[p];g[4*p]=v.start.line+1,g[4*p+1]=v.start.character+1,g[4*p+2]=v.end.line+1,g[4*p+3]=v.end.character+1}return t.$trySetDecorationsFast(e,d.key,g)}}))},revealRange(d,h){c._runOnProxy(()=>t.$tryRevealRange(e,Re.from(d),h||jI.Default))},show(d){t.$tryShowEditor(e,jg.from(d))},hide(){t.$tryHideEditor(e)}})}dispose(){vr(!this._disposed),this._disposed=!0}_acceptOptions(e){vr(!this._disposed),this._options._accept(e)}_acceptVisibleRanges(e){vr(!this._disposed),this._visibleRanges=e}_acceptViewColumn(e){vr(!this._disposed),this._viewColumn=e}_acceptSelections(e){vr(!this._disposed),this._selections=e}async _trySetSelection(){let e=this._selections.map(Gp.from);return await this._runOnProxy(()=>this._proxy.$trySetSelections(this.id,e)),this.value}_applyEdit(e){let t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);let n=t.edits.map(r=>r.range);n.sort((r,s)=>r.end.line===s.end.line?r.end.character===s.end.character?r.start.line===s.start.line?r.start.character-s.start.character:r.start.line-s.start.line:r.end.character-s.end.character:r.end.line-s.end.line);for(let r=0,s=n.length-1;r<s;r++){let a=n[r].end;if(n[r+1].start.isBefore(a))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}let o=t.edits.map(r=>({range:Re.from(r.range),text:r.text,forceMoveMarkers:r.forceMoveMarkers}));return this._proxy.$tryApplyEdits(this.id,t.documentVersionId,o,{setEndOfLine:typeof t.setEndOfLine=="number"?pC.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}_runOnProxy(e){return this._disposed?(this._logService.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this._logService.warn(t),null))}},UK=class{constructor(e){this.value=e,this._count=0}ref(){this._count++}unref(){return--this._count===0}},QK=class{constructor(i,e){this._extHostRpc=i,this._logService=e,this._activeEditorId=null,this._editors=new Map,this._documents=new en,this._onDidAddDocuments=new nt,this._onDidRemoveDocuments=new nt,this._onDidChangeVisibleTextEditors=new nt,this._onDidChangeActiveTextEditor=new nt,this.onDidAddDocuments=this._onDidAddDocuments.event,this.onDidRemoveDocuments=this._onDidRemoveDocuments.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event}$acceptDocumentsAndEditorsDelta(i){this.acceptDocumentsAndEditorsDelta(i)}acceptDocumentsAndEditorsDelta(i){let e=[],t=[],n=[];if(i.removedDocuments)for(let o of i.removedDocuments){let r=$.revive(o),s=this._documents.get(r);s!=null&&s.unref()&&(this._documents.delete(r),e.push(s.value))}if(i.addedDocuments)for(let o of i.addedDocuments){let r=$.revive(o.uri),s=this._documents.get(r);if(s&&r.scheme!==Oe.vscodeNotebookCell&&r.scheme!==Oe.vscodeInteractiveInput)throw new Error(`document '${r} already exists!'`);s||(s=new UK(new EK(this._extHostRpc.getProxy(Tt.MainThreadDocuments),r,o.lines,o.EOL,o.versionId,o.languageId,o.isDirty,o.notebook)),this._documents.set(r,s),t.push(s.value)),s.ref()}if(i.removedEditors)for(let o of i.removedEditors){let r=this._editors.get(o);this._editors.delete(o),r&&n.push(r)}if(i.addedEditors)for(let o of i.addedEditors){let r=$.revive(o.documentUri);vr(this._documents.has(r),`document '${r}' does not exist`),vr(!this._editors.has(o.id),`editor '${o.id}' already exists!`);let s=this._documents.get(r).value,a=new VK(o.id,this._extHostRpc.getProxy(Tt.MainThreadTextEditors),this._logService,new tl(()=>s.document),o.selections.map(Gp.to),o.options,o.visibleRanges.map(l=>Re.to(l)),typeof o.editorPosition=="number"?jg.to(o.editorPosition):void 0);this._editors.set(o.id,a)}i.newActiveEditor!==void 0&&(vr(i.newActiveEditor===null||this._editors.has(i.newActiveEditor),`active editor '${i.newActiveEditor}' does not exist`),this._activeEditorId=i.newActiveEditor),st(e),st(n),i.removedDocuments&&this._onDidRemoveDocuments.fire(e),i.addedDocuments&&this._onDidAddDocuments.fire(t),(i.removedEditors||i.addedEditors)&&this._onDidChangeVisibleTextEditors.fire(this.allEditors().map(o=>o.value)),i.newActiveEditor!==void 0&&this._onDidChangeActiveTextEditor.fire(this.activeEditor())}getDocument(i){var e;return(e=this._documents.get(i))==null?void 0:e.value}allDocuments(){return At.map(this._documents.values(),i=>i.value)}getEditor(i){return this._editors.get(i)}activeEditor(i){if(!this._activeEditorId)return;let e=this._editors.get(this._activeEditorId);return i?e:e?.value}allEditors(){return[...this._editors.values()]}};QK=Ne([Be(0,mm),Be(1,no)],QK);var jK=class{constructor(e,t){this._extHostDocumentsAndEditors=t,this._onDidChangeTextEditorSelection=new nt,this._onDidChangeTextEditorOptions=new nt,this._onDidChangeTextEditorVisibleRanges=new nt,this._onDidChangeTextEditorViewColumn=new nt,this._onDidChangeActiveTextEditor=new nt,this._onDidChangeVisibleTextEditors=new nt,this.onDidChangeTextEditorSelection=this._onDidChangeTextEditorSelection.event,this.onDidChangeTextEditorOptions=this._onDidChangeTextEditorOptions.event,this.onDidChangeTextEditorVisibleRanges=this._onDidChangeTextEditorVisibleRanges.event,this.onDidChangeTextEditorViewColumn=this._onDidChangeTextEditorViewColumn.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this._proxy=e.getProxy(Tt.MainThreadTextEditors),this._extHostDocumentsAndEditors.onDidChangeVisibleTextEditors(n=>this._onDidChangeVisibleTextEditors.fire(n)),this._extHostDocumentsAndEditors.onDidChangeActiveTextEditor(n=>this._onDidChangeActiveTextEditor.fire(n))}getActiveTextEditor(){return this._extHostDocumentsAndEditors.activeEditor()}getVisibleTextEditors(e){let t=this._extHostDocumentsAndEditors.allEditors();return e?t:t.map(n=>n.value)}async showTextDocument(e,t,n){let o;typeof t=="number"?o={position:jg.from(t),preserveFocus:n}:typeof t=="object"?o={position:jg.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?Re.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:o={preserveFocus:!1};let r=await this._proxy.$tryShowTextDocument(e.uri,o),s=r&&this._extHostDocumentsAndEditors.getEditor(r);if(s)return s.value;throw r?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new ST(this._proxy,e,t).value}$acceptEditorPropertiesChanged(e,t){let n=this._extHostDocumentsAndEditors.getEditor(e);if(!n)throw new Error("unknown text editor");if(t.options&&n._acceptOptions(t.options),t.selections){let o=t.selections.selections.map(Gp.to);n._acceptSelections(o)}if(t.visibleRanges){let o=Ns(t.visibleRanges.map(Re.to));n._acceptVisibleRanges(o)}if(t.options&&this._onDidChangeTextEditorOptions.fire({textEditor:n.value,options:{...t.options,lineNumbers:p_.to(t.options.lineNumbers)}}),t.selections){let o=V0.fromValue(t.selections.source),r=t.selections.selections.map(Gp.to);this._onDidChangeTextEditorSelection.fire({textEditor:n.value,selections:r,kind:o})}if(t.visibleRanges){let o=Ns(t.visibleRanges.map(Re.to));this._onDidChangeTextEditorVisibleRanges.fire({textEditor:n.value,visibleRanges:o})}}$acceptEditorPositionData(e){for(let t in e){let n=this._extHostDocumentsAndEditors.getEditor(t);if(!n)throw new Error("Unknown text editor");let o=jg.to(e[t]);n.value.viewColumn!==o&&(n._acceptViewColumn(o),this._onDidChangeTextEditorViewColumn.fire({textEditor:n.value,viewColumn:o}))}}getDiffInformation(e){return Promise.resolve(this._proxy.$getDiffInformation(e))}},KK=class{constructor(e,t=1e3*60*3,n=1024*1024*80,o=50){this._extUri=e,this._maxAge=t,this._maxLength=n,this._maxSize=o,this._data=new Array,this._length=0}dispose(){this._data=st(this._data)}remove(e){for(let t of[...this._data])this._extUri.isEqualOrParent(t.uri,e)&&t.dispose()}add(e,t,n=0){let o=()=>{let a=this._data.indexOf(s);a>=0&&(this._length-=n,t.dispose(),clearTimeout(r),this._data.splice(a,1))},r=setTimeout(o,this._maxAge),s={uri:e,length:n,dispose:o};this._data.push(s),this._length+=n,this._cleanup()}_cleanup(){for(;this._length>this._maxLength;)this._data[0].dispose();let e=Math.ceil(this._maxSize*1.2);this._data.length>=e&&st(this._data.slice(0,e-this._maxSize))}},qK=class extends J{constructor(e,t,n,o){super(),this._model=e,this._onIsCaughtUpWithContentChanges=t,this._proxy=n,this._textFileService=o,this._knownVersionId=this._model.getVersionId(),this._store.add(this._model.onDidChangeContent(r=>{this._knownVersionId=r.versionId,this._proxy.$acceptModelChanged(this._model.uri,r,this._textFileService.isDirty(this._model.uri)),this.isCaughtUpWithContentChanges()&&this._onIsCaughtUpWithContentChanges.fire(this._model.uri)}))}isCaughtUpWithContentChanges(){return this._model.getVersionId()===this._knownVersionId}},$K=class extends J{constructor(i,e,t,n,o,r,s,a,l){super(),this._modelService=e,this._textFileService=t,this._fileService=n,this._textModelResolverService=o,this._environmentService=r,this._uriIdentityService=s,this._pathService=l,this._onIsCaughtUpWithContentChanges=this._store.add(new nt),this.onIsCaughtUpWithContentChanges=this._onIsCaughtUpWithContentChanges.event,this._modelTrackers=new en,this._modelReferenceCollection=this._store.add(new KK(s.extUri)),this._proxy=i.getProxy(sn.ExtHostDocuments),this._store.add(e.onModelLanguageChanged(this._onModelModeChanged,this)),this._store.add(t.files.onDidSave(c=>{this._shouldHandleFileEvent(c.model.resource)&&this._proxy.$acceptModelSaved(c.model.resource)})),this._store.add(t.files.onDidChangeDirty(c=>{this._shouldHandleFileEvent(c.resource)&&this._proxy.$acceptDirtyStateChanged(c.resource,c.isDirty())})),this._store.add(a.onDidRunWorkingCopyFileOperation(c=>{let d=c.operation===2;if(d||c.operation===1)for(let h of c.files){let u=d?h.source:h.target;u&&this._modelReferenceCollection.remove(u)}}))}dispose(){st(this._modelTrackers.values()),this._modelTrackers.clear(),super.dispose()}isCaughtUpWithContentChanges(i){let e=this._modelTrackers.get(i);return e?e.isCaughtUpWithContentChanges():!0}_shouldHandleFileEvent(i){let e=this._modelService.getModel(i);return!!e&&qf(e)}handleModelAdded(i){qf(i)&&this._modelTrackers.set(i.uri,new qK(i,this._onIsCaughtUpWithContentChanges,this._proxy,this._textFileService))}_onModelModeChanged(i){let{model:e}=i;this._modelTrackers.has(e.uri)&&this._proxy.$acceptModelLanguageChanged(e.uri,e.getLanguageId())}handleModelRemoved(i){this._modelTrackers.has(i)&&(this._modelTrackers.get(i).dispose(),this._modelTrackers.delete(i))}async $trySaveDocument(i){return!!await this._textFileService.save($.revive(i))}async $tryOpenDocument(i){let e=$.revive(i);if(!e.scheme||!(e.fsPath||e.authority))throw new Error("Invalid uri. Scheme and authority or path must be set.");let t=this._uriIdentityService.asCanonicalUri(e),n;switch(t.scheme){case Oe.untitled:n=this._handleUntitledScheme(t);break;case Oe.file:default:n=this._handleAsResourceInput(t);break}let o;try{o=await n}catch(r){throw new Error(`cannot open ${t.toString()}. Detail: ${CN(r)}`)}if(o)if(Ai.isEqual(o,t)){if(this._modelTrackers.has(t))return t;throw new Error(`cannot open ${t.toString()}. Detail: Files above 50MB cannot be synchronized with extensions.`)}else throw new Error(`cannot open ${t.toString()}. Detail: Actual document opened as ${o.toString()}`);else throw new Error(`cannot open ${t.toString()}`)}$tryCreateDocument(i){return this._doCreateUntitled(void 0,i?i.language:void 0,i?i.content:void 0)}async _handleAsResourceInput(i){let e=await this._textModelResolverService.createModelReference(i);return this._modelReferenceCollection.add(i,e,e.object.textEditorModel.getValueLength()),e.object.textEditorModel.uri}async _handleUntitledScheme(i){let e=DEe(i,this._environmentService.remoteAuthority,this._pathService.defaultUriScheme);return await this._fileService.exists(e)?Promise.reject(new Error("file already exists")):await this._doCreateUntitled(i.path?i:void 0)}async _doCreateUntitled(i,e,t){let n=(await this._textFileService.untitled.resolve({associatedResource:i,languageId:e,initialValue:t})).resource;if(!this._modelTrackers.has(n))throw new Error(`expected URI ${n.toString()} to have come to LIFE`);return this._proxy.$acceptDirtyStateChanged(n,!0),n}};$K=Ne([Be(1,li),Be(2,xN),Be(3,ey),Be(4,io),Be(5,kN),Be(6,hv),Be(7,EN),Be(8,LN)],$K);var DT=nce,xT=class i{constructor(e,t,n){this.selections=e,this.options=t,this.visibleRanges=n}static readFromEditor(e,t,n){let o=i._readSelectionsFromCodeEditor(e,n),r=i._readOptionsFromCodeEditor(e,t,n),s=i._readVisibleRangesFromCodeEditor(e,n);return new i(o,r,s)}static _readSelectionsFromCodeEditor(e,t){let n=null;return t&&(n=t.getSelections()),!n&&e&&(n=e.selections),n||(n=[new DT(1,1,1,1)]),n}static _readOptionsFromCodeEditor(e,t,n){if(t.isDisposed()){if(e)return e.options;throw new Error("No valid properties")}let o,r;if(n){let a=n.getOptions(),l=a.get(62);o=a.get(24),r=l.renderType}else e?(o=e.options.cursorStyle,r=e.options.lineNumbers):(o=Ln.Line,r=1);let s=t.getOptions();return{insertSpaces:s.insertSpaces,tabSize:s.tabSize,cursorStyle:o,lineNumbers:r}}static _readVisibleRangesFromCodeEditor(e,t){return t?t.getVisibleRanges():[]}generateDelta(e,t){let n={options:null,selections:null,visibleRanges:null};return(!e||!i._selectionsEqual(e.selections,this.selections))&&(n.selections={selections:this.selections,source:tr(t)}),(!e||!i._optionsEqual(e.options,this.options))&&(n.options=this.options),(!e||!i._rangesEqual(e.visibleRanges,this.visibleRanges))&&(n.visibleRanges=this.visibleRanges),n.selections||n.options||n.visibleRanges?n:null}static _selectionsEqual(e,t){return Zn(e,t,(n,o)=>n.equalsSelection(o))}static _rangesEqual(e,t){return Zn(e,t,(n,o)=>n.equalsRange(o))}static _optionsEqual(e,t){return e&&!t||!e&&t?!1:!e&&!t?!0:e.tabSize===t.tabSize&&e.insertSpaces===t.insertSpaces&&e.cursorStyle===t.cursorStyle&&e.lineNumbers===t.lineNumbers}},GK=class{constructor(e,t,n,o,r,s,a){this._modelListeners=new ne,this._codeEditorListeners=new ne,this._id=e,this._model=t,this._codeEditor=null,this._properties=null,this._focusTracker=o,this._mainThreadDocuments=r,this._modelService=s,this._clipboardService=a,this._onPropertiesChanged=new nt,this._modelListeners.add(this._model.onDidChangeOptions(l=>{this._updatePropertiesNow(null)})),this.setCodeEditor(n),this._updatePropertiesNow(null)}dispose(){this._modelListeners.dispose(),this._codeEditor=null,this._codeEditorListeners.dispose()}_updatePropertiesNow(e){this._setProperties(xT.readFromEditor(this._properties,this._model,this._codeEditor),e)}_setProperties(e,t){let n=e.generateDelta(this._properties,t);this._properties=e,n&&this._onPropertiesChanged.fire(n)}getId(){return this._id}getModel(){return this._model}getCodeEditor(){return this._codeEditor}hasCodeEditor(e){return this._codeEditor===e}setCodeEditor(e){if(!this.hasCodeEditor(e)&&(this._codeEditorListeners.clear(),this._codeEditor=e,this._codeEditor)){this._codeEditorListeners.add(this._codeEditor.onDidChangeModel(()=>{this.setCodeEditor(null)})),this._codeEditorListeners.add(this._codeEditor.onDidFocusEditorWidget(()=>{this._focusTracker.onGainedFocus()})),this._codeEditorListeners.add(this._codeEditor.onDidBlurEditorWidget(()=>{this._focusTracker.onLostFocus()}));let t=null;this._codeEditorListeners.add(this._mainThreadDocuments.onIsCaughtUpWithContentChanges(r=>{if(r.toString()===this._model.uri.toString()){let s=t;t=null,this._updatePropertiesNow(s)}}));let n=()=>this._codeEditor&&this._codeEditor.getModel()===this._model,o=r=>{this._mainThreadDocuments.isCaughtUpWithContentChanges(this._model.uri)?(t=null,this._updatePropertiesNow(r)):t=r};this._codeEditorListeners.add(this._codeEditor.onDidChangeCursorSelection(r=>{n()&&o(r.source)})),this._codeEditorListeners.add(this._codeEditor.onDidChangeConfiguration(r=>{n()&&o(null)})),this._codeEditorListeners.add(this._codeEditor.onDidLayoutChange(()=>{n()&&o(null)})),this._codeEditorListeners.add(this._codeEditor.onDidScrollChange(()=>{n()&&o(null)})),this._updatePropertiesNow(null)}}isVisible(){return!!this._codeEditor}getProperties(){return this._properties}get onPropertiesChanged(){return this._onPropertiesChanged.event}setSelections(e){if(this._codeEditor){this._codeEditor.setSelections(e);return}let t=e.map(DT.liftSelection);this._setProperties(new xT(t,this._properties.options,this._properties.visibleRanges),null)}_setIndentConfiguration(e){let t=this._modelService.getCreationOptions(this._model.getLanguageId(),this._model.uri,this._model.isForSimpleWidget);if(e.tabSize==="auto"||e.insertSpaces==="auto"){let o=t.insertSpaces,r=t.tabSize;e.insertSpaces!=="auto"&&typeof e.insertSpaces<"u"&&(o=e.insertSpaces),e.tabSize!=="auto"&&typeof e.tabSize<"u"&&(r=e.tabSize),this._model.detectIndentation(o,r);return}let n={};typeof e.insertSpaces<"u"&&(n.insertSpaces=e.insertSpaces),typeof e.tabSize<"u"&&(n.tabSize=e.tabSize),this._model.updateOptions(n)}setConfiguration(e){if(this._setIndentConfiguration(e),!!this._codeEditor){if(e.cursorStyle){let t=jEe(e.cursorStyle);this._codeEditor.updateOptions({cursorStyle:t})}if(typeof e.lineNumbers<"u"){let t;switch(e.lineNumbers){case 1:t="on";break;case 2:t="relative";break;default:t="off"}this._codeEditor.updateOptions({lineNumbers:t})}}}setDecorations(e,t){this._codeEditor&&this._codeEditor.setDecorationsByType("exthost-api",e,t)}setDecorationsFast(e,t){if(!this._codeEditor)return;let n=[];for(let o=0,r=Math.floor(t.length/4);o<r;o++)n[o]=new _u(t[4*o],t[4*o+1],t[4*o+2],t[4*o+3]);this._codeEditor.setDecorationsByTypeFast(e,n)}revealRange(e,t){if(this._codeEditor)switch(t){case If.Default:this._codeEditor.revealRange(e,0);break;case If.InCenter:this._codeEditor.revealRangeInCenter(e,0);break;case If.InCenterIfOutsideViewport:this._codeEditor.revealRangeInCenterIfOutsideViewport(e,0);break;case If.AtTop:this._codeEditor.revealRangeAtTop(e,0);break;default:console.warn(`Unknown revealType: ${t}`);break}}isFocused(){return this._codeEditor?this._codeEditor.hasTextFocus():!1}matches(e){return e?e.getControl()===this._codeEditor:!1}applyEdits(e,t,n){if(this._model.getVersionId()!==e||!this._codeEditor)return!1;typeof n.setEndOfLine<"u"&&this._model.pushEOL(n.setEndOfLine);let o=t.map(r=>({range:_u.lift(r.range),text:r.text,forceMoveMarkers:r.forceMoveMarkers}));return n.undoStopBefore&&this._codeEditor.pushUndoStop(),this._codeEditor.executeEdits("MainThreadTextEditor",o),n.undoStopAfter&&this._codeEditor.pushUndoStop(),!0}async insertSnippet(e,t,n,o){if(!this._codeEditor||!this._codeEditor.hasModel())return!1;let r;if(Ps.guessNeedsClipboard(t)){let l=new xb(this._codeEditor,5);if(r=await this._clipboardService.readText(),!l.validate(this._codeEditor))return!1}this._codeEditor.getModel().getVersionId();let s=Nn.get(this._codeEditor);if(!s)return!1;let a=n.map(l=>new DT(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn));return this._codeEditor.setSelections(a),this._codeEditor.focus(),s.insert(t,{overwriteBefore:0,overwriteAfter:0,undoStopBefore:o.undoStopBefore,undoStopAfter:o.undoStopAfter,clipboardText:r}),!0}};function qie(i,e){if(typeof e!="number"||e===yQ||i.count===1&&i.activeGroup.isEmpty)return yQ;if(e===ZS)return ZS;let t=i.getGroups(2)[e];return t?t.id:ZS}function Lce(i,e){let t=typeof e=="number"?i.getGroup(e):e;return i.getGroups(2).indexOf(t??i.activeGroup)}var kT=class Ice{constructor(e,t,n,o,r){this._editorLocator=e,this._codeEditorService=n,this._editorService=o,this._editorGroupService=r,this._toDispose=new ne,this._instanceId=String(++Ice.INSTANCE_COUNT),this._proxy=t.getProxy(sn.ExtHostEditors),this._textEditorsListenersMap=Object.create(null),this._editorPositionData=null,this._toDispose.add(this._editorService.onDidVisibleEditorsChange(()=>this._updateActiveAndVisibleTextEditors())),this._toDispose.add(this._editorGroupService.onDidRemoveGroup(()=>this._updateActiveAndVisibleTextEditors())),this._toDispose.add(this._editorGroupService.onDidMoveGroup(()=>this._updateActiveAndVisibleTextEditors())),this._registeredDecorationTypes=Object.create(null)}dispose(){Object.keys(this._textEditorsListenersMap).forEach(e=>{st(this._textEditorsListenersMap[e])}),this._textEditorsListenersMap=Object.create(null),this._toDispose.dispose();for(let e in this._registeredDecorationTypes)this._codeEditorService.removeDecorationType(e);this._registeredDecorationTypes=Object.create(null)}handleTextEditorAdded(e){let t=e.getId(),n=[];n.push(e.onPropertiesChanged(o=>{this._proxy.$acceptEditorPropertiesChanged(t,o)})),this._textEditorsListenersMap[t]=n}handleTextEditorRemoved(e){st(this._textEditorsListenersMap[e]),delete this._textEditorsListenersMap[e]}_updateActiveAndVisibleTextEditors(){let e=this._getTextEditorPositionData();yr(this._editorPositionData,e)||(this._editorPositionData=e,this._proxy.$acceptEditorPositionData(this._editorPositionData))}_getTextEditorPositionData(){let e=Object.create(null);for(let t of this._editorService.visibleEditorPanes){let n=this._editorLocator.findTextEditorIdFor(t);n&&(e[n]=Lce(this._editorGroupService,t.group))}return e}async $tryShowTextDocument(e,t){let n=$.revive(e),o={preserveFocus:t.preserveFocus,pinned:t.pinned,selection:t.selection,activation:t.preserveFocus?jj.RESTORE:void 0,override:Kj.DISABLED},r={resource:n,options:o},s=await this._editorService.openEditor(r,qie(this._editorGroupService,t.position));if(s)return this._editorLocator.findTextEditorIdFor(s)}async $tryShowEditor(e,t){let n=this._editorLocator.getEditor(e);if(n){let o=n.getModel();await this._editorService.openEditor({resource:o.uri,options:{preserveFocus:!1}},qie(this._editorGroupService,t));return}}async $tryHideEditor(e){let t=this._editorLocator.getEditor(e);if(t){let n=this._editorService.visibleEditorPanes;for(let o of n)if(t.matches(o)){await o.group.closeEditor(o.input);return}}}$trySetSelections(e,t){let n=this._editorLocator.getEditor(e);return n?(n.setSelections(t),Promise.resolve(void 0)):Promise.reject(Ru(`TextEditor(${e})`))}$trySetDecorations(e,t,n){t=`${this._instanceId}-${t}`;let o=this._editorLocator.getEditor(e);return o?(o.setDecorations(t,n),Promise.resolve(void 0)):Promise.reject(Ru(`TextEditor(${e})`))}$trySetDecorationsFast(e,t,n){t=`${this._instanceId}-${t}`;let o=this._editorLocator.getEditor(e);return o?(o.setDecorationsFast(t,n),Promise.resolve(void 0)):Promise.reject(Ru(`TextEditor(${e})`))}$tryRevealRange(e,t,n){let o=this._editorLocator.getEditor(e);return o?(o.revealRange(t,n),Promise.resolve()):Promise.reject(Ru(`TextEditor(${e})`))}$trySetOptions(e,t){let n=this._editorLocator.getEditor(e);return n?(n.setConfiguration(t),Promise.resolve(void 0)):Promise.reject(Ru(`TextEditor(${e})`))}$tryApplyEdits(e,t,n,o){let r=this._editorLocator.getEditor(e);return r?Promise.resolve(r.applyEdits(t,n,o)):Promise.reject(Ru(`TextEditor(${e})`))}$tryInsertSnippet(e,t,n,o,r){let s=this._editorLocator.getEditor(e);return s?Promise.resolve(s.insertSnippet(t,n,o,r)):Promise.reject(Ru(`TextEditor(${e})`))}$registerTextEditorDecorationType(e,t,n){t=`${this._instanceId}-${t}`,this._registeredDecorationTypes[t]=!0,this._codeEditorService.registerDecorationType(`exthost-api-${e}`,t,n)}$removeTextEditorDecorationType(e){e=`${this._instanceId}-${e}`,delete this._registeredDecorationTypes[e],this._codeEditorService.removeDecorationType(e)}$getDiffInformation(e){let t=this._editorLocator.getEditor(e);if(!t)return Promise.reject(new Error("No such TextEditor"));let n=t.getCodeEditor();if(!n)return Promise.reject(new Error("No such CodeEditor"));let o=n.getId(),r=this._codeEditorService.listDiffEditors(),[s]=r.filter(l=>l.getOriginalEditor().getId()===o||l.getModifiedEditor().getId()===o);if(s)return Promise.resolve(s.getLineChanges()||[]);let a=n.getContribution("editor.contrib.dirtydiff");return a?Promise.resolve(a.getChanges()):Promise.resolve([])}};kT.INSTANCE_COUNT=0;kT=Ne([Be(2,Ft),Be(3,ty),Be(4,DN)],kT);var YK=class{},JK=class{constructor(e){this.editor=e,this.id=`${e.getId()},${e.getModel().id}`}},AC=class{constructor(e,t,n,o,r,s){this.removedDocuments=e,this.addedDocuments=t,this.removedEditors=n,this.addedEditors=o,this.oldActiveEditor=r,this.newActiveEditor=s,this.isEmpty=this.removedDocuments.length===0&&this.addedDocuments.length===0&&this.removedEditors.length===0&&this.addedEditors.length===0&&r===s}toString(){let e=`DocumentAndEditorStateDelta
`;return e+=`	Removed Documents: [${this.removedDocuments.map(t=>t.uri.toString(!0)).join(", ")}]
`,e+=`	Added Documents: [${this.addedDocuments.map(t=>t.uri.toString(!0)).join(", ")}]
`,e+=`	Removed Editors: [${this.removedEditors.map(t=>t.id).join(", ")}]
`,e+=`	Added Editors: [${this.addedEditors.map(t=>t.id).join(", ")}]
`,e+=`	New Active Editor: ${this.newActiveEditor}
`,e}},uA=class{constructor(e,t,n){this.documents=e,this.textEditors=t,this.activeEditor=n}static compute(e,t){if(!e)return new AC([],[...t.documents.values()],[],[...t.textEditors.values()],void 0,t.activeEditor);let n=NEe(e.documents,t.documents),o=REe(e.textEditors,t.textEditors),r=e.activeEditor!==t.activeEditor?e.activeEditor:void 0,s=e.activeEditor!==t.activeEditor?t.activeEditor:void 0;return new AC(n.removed,n.added,o.removed,o.added,r,s)}},XK=class{constructor(i,e,t,n,o){this._onDidChangeState=i,this._modelService=e,this._codeEditorService=t,this._editorService=n,this._paneCompositeService=o,this._toDispose=new ne,this._toDisposeOnEditorRemove=new Map,this._activeEditorOrder=0,this._modelService.onModelAdded(this._updateStateOnModelAdd,this,this._toDispose),this._modelService.onModelRemoved(r=>this._updateState(),this,this._toDispose),this._editorService.onDidActiveEditorChange(r=>this._updateState(),this,this._toDispose),this._codeEditorService.onCodeEditorAdd(this._onDidAddEditor,this,this._toDispose),this._codeEditorService.onCodeEditorRemove(this._onDidRemoveEditor,this,this._toDispose),this._codeEditorService.listCodeEditors().forEach(this._onDidAddEditor,this),Z.filter(this._paneCompositeService.onDidPaneCompositeOpen,r=>r.viewContainerLocation===1)(r=>this._activeEditorOrder=1,void 0,this._toDispose),Z.filter(this._paneCompositeService.onDidPaneCompositeClose,r=>r.viewContainerLocation===1)(r=>this._activeEditorOrder=0,void 0,this._toDispose),this._editorService.onDidVisibleEditorsChange(r=>this._activeEditorOrder=0,void 0,this._toDispose),this._updateState()}dispose(){this._toDispose.dispose()}_onDidAddEditor(i){this._toDisposeOnEditorRemove.set(i.getId(),ss(i.onDidChangeModel(()=>this._updateState()),i.onDidFocusEditorText(()=>this._updateState()),i.onDidFocusEditorWidget(()=>this._updateState(i)))),this._updateState()}_onDidRemoveEditor(i){let e=this._toDisposeOnEditorRemove.get(i.getId());e&&(this._toDisposeOnEditorRemove.delete(i.getId()),e.dispose(),this._updateState())}_updateStateOnModelAdd(i){if(qf(i)){if(!this._currentState){this._updateState();return}this._currentState=new uA(this._currentState.documents.add(i),this._currentState.textEditors,this._currentState.activeEditor),this._onDidChangeState(new AC([],[i],[],[],void 0,void 0))}}_updateState(i){let e=new Set;for(let s of this._modelService.getModels())qf(s)&&e.add(s);let t=new Map,n=null;for(let s of this._codeEditorService.listCodeEditors()){if(s.isSimpleWidget)continue;let a=s.getModel();if(s.hasModel()&&a&&qf(a)&&!a.isDisposed()&&this._modelService.getModel(a.uri)){let l=new JK(s);t.set(l.id,l),(s.hasTextFocus()||i===s&&s.hasWidgetFocus())&&(n=l.id)}}if(!n){let s;if(this._activeEditorOrder===0?s=this._getActiveEditorFromEditorPart()||this._getActiveEditorFromPanel():s=this._getActiveEditorFromPanel()||this._getActiveEditorFromEditorPart(),s)for(let a of t.values())s===a.editor&&(n=a.id)}let o=new uA(e,t,n),r=uA.compute(this._currentState,o);r.isEmpty||(this._currentState=o,this._onDidChangeState(r))}_getActiveEditorFromPanel(){let i=this._paneCompositeService.getActivePaneComposite(1);if(i instanceof YK){let e=i.getControl();if(nc(e))return e}}_getActiveEditorFromEditorPart(){let i=this._editorService.activeTextEditorControl;return aJ(i)&&(i=i.getModifiedEditor()),i}};XK=Ne([Be(1,li),Be(2,Ft),Be(3,ty),Be(4,IN)],XK);var ZK=class{constructor(i,e,t,n,o,r,s,a,l,c,d,h,u,g,p){this._modelService=e,this._textFileService=t,this._editorService=n,this._editorGroupService=a,this._clipboardService=u,this._toDispose=new ne,this._textEditors=new Map,this._proxy=i.getProxy(sn.ExtHostDocumentsAndEditors),this._mainThreadDocuments=this._toDispose.add(new $K(i,this._modelService,this._textFileService,r,s,c,h,d,g)),i.set(Tt.MainThreadDocuments,this._mainThreadDocuments),this._mainThreadEditors=this._toDispose.add(new kT(this,i,o,this._editorService,this._editorGroupService)),i.set(Tt.MainThreadTextEditors,this._mainThreadEditors),this._toDispose.add(new XK(f=>this._onDelta(f),e,o,this._editorService,l))}dispose(){this._toDispose.dispose()}_onDelta(i){let e=[],t=[],n=i.removedDocuments.map(s=>s.uri);for(let s of i.addedEditors){let a=new GK(s.id,s.editor.getModel(),s.editor,{onGainedFocus(){},onLostFocus(){}},this._mainThreadDocuments,this._modelService,this._clipboardService);this._textEditors.set(s.id,a),t.push(a)}for(let{id:s}of i.removedEditors){let a=this._textEditors.get(s);a&&(a.dispose(),this._textEditors.delete(s),e.push(s))}let o=Object.create(null),r=!0;i.newActiveEditor!==void 0&&(r=!1,o.newActiveEditor=i.newActiveEditor),n.length>0&&(r=!1,o.removedDocuments=n),e.length>0&&(r=!1,o.removedEditors=e),i.addedDocuments.length>0&&(r=!1,o.addedDocuments=i.addedDocuments.map(s=>this._toModelAddData(s))),i.addedEditors.length>0&&(r=!1,o.addedEditors=t.map(s=>this._toTextEditorAddData(s))),r||(this._proxy.$acceptDocumentsAndEditorsDelta(o),n.forEach(this._mainThreadDocuments.handleModelRemoved,this._mainThreadDocuments),i.addedDocuments.forEach(this._mainThreadDocuments.handleModelAdded,this._mainThreadDocuments),e.forEach(this._mainThreadEditors.handleTextEditorRemoved,this._mainThreadEditors),t.forEach(this._mainThreadEditors.handleTextEditorAdded,this._mainThreadEditors))}_toModelAddData(i){return{uri:i.uri,versionId:i.getVersionId(),lines:i.getLinesContent(),EOL:i.getEOL(),languageId:i.getLanguageId(),isDirty:this._textFileService.isDirty(i.uri)}}_toTextEditorAddData(i){let e=i.getProperties();return{id:i.getId(),documentUri:i.getModel().uri,options:e.options,selections:e.selections,visibleRanges:e.visibleRanges,editorPosition:this._findEditorPosition(i)}}_findEditorPosition(i){for(let e of this._editorService.visibleEditorPanes)if(i.matches(e))return Lce(this._editorGroupService,e.group)}findTextEditorIdFor(i){for(let[e,t]of this._textEditors)if(t.matches(i))return e}getIdOfCodeEditor(i){for(let[e,t]of this._textEditors)if(t.getCodeEditor()===i)return e}getEditor(i){return this._textEditors.get(i)}};ZK=Ne([$Ee,Be(1,li),Be(2,xN),Be(3,ty),Be(4,Ft),Be(5,ey),Be(6,io),Be(7,DN),Be(8,IN),Be(9,kN),Be(10,EN),Be(11,hv),Be(12,Da),Be(13,LN),Be(14,tt)],ZK);var eq=class{constructor(i,e,t){this._markerService=e,this._uriIdentService=t,this._activeOwners=new Set,this._proxy=i.getProxy(sn.ExtHostDiagnostics),this._markerListener=this._markerService.onMarkerChanged(this._forwardMarkers,this)}dispose(){this._markerListener.dispose(),this._activeOwners.forEach(i=>this._markerService.changeAll(i,[])),this._activeOwners.clear()}_forwardMarkers(i){let e=[];for(let t of i){let n=this._markerService.read({resource:t});if(n.length===0)e.push([t,[]]);else{let o=n.filter(r=>!this._activeOwners.has(r.owner));o.length>0&&e.push([t,o])}}e.length>0&&this._proxy.$acceptMarkersChange(e)}$changeMany(i,e){for(let t of e){let[n,o]=t;if(o)for(let r of o){if(r.relatedInformation)for(let s of r.relatedInformation)s.resource=$.revive(s.resource);r.code&&typeof r.code!="string"&&(r.code.target=$.revive(r.code.target))}this._markerService.changeOne(i,this._uriIdentService.asCanonicalUri($.revive(n)),o)}this._activeOwners.add(i)}$clear(i){this._markerService.changeAll(i,[]),this._activeOwners.delete(i)}};eq=Ne([Ks(Tt.MainThreadDiagnostics),Be(1,ka),Be(2,hv)],eq);function $ie(i,e){return!(e.disableTelemetry||!i.enableTelemetry||e.extensionTestsLocationURI)}var tq,ET=tq=class extends J{constructor(i,e,t,n){super(),this._telemetryService=e,this._environmentService=t,this._productService=n,this._proxy=i.getProxy(sn.ExtHostTelemetry),$ie(this._productService,this._environmentService)&&this._register(e.telemetryLevel.onDidChange(o=>{this._proxy.$onDidChangeTelemetryLevel(o)})),this._proxy.$initializeTelemetryLevel(this.telemetryLevel,this._productService.enabledTelemetryLevels)}get telemetryLevel(){return $ie(this._productService,this._environmentService)?this._telemetryService.telemetryLevel.value:0}$publicLog(i,e=Object.create(null)){e[tq._name]=!0,this._telemetryService.publicLog(i,e)}$publicLog2(i,e){this.$publicLog(i,e)}};ET._name="pluginHostTelemetry";ET=tq=Ne([Ks(Tt.MainThreadTelemetry),Be(1,Vs),Be(2,dv),Be(3,ZJ)],ET);var iq=class{constructor(i,e){this._proxy=i.getProxy(Tt.MainThreadBulkEdits),this._versionInformationProvider={getTextDocumentVersion:t=>{var n;return(n=e.getDocument(t))==null?void 0:n.version},getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(i,e){let t=Kp(e,"snippetWorkspaceEdit"),n=vu.from(i,this._versionInformationProvider,t);return this._proxy.$tryApplyWorkspaceEdit(n)}};iq=Ne([Be(0,mm)],iq);var LT=class i extends kd{constructor(e,t,n=void 0,o){super(o),this.resource=e,this.cellEdit=t,this.notebookVersionId=n}static is(e){return e instanceof i?!0:$.isUri(e.resource)&&jn(e.cellEdit)}static lift(e){return e instanceof i?e:new i(e.resource,e.cellEdit,e.notebookVersionId,e.metadata)}};function dLe(i){var e;let t=(e=m_(i))==null?void 0:e.edits;return t?t.map(n=>{if(gp.is(n))return gp.lift(n);if(e0.is(n))return e0.lift(n);if(LT.is(n))return LT.lift(n);throw new Error("Unsupported edit")}):[]}var nq=class{constructor(i,e,t){this._bulkEditService=e,this._logService=t}dispose(){}$tryApplyWorkspaceEdit(i,e){let t=dLe(i);return this._bulkEditService.apply(t,{undoRedoGroupId:e}).then(()=>!0,n=>(this._logService.warn("IGNORING workspace edit",n),!1))}};nq=Ne([Ks(Tt.MainThreadBulkEdits),Be(1,rm),Be(2,no)],nq);var oq=class{constructor(e,t,n,o){this._documents=t,this._commands=n,this._uriTransformer=o,this._languageIds=[],this._handlePool=0,this._ids=new Set,this._proxy=e.getProxy(Tt.MainThreadLanguages)}$acceptLanguageIds(e){this._languageIds=e}async getLanguages(){return this._languageIds.slice(0)}async changeLanguage(e,t){await this._proxy.$changeLanguage(e,t);let n=this._documents.getDocumentData(e);if(!n)throw new Error(`document '${e.toString()}' NOT found`);return n.document}async tokenAtPosition(e,t){let n=e.version,o=tn.from(t),r=await this._proxy.$tokensAtPosition(e.uri,o),s={type:Cg.Other,range:e.getWordRangeAtPosition(t)??new Zt(t.line,t.character,t.line,t.character)};if(!r)return s;let a={range:Re.to(r.range),type:qj.to(r.type)};return!a.range.contains(t)||n!==e.version?s:a}createLanguageStatusItem(e,t,n){let o=this._handlePool++,r=this._proxy,s=this._ids,a=`${e.identifier.value}/${t}`;if(s.has(a))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);s.add(a);let l={selector:n,id:t,name:e.displayName??e.name,severity:a_.Information,command:void 0,text:"",detail:"",busy:!1},c,d=new ne,h=()=>{c?.dispose(),c=qh(()=>{d.clear(),this._proxy.$setLanguageStatus(o,{id:a,name:l.name??e.displayName??e.name,source:e.displayName??e.name,selector:rT.from(l.selector,this._uriTransformer),label:l.text,detail:l.detail??"",severity:l.severity===a_.Error?Mt.Error:l.severity===a_.Warning?Mt.Warning:Mt.Info,command:l.command&&this._commands.toInternal(l.command,d),accessibilityInfo:l.accessibilityInformation,busy:l.busy})},0)},u={dispose(){d.dispose(),c?.dispose(),r.$removeLanguageStatus(o),s.delete(a)},get id(){return l.id},get name(){return l.name},set name(g){l.name=g,h()},get selector(){return l.selector},set selector(g){l.selector=g,h()},get text(){return l.text},set text(g){l.text=g,h()},get detail(){return l.detail},set detail(g){l.detail=g,h()},get severity(){return l.severity},set severity(g){l.severity=g,h()},get accessibilityInformation(){return l.accessibilityInformation},set accessibilityInformation(g){l.accessibilityInformation=g,h()},get command(){return l.command},set command(g){l.command=g,h()},get busy(){return l.busy},set busy(g){l.busy=g,h()}};return h(),u}},rq=class{constructor(i,e,t,n,o){this._languageService=e,this._modelService=t,this._resolverService=n,this._languageStatusService=o,this._disposables=new ne,this._status=new Map,this._proxy=i.getProxy(sn.ExtHostLanguages),this._proxy.$acceptLanguageIds(e.getRegisteredLanguageIds()),this._disposables.add(e.onDidChange(r=>{this._proxy.$acceptLanguageIds(e.getRegisteredLanguageIds())}))}dispose(){this._disposables.dispose();for(let i of this._status.values())i.dispose();this._status.clear()}async $changeLanguage(i,e){if(!this._languageService.isRegisteredLanguageId(e))return Promise.reject(new Error(`Unknown language id: ${e}`));let t=$.revive(i),n=await this._resolverService.createModelReference(t);try{this._modelService.setMode(n.object.textEditorModel,this._languageService.createById(e))}finally{n.dispose()}}async $tokensAtPosition(i,e){let t=$.revive(i),n=this._modelService.getModel(t);if(!n)return;n.tokenization.tokenizeIfCheap(e.lineNumber);let o=n.tokenization.getLineTokens(e.lineNumber),r=o.findTokenIndexAtOffset(e.column-1);return{type:o.getStandardTokenType(r),range:new _u(e.lineNumber,1+o.getStartOffset(r),e.lineNumber,1+o.getEndOffset(r))}}$setLanguageStatus(i,e){var t;(t=this._status.get(i))==null||t.dispose(),this._status.set(i,this._languageStatusService.addStatus(e))}$removeLanguageStatus(i){var e;(e=this._status.get(i))==null||e.dispose()}};rq=Ne([Ks(Tt.MainThreadLanguages),Be(1,ki),Be(2,li),Be(3,io),Be(4,eX)],rq);var sq=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},IT=class Tce{constructor(e){this._onDidChangeWindowState=new nt,this.onDidChangeWindowState=this._onDidChangeWindowState.event,this._state=Tce.InitialState,this._proxy=e.getProxy(Tt.MainThreadWindow),this._proxy.$getWindowVisibility().then(t=>this.$onDidChangeWindowFocus(t))}get state(){return this._state}$onDidChangeWindowFocus(e){e!==this._state.focused&&(this._state={...this._state,focused:e},this._onDidChangeWindowState.fire(this._state))}openUri(e,t){let n;if(typeof e=="string"){n=e;try{e=$.parse(e)}catch{return Promise.reject(`Invalid uri - '${e}'`)}}return SD(e.scheme)?Promise.reject("Invalid scheme - cannot be empty"):e.scheme===Oe.command?Promise.reject(`Invalid scheme '${e.scheme}'`):this._proxy.$openUri(e,n,t)}async asExternalUri(e,t){if(SD(e.scheme))return Promise.reject("Invalid scheme - cannot be empty");let n=await this._proxy.$asExternalUri(e,t);return $.from(n)}};IT.InitialState={focused:!0};IT=Ne([Be(0,mm)],IT);var aq=class{constructor(i,e,t){this.hostService=e,this.openerService=t,this.disposables=new ne,this.resolved=new Map,this.proxy=i.getProxy(sn.ExtHostWindow),Z.latch(e.onDidChangeFocus)(this.proxy.$onDidChangeWindowFocus,this.proxy,this.disposables)}dispose(){this.disposables.dispose();for(let i of this.resolved.values())i.dispose();this.resolved.clear()}$getWindowVisibility(){return Promise.resolve(this.hostService.hasFocus)}async $openUri(i,e,t){let n=$.from(i),o;return e&&$.parse(e).toString()===n.toString()?o=e:o=n,this.openerService.open(o,{openExternal:!0,allowTunneling:t.allowTunneling,allowContributedOpeners:t.allowContributedOpeners})}async $asExternalUri(i,e){return(await this.openerService.resolveExternalUri($.revive(i),e)).resolved}};aq=Ne([Ks(Tt.MainThreadWindow),Be(1,tX),Be(2,jr)],aq);var lq=class{constructor(i,e){this._clipboardService=e}dispose(){}$readText(){return this._clipboardService.readText()}$writeText(i){return this._clipboardService.writeText(i)}};lq=Ne([Ks(Tt.MainThreadClipboard),Be(1,Da)],lq);var cq=class{constructor(e){let t=e.getProxy(Tt.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(n){return t.$writeText(n)}})}},dq=class{constructor(){this._onDidChangeTelemetryEnabled=new nt,this.onDidChangeTelemetryEnabled=this._onDidChangeTelemetryEnabled.event,this._onDidChangeTelemetryConfiguration=new nt,this.onDidChangeTelemetryConfiguration=this._onDidChangeTelemetryConfiguration.event,this._productConfig={usage:!0,error:!0},this._level=0}getTelemetryConfiguration(){return this._level===3}getTelemetryDetails(){return{isCrashEnabled:this._level>=1,isErrorsEnabled:this._productConfig.error?this._level>=2:!1,isUsageEnabled:this._productConfig.usage?this._level>=3:!1}}$initializeTelemetryLevel(e,t){this._level=e,this._productConfig=t||{usage:!0,error:!0}}$onDidChangeTelemetryLevel(e){this._oldTelemetryEnablement=this.getTelemetryConfiguration(),this._level=e,this._oldTelemetryEnablement!==this.getTelemetryConfiguration()&&this._onDidChangeTelemetryEnabled.fire(this.getTelemetryConfiguration()),this._onDidChangeTelemetryConfiguration.fire(this.getTelemetryDetails())}};function hLe(i){for(let e=0,t=i.length;e<t;e+=4){let n=i[e+0],o=i[e+1],r=i[e+2],s=i[e+3];i[e+0]=s,i[e+1]=r,i[e+2]=o,i[e+3]=n}}function uLe(i){let e=i.buffer;if(KG()||hLe(e),e.byteOffset%4===0)return new Uint32Array(e.buffer,e.byteOffset,e.length/4);{let t=new Uint8Array(e.byteLength);return t.set(e),new Uint32Array(t.buffer,t.byteOffset,t.length/4)}}function Mce(i){let e=uLe(i),t=0,n=e[t++];if(e[t++]===1){let s=e[t++],a=e.subarray(t,t+s);return t+=s,{id:n,type:"full",data:a}}let o=e[t++],r=[];for(let s=0;s<o;s++){let a=e[t++],l=e[t++],c=e[t++],d;c>0&&(d=e.subarray(t,t+c),t+=c),r[s]={start:a,deleteCount:l,data:d}}return{id:n,type:"delta",deltas:r}}var uc=class i{constructor(e){this.id=e,this._data=new Map,this._idPool=1}add(e){let t=this._idPool++;return this._data.set(t,e),this.logDebugInfo(),t}get(e,t){return this._data.has(e)?this._data.get(e)[t]:void 0}delete(e){this._data.delete(e),this.logDebugInfo()}logDebugInfo(){i.enableDebugLogging&&console.log(`${this.id} cache size - ${this._data.size}`)}};uc.enableDebugLogging=!1;var TT=class i{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentSymbols(e,t){let n=this._documents.getDocument(e),o=await this._provider.provideDocumentSymbols(n,t);if(!kM(o))return o[0]instanceof nC?o.map(Yj.from):i._asDocumentSymbolTree(o)}static _asDocumentSymbolTree(e){var t,n;e=e.slice(0).sort((s,a)=>{let l=s.location.range.start.compareTo(a.location.range.start);return l===0&&(l=a.location.range.end.compareTo(s.location.range.end)),l});let o=[],r=[];for(let s of e){let a={name:s.name||"!!MISSING: name!!",kind:al.from(s.kind),tags:((t=s.tags)==null?void 0:t.map(Nd.from))||[],detail:"",containerName:s.containerName,range:Re.from(s.location.range),selectionRange:Re.from(s.location.range),children:[]};for(;;){if(r.length===0){r.push(a),o.push(a);break}let l=r[r.length-1];if(_u.containsRange(l.range,a.range)&&!_u.equalsRange(l.range,a.range)){(n=l.children)==null||n.push(a),r.push(a);break}r.pop()}}return o}},yg=class i{constructor(e,t,n){this._documents=e,this._commands=t,this._provider=n,this._cache=new uc("CodeLens"),this._disposables=new Map}async provideCodeLenses(e,t){let n=this._documents.getDocument(e),o=await this._provider.provideCodeLenses(n,t);if(!o||t.isCancellationRequested)return;let r=this._cache.add(o),s=new ne;this._disposables.set(r,s);let a={cacheId:r,lenses:[]};for(let l=0;l<o.length;l++)a.lenses.push({cacheId:[r,l],range:Re.from(o[l].range),command:this._commands.toInternal(o[l].command,s)});return a}async resolveCodeLens(e,t){let n=e.cacheId&&this._cache.get(...e.cacheId);if(!n)return;let o;if(typeof this._provider.resolveCodeLens!="function"||n.isResolved?o=n:o=await this._provider.resolveCodeLens(n,t),o||(o=n),t.isCancellationRequested)return;let r=e.cacheId&&this._disposables.get(e.cacheId[0]);if(r)return e.command=this._commands.toInternal(o.command??i._badCmd,r),e}releaseCodeLenses(e){var t;(t=this._disposables.get(e))==null||t.dispose(),this._disposables.delete(e),this._cache.delete(e)}};yg._badCmd={command:"missing",title:"!!MISSING: command!!"};function TN(i){return Array.isArray(i)?i.map(hT.from):i?[hT.from(i)]:[]}var MT=class{constructor(e,t){this._documents=e,this._provider=t}async provideDefinition(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.provideDefinition(o,r,n);return TN(s)}},NT=class{constructor(e,t){this._documents=e,this._provider=t}async provideDeclaration(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.provideDeclaration(o,r,n);return TN(s)}},RT=class{constructor(e,t){this._documents=e,this._provider=t}async provideImplementation(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.provideImplementation(o,r,n);return TN(s)}},FT=class{constructor(e,t){this._documents=e,this._provider=t}async provideTypeDefinition(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.provideTypeDefinition(o,r,n);return TN(s)}},BT=class{constructor(e,t){this._documents=e,this._provider=t}async provideHover(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.provideHover(o,r,n);if(!(!s||kM(s.contents)))return s.range||(s.range=o.getWordRangeAtPosition(r)),s.range||(s.range=new Zt(r,r)),Xj.from(s)}},PT=class{constructor(e,t){this._documents=e,this._provider=t}async provideEvaluatableExpression(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.provideEvaluatableExpression(o,r,n);if(s)return Zj.from(s)}},OT=class{constructor(e,t){this._documents=e,this._provider=t}async provideInlineValues(e,t,n,o){let r=this._documents.getDocument(e),s=await this._provider.provideInlineValues(r,Re.to(t),tK.to(n),o);if(Array.isArray(s))return s.map(a=>eK.from(a))}},HT=class{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentHighlights(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.provideDocumentHighlights(o,r,n);if(Array.isArray(s))return s.map(iK.from)}},WT=class{constructor(e,t){this._documents=e,this._provider=t}async provideLinkedEditingRanges(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.provideLinkedEditingRanges(o,r,n);if(s&&Array.isArray(s.ranges))return{ranges:Ns(s.ranges.map(Re.from)),wordPattern:s.wordPattern}}},zT=class{constructor(e,t){this._documents=e,this._provider=t}async provideReferences(e,t,n,o){let r=this._documents.getDocument(e),s=tn.to(t),a=await this._provider.provideReferences(r,s,n,o);if(Array.isArray(a))return a.map(Au.from)}},Sg=class i{constructor(e,t,n,o,r,s,a){this._documents=e,this._commands=t,this._diagnostics=n,this._provider=o,this._logService=r,this._extension=s,this._apiDeprecation=a,this._cache=new uc("CodeAction"),this._disposables=new Map}async provideCodeActions(e,t,n,o){var r;let s=this._documents.getDocument(e),a=DT.isISelection(t)?Gp.to(t):Re.to(t),l=[];for(let p of this._diagnostics.getDiagnostics(e))if(a.intersection(p.range)&&l.push(p)>i._maxCodeActionsPerFile)break;let c={diagnostics:l,only:n.only?new Rn(n.only):void 0,triggerKind:fK.to(n.trigger)},d=await this._provider.provideCodeActions(s,a,c,o);if(!Dn(d)||o.isCancellationRequested)return;let h=this._cache.add(d),u=new ne;this._disposables.set(h,u);let g=[];for(let p=0;p<d.length;p++){let f=d[p];f&&(i._isCommand(f)?(this._apiDeprecation.report("CodeActionProvider.provideCodeActions - return commands",this._extension,"Return 'CodeAction' instances instead."),g.push({_isSynthetic:!0,title:f.title,command:this._commands.toInternal(f,u)})):(c.only&&(f.kind?c.only.contains(f.kind)||this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${c.only.value} 'requested but returned code action is of kind '${f.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${c.only.value} 'requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`)),g.push({cacheId:[h,p],title:f.title,command:f.command&&this._commands.toInternal(f.command,u),diagnostics:f.diagnostics&&f.diagnostics.map(Q0.from),edit:f.edit&&vu.from(f.edit,void 0,Kp(this._extension,"snippetWorkspaceEdit")),kind:f.kind&&f.kind.value,isPreferred:f.isPreferred,disabled:(r=f.disabled)==null?void 0:r.reason})))}return{cacheId:h,actions:g}}async resolveCodeAction(e,t){let[n,o]=e,r=this._cache.get(n,o);if(!r||i._isCommand(r)||!this._provider.resolveCodeAction)return;let s=await this._provider.resolveCodeAction(r,t)??r;return s!=null&&s.edit?vu.from(s.edit,void 0,Kp(this._extension,"snippetWorkspaceEdit")):void 0}releaseCodeActions(e){var t;(t=this._disposables.get(e))==null||t.dispose(),this._disposables.delete(e),this._cache.delete(e)}static _isCommand(e){return typeof e.command=="string"&&typeof e.title=="string"}};Sg._maxCodeActionsPerFile=1e3;var gA=class{constructor(e,t,n,o){this._proxy=e,this._documents=t,this._provider=n,this._handle=o}async prepareDocumentPaste(e,t,n,o){if(!this._provider.prepareDocumentPaste)return;let r=this._documents.getDocument(e),s=t.map(l=>Re.to(l)),a=fd.toDataTransfer(n,()=>{throw new $U});return await this._provider.prepareDocumentPaste(r,s,a,o),fd.toDataTransferDTO(a)}async providePasteEdits(e,t,n,o,r){let s=this._documents.getDocument(t),a=n.map(d=>Re.to(d)),l=fd.toDataTransfer(o,async d=>(await this._proxy.$resolvePasteFileData(this._handle,e,d)).buffer),c=await this._provider.provideDocumentPasteEdits(s,a,l,r);if(c)return{insertText:typeof c.insertText=="string"?c.insertText:{snippet:c.insertText.value},additionalEdit:c.additionalEdit?vu.from(c.additionalEdit,void 0,!0):void 0}}},VT=class{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentFormattingEdits(e,t,n){let o=this._documents.getDocument(e),r=await this._provider.provideDocumentFormattingEdits(o,t,n);if(Array.isArray(r))return r.map(ua.from)}},UT=class{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeFormattingEdits(e,t,n,o){let r=this._documents.getDocument(e),s=Re.to(t),a=await this._provider.provideDocumentRangeFormattingEdits(r,s,n,o);if(Array.isArray(a))return a.map(ua.from)}},QT=class{constructor(e,t){this._documents=e,this._provider=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,n,o,r){let s=this._documents.getDocument(e),a=tn.to(t),l=await this._provider.provideOnTypeFormattingEdits(s,a,n,o,r);if(Array.isArray(l))return l.map(ua.from)}},Tf=class{constructor(e,t){this._provider=e,this._logService=t,this._cache=new uc("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){let n=await this._provider.provideWorkspaceSymbols(e,t);if(!Dn(n))return{symbols:[]};let o=this._cache.add(n),r={cacheId:o,symbols:[]};for(let s=0;s<n.length;s++){let a=n[s];if(!a||!a.name){this._logService.warn("INVALID SymbolInformation",a);continue}r.symbols.push({...dT.from(a),cacheId:[o,s]})}return r}async resolveWorkspaceSymbol(e,t){if(typeof this._provider.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;let n=this._cache.get(...e.cacheId);if(n){let o=await this._provider.resolveWorkspaceSymbol(n,t);return o&&Ur(e,dT.from(o),!0)}}releaseWorkspaceSymbols(e){this._cache.delete(e)}},Mf=class i{constructor(e,t,n){this._documents=e,this._provider=t,this._logService=n}static supportsResolving(e){return typeof e.prepareRename=="function"}async provideRenameEdits(e,t,n,o){let r=this._documents.getDocument(e),s=tn.to(t);try{let a=await this._provider.provideRenameEdits(r,s,n,o);return a?vu.from(a):void 0}catch(a){let l=i._asMessage(a);return l?{rejectReason:l,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(e,t,n){if(typeof this._provider.prepareRename!="function")return Promise.resolve(void 0);let o=this._documents.getDocument(e),r=tn.to(t);try{let s=await this._provider.prepareRename(o,r,n),a,l;if(Zt.isRange(s)?(a=s,l=o.getText(s)):jn(s)&&(a=s.range,l=s.placeholder),!a||!l)return;if(a.start.line>r.line||a.end.line<r.line){this._logService.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:Re.from(a),text:l}}catch(s){let a=i._asMessage(s);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(s)}}static _asMessage(e){return typeof e=="string"?e:e instanceof Error&&typeof e.message=="string"?e.message:void 0}},pA=class{constructor(e,t){this.resultId=e,this.tokens=t}},mA=class i{constructor(e,t){this._documents=e,this._provider=t,this._nextResultId=1,this._previousResults=new Map}async provideDocumentSemanticTokens(e,t,n){let o=this._documents.getDocument(e),r=t!==0?this._previousResults.get(t):null,s=typeof r?.resultId=="string"&&typeof this._provider.provideDocumentSemanticTokensEdits=="function"?await this._provider.provideDocumentSemanticTokensEdits(o,r.resultId,n):await this._provider.provideDocumentSemanticTokens(o,n);return r&&this._previousResults.delete(t),s?(s=i._fixProvidedSemanticTokens(s),this._send(i._convertToEdits(r,s),s)):null}async releaseDocumentSemanticColoring(e){this._previousResults.delete(e)}static _fixProvidedSemanticTokens(e){return i._isSemanticTokens(e)?i._isCorrectSemanticTokens(e)?e:new iT(new Uint32Array(e.data),e.resultId):i._isSemanticTokensEdits(e)?i._isCorrectSemanticTokensEdits(e)?e:new nD(e.edits.map(t=>new wce(t.start,t.deleteCount,t.data?new Uint32Array(t.data):t.data)),e.resultId):e}static _isSemanticTokens(e){return e&&!!e.data}static _isCorrectSemanticTokens(e){return e.data instanceof Uint32Array}static _isSemanticTokensEdits(e){return e&&Array.isArray(e.edits)}static _isCorrectSemanticTokensEdits(e){for(let t of e.edits)if(!(t.data instanceof Uint32Array))return!1;return!0}static _convertToEdits(e,t){if(!i._isSemanticTokens(t)||!e||!e.tokens)return t;let n=e.tokens,o=n.length,r=t.data,s=r.length,a=0,l=Math.min(o,s);for(;a<l&&n[a]===r[a];)a++;if(a===o&&a===s)return new nD([],t.resultId);let c=0,d=l-a;for(;c<d&&n[o-c-1]===r[s-c-1];)c++;return new nD([{start:a,deleteCount:o-a-c,data:r.subarray(a,s-c)}],t.resultId)}_send(e,t){if(i._isSemanticTokens(e)){let n=this._nextResultId++;return this._previousResults.set(n,new pA(e.resultId,e.data)),Cw({id:n,type:"full",data:e.data})}if(i._isSemanticTokensEdits(e)){let n=this._nextResultId++;return i._isSemanticTokens(t)?this._previousResults.set(n,new pA(t.resultId,t.data)):this._previousResults.set(n,new pA(e.resultId)),Cw({id:n,type:"delta",deltas:(e.edits||[]).map(o=>({start:o.start,deleteCount:o.deleteCount,data:o.data}))})}return null}},jT=class{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeSemanticTokens(e,t,n){let o=this._documents.getDocument(e),r=await this._provider.provideDocumentRangeSemanticTokens(o,Re.to(t),n);return r?this._send(r):null}_send(e){return Cw({id:0,type:"full",data:e.data})}},rg=class i{constructor(e,t,n,o,r){this._documents=e,this._commands=t,this._provider=n,this._apiDeprecation=o,this._extension=r,this._cache=new uc("CompletionItem"),this._disposables=new Map}static supportsResolving(e){return typeof e.resolveCompletionItem=="function"}async provideCompletionItems(e,t,n,o){let r=this._documents.getDocument(e),s=tn.to(t),a=r.getWordRangeAtPosition(s)||new Zt(s,s),l=a.with({end:s}),c=new sr(!0),d=await this._provider.provideCompletionItems(r,s,o,oK.to(n));if(!d||o.isCancellationRequested)return;let h=Array.isArray(d)?new QI(d):d,u=i.supportsResolving(this._provider)?this._cache.add(h.items):this._cache.add([]),g=new ne;this._disposables.set(u,g);let p=[],f={x:u,b:p,a:{replace:Re.from(a),insert:Re.from(l)},c:h.isIncomplete||void 0,d:c.elapsed()};for(let v=0;v<h.items.length;v++){let b=h.items[v],A=this._convertCompletionItem(b,[u,v],l,a);p.push(A)}return f}async resolveCompletionItem(e,t){if(typeof this._provider.resolveCompletionItem!="function")return;let n=this._cache.get(...e);if(!n)return;let o=await this._provider.resolveCompletionItem(n,t);if(o)return this._convertCompletionItem(o,e)}releaseCompletionItems(e){var t;(t=this._disposables.get(e))==null||t.dispose(),this._disposables.delete(e),this._cache.delete(e)}_convertCompletionItem(e,t,n,o){let r=this._disposables.get(t[0]);if(!r)throw Error("DisposableStore is missing...");let s={x:t,a:e.label,b:e.kind!==void 0?sK.from(e.kind):void 0,n:e.tags&&e.tags.map(rK.from),c:e.detail,d:typeof e.documentation>"u"?void 0:zs.fromStrict(e.documentation),e:e.sortText!==e.label?e.sortText:void 0,f:e.filterText!==e.label?e.filterText:void 0,g:e.preselect||void 0,i:e.keepWhitespace?1:0,k:e.commitCharacters,l:e.additionalTextEdits&&e.additionalTextEdits.map(ua.from),m:this._commands.toInternal(e.command,r)};e.textEdit?(this._apiDeprecation.report("CompletionItem.textEdit",this._extension,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),s.h=e.textEdit.newText):typeof e.insertText=="string"?s.h=e.insertText:e.insertText instanceof PI&&(s.h=e.insertText.value,s.i|=4);let a;return e.textEdit?a=e.textEdit.range:e.range&&(a=e.range),Zt.isRange(a)?s.j=Re.from(a):a&&(!(n!=null&&n.isEqual(a.inserting))||!(o!=null&&o.isEqual(a.replacing)))&&(s.j={insert:Re.from(a.inserting),replace:Re.from(a.replacing)}),s}},Kg=class{async provideInlineCompletions(e,t,n,o){}disposeCompletions(e){}handleDidShowCompletionItem(e,t){}},hq=class extends Kg{constructor(e,t,n,o){super(),this._extension=e,this._documents=t,this._provider=n,this._commands=o,this._references=new KT,this._isAdditionsProposedApiEnabled=Kp(this._extension,"inlineCompletionsAdditions"),this.languageTriggerKindToVSCodeTriggerKind={[or.Automatic]:dC.Automatic,[or.Explicit]:dC.Invoke}}get supportsHandleDidShowCompletionItem(){return Kp(this._extension,"inlineCompletionsAdditions")&&typeof this._provider.handleDidShowCompletionItem=="function"}async provideInlineCompletions(e,t,n,o){let r=this._documents.getDocument(e),s=tn.to(t),a=await this._provider.provideInlineCompletionItems(r,s,{selectedCompletionInfo:n.selectedSuggestionInfo?{range:Re.to(n.selectedSuggestionInfo.range),text:n.selectedSuggestionInfo.text}:void 0,triggerKind:this.languageTriggerKindToVSCodeTriggerKind[n.triggerKind]},o);if(!a||o.isCancellationRequested)return;let l=Gg(a)?a:a.items,c=this._isAdditionsProposedApiEnabled?Gg(a)?[]:a.commands||[]:[],d;return{pid:this._references.createReferenceId({dispose(){d&&d.dispose()},items:l}),items:l.map((h,u)=>{let g;h.command&&(d||(d=new ne),g=this._commands.toInternal(h.command,d));let p=h.insertText;return{insertText:typeof p=="string"?p:{snippet:p.value},filterText:h.filterText,range:h.range?Re.from(h.range):void 0,command:g,idx:u,completeBracketPairs:this._isAdditionsProposedApiEnabled?h.completeBracketPairs:!1}}),commands:c.map(h=>(d||(d=new ne),this._commands.toInternal(h,d)))}}disposeCompletions(e){let t=this._references.disposeReferenceId(e);t?.dispose()}handleDidShowCompletionItem(e,t){var n;let o=(n=this._references.get(e))==null?void 0:n.items[t];o&&this._provider.handleDidShowCompletionItem&&this._isAdditionsProposedApiEnabled&&this._provider.handleDidShowCompletionItem(o)}},uq=class extends Kg{constructor(e,t,n,o){super(),this.extension=e,this._documents=t,this._provider=n,this._commands=o,this._references=new KT,this.isAdditionProposedApiEnabled=Kp(this.extension,"inlineCompletionsAdditions"),this.languageTriggerKindToVSCodeTriggerKind={[or.Automatic]:XI.Automatic,[or.Explicit]:XI.Invoke}}async provideInlineCompletions(e,t,n,o){let r=this._documents.getDocument(e),s=tn.to(t),a=await this._provider.provideInlineCompletionItems(r,s,{selectedCompletionInfo:n.selectedSuggestionInfo?{range:Re.to(n.selectedSuggestionInfo.range),text:n.selectedSuggestionInfo.text}:void 0,triggerKind:this.languageTriggerKindToVSCodeTriggerKind[n.triggerKind]},o);if(!a||o.isCancellationRequested)return;let l=Gg(a)?a:a.items,c=Gg(a)?[]:a.commands||[],d;return{pid:this._references.createReferenceId({dispose(){d&&d.dispose()},items:l}),items:l.map((h,u)=>{let g;h.command&&(d||(d=new ne),g=this._commands.toInternal(h.command,d));let p=h.insertText;return{insertText:typeof p=="string"?p:{snippet:p.value},filterText:h.filterText,range:h.range?Re.from(h.range):void 0,command:g,idx:u,completeBracketPairs:this.isAdditionProposedApiEnabled?h.completeBracketPairs:!1}}),commands:c.map(h=>(d||(d=new ne),this._commands.toInternal(h,d)))}}disposeCompletions(e){let t=this._references.disposeReferenceId(e);t?.dispose()}handleDidShowCompletionItem(e,t){var n;let o=(n=this._references.get(e))==null?void 0:n.items[t];o&&this._provider.handleDidShowCompletionItem&&this.isAdditionProposedApiEnabled&&this._provider.handleDidShowCompletionItem(o)}},KT=class{constructor(){this._references=new Map,this._idPool=1}createReferenceId(e){let t=this._idPool++;return this._references.set(t,e),t}disposeReferenceId(e){let t=this._references.get(e);return this._references.delete(e),t}get(e){return this._references.get(e)}},fA=class{constructor(e,t){this._documents=e,this._provider=t,this._cache=new uc("SignatureHelp")}async provideSignatureHelp(e,t,n,o){let r=this._documents.getDocument(e),s=tn.to(t),a=this.reviveContext(n),l=await this._provider.provideSignatureHelp(r,s,o,a);if(l){let c=this._cache.add([l]);return{...pT.from(l),id:c}}}reviveContext(e){let t;if(e.activeSignatureHelp){let n=pT.to(e.activeSignatureHelp),o=this._cache.get(e.activeSignatureHelp.id,0);o?(t=o,t.activeSignature=n.activeSignature,t.activeParameter=n.activeParameter):t=n}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this._cache.delete(e)}},Nf=class{constructor(e,t,n,o,r){this._documents=e,this._commands=t,this._provider=n,this._logService=o,this._extension=r,this._cache=new uc("InlayHints"),this._disposables=new Map}async provideInlayHints(e,t,n){let o=this._documents.getDocument(e),r=Re.to(t),s=await this._provider.provideInlayHints(o,r,n);if(!Array.isArray(s)||s.length===0){this._logService.trace(`[InlayHints] NO inlay hints from '${this._extension.identifier.value}' for ${t}`);return}if(n.isCancellationRequested)return;let a=this._cache.add(s);this._disposables.set(a,new ne);let l={hints:[],cacheId:a};for(let c=0;c<s.length;c++)this._isValidInlayHint(s[c],r)&&l.hints.push(this._convertInlayHint(s[c],[a,c]));return this._logService.trace(`[InlayHints] ${l.hints.length} inlay hints from '${this._extension.identifier.value}' for ${t}`),l}async resolveInlayHint(e,t){if(typeof this._provider.resolveInlayHint!="function")return;let n=this._cache.get(...e);if(!n)return;let o=await this._provider.resolveInlayHint(n,t);if(o&&this._isValidInlayHint(o))return this._convertInlayHint(o,e)}releaseHints(e){var t;(t=this._disposables.get(e))==null||t.dispose(),this._disposables.delete(e),this._cache.delete(e)}_isValidInlayHint(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(n=>n.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}_convertInlayHint(e,t){let n=this._disposables.get(t[0]);if(!n)throw Error("DisposableStore is missing...");let o={label:"",cacheId:t,tooltip:zs.fromStrict(e.tooltip),position:tn.from(e.position),textEdits:e.textEdits&&e.textEdits.map(ua.from),kind:e.kind&&aK.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};return typeof e.label=="string"?o.label=e.label:o.label=e.label.map(r=>{let s={label:r.value};return s.tooltip=zs.fromStrict(r.tooltip),Td.isLocation(r.location)&&(s.location=Au.from(r.location)),r.command&&(s.command=this._commands.toInternal(r.command,n)),s}),o}},Rf=class i{constructor(e,t){this._documents=e,this._provider=t,this._cache=new uc("DocumentLink")}async provideLinks(e,t){let n=this._documents.getDocument(e),o=await this._provider.provideDocumentLinks(n,t);if(!(!Array.isArray(o)||o.length===0)&&!t.isCancellationRequested){if(typeof this._provider.resolveDocumentLink!="function")return{links:o.filter(i._validateLink).map(dA.from)};{let r=this._cache.add(o),s={links:[],cacheId:r};for(let a=0;a<o.length;a++){if(!i._validateLink(o[a]))continue;let l=dA.from(o[a]);l.cacheId=[r,a],s.links.push(l)}return s}}}static _validateLink(e){return e.target&&e.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(e,t){if(typeof this._provider.resolveDocumentLink!="function")return;let n=this._cache.get(...e);if(!n)return;let o=await this._provider.resolveDocumentLink(n,t);if(!(!o||!i._validateLink(o)))return dA.from(o)}releaseLinks(e){this._cache.delete(e)}},_A=class{constructor(e,t){this._documents=e,this._provider=t}async provideColors(e,t){let n=this._documents.getDocument(e),o=await this._provider.provideDocumentColors(n,t);return Array.isArray(o)?o.map(r=>({color:mT.from(r.color),range:Re.from(r.range)})):[]}async provideColorPresentations(e,t,n){let o=this._documents.getDocument(e),r=Re.to(t.range),s=mT.to(t.color),a=await this._provider.provideColorPresentations(s,{document:o,range:r},n);if(Array.isArray(a))return a.map(lK.from)}},qT=class{constructor(e,t){this._documents=e,this._provider=t}async provideFoldingRanges(e,t,n){let o=this._documents.getDocument(e),r=await this._provider.provideFoldingRanges(o,t,n);if(Array.isArray(r))return r.map(hK.from)}},$T=class{constructor(e,t,n){this._documents=e,this._provider=t,this._logService=n}async provideSelectionRanges(e,t,n){let o=this._documents.getDocument(e),r=t.map(tn.to),s=await this._provider.provideSelectionRanges(o,r,n);if(!Dn(s))return[];if(s.length!==r.length)return this._logService.warn("BAD selection ranges, provider must return ranges for each position"),[];let a=[];for(let l=0;l<r.length;l++){let c=[];a.push(c);let d=r[l],h=s[l];for(;;){if(!h.range.contains(d))throw new Error("INVALID selection range, must contain the previous range");if(c.push(cK.from(h)),!h.parent)break;d=h.range,h=h.parent}}return a}},sg=class{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new iu(""),this._cache=new Map}async prepareSession(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.prepareCallHierarchy(o,r,n);if(!s)return;let a=this._idPool.nextId();return this._cache.set(a,new Map),Array.isArray(s)?s.map(l=>this._cacheAndConvertItem(a,l)):[this._cacheAndConvertItem(a,s)]}async provideCallsTo(e,t,n){let o=this._itemFromCache(e,t);if(!o)throw new Error("missing call hierarchy item");let r=await this._provider.provideCallHierarchyIncomingCalls(o,n);if(r)return r.map(s=>({from:this._cacheAndConvertItem(e,s.from),fromRanges:s.fromRanges.map(a=>Re.from(a))}))}async provideCallsFrom(e,t,n){let o=this._itemFromCache(e,t);if(!o)throw new Error("missing call hierarchy item");let r=await this._provider.provideCallHierarchyOutgoingCalls(o,n);if(r)return r.map(s=>({to:this._cacheAndConvertItem(e,s.to),fromRanges:s.fromRanges.map(a=>Re.from(a))}))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){let n=this._cache.get(e),o=Jj.from(t,e,n.size.toString(36));return n.set(o._itemId,t),o}_itemFromCache(e,t){let n=this._cache.get(e);return n?.get(t)}},ag=class{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new iu(""),this._cache=new Map}async prepareSession(e,t,n){let o=this._documents.getDocument(e),r=tn.to(t),s=await this._provider.prepareTypeHierarchy(o,r,n);if(!s)return;let a=this._idPool.nextId();return this._cache.set(a,new Map),Array.isArray(s)?s.map(l=>this._cacheAndConvertItem(a,l)):[this._cacheAndConvertItem(a,s)]}async provideSupertypes(e,t,n){let o=this._itemFromCache(e,t);if(!o)throw new Error("missing type hierarchy item");let r=await this._provider.provideTypeHierarchySupertypes(o,n);if(r)return r.map(s=>this._cacheAndConvertItem(e,s))}async provideSubtypes(e,t,n){let o=this._itemFromCache(e,t);if(!o)throw new Error("missing type hierarchy item");let r=await this._provider.provideTypeHierarchySubtypes(o,n);if(r)return r.map(s=>this._cacheAndConvertItem(e,s))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){let n=this._cache.get(e),o=_K.from(t,e,n.size.toString(36));return n.set(o._itemId,t),o}_itemFromCache(e,t){let n=this._cache.get(e);return n?.get(t)}},GT=class{constructor(e,t,n,o){this._proxy=e,this._documents=t,this._provider=n,this._handle=o}async provideDocumentOnDropEdits(e,t,n,o,r){let s=this._documents.getDocument(t),a=tn.to(n),l=fd.toDataTransfer(o,async d=>(await this._proxy.$resolveDocumentOnDropFileData(this._handle,e,d)).buffer),c=await this._provider.provideDocumentDropEdits(s,a,l,r);if(c)return{insertText:typeof c.insertText=="string"?c.insertText:{snippet:c.insertText.value},additionalEdit:c.additionalEdit?vu.from(c.additionalEdit,void 0,!0):void 0}}},lg=class{constructor(e,t){this.adapter=e,this.extension=t}},YT=class i{constructor(e,t,n,o,r,s,a){this._adapter=new Map,this._uriTransformer=t,this._proxy=e.getProxy(Tt.MainThreadLanguageFeatures),this._documents=n,this._commands=o,this._diagnostics=r,this._logService=s,this._apiDeprecation=a}_transformDocumentSelector(e){return rT.from(e,this._uriTransformer)}_createDisposable(e){return new ia(()=>{this._adapter.delete(e),this._proxy.$unregister(e)})}_nextHandle(){return i._handlePool++}async _withAdapter(e,t,n,o,r,s=!1){let a=this._adapter.get(e);if(!a||!(a.adapter instanceof t))return o;let l=Date.now();s||this._logService.trace(`[${a.extension.identifier.value}] INVOKE provider '${n.toString().replace(/[\r\n]/g,"")}'`);let c=n(a.adapter,a.extension);return Promise.resolve(c).catch(d=>{Ls(d)||(this._logService.error(`[${a.extension.identifier.value}] provider FAILED`),this._logService.error(d))}).finally(()=>{s||this._logService.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-l}ms`)}),et.isCancellationToken(r)?aEe(c,r):c}_addNewAdapter(e,t){let n=this._nextHandle();return this._adapter.set(n,new lg(e,t)),n}static _extLabel(e){return e.displayName||e.name}registerDocumentSymbolProvider(e,t,n,o){let r=this._addNewAdapter(new TT(this._documents,n),e),s=o&&o.label||i._extLabel(e);return this._proxy.$registerDocumentSymbolProvider(r,this._transformDocumentSelector(t),s),this._createDisposable(r)}$provideDocumentSymbols(e,t,n){return this._withAdapter(e,TT,o=>o.provideDocumentSymbols($.revive(t),n),void 0,n)}registerCodeLensProvider(e,t,n){let o=this._nextHandle(),r=typeof n.onDidChangeCodeLenses=="function"?this._nextHandle():void 0;this._adapter.set(o,new lg(new yg(this._documents,this._commands.converter,n),e)),this._proxy.$registerCodeLensSupport(o,this._transformDocumentSelector(t),r);let s=this._createDisposable(o);if(r!==void 0){let a=n.onDidChangeCodeLenses(l=>this._proxy.$emitCodeLensEvent(r));s=ia.from(s,a)}return s}$provideCodeLenses(e,t,n){return this._withAdapter(e,yg,o=>o.provideCodeLenses($.revive(t),n),void 0,n)}$resolveCodeLens(e,t,n){return this._withAdapter(e,yg,o=>o.resolveCodeLens(t,n),void 0,void 0)}$releaseCodeLenses(e,t){this._withAdapter(e,yg,n=>Promise.resolve(n.releaseCodeLenses(t)),void 0,void 0)}registerDefinitionProvider(e,t,n){let o=this._addNewAdapter(new MT(this._documents,n),e);return this._proxy.$registerDefinitionSupport(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideDefinition(e,t,n,o){return this._withAdapter(e,MT,r=>r.provideDefinition($.revive(t),n,o),[],o)}registerDeclarationProvider(e,t,n){let o=this._addNewAdapter(new NT(this._documents,n),e);return this._proxy.$registerDeclarationSupport(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideDeclaration(e,t,n,o){return this._withAdapter(e,NT,r=>r.provideDeclaration($.revive(t),n,o),[],o)}registerImplementationProvider(e,t,n){let o=this._addNewAdapter(new RT(this._documents,n),e);return this._proxy.$registerImplementationSupport(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideImplementation(e,t,n,o){return this._withAdapter(e,RT,r=>r.provideImplementation($.revive(t),n,o),[],o)}registerTypeDefinitionProvider(e,t,n){let o=this._addNewAdapter(new FT(this._documents,n),e);return this._proxy.$registerTypeDefinitionSupport(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideTypeDefinition(e,t,n,o){return this._withAdapter(e,FT,r=>r.provideTypeDefinition($.revive(t),n,o),[],o)}registerHoverProvider(e,t,n,o){let r=this._addNewAdapter(new BT(this._documents,n),e);return this._proxy.$registerHoverProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideHover(e,t,n,o){return this._withAdapter(e,BT,r=>r.provideHover($.revive(t),n,o),void 0,o)}registerEvaluatableExpressionProvider(e,t,n,o){let r=this._addNewAdapter(new PT(this._documents,n),e);return this._proxy.$registerEvaluatableExpressionProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideEvaluatableExpression(e,t,n,o){return this._withAdapter(e,PT,r=>r.provideEvaluatableExpression($.revive(t),n,o),void 0,o)}registerInlineValuesProvider(e,t,n,o){let r=typeof n.onDidChangeInlineValues=="function"?this._nextHandle():void 0,s=this._addNewAdapter(new OT(this._documents,n),e);this._proxy.$registerInlineValuesProvider(s,this._transformDocumentSelector(t),r);let a=this._createDisposable(s);if(r!==void 0){let l=n.onDidChangeInlineValues(c=>this._proxy.$emitInlineValuesEvent(r));a=ia.from(a,l)}return a}$provideInlineValues(e,t,n,o,r){return this._withAdapter(e,OT,s=>s.provideInlineValues($.revive(t),n,o,r),void 0,r)}registerDocumentHighlightProvider(e,t,n){let o=this._addNewAdapter(new HT(this._documents,n),e);return this._proxy.$registerDocumentHighlightProvider(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideDocumentHighlights(e,t,n,o){return this._withAdapter(e,HT,r=>r.provideDocumentHighlights($.revive(t),n,o),void 0,o)}registerLinkedEditingRangeProvider(e,t,n){let o=this._addNewAdapter(new WT(this._documents,n),e);return this._proxy.$registerLinkedEditingRangeProvider(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideLinkedEditingRanges(e,t,n,o){return this._withAdapter(e,WT,async r=>{let s=await r.provideLinkedEditingRanges($.revive(t),n,o);if(s)return{ranges:s.ranges,wordPattern:s.wordPattern?i._serializeRegExp(s.wordPattern):void 0}},void 0,o)}registerReferenceProvider(e,t,n){let o=this._addNewAdapter(new zT(this._documents,n),e);return this._proxy.$registerReferenceSupport(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideReferences(e,t,n,o,r){return this._withAdapter(e,zT,s=>s.provideReferences($.revive(t),n,o,r),void 0,r)}registerCodeActionProvider(e,t,n,o){var r,s;let a=new ne,l=this._addNewAdapter(new Sg(this._documents,this._commands.converter,this._diagnostics,n,this._logService,e,this._apiDeprecation),e);return this._proxy.$registerQuickFixSupport(l,this._transformDocumentSelector(t),{providedKinds:(r=o?.providedCodeActionKinds)==null?void 0:r.map(c=>c.value),documentation:(s=o?.documentation)==null?void 0:s.map(c=>({kind:c.kind.value,command:this._commands.converter.toInternal(c.command,a)}))},i._extLabel(e),!!n.resolveCodeAction),a.add(this._createDisposable(l)),a}$provideCodeActions(e,t,n,o,r){return this._withAdapter(e,Sg,s=>s.provideCodeActions($.revive(t),n,o,r),void 0,r)}$resolveCodeAction(e,t,n){return this._withAdapter(e,Sg,o=>o.resolveCodeAction(t,n),void 0,void 0)}$releaseCodeActions(e,t){this._withAdapter(e,Sg,n=>Promise.resolve(n.releaseCodeActions(t)),void 0,void 0)}registerDocumentFormattingEditProvider(e,t,n){let o=this._addNewAdapter(new VT(this._documents,n),e);return this._proxy.$registerDocumentFormattingSupport(o,this._transformDocumentSelector(t),e.identifier,e.displayName||e.name),this._createDisposable(o)}$provideDocumentFormattingEdits(e,t,n,o){return this._withAdapter(e,VT,r=>r.provideDocumentFormattingEdits($.revive(t),n,o),void 0,o)}registerDocumentRangeFormattingEditProvider(e,t,n){let o=this._addNewAdapter(new UT(this._documents,n),e);return this._proxy.$registerRangeFormattingSupport(o,this._transformDocumentSelector(t),e.identifier,e.displayName||e.name),this._createDisposable(o)}$provideDocumentRangeFormattingEdits(e,t,n,o,r){return this._withAdapter(e,UT,s=>s.provideDocumentRangeFormattingEdits($.revive(t),n,o,r),void 0,r)}registerOnTypeFormattingEditProvider(e,t,n,o){let r=this._addNewAdapter(new QT(this._documents,n),e);return this._proxy.$registerOnTypeFormattingSupport(r,this._transformDocumentSelector(t),o,e.identifier),this._createDisposable(r)}$provideOnTypeFormattingEdits(e,t,n,o,r,s){return this._withAdapter(e,QT,a=>a.provideOnTypeFormattingEdits($.revive(t),n,o,r,s),void 0,s)}registerWorkspaceSymbolProvider(e,t){let n=this._addNewAdapter(new Tf(t,this._logService),e);return this._proxy.$registerNavigateTypeSupport(n,typeof t.resolveWorkspaceSymbol=="function"),this._createDisposable(n)}$provideWorkspaceSymbols(e,t,n){return this._withAdapter(e,Tf,o=>o.provideWorkspaceSymbols(t,n),{symbols:[]},n)}$resolveWorkspaceSymbol(e,t,n){return this._withAdapter(e,Tf,o=>o.resolveWorkspaceSymbol(t,n),void 0,void 0)}$releaseWorkspaceSymbols(e,t){this._withAdapter(e,Tf,n=>n.releaseWorkspaceSymbols(t),void 0,void 0)}registerRenameProvider(e,t,n){let o=this._addNewAdapter(new Mf(this._documents,n,this._logService),e);return this._proxy.$registerRenameSupport(o,this._transformDocumentSelector(t),Mf.supportsResolving(n)),this._createDisposable(o)}$provideRenameEdits(e,t,n,o,r){return this._withAdapter(e,Mf,s=>s.provideRenameEdits($.revive(t),n,o,r),void 0,r)}$resolveRenameLocation(e,t,n,o){return this._withAdapter(e,Mf,r=>r.resolveRenameLocation($.revive(t),n,o),void 0,o)}registerDocumentSemanticTokensProvider(e,t,n,o){let r=this._addNewAdapter(new mA(this._documents,n),e),s=typeof n.onDidChangeSemanticTokens=="function"?this._nextHandle():void 0;this._proxy.$registerDocumentSemanticTokensProvider(r,this._transformDocumentSelector(t),o,s);let a=this._createDisposable(r);if(s){let l=n.onDidChangeSemanticTokens(c=>this._proxy.$emitDocumentSemanticTokensEvent(s));a=ia.from(a,l)}return a}$provideDocumentSemanticTokens(e,t,n,o){return this._withAdapter(e,mA,r=>r.provideDocumentSemanticTokens($.revive(t),n,o),null,o)}$releaseDocumentSemanticTokens(e,t){this._withAdapter(e,mA,n=>n.releaseDocumentSemanticColoring(t),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(e,t,n,o){let r=this._addNewAdapter(new jT(this._documents,n),e);return this._proxy.$registerDocumentRangeSemanticTokensProvider(r,this._transformDocumentSelector(t),o),this._createDisposable(r)}$provideDocumentRangeSemanticTokens(e,t,n,o){return this._withAdapter(e,jT,r=>r.provideDocumentRangeSemanticTokens($.revive(t),n,o),null,o)}registerCompletionItemProvider(e,t,n,o){let r=this._addNewAdapter(new rg(this._documents,this._commands.converter,n,this._apiDeprecation,e),e);return this._proxy.$registerCompletionsProvider(r,this._transformDocumentSelector(t),o,rg.supportsResolving(n),`${e.identifier.value}(${o.join("")})`),this._createDisposable(r)}$provideCompletionItems(e,t,n,o,r){return this._withAdapter(e,rg,s=>s.provideCompletionItems($.revive(t),n,o,r),void 0,r)}$resolveCompletionItem(e,t,n){return this._withAdapter(e,rg,o=>o.resolveCompletionItem(t,n),void 0,n)}$releaseCompletionItems(e,t){this._withAdapter(e,rg,n=>n.releaseCompletionItems(t),void 0,void 0)}registerInlineCompletionsProvider(e,t,n){let o=new hq(e,this._documents,n,this._commands.converter),r=this._addNewAdapter(o,e);return this._proxy.$registerInlineCompletionsSupport(r,this._transformDocumentSelector(t),o.supportsHandleDidShowCompletionItem),this._createDisposable(r)}registerInlineCompletionsProviderNew(e,t,n){let o=this._addNewAdapter(new uq(e,this._documents,n,this._commands.converter),e);return this._proxy.$registerInlineCompletionsSupport(o,this._transformDocumentSelector(t),!0),this._createDisposable(o)}$provideInlineCompletions(e,t,n,o,r){return this._withAdapter(e,Kg,s=>s.provideInlineCompletions($.revive(t),n,o,r),void 0,r)}$handleInlineCompletionDidShow(e,t,n){this._withAdapter(e,Kg,async o=>{o.handleDidShowCompletionItem(t,n)},void 0,void 0)}$freeInlineCompletionsList(e,t){this._withAdapter(e,Kg,async n=>{n.disposeCompletions(t)},void 0,void 0)}registerSignatureHelpProvider(e,t,n,o){let r=Array.isArray(o)?{triggerCharacters:o,retriggerCharacters:[]}:o,s=this._addNewAdapter(new fA(this._documents,n),e);return this._proxy.$registerSignatureHelpProvider(s,this._transformDocumentSelector(t),r),this._createDisposable(s)}$provideSignatureHelp(e,t,n,o,r){return this._withAdapter(e,fA,s=>s.provideSignatureHelp($.revive(t),n,o,r),void 0,r)}$releaseSignatureHelp(e,t){this._withAdapter(e,fA,n=>n.releaseSignatureHelp(t),void 0,void 0)}registerInlayHintsProvider(e,t,n){let o=typeof n.onDidChangeInlayHints=="function"?this._nextHandle():void 0,r=this._addNewAdapter(new Nf(this._documents,this._commands.converter,n,this._logService,e),e);this._proxy.$registerInlayHintsProvider(r,this._transformDocumentSelector(t),typeof n.resolveInlayHint=="function",o,i._extLabel(e));let s=this._createDisposable(r);if(o!==void 0){let a=n.onDidChangeInlayHints(l=>this._proxy.$emitInlayHintsEvent(o));s=ia.from(s,a)}return s}$provideInlayHints(e,t,n,o){return this._withAdapter(e,Nf,r=>r.provideInlayHints($.revive(t),n,o),void 0,o)}$resolveInlayHint(e,t,n){return this._withAdapter(e,Nf,o=>o.resolveInlayHint(t,n),void 0,n)}$releaseInlayHints(e,t){this._withAdapter(e,Nf,n=>n.releaseHints(t),void 0,void 0)}registerDocumentLinkProvider(e,t,n){let o=this._addNewAdapter(new Rf(this._documents,n),e);return this._proxy.$registerDocumentLinkProvider(o,this._transformDocumentSelector(t),typeof n.resolveDocumentLink=="function"),this._createDisposable(o)}$provideDocumentLinks(e,t,n){return this._withAdapter(e,Rf,o=>o.provideLinks($.revive(t),n),void 0,n,t.scheme==="output")}$resolveDocumentLink(e,t,n){return this._withAdapter(e,Rf,o=>o.resolveLink(t,n),void 0,void 0,!0)}$releaseDocumentLinks(e,t){this._withAdapter(e,Rf,n=>n.releaseLinks(t),void 0,void 0,!0)}registerColorProvider(e,t,n){let o=this._addNewAdapter(new _A(this._documents,n),e);return this._proxy.$registerDocumentColorProvider(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideDocumentColors(e,t,n){return this._withAdapter(e,_A,o=>o.provideColors($.revive(t),n),[],n)}$provideColorPresentations(e,t,n,o){return this._withAdapter(e,_A,r=>r.provideColorPresentations($.revive(t),n,o),void 0,o)}registerFoldingRangeProvider(e,t,n){let o=this._nextHandle(),r=typeof n.onDidChangeFoldingRanges=="function"?this._nextHandle():void 0;this._adapter.set(o,new lg(new qT(this._documents,n),e)),this._proxy.$registerFoldingRangeProvider(o,this._transformDocumentSelector(t),r);let s=this._createDisposable(o);if(r!==void 0){let a=n.onDidChangeFoldingRanges(()=>this._proxy.$emitFoldingRangeEvent(r));s=ia.from(s,a)}return s}$provideFoldingRanges(e,t,n,o){return this._withAdapter(e,qT,r=>r.provideFoldingRanges($.revive(t),n,o),void 0,o)}registerSelectionRangeProvider(e,t,n){let o=this._addNewAdapter(new $T(this._documents,n,this._logService),e);return this._proxy.$registerSelectionRangeProvider(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideSelectionRanges(e,t,n,o){return this._withAdapter(e,$T,r=>r.provideSelectionRanges($.revive(t),n,o),[],o)}registerCallHierarchyProvider(e,t,n){let o=this._addNewAdapter(new sg(this._documents,n),e);return this._proxy.$registerCallHierarchyProvider(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$prepareCallHierarchy(e,t,n,o){return this._withAdapter(e,sg,r=>Promise.resolve(r.prepareSession($.revive(t),n,o)),void 0,o)}$provideCallHierarchyIncomingCalls(e,t,n,o){return this._withAdapter(e,sg,r=>r.provideCallsTo(t,n,o),void 0,o)}$provideCallHierarchyOutgoingCalls(e,t,n,o){return this._withAdapter(e,sg,r=>r.provideCallsFrom(t,n,o),void 0,o)}$releaseCallHierarchy(e,t){this._withAdapter(e,sg,n=>Promise.resolve(n.releaseSession(t)),void 0,void 0)}registerTypeHierarchyProvider(e,t,n){let o=this._addNewAdapter(new ag(this._documents,n),e);return this._proxy.$registerTypeHierarchyProvider(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$prepareTypeHierarchy(e,t,n,o){return this._withAdapter(e,ag,r=>Promise.resolve(r.prepareSession($.revive(t),n,o)),void 0,o)}$provideTypeHierarchySupertypes(e,t,n,o){return this._withAdapter(e,ag,r=>r.provideSupertypes(t,n,o),void 0,o)}$provideTypeHierarchySubtypes(e,t,n,o){return this._withAdapter(e,ag,r=>r.provideSubtypes(t,n,o),void 0,o)}$releaseTypeHierarchy(e,t){this._withAdapter(e,ag,n=>Promise.resolve(n.releaseSession(t)),void 0,void 0)}registerDocumentOnDropEditProvider(e,t,n){let o=this._nextHandle();return this._adapter.set(o,new lg(new GT(this._proxy,this._documents,n,o),e)),this._proxy.$registerDocumentOnDropEditProvider(o,this._transformDocumentSelector(t)),this._createDisposable(o)}$provideDocumentOnDropEdits(e,t,n,o,r,s){return this._withAdapter(e,GT,a=>Promise.resolve(a.provideDocumentOnDropEdits(t,$.revive(n),o,r,s)),void 0,void 0)}registerDocumentPasteEditProvider(e,t,n,o){let r=this._nextHandle();return this._adapter.set(r,new lg(new gA(this._proxy,this._documents,n,r),e)),this._proxy.$registerPasteEditProvider(r,this._transformDocumentSelector(t),!!n.prepareDocumentPaste,o.pasteMimeTypes),this._createDisposable(r)}$prepareDocumentPaste(e,t,n,o,r){return this._withAdapter(e,gA,s=>s.prepareDocumentPaste($.revive(t),n,o,r),void 0,r)}$providePasteEdits(e,t,n,o,r,s){return this._withAdapter(e,gA,a=>a.providePasteEdits(t,$.revive(n),o,r,s),void 0,s)}static _serializeRegExp(e){return{pattern:e.source,flags:LS(e)}}static _serializeIndentationRule(e){return{decreaseIndentPattern:i._serializeRegExp(e.decreaseIndentPattern),increaseIndentPattern:i._serializeRegExp(e.increaseIndentPattern),indentNextLinePattern:e.indentNextLinePattern?i._serializeRegExp(e.indentNextLinePattern):void 0,unIndentedLinePattern:e.unIndentedLinePattern?i._serializeRegExp(e.unIndentedLinePattern):void 0}}static _serializeOnEnterRule(e){return{beforeText:i._serializeRegExp(e.beforeText),afterText:e.afterText?i._serializeRegExp(e.afterText):void 0,previousLineText:e.previousLineText?i._serializeRegExp(e.previousLineText):void 0,action:e.action}}static _serializeOnEnterRules(e){return e.map(i._serializeOnEnterRule)}setLanguageConfiguration(e,t,n){let{wordPattern:o}=n;if(o&&wM(o))throw new Error(`Invalid language configuration: wordPattern '${o}' is not allowed to match the empty string.`);o?this._documents.setWordDefinitionFor(t,o):this._documents.setWordDefinitionFor(t,void 0),n.__electricCharacterSupport&&this._apiDeprecation.report("LanguageConfiguration.__electricCharacterSupport",e,"Do not use."),n.__characterPairSupport&&this._apiDeprecation.report("LanguageConfiguration.__characterPairSupport",e,"Do not use.");let r=this._nextHandle(),s={comments:n.comments,brackets:n.brackets,wordPattern:n.wordPattern?i._serializeRegExp(n.wordPattern):void 0,indentationRules:n.indentationRules?i._serializeIndentationRule(n.indentationRules):void 0,onEnterRules:n.onEnterRules?i._serializeOnEnterRules(n.onEnterRules):void 0,__electricCharacterSupport:n.__electricCharacterSupport,__characterPairSupport:n.__characterPairSupport};return this._proxy.$setLanguageConfiguration(r,t,s),this._createDisposable(r)}$setWordDefinitions(e){for(let t of e)this._documents.setWordDefinitionFor(t.languageId,new RegExp(t.regexSource,t.regexFlags))}};YT._handlePool=0;var JT=class{constructor(){this.requestIdPool=0,this.dataTransfers=new Map}add(e){let t=this.requestIdPool++;return this.dataTransfers.set(t,[...e.values()]),{id:t,dispose:()=>{this.dataTransfers.delete(t)}}}async resolveDropFileData(e,t){var n;let o=this.dataTransfers.get(e);if(!o)throw new Error("No data transfer found");let r=(n=o[t])==null?void 0:n.asFile();if(!r)throw new Error("No file item found in data transfer");return Gi.wrap(await r.data())}dispose(){this.dataTransfers.clear()}},gLe=new Bi,gq;(function(i){let e=[];function t(o){let r=o;return r&&e.push(r),{dispose(){if(r){let s=e.indexOf(r);s>=0&&(e.splice(s,1),r=void 0)}}}}i.register=t;function n(){return e.slice(0)}i.all=n})(gq||(gq={}));var pLe=new Bi,gi,pq=gi=class extends J{constructor(i,e,t,n){if(super(),this._languageService=e,this._languageConfigurationService=t,this._languageFeaturesService=n,this._registrations=new Map,this._pasteEditProviders=new Map,this._documentOnDropEditProviders=new Map,this._proxy=i.getProxy(sn.ExtHostLanguageFeatures),this._languageService){let o=()=>{let r=[];for(let s of e.getRegisteredLanguageIds()){let a=this._languageConfigurationService.getLanguageConfiguration(s).getWordDefinition();r.push({languageId:s,regexSource:a.source,regexFlags:a.flags})}this._proxy.$setWordDefinitions(r)};this._languageConfigurationService.onDidChange(r=>{if(!r.languageId)o();else{let s=this._languageConfigurationService.getLanguageConfiguration(r.languageId).getWordDefinition();this._proxy.$setWordDefinitions([{languageId:r.languageId,regexSource:s.source,regexFlags:s.flags}])}}),o()}}dispose(){for(let i of this._registrations.values())i.dispose();this._registrations.clear(),super.dispose()}$unregister(i){let e=this._registrations.get(i);e&&(e.dispose(),this._registrations.delete(i))}static _reviveLocationDto(i){return i&&(Array.isArray(i)?(i.forEach(e=>gi._reviveLocationDto(e)),i):(i.uri=$.revive(i.uri),i))}static _reviveLocationLinkDto(i){return i&&(Array.isArray(i)?(i.forEach(e=>gi._reviveLocationLinkDto(e)),i):(i.uri=$.revive(i.uri),i))}static _reviveWorkspaceSymbolDto(i){return i&&(Array.isArray(i)?(i.forEach(gi._reviveWorkspaceSymbolDto),i):(i.location=gi._reviveLocationDto(i.location),i))}static _reviveCodeActionDto(i){return i?.forEach(e=>m_(e.edit)),i}static _reviveLinkDTO(i){return i.url&&typeof i.url!="string"&&(i.url=$.revive(i.url)),i}static _reviveCallHierarchyItemDto(i){return i&&(i.uri=$.revive(i.uri)),i}static _reviveTypeHierarchyItemDto(i){return i&&(i.uri=$.revive(i.uri)),i}$registerDocumentSymbolProvider(i,e,t){this._registrations.set(i,this._languageFeaturesService.documentSymbolProvider.register(e,{displayName:t,provideDocumentSymbols:(n,o)=>this._proxy.$provideDocumentSymbols(i,n.uri,o)}))}$registerCodeLensSupport(i,e,t){let n={provideCodeLenses:async(o,r)=>{let s=await this._proxy.$provideCodeLenses(i,o.uri,r);if(s)return{lenses:s.lenses,dispose:()=>s.cacheId&&this._proxy.$releaseCodeLenses(i,s.cacheId)}},resolveCodeLens:(o,r,s)=>this._proxy.$resolveCodeLens(i,r,s)};if(typeof t=="number"){let o=new nt;this._registrations.set(t,o),n.onDidChange=o.event}this._registrations.set(i,this._languageFeaturesService.codeLensProvider.register(e,n))}$emitCodeLensEvent(i,e){let t=this._registrations.get(i);t instanceof nt&&t.fire(e)}$registerDefinitionSupport(i,e){this._registrations.set(i,this._languageFeaturesService.definitionProvider.register(e,{provideDefinition:(t,n,o)=>this._proxy.$provideDefinition(i,t.uri,n,o).then(gi._reviveLocationLinkDto)}))}$registerDeclarationSupport(i,e){this._registrations.set(i,this._languageFeaturesService.declarationProvider.register(e,{provideDeclaration:(t,n,o)=>this._proxy.$provideDeclaration(i,t.uri,n,o).then(gi._reviveLocationLinkDto)}))}$registerImplementationSupport(i,e){this._registrations.set(i,this._languageFeaturesService.implementationProvider.register(e,{provideImplementation:(t,n,o)=>this._proxy.$provideImplementation(i,t.uri,n,o).then(gi._reviveLocationLinkDto)}))}$registerTypeDefinitionSupport(i,e){this._registrations.set(i,this._languageFeaturesService.typeDefinitionProvider.register(e,{provideTypeDefinition:(t,n,o)=>this._proxy.$provideTypeDefinition(i,t.uri,n,o).then(gi._reviveLocationLinkDto)}))}$registerHoverProvider(i,e){this._registrations.set(i,this._languageFeaturesService.hoverProvider.register(e,{provideHover:(t,n,o)=>this._proxy.$provideHover(i,t.uri,n,o)}))}$registerEvaluatableExpressionProvider(i,e){this._registrations.set(i,this._languageFeaturesService.evaluatableExpressionProvider.register(e,{provideEvaluatableExpression:(t,n,o)=>this._proxy.$provideEvaluatableExpression(i,t.uri,n,o)}))}$registerInlineValuesProvider(i,e,t){let n={provideInlineValues:(o,r,s,a)=>this._proxy.$provideInlineValues(i,o.uri,r,s,a)};if(typeof t=="number"){let o=new nt;this._registrations.set(t,o),n.onDidChangeInlineValues=o.event}this._registrations.set(i,this._languageFeaturesService.inlineValuesProvider.register(e,n))}$emitInlineValuesEvent(i,e){let t=this._registrations.get(i);t instanceof nt&&t.fire(e)}$registerDocumentHighlightProvider(i,e){this._registrations.set(i,this._languageFeaturesService.documentHighlightProvider.register(e,{provideDocumentHighlights:(t,n,o)=>this._proxy.$provideDocumentHighlights(i,t.uri,n,o)}))}$registerLinkedEditingRangeProvider(i,e){this._registrations.set(i,this._languageFeaturesService.linkedEditingRangeProvider.register(e,{provideLinkedEditingRanges:async(t,n,o)=>{let r=await this._proxy.$provideLinkedEditingRanges(i,t.uri,n,o);if(r)return{ranges:r.ranges,wordPattern:r.wordPattern?gi._reviveRegExp(r.wordPattern):void 0}}}))}$registerReferenceSupport(i,e){this._registrations.set(i,this._languageFeaturesService.referenceProvider.register(e,{provideReferences:(t,n,o,r)=>this._proxy.$provideReferences(i,t.uri,n,o,r).then(gi._reviveLocationDto)}))}$registerQuickFixSupport(i,e,t,n,o){let r={provideCodeActions:async(s,a,l,c)=>{let d=await this._proxy.$provideCodeActions(i,s.uri,a,l,c);if(d)return{actions:gi._reviveCodeActionDto(d.actions),dispose:()=>{typeof d.cacheId=="number"&&this._proxy.$releaseCodeActions(i,d.cacheId)}}},providedCodeActionKinds:t.providedKinds,documentation:t.documentation,displayName:n};o&&(r.resolveCodeAction=async(s,a)=>{let l=await this._proxy.$resolveCodeAction(i,s.cacheId,a);return s.edit=m_(l),s}),this._registrations.set(i,this._languageFeaturesService.codeActionProvider.register(e,r))}$registerPasteEditProvider(i,e,t,n){let o=new mq(i,this._proxy,t,n);this._pasteEditProviders.set(i,o),this._registrations.set(i,ss(this._languageFeaturesService.documentPasteEditProvider.register(e,o),ct(()=>this._pasteEditProviders.delete(i))))}$resolvePasteFileData(i,e,t){let n=this._pasteEditProviders.get(i);if(!n)throw new Error("Could not find provider");return n.resolveFileData(e,t)}$registerDocumentFormattingSupport(i,e,t,n){this._registrations.set(i,this._languageFeaturesService.documentFormattingEditProvider.register(e,{extensionId:t,displayName:n,provideDocumentFormattingEdits:(o,r,s)=>this._proxy.$provideDocumentFormattingEdits(i,o.uri,r,s)}))}$registerRangeFormattingSupport(i,e,t,n){this._registrations.set(i,this._languageFeaturesService.documentRangeFormattingEditProvider.register(e,{extensionId:t,displayName:n,provideDocumentRangeFormattingEdits:(o,r,s,a)=>this._proxy.$provideDocumentRangeFormattingEdits(i,o.uri,r,s,a)}))}$registerOnTypeFormattingSupport(i,e,t,n){this._registrations.set(i,this._languageFeaturesService.onTypeFormattingEditProvider.register(e,{extensionId:n,autoFormatTriggerCharacters:t,provideOnTypeFormattingEdits:(o,r,s,a,l)=>this._proxy.$provideOnTypeFormattingEdits(i,o.uri,r,s,a,l)}))}$registerNavigateTypeSupport(i,e){let t,n={provideWorkspaceSymbols:async(o,r)=>{let s=await this._proxy.$provideWorkspaceSymbols(i,o,r);return t!==void 0&&this._proxy.$releaseWorkspaceSymbols(i,t),t=s.cacheId,gi._reviveWorkspaceSymbolDto(s.symbols)}};e&&(n.resolveWorkspaceSymbol=async(o,r)=>{let s=await this._proxy.$resolveWorkspaceSymbol(i,o,r);return s&&gi._reviveWorkspaceSymbolDto(s)}),this._registrations.set(i,gq.register(n))}$registerRenameSupport(i,e,t){this._registrations.set(i,this._languageFeaturesService.renameProvider.register(e,{provideRenameEdits:(n,o,r,s)=>this._proxy.$provideRenameEdits(i,n.uri,o,r,s).then(m_),resolveRenameLocation:t?(n,o,r)=>this._proxy.$resolveRenameLocation(i,n.uri,o,r):void 0}))}$registerDocumentSemanticTokensProvider(i,e,t,n){let o;if(typeof n=="number"){let r=new nt;this._registrations.set(n,r),o=r.event}this._registrations.set(i,this._languageFeaturesService.documentSemanticTokensProvider.register(e,new _q(this._proxy,i,t,o)))}$emitDocumentSemanticTokensEvent(i){let e=this._registrations.get(i);e instanceof nt&&e.fire(void 0)}$registerDocumentRangeSemanticTokensProvider(i,e,t){this._registrations.set(i,this._languageFeaturesService.documentRangeSemanticTokensProvider.register(e,new vq(this._proxy,i,t)))}static _inflateSuggestDto(i,e){let t=e.a;return{label:t,kind:e.b??9,tags:e.n,detail:e.c,documentation:e.d,sortText:e.e,filterText:e.f,preselect:e.g,insertText:e.h??(typeof t=="string"?t:t.label),range:e.j??i,insertTextRules:e.i,commitCharacters:e.k,additionalTextEdits:e.l,command:e.m,_id:e.x}}$registerCompletionsProvider(i,e,t,n,o){let r={triggerCharacters:t,_debugDisplayName:o,provideCompletionItems:async(s,a,l,c)=>{let d=await this._proxy.$provideCompletionItems(i,s.uri,a,l,c);return d&&{suggestions:d.b.map(h=>gi._inflateSuggestDto(d.a,h)),incomplete:d.c||!1,duration:d.d,dispose:()=>{typeof d.x=="number"&&this._proxy.$releaseCompletionItems(i,d.x)}}}};n&&(r.resolveCompletionItem=(s,a)=>this._proxy.$resolveCompletionItem(i,s._id,a).then(l=>{if(!l)return s;let c=gi._inflateSuggestDto(s.range,l);return Ur(s,c,!0)})),this._registrations.set(i,this._languageFeaturesService.completionProvider.register(e,r))}$registerInlineCompletionsSupport(i,e,t){let n={provideInlineCompletions:async(o,r,s,a)=>this._proxy.$provideInlineCompletions(i,o.uri,r,s,a),handleItemDidShow:async(o,r)=>{t&&await this._proxy.$handleInlineCompletionDidShow(i,o.pid,r.idx)},freeInlineCompletions:o=>{this._proxy.$freeInlineCompletionsList(i,o.pid)}};this._registrations.set(i,this._languageFeaturesService.inlineCompletionsProvider.register(e,n))}$registerSignatureHelpProvider(i,e,t){this._registrations.set(i,this._languageFeaturesService.signatureHelpProvider.register(e,{signatureHelpTriggerCharacters:t.triggerCharacters,signatureHelpRetriggerCharacters:t.retriggerCharacters,provideSignatureHelp:async(n,o,r,s)=>{let a=await this._proxy.$provideSignatureHelp(i,n.uri,o,s,r);if(a)return{value:a,dispose:()=>{this._proxy.$releaseSignatureHelp(i,a.id)}}}}))}$registerInlayHintsProvider(i,e,t,n,o){let r={displayName:o,provideInlayHints:async(s,a,l)=>{let c=await this._proxy.$provideInlayHints(i,s.uri,a,l);if(c)return{hints:cc(c.hints),dispose:()=>{c.cacheId&&this._proxy.$releaseInlayHints(i,c.cacheId)}}}};if(t&&(r.resolveInlayHint=async(s,a)=>{let l=s;if(!l.cacheId)return s;let c=await this._proxy.$resolveInlayHint(i,l.cacheId,a);if(a.isCancellationRequested)throw new ya;return c?{...s,tooltip:c.tooltip,label:cc(c.label)}:s}),typeof n=="number"){let s=new nt;this._registrations.set(n,s),r.onDidChangeInlayHints=s.event}this._registrations.set(i,this._languageFeaturesService.inlayHintsProvider.register(e,r))}$emitInlayHintsEvent(i){let e=this._registrations.get(i);e instanceof nt&&e.fire(void 0)}$registerDocumentLinkProvider(i,e,t){let n={provideLinks:(o,r)=>this._proxy.$provideDocumentLinks(i,o.uri,r).then(s=>{if(s)return{links:s.links.map(gi._reviveLinkDTO),dispose:()=>{typeof s.cacheId=="number"&&this._proxy.$releaseDocumentLinks(i,s.cacheId)}}})};t&&(n.resolveLink=(o,r)=>{let s=o;return s.cacheId?this._proxy.$resolveDocumentLink(i,s.cacheId,r).then(a=>a&&gi._reviveLinkDTO(a)):o}),this._registrations.set(i,this._languageFeaturesService.linkProvider.register(e,n))}$registerDocumentColorProvider(i,e){let t=this._proxy;this._registrations.set(i,this._languageFeaturesService.colorProvider.register(e,{provideDocumentColors:(n,o)=>t.$provideDocumentColors(i,n.uri,o).then(r=>r.map(s=>{let[a,l,c,d]=s.color;return{color:{red:a,green:l,blue:c,alpha:d},range:s.range}})),provideColorPresentations:(n,o,r)=>t.$provideColorPresentations(i,n.uri,{color:[o.color.red,o.color.green,o.color.blue,o.color.alpha],range:o.range},r)}))}$registerFoldingRangeProvider(i,e,t){let n={provideFoldingRanges:(o,r,s)=>this._proxy.$provideFoldingRanges(i,o.uri,r,s)};if(typeof t=="number"){let o=new nt;this._registrations.set(t,o),n.onDidChange=o.event}this._registrations.set(i,this._languageFeaturesService.foldingRangeProvider.register(e,n))}$emitFoldingRangeEvent(i,e){let t=this._registrations.get(i);t instanceof nt&&t.fire(e)}$registerSelectionRangeProvider(i,e){this._registrations.set(i,this._languageFeaturesService.selectionRangeProvider.register(e,{provideSelectionRanges:(t,n,o)=>this._proxy.$provideSelectionRanges(i,t.uri,n,o)}))}$registerCallHierarchyProvider(i,e){this._registrations.set(i,gLe.register(e,{prepareCallHierarchy:async(t,n,o)=>{let r=await this._proxy.$prepareCallHierarchy(i,t.uri,n,o);if(!(!r||r.length===0))return{dispose:()=>{for(let s of r)this._proxy.$releaseCallHierarchy(i,s._sessionId)},roots:r.map(gi._reviveCallHierarchyItemDto)}},provideOutgoingCalls:async(t,n)=>{let o=await this._proxy.$provideCallHierarchyOutgoingCalls(i,t._sessionId,t._itemId,n);return o&&(o.forEach(r=>{r.to=gi._reviveCallHierarchyItemDto(r.to)}),o)},provideIncomingCalls:async(t,n)=>{let o=await this._proxy.$provideCallHierarchyIncomingCalls(i,t._sessionId,t._itemId,n);return o&&(o.forEach(r=>{r.from=gi._reviveCallHierarchyItemDto(r.from)}),o)}}))}static _reviveRegExp(i){return new RegExp(i.pattern,i.flags)}static _reviveIndentationRule(i){return{decreaseIndentPattern:gi._reviveRegExp(i.decreaseIndentPattern),increaseIndentPattern:gi._reviveRegExp(i.increaseIndentPattern),indentNextLinePattern:i.indentNextLinePattern?gi._reviveRegExp(i.indentNextLinePattern):void 0,unIndentedLinePattern:i.unIndentedLinePattern?gi._reviveRegExp(i.unIndentedLinePattern):void 0}}static _reviveOnEnterRule(i){return{beforeText:gi._reviveRegExp(i.beforeText),afterText:i.afterText?gi._reviveRegExp(i.afterText):void 0,previousLineText:i.previousLineText?gi._reviveRegExp(i.previousLineText):void 0,action:i.action}}static _reviveOnEnterRules(i){return i.map(gi._reviveOnEnterRule)}$setLanguageConfiguration(i,e,t){let n={comments:t.comments,brackets:t.brackets,wordPattern:t.wordPattern?gi._reviveRegExp(t.wordPattern):void 0,indentationRules:t.indentationRules?gi._reviveIndentationRule(t.indentationRules):void 0,onEnterRules:t.onEnterRules?gi._reviveOnEnterRules(t.onEnterRules):void 0,autoClosingPairs:void 0,surroundingPairs:void 0,__electricCharacterSupport:void 0};t.__characterPairSupport&&(n.autoClosingPairs=t.__characterPairSupport.autoClosingPairs),t.__electricCharacterSupport&&t.__electricCharacterSupport.docComment&&(n.__electricCharacterSupport={docComment:{open:t.__electricCharacterSupport.docComment.open,close:t.__electricCharacterSupport.docComment.close}}),this._languageService.isRegisteredLanguageId(e)&&this._registrations.set(i,this._languageConfigurationService.register(e,n,100))}$registerTypeHierarchyProvider(i,e){this._registrations.set(i,pLe.register(e,{prepareTypeHierarchy:async(t,n,o)=>{let r=await this._proxy.$prepareTypeHierarchy(i,t.uri,n,o);if(r)return{dispose:()=>{for(let s of r)this._proxy.$releaseTypeHierarchy(i,s._sessionId)},roots:r.map(gi._reviveTypeHierarchyItemDto)}},provideSupertypes:async(t,n)=>{let o=await this._proxy.$provideTypeHierarchySupertypes(i,t._sessionId,t._itemId,n);return o&&o.map(gi._reviveTypeHierarchyItemDto)},provideSubtypes:async(t,n)=>{let o=await this._proxy.$provideTypeHierarchySubtypes(i,t._sessionId,t._itemId,n);return o&&o.map(gi._reviveTypeHierarchyItemDto)}}))}$registerDocumentOnDropEditProvider(i,e){let t=new fq(i,this._proxy);this._documentOnDropEditProviders.set(i,t),this._registrations.set(i,ss(this._languageFeaturesService.documentOnDropEditProvider.register(e,t),ct(()=>this._documentOnDropEditProviders.delete(i))))}async $resolveDocumentOnDropFileData(i,e,t){let n=this._documentOnDropEditProviders.get(i);if(!n)throw new Error("Could not find provider");return n.resolveDocumentOnDropFileData(e,t)}};pq=gi=Ne([Ks(Tt.MainThreadLanguageFeatures),Be(1,ki),Be(2,Yi),Be(3,Te)],pq);var mq=class{constructor(e,t,n,o){this.handle=e,this._proxy=t,this.dataTransfers=new JT,this.pasteMimeTypes=o,n&&(this.prepareDocumentPaste=async(r,s,a,l)=>{let c=await fd.toDataTransferDTO(a);if(l.isCancellationRequested)return;let d=await this._proxy.$prepareDocumentPaste(e,r.uri,s,c,l);if(!d)return;let h=new Zb;return d.items.forEach(([u,g])=>{h.replace(u,dN(g.asString))}),h})}async provideDocumentPasteEdits(e,t,n,o){let r=this.dataTransfers.add(n);try{let s=await fd.toDataTransferDTO(n),a=await this._proxy.$providePasteEdits(this.handle,r.id,e.uri,t,s,o);return a?{insertText:a.insertText,additionalEdit:a.additionalEdit?m_(a.additionalEdit):void 0}:void 0}finally{r.dispose()}}resolveFileData(e,t){return this.dataTransfers.resolveDropFileData(e,t)}},fq=class{constructor(e,t){this.handle=e,this._proxy=t,this.dataTransfers=new JT}async provideDocumentOnDropEdits(e,t,n,o){let r=this.dataTransfers.add(n);try{let s=await fd.toDataTransferDTO(n),a=await this._proxy.$provideDocumentOnDropEdits(this.handle,r.id,e.uri,t,s,o);return a?{insertText:a.insertText,additionalEdit:m_(a.additionalEdit)}:void 0}finally{r.dispose()}}resolveDocumentOnDropFileData(e,t){return this.dataTransfers.resolveDropFileData(e,t)}},_q=class{constructor(e,t,n,o){this._proxy=e,this._handle=t,this._legend=n,this.onDidChange=o}releaseDocumentSemanticTokens(e){e&&this._proxy.$releaseDocumentSemanticTokens(this._handle,parseInt(e,10))}getLegend(){return this._legend}async provideDocumentSemanticTokens(e,t,n){let o=t?parseInt(t,10):0,r=await this._proxy.$provideDocumentSemanticTokens(this._handle,e.uri,o,n);if(!r||n.isCancellationRequested)return null;let s=Mce(r);return s.type==="full"?{resultId:String(s.id),data:s.data}:{resultId:String(s.id),edits:s.deltas}}},vq=class{constructor(e,t,n){this._proxy=e,this._handle=t,this._legend=n}getLegend(){return this._legend}async provideDocumentRangeSemanticTokens(e,t,n){let o=await this._proxy.$provideDocumentRangeSemanticTokens(this._handle,e.uri,t,n);if(!o||n.isCancellationRequested)return null;let r=Mce(o);if(r.type==="full")return{resultId:String(r.id),data:r.data};throw new Error("Unexpected")}};function Wv(i,e){if(e){let t=e.split("."),n=i;for(let o=0;n&&o<t.length;o++)n=n[t[o]];return n}}function mLe(i){return i instanceof $}function fLe(i){return i&&i.uri instanceof $&&i.languageId&&typeof i.languageId=="string"}function _Le(i){return i&&!i.uri&&i.languageId&&typeof i.languageId=="string"}function vLe(i){return i&&i.uri instanceof $&&(!i.name||typeof i.name=="string")&&(!i.index||typeof i.index=="number")}function Gie(i){if(mLe(i))return{resource:i};if(fLe(i))return{resource:i.uri,overrideIdentifier:i.languageId};if(_Le(i))return{overrideIdentifier:i.languageId};if(vLe(i))return{resource:i.uri};if(i===null)return{resource:null}}var Aq=class{constructor(e,t,n,o){this._onDidChangeConfiguration=new nt,this._proxy=e,this._logService=o,this._extHostWorkspace=t,this._configuration=jp.parse(n),this._configurationScopes=this._toMap(n.configurationScopes)}get onDidChangeConfiguration(){return this._onDidChangeConfiguration&&this._onDidChangeConfiguration.event}$acceptConfigurationChanged(e,t){let n={data:this._configuration.toData(),workspace:this._extHostWorkspace.workspace};this._configuration=jp.parse(e),this._configurationScopes=this._toMap(e.configurationScopes),this._onDidChangeConfiguration.fire(this._toConfigurationChangeEvent(t,n))}getConfiguration(e,t,n){let o=Gie(t)||{},r=this._toReadonlyValue(e?Wv(this._configuration.getValue(void 0,o,this._extHostWorkspace.workspace),e):this._configuration.getValue(void 0,o,this._extHostWorkspace.workspace));e&&this._validateConfigurationAccess(e,o,n?.identifier);function s(l){if(l==null)return null;if(typeof l=="boolean")return l?2:5;switch(l){case d_.Global:return 2;case d_.Workspace:return 5;case d_.WorkspaceFolder:return 6}}let a={has(l){return typeof Wv(r,l)<"u"},get:(l,c)=>{this._validateConfigurationAccess(e?`${e}.${l}`:l,o,n?.identifier);let d=Wv(r,l);if(typeof d>"u")d=c;else{let h,u=(g,p)=>{let f,v=()=>{h=h||Co(r),f=f||Wv(h,p)};return jn(g)?new Proxy(g,{get:(b,A)=>{if(typeof A=="string"&&A.toLowerCase()==="tojson")return v(),()=>f;if(h)return f=f||Wv(h,p),f[A];let w=b[A];return typeof A=="string"?u(w,`${p}.${A}`):w},set:(b,A,w)=>(v(),f&&(f[A]=w),!0),deleteProperty:(b,A)=>(v(),f&&delete f[A],!0),defineProperty:(b,A,w)=>(v(),f&&Object.defineProperty(f,A,w),!0)}):g};d=u(d,l)}return d},update:(l,c,d,h)=>{l=e?`${e}.${l}`:l;let u=s(d);return c!==void 0?this._proxy.$updateConfigurationOption(u,l,c,o,h):this._proxy.$removeConfigurationOption(u,l,o,h)},inspect:l=>{var c,d,h,u,g,p,f,v,b,A,w;l=e?`${e}.${l}`:l;let C=Co(this._configuration.inspect(l,o,this._extHostWorkspace.workspace));if(C)return{key:l,defaultValue:((c=C.policy)==null?void 0:c.value)??((d=C.default)==null?void 0:d.value),globalValue:((h=C.user)==null?void 0:h.value)??((u=C.application)==null?void 0:u.value),workspaceValue:(g=C.workspace)==null?void 0:g.value,workspaceFolderValue:(p=C.workspaceFolder)==null?void 0:p.value,defaultLanguageValue:(f=C.default)==null?void 0:f.override,globalLanguageValue:((v=C.user)==null?void 0:v.override)??((b=C.application)==null?void 0:b.override),workspaceLanguageValue:(A=C.workspace)==null?void 0:A.override,workspaceFolderLanguageValue:(w=C.workspaceFolder)==null?void 0:w.override,languageIds:C.overrideIdentifiers}}};return typeof r=="object"&&Ur(a,r,!1),Object.freeze(a)}_toReadonlyValue(e){let t=n=>jn(n)?new Proxy(n,{get:(o,r)=>t(o[r]),set:(o,r,s)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(r)}' of object`)},deleteProperty:(o,r)=>{throw new Error(`TypeError: Cannot delete read only property '${String(r)}' of object`)},defineProperty:(o,r)=>{throw new Error(`TypeError: Cannot define property '${String(r)}' for a readonly object`)},setPrototypeOf:o=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):n;return t(e)}_validateConfigurationAccess(e,t,n){let o=T_.test(e)?4:this._configurationScopes.get(e),r=n?`[${n.value}] `:"";if(o===4){typeof t?.resource>"u"&&this._logService.warn(`${r}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(o===3){t!=null&&t.resource&&this._logService.warn(`${r}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}_toConfigurationChangeEvent(e,t){let n=new Hw(e,t,this._configuration,this._extHostWorkspace.workspace);return Object.freeze({affectsConfiguration:(o,r)=>n.affectsConfiguration(o,Gie(r))})}_toMap(e){return e.reduce((t,n)=>(t.set(n[0],n[1]),t),new Map)}},bq=class{constructor(i,e,t,n){this._workspaceContextService=e,this.configurationService=t,this._environmentService=n;let o=i.getProxy(sn.ExtHostConfiguration);o.$initializeConfiguration(this._getConfigurationData()),this._configurationListener=t.onDidChangeConfiguration(r=>{o.$acceptConfigurationChanged(this._getConfigurationData(),r.change)})}_getConfigurationData(){let i={...this.configurationService.getConfigurationData(),configurationScopes:[]};return(!this._environmentService.isBuilt||this._environmentService.isExtensionDevelopment)&&(i.configurationScopes=IEe()),i}dispose(){this._configurationListener.dispose()}$updateConfigurationOption(i,e,t,n,o){return n={resource:n!=null&&n.resource?$.revive(n.resource):void 0,overrideIdentifier:n?.overrideIdentifier},this.writeConfiguration(i,e,t,n,o)}$removeConfigurationOption(i,e,t,n){return t={resource:t!=null&&t.resource?$.revive(t.resource):void 0,overrideIdentifier:t?.overrideIdentifier},this.writeConfiguration(i,e,void 0,t,n)}writeConfiguration(i,e,t,n,o){var r,s,a,l,c;i=i??this.deriveConfigurationTarget(e,n);let d=this.configurationService.inspect(e,n);switch(i){case 8:return this._updateValue(e,t,i,(r=d?.memory)==null?void 0:r.override,n,o);case 6:return this._updateValue(e,t,i,(s=d?.workspaceFolder)==null?void 0:s.override,n,o);case 5:return this._updateValue(e,t,i,(a=d?.workspace)==null?void 0:a.override,n,o);case 4:return this._updateValue(e,t,i,(l=d?.userRemote)==null?void 0:l.override,n,o);default:return this._updateValue(e,t,i,(c=d?.userLocal)==null?void 0:c.override,n,o)}}_updateValue(i,e,t,n,o,r){return o=r===!0?o:r===!1?{resource:o.resource}:o.overrideIdentifier&&n!==void 0?o:{resource:o.resource},this.configurationService.updateValue(i,e,o,t,!0)}deriveConfigurationTarget(i,e){if(e.resource&&this._workspaceContextService.getWorkbenchState()===3){let t=oi.as(Sa.Configuration).getConfigurationProperties();if(t[i]&&(t[i].scope===4||t[i].scope===5))return 6}return 5}};bq=Ne([Ks(Tt.MainThreadConfiguration),Be(1,kp),Be(2,Ot),Be(3,dv)],bq);var Bt={identifier:new pd("monaco"),isBuiltin:!0,isUserBuiltin:!0,isUnderDevelopment:!1,extensionLocation:$.from({scheme:"extension",path:"/"}),name:"monaco",publisher:"microsoft",version:"1.0.0",engines:{vscode:"1.69.0"},targetPlatform:"web"},wq=class{constructor(){this._onMessage=new xK,this.onMessage=this._onMessage.event}send(e){this._onMessage.fire(e)}},Cq=class extends RK{constructor(){super(...arguments),this.$showMessage=(e,t,n,o)=>{let r={...n,source:void 0};return super.$showMessage(e,t,r,o)}}},yq=class{constructor(i,e,t){this._proxy=i.getProxy(Tt.MainThreadConfiguration),this._extHostWorkspace=e,this._logService=t,this._actual=null}getConfigProvider(){return this._actual}$initializeConfiguration(i){this._actual=new Aq(this._proxy,this._extHostWorkspace,i,this._logService)}$acceptConfigurationChanged(i,e){this.getConfigProvider().$acceptConfigurationChanged(i,e)}};yq=Ne([Be(0,mm),Be(1,lLe),Be(2,no)],yq);function ALe(){let i=ye.get(ji),e=ye.get(nn),t=ye.get(gm),n=ye.get(io),o=ye.get(li),r=ye.get(ki),s=ye.get(Qr),a=ye.get(dl),l=ye.get(Ft),c=ye.get(ka),d=ye.get(Da),h=ye.get(ty),u=ye.get(hv),g=ye.get(IN),p=ye.get(xN),f=ye.get(ey),v=ye.get(DN),b=ye.get(kN),A=ye.get(EN),w=ye.get(LN),C=ye.get(QC),k=ye.get(Vs),L=ye.get(ZJ),S=ye.get(rm),y=ye.get(eX),M=ye.get(jr),O=ye.get(tX),H=ye.get(Yi),D=ye.get(Te),K=ye.get(Ot),oe=ye.get(kp),ie=ye.get(iX),ce=ye.get(tt),se=new wq,_e=new CT(se),Ve=new yK,Qe={_serviceBrand:void 0,remoteAuthority:null,extensionHostKind:1,getProxy:function(R){return _e.getProxy(R)},set:function(R,I){return _e.set(R,I)},assertRegistered:function(R){_e.assertRegistered(R)},drain:function(){return _e.drain()},dispose(){_e.dispose()}},pt={_serviceBrand:void 0,version:"1.0.0",parentPid:0,get environment(){return te()},allExtensions:[ot.get().extension??Bt],myExtensions:[(ot.get().extension??Bt).identifier],consoleForward:{includeStack:!1,logNative:!1},get telemetryInfo(){return te()},logLevel:aa.Trace,get logsLocation(){return te()},get logFile(){return te()},autoStart:!1,remote:{isRemote:!1,authority:void 0,connectionData:null},uiKind:gC.Web},ke=new cY(new oQ),xe=new CK(Qe,ke),Et=new NK(Qe,ke),Ri=new sq(null);_e.set(Tt.MainThreadWindow,new aq(Qe,O,M)),_e.set(Tt.MainThreadCommands,new wK(Qe,i,ie));let ci=_e.set(sn.ExtHostCommands,new AK(Qe,ke)),Dt=_e.set(sn.ExtHostDocumentsAndEditors,new QK(Qe,ke)),Fi=_e.set(sn.ExtHostDocuments,new IK(Qe,Dt)),Kt=_e.set(sn.ExtHostLanguages,new oq(Qe,Fi,ci.converter,Ri)),Ei=_e.set(sn.ExtHostWindow,new IT(Qe)),Ue=_e.set(sn.ExtHostQuickOpen,nLe(Qe,null,ci)),Yn=_e.set(sn.ExtHostDiagnostics,new _C(Qe,ke,Ve)),ht=_e.set(sn.ExtHostProgress,new FK(_e.getProxy(Tt.MainThreadProgress))),Pn=_e.set(sn.ExtHostDocumentContentProviders,new yT(Qe,Dt,ke)),oo=_e.set(sn.ExtHostEditors,new jK(Qe,Dt)),fn=new cq(Qe),Bo=_e.set(sn.ExtHostLanguageFeatures,new YT(_e,Ri,Fi,ci,Yn,ke,xe)),$e=_e.set(sn.ExtHostWorkspace,new TK(Qe,pt,Ve,ke)),X=_e.set(sn.ExtHostConfiguration,new yq(Qe,$e,ke));_e.set(sn.ExtHostTelemetry,new dq),_e.set(Tt.MainThreadMessageService,new Cq(Qe,e,i,t)),_e.set(Tt.MainThreadDiagnostics,new eq(Qe,c,u)),_e.set(Tt.MainThreadQuickOpen,new MK(Qe,a)),_e.set(Tt.MainThreadTelemetry,new ET(Qe,k,b,L)),_e.set(Tt.MainThreadProgress,new OK(Qe,C,i)),_e.set(Tt.MainThreadDocumentContentProviders,new HK(Qe,n,r,o,s)),_e.set(Tt.MainThreadBulkEdits,new nq(Qe,S,ke)),_e.set(Tt.MainThreadLanguages,new rq(Qe,r,o,n,y)),_e.set(Tt.MainThreadClipboard,new lq(Qe,d)),_e.set(Tt.MainThreadLanguageFeatures,new pq(Qe,r,H,D)),_e.set(Tt.MainThreadConfiguration,new bq(Qe,oe,K,b)),new ZK(Qe,o,p,h,l,f,n,v,g,b,A,u,d,w,ce);let W=new iq(Qe,Dt);return{extHostLogService:ke,extHostApiDeprecationService:xe,extHostMessageService:Et,extHostDocumentsAndEditors:Dt,extHostBulkEdits:W,extHostDocuments:Fi,extHostDocumentContentProviders:Pn,extHostQuickOpen:Ue,extHostProgress:ht,extHostDiagnostics:Yn,extHostEditors:oo,extHostCommands:ci,extHostLanguages:Kt,extHostWindow:Ei,extHostClipboard:fn,extHostLanguageFeatures:Bo,extHostWorkspace:$e,extHostConfiguration:X}}var hF;function qe(){return hF==null&&(hF=ALe()),hF}var Sq;(function(i){i[i.Initial=1]="Initial",i[i.Dynamic=2]="Dynamic"})(Sq||(Sq={}));var bLe={createDiagnosticCollection(i){let{extHostDiagnostics:e}=qe(),t=ot.get().extension??Bt;return e.createDiagnosticCollection(t.identifier,i)},get onDidChangeDiagnostics(){let{extHostDiagnostics:i}=qe();return i.onDidChangeDiagnostics},getDiagnostics:i=>{let{extHostDiagnostics:e}=qe();return e.getDiagnostics(i)},getLanguages(){let{extHostLanguages:i}=qe();return i.getLanguages()},setTextDocumentLanguage(i,e){let{extHostLanguages:t}=qe();return t.changeLanguage(i.uri,e)},match(i,e){return $J(gK.from(i),e.uri,e.languageId,!0,void 0,void 0)},registerCodeActionsProvider(i,e,t){let{extHostLanguageFeatures:n}=qe(),o=ot.get().extension??Bt;return n.registerCodeActionProvider(o,i,e,t)},registerCodeLensProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerCodeLensProvider(n,i,e)},registerDefinitionProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerDefinitionProvider(n,i,e)},registerDeclarationProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerDeclarationProvider(n,i,e)},registerImplementationProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerImplementationProvider(n,i,e)},registerTypeDefinitionProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerTypeDefinitionProvider(n,i,e)},registerHoverProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerHoverProvider(n,i,e,n.identifier)},registerEvaluatableExpressionProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerEvaluatableExpressionProvider(n,i,e,n.identifier)},registerInlineValuesProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerInlineValuesProvider(n,i,e,n.identifier)},registerDocumentHighlightProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerDocumentHighlightProvider(n,i,e)},registerLinkedEditingRangeProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerLinkedEditingRangeProvider(n,i,e)},registerReferenceProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerReferenceProvider(n,i,e)},registerRenameProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerRenameProvider(n,i,e)},registerDocumentSymbolProvider(i,e,t){let{extHostLanguageFeatures:n}=qe(),o=ot.get().extension??Bt;return n.registerDocumentSymbolProvider(o,i,e,t)},registerWorkspaceSymbolProvider(i){let{extHostLanguageFeatures:e}=qe(),t=ot.get().extension??Bt;return e.registerWorkspaceSymbolProvider(t,i)},registerDocumentFormattingEditProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerDocumentFormattingEditProvider(n,i,e)},registerDocumentRangeFormattingEditProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerDocumentRangeFormattingEditProvider(n,i,e)},registerOnTypeFormattingEditProvider(i,e,t,...n){let{extHostLanguageFeatures:o}=qe(),r=ot.get().extension??Bt;return o.registerOnTypeFormattingEditProvider(r,i,e,[t].concat(n))},registerDocumentSemanticTokensProvider(i,e,t){let{extHostLanguageFeatures:n}=qe(),o=ot.get().extension??Bt;return n.registerDocumentSemanticTokensProvider(o,i,e,t)},registerDocumentRangeSemanticTokensProvider(i,e,t){let{extHostLanguageFeatures:n}=qe(),o=ot.get().extension??Bt;return n.registerDocumentRangeSemanticTokensProvider(o,i,e,t)},registerSignatureHelpProvider(i,e,t,...n){let{extHostLanguageFeatures:o}=qe(),r=ot.get().extension??Bt;return typeof t=="object"?o.registerSignatureHelpProvider(r,i,e,t):o.registerSignatureHelpProvider(r,i,e,typeof t>"u"?[]:[t,...n])},registerCompletionItemProvider(i,e,...t){let{extHostLanguageFeatures:n}=qe(),o=ot.get().extension??Bt;return n.registerCompletionItemProvider(o,i,e,t)},registerDocumentLinkProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerDocumentLinkProvider(n,i,e)},registerColorProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerColorProvider(n,i,e)},registerFoldingRangeProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerFoldingRangeProvider(n,i,e)},registerSelectionRangeProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerSelectionRangeProvider(n,i,e)},registerCallHierarchyProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerCallHierarchyProvider(n,i,e)},registerTypeHierarchyProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerTypeHierarchyProvider(n,i,e)},setLanguageConfiguration:(i,e)=>{let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.setLanguageConfiguration(n,i,e)},registerInlayHintsProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerInlayHintsProvider(n,i,e)},createLanguageStatusItem(i,e){let{extHostLanguages:t}=qe(),n=ot.get().extension??Bt;return t.createLanguageStatusItem(n,i,e)},registerInlineCompletionItemProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerInlineCompletionsProvider(n,i,e)},registerDocumentDropEditProvider(i,e){let{extHostLanguageFeatures:t}=qe(),n=ot.get().extension??Bt;return t.registerDocumentOnDropEditProvider(n,i,e)}},wLe={registerCommand(i,e,t){let{extHostCommands:n}=qe();return n.registerCommand(!0,i,e,t,void 0,ot.get().extension??Bt)},registerTextEditorCommand(i,e,t){let{extHostCommands:n,extHostEditors:o,extHostLogService:r}=qe();return n.registerCommand(!0,i,(...s)=>{let a=o.getActiveTextEditor();if(a==null){r.warn("Cannot execute "+i+" because there is no active text editor.");return}return a.edit(l=>{e.apply(t,[a,l,...s])}).then(l=>{l||r.warn("Edits from command "+i+" were not applied.")},l=>{r.warn("An error occurred while running command "+i,l)})},void 0,void 0,ot.get().extension??Bt)},executeCommand(i,...e){let{extHostCommands:t}=qe();return t.executeCommand(i,...e)},getCommands(i=!1){let{extHostCommands:e}=qe();return e.getCommands(i)}},Dq=class{constructor(){this.stat=te}isWritableFileSystem(){return!1}readDirectory(){return Promise.resolve([])}createDirectory(){return Promise.resolve()}readFile(){return Promise.resolve(new Uint8Array(0))}writeFile(){return Promise.resolve()}delete(){return Promise.resolve()}rename(){return Promise.resolve()}copy(){return Promise.resolve()}},Nce={fs:new Dq,workspaceFile:void 0,createFileSystemWatcher(i,e,t,n){let{workspace:o}=ot.get();return o?.createFileSystemWatcher!=null?o.createFileSystemWatcher(i,e,t,n):{ignoreCreateEvents:e??!1,ignoreChangeEvents:t??!1,ignoreDeleteEvents:n??!1,onDidCreate:Z.None,onDidChange:Z.None,onDidDelete:Z.None,dispose:()=>{}}},applyEdit:async i=>{let{extHostBulkEdits:e}=qe(),t=ot.get().extension??Bt;return e.applyWorkspaceEdit(i,t)},getConfiguration:(i,e)=>{let{extHostConfiguration:t}=qe();return t.getConfigProvider().getConfiguration(i,e,ot.get().extension??Bt)},onDidChangeConfiguration(i,e,t){let{extHostConfiguration:n}=qe();return n.getConfigProvider().onDidChangeConfiguration(i,e,t)},get rootPath(){let{workspace:i}=ot.get();return i?.rootPath},get workspaceFolders(){let{workspace:i}=ot.get();if(i==null)return;if("workspaceFolders"in i)return i.workspaceFolders;let e=i.rootPath;if(e==null)return;let t=$.file(e);return[{uri:t,index:0,name:t.toString()}]},getWorkspaceFolder(i){var e;return(e=this.workspaceFolders)==null?void 0:e.find(t=>i.path.startsWith(t.uri.path))},get onDidChangeWorkspaceFolders(){let{workspace:i}=ot.get();return i?.onDidChangeWorkspaceFolders??Z.None},get textDocuments(){let{extHostDocuments:i}=qe();return Array.from(i.getAllDocumentData().map(e=>e.document))},get onDidOpenTextDocument(){let{extHostDocuments:i}=qe();return i.onDidAddDocument},get onDidCloseTextDocument(){let{extHostDocuments:i}=qe();return i.onDidRemoveDocument},get onDidChangeTextDocument(){let{extHostDocuments:i}=qe();return i.onDidChangeDocument},get onWillSaveTextDocument(){let{workspace:i}=ot.get();return i?.onWillSaveTextDocument??Z.None},get onDidSaveTextDocument(){let{workspace:i}=ot.get();return i?.onDidSaveTextDocument??Z.None},get onWillCreateFiles(){return Z.None},get onDidCreateFiles(){return Z.None},get onWillDeleteFiles(){return Z.None},get onDidDeleteFiles(){return Z.None},get onWillRenameFiles(){return Z.None},get onDidRenameFiles(){return Z.None},get onDidGrantWorkspaceTrust(){return Z.None},asRelativePath:te,updateWorkspaceFolders(i,e,...t){let{workspace:n}=ot.get();return n?.updateWorkspaceFolders!=null?n.updateWorkspaceFolders(i,e,...t):!1},findFiles:te,saveAll:te,openTextDocument(i){let{extHostDocuments:e}=qe(),t,n=i;if(typeof i=="string")t=Promise.resolve($.file(i));else if($.isUri(i))t=Promise.resolve(i);else if(n==null||typeof n=="object")t=e.createDocumentData(n);else throw new Error("illegal argument - uriOrFileNameOrOptions");return t.then(o=>e.ensureDocumentData(o).then(r=>r.document))},registerTextDocumentContentProvider(i,e){let{extHostDocumentContentProviders:t}=qe();return t.registerTextDocumentContentProvider(i,e)},registerTaskProvider:te,registerFileSystemProvider:te,openNotebookDocument:te,registerNotebookSerializer:te,notebookDocuments:[],onDidOpenNotebookDocument:te,onDidCloseNotebookDocument:te,isTrusted:!0,name:void 0,onDidChangeNotebookDocument:te,onDidSaveNotebookDocument:te},XT=class{constructor(e){this.uri=e}};function xq(i,e){return{label:i.uri.fsPath,group:e,get isActive(){return i.isAttachedToEditor()},isDirty:!1,isPinned:!1,isPreview:!1,input:new XT(i.uri)}}var v1={isActive:!0,activeTab:void 0,viewColumn:z0.One,get tabs(){return ye.get(li).getModels().map(i=>xq(i,v1))}},CLe={showInformationMessage(i,...e){let{extHostMessageService:t}=qe();return t.showMessage(ot.get().extension??Bt,Mt.Info,i,e[0],e.slice(1))},showWarningMessage(i,...e){let{extHostMessageService:t}=qe();return t.showMessage(ot.get().extension??Bt,Mt.Warning,i,e[0],e.slice(1))},showErrorMessage(i,...e){let{extHostMessageService:t}=qe();return t.showMessage(ot.get().extension??Bt,Mt.Error,i,e[0],e.slice(1))},createOutputChannel(i){let{window:e}=ot.get(),t=e?.createOutputChannel;return t?.call(e,i)??{name:i,append:()=>{},appendLine:()=>{},clear:te,show:()=>{},hide:te,replace:te,dispose:()=>{}}},withScmProgress(i){let{extHostProgress:e}=qe();return e.withProgress(ot.get().extension??Bt,{location:Ug.SourceControl},()=>i({report(){}}))},withProgress(i,e){let{extHostProgress:t}=qe();return t.withProgress(ot.get().extension??Bt,i,e)},showTextDocument:async(i,e,t)=>{let{extHostEditors:n}=qe(),o=await($.isUri(i)?Promise.resolve(Nce.openTextDocument(i)):Promise.resolve(i));return n.showTextDocument(o,e,t)},createQuickPick(){let{extHostQuickOpen:i}=qe();return i.createQuickPick(ot.get().extension??Bt)},showQuickPick(i,e,t){let{extHostQuickOpen:n}=qe();return n.showQuickPick(i,e,t)},createInputBox(){let{extHostQuickOpen:i}=qe(),e=ot.get().extension??Bt;return i.createInputBox(e)},showInputBox(i,e){let{extHostQuickOpen:t}=qe();return t.showInput(i,e)},createTextEditorDecorationType:te,showWorkspaceFolderPick:te,showOpenDialog:te,showSaveDialog:te,createWebviewPanel:te,setStatusBarMessage:te,createStatusBarItem:te,createTerminal:te,registerTreeDataProvider:te,createTreeView:te,registerWebviewPanelSerializer:te,get activeTextEditor(){let{extHostEditors:i}=qe();return i.getActiveTextEditor()},get visibleTextEditors(){let{extHostEditors:i}=qe();return i.getVisibleTextEditors()},onDidChangeActiveTextEditor(i,e,t){let{extHostEditors:n}=qe();return n.onDidChangeActiveTextEditor(i,e,t)},onDidChangeVisibleTextEditors(i,e,t){let{extHostEditors:n}=qe();return n.onDidChangeVisibleTextEditors(i,e,t)},onDidChangeTextEditorSelection(i,e,t){let{extHostEditors:n}=qe();return n.onDidChangeTextEditorSelection(i,e,t)},onDidChangeTextEditorVisibleRanges(i,e,t){let{extHostEditors:n}=qe();return n.onDidChangeTextEditorVisibleRanges(i,e,t)},onDidChangeTextEditorOptions(i,e,t){let{extHostEditors:n}=qe();return n.onDidChangeTextEditorOptions(i,e,t)},onDidChangeTextEditorViewColumn(i,e,t){let{extHostEditors:n}=qe();return n.onDidChangeTextEditorViewColumn(i,e,t)},get terminals(){return te()},get activeTerminal(){return te()},onDidChangeActiveTerminal:Z.None,onDidOpenTerminal:Z.None,onDidCloseTerminal:Z.None,get state(){return te()},onDidChangeWindowState:Z.None,registerUriHandler:te,registerWebviewViewProvider:te,registerCustomEditorProvider:te,registerTerminalLinkProvider:te,get activeColorTheme(){return te()},onDidChangeActiveColorTheme:Z.None,registerFileDecorationProvider:te,registerTerminalProfileProvider:te,onDidChangeTerminalState:Z.None,tabGroups:{get all(){return[v1]},activeTabGroup:v1,onDidChangeTabGroups:Z.None,onDidChangeTabs(i){let e=ye.get(li),t=new ne;return t.add(e.onModelAdded(n=>{i({opened:[xq(n,v1)],closed:[],changed:[]})})),t.add(e.onModelRemoved(n=>{i({opened:[],closed:[xq(n,v1)],changed:[]})})),t},close:te},showNotebookDocument:te,visibleNotebookEditors:[],onDidChangeVisibleNotebookEditors:Z.None,activeNotebookEditor:void 0,onDidChangeActiveNotebookEditor:Z.None,onDidChangeNotebookEditorSelection:Z.None,onDidChangeNotebookEditorVisibleRanges:Z.None},yLe={appName:"Monaco",appRoot:"",language:window.navigator.language??"en-US",get uriScheme(){return te()},get clipboard(){let{extHostClipboard:i}=qe();return i.value},get machineId(){return te()},get sessionId(){return te()},remoteName:void 0,shell:"",uiKind:gC.Web,async asExternalUri(i){let{extHostWindow:e}=qe();try{return await e.asExternalUri(i,{allowTunneling:!1})}catch(t){if(Tb(i,Oe.http)||Tb(i,Oe.https))return i;throw t}},openExternal:async(i,e)=>{let{extHostWindow:t}=qe();return t.openUri(i,{allowTunneling:!1,allowContributedOpeners:e?.allowContributedOpeners})},appHost:"web",isNewAppInstall:!1,isTelemetryEnabled:!1,onDidChangeTelemetryEnabled:Z.None},Ma=void 0,SLe={version:"1.69.0",tasks:Ma,notebooks:Ma,scm:Ma,debug:Ma,extensions:Ma,comments:Ma,authentication:Ma,tests:Ma,env:yLe,commands:wLe,window:CLe,workspace:Nce,languages:bLe,Breakpoint:cC,CallHierarchyIncomingCall:FEe,CallHierarchyItem:UI,CallHierarchyOutgoingCall:BEe,CancellationError:ya,CancellationTokenSource:SN,CodeAction:$Q,CodeActionKind:Rn,CodeActionTriggerKind:oC,CodeLens:GQ,Color:aC,ColorInformation:lj,ColorPresentation:qI,ColorThemeKind:Ma,CommentMode:Ej,CommentThreadCollapsibleState:kj,CompletionItem:nj,CompletionItemKind:lt,CompletionItemTag:rC,CompletionList:QI,CompletionTriggerKind:l_,ConfigurationTarget:d_,CustomExecution:Ace,DebugAdapterExecutable:Aj,DebugAdapterInlineImplementation:Cj,DebugAdapterNamedPipeServer:wj,DebugAdapterServer:bj,DebugConfigurationProviderTriggerKind:Sq,DebugConsoleMode:Lj,DecorationRangeBehavior:bg,Diagnostic:OI,DiagnosticRelatedInformation:eC,DiagnosticSeverity:zo,DiagnosticTag:Ag,Disposable:ia,DocumentHighlight:WI,DocumentHighlightKind:tC,DocumentLink:KI,DocumentSymbol:nC,EndOfLine:$a,EnvironmentVariableMutatorType:KQ,EvaluatableExpression:JI,InlineValueText:ZI,InlineValueVariableLookup:eT,InlineValueEvaluatableExpression:tT,EventEmitter:nt,ExtensionKind:Ij,ExtensionMode:Rj,FileChangeType:Sj,FileDecoration:zEe,FileSystemError:Dj,FileType:bQ,FilePermission:wQ,FoldingRange:xj,FoldingRangeKind:u_,FunctionBreakpoint:vj,Hover:HI,IndentAction:ln,Location:Td,MarkdownString:W0,OverviewRulerLane:us,ParameterInformation:YQ,Position:ti,ProcessExecution:$I,ProgressLocation:Ug,QuickInputButtons:U0,Range:Zt,RelativePattern:h_,Selection:H0,SelectionRange:VI,SemanticTokens:iT,SemanticTokensBuilder:bce,SemanticTokensEdit:wce,SemanticTokensEdits:nD,SemanticTokensLegend:HEe,ShellExecution:GI,ShellQuoting:uj,SignatureHelp:XQ,SignatureHelpTriggerKind:ZQ,SignatureInformation:JQ,SnippetString:PI,SourceBreakpoint:_j,StatusBarAlignment:sj,SymbolInformation:zI,SymbolKind:zi,SymbolTag:iC,Task:$p,TaskGroup:qp,TaskPanelKind:hj,TaskRevealKind:dj,TaskScope:lC,TerminalLink:PEe,TerminalLocation:cj,TerminalProfile:OEe,TextDocumentSaveReason:aj,TextEdit:Xw,TextEditorCursorStyle:Ln,TextEditorLineNumbersStyle:Qc,TextEditorRevealType:jI,TextEditorSelectionChangeKind:V0,TextDocumentChangeReason:sC,ThemeColor:fj,ThemeIcon:Md,TreeItem:gj,TreeItemCollapsibleState:c_,TypeHierarchyItem:oT,UIKind:gC,Uri:$,ViewColumn:z0,WorkspaceEdit:Zw,InlayHint:ij,InlayHintLabelPart:tj,InlayHintKind:ej,NotebookRange:Pl,NotebookCellKind:wg,NotebookCellData:Qg,NotebookData:VEe,NotebookCellStatusBarAlignment:Tj,NotebookCellOutput:nT,NotebookCellOutputItem:uC,NotebookCellStatusBarItem:UEe,NotebookControllerAffinity:Nj,LinkedEditingRanges:QEe,TestRunRequest:Bj,TestMessage:Pj,TestTag:Oj,TestRunProfileKind:Fj,DataTransfer:Ma,DataTransferItem:Ma,LanguageStatusSeverity:a_,QuickPickItemKind:hC,TabInputText:XT,TabInputTextDiff:Hj,TabInputCustom:Wj,TabInputNotebook:Vj,TabInputNotebookDiff:Uj,TabInputWebview:zj,TabInputTerminal:Qj,InputBoxValidationSeverity:g_,InlineCompletionList:rj,InlineCompletionTriggerKind:dC,InlineCompletionItem:oj,DocumentDropEdit:mj,NotebookEditorRevealType:Mj},{version:DLe,tasks:xLe,notebooks:kLe,scm:ELe,debug:LLe,extensions:ILe,comments:TLe,authentication:MLe,tests:NLe,env:RLe,commands:FLe,window:BLe,workspace:PLe,languages:OLe,Breakpoint:HLe,CallHierarchyIncomingCall:WLe,CallHierarchyItem:zLe,CallHierarchyOutgoingCall:VLe,CancellationError:ULe,CancellationTokenSource:QLe,CodeAction:jLe,CodeActionKind:KLe,CodeActionTriggerKind:qLe,CodeLens:$Le,Color:GLe,ColorInformation:YLe,ColorPresentation:JLe,ColorThemeKind:XLe,CommentMode:ZLe,CommentThreadCollapsibleState:eIe,CompletionItem:tIe,CompletionItemKind:iIe,CompletionItemTag:nIe,CompletionList:oIe,CompletionTriggerKind:rIe,ConfigurationTarget:sIe,CustomExecution:aIe,DebugAdapterExecutable:lIe,DebugAdapterInlineImplementation:cIe,DebugAdapterNamedPipeServer:dIe,DebugAdapterServer:hIe,DebugConfigurationProviderTriggerKind:uIe,DebugConsoleMode:gIe,DecorationRangeBehavior:pIe,Diagnostic:mIe,DiagnosticRelatedInformation:fIe,DiagnosticSeverity:_Ie,DiagnosticTag:vIe,Disposable:AIe,DocumentHighlight:bIe,DocumentHighlightKind:wIe,DocumentLink:CIe,DocumentSymbol:yIe,EndOfLine:SIe,EnvironmentVariableMutatorType:DIe,EvaluatableExpression:xIe,InlineValueText:kIe,InlineValueVariableLookup:EIe,InlineValueEvaluatableExpression:LIe,EventEmitter:IIe,ExtensionKind:TIe,ExtensionMode:MIe,FileChangeType:NIe,FileDecoration:RIe,FileSystemError:FIe,FileType:BIe,FilePermission:PIe,FoldingRange:OIe,FoldingRangeKind:HIe,FunctionBreakpoint:WIe,Hover:zIe,IndentAction:VIe,Location:UIe,MarkdownString:QIe,OverviewRulerLane:jIe,ParameterInformation:KIe,Position:qIe,ProcessExecution:$Ie,ProgressLocation:GIe,QuickInputButtons:YIe,Range:JIe,RelativePattern:XIe,Selection:ZIe,SelectionRange:eTe,SemanticTokens:tTe,SemanticTokensBuilder:iTe,SemanticTokensEdit:nTe,SemanticTokensEdits:oTe,SemanticTokensLegend:rTe,ShellExecution:sTe,ShellQuoting:aTe,SignatureHelp:lTe,SignatureHelpTriggerKind:cTe,SignatureInformation:dTe,SnippetString:hTe,SourceBreakpoint:uTe,StatusBarAlignment:gTe,SymbolInformation:pTe,SymbolKind:mTe,SymbolTag:fTe,Task:_Te,TaskGroup:vTe,TaskPanelKind:ATe,TaskRevealKind:bTe,TaskScope:wTe,TerminalLink:CTe,TerminalLocation:yTe,TerminalProfile:STe,TextDocumentSaveReason:DTe,TextEdit:xTe,TextEditorCursorStyle:kTe,TextEditorLineNumbersStyle:ETe,TextEditorRevealType:LTe,TextEditorSelectionChangeKind:ITe,TextDocumentChangeReason:TTe,ThemeColor:MTe,ThemeIcon:NTe,TreeItem:RTe,TreeItemCollapsibleState:FTe,TypeHierarchyItem:BTe,UIKind:PTe,Uri:OTe,ViewColumn:HTe,WorkspaceEdit:WTe,InlayHint:zTe,InlayHintLabelPart:VTe,InlayHintKind:UTe,NotebookRange:QTe,NotebookCellKind:jTe,NotebookCellData:KTe,NotebookData:qTe,NotebookCellStatusBarAlignment:$Te,NotebookCellOutput:GTe,NotebookCellOutputItem:YTe,NotebookCellStatusBarItem:JTe,NotebookControllerAffinity:XTe,LinkedEditingRanges:ZTe,TestRunRequest:eMe,TestMessage:tMe,TestTag:iMe,TestRunProfileKind:nMe,DataTransfer:oMe,DataTransferItem:rMe,LanguageStatusSeverity:sMe,QuickPickItemKind:aMe,TabInputText:lMe,TabInputTextDiff:cMe,TabInputCustom:dMe,TabInputNotebook:hMe,TabInputNotebookDiff:uMe,TabInputWebview:gMe,TabInputTerminal:pMe,InputBoxValidationSeverity:mMe,InlineCompletionList:fMe,InlineCompletionTriggerKind:_Me,InlineCompletionItem:vMe,DocumentDropEdit:AMe,NotebookEditorRevealType:bMe}=SLe,wMe=Object.freeze(Object.defineProperty({__proto__:null,Breakpoint:HLe,CallHierarchyIncomingCall:WLe,CallHierarchyItem:zLe,CallHierarchyOutgoingCall:VLe,CancellationError:ULe,CancellationTokenSource:QLe,CodeAction:jLe,CodeActionKind:KLe,CodeActionTriggerKind:qLe,CodeLens:$Le,Color:GLe,ColorInformation:YLe,ColorPresentation:JLe,ColorThemeKind:XLe,CommentMode:ZLe,CommentThreadCollapsibleState:eIe,CompletionItem:tIe,CompletionItemKind:iIe,CompletionItemTag:nIe,CompletionList:oIe,CompletionTriggerKind:rIe,ConfigurationTarget:sIe,CustomExecution:aIe,DataTransfer:oMe,DataTransferItem:rMe,DebugAdapterExecutable:lIe,DebugAdapterInlineImplementation:cIe,DebugAdapterNamedPipeServer:dIe,DebugAdapterServer:hIe,DebugConfigurationProviderTriggerKind:uIe,DebugConsoleMode:gIe,DecorationRangeBehavior:pIe,Diagnostic:mIe,DiagnosticRelatedInformation:fIe,DiagnosticSeverity:_Ie,DiagnosticTag:vIe,Disposable:AIe,DocumentDropEdit:AMe,DocumentHighlight:bIe,DocumentHighlightKind:wIe,DocumentLink:CIe,DocumentSymbol:yIe,EndOfLine:SIe,EnvironmentVariableMutatorType:DIe,EvaluatableExpression:xIe,EventEmitter:IIe,ExtensionKind:TIe,ExtensionMode:MIe,FileChangeType:NIe,FileDecoration:RIe,FilePermission:PIe,FileSystemError:FIe,FileType:BIe,FoldingRange:OIe,FoldingRangeKind:HIe,FunctionBreakpoint:WIe,Hover:zIe,IndentAction:VIe,InlayHint:zTe,InlayHintKind:UTe,InlayHintLabelPart:VTe,InlineCompletionItem:vMe,InlineCompletionList:fMe,InlineCompletionTriggerKind:_Me,InlineValueEvaluatableExpression:LIe,InlineValueText:kIe,InlineValueVariableLookup:EIe,InputBoxValidationSeverity:mMe,LanguageStatusSeverity:sMe,LinkedEditingRanges:ZTe,Location:UIe,MarkdownString:QIe,NotebookCellData:KTe,NotebookCellKind:jTe,NotebookCellOutput:GTe,NotebookCellOutputItem:YTe,NotebookCellStatusBarAlignment:$Te,NotebookCellStatusBarItem:JTe,NotebookControllerAffinity:XTe,NotebookData:qTe,NotebookEditorRevealType:bMe,NotebookRange:QTe,OverviewRulerLane:jIe,ParameterInformation:KIe,Position:qIe,ProcessExecution:$Ie,ProgressLocation:GIe,QuickInputButtons:YIe,QuickPickItemKind:aMe,Range:JIe,RelativePattern:XIe,Selection:ZIe,SelectionRange:eTe,SemanticTokens:tTe,SemanticTokensBuilder:iTe,SemanticTokensEdit:nTe,SemanticTokensEdits:oTe,SemanticTokensLegend:rTe,ShellExecution:sTe,ShellQuoting:aTe,SignatureHelp:lTe,SignatureHelpTriggerKind:cTe,SignatureInformation:dTe,SnippetString:hTe,SourceBreakpoint:uTe,StatusBarAlignment:gTe,SymbolInformation:pTe,SymbolKind:mTe,SymbolTag:fTe,TabInputCustom:dMe,TabInputNotebook:hMe,TabInputNotebookDiff:uMe,TabInputTerminal:pMe,TabInputText:lMe,TabInputTextDiff:cMe,TabInputWebview:gMe,Task:_Te,TaskGroup:vTe,TaskPanelKind:ATe,TaskRevealKind:bTe,TaskScope:wTe,TerminalLink:CTe,TerminalLocation:yTe,TerminalProfile:STe,TestMessage:tMe,TestRunProfileKind:nMe,TestRunRequest:eMe,TestTag:iMe,TextDocumentChangeReason:TTe,TextDocumentSaveReason:DTe,TextEdit:xTe,TextEditorCursorStyle:kTe,TextEditorLineNumbersStyle:ETe,TextEditorRevealType:LTe,TextEditorSelectionChangeKind:ITe,ThemeColor:MTe,ThemeIcon:NTe,TreeItem:RTe,TreeItemCollapsibleState:FTe,TypeHierarchyItem:BTe,UIKind:PTe,Uri:OTe,ViewColumn:HTe,WorkspaceEdit:WTe,authentication:MLe,commands:FLe,comments:TLe,debug:LLe,env:RLe,extensions:ILe,languages:OLe,notebooks:kLe,scm:ELe,tasks:xLe,tests:NLe,version:DLe,window:BLe,workspace:PLe},Symbol.toStringTag,{value:"Module"}));function CMe(){return`/*!-----------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(0316a754aa4c25208bef91937efbce2ab1e3ce37)
 * Released under the MIT license
 * https://github.com/microsoft/vscode/blob/main/LICENSE.txt
 *-----------------------------------------------------------*/.monaco-action-bar{white-space:nowrap;height:100%}.monaco-action-bar .actions-container{display:flex;margin:0 auto;padding:0;height:100%;width:100%;align-items:center}.monaco-action-bar.vertical .actions-container{display:inline-block}.monaco-action-bar .action-item{display:block;align-items:center;justify-content:center;cursor:pointer;position:relative}.monaco-action-bar .action-item.disabled{cursor:default}.monaco-action-bar .action-item .codicon,.monaco-action-bar .action-item .icon{display:block}.monaco-action-bar .action-item .codicon{display:flex;align-items:center;width:16px;height:16px}.monaco-action-bar .action-label{font-size:11px;padding:3px;border-radius:5px}.monaco-action-bar .action-item.disabled .action-label,.monaco-action-bar .action-item.disabled .action-label:before,.monaco-action-bar .action-item.disabled .action-label:hover{opacity:.6}.monaco-action-bar.vertical{text-align:left}.monaco-action-bar.vertical .action-item{display:block}.monaco-action-bar.vertical .action-label.separator{display:block;border-bottom:1px solid #bbb;padding-top:1px;margin-left:.8em;margin-right:.8em}.monaco-action-bar .action-item .action-label.separator{width:1px;height:16px;margin:5px 4px!important;cursor:default;min-width:1px;padding:0;background-color:#bbb}.secondary-actions .monaco-action-bar .action-label{margin-left:6px}.monaco-action-bar .action-item.select-container{overflow:hidden;flex:1;max-width:170px;min-width:60px;display:flex;align-items:center;justify-content:center;margin-right:10px}.monaco-action-bar .action-item.action-dropdown-item{display:flex}.monaco-action-bar .action-item.action-dropdown-item>.action-label{margin-right:1px}.monaco-aria-container{position:absolute;left:-999em}.monaco-text-button{box-sizing:border-box;display:flex;width:100%;padding:4px;text-align:center;cursor:pointer;justify-content:center;align-items:center}.monaco-text-button:focus{outline-offset:2px!important}.monaco-text-button:hover{text-decoration:none!important}.monaco-button.disabled,.monaco-button.disabled:focus{opacity:.4!important;cursor:default}.monaco-text-button>.codicon{margin:0 .2em;color:inherit!important}.monaco-button-dropdown{display:flex;cursor:pointer}.monaco-button-dropdown.disabled{cursor:default}.monaco-button-dropdown>.monaco-button:focus{outline-offset:-1px!important}.monaco-button-dropdown.disabled>.monaco-button-dropdown-separator,.monaco-button-dropdown.disabled>.monaco-button.disabled,.monaco-button-dropdown.disabled>.monaco-button.disabled:focus{opacity:.4!important}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-right-width:0!important}.monaco-button-dropdown .monaco-button-dropdown-separator{padding:4px 0;cursor:default}.monaco-button-dropdown .monaco-button-dropdown-separator>div{height:100%;width:1px}.monaco-button-dropdown>.monaco-button.monaco-dropdown-button{border-left-width:0!important}.monaco-description-button{flex-direction:column}.monaco-description-button .monaco-button-label{font-weight:500}.monaco-description-button .monaco-button-description{font-style:italic}.monaco-description-button .monaco-button-description,.monaco-description-button .monaco-button-label{display:flex;justify-content:center;align-items:center}.monaco-description-button .monaco-button-description>.codicon,.monaco-description-button .monaco-button-label>.codicon{margin:0 .2em;color:inherit!important}@font-face{font-family:codicon;font-display:block;src:url(data:font/ttf;base64,AAEAAAALAIAAAwAwR1NVQiCLJXoAAAE4AAAAVE9TLzI3T0Y4AAABjAAAAGBjbWFwH7hDjgAACIAAABiYZ2x5Zry928QAACRkAADdsGhlYWRYl6BTAAAA4AAAADZoaGVhAlsC0AAAALwAAAAkaG10eOwy//0AAAHsAAAGlGxvY2EbXFTmAAAhGAAAA0xtYXhwAsYBgQAAARgAAAAgbmFtZdNa5AQAAQIUAAAB9XBvc3RA61s7AAEEDAAAFywAAQAAASwAAAAAASz////+AS4AAQAAAAAAAAAAAAAAAAAAAaUAAQAAAAEAAAKDWk5fDzz1AAsBLAAAAAB8JbCAAAAAAHwlsID////9AS4BLQAAAAgAAgAAAAAAAAABAAABpQF1ABcAAAAAAAIAAAAKAAoAAAD/AAAAAAAAAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAQBKwGQAAUAAAC+ANIAAAAqAL4A0gAAAJAADgBNAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAwOpg7AwBLAAAABsBRwADAAAAAQAAAAAAAAAAAAAAAAACAAAAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLP//ASwAAAEsAAABLAAAASwAAAEs//8BLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASz//wEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAAAAAUAAAADAAAALAAAAAQAAATMAAEAAAAAA8YAAwABAAAALAADAAoAAATMAAQDmgAAABAAEAADAADqiOqM6sfqyesJ607sDP//AADqYOqK6o/qyerM6wvrUP//AAAAAAAAAAAAAAAAAAAAAQAQAGAAZADUANQBTgHUAAAAAwDfATABLQCpAR4BcQENAU0A+AFRAEkBmgFCAUoBSQCIADQBFwB9AL8A7AA/AW8AcgAWAZgAkgB/ASoBBgD9AP4BggC5AJ0ArQF8AVwAggFtAVUBZAFiAVYBZQFsAWcBYACvAVsBaQACAAQABQAKAAsADAANAA4ADwAQABIAGgAcAB0AHgBVAFYAVwBYAFsAXAAhACIAIwAkACUAKAAqACsALAAtAC4ALwAwADEAMgAzADcAOAA7ADwAPQA+AEAAQQBDAEQARQBHAE4ATwBQAFEAYABiAGQAZwBrAG0AbgBvAHAAcQBzAHQAdQB2AHcAeAB5AHoAewB8AH4AgACDAIYAhwCKAIsAjACNAI4AjwCQAJEAkwCVAJYAlwCYAJkAmgCcAJ4AnwCgAIsAoQCiAKMAqgCrAK4AsAC0ALUAuAC6ALsAvAC9AMIAwwDEAMUAxgDHAMgAyQDeAOAA4QDkAOcA6ADpAOoA7gDvAPIA8wD0APcA+QD6APsA/AEAAQEBBAEFAQgBCQEPARMBFAEVARYBGAEZARoBGwEcAR0BIgEjASQBJQEmAScBKAEpASsBLAEuAS8BMQEyATMBNAE1ATYBNwE8AT0BPgE/AUABQQFFAUYBRwFIAUsBTAFOAU8BUAFSAVMBVwFYAVkBWgFdAV4BXwFhAWMBZgFoAWoBcwF0AX0BfgF/AYABgQGDAYQBhQGGAYcBiwGNAY4BjwGSAZMBlAGWAZcBmwGcAZ0BngGfAaMBpADiAOMA5QDmAFkAWgBpADkAagBdAWsAaABsAGYAVAAmACcA9QCEAIkAtgGMAAEAFwBeAN0BBwE5AW4BEQCsAUQBQwELAVQBEgEgAFMBlQBCAPYAhQCxAO0BAwEhACkBEAEKADUANgBGAXABkAGKAYgBiQClATgBOgECAGUBoAGiAaEBdgF3AXgBeQF6AXsBdQARAE0BDACUAZkAYwDAAMwAywDKAEwASwBKABQAwQCkAKYAUgBhATsAmwBfABUAsgCzAQ4AHwAgAOsAEwGRAP8A3ADNAM4A0wDRANIA1QDWANgA2gDbANAAzwFyAL4BHwCBAAYABwAIAAkA2QDUANcAGwC3APEA8AA6ABkAGABIAKcAqAAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAATzAAAAAAAAAGlAADqYAAA6mAAAAADAADqYQAA6mEAAADfAADqYgAA6mIAAAEwAADqYwAA6mMAAAEtAADqZAAA6mQAAACpAADqZQAA6mUAAAEeAADqZgAA6mYAAAFxAADqZwAA6mcAAAENAADqaAAA6mgAAAFNAADqaQAA6mkAAAD4AADqagAA6moAAAFRAADqawAA6msAAABJAADqbAAA6mwAAAGaAADqbQAA6m0AAAFCAADqbgAA6m4AAAFKAADqbwAA6m8AAAFJAADqcAAA6nAAAACIAADqcQAA6nEAAAA0AADqcgAA6nIAAAEXAADqcwAA6nMAAAB9AADqdAAA6nQAAAC/AADqdQAA6nUAAADsAADqdgAA6nYAAAA/AADqdwAA6ncAAAFvAADqeAAA6ngAAAByAADqeQAA6nkAAAAWAADqegAA6noAAAGYAADqewAA6nsAAACSAADqfAAA6nwAAAB/AADqfQAA6n0AAAEqAADqfgAA6n4AAAEGAADqfwAA6n8AAAD9AADqgAAA6oAAAAD+AADqgQAA6oEAAAGCAADqggAA6oIAAAC5AADqgwAA6oMAAACdAADqhAAA6oQAAACtAADqhQAA6oUAAAF8AADqhgAA6oYAAAFcAADqhwAA6ocAAACCAADqiAAA6ogAAAFtAADqigAA6ooAAAFVAADqiwAA6osAAAFkAADqjAAA6owAAAFiAADqjwAA6o8AAAFWAADqkAAA6pAAAAFlAADqkQAA6pEAAAFsAADqkgAA6pIAAAFnAADqkwAA6pMAAAFgAADqlAAA6pQAAACvAADqlQAA6pUAAAFbAADqlgAA6pYAAAFpAADqlwAA6pcAAAACAADqmAAA6pgAAAAEAADqmQAA6pkAAAAFAADqmgAA6poAAAAKAADqmwAA6psAAAALAADqnAAA6pwAAAAMAADqnQAA6p0AAAANAADqngAA6p4AAAAOAADqnwAA6p8AAAAPAADqoAAA6qAAAAAQAADqoQAA6qEAAAASAADqogAA6qIAAAAaAADqowAA6qMAAAAcAADqpAAA6qQAAAAdAADqpQAA6qUAAAAeAADqpgAA6qYAAABVAADqpwAA6qcAAABWAADqqAAA6qgAAABXAADqqQAA6qkAAABYAADqqgAA6qoAAABbAADqqwAA6qsAAABcAADqrAAA6qwAAAAhAADqrQAA6q0AAAAiAADqrgAA6q4AAAAjAADqrwAA6q8AAAAkAADqsAAA6rAAAAAlAADqsQAA6rEAAAAoAADqsgAA6rIAAAAqAADqswAA6rMAAAArAADqtAAA6rQAAAAsAADqtQAA6rUAAAAtAADqtgAA6rYAAAAuAADqtwAA6rcAAAAvAADquAAA6rgAAAAwAADquQAA6rkAAAAxAADqugAA6roAAAAyAADquwAA6rsAAAAzAADqvAAA6rwAAAA3AADqvQAA6r0AAAA4AADqvgAA6r4AAAA7AADqvwAA6r8AAAA8AADqwAAA6sAAAAA9AADqwQAA6sEAAAA+AADqwgAA6sIAAABAAADqwwAA6sMAAABBAADqxAAA6sQAAABDAADqxQAA6sUAAABEAADqxgAA6sYAAABFAADqxwAA6scAAABHAADqyQAA6skAAABOAADqzAAA6swAAABPAADqzQAA6s0AAABQAADqzgAA6s4AAABRAADqzwAA6s8AAABgAADq0AAA6tAAAABiAADq0QAA6tEAAABkAADq0gAA6tIAAABnAADq0wAA6tMAAABrAADq1AAA6tQAAABtAADq1QAA6tUAAABuAADq1gAA6tYAAABvAADq1wAA6tcAAABwAADq2AAA6tgAAABxAADq2QAA6tkAAABzAADq2gAA6toAAAB0AADq2wAA6tsAAAB1AADq3AAA6twAAAB2AADq3QAA6t0AAAB3AADq3gAA6t4AAAB4AADq3wAA6t8AAAB5AADq4AAA6uAAAAB6AADq4QAA6uEAAAB7AADq4gAA6uIAAAB8AADq4wAA6uMAAAB+AADq5AAA6uQAAACAAADq5QAA6uUAAACDAADq5gAA6uYAAACGAADq5wAA6ucAAACHAADq6AAA6ugAAACKAADq6QAA6ukAAACLAADq6gAA6uoAAACMAADq6wAA6usAAACNAADq7AAA6uwAAACOAADq7QAA6u0AAACPAADq7gAA6u4AAACQAADq7wAA6u8AAACRAADq8AAA6vAAAACTAADq8QAA6vEAAACVAADq8gAA6vIAAACWAADq8wAA6vMAAACXAADq9AAA6vQAAACYAADq9QAA6vUAAACZAADq9gAA6vYAAACaAADq9wAA6vcAAACcAADq+AAA6vgAAACeAADq+QAA6vkAAACfAADq+gAA6voAAACgAADq+wAA6vsAAACLAADq/AAA6vwAAAChAADq/QAA6v0AAACiAADq/gAA6v4AAACjAADq/wAA6v8AAACqAADrAAAA6wAAAACrAADrAQAA6wEAAACuAADrAgAA6wIAAACwAADrAwAA6wMAAAC0AADrBAAA6wQAAAC1AADrBQAA6wUAAAC4AADrBgAA6wYAAAC6AADrBwAA6wcAAAC7AADrCAAA6wgAAAC8AADrCQAA6wkAAAC9AADrCwAA6wsAAADCAADrDAAA6wwAAADDAADrDQAA6w0AAADEAADrDgAA6w4AAADFAADrDwAA6w8AAADGAADrEAAA6xAAAADHAADrEQAA6xEAAADIAADrEgAA6xIAAADJAADrEwAA6xMAAADeAADrFAAA6xQAAADgAADrFQAA6xUAAADhAADrFgAA6xYAAADkAADrFwAA6xcAAADnAADrGAAA6xgAAADoAADrGQAA6xkAAADpAADrGgAA6xoAAADqAADrGwAA6xsAAADuAADrHAAA6xwAAADvAADrHQAA6x0AAADyAADrHgAA6x4AAADzAADrHwAA6x8AAAD0AADrIAAA6yAAAAD3AADrIQAA6yEAAAD5AADrIgAA6yIAAAD6AADrIwAA6yMAAAD7AADrJAAA6yQAAAD8AADrJQAA6yUAAAEAAADrJgAA6yYAAAEBAADrJwAA6ycAAAEEAADrKAAA6ygAAAEFAADrKQAA6ykAAAEIAADrKgAA6yoAAAEJAADrKwAA6ysAAAEPAADrLAAA6ywAAAETAADrLQAA6y0AAAEUAADrLgAA6y4AAAEVAADrLwAA6y8AAAEWAADrMAAA6zAAAAEYAADrMQAA6zEAAAEZAADrMgAA6zIAAAEaAADrMwAA6zMAAAEbAADrNAAA6zQAAAEcAADrNQAA6zUAAAEdAADrNgAA6zYAAAEiAADrNwAA6zcAAAEjAADrOAAA6zgAAAEkAADrOQAA6zkAAAElAADrOgAA6zoAAAEmAADrOwAA6zsAAAEnAADrPAAA6zwAAAEoAADrPQAA6z0AAAEpAADrPgAA6z4AAAErAADrPwAA6z8AAAEsAADrQAAA60AAAAEuAADrQQAA60EAAAEvAADrQgAA60IAAAExAADrQwAA60MAAAEyAADrRAAA60QAAAEzAADrRQAA60UAAAE0AADrRgAA60YAAAE1AADrRwAA60cAAAE2AADrSAAA60gAAAE3AADrSQAA60kAAAE8AADrSgAA60oAAAE9AADrSwAA60sAAAE+AADrTAAA60wAAAE/AADrTQAA600AAAFAAADrTgAA604AAAFBAADrUAAA61AAAAFFAADrUQAA61EAAAFGAADrUgAA61IAAAFHAADrUwAA61MAAAFIAADrVAAA61QAAAFLAADrVQAA61UAAAFMAADrVgAA61YAAAFOAADrVwAA61cAAAFPAADrWAAA61gAAAFQAADrWQAA61kAAAFSAADrWgAA61oAAAFTAADrWwAA61sAAAFXAADrXAAA61wAAAFYAADrXQAA610AAAFZAADrXgAA614AAAFaAADrXwAA618AAAFdAADrYAAA62AAAAFeAADrYQAA62EAAAFfAADrYgAA62IAAAFhAADrYwAA62MAAAFjAADrZAAA62QAAAFmAADrZQAA62UAAAFoAADrZgAA62YAAAFqAADrZwAA62cAAAFzAADraAAA62gAAAF0AADraQAA62kAAAF9AADragAA62oAAAF+AADrawAA62sAAAF/AADrbAAA62wAAAGAAADrbQAA620AAAGBAADrbgAA624AAAGDAADrbwAA628AAAGEAADrcAAA63AAAAGFAADrcQAA63EAAAGGAADrcgAA63IAAAGHAADrcwAA63MAAAGLAADrdAAA63QAAAGNAADrdQAA63UAAAGOAADrdgAA63YAAAGPAADrdwAA63cAAAGSAADreAAA63gAAAGTAADreQAA63kAAAGUAADregAA63oAAAGWAADrewAA63sAAAGXAADrfAAA63wAAAGbAADrfQAA630AAAGcAADrfgAA634AAAGdAADrfwAA638AAAGeAADrgAAA64AAAAGfAADrgQAA64EAAAGjAADrggAA64IAAAGkAADrgwAA64MAAADiAADrhAAA64QAAADjAADrhQAA64UAAADlAADrhgAA64YAAADmAADrhwAA64cAAABZAADriAAA64gAAABaAADriQAA64kAAABpAADrigAA64oAAAA5AADriwAA64sAAABqAADrjAAA64wAAABdAADrjQAA640AAAFrAADrjgAA644AAABoAADrjwAA648AAABsAADrkAAA65AAAABmAADrkQAA65EAAABUAADrkgAA65IAAAAmAADrkwAA65MAAAAnAADrlAAA65QAAAD1AADrlQAA65UAAACEAADrlgAA65YAAACJAADrlwAA65cAAAC2AADrmAAA65gAAAGMAADrmQAA65kAAAABAADrmgAA65oAAAAXAADrmwAA65sAAABeAADrnAAA65wAAADdAADrnQAA650AAAEHAADrngAA654AAAE5AADrnwAA658AAAFuAADroAAA66AAAAERAADroQAA66EAAACsAADrogAA66IAAAFEAADrowAA66MAAAFDAADrpAAA66QAAAELAADrpQAA66UAAAFUAADrpgAA66YAAAESAADrpwAA66cAAAEgAADrqAAA66gAAABTAADrqQAA66kAAAGVAADrqgAA66oAAABCAADrqwAA66sAAAD2AADrrAAA66wAAACFAADrrQAA660AAACxAADrrgAA664AAADtAADrrwAA668AAAEDAADrsAAA67AAAAEhAADrsQAA67EAAAApAADrsgAA67IAAAEQAADrswAA67MAAAEKAADrtAAA67QAAAA1AADrtQAA67UAAAA2AADrtgAA67YAAABGAADrtwAA67cAAAFwAADruAAA67gAAAGQAADruQAA67kAAAGKAADrugAA67oAAAGIAADruwAA67sAAAGJAADrvAAA67wAAAClAADrvQAA670AAAE4AADrvgAA674AAAE6AADrvwAA678AAAECAADrwAAA68AAAABlAADrwQAA68EAAAGgAADrwgAA68IAAAGiAADrwwAA68MAAAGhAADrxAAA68QAAAF2AADrxQAA68UAAAF3AADrxgAA68YAAAF4AADrxwAA68cAAAF5AADryAAA68gAAAF6AADryQAA68kAAAF7AADrygAA68oAAAF1AADrywAA68sAAAARAADrzAAA68wAAABNAADrzQAA680AAAEMAADrzgAA684AAACUAADrzwAA688AAAGZAADr0AAA69AAAABjAADr0QAA69EAAADAAADr0gAA69IAAADMAADr0wAA69MAAADLAADr1AAA69QAAADKAADr1QAA69UAAABMAADr1gAA69YAAABLAADr1wAA69cAAABKAADr2AAA69gAAAAUAADr2QAA69kAAADBAADr2gAA69oAAACkAADr2wAA69sAAACmAADr3AAA69wAAABSAADr3QAA690AAABhAADr3gAA694AAAE7AADr3wAA698AAACbAADr4AAA6+AAAABfAADr4QAA6+EAAAAVAADr4gAA6+IAAACyAADr4wAA6+MAAACzAADr5AAA6+QAAAEOAADr5QAA6+UAAAAfAADr5gAA6+YAAAAgAADr5wAA6+cAAADrAADr6AAA6+gAAAATAADr6QAA6+kAAAGRAADr6gAA6+oAAAD/AADr6wAA6+sAAADcAADr7AAA6+wAAADNAADr7QAA6+0AAADOAADr7gAA6+4AAADTAADr7wAA6+8AAADRAADr8AAA6/AAAADSAADr8QAA6/EAAADVAADr8gAA6/IAAADWAADr8wAA6/MAAADYAADr9AAA6/QAAADaAADr9QAA6/UAAADbAADr9gAA6/YAAADQAADr9wAA6/cAAADPAADr+AAA6/gAAAFyAADr+QAA6/kAAAC+AADr+gAA6/oAAAEfAADr+wAA6/sAAACBAADr/AAA6/wAAAAGAADr/QAA6/0AAAAHAADr/gAA6/4AAAAIAADr/wAA6/8AAAAJAADsAAAA7AAAAADZAADsAQAA7AEAAADUAADsAgAA7AIAAADXAADsAwAA7AMAAAAbAADsBAAA7AQAAAC3AADsBQAA7AUAAADxAADsBgAA7AYAAADwAADsBwAA7AcAAAA6AADsCAAA7AgAAAAZAADsCQAA7AkAAAAYAADsCgAA7AoAAABIAADsCwAA7AsAAACnAADsDAAA7AwAAACoAAAAAACUANQA6AEUATIBbAGmAeACGgIuAkICVgJqAn4CkgKmAsgC3gL8A04DqAPUBCoEkATgBS4FLgVcBa4FygZqBx4HXgfoCAYIbgjgCZgKTAqSCroKzAsUCyYLOAtKC1wLdguIC5QLsgveDAwMcAyYDM4M4g0KDXgNqg34DjIOTA6iDvwPRA9oD5QPuhAYEFIQiBCsERoReBHCEeYSEBIcEo4S4hNME6wUDhREFGgUgBSQFKAUrBTAFM4U8hVwFYoVpBXyFmIWjhagFtoXJBdUF24XlheyF8gX+hgcGEAYdBiGGQYZNhlcGaoZyBnuGg4aMhpOGnAaohrOGvAbGBtEG2wbpBv8HH4csBzKHQIdYB2iHhQecB6oHvofYh+qH/AgMCCWILgg5iD4IRQhmCG2IdIh7iI8InoiriLcI04jxiQSJDwkvCVCJdYmUibaJyQnaCf8KDoo3ClWKfAqciqwKsQrCisuK1ormivALB4sTiywLOwtGi1gLcAt8C4OLlwugC7uL0QvgC+wL/4wtjDoMU4xtjIKMkwyejKSMqoyyDLwMxQzNjNUM3IzkDOoM8Yz3jP8NBQ0LDRmNKI09DU0NVg1ujXSNe42hDacNr428DdUN3I3xDfwOB44ZDiKOKo4wjjuORQ5RDmkOb46FDo+Ono6sjryOyY7WDuGO8A73jwiPEo80D0KPYQ9zj6yPuo/HD+CP6Y/9EBWQK5A9EFIQcBCFEJmQnxCrELyQypDQkNqQ4pD6kQeRKhFBkVoRZpF6kYWRnxGrEbSRypHRkdUSA5IdEiYSRJJWknKSjBKfErUSwJLOEuSS+5MSExwTJRMuEzYTPxNWE2STdJN+E4sTmZOxE72TzJPvlAoUKJQ6lFgUZhR0lIsUnJS3lL8UxpUCFQ6VFBUdlTAVOBVElVWVeZWCFZCVoJWplbSVvRXKlfAV/RYIFhmWR5ZSFnIWgRablqWWtBbRluCW8ZcCFxEXIpc1l0uXVJdnF40XoxgjGJCYm5ikmMcY0BjbGOEY9ZkKGTGZQBlEGUgZTBlQGWgZeBmIGZqZrBnIGdKZ5hoHmi6aOppPGluaapqAGpCao5qrmsIayhrZmuSa+xsCmzObT5t4G5Ybpxu2AAEAAD//wEsASwAEQAiADQAZAAAJTQuASIOARUUFh8BFjI/AT4BByInNz4EMzIeARcWFwYnJjQ+AjIeAhQOAQcGJy4BFzA9AS4BJyYnNjc2NzYnNi4CIg4CFRQeARcWFwYHDgEHFS4BNTQ+ATIeARUUBgEsKEVSRSgcGQ0mXCYOGByWKSIBAwoOEBUKDx0VBgMCIlgECA0SFhEOCAgOCRMUCA6HBBEMCQsFBAcFCgEBCxQaHRoTCwYICAQFCgkMEQUSFCM8SDwjE5YpRSgoRSkhPBUKGhoKFTxiGAcKEQ4KBQsVDggJGIsJFBINCQgOEhURDgQICAQOWwEBDhgJBwUDBAcIEBQOGhQKChQaDgoTDggEBAQHCRgPARIwGiQ8IyM8JBowAAAAAAIAAAAAARoBGgAaACgAACUWDgEHNCc+ATcuAw4BByYjPgIzMh4CByIOARQeATI+ATQuASMBGQEUIhYDGSIBARAdIx4TAgkKAxglFREfGAyyFycWFicuJxcXJxfFFiUYAgoJAyUaER4SAQ8cEQMVIhQMGB8aFycuJxYWJy4nFgAAAQAAAAABBwEaAAsAACUVIxUjNSM1MzUzFQEHcRNwcBOpE3BwE3BwAAQAAAAAARoBGgANABIAFgAaAAABIwcVFzMVFzM3NTM3NQcjNTMVBzUzFScjFTMBEPQJCQoJzgoJCRzX4c+8JnBwARkJOAqfCQmfCjgvJiaplpZxEwAAAAABAAAAAAESAMwADwAANxcHJzU3FwczJzcXFQcnNzgoDTg4DSi8KA04OA0ogygNOA05DigoDjkNOA0oAAADAAAAAAEHAQcACQAWACMAADcXNTMVNxcHIyc3NC4BIg4BFB4BMj4BJxQOASIuATQ+ATIeAWUoEyYOOA04sB8zPjMeHjM+Mx8TGSwyLBkZLDIsGZQobGomDTc3Dx8zHx8zPjMeHjMfGSwZGSwyLBkZLAAAAAMAAAAAAQcBBwAJABcAJAAANyczNSM3JwcVFzcyHgEUDgIuAj4BFxUiDgEUHgEyPgE0LgGUKGxqJg03Nw8fMx8fMz4zHgEfMx8ZLBkZLDIsGRksZSgTJg44DTiwHzM+Mx4BHzM+Mx8BEhksMiwZGSwyLBkAAwAAAAABBwEHAAkAFgAjAAA3FyMVMwcXNzUnBwYuAj4BMh4BFA4BJzI+ATQuASIOARQeAZgobGomDTc3Dx8zHgEfMz4zHx8zHxksGRksMiwZGSzHKBMmDjgNOK8BHzM+Mx8fMz4zHhIZLDIsGRksMiwZAAADAAAAAAEHAQcACQAWACMAAD8BFTM1FzcnIwcXFA4CLgI+ATIeAQc0LgEiDgEUHgEyPgFlKBMmDjgNOLAfMz4zHgEfMz4zHxMZLDIsGRksMiwZmChsaiYNNzcPHzMeAR8zPjMfHzMfGSwZGSwyLBkZLAAAAAEAAAAAAQQBBwAJAAA3FzM3Jwc1IxUnO14NXg1OE06DXV0OTsTETgABAAAAAAEHAPMACQAANwcVFzcnMzUjN4NdXQ5OxMRO8l4NXg5NE04AAQAAAAABBwDxAAkAAD8BNScHFyMVMwepXl4OTsPDTihdDl0NThJOAAEAAAAAAMkA4QAJAAA3ByMnNxc1MxU3yS8NLw0fEx+KLy8NHmhoHwABAAAAAADRAM8ACQAANyc1NxcHMxUjF3ovLw0faWkfYy8NLw0fEx4AAQAAAAAA0QDPAAkAADcXFQcnNyM1MyeiLy8NHmhoHs4vDS8OHhMfAAEAAAAAAMkA4QAJAAA/ATMXBycVIzUHXi8NLw0fEx+yLy8NH2lpHwACAAAAAAEaARsACQATAAA3JzU3FwczFSMXPwE1JwcXIxUzB088PA0s6eksgTw8DSzp6SwSPA08DSwTLHY8DTwNLBMsAAEAAAAAAQQBBwAJAAAlJyMHFzcVMzUXAQReDV4NThNNqV5eDk7Dw04AAAAAAgAAAAABGgEaAAcADwAAJRUHJxUnFzUXJxUPARUXNQEZQWY6qAFeVhol6KA1JSVLDZABOSUaIUsRYQAAAwAAAAABIgEaABsAJwA2AAAlJy4BByMiBg8BBh4COwEyNj8BFxY7ATI+AgciLwEzNxccAQ4BIzMjNi8BMx4BFRcWDgIjASBLAgoHWAYKAkwCAgUJBTcFCgIMOAUGWAQJBQJrAgJsORQqAgQBV0UCAkxFAgRMAQECAgIs4QUIAQcF4QUJCAMHBiErAwQHCQgBUDR9AQMDAQYH4QECAuEBAwICAAAEAAAAAAEaARoAHQAsADUAPQAANzMmJyM3MzQ3Izc1MxUXNjcnNTM1IxUzFQcGHgI3NjMyHgIVFA4BLgI2FxYXMjcnBhUUNxc2NTQmIyI4XgsISx0bAhMkJgEJCQETcBJJAgEFCHISFw8cFQsZKi0gCRIUERcSD08KGE4LIRgSEwgKOQkJSE5PAwQCAUsTEkuOBQkJBIkNDBUbDxcmEQkgLCpZEAELTg4SGEZPDxIXIQAAAAADAAAAAAEKARoADwAWABoAACUnNTM1IxUzFQcGFjsBMjYnNzUzFRcjBzczFwEESBJwE0oECwq8CguIAiYkbicdgh0ujUsTEkuOChERkAROT0dLOTkAAAAAAwAAAAABGgEbACoAMQA6AAA3BiMVFB8BIzc2PQE0PgIXMzY3JicmDgIdARQPARczFBYyNjUzNycmNQcyNicjFBY3MjY0JiIGFBb0CQoIB7UHCQ0XHw8DBQcGBxQmHRAHCwhCFh8WQgkLB14HDAElC1MXISEuISGYAgQaGRQVGRkpEB4VCgIJBwIBAg0bJBQpFhYhDQ8WFg8NIRYWbQsICAuEIS4hIS4hAAAAAAYAAAAAASoBJgAVACcALgAzADgAQQAAEwYHIgcOAh0BFA8BNzY9ATQ+Ah8BBgcWHwEjBzMUFjI2NTM3JyYHBiImNTMWNyYnNxcPARc3JhcyNjQmIgYUFqIKBwkKDxcNBBwGBxAdJhRVCQoCBgd6EgwWHxZCCQsGUgYPCyUBdQYHCw2ClA2VBzMXISEuISEBGAgKAwUVHhApEREdExYWKRQkGw0CkQMBExIUEw8WFg8NIRFMBgsICN0HBwoNZ5UNlQYBIS4hIS4hAAAAAAQAAAAAASoBJgAVACcALgAyAAATJicmDgIdARQHNzY9ATQ+AhcWFwczJyY9ATcVFB8BByMUBiImJxcyNicjFBYHARcBzxUbFCYdEAcZAQ0XHw8UED1sBwgTBwsJQhYfFQEmBwwBJQt7AQkN/vcBBRAEAg0bJBQpFhUZCQkpEB4VCgIDDKwUGRoWEykWFiENDxYVDxILCAgLCQEJDf73AAADAAAAAAEGARsAGgAhADQAADcmPQE0LgInJg4CHQEUDwEXMxQWMjY1MzcHBiImNTMWJzc2PQE0PgIXFhceAR0BFB8B+wcMGB8SFCYdEAcLCEIWHxZCCWMGDwslAW4HCQ0XHw8eEwkKCAdmFRcmEiEbEQICDRskFCkXFSENDxYWDw0aBgsICBsVGBopEB4VCgIEFgsbDiYaGRQAAAADAAAAAADhAPQADgAWAB4AADc1MzIWFRQGBx4BFRQGIycVMzI2NTQjJzMyNjQmKwFePx8gEA0QEiIeKioSFCUrJxAUEhMmOLwaGA0VBQQYERkdWEQSECIUEB0OAAkAAAAAARoBBwAQABcAHgAiACYAKgAuADIANgAAASMPAS8BIwcVFzMXMzczNzUHLwEjNTMfASMPATU3MwcjFTMVIxUzJzMVIzcjFTMHMxUjFTMVIwEQZwcMDAdnCQljEA4QYwmMBAZdWQ56XgcCDVqWOTk5OTk5Obw4ODg4ODg4AQcDDAwDCrsKEBAKu7gDA6kOmwMCoQ0mEjkSOBM4EhMTExIAAgAAAAAA9AEaAAgADgAAEyMHFRc3Fzc1BycjBzUz6qgKEU1NERNEDkSWARkJ9AZWVgb020tL0gADAAAAAAEaAQcARwBxAH0AADcxIyIOAh0BFA4CBx4DHQEUHgI7ARUjIi4BJzEmJzUmNzU0JzEmJzUmJzEmKwE1MzI+ATcxNj0BJjcxNjcxPgI7ARczNSMiJzEmJzUmJzEmPQE2JzUmJzEuAisBFTMyHgIdARQeAhcjFgciDgEeAj4BNTQmcQIGCgcEAgQHBQUHBAIEBwoGAgIJEA0DAwEBAQICBAMFBQYBAQYKBwICAQEBAwMNEAkClAICBgUFAwQCAgEBAQMDDRAJAQEGCgcEAgQHBQEPFxEcDQYYIh8TIfQECAoGGQYMCwgEBAgLDAYZBgoIBBIGDQgIBwEICBAGBQUDAQMCAxIFBwUFBhAICAgICA0HehIDAgMBAwUFBhAICAEHCAgNBxMECAoGGQYMCwgEAhETHyIYBg0cERchAAQAAAAAARoBBwBHAHEAfgCKAAA3MSMiDgIdARQOAgceAx0BFB4COwEVIyIuAScxJic1Jjc1NCcxJic1JicxJisBNTMyPgE3MTY9ASY3MTY3MT4COwEXMzUjIicxJic1JicxJj0BNic1JicxLgIrARUzMh4CHQEUHgIXIxYHNjMyFhUUDgEuAjYXBycHFwcXNxc3JzdxAgYKBwQCBAcFBQcEAgQHCgYCAgkQDQMDAQEBAgIEAwUFBgEBBgoHAgIBAQEDAw0QCQKUAgIGBQUDBAICAQEBAwMNEAkBAQYKBwQCBAcFAQ82DhEXIRMfIhgGDUIVFQ4WFg4VFQ4WFvQECAoGGQYMCwgEBAgLDAYZBgoIBBIGDQgIBwEICBAGBQUDAQMCAxIFBwUFBhAICAgICA0HehIDAgMBAwUFBhAICAEHCAgNBxMECAoGGQYMCwgEAhoJIRcRHA0GGCIfAhYWDhUVDhYWDhUVAAUAAAAAARoBBwANABEAGwAfACkAACUjNScjBxUjBxUXMzc1JzMVIxcVBzUnIwcVJzUXFSM1BzUXFRczNzU3FQEQQgleCUIJCfQJqEtLlksKOAlLgyZdSwk4CkvhHAoKHAmWCgqWHBMTDioJCgoJKw04ExNLYCsGCQkGKl8AAAAABAAAAAABBwEaACIAPwBbAGQAABM2MzIeARcOAQc1MTY9AT4CJicuAQ4CFhcVFBcVLgI2FwYjFRQGKwEwIzEuAT0BIiY9ATQ2OwEyFh0BFAc3FAcWHQE+AiYnLgEOAhYXNTQ3Jj4CHgEHIxQGIiY0NjIWWBwiHzMeAQEpIQkRFwkHChE2OSgJGhkJHigIG3ICBAUEFAEEBAQFCwgSCAsDGQkGCQsBCwkNJCMaCQsNBgkBFB4eEwEeCxALCxALAQYTHjQeJDoMAQkLAwkgJicQGRUMKzo1DgMMCAELMUA6pwMvBAUBBAQvBQQmCAsLCCYEAlsPDQkKAgkZHBkJDgoKGiQjDQILCQ0fGgkLGRAICwsQCwsAAwAAAAABGgEaAAcACwAPAAATMxcVByMnNRcVMzUnMzUjHPQJCfQJE+Hh4eEBGQnhCQnhQpaWEyYAAAAAAwAAAAABGAEaADEAOQBJAAA3NTQmIgYdASMnBxcHBh0BIxU7ARYfAQcXNxceATI2PwEXNyc1NjcxMzUjNTYvATcnByM1NDYyFh0BFxUWFRQOAiIuAjU0NzXMIC0gEB8LHgEJJigBBA0BJQsjAgwfIh8MASQLJQ4FKScBCgEeCx9tFyAXHQkNFhsdHBYMCNgLFiAgFgsfCx4BGhsMEBsVASULIwEOEA8OASQLJgEWGxAMGxoBHgsfCxAXFxALEAEWGRcnHA8PHCcXGRYBAAAAABEAAAAAARoBGgAPABMAFwAbAB8AIwAnACsALwAzADcAOwA/AEMARwBLAE8AAAEjNSMVIzUjFSMHFRczNzUHIzUzNSM1MwcjFTMHMxUjFyMVMzczFSMXIxUzBzMVIzcjFTMXMxUjFyMVMwczFSM3IxUzFzMVIxcjFTMnMxUjARAcE5YTHAkJ9AkS4eHh4bwTExMTExMTEyYSEhISEhISEhISEiYTExMTExMTExMTEyUTExMTExMTEwEHEhISEgrhCQnh16gTE14TEhMTE14TEhMTE4QTExMSExMThBMTExITXhMAAAMAAAAAARoBGgA9AHkAggAANy4BDgEPAgYmLwEmJy4CPwI+AjU0Jy4DIyIPAQ4CFRQeBjMyPgE/ATY1NCYvASYvASYHBiciJicmJy4DNSY+AT8BNjMyHwEWHwEWFA8BDgIUFh8BFjMyNzY/AT4BMh8CFh8BFhUUDwEOATcHMxUjNTMVN+sFCwoHAwYFAwgCKQsLBAYBAwQHAwYDCAULDA0IDAgOBQkDChEYHCAiIRAKEQ0GDggDAwcEBA8EDQcIDh4OHxoNFhAJAQQGBQsDBAIEBwoHBgMCCwQFBAQFRQkMBQUJBgYCBgUEBwkFAwYDBAoFCi9XPl4TV30CAQUFBAYEAwEDJwsMBQgFAwUGAwcJBgwJBQwLCAgOBg0RCg8iISAcGREKBAgFDggMBQoECAQEDgRUAgEJBxIaDRweHg8HDgkFCgQDBggJBwQFAwsDBwoLCgVFCQIEBwYDBAMGCAQFCAMCBAMLBAfjVxNePlcAAwAAAAABGgEaAAgARACAAAA/ASM1MxUjNQcXMh8DHgEVFA8BDgIjIi4GNTQ+AT8BNjMyHgIXFhUUDgEPAgYUFhcWHwEeAT8CPgIHMj4BPwE2JzYvASYvAiYiBg8BDgIjIi8BLgE0PgI/ATY0LwQmIyIPAQ4CBx4DFxYXHgGiVz1dElgxDAkPCAcDAwgOBQ4RChAiISAcGBEKAwgGDggMBw4NCgUIAwYDBwQCBgQLCykCCAMFBgMICQYJDAoFCgQBAQMGAwUJBwQFBgIGAwcKBQwJRQUEBAUHAwUCAwYICQcEAgQDCwQHAwEBCRAWDRofDh6vWBJdPVcjCA4ICAQKBQwIDgUIBAoSGBwgISEQCxANBg4ICAsNBAkMBQkIAwYFAwUIBQwLJwMBAwQGBAUFWgMGBQsDBAIDCAUECAYDBAMGBAUECUUECwwJBwYDBQMFBAcJCAYDBAoECw0HDh8eHA0aEQgJAAAABAAAAAABAgDhAAcADwAkAC8AADcjJyMHIzczFycmJyMGDwEXIzUxBiMiJjU0PwE0IyIHNTYzMhUPAQ4BFRQWMzI2NaYTDz0PEjcREBYBAQEBARe2EQsVDxIiHxUSDw8UJBEYDAwLCQwQUSgokFk+AwYGAz43EBMQDh0FBBoMEAomDwQBCAsHChENAAAEAAAAAAElAPQABgAKAAwAEwAAJQcjJzcXNwc3Jw8BFwcXByMnNxcBJZIOOg40i5BSDVASCikLDw46DjTprVMKSaRtYgteFg8VDxFTCkkAAAEAAAAAAQ8A+gAGAAAlBy8BNxc3AQ+fDz8POJfuvAFZC0+yAAgAAAAAARoBBwAGAAoADgASABYAHQAkACsAADcjJzcXNx8BMxUjFTMVIxcjFTMHMxUjJzM3JwcnBxcjJzcXNxcHMzcnBycHRg0TDQ0aDhuWlpaWlpaWlpaWSg0iDhoNDSANEw0NGg4vDSIOGg0N2BQNDRsOBRMlEyYSJhNoIQ0aDQ5MFA0NGw1aIQ0aDQ0AAAEAAAAAAPMAwQAGAAA/ARcHIyc3llEMWAtYDG9SDFdXDAAAAAEAAAAAAMEA9AAGAAA3FwcnNTcXb1IMV1cMllEMWAtYDAAAAAEAAAAAAM8A8wAGAAA3JzcXFQcnvVIMV1cMllEMWAtYDAAAAAEAAAAAAPQAzwAGAAA3Byc3MxcHllEMWAtYDL1SDFdXDAAAAAEAAAAAAP0A/QALAAA3Bxc3FzcnNycHJweFVRFVVRFVVRFVVRGWVRFVVRFVVRFVVREAAAACAAAAAAD0APQAAwAHAAA3FTM1ByM1Mzi8E5aW9Ly8qZYAAAABAAAAAAEHAJYAAwAAJRUjNQEHz5YTEwADAAAAAAEHAPQAAwAHABEAADcVMzUHIzUzJzM1MxUjFTM1IzipE4ODcBODEyapzqioloQSE4MTqQAAAAABAAAAAADiAOIAGQAANzIXHgEXFhQHDgEHBiInLgEnJjQ2NzY3PgGWCgoTHAUDAwUcEwoUChMcBQMFBQoRCRPhAwUcEwoUChMcBQMDBRwTChQTCREKBQUAAQAAAAABGgEaABoAABMyFx4BFxYUBgcGBw4BIi4ENDY3Njc+AZYSESExCgQJCREeDyEkIR4YEQkJCREeDyEBGQQKMSERJCEPHhEJCQkRGB4hJCEPHhEJCQAAAAACAAAAAAEaARoAKgBEAAATJiIHMQYHBgcxDgEWFxYXHgI+ATcxNjc2NzE2JicxJicxJicxJicxJicXBgcOASIuBDQ2NzY3PgEyFx4BFxYUBrQPHg8ODRkPCAgBAwgVCxkdHxwNGQ8IAwUBBAMIBwsKDA0OUxEeDyEkIR4YEQkJCREeDyEkESExCgQJAQIFBQMIDxkNHR8OHBYKDwgBBwgPGQ0ODx8ODg0MCgsHCAOuHhEJCQkRGB4hJCEPHhEJCQQKMSERJCEAAAMAAAAAAOEA4gAMABUAFgAANzI+ATQuASIOARQeATcUBiImNDYyFieWFCMUFCMoIxQUI0UdKB0dKB0xSxQjKCMUFCMoIxRLFB0dKB0dIAAAAwAAAAABGgEaAAwAFgAfAAATMh4BFA4BIi4BND4BBxQWFzcuAQ4BFTM0JicHHgE+AZYkPCMjPEg8IyM8TA0NnxlCOyTiDg2fGUI7JAEZIzxIPCMjPEg8I4MUJRCfFQkcNyEUJRCfFQkcNwAAAQAAAAAAvAC8AAgAADcUBi4BNDYyFrwWIBUVIBaWEBYBFSAWFgAAAAIAAAAAALwAvAAKABcAADcOAS4CPgEyFhQXNjU0JiMiDgEeAjamBAoLCAIECQ4LDAcWEAsTCQQRFhWMBQQCCAsKBwsODwoLEBYNFRYRBAkABQAAAAABGgEaAAcANAA9AEYATwAAASMHFRczNzUHIzUzHgEzMjY0JiIGFSMVIzUzFQ4BFRQWMjY1MxQWMjY0JiMiBgcjLgEjNTMHNDYyFhQGIiYnMhYUBiImNDYzMhYUBiImNDYBEPQJCfQJEqkrBBIKDxYWHxY4JSUICxYfFiYWHxYWEAoRBTAFEQqpcQoRCwsRCjgICwsRCgp5CQoKEQoKARkJ9AkJ9OolCAsWHxYWDzjhLAQSCRAWFhAQFhYfFgoJCQomqQgLCxEKCnkKEQoKEQoKEQoKEQoAAAUAAAAAARoA9AALAA8AEwAYABwAADcXNxc3JzcnBycHFychNSEVITUhFzUjFTMVNSMVvA0eHg8gIA8eHg0exwEG/voBBv76lpaWlkANHh4NHh4PICAPHoMTSxNCCRI5ExMAAAAEAAAAAAEWARoAFgAiACwANgAANyM1MxUzNScjNSM0JiIGFSMVIwcVFzM1PgIeARQOAS4CFwc1IxUnBxczNyczFwcnFSM1ByeDOJYTChwSFiAVFBsKCkEBCQsKBwUKCwgFhhQTFA4lDSR8DSUOFBMUDSaoJS8JEw8WFg8TCbwJ5QUJAgQKCgoFAQYKrBRkZBQNJCRbJA0UZGQUDQAEAAAAAAEHAQcACwAZACAAJAAANycHJwcXBxc3FzcvATczFxUHIxUHIyc1NzsCFxUzNSMXIxUzog4aGw0bGw0bGg4bKRODExMmEoQSEiYTSxImg0uEhJQOGxsOGhsNGxsNG3oTE4MTJhIShBISS4M4hAAAAAEAAAAAAOgA6AALAAA3FzcnNycHJwcXBxeWRA5FRQ5ERA5FRQ6JRQ5ERA5FRQ5ERA4AAAACAAAAAAEaAPYALwA5AAA3Mx4BFAYjNTI2NCYnIycuAgYPAScmJyIHDgEeATsBFSMiJicuAT4BNzYXPgEeAQcXNTMVNxcHIyfgARchIRcPFRUPEQICFx8bBgYQBQUUDQoGCxgOCQkOGgkMBwsbEQ4OCSYrH18YExgNKA0ovAEgLyETFh4WARAPFgUQDg4DAQEOChwaEBMLCw0jIhcDAwQUFgYfdhhmZRcNKCgAAgAAAAABGgD2ADIAPAAANzMeARQGKwE1MzI2NCYnIycuAgYPAScmJwYHDgEeATsBFSMiJicuATc+Ahc+AR4BFwcnFSM1Byc3MxfgARchIRclJQ8VFQ8RAgIXHxsGBhAFBRQNCgYLGA4vLw4aCQ8ECwcXHA4JJisfAx8ZEhgNKA0ovAEgLyETFh4WARAPFgUQDg4DAQEBDQocGhATCwsQKxIMEQUEFBYGHxZIGWZlGA4oKAAAAgAAAAABGgD2ABUALgAANzMeARQGKwEiJicuAT4BNzYXPgEeAQczMjY0JisBJy4CBg8BJyYnIgcOAR4BM+ABFyEhF4wOGgkMBwsbEQ4OCSYrH3+DEBYWEBECAhcfGwYGEAUFFA0KBgsYDrwBIC8hCwsNIyIXAwMEFBYGH3MWHxYQDxYFEA4OAwEBDgocGhAAAwAAAAABFAD0AAYADQARAAA3BxcHJzU3MwcXBxc3NQcXNydYMTENODiRDjIyDji4EV4RwzEyDTgNOQ4xMg04DWAIuwkAAAAABAAAAAABBwEHAAMAEQAYABwAADcjFTMnNzMXFQcjFQcjJzU3OwIXFTM1IxcjFTOpXl5LE4MTEyYShBISJhNLEiaDS4SEgxKDExODEyYSEoQSEkuDOIQAAAIAAAAAARoBGgAMABQAABMiDgEUHgEyPgE0LgEHNTIeARQOAZYkPCMjPEg8IyM8JB8zHx8zARkjPEg8IyM8SDwj8+EfMz4zHgAAAAAKAAAAAAEsARoABwALABMAFwAfACMAKwAvADMAPQAAEwcVFzM3NScHNTMVDwEVFzM3NScHNTMVBzczFxUHIyc3FTM1NwcVFzM3NScHIzUzFSM1MycjFTMHFzc1JwccCQk4CgouJS8JCTgKCi4lOAk4Cgo4CRMlnwkJOQkJCiUlJSVuOjoTDSIiDQEZCTgKCjgJOCYmJQo4CQk4CjkmJi8KCjgJCS8lJYMJcQkJcQk4Jl4lExMSDCINIg0AAAMAAAAAARoBGgASAB4AJwAAPwEVByc1Iyc1NzMXFSM1IxUzHwI3NTM3NScjBxUXNyM1MxUjBxUnSxMWEBwJCeEKE84cCXYjEBwJCZYJCUtChB0JFlgTGxUHLwmWCQlUS4QJQiIGHApdCgpdChNLSwkPFQAAAgAAAAABGgEHABcAIwAAEzMXFSYnNSMVMxcVPwEzBhUjByc1Iyc1FyIOAR4CPgE1NCYc9AkICuEuCigHCwIFNhAvCc4RHA0GGCIfEyEBBwqACQZolgohKAMJCjYHLwmpehMfIhgGDRwRFyEAAgAAAAABGgEHAAsAFAAAASMHFRczFRc3Mzc1ByMPATUnIzUzARD0CQkvEDZ/CRJ6BygKLuEBBwqpCS8HNgmpnwMoIQqWAAAABQAA//0BLQEaACwAMgA2AEMASgAANwYjNSMVLgInMzUjPgI3FTM1HgIXIxUzBxYXNjU0LgEiDgEUHgEzMjcmNy8BHwEGLwIfATYXMhYVFA4BLgI2FzcnBycHF6sGBhIbLhwCEhICHS0bEhsuHAISEgEJCAMjPEg8IyM8JA4NBA03JkwbBg0SJBJHDxEXIRMfIhgHDS4iDxwQDBgnARISAh0tGxMbLRwCEhICHC4bEgwCBA0OJDwjIzxIPCMDCEobTCY3BA0kEiQmCgEgGBEcDQYZISA/LQslDg8TAAQAAAAAASwBGgAsADIANgA/AAA3BiM1IxUuAiczNSM+AjcVMzUeAhcjFTMHFhc2NTQuASIOARQeATMyNyY3LwEfAQYvAh8BFBYyNjQmIgarBgYSGy4cAhISAh0tGxIbLhwCEhIBCQgDIzxIPCMjPCQODQQNNyZMGwYNEiQSLyAvISEvICcBEhICHS0bExstHAISEgIcLhsSDAIEDQ4kPCMjPEg8IwMIShtMJjcEDSQSJFUXISEvISEAAAAABAAAAAABGgEaAAMABwAjADAAADcXLwEXLwEXMw4CBzUjFS4CJzM1Iz4CNxUzNR4CFyMVBzI+ATQuASIOARQeAakmTCZUEiQSeQIcLhsSGy4cAhISAh0tGxIbLhwCEl4kPCMjPEg8IyM8qUwmTFQkEiQbLhwCEhICHS0bExstHAISEgIcLhsSeiM8SDwjIzxIPCMAAAMAAAAAAQcBGgAHAAwAEwAAPwEzFxUHIyc3JyMVMycHFRc1MydLE2VEE5YTqThelrwSEnkT4RNDixMTgzi78xK8E88SAAAAAAQAAAAAARoA4gADAAcAFwAbAAAlFSM1FTMVIzcjIgYdARQWOwEyNj0BNCYHMxUjAQfh4eHh4QgLCwjhBwsLQCYmzhISJV6WCwiDCAsLCIMIC3ATAAEAAAAAAM8AlgADAAA3MxUjXnBwlhMAAAYAAAAAAQkBHAAMABwAKAAwADoASAAAEz4BHgIOAi4CNhcWMzI+ATU0LgIOAh4BNxcHFg4BLgI+ARcHFjY0Jg4BFjcHFhUUBxc+AS8BJiMiDgEUFwcmPgIXSRtBOyQEHTZBOiUEHCYaIBwvHBYlMC4kEwMYgg0oBAURFA8CDBQKEgUKBwgEAVQPBQkODAMKNAsMEh4SCQ0QAyY4GgEFEgQdNkE7JAQcN0E6qBIcLxwZKh4JDCAtLyqKDSkJFAwCDhURBQQhAwQLBQEHBysOCw0SDw4TLhQXBRIeJA8OGDkrDA0AAAMAAAAAAPQBGgATACQANQAANzQuASIOARUXIxUXHgEyNj8BNSMnMhceARQGBwYiJy4BNDY3NhcHDgEHBiInLgEvATUWNxY39BksMiwZAQEBBDVINQQBAV0VExATExATKhMQExMQE2ABARMPEioSDxMBASMoKCPqDRYMDBYNAqYHERcXEQemHgUEDgoNBAUFBA0KDgQFxAMFDAQFBQQMBQOMFAEBFQAAAAUAAAAAASgBBwAlACwANQA/AEYAADcHLgEiBgcnBxcHFSMVMxUWFwcXNx4BMjY3FzcnNjc1MzUjNSc3JzIWFSM0NhcOAQcuASc1MycHFTM1FwcVNzUHNTcnNRcViREEGSAZBBENFgMTEwEEGA0VBxYYFgcVDRgEARMTAxZLDBA4EDICFQ8PFQFLKg8TjjBHR2mPpYMQDxQUDxANFgITEwEJCRgNFQoLCwoVDRgJCgESEwIWDRAMDBBLDxUBARUPHLMIVkRfIBcvEGQWRl8XbhAAAAAABAAAAAABFgEHACUALAA1AD8AADcHLgEiBgcnBxcHFSMVMxUWFwcXNx4BMjY3FzcnNjc1MzUjNSc3JzIWFSM0NhcOAQcuASc1Myc3FxUHNTcnFSOJEQQZIBkEEQ0WAxMTAQQYDRUHFhgWBxUNGAQBExMDFksMEDgQMgIVDw8VAUsTDqlsVo4TgxAPFBQPEA0WAhMTAQkJGA0VCgsLChUNGAkKARITAhYNEAwMEEsPFQEBFQ8cqwhxEEgXOV9EAAAABAAAAAABKQEsACUALAA1AEAAADcHLgEiBgcnBxcHFSMVMxUWFwcXNx4BMjY3FzcnNjc1MzUjNSc3JzIWFSM0NhcOAQcuASc1MzcVBzU3JxUmJzU3iREEGSAZBBENFgMTEwEEGA0VBxYYFgcVDRgEARMTAhVLDBA4EDICFQ8PFQFLuIBqogkKDoMQDxQUDxANFQMTEwEJCRgNFQoLCwoVDRkICgESEwMVDRAMDBBLDxUBARUPHGAQURZDZ3YGA34IAAAAAAQAAAAAAOMA4wAMABgAHAAgAAA3PgEeAg4CLgI2Fx4BPgImJyYOARY3IxUzFSMVM2wRKCQXAhIhKCQWAxIdDBwZDwINCxIpGAhKODg4ONQMAhEiKCQXAhIhKCReCAIMFxwZCAsIIyo7ExITAAMAAAAAAOEA4gAMABAAFAAANyIOARQeATI+ATQuARcVIzU3FSM1lhQjFBQjKCMUFCMSS0tL4RQjKCMUFCMoIxReEhI5ExMAAAIAAAAAAOYA4QAFAAsAADcjBxczNwcjJzczF7pWLCxWLDo6Hh46HeFLS0szMzMzAAEAAAAAAOYA4QAFAAA3ByMnNzPlK1YsLFaWS0tLAAAAAgAAAAAA4QDhAAIABQAANzMnBzMnS5ZLI0YjXoNsPQABAAAAAADhAOEAAgAANxcjlkuW4YEAAAACAAAAAAD0APQAAwAHAAA/ARcHNTcnBzldXV00NDSWXl5dKTQ1NQAAAQAAAAAA9AD0AAMAADcXByeWXl5e9F5eXgAAAAMAAAAAAOMA4wAMABAAFAAANz4BLgIOAh4CNicjFTMnNTMV1AwCESIoJBcCESIoJCcXFxcXbBEoJBcCESIoJBcCERYTJUtLAAUAAAAAARwBHAAVAB4ARABMAFYAABM3Mx8CFQ8BKwE1NCczNSMVJiM9ARcHJi8BNyc3Fwc3FwcXFTMVIxUGBxcHJw4BIiYnByc3Jic1IzUzNTcnNxc+ATIWBy4BDgEVMzQHNjc1IxUeARc2WAKxAQ8BAQ8BXAdgrAkKhiMCAgYcLQo0VxENFQITEwEEGA0VBxYYFgcVDRgEARMTAxYNEQQZIBkVBhEQCTgCCgFKARUPDwEbAQEPAbECDwIKB6xbAlwBZyMDAwUcLgozOxANFQMTEgEKCRgNFQoLCwoVDRkICQETEwMVDRAPFBQHBgMGDgkMVAoPHBwPFQEBAAMAAAAAAQwBBwADAAkADAAAEyMVMzcHFRc3NQ8BNUsTEz4PD4MWaQEH4dUHvAddEAhMmAADAAAAAAEPAQcAAwAJAAwAABMzFSM3BxUXNzUPATUvHBxcFhaEIV0BB+HZC7wLXhYLQoQAAwAAAAABFgEHAAkALgA4AAA/ARcVBzU3JxUjFw4BHQEUDgIrASIuAj0BNC4CNTQ+BDIeBBUUBgcjFRQWOwEyNjVeDqlsVo4TFQUGAgMFAxADBQMCBgsHAwYICgwMDAoIBgQHHBYCARABAv8IcRBIFzlfRGAFDQcQAwUDAgIDBQMQBw0LEAoGCwsIBgMDBggLCwYKEBkWAQICAQAABAAAAAABEQEaABEAHwA3AEQAADcmJzcnByYnJgcGDwEXNzY3NgcGDwEnNzY3NhceARcWBzcnByc3JwcnBw4BFBYXBxc3HgEyNj8BBwYiLgI1ND8BFwcG/wMFGQsaBwkUFAsIHVEdCQQIFwMGEjoSBgcQEAcLBAZhHAwbIxwMHAsdCQgFBhkLGgcSFRUIHTYIEA8MBgwSOhIG5AkHGgsZBgIHCAQJHVEdCAsUDgcGEjoSBgMGBgQLBxBuHQwdIx0MHQsdCBUVEQgZDBkFBgkIHRoEBwsPCBEMEjoSBQAAAAAGAAAAAAEaAQAAAwAHAAsADwAVABgAADc1MxUnMxUjNxUjNR0BMzUlNxcVByc3FTdxqF1dXV2oqP76DmVlDhNKcRISSxNLExOpExOtB0MPRAh1YzEAAAAAAgAAAAAA2AD0AAMABwAANzMVIzcVIzVUHR2EHPS8vLy8AAAAAgAA//0BFgEHABoAJAAANxQOASYnBx4BPgIuAQYHNSMVFzM1Iz4BHgEnNxcVBzU3JxUjhhknIwgSCi0yIwcaLzEPEwksGAojJRcoDqlZQ44TSxQfCBISBxcZByUyLBMNFBcyChMRDgoeoQhxEDsWLV9EAAAFAAAAAAEcAPQABAAJAA4AEgAtAAA3NTMGBzc2NyMVFyYnIxUlFSE1FzI+AS4BBgczFSMnNTMVPgEeAQ4CJic3HgETYQIBFwkLiWkFA2EBBv76xxIaBhEhIAkUJQgQDSonFgYeKiUJDwYXcRIJCTgKCBJxCQoTvBMTvBYiHgwMDxAIKhMRCxEkKx4HFRQGDQ8AAAAAAQAAAAABDAENAB0AADcUDgEmJwceAj4CNTQuAQYHNSMVFzM1Iz4BHgHvJjo1DBoKKDIzKRcqREUWHA5BIw41NyOWHi4NGxwLGCENCiAvGiQ7FxUcIksOHBkWDy0AAAAAAwAAAAAA/gEHAAMACQAMAAATIxUzJxcVByc1HwE1/RwcXBYWhCFdAQfh2Qu8C14WC0KEAAMAAAAAARABBwAIABIAFwAANxQGLgE0NjIWMy8BIwcVFzM/AQcjNTMXvBYgFRUgFlRQEV8YGF8RUGFfX0+WEBYBFSAWFlkIGLIXCFlKslkAAgAAAAABEAEHAAkADgAAJS8BIwcVFzM/AQcjNTMXARBQEV8YGF8RUGFfX0+mWQgYshcIWUqyWQACAAAAAAD8AQAABQAIAAA/ARcVByc3FTdQFpaWFhxu9AtkF2QMrZNKAAAAAAIAAAAAAQwBDAAXACAAADc1MxU+ATMyHgEfASM1LgIiBgczFSMnFyImNDYyFhQGIRwQMBsdNCACAR0CGCcuKQs1ThJ1EBUVIBYWwEsvExYbLhwFBBQiFBYTHBKQFSAWFiAVAAACAAAAAADqARoACgATAAA3MzcnBzUjFScHHwEUBiImNDYyFpYKSRQxHDEUSS8WHxYWHxZ5SRQxdHQxFElBEBUVIBYWAAIAAAAAAOoBGgAKABMAABMjBxc3FTM1FzcnFxQGIiY0NjIWlgpJFDEcMRRJGxYfFhYfFgEZSRQxdHQxFEnhEBUVIBYWAAAAAAIAAAAAAQwBDAAXACEAACU1IxUuASMiDgEPATM1PgIyFhcjFTM3BzI2NC4BBhQWMwELHBAwGx00IAIBHQIYJy4pCzVOEnUQFhYgFRUQwEsvExYbLhwFBBQiFBYTHBKQFSAVARYgFgAAAgAAAAABBwEHAAMABwAAExUzNQcjNTMm4RiysgEH4eHKsgAABQAAAAABKwEsAAEADQBBAEkAWQAANzUXJzcXNxcHFwcnByc3FTM3FwcVFhUHMxUjMQYPARcHJwcOASImLwEHJzcnJicrATUzNTQ3NSc3FzM1ND4BMh4BBxUzNTQmIgYXNSMHBhUUHgIyPgI1NCtbJg0oJw0mJg0oJw10ECQNIgwBLC4GDwErDSkBDiQmJA4BKQwqAQ8FAS4sCyMNJBIQHSIdEWtZGiUaepsBCQ4ZHyIfGQ+LAQkmDCgoDSYmDSkoDZAMJA0iAR4fDhIfGQErDCkCDxISEAIoDCoBGR4SDiAcASMNJAwRHRERHREMDBMaGjIBARocGS0hEREhLRkdAAIAAAAAARoBBwAUAB4AADc1MjY3NjUjJzU3MxcVJzUjFTMHFzM3Jwc1IxUnBxdLERECAlUJCfQJEuFrCS4oLw0fEx4OLxMTBQUDBQq7CgqtE5GpCS8vDR95eR8NLwAAAAMAAAAAARoA4QANABEAFQAAJQc1JyMHFRczNzUXNzUHIzUzFyc1NwELPQmpCQmpCT0OXZaWSzk50yMoCQmECQkmIwlrbXBdHwoiAAAFAAAAAAEaAQcADQAXACAAKQAyAAA3MxcVByMnNTczPwEzFwczNSMvASMPASMXIgYUFj4BNCYXMhYUBi4BNDY3IgYUFjI2NCbJRwkJ9AkJRxAHOAeT4UIHEDAQB0EcBAYGCAUFUBAWFiAVFRAXISEuISH0CqgKCqgKEAMDuZYDEBADEwUIBgEFCAUSFiAWARUgFhIhLiEhLiEAAAADAAAAAAD0ARoABwALAA8AABMzFxUHIyc1FzM1IxczFSNUlgoKlgkTg4MvJSUBGQn0CQn06uG8EwAAAAADAAAAAAEHARoABwALABcAABMzFxUHIyc1FzM1IxcjFSMVMxUzNTM1IxzhCgrhCRPOznATODgTODgBGQnhCQnh2M8mOBM4OBMAAAAAAwAAAAABGgEaAAcACwARAAATMxcVByMnNRczNSMXMxUHIzUc9AkJ9AkT4eGWJXAmARkJ9AkJ9OrhJiVxJgAAAAMAAAAAARoBGgAHAAsAFAAAEzMXFQcjJzUXFTM1BzI2NCYiBhQWHPQJCfQJE+FxFyEhLiEhARkJ9AkJ9Anh4akhLiEhLiEAAAMAAAAAAQcBGgADAAsADwAANxUjNSczFxUHIyc1FzM1I7xeQuEKCuEJE87OqRMTcAnhCQnh2M8AAwAAAAABGgEaAAcACwASAAATMxcVByMnNRczNSMXMxU3JxUjHPQJCfQJE+HhJTheXjgBGQn0CQn06uGEOEtLOAAAAAAGAAAAAAEaAPQABwALAA8AFwAbAB8AAD8BMxcVByMnNzM1IzUzNSM3MxcVByMnNRczNSM1MzUjJgleCQleCRJLS0tLel4JCV4JE0tLS0vqCgqoCgoJcRITEwqoCgqonyYlSwAAAQAAAAAA9wEKABkAABMVFzM1Izc+AR4CBg8BFzc+AS4CBg8BNUIJQjASDSIjGQoKDWENYhAMDCEsLBAOAQdCCRISDQkJGSMjDGINYREsLCELCxENJwAAAAMAAAAAARoBGgAJAAwAEAAAEyMPAhc/AjUHNxc3JzcX+BubAywaTQWa7B0bECGWIQEZmgVNGiwDmxvLOBsKIZYhAAAAAwAAAAABGgEaAA0AEQAYAAAlJyM1JyMHFRczFRczNyc1MxUXIzUzNzUzARkJjQleCQkvCbwJ80uWqRwJhLIKVAkJlwhVCQlncXFdSwgdAAADAAAAAAEHAKkACAARABoAADcUBiImNDYyFhcUBiImNDYyFhcUBiImNDYyFksLEAoKEAteCxALCxALXgsQCwsQC5YICwsQCwsICAsLEAsLCAgLCxALCwAAAgAAAAABGgEaAAsAHAAANzMVIxUjNSM1MzUzBzUzFTM1IzUzNSM1MxcVByNLODgTODgTOBPhcXFxegkJ9OETODgTOP1nXYMTJRMKzgkAAAADAAAAAADiAOEACwAYACEAADcnByc3JzcXNxcHFzcUDgEiLgE0PgEyHgEHNCYiBhQWMjasFhYRFhYRFhYRFhYkFCMoIxQUIygjFBMhLiEhLiFvFhYRFhYRFhYRFhYWFCMUFCMoIxQUIxQXISEuISEAAwAAAAABFgEbABUAKAA0AAATHgEXFhUUBw4BBwYnLgM3Njc+ARc2NzYnNCYnJicmBgcOARYXHgEnNxcHFwcnByc3JzehFikQJh4PJhYwJxQeEAMHDyYSKyEmGRkCEQ8dJhMmDyAXISIQJgQtDS0tDS0tDS0tDQEZARQQKTcrJxIXBAkWCyIqLhUuGQwM9AkfIiUXKhAdAwEJCxhOSBMKBnwvDS8vDS8vDS8vDQAAAAAEAAAAAAEdARoALwBDAFAAVAAAEyMHJwcXBxUXBxc3FzMmJyMvAQcnNy8BNT8BJzcXPwEzHwE3FwcfARUWFzUnNycPATIWFwYHLgEOAhYXBgcuAT4BHwE+AR4CDgIuAjYXFTM1sDQKJiYaLS0aJiYKJwoIBgkOJg8ZBiwsBhkPJg4JFgkOJg8ZBiwLCC0aJiYkDBMECQgBCw4KAQgHBgMNDQQVDhgOIyEXBQ0cIiAWBgwIXgEZLRomJgo0CiYmGi0ICywGGQ8mDgkWCQ4mDxkGLCwGGQ8mDgkGCAonCiYmGjAOCwMGBwgBCg4LAQgJBRcbEgE0DAYMHCMhFgUMGyIhHhMTAAUAAAAAAQcBBwADAAcAFQAcACAAADcjFTMHNSMVJzczFxUHIxUHIyc1NzsCFxUzNSMXIxUzqV5eJhITE4MTEyYShBISJhNLEiaDS4SEgxImXl6pExODEyYSEoQSEkuDOIQAAAACAAAAAAEaAOMACAAMAAA3JzcXByc3IzUnMxUj9SwNQ0MNLL0lExOpLQ1EQw0tEziDAAAABgAAAAABLAEsAAcACwAXABsAHwAjAAATNzMXFQcjJzcVMzUFNTczFxUzFxUHIyc3NSMVFyMVOwI1I6kTXRMTXRMTXf7nE14SXhMTzhNxXl5eXhJeXgEZExNdExNdXV2ocBMTXhJeExNwXl4SXl4AAAQAAAAAARQBFAAgACYANwA7AAATBhQfAQ4BBwYeATY3PgE3FwYUFjI3FxYyNjQvATEnJiIfAQYiJjQ3IgcXNjMyFhceAT4BJy4CBxcuARwDAjMSGgUBBAcHAQUXERYOHSkPSgMIBQKAaAMIYiwJGhIfExEPCwolOQkBBwcEAQcjMxowARsBEAIHAzMNJRYEBwIEBBQgCxcOKR4PSgMFBwOAaAN0LAkTGVEFEAMuIwQEAgcEGysYLC8TGwAAAwAAAAABEQDoAAgAEQAoAAA3MhYUBiImNDYXIgYUFjI2NCYnMh4BFxYOASYnLgEiBgcOAS4BNz4ClhUdHSodHRUNEhIaEhINHDMjBwEEBwcBCTlKOQkBBwcEAQcjM7sdKR4eKR0SExoSEhoTPhgrGwQHAgQEIy0tIwQEAgcEGysYAAAAAwAAAAABGgEaACoAPgBQAAA3HgEXFh0BIzU0LgIiDgIdASM1NDY3LgM1NDc2NzYyFxYXFgcOAicyNzY3NjU0Jy4BIgcGBwYUFhcWNxUjBzUjNTMVNzM1IxUHBgc1jgwWBxAQCxUbHhsUDBAgGQUKBgMECRYKGAoWCQcEAgcIJwgIDwcDDAYPEAgPBwMGBgy9ITEQIRoXpAgFBG8FEQsXHAgIDxsUDAsVGw8ICBwuCgQKDQ0HDAsVCQUFCRUSEwYMCwIDBw8ICBEMBgYDBw8HEQ8GDKSDMTEQGhpjHgEBATEAAAAACAAAAAABBwEaAAkADgAYAB0AJwAxADsAQAAAEx8BFQcjJzU3MwcVMzUnBxQzMjY1NCMiBhc0MhQiFzM1IzUHFTcVIwcjNTM1BzU3FTM3FDMyNjU0IyIGFzQyFCLGPgMKzgkJkYi8OGgZDQ4ZDQ4QFBQ8LQ8fEA8aLQ8QIA4UGg0NGQ0OEBQUARc+B7YJCfQJEuGoOUwlFBIlFBIaMgsMPQYNAy1qDC0DDQY9GCQTEyUUExoyAAAAAAUAAAAAAQcBGgAJAAwAEwAaACEAABMfARUHIyc1NzMHMycjFTM1Iyc1BzcnBxUXPwIXFQcnN8Y+AwrOCQmRBDg4hLxCCUoiDSkpDSQNKSkNIgEXPge2CQn0CUs54ZYJQo4jDSkNKQ1EDikNKQ0iAAAHAAAAAAEaARoAEQAUABwAJQApAC0ANgAAEzMVFzMVMzUvAiMHFRczNSM3FyMXIwcVFzM3NQcVJyMHJyMHNRc3FysBNTcXNzI2NCYiBhQWJnAJQhMDPgaRCQlCOIM4OGeWCQmWCRIfDRYoDQ1PDx0eXRMvJQQGBggFBQEHQgkTKQc+Agn0CRPhOTgJcQkJcQpLHhYoDCdQDxwbEy5BBgcGBgcGAAkAAAAAAQcBGgAOABEAGQAeACgALgA3AD8ASQAAJS8BIwcVMzUzFRczFTM1BzUXDwEVFzM3NScHFSM1MwcjFSM1MzIVFAYnIxUzMjQXNic0ByMVMzInNTM2FhQGJzcjFSM1MxUjFTMBBD4GkQkScQlCE0s4xQkJzgoKCby8lgYNFBUNCgUFCkIJAR4UFA0UBgcLCghNEg0hFBLZPgIJZ15CCRMpBDk5OAlxCQlxCV4SXTgTORMICxsRESYJDBwBOAsjAQsPCwELFjkLDgAAAAAEAAAAAAEaAQcAAwAhACsAMgAANzM1Izc1NzMfATMXFQcjJzUjJzU3Mx8BMxcVIzUjLwEjFRcnIxUzPwEzNSMHIxUzNSMHJhISEgpTCAhrCQnOChwJCVMICGsKE2cICERxCEQ7CAhxaBNBvGsIXksTCQkEDgqWCQkvCakKBQ4KLiUFDjgPDzkOBRM4S10OAAAEAAAAAAEaAQcACgASABwALAAANzMXFQcjJzU3Mx8BNTcjDwEjFTczNyMvASMVMzcXJzcXFQcnNyMOARcjNDY3kX8JCfQJCV4HhQF3EAZUZnoBegcQUFAQMRkOKSsNGxoPFQETHhf0CrsJCc4KA8wdZxADcZYTAxA5EEkaDSoNKg4ZARUOFiABAAAAAAUAAAAAAQcBGgARABQAHAAgACoAABMfARUHIzUzNSMnNSMVIzU3MwczJwcjBxUXMzc1ByM1MwcVIzUHJzcjNTPGPgMKQThCCXESCZEEODgdgwkJgwoTcHATEjINMSE4ARc+B7YJE5YJQktUCUs5XgqDCQmDeXAcOCExDTISAAAACwAAAAABBwEaAAoADgAjACcAKwAvADMANwA7AD8ASQAAEzMXFQ8BFQcjJzUXIxUzFTM1LwE1IxUHIxUjNSMnNSMVMzUzNRUzNScVIzU3MxUjNRUjNTczFSM1FSM1OwE1Ixc3NSMVHwEVMzUvzgoDEAq7CUsTE0sQAyYJCRMKCRMmExISExMSEhMTEhITExIScxA4DwMTARkJXgYRfwkJ9Akmu3YQB1QvChISCi/hEhMTExMTExMTJRISExMmExMTFhBRUQ8HenkAAAAAAwAAAAABBwEaAAkADwASAAAlLwEjBxUXMzc1ByM1MxUzJzUXAQE4DXETE6kTE6leSzg43DgFEuETE6io4UsSOTkAAAAEAAAAAAETASwADQAQABcAHQAAEyMHFSMHFRczNzUzNzUnFyMHIzUzFRczNyM1MxUz23ESORISlxI7EDgeHiaWORJLS5ZeOAEsEzgTvBISORKXHh7hu3ESE7s4AAEAAAAAARoBBwAHAAABFQcVIzUnNQEZXUteAQcgWWhoWSAAAAIAAAAAARoBBwAHAA8AAAEVBxUjNSc1FxUzNTc1IxUBGV1LXnAmXuEBByBZaGhZIHFeXlkFBQAAAgAAAAAA+wEaAC0AUwAANyc2JicmJwYHBhcWFwcuAjc1Njc2NzY/ATY3Njc2JzceAQc2PwEVFhcWBw4BJxcGFhceAQc+ATc2JicOAS8BNiYnBgcGDwEGBwYVMQYWFyY3NjerCgkDCxIEDgIDBgMKCxQfEQEBAwQJChAICQcKAwQGDR8bCQYEEQoGCwsJJTsQAQkJDQoEDBIFBQQIBhMKBgwJFAIRCQ8CFwkEARAPCgUGHBMOCxwJDxYTEQ4NCA4OBBglFAcJCQ0NDw4ICgsPDBEMDBZHJQcIAgEQEyUbFBp/Bw0ZCQkcDwQRCxEjEAkJAg0bOxYWGg0PAhQXDAoSHwoXFRwfAAAAAgAAAAABCwEaAAYADQAAAScHJwcXMzcnBycHFzMBCg1wcQ13DXcNcHENdw0BDA1wcA13Bg5xcQ53AAAAAgAAAAABDgEaAAYADQAANxc3FzcnIwcXNxc3JyMTDXBxDXYNeA1wcQ12DaENcXENeOgNcHANeAACAAAAAADuAQAABgANAAA3BycHFzM3BzcXNycjB+BKSwxRC1GjTUwMUwtS/0pKC1FRzkxMC1JSAAQAAP//AS4BBwAUAB4AKwAyAAA3MxcVJic1Iw8BIxUzFhcjJzU3Mx8BMzcjLwEjFTM3Fz4BHgIOAi4CNhc3JwcnBxeRfwkIC3YQBlVgAgRvCQleBwt6AXoHEFBQEDERKCQXAhIhKCQWAxI4LQ8nGAwg9ApUBwQbEANxCQkJzgoDNhMDEDkQQgwCESIoJBcCEiEoJFI7DDQTDhoAAAUAAAAAARoBBwASABwAIAAkACgAADczFxUjNSMPASMVMxUjJzU3Mx8BMzcjLwEjFTM3FzMVIzczFSM/ARcHkX8JEncQB1ReZwkJXgcLegF6BxBQUBAQExMmEhIlEiYR9ApBExADcRIJzgoDNhMDEDkQNXBwcGkHagYAAAADAAAAAAElAQcADQAZACAAADczPwEnIzUnIy8BIwcVNzMfATMVIw8BIw8BFyM3Mz8BMxzOCTIJFQpsEQZeCRNQEAdnVQYQRwkTvbofRQYQbSYGhAwuChADCs7FEAMlAxAHOTFeAxAAAAMAAAAAARoBBwAKABIAHAAAJSMvASMHFRczNzUHFSM1Mz8BMycjDwEjNTMfATMBEH8QB14JCfQJE+FVBhB3AXoGEFBQEAd69BADCs4JCbuVHXEDEBIDEDkQAwAABAAAAAABGgEaAB8ANwBAAEkAADcnIw8BJwcXDwEVHwEHFzcfATM/ARc3Jz8BNS8BNycHJxc3FwcXFQcXBycHIycHJzcnNTcnNxc3FxQGIiY0NjIWBzI2NCYiBhQWqwoWCg0lERgDLS0FGA8lDwgWCg8lDxgFLC0GGA8lCAonJhstLRsmJwo0CiclGi0tGSYnCEAXHhYWHhcmCAsLEAsL2i0tBhgPJQ0KFgoPJQ8YBSstBRgPJQ8IFgoPJQ8YQy0ZJicINAonJRotLRkmJwg0CicmGy2DDxYWHhcXIgsQCwsQCwAABQAAAAABBwEaACIAJgA5AEwAUAAANyM2NSYnJi8BJiIGBwYHJicmIyIHBgcGDwEUFyMHFRczNzUHIzUzNSM1JjU3Njc2NzYyFxYXFhcWFTM0NzY3Njc2MhYXFh8BFAcVByMXIzUz/R4CBAMGCAUICQgDEQ0NEQwFCQgHBgMEAQIeCQnhCoRdXTgCAQIDAgcCDwQJBgQBAhMCAgQFCgMPCAUBAQICAjZeXl7hCA8LBQkDAgMBAgUUFAUDBQMJAwsDDggJqQkJqaCWEwQFCgMFAQQEAgIECAUDBQUFBQMFCAQCBAYBAwUKBQICqZYAAAAABQAAAAABGgEaABMAFgAmADAANAAANzMVFyMnNTczHwIVJic1Iyc1IxcnFRcVMxcVByMnNTczNTQ2MhYHBh0BMzU0LgEGBxUzNThLAlYJCZEGPgMIC0IJcbw4QRMJCXEJCRMWHxYzBSUGCgwlXiYSAQn0CQI+BzALBwgJQjk5OUsSCksJCUsKEhAWFgIGCBISBgkFAjc4OAACAAAAAADhASwADwAYAAATMxUeARQGBxUjNS4BNDY3FzI2NCYiBhQWjRIcJiYcEhwmJhwJFB0dKB0dASxMAyo6KgNMTAMqOioDex0oHR0oHQAAAAAEAAD//gEcARoAHwAqAEkAVQAANyc3FxUHJzcjBiY9AS4CPgEzMhcWFxYVFAYHFRQWMycWPgIuAQ4CFhcWFx4BBw4BLgI2NzY3NTQmKwEXByc1NxcHMzIWDwE+Ai4CDgIeAYsYDCgoDRgjExwOFAULFw8JCRIIAxUQEAw1CBQOAgoQEA0DB8gOCgwDCQgaHBQGCwwICRELIxgOKCgOGCMTHAEGBwwHAQkQEQwDBxA4GA0oDSgOGAEcE2gDFBwaEAMIEgkJERoDZwwRmwUCDhQPBwMNEBB7AwoMIQ4MCwYUHBoIBQJoDBAYDSgNKA0YGxSyAQgODg4GAwwREAoAAAAABAAAAAABCAEtADQAPwBKAFcAADcuAQcGBwYHLgEnMjc+ATU0JyYnJiMiDgEeARcVBgcOAR4CPgE1Ni4BJzUWFxYXHgE+ATQHHgEOAi4BPgInIi4BPgIeAQ4BFw4BLgI+Ah4CBvkMIQ4MBgEBHioDBAQNEAQHEgkKDhcLBRQOCQgLCwUUHBsPAQkSCw8WExQEHSQYqAgKAg4UDwcDDRADCA4HAw0QEQoED40FDg4LBgQMEQ4JAwSbDAMJCA0EBAMqHgIGFw4KCRIHBBAaHBQDXwIFCBsbFAYLFw8JFA8CLRULCgESFQMbJTIEDxQOAgoQEA0DggoPEQwDBxEUDXsFBAMJDhEMAwYLDQ4AAAYAAP/+ARoBGgAhAC0AOQBKAFUAYQAANwYPARUWFx4BFRQOAiMiLgE+ATc1LgI+ATMyHgIVFAcuASIOAR4CPgInFjI+AS4CDgIWFxYXFhUUDgEuAjY3Njc1Mxc+AS4BDgIeATYnBxc3FzcnNycHJwdpCA0IBAQNEAcNEgkPFwsFFA4OFAULFw8JEg0HFgQNEA4HAw0QEAkBLAcQDQgBCRARDAMHyA4KDhAaHBQGCwwHChILBwIKEBEMAwYQFB0fDR8gDR8fDSAfDdAMBgJeAQIFGA4KEQ4HEBocFANfAxQcGhAHDRIJD58HCAoPEQwDBg4PngUIDhANBwQMEBB7AwoOEw4YCwYUHBoIBQJDhQcUEAYDDBEPCwLYHw4gIA4fIA0fHw0AAAAABQAAAAABLAEaAB0AKgA2AEoAVgAANwYPARUWFxYVFAcOASIuAT4BNzUuAj4BMzYWBxQHLgEjIgYXHgI+AicWMj4BLgIOAhYXIzU0JisBFwcnNTcXBzMyFhcWBxUjNSM1MzUzFTMVI2kIDQgTCggDBhgdFwsFFA4OFAULFw8THQEWBA0IDREDAQ0QEAkBLAcQDQgBCRARDAMHyBIRCyMYDigoDhgjDhgFBAETODgTODjQDAYCXgQQDA4KCQ0QEBocFANfAxQcGhABHBQPnwcIFQ0IDAMGDg+eBQgOEA0HBAwQEC8cDBAYDSgNKA0YEA0JCcU4Ezg4EwAHAAAAAAEbARoAIAAsADgAQQBKAFMAXAAANz4BNTQuAiMiDgEeARcVDgIeATMyPgI1NCYnJic1Fx4BDgIuAj4BMiciLgE+Ah4CDgEXFAYiJjQ2MhYHMjY0JiIGFBYnFBYyNjQmIgY1FBYyNjQmIgZUDRAHDRIJDxcLBRQODhQFCxcPCRINBxANBAQFBggBCRAQDQMHDhAICA4HAwwREAkBCA3QGycbGycbLwwRERcREQcLDwsLDwsLDwsLDwu+BhcPCRINBxAaHBQDXwMUHBoQBw4RCg4YBQIBXnUEDg8OBgMMEQ8KgwoQEAwEBw0QDgifFBsbJxwcLxAYEBAYEIgICwsPCwtIBwsLDwsLAAAAAAT//wAAAQcBGgAPABsAHwA1AAA3FRczNzUvAiMVMxcVIzU3IzUjFSMVMxUzNTMHMxUjNwcnNyMiBhQWOwEVIyImNDY7ASc3FzgTqRIFOA4lJTmpgyUTJSUTJV1dXRMoDRg4DBAQDAkJFBsbFDgYDShxSxMTqA44BRI5qEtLJSUTJiZLE5koDRgQGBATGyccGA0oAAAEAAAAAAEaARoAEQAWACIALgAAJS8BIwcVFzMmJyM1MxcVFhc1ByMVMzQnMzUzFTMVIxUjNSMXIg4BHgI+ATU0JgEBOA5wExNkCQZVcDkKCG4nJSUlEyUlEyVwERwNBhgiHxMh3DgFEuETCAriOToDBUJwEwpnJSUTJiYmEx8iGAYNHBEXIQAABQAA//4BGgEaAB0AKgA2AFcAYwAANwYPARUWFxYVFAcOASIuAT4BNzUuAj4BMzYWBxQHLgEjIgYXHgI+AicWMj4BLgIOAhYXFhcWFRQOAS4CNjc2NzU0JisBFwcnNTcXBzMyFhcWBxc+AS4BDgIeAjZpCA0IEwoIAwYYHRcLBRQODhQFCxcPEx0BFgQNCA0RAwENEBAJASwHEA0IAQkQEQwDB8gOCg4QGhwUBgsMCAkRCyMYDigoDhgjDhgFBAELBwIKEBEMAwYLDQ7QDAYCXgQQDA4KCQ0QEBocFANfAxQcGhABHBQPnwcIFQ0IDAMGDg+eBQgOEA0HBAwQEHsDCg4TDhgLBhQcGggFAmgMEBgNKA0oDRgQDQkJqgcUEAYDDBEOCQMEAAAFAAAAAAEaARoADAAYAB8AIwAnAAA3MxcjJzU3MxcVJzUjFwczNycjNycjDwEXNzMHMwc3IycjNTMHIzUzOTANRgoK4QkTzmgbKmkNHw8PNhErESs2I0JsHzMKNj8aJS5xEwmpCQlaITCpQWwgGx0LXhpwOG1IOBM5EwAAAQAAAAABGAEhAGwAACUWFRQHBgcWHQEUBiImPQE2Jic3Njc2NzY1NC8BNicGDwEmBycmIwYXBw4BFRQXFhcWHwEGFxUWBiImPQEGJyYnJi8BLgEnLgE+ARcWFxYfARYXFjc1JjcmJyY1NDcmPwE2FxYXNhc2NzYfARYBBxEXEiAGBQcFAQUFBRYNEQkLEAIHBhETBykpBxoLBgcDCAkLCBINFgULAQEGBwYRDQsJBQgBBQcDAgMCBgMHBwMHAQoIDRUCByARGREFCQYEChAVKSoUEAsEBgnqFBstGBEFChEuBAUFBC4IDQYOAwYHDxIdFhEKEBIEDQILCwIQExAJCBUKHREPCAYDDwoPLwQGBgQaBAQDCAQLAQYGAQEGBgQCAQUDCAINBAcFBA4NBhEYKxwUGhUEAgEDDQoKDQQCAgUZAAAAAf//AAABLQEsAFQAABMiDgEVFB4BFzI2PQEGJyYnJi8BLgEvASY3NjMxHgEfARYXFjc2NyYnJjU0NzEmNzMyFxYXNjMyFzY3NhcxFg8BFhUUBwYHHgEdARQWMz4CNTQuAZYpRSgaLh4FBQ4LCQcEAwMCCAMDCQQCBAYLAwMJDgoKAQgeEBYQBwkEBggKDQ8XERQSDQcDCAUBEBYPHwQGBQUeLxkpRQEsKEUpIDoqCgQEGQMDAgUEBQQICgMBBgMBAQcEBA8BAQQMCAQNEycXERMUAwQJBQUMAwIBExQBERcnEg0EAw4KKQQECis6HylFKAAAAAIAAAAAAS0BLAAMAGoAABMiDgEUHgEyPgE0LgEDIyImPQE0Jic+Ajc2NTQmJz4BNCYnIyIGDwImBy8BLgErAQ4BFBYXDgEVFBceAhcOAQcOASYvAi4BIwcGFB8BFh8BHgE3MzcVFAYrAS4CPgIyHgIOAQeWKUUoKEVSRSgoRQECAgQEBQ0XEAMEBwYBAQICAgUIBAkHICAHCQQJBAMBAgEBBgcEAxAWDQMEAQcPCwQEBAMGAwUBAggCAgYDEQoGBwQDAR0sEwokNz43JAoTLB0BLChFUkUoKEVSRSj+8AMDIwcNBAEJEAsNDgkSBwQHCQkFAgIFBAkJBAUCAgUJCQcEBxIJDg0LEAkBAwkFAwEIBwQFAQMBAQICBgICCwkKAQEWAwMJLDo+MhwcMj46LAkAAAAACgAAAAABGgEaAAwAEgAeACoAMQA3AEEASABNAFMAABMyHgEUDgEiLgE0PgEXLgEnFh8BNjUmJyMWFRQHMzYnNTY0JyMGFRQXMzYnJicrAQYHIzY3DgEPAQYUFzMmNTQ3IxcjHgEXJicXNjcjFjcGBz4BN58hOCEhOEI4ISE4fQkeEgwGMgEBAywBBC8CQQECSAEEQwIDBxAKCREGFAUNEx0JCAQELwQBLDQsCiYXEgkvEgo3CUIJEhclCwEZIThCOCAgOEI4IUsSGgYXGzgFBA8NCggTEwkKAQkSCQkJExMKQR4aGh4bGAcaEhIOHQ4TEwgKShYcBRkdMRYbGxweGQUcFgADAAAAAAEsARoAFgAnACoAAD8BNScHFyMiBhQWOwE1IyIuATY7AQcXNyMnMx8CFQcjJzUXFTM1IzcVM3EmKA0YOBQbGxQJCQwQAREMOBgNXzITWA05BROoExOoSxM4vScNKA0YHCcbExAYEBgNSxIFOA6oExOMEHyWSzkAAgAAAAABGgC8AAMABwAAJSEVIRUhFSEBGf76AQb++gEGvBMmEgAAAAcAAAAAARoBDwAJABEAFQAdACEAKQAtAAA3FwcnNTcXBzMVBzU3MxcVByM3NSMVNzU3MxcVByM3NSMVNxUXMzc1JyMXFSM1KBALICALD/DOCSYJCSYdEzgJJgkJJh0TOAkmCQkmHRPhEQsfDB8MDxPGqwgIqwgRmZkdhQgIhQkRdXV9YAgIYAgQUFAAAgAAAAABIAEsAAYAEwAAJRUjJzUzFTcHIycHJzczFzczFwcBGf0JE85hDR9EDksOH2ANJg04Egn99LhhH0QNSx9hJg0AAAAABgAAAAABGgEsAAYACgAOABIAFgAaAAAlFSMnNTMVNzMVIzczFSMHMxUjBzMVIzczFSMBGf0JEzglJYMmJksmJjglJYMmJjgSCf30zyY4JSYlJiU4JQAAAAcAAAAAARoBLAAGAA4AEgAaAB4AJgAqAAA3MzUjNSMVNzU3MxcVByM3NSMVNxUXMzc1JyMXFSM1BzU3MxcVByM3NSMVHP3zEyUKJQoKJRwTgwolCgolHBNeCiUKCiUcEyYS9P0llgoKlgkTg4OyvAkJvAkSqamzcQkJcQkTXl4ABgAAAAAAzwD0AAMABwALAA8AEwAXAAA3MxUjFTMVIxUzFSM3MxUjFTMVIxUzFSNeJSUlJSUlSyUlJSUlJfQmJSYlJrwmJSYlJgAAAAsAAAAAAQcBGgAJABEAFQAdACEAKQAtADUAOQA9AEEAABMzFSMVMxUjJzUXIyc1NzMXFSczNSMXIyc1NzMXFSczNSMHIyc1NzMXFSczNSMXIyc1NzMXFSczNSsCFTM1IxUzHCYcHCYJeiYJCSYJJRISjDgJCTgKOSYmQSYJCSYJJRISjDgJCTgKOSYmEiYmJiYBGRLhEwn0ZwkmCQkmChIlCTgKCjgKJZYJJgkJJgoTOQo4CQk4CSYTcBIAAQAAAAABGgEHABwAACUuAScuASIGDwEnLgEiBgcOAhQeAR8BNz4CNAEXAgkHChobGQoNDQoZGxoKBwkEBAkHb28HCQTSCREGCgoKCQ0NCQoKCgcQEhISEAdubgcQEhIAAgAAAAABGgEHAB0APQAAJS4BJy4BIgYPAScuASIGBwYHBhQeAR8BNzY3NjU0BwYPAScuAjQ+ATc2NzYXFh8BNzY3NhcWFxYXFhUUBwEXAgkHChobGQoNDQoZGxoKDQUCBAkHb28HBAkVAwphYgUHAwMHBQcKExQJBxoZBwoTFAkHBQMHAdIJEQYKCwsJDQ0JCwsKDRMJEhIQBm9vBggQEwkVDQphYQUMDA4NCwUHBAgIAwgZGQcECAgEBwUGCw4HBgAAAAIAAAAAAR0BGwAeACUAADc+ASYnLgEOAQc1IxUXMzUjPgEeAQ4CJicHHgI2JzcnNSMVF/0SDQwSEzxBOBATCUIpE0hKLgIxS0YSEA84Qj4rDjYTA0UXOTkXGhwEIRwtQgkSIh0VPk08EiEiCR0mBhssDTZHSwcAAAIAAAAAARQBEwARABwAABMXBycVByMnNSMVByMnNQcnNwcVMzU3MxcVMzUnnXcNEwo4CSYJOAoSDndEJgk4CiVLARJsDhF6CQlCQgkJehEObFiCQgkJQoJEAAAABAAAAAAA9ADiAAsAIAAsADAAADczNSMVIzUjFTM1MxczJzY3Njc2NC4BJyYnJisBFTM1MzcGKwE1MzIWFRQHBhcjFTN5Dw8xEBAxahEYAwQIAwIDBQQGBwQDLg8cCQMCICAGCgEDF7y8cXAxMXAwMDEBAwYJBQsKBwMFAgFwLhABJAoIBQMHZhMAAAAFAAAAAAEHARoAJAAuADsAPwBDAAA3MxcVMxcVByMVByMHJzUjJzUjJzU3MzU3MzUuATU0NjIWFQYHFzUjFRczFT8BMycGBzEGJicHHgEyNjcnIxUzNzMVI59LCQoKCgoJOi8QLwoJCQkJCksEBgsQCwEJQpYvCSIHNSgLDg0YCQ0KGRwZCUwTEzgTE+EJJgoSCTkJNActDDYJEgooBxUDCAYHCwsHCwVhOG4CKSYDLgoDAwgJDgkLCwkzExMTAAADAAAAAAEaARoACQATAB0AADczNzUvASMPARU3IzUzHwEzPwEzJyMPASMvASM3Mxz0CTQIjQk09OEvDghWCA0xATUJDEsOCDUxfyYJVJAGBotZCTgXBQUXEwUXFwWEAAABAAAAAAD0AM8AEQAANxUUFjsBJzcXFQcnNyMiJj0BSwUEgR4NMDANHoELEc4lBAUeDjALLw0eEAwlAAAEAAAAAAEZARsAEwAnACsALwAAEx4BFx4BBgcOASYnLgM+Axc+ATc+ASYnLgEGBw4BHgEXHgE3JzM1IxcVIzWhFikPGBIMFRM3PBsUHhECDRomKyASIQwSCxAUEjEzFRkaAx8aESYSHxgYGBgBGQMTEBg+QBoYGQIOCyIqLSwkGgvzBBQPFjc1FRIRBw4RNTsyDgkGBJQSJUtLAAADAAAAAAEnAQcADAAQABQAAD8BMxcVIzUjFTMVIycFJxU3BzUXIxMT4RIS4V1dEwEUfjMgPSX0ExNxcZYTEyB+sTMGVj4AAAAJAAAAAAEHARoABwANABUAGwAkACoAMgA4AEEAADcXNjQnBxYUJzcmJwcWJzcmIgcXNjIHJwYHFzYHNDcXBhYXByYXBxYXNyYXBx4BNycGIjcXNjcnBicyNjQmIgYUFu8SBgYSBQsQEiMJHiwFEicSBg8hPwkjEhEPLQYSBgEFEgYeERIjCR4tBhInEgUQIT8JIxIQEEwHCwsPCwt/BRInEgYPIT8JIxIRDxUSBgYSBgwREiMJHk0UEgYPIRAFEhsJIxIQEBYSBQEGEgULEBIjCR46Cw8LCw8LAAAAAwAAAAABIwEbABUAMAA5AAA3By8BNxc+Ax4DFyMuAgYHNx8BBycOAy4DJzM1FB4DPgI3Byc3JxQWMjY0JiIGYz0NGREPCBskKCklHBABEgQySD4MLK0ZEQ8IGyQpKSQcEAITDBgfJCMgFwcrBz1/CxALCxALwhkFPAckEx8UCAYUHiYUJDQJJyISQz0IJRMfFAgHFB4mFQkSIhwSBgYSHBESEhkKCAsLDwsLAAMAAAAAAQcBGgANABsAJAAAEyIOAR4CPgEnNi4CByIuAT4CHgEVFA4CJxQWMjY0JiIGjSU+HA41SEQqAQETIi0YIDQYDSw9OiMQHSYnCw8LCw8LARkpREk0Dhw9JRksIxLhIzo9LA0YNCAUJh0QZwcLCw8LCwAAAAEAAAAAAOABBwAcAAA3ByM3Mjc2NzY/ATY1NC4BIzczByYOAQ8BBhQeAakCXAIOBQcDBgYmBQQJDAJWAgoNCAYmBgQJLQYGAgMFCBSHEAkEBwIHBwEGDBWHEwkGAwAAAAIAAAAAARoBBwAbADEAADcjJzUjLwE/ARceARcWFxY3Nj8DHwEPASMVJzM1NzM3JwcGBw4BIiYnJi8BBxczF9+TCRsJDAZQDAEFAgUGDg0GBQUEDFAGDAkbk4AJHQg/AwMDCBQVEwcEAwNACRwKIQp9BzILGwYFBwIFAwUGAgUFCQYbCzIHfQl9CSMVBAUDCAgICAMFBBUjCQAAAAIAAAAAAQcBBwBGAI0AADc1IyIOAQcxBgcxBhcVFAcxBgcGKwEVMzIXFRYXFRYXMRYdAQYXFRYXMR4CFzM1IyIuAj0BNCYnJic2Nz4BPQE0Njc2MxcVMzI+ATcxNjcxNic1NDcxNjc2OwE1IyInNSYnNSYnMSY9ATYnNSYnMS4CByMVMzIeAh0BFBYXFhcGBw4BHQEUBgcGI3ECCREMAwMBAQECBAoFBgEBBgUFAwQCAgEBAQMDDRAJAgIGCgcEAgIFCQkFAgIJBwUGTQEJEA0DAwEBAQIECgUGAgIGBQUDBAICAQEBAwMNEAkBAQYKBwQCAgUJCQUCAgkHBQb0EwcNCAgICAgQBgUKBQISAgECAwEDBQUGEAgIAQcICA0GARMECAoGGQYMBQsHBwsFDAYZCQ0EArwSBg0IBwkICBAGBQoFAhICAQIDAQMFBQYQCAgBBwgIDQcBEgQICgYZBgwFCwcHCwUMBhkJDQQCAAAAAwAAAAAAqgEHAAsAFAAdAAA3HgE+AiYnJg4BFjciJjQ2MhYUBiciJjQ2MhYUBowECgkFAQQFBg8IAhEICwsQCwsICAsLEAsLKQMBBQgKCQMEAw0PVgsQCwsQC14LEAsLEAsAAAMAAAAAARwBHAAcADkARQAAEx4CBw4BIyInDwEjFQcjFQcjJzU/ASY1ND4CFzY3MTYuAgcOARUGFw8BFTM1NzM1NzM/ARYzMjc+AS4CBgcGHgE21RcjDAQGLx4NCw8HEwkcCjgJAl4EER0lLBIFAwkYIBEWHgEFAl4lCR0JFxEKDAwXAwMBBQgLCQIEAw0OARgFICsWHSYEEgMcChwJCSsHXQ0OEiMXCYoOFxEgGAkDBSQXDQwKXx4dCRwJEwMEQgQKCQYBBQQHDwgDAAYAAAAAARoBGgAvADYAOQA9AEAARwAAJSczNSM1IxUjFTMHIxUzHgEyNjczNSMnMxUjDwEXMzcvASM1MwcjFTMeATI2NzM1BwYiJiczBicjNx8BIz8BFyMXBiImJzMGARIeE14TXhMeBwIFGB4ZBQIIHzolCCUHqQclCCU6HwgCBRgfGAUCtwYPDAQvBAEmE3YXgxd2EyYgBg8MBC8EqUsTEhITSxMOEhIOE0uWBC8PDy8ElksTDhISDhMdAwcGBhktixwcii0cBAgGBgAAAAAGAAD//QEtARgABwALABcAHwAsADMAABMjBxUXMzc1BzcXDwEnMxc3MwcjIgYPARcHJyMXMzcmNzYXMhYVFA4BLgI2FzcnBycHF5kKb28Kc9ZeYWEFbSFRVCIPBxknCBMQFVEhbQoUBCsPERchEx8iGAcNLiIPHBAMGAEYTBBKShAIQUE/Qko3NwodFg0ODjdKDQk9CgEgGBEcDQYZISA/LQslDg8TAAAFAAAAAAEsARgABwALABcAHwAoAAATIwcVFzM3NQc3Fw8BJzMXNzMHIyIGDwEXBycjFzM3JjcUFjI2NCYiBpkKb28Kc9ZeYWEFbSFRVCIPBxknCBMQFVEhbQoUBBMgLyEhLyABGEwQSkoQCEFBP0JKNzcKHRYNDg43Sg0JDhchIS8hIQAEAAAAAAEMARgABwALABIAGQAAEzMXFQcjJzU3Bxc3BxczNyMHJxcnMxc3MwePCnNzCm90Xl5h020KcSJUUUxtIVFUInEBGEwQSkoQOUE/PzdKSjc3eUo3N0oAAAIAAAAAARoBGgAHAAsAABMHFRczNzUnFSM1MyYTE+ESEry8ARkS4RMT4RLz4QAAAAIAAAAAARoBGgAHAAsAABMHFRczNzUnBzUzFSYTE+ESEuG7ARkS4RMT4RLz4eEAAAMAAAAAARoBGgAHAAsADwAAEwcVFzM3NScHNTMVMzUzFSYTE+ESEuFLS0sBGRLhExPhEvPh4eHhAAAAAAUAAAAAARoBGgADAAcACwATABcAADcjFTMHMxUjFyMVMycHFRczNzUnBzUzFXE5OTk5OTk5OUsTE+ESEuHh9BMTEhMTgxLhExPhEvPh4QAABAAAAAABGgEaAAcACwAPABMAABMHFRczNzUnBzUzFTc1MxU3MxUjJhMT4RIS4SUTcBMmJgEZEuETE+ES8+HhS5aWluEAAAAABAAAAAABGgEaAAcACwAPABMAABMHFRczNzUnBzUzFTM1MxUzNTMVJhMT4RIS4SUTcBMmARkS4RMT4RKolpaWlpaWAAADAAAAAAEaARoABwALAA8AABM3MxcVByMnNxUzNTMVMzUTE+ESEuETE5YSOQEHEhLhExPhlpbh4QAAAAADAAAAAAEaARoABwALAA8AABMHFRczNzUnBzUzFQczFSMmExPhEhLh4eHh4QEZE+ESEuETqZaWEjkAAAADAAAAAAEaARoABwALAA8AABM3MxcVByMnNxUzNTMVMzUTE+ESEuETEzgTlgEHEhLhExPh4eGWlgAAAAACAAAAAAEaARoABwALAAATBxUXMzc1Jwc1MxUmExPhEhLh4QEZEuETE+ESqJaWAAADAAAAAAEaARoABwALAA8AABMHFRczNzUnBzUzFTM1MxUmExPhEhLhSxKEARkT4RIS4RP04eHh4QAAAAACAAAAAAEaARoABwALAAATBxUXMzc1JxUjNTMmExPhEhKEhAEZEuETE+ES8+EAAAADAAAAAAEaARoABwALAA8AABMHFRczNzUnBzUzFTM1MxUmExPhEhLhgxNLARkT4RIS4RP04eHh4QAAAAACAAAAAAEaARoABwALAAATBxUXMzc1Jwc1MxUmExPhEhLhgwEZEuETE+ES8+HhAAACAAAAAAEaARoABwALAAATBxUXMzc1Jwc1MxUmExPhEhLh4QEZE+ESEuET4c7OAAAGAAAAAAEaAQcABwALABMAFwAfACMAABMHFRczNzUnBzUzFT8BMxcVByMnNxUzNQc3MxcVByMnNxUzNTgSEksTE0tLORI5EhI5EhI5SxI5EhI5EhI5AQcTvBISvBPPvLy8ExM4ExM4ODiDEhI5EhI5OTkAAAYAAAAAASgBBwAHAAsAEwAXAB8AIwAAPwEzFxUHIyc3FTM1Fz8BHwEPAS8BFzcvATczFxUHIyc3FTM1XgkmCQkmCRMSKQYjDEYFIwwyQBJBvwkmCQkmCRMS/QoKzgkJxby8BwwNBcIMDQXAsAawDAoKzgkJxby8AAMAAAAAARoBGgAIABIANwAANyIGFBYyNjQmFycHNyczNxczBycOAQcjFRQWOwEWFyMGJj0BNCYnLgE1NDc+AzMyHgEVFAcG4RchIS4hIQIZGAkWGwoKHBcfEh0HIwMDGgMFIgoPCgkMDgwFEBMVDBcnFwcEgyEuISEuIV0SEhwQHx8QUgMYEikCBAoIAQ8KHg0YCQsfERcTCg8LBhYnFxIOCQAAAgAAAAAA9QEaACEAKwAANw4BHQEUBgcGJyMGJj0BNCYnLgE1NDc+AzMyHgEVFAYHIxUUFjsBMjY12wkLCAcEBR4LDgoJDA4MBQ8TFgwXJxYNMykDAx4CA4oJGA0eBw0DAgEBDwoeDRgJCx8RFxMKDwsGFicXEh4uKQIEAwMAAAACAAAAAAEaARoADAAWAAATMxUjFTM1MxUHIyc1IRUjNQcnNyM1MxxVS+ESCfQJAQYSfw1+Y3oBGRLhS1UJCfR6Y34NfxIAAAACAAAAAAEaAPQAJABJAAA3MzIeAR0BFA4BKwE1MzI2PQE0JisBIgYdAR4BFxUuAT0BND4BFzUeAR0BFA4BKwEiLgE9ATQ+ATsBFSMiBh0BFBY7ATI2NzUuAVM5Eh0RER0SCQkTGhoTORMbARUQGCARHaAYIBEdEToSHRERHRIJCRMaGhM6EhoBARX0ER4RBBEdEhMbEgQTGhoTBBAZAxMDJBgEER4RTBMDJBgEER4RER4RBBEdERIbEgQTGhoTBBAZAAAAAwAAAAABBwD0AAMABwALAAA3NTMVJzMVIzcVIzVxS3GWlrzhSxMTXhNeExMAAAAABAAAAAABBwD0AAMABwALAA8AADc1MxUnMxUjNxUjNR0BMzUm4eHh4eHh4XESEksTSxMTqRMTAAAGAAAAAAEaAQcABgAKAA4AEgAzAGsAABM3MxUjNQc3MxUjFTMVIxcjFTMnPwE2NCcmJyYiBwYHBgcVMzU0PwEyMxcVFg8CFTM1IxcyFxYVFAcGBwYiLgEvASYnMTMVFxYzPwIvASsBNTczPwEnNCYPAQYdASM1NDc+AjIeAhQHKwcNDQczu7u7u7u7u9MBAQMBAgcFCAUGAgEBEAEBAQIBAQECEyURCwIBAwECBwUIBQQCAgEBEAECAQEBAQEBAQQEAQEBAQMBAQEPAwEEBgcGBgQDAQAHOSoGAhM4EzgTUgEBBQgEBwICAgIHAwMBAQECAQIBAwMDFQsNOgIEBgMDBwICAgMCBAMEAgIBAQICAwIMAQEDAgEBAQEBAgEBBgUCAwICAwcJBAAAAAADAAAAAAEaAPQAAwAHAAsAADc1MxUnIRUhNxUjNROpqQEG/vrOzksTE14TXhMTAAAFAAAAAAEHAPQAAwAHAAsADwATAAAlFSM1FxUjNRcVIzUXFSM9ATMVIwEH4c6Dg5aWlhMT9BMTOBMTORISOBMTlqkAAAgAAAAAARoA9AADAAcACwAPABMAFwAbAB8AADcjFTMVIxUzBzMVIxcjFTM3MxUjFyMVMwczFSMXIxUzJhMTExMTExMTExMlzs7Ozs7Ozs7Ozs70EyUTJhImE7wTJRMmEiYTAAAEAAAAAAEjASAAFgAnADMAPwAAEzcXFQcnNSMiBwYHBgcnJjc+AxczFxU3JxUjJgYHBgc2NzY3NjMHPgEeAgYHBi4BNhceAT4CJicmDgEWrBJkZBIIHw8WFBUXEwEEBBkoMBoNFkdGJBguERUJFBQSFg8cQgwdGhACDQwTKxkJHgcREAkCCAcMGg8GARcJUBFMCSMDBA0PHgYODhksIBEBQSM2OCEBEREWHRMKCAMCSgkCDRgdGwcMCSQsOwUCCA8REAQIBhYaAAEAAAAAARgBGgAPAAAlLgIiDgEHIz4CMh4BFwEFBR8wNjAfBRMFJThAOCUFqRorGBgrGiAzHR0zIAAAAAQAAAAAAOIBEAAQAB4AJwAzAAA3LgEjMSIOAh8BMzc2JzQmJzsBHgEXFA8BJyY1PgEXJg4BHgE+ASYnPgEeAgYHBi4BNssKHA8VIhQBDDsKOwwBC0EBAhYgAQkwMAkBICIGEAgDDQ8JAyYIFRILAQkJDB4RBfoKDBUiKhJ3dxIWDxsOASEXEA1hYQ0QFyEoBQMNDwkDDQ8UBgIJERUSBQgGGR4AAwAAAAAA9AEHAAcACwAbAAA/ATMXFQcjJzcVMzUnNTQmIgYdATM1NDYyFh0BOBOWExOWExOWEyEuIRMVIBWWExNeEhJeXl4TJRghIRglJRAWFhAlAAAAAAMAAAAAAQcBGgARABkAHQAANyM1NC4BIg4BHQEjBxUXMzc1JzQ+ARYdASMXIzUz9BMUIygjFBMSErwTqSEuIXCWvLypJRUiFBQiFSUTcBMTcDgYIAEhGCWDcAAABAAAAAABGgEQABYAGgAeADAAABMiDgEdARczNzU0NjIWHQEXMzc1NC4BByM1MxcjNTMnNTQmIgYHFSM1ND4BMh4BHQGWJDwjEzgTFh4XEjkSIzxcODipOTk5IC4hATgeNDw0HwEQIzwkXhMTXg8WFg9eExNeJDwj4Tg4OBMTGCAfFhYTHjQeHjQeEwADAAAAAAEaAQ8ABwAMABQAABMjBxUXMzc1JxcHIycXIzUfATM/AZsKfgn0CYNqGqAY2eEUCKgIFQEPS5UJCZU4Px0dhXIaAwMaAAAAAwAAAAABGgD0AAcADQAQAAA/ATMXFQcjJzcVMzUHIzcjFxMJ9AkJ9AkT4WsMZLxe6goKqAoKlYyMUlxJAAAAAAMAAAAAAQcA9AADAAcACwAANxU3NRc1JxUXNTcVJkFLOEtCxY0pjbCNI40jjSmNAAQAAAAAARAA/AADAAcAFQAZAAA3FTc1MxUXNQ8BJzU/ATMXNxcVDwEjNxU3NS84EzhBRw4FSwlHRg4FSwkOOMB3I3d3I3dkLAiNCC8sLAiNCC+QdyN3AAACAAAAAAEaAM8AEAAXAAA3MxUjNwcjJxQVFyM1MxcWFzc1IxUjFzd3JxsBIRchARkoDw4BnCUkNzbOemNjYwcvLXorKwQWQkI2NgAAAwAAAAABGgDuAA8AFwAbAAA/ARcVBycOAi4CNy8BNRcGFRQeATY3Jxc1BybnDAxyAw8VFg8GAyYIQAELEA4CWNfXrUAKoQoeCw8GBRAVCwoKJD0CAgkMAggILDmKPQAAAgAAAAAA7gD1ADgAQgAANwYnBi4CNzQ+AjMyFxYVFAYjIjUOASMiJjQ+ATM2Fhc3MwcGFjMyNjU0JiMiDgEVBh4CNxY3JxQzMjY3NiMiBsQaHxEhGQwBDh0mFCQWGR8XFQYRCg4RDRcNCQ8DBBEPAwMGDhUlHxglFQEJFBsOHBlMEQsQBAkZDhJEDwEBDBkgEhQnHRATFSMeJxIJCRMiHRIBCggPPA0KHxYdIBgpGA8aFAoBAQ04FxIRJB4AAAAAAwAAAAABLADhAAMABwALAAAlITUhFSE1ITUhNSEBLP7UASz+1AEs/tQBLM4TqRM4EwAAAAIAAAAAAOsA/gAmADsAADcnIwcXNxUxFTEVFB8BFhceAR8BHgIdATM1NC4CLwEuAjcnFwc2NyYvAQYPAQ4DHQEzNTQ+ATfFKA4oDRUBAgICBA0HDgcMBxoFCwwHDQYLBgEBFTQDAwcEAgUGDQcMCwUaBwwH1SgoDRQTCQYFBQsGBgsRCA8HERMNERENGBIQBw4GEBQLHRRTBAMKDAUHBg4HDxMYDRERDRMRBwADAAAAAAEaARoAEQAWABoAABMjFSMHFRczFTM1Mz8BNS8BIxcjNTMXJzMVI5YTZwkJZxNUBygoB1RQwMAfp15eARklCksJg4MCJg4lA0s4HAkSAAADAAAAAAEaARoACgAVACUAABMfARUHJwcnNT8BHwE1JxUjNQcVNzE/ARcVByc3IxcHJzU3FwczoXQEDnV1DgR0FWdnE2dnIw4uLg0ecR4NLi4NH3IBGUsHrAhLSwisB0urQpZCNjZClkJaDS8NLg0eHg0uDS8NHwADAAAAAAEaAPQAEwAeACIAACUnIwcVMzUXBh0BHwEzPwE1NCc3BxUHJzU2NxczNxYvATcXARmABoATKw8FSwhJBg8/QkFCAQ0xBzANQWdnZ8IyMndeERUaCAciIggIGRUZRwEeHgEWEhMTEhEoKCgABAAAAAABEAEaAAkAEwAdACcAADcHNSMVJwcXMzcnFzcVMzUXNycjDwEzFSMXByc1NxczJzcXFQcnNyPAIRIhDTAOMG4NIRIhDTAONSFBQSENMTFlQSENMTENIUFjIEBAIA0wMJMNIEBAIA0wUCATIA4xDTAtIA0wDTEOIAAAAAAFAAAAAAEaARoADAAQABgAHAAgAAATNzMXFQcjNTM1IxUjNxUzNQ8BFRczNzUnBzUzFQczFSNxCZYJCS8mhBIShOsJCZYKCoyDg4ODARAJCYMKE0sTORMTXgqDCQmDCiYTExJLAAAAAAMAAAAAARkBFwAJABEAHQAANzM3FxUHJyMnNR8BNQ8BIxUzNxcHFwcnByc3JzcXHDRJEBBJNAlIOzsHLi63DSAgDSEgDSAgDSDOSAb0BkgJXlg7xzsCS0kNICENICANISANIAADAAAAAAEsARoAEAATAB8AABMfARUjNSM1IxUzFSMnNTczBxUzFyM1IzUzNTMVMxUjskACE0teS1QJCX4ENhUTODgTODgBF0EIJRNLzxIJ4QkSOc44Ezg4EwAAAAMAAAAAASwBGgASABwAKAAAASMvASMHFRczNSM1Mz8BMwczNQcjDwEjNTMfATMHIzUjNTM1MxUzFSMBEH8QB14JCWdeVQYQdwETE3oGEFBQEAd6ExM4OBM4OAEHDwMJzgoTcQIQJVQcAxA4EAL0OBM4OBMAAQAAAAAA9ADFABEAADcVFAYrATcnBxUXNyczMjY9AeEFBIEeDTAwDR6BCxHFJQQGHw0wCjANHxAMJQAABAAAAAABGgDSAAgADwAWACgAADc2HgEOAS4BNhcuAQ4BFh8BHgE+ASYnNxUUBisBNycHFRc3JzMyNj0BLBMuGgknLhoJRgkUEgoBBQ0JFBIKAQWcBgRNHg0wMA0eTQwQxQ0JJy4aCScuAgUBChIUCQ0FAQoSFAklJQQFHg4wCy8NHhAMJQAAAAUAAAAAARoBBwAHAAsADwATABcAABMzFxUHIyc1FxUzNQczFSMXIxUzBzMVIxz0CQn0CRPhvJaWcXFxcUtLAQcKuwoKuwmpqSYSExMTEgAAFwAAAAABLAEsAAMABwALAA8AEwAXABsAHwAjACcAKwAvADMANwA7AD8AQwBLAE8AUwBXAFsAXwAANyM1MxUjNTMVIzUzFSM1MxUjNTMdASM1FzMVIzczFSMDIzUzFyM1OwIVIzMjNTMXIzUzFyM1MxU1Mx0BIzUzKwE1Mxc3MxcVByMnNxUzNRczFSMVMxUjFTMVIyczFSMTExMTExMTExMTExMTExMlExMlExMlEhITExM4EhImExMlEhITExPOExNLE4MTE4MTE4MlExMTExMTll5ezhM4EzkTOBM5EyUTExMTExMBGRMTExMTExMTEyUSEiYTE0sSEqkTE6mpqRMmEiYTJYMTAAAAAAcAAAAAARoBGgAHAAsAEwAXABsAHwAjAAATNzMXFQcjJzcVMzUHNzMXFQcjJzcVMzUXIxUzBzMVIxcjFTMmEqkTE6kSEqmWE14SEl4TE15dEhISEhISEhIBBxIS4RMT4eHhJhMTExISExMTEyUTJRMmAAAABAAAAAABGgD6ACUAQABJAFIAACU2NzYnIyYHBgcGByYiByYnJgcxBhcWFwYVFBcWFxYyNzY3NjU0ByInJicmNTQ3NjcyFxYyNzYzFhcWFRQHBgcGJyIGFBYyNjQmMyIGFBYyNjQmAQQDAQEHBAQGCAkMDhJCEhkSCQUHAQEDFREPHxpTGx8PEYMhEBgMDREIDwoWERISFQoPCBENDBgQSggMDBAMDEoIDAwQDAzCCAoSEgECAQUFCQUFEAQCARISCggXICkYFQoICAoVGCkgeAMECwwZEw8IAgEBAQECCA8TGA0LBANSERgRERgRERgRERgRAAQAAAAAAS0BGgAMABAAIgAuAAATMxcVJic1IxUHIyc1FzM1IxciByMOARcHFzceAT4CLgIHBi4BPgIeAg4BOM8SCQpdFVwSEl5ewwwKAREJCywNLAkXFQ8HBA0VCAoPBwQMEBAJAQYMARkSZAQCXswVEs/Pz3EHCicRLA0sBgMIEBUWEgpLAQsPEQwDBg0PDggAAAAKAAAAAAEaARwACwAXACQALQBIAGIAdwCSAJ4ApwAANw4BLgI2NzYeAQYnLgEOAhYXFj4BJjc2FhceAQ4CJicmNhcWMjY0JiIGFAczFSMiJj0BIiY9ATQ2OwEGByMiBh0BMxUUFjcmKwEiBh0BFBYzFQYXFhczPgE9ATI2PQE0ByMVFAYrASImPQEjNSY2OwEyHgEVFyM1MzI2PQEzNTQmKwEmJzMyFh0BFAYjFRQGJyIOAR4CPgE1NCYHIiY0NjIWFAarCRQSCwIKCA0eEgYYBAoJBgEFBQYPCAMrCRQHBQQDCQ4RBgkCFAMIBQUIBZwiIgkOBwsTDiIHAxgGCRMCiwoOLg4TCwgBBwUHJggLBwsSEwICHgICEgEJBi4FBwM0IiIBAxMJBhgDByIOEwsHDq4JDgYDDBEQCRAMBAUFCAUF1QYCCREUEgYIBhkfJgMBBAkKCQMEBAwPBAUCBwUNDgsGAwYKGhYDBQgGBgilEw0KIgwIKQ0UCAsJBSo1AgJ6ChQOOwgMLAkHBQECDAgsDAg8DUo/AQICAT89BQkFBwJ2EwICNSoFCQsIFA0pCAwiCg3ZChARDAMGDwgMESYFCAYGCAUAAAAFAAAAAAEHASwAFQAZAB0AIQAlAAATFRcVByMnNTc1MxUzNTMVMzUzFTM1AzM1IxczFSMXIxUzBzMVI/QTE7wSEhMmEiYTJam8vCZwcHBwcHBwcAEsExL0ExP0EhMTExMTExP+5/QmEzgTOBMAAAAABAAAAAABGgD0AAoAEAAUABwAADcfARUPAS8BNT8BFwcfAT8BBxc1JxcVNzUHFQc1oWwMB3NzBgtrBEsKQDkRsV5ecV4mE/QdCX4JICAJfgkdExMDEQ8FdxpsGRlsGmsKMAUwAAMAAAAAARIBGgAjAC0AQgAAJSc1JzU0JyYnJiMiBh0BBwYUHwEWFxY3Nj8BBxQeAjI+AicmPgIeAR0BBxcOASYvASY0PwEVBhQeAT4BJic1FwERFlwCBAsGBQwQOQkJRAQFCwoFBF0NAQYHCggGApYBAQMEBgQSEwEFBgFEAwNSBQYKCQQDBEhPOgFcFwYFCwQCEAw9OAgXCUQEAgQEAgRdKgQJBwQEBwizAgQDAQEFBBcTqgICAgJEAggDUTUECwkDBQkKAzVJAAAAAAIAAAAAARoBGgAMABMAADcyPgE0LgEiDgEUHgE3Iyc3FzcXliQ8IyM8SDwjIzwRDSsNJE8NEyM8SDwjIzxIPCNNKw0kTw0AAAMAAAAAARYBGwAGABwALwAANzM3JwcnBzceARcWFRQHDgEHBicuAzc2Nz4BFzY3Nic0JicmJyYGBw4BFhceAXYNVQ1PJA1WFikQJh4PJhYwJxQeEAMHDyYSKyEmGRkCEQ8dJhMmDyAXISIQJmBWDU8kDY4BFBApNysnEhcECRYLIiouFS4ZDAz0CR8iJRcqEB0DAQkLGE5IEwoGAAQAAAAAARoBGwALABcAIwBFAAA3IxUjFTMVMzUzNSMnLgEOAhYXFj4BJic+AR4CBgcGLgE2FzMyFh0BIzU0JisBIgYdATMVFBY7ARUjIiY3NSImNzU0NvQTJSUTJSVUBAoJBQEEBQYPCQMmCRQSCwIKCA0eEQYKLg4TEgkGLgYJEwICDw8JDgEJCwETcSYTJSUTuAMBBQgKCQMEAw0PFAYBCREUEgUJBxkeRRMODg4GCAgGMz8BAhMNCSwMCDIOEwAAAAAEAAAAAADPARoACAARACkAPQAAEzIWFAYiJjQ2NyIGHgEyNjQmFyMiBh0BBhYzFQYWOwEyNj0BMjYnNTQmBzUmNjsBMhYHFSMVFAYrASImPQGWCAsLEAsLCBAWARUgFhYHLg4TAQsJAQ4JHgoNCAsBE0oBCQYuBgkBEgICHgICAQcLEAsLEAsSFh8WFh8WVBMOMggMLAkNDQorDAgyDhNUMwYICAYzPwECAgE/AAAAAAQAAAAAARoBGgAFAA4AGwAtAAA3My4BJxU3HgEXFhUjNTIHFzMOASMiLgE1NDY3FzI+ATc2NSM1IgcOAhcUHgG8SQYoHAEjMwYBcAkvE1wHMyIZLBkrIBMbMCAEAnEJChorGQEeM7wbKAZJXAYzIwoJcIMTICsZLBkiMwfMGCsaCglxAgQgMBsfMx4AAgAAAAABBwDhABwANwAAJRUjIiYnIw4DKwE1Iyc3MzUzMhYXFhczPgEzBwYHBg8BIycmJy4BJxU+ATc2PwEzFxYfARYXAQcGCxMHNgQMDxIKCTwTEzwJChEIEAg2BxMLCQMDBQMETQIECQQPBgYPBAkEAk0EAQIFAgTOgwoJCQ4KBUsKCUsFBQoSCQoUAQIDBgUGDAgDBwGDAQcECAsHBgMCBAIBAAAAAgAAAAABLQEHADYAUAAAEzMVFAYHFR4BFwYHMSYvATU3Nj8BNjcjFhcWHwEVBwYHDgEHMwYHIxUHJzUjNTQ2NzY3NS4BNRc+AhceARcWFAcOAQcGIicuAScmNjc2NzZLgwkKCQ0ECQgJDAYFAwIEAgFbAgEEBQYHCwgEBwFeBQQKCQpLBgQKEgkKjAcODwgOFQQCAgQVDggPBw4WBAIBAQUMBAEHBgsTBzYECwYDBQoEAk0EAQIFAwMEAgUDBE0CBAkEDwYHCDwTEzwJChEIEAg2BxMLmAQDAQMDFQ8HDwgOFQQCAgQVDggPBxALBAAAAgAAAAAA4QEHABwANwAAEzMVFAYHFR4DHQEjFQcnNSM1NDY3Njc1LgE1FxYXFh8BFQcGBw4BBzMuAScmLwE1NzY/ATY3S4MJCgkOCgVLCQpLBgQKEgkKFAIBBAUGBwsIBAcBgwEGBAgMBgUDAgQCAQEHBgsTBzYEDA8SCgk8ExM8CQoRCBAINgcTCwkEAgUDBE0CBAkEDwYGDwQJBAJNBAECBQMDAAAABAAAAAABFgEbABUAKAAuADEAABMeARcWFRQHDgEHBicuAzc2Nz4BFzY3Nic0JicmJyYGBw4BFhceASc3FxUHJzcVN6EWKRAmHg8mFjAnFB4QAwcPJhIrISYZGQIRDx0mEyYPIBchIhAmJw5UVA4SOgEZARQQKTcrJxIXBAkWCyIqLhUuGQwM9AkfIiUXKhAdAwEJCxhOSBMKBqsIOBA4CF9OJwACAAAAAADwAQcABQAIAAATBxUXNzUHNRdHDw+ppY8BBwjhCHAQZ75fAAAAAAIAAAAAAOIBGgAVAB8AABMjFSMHFRQWFxUzNT4BPQEnIzUjFSMXDgEuAT0BMxUUgxIdCSUdEh0lCRwTJjsMIh8TcAEZOAlCHCsDOTkDKxxCCTg4cwwGDRwRODgXAAAAAAUAAAAAAQ0A7wAHAA8AHwAnAC8AADcjJyMHIzczFycmJzEGDwEXNTMyFhUUBgcVHgEVFAYjJxUzMjY1NCMHFTMyNjU0I6ATDz4OEzgREBcBAQECFm4pExYOCw4SGxQZEQ4QHBMXDxAjXigokFk+AwcHAz43kBIPDBIEAQETDxIXgS8ODBU+NA4MGgAACAAAAAABGgEHAAcACwAPABMAFwAbAB8AIwAAEzMXFQcjJzUXMzUjFyMVMycjNTMHMzUjFzMVIycjFTMHMxUjJuESEuETE+Hhzry8E5aWOEtLEyUlOUtLS0tLAQcTvBISvLy8EzgTEoNLEyU4EyUTAAIAAAAAAOsA6wAHAAsAAD8BMxcVByMnNxUzNUIJlgkJlgkShOEJCZYJCY2EhAAAAAUAAAAAARoBGgAHAAsADwATABcAABMzFxUHIyc1FzM1IxczFSM3IxUzNzMVIxz0CQn0CRPh4RImJnEmJiUmJgEZCfQJCfTq4RO8vHFxlgAAAQAAAAABGgD0ABIAADcnIwcnIwcjFTM/ARczNx8BMzXdIRMjFhIWNTwKDRYTIxsJQ4NxfV1REgcyX4RYBhIAAAQAAAAAAQcBGgAMABkAPABAAAATIg4BFB4BMj4BNC4BByIuAT4CMh4BFA4BNy4BIg4CBzM0PgEyHgIUBg8BDgEXFTM1NDY/AT4CNCYHMxUjjSE4ISE4QjghITghHDAcARswOC8cHC8BBQ8RDwoEARcFBwYFBAIEAw4DBAEWBAMHBAYEBC4VFQEZIThCOCAgOEI4IeEcLzgwHBwwOC8cngUGBgsNBwUHAwEDBQgJBBAECQUMCQQIBAgECgsNDF4WAAIAAAAAAQoBDQAQACIAADcOARUyMzIWFAYjIiY1NDY3Fw4BFTIzMhYUBiMiJjU0NjcXhiMgAwUTHBoVGx0vL5kkIAMFExwaFRsdMC4W6hYzJBgrGyomNU4bIxYzJBgrGyomNU4bIwAACAAAAAABGQEaAAwAGQAlADEAQwBOAFIAVgAANzQ2NycOARQWFzcuATcUFhc3LgE0NjcnDgEXJz4BNCYnNx4BFAY3Bx4BFAYHFz4BNCYHFg8BFwcnIwcnNy4BPgIeAQcOAh4BMjY0LgEXIwczFycjBzgQDw4RExMRDg8QFA0MDQkKCgkNDA2QDgoKCgoOCw0NDg0OEBAODRETE0sBBQVAEQ5oDxFABQQHDQ8NCR4CBAECBQYGBAUCBREmGRE2EMMVJg4NESwxLBENDiYUEB8MDQkYGhgJDgwfTQ4JGBoYCQ0MHyEfhg0OJikmDg0RLDEsQgoIBJEIISEIkQYQEAkBBgwBAQQFBQMFBwQCJyQ4JSUAAAAABQAAAAABGgELABUAHgAqADMAPwAANxQHMzYuAQ4CHgE3NQYuAT4CHgEHMjY0JiIGFBYXMjcXDgEiJic3HgE3MjY0JiIGFBYXMxUzFSMVIzUjNTPhARMDIDtALgwcOSAaLhgGIzMxHnoICwsQCwsuFA4NCRkbGQkNBxIvCAsLEAsLNxMlJRMlJZ8EBSA5HAwuQDsgAxMDGC80Jw0TKxELDwsLDwsvDg0JCwsKDQcILwsPCwsPCzgmEyUlEwAOAAAAAAEaAPQADwATABcAGwAfACMAJwArAC8AMwA3ADsAPwBDAAAlIyIGHQEUFjsBMjY9ATQmByM1MwcjFTMHIxUzNzMVIxcjFTMnMxUjNyMVMyczFSMVIxUzBzMVIzUzFSM3IxUzBzMVIwEHzwgKCgjPBwsLB8/PORISEhMTJRMTExMTg11dgyYmXhMTExNLExMTEzgSEjgmJvQLCIMICwsIgwgLloMTEhMTOBI5EhISOBM4EhMTExJdEhISExMAAAAAAwAAAAAA4gDhAAgAFQAeAAA3MjY0JiIGFBY3FA4BIi4BND4BMh4BBzQmIgYUFjI2lggLCxALC1MUIygjFBQjKCMUEyEuISEuIYMLEAsLEAsTFCMUFCMoIxQUIxQXISEuISEAAAMAAAAAARYBGwAIAB4AMQAANzI2NCYiBh4BNx4BFxYVFAcOAQcGJy4DNzY3PgEXNjc2JzQmJyYnJgYHDgEWFx4BlhAWFiAWARUbFikQJh4PJhYwJxQeEAMHDyYSKyEmGRkCEQ8dJhMmDyAXISIQJnEVIBYWIBWoARQQKTcrJxIXBAkWCyIqLhUuGQwM9AkfIiUXKhAdAwEJCxhOSBMKBgABAAAAAADrAQoAGQAAExUHIzUzJy4BDgIWHwEHJy4BPgIWHwE16glCMBINIiMZCgoNYQ1iEAwMISwsEQ0BB0IJEhINCQkZIyMMYg1hESwsIQsLEQ0nAAAACgAAAAABKgEsABUAHQAhAC4AMgA2ADoAPgBCAEcAADcHJzcjIgYUFjsBFSMuATQ2NzMnNxcTIyc1NzMXFSczNSM3MxcVByM1MzUjFSM1FyMVMwczFSMXIxUzNzMVIxcjFTMnMTMVI4srDho8DRERDQsLFBwcFDwaDitFeAoKeAp4ZGRGeAoKMihkFBQ8PDw8PDw8PBQ8PDwUFCoqFvMrDhoRGRIUAR0oHQEaDiv+/wqgCgqgCox4CqAKFIw8RoIUFBQUFMgUPBQ8FAAAAQAAAAABCQEHAB0AADcjNTMXFSM1DgEeAT4CJic3HgIOAy4CPgFYMkEKExoRGjlAKwUkHwUZJRIEGiszMSUSBBr0EwpBJRM/PB8LMEE1ChIIIzAzLB0HECMwMywAAAAAAgAAAAABCAEHABEAFQAAEzMVNxcHFwcnFSM1Byc3JzcXBzMVI7wSMAkwMAkwEjAJMDAJMJZLSwEHOx0QHR4QHTo6HRAeHRAdW0sAAAUAAAAAAS0BEgASAB8ALAAyADgAABMzFxUmJzUjFTMUFyM1MzUjJzUXIg4BFB4BMj4BNC4BByIuATQ+ATIeARQOATcnNxcHFycXBxc3JxH+CQkK6mEUTjprCtcVJBUVJCokFRUkFRAbEBAbIBsPDxsQGhoJExNLEhIIGxsBEQlsBwVWsCAaExQJxGwVJCokFRUkKiQViA8bIBsQEBsgGw8nGxsJEhMREhMIGxsAAAAAAgAAAAAA8gEaAAYADQAANyc3JwcVFycXBxc3NSfyS0sMUFCuTU0MUlJ5SksLUAxQVk1MDFMLUgABAAAAAAEaAKkAAwAAJSE1IQEZ/voBBpYTAAAACwAAAAABGgEaAAsAFQAmADoARABYAGEAcwB7AH8AhgAANzYyFhQGIicHIzUzFRQWMjY0JiIGFQcnNxc1NDY7ARUjIgYdATcXNzM1NCMiBgcVNjIPAQYVFBYzMj8BFRQGIiY1ND8BByM1BiMiJjU0PwE0Igc1PgE3MhUHNQcGFRQWMjYXMjc1BiImNDYyFzUmJyIGFBYnNzMXFQcjJzcVMzUnNzMXFQc12gQOCAkOAwELCwQHBAMHBYwnDBMPCywsBAUSDDsNEgQJAwcPAQsOBwYIBAEFBgMGBywMBAgGBw4LDgcDCQQRDAcGAwYENwkFBQwHCAsEAwgMDg19EqkTE6kSEqlwEoQSEvoJDhgPBwZKNAQHCA4HCAVOKAwTHQoQEQYDHRIMDSAXAwIMBQkBAxAHCQkSBAQHBAIHAQGvBwkJBxADAQkFDAICARcLBAEBBwIEBhIDDgQIDgkEDgIBEBoPSxMTXRMTXV1dJhMTXhNxAAAABgAAAAAA4gEaABAAHQAnADoAQgBGAAA3FzcnBzU0NjsBNSMiBh0BJxczFj4BNCYiBycjFTM9ATQ2MhYUBiImBwYjIiY1JjYzMhcVJiIGFBYyNycHFRczNzUnBzMVIzwrKQ0TBgMdHAwQFG8BBRUNCxYGARAQBgsGBgsGEAcOEBMBFhEMBgcRCwoRCF4TE4MTE4ODg+YrKg0THgQGEhAMHhQvCQESHhELJ1wbBwcICREKCZYFFBASFQMTBQsTCwVbE3ATE3ATE3AAAAAAAQAAAAABBwEEABUAABMHFRc3JzMyFhcWHQEzNTQuAisBN3ZLSw49JCc0EB4TESY8KSI7AQRMDUsNPBAQH0cGBic5JhM6AAAACQAAAAABGgEaACgALAAwADQAOwBLAFMAVwBbAAA3IzUzNSMiDgIdAQYWFxYXMzUjIicmJzQ9ATQ1Njc2OwEVIxUzNzUjJyMVMwczFSMVMxUjFyM1MxUjJzczFxUHIxUjNSMiJj0BNDYXMzUjIgYeATsBNSMnMzUj9KlLUAYNCQQBCwoGBgUFAwIGAgIGAgOuS1QKE4MTExMTExMTBQU4BRdCVAkJLxMSCAsLEQkJBAYBBSAmJhM5OXGWEgUKDAayChAEAgETAQMFAwIKAgMFAwEmEwpUcRMTEhMTgzg4HOoJcQkTEwsIXgcLcBMGCAUTEjkAAAIAAAAAAQcBGgAhADMAABMzFxUHIzUzNSM1MzUjFTMVIyIGHQEUFjsBFSMGJjc1JjYfATcVBxc3FTM1FzcnNRc3JyNGtwoKQTg4OKk4PQYICAY9PQ0UAQEUKw0lMQ0kEyYNMyUNNA4BGQnhCRImE5aWEwkFCgUJEgEUDbIOE1oNJBsxDSSOkCYNMxolDTUAAAQAAAAAAQcBCAAvADgAQQBKAAAlNC4BDgEWFxUUDwEnJj0BPgEuASIOARYXFRQWHwEVDgEeATI+ASYnNTc+AT0BPgEnNDYyFhQGIiYXFAYiJjQ2MhY3IiY0NjIWFAYBBxQeFwQQDgU0NAUOEAQVHBUEEA4IBzMOEAQVHRUDEA0yCAgMD7sLEAoKEAtnCxALCxALLwgLCxALC+EPFQMTHBkDFAYDGhoDBhQDGBwSEhwYAxQIDgMbGAQXHBMTHBcEGBoEDggUAxQNCAsLEAsLoQgKChALC44LEAsLEAsAAAAABwAAAAABGAEaACsALQAxADUAOQBDAEoAABMVIzUjFTMVByM1MzUjIgcGBxQdARQVFhcWOwEVIyInJicmPQE0NzY3NjsBBzUXIxUzFSMVMwczFSM3BxcjFTMHFzc1DwEjNTMVI/QTqbwKVEuuAwIFAwMFAgMFBQYGDQUCAgUNBga3xDgTExMTExMTlw0kdngmDTWwFwU4BQEQHBOWQgkSJgEDBQMCCgIDBQMBEgIFDQYGsgYGDQYCrIsEExMSExNWDSQTJg01DYgcODgABQAAAAABBwEaACEAJQApADMANwAAEyMiBhcVBhY3MzUjIiY9ATQ2OwE1IzUzFSMVMxUjFTM3NQcwHQE3IxUzBxc3FTM1FzcnIyczFSP9tw0UAQEUDT09BggIBj04qTg4OEEKzzkTEwwNJBMmDTUNPBMTARkTDrINFAESCQUKBQkTlpYTJhIJ4RcBi4cTVw0kjpAmDTUPEgAGAAAAAAEHARoAJgAqAC4AMgA2AD0AACU1JyMiBwYHBgcVFBcWFxY7ATUjIicmJyY9ATQ3Njc2OwEVIxUzNyc1MxUnMxUjFTMVIxcjFTMXByM1MxUjAQcKtwYGDQUCAQMFDQYGBQUDAgYCAQECBgIDrktUCryplhMTExMTExMJFwU4BXGfCQIGDQYGsgYGDQUCEgEDBQMCCgIDBQMBJhIJQpaWgxMTEhMTZxw4OAAAAAQAAAAAARoBGgALABQAGAAcAAATMxcVByMHJzUjJzUXMzUjFTMXFT8BMxUjFTM1Ixz0CQl/NhAvCXp64S4KKAcSEhISARkJvAk2By8JvLKpqQohKJleJRIAAAAABAAAAAABGgEaAAsAFAAYACQAAAEjBxUXMxUXNzM3NQcjDwE1JyM1MwcjNTMnMxUzFSMVIzUjNTMBEPQJCS8QNn8JEnoHKAou4UtLSy8SJiYSJiYBGQm8CS8HNgm8sgMoIQqplhNwJhImJhIABgAAAAABGgEaABEAFgAbACgALgA3AAABIgcGByMHFR8CMzc1Njc2NQczBgcnFyc2NxUvATY3Njc2NwYHBgcGBzUjNSMVNzYuAQ4BHgE2ARAvLiUkTgkDcAc4CSETF/MxFxMHagcbF0BAEBUjJDAvAx4XJBdIJRO3BgUTFw0FExcBGRcTIQk4B3ECCU4kJS4vVBgbB2oHExcxFUAYFyQXHgMvMCQjFTgTJTiQCRcNBRMXDQUABAAAAAABJQEHAB4AKAA1AD4AADc1NzMfATMXFTMXDwEjNjczNyMmJz8BMzUjLwEjFQYXFAYiJjQ2MhYVMxQOASIuATQ+ATIeAQcyNjQmIgYUFhMJXgYRbAoVCTIJRgcFMy1sBggDBlVnBxBQClURFxERFxAmEh4jHxERHyMeEkIUGxsnGxu3RgoDEAouDIQGCApxBwYDAyUDEDEFVwwQEBgQEAwSHhERHiQeEhIeQRwnGxsnHAAAAAQAAAAAARoBBwAcACYAMwA8AAA3MxcVByM2NzM3IxUmJz8BMzcjLwEjFQYHNTczFwcUBiImNDYyFhUzFA4BIi4BND4BMh4BBzI2NCYiBhQWkX8JCWwHBVYBdwgJBwZ6AXoHEFAKCQleBxARFxERFxAmEh4jHxERHyMeEkIUGxsnGxv0CrsJCAqEAQYEBgMTAxAxBQdGCgOdDBAQGBAQDBIeEREeJB4SEh5BHCcbGyccAAAAAAMAAAAAAPQA9AAEAA4AGAAANyM1MhYnFTIeARUzNC4BBxUyHgEVMzQuAV4mEBYmLk4tEzNWMxorGRMfMzgmFqwTLU4uM1YzSxMZKxofMx8AAwAAAAABGgD0AAkADgASAAA3FzM3NS8BIw8BFyc3MxcnMxcHE3wOfD4HfAc+g281dDVvMiJUpXx8Dj4DAz52bzU1IiJTAAAAAwAAAAABIAEaAAUACAASAAATBxUXNzUHNR8BMxcHJxUjNQcnIQ4OqaSOMA0vDR8THw0BGQjhB3AQZ75fCy8NH2ZmHw0AAAAAAwAAAAABFgEHAAUACAAPAAATBxUXNzUHNRcHNzUnFRcHNA4OqaWPVqSkjo4BBwjhCHAQZ75fdW0QbhdfXwAAAAMAAAAAASABGgAFAAgAEgAAEwcVFzc1BzUfASMnNxc1MxU3FyIPD6mljj0NLw0fEx8NARkI4QdwEGe+X44vDR9mZh8OAAAAAAQAAAAAARYBBwAJABwALgA6AAA/ARcVBzU3JxUjByYGBwYWFx4BNjcxNjU0JzUuAQc2FzEWFx4BFTEWDgEuATcxNhcnBxcHFzcXNyc3J14OqWxWjhMDGSgIBAIECSsxERAUCRYwDhQSDgcIARgkIBAGBSwWDBcXDBYXDBcXDP8IcRBIFzlfRA8BGhkMGAwWGQoTFRceFQEICxkKAQINCBQLER8IEyETExcXDBgXDBcXDBcYDAAAAAAEAAAAAAEaARoADwAYABwAJgAAJS8BIwcVIwcVFzM3NTM3NQcjNTMVMzUzFwc1MxUXIzUvAiM1MxcBFhwGoAkvCQm8CS8JS6gScQ8WXSVxJgMcBl6SF/ocAwkvCbwJCS8JoM6oOTkWDyUlS14GHAMmFwAAAAUAAAAAARoBGQAUABgAIAAjACcAABMfARUjBzUnIxUjNSMVMwcjJzU3MwczNSMfARUPASc/AQ8BPwEXNyfPHwYKCR8GcSU4Ci4TE5w/JiZ6HHI5DBxyZwoTAw9hDwETHw4GCQ8gS0u8EhK8E0s5ORwNchwNOHKHEwkdD2EOAAAAAwAAAAABGgEaAAkAEgAWAAATHwEVByMnNTczBxUzNScjFSM1MxUzNfocAwn0CQnYzuEXIoNLJgEXHQbYCQn0CRLhyhdLSzk5AAAAAAYAAAAAARoBBwADAAcADgAVABwAIwAANzM1IxczFSMnIzU3MxUjNxUjNSM1MwczFQcjNTMjMxUjJzUzOLy8JnBwOBMJQjjzEjlCCRIJQjnhOEIJE0uWJUtLQQoTCUE4E5ZCCRISCUIABgAAAAABGgEaAAYADQAUABsAIwAnAAA3IzUzNTMVNzUjFRczNQcVMzUzNSsBFTMVMzUnNwcjJzU3MxcHIxUzQi8lE6kTCS84EyUv1yUTCZ8JhAkJhAklS0vhEyUvCiUvCROyLyUTEyUvCRwJCV4JCRwmAAAEAAAAAAEbAR8AHAApADIAOgAANw4BFxYXBhcVJwcnNy4BPgEeARUUByYnNTQuAQYXPgEeAg4CLgI2FxY3FjcnBhUUNxc2JzYmIyJsEwkLCA8CAQlHDkcXBSRBQikBCAkdLzInECkkFgMSIigkFgIREhEXEg9PChhOCwEBIRgS7hM1GBIMCQkDBkUNRRlFOhkTNyMHCAcGAhoqFApkCwMSISgkFwIRIigkWxEBAQtODhIYRk8PEhchAAAAAAIAAAAAASwBLQAPAB0AABMiDgEWFwcXNx4BPgEuASMVIi4BND4BMh4BFA4BI78fMxkJFGQOZBtDOBYUNyEXJxcXJy4mFxcmFwEsITg8FnMMchUCJkBBKLsWJy4nFhYnLicXAAAGAAAAAAEcARoAAwAHAAsAHQAhACkAADczFSMVMxUjFTMVIxchNzM1ND4COwEyHgIdATMHMzUjFycjFSM1IwdxS0tLS0tLq/70GCMDBQcEcAQHBQMjpnBwpg4VlhUO9BNeEhMTS16pAwcFAwMFBwSoJs/0OCUlOAAGAAAAAAEaAQcADAAQAC4ANwBVAF4AABMzFxUjNSMVMxUjJzUXMzUjFzUmJwcnNyY3JzcXNjc1MxUWFzcXBxYHFwcnBgcVJxQWMjY0JiIGFzUmJwcnNyY3JzcXNjc1MxUWFzcXBxYHFwcnBgcVJxQWMjY0JiIGHPQJEuGDjQkT4eFdBQQRChIBARIKEQUEEwUEEgkSAQESCRIEBRcICwkJCwllBQQSCREBAREJEgQFEgUEEgkRAQERCRIEBRcIDAgIDAgBBwp6OYQSCc4vJqkVAQMKEQoFBQoQCgQBFRUBBAoQCgUFChELBAEVLwYICAwICG0UAgMKEAsFBQoQCgMCFRUCAwoQCgUFCxAKAwIULwYJCQsJCQAABgAAAAABBwEaAAcAGwAjADcAPwBTAAA3JzU3MxcVBycjFSM1IxUjNSMVIzUjFTM1IxUjByc1NzMXFQcnIxUjNSMVMzUjFSM1IxUjNSMVIxc3NScjBxUXNzUzFTM1MxUzNTMVMzUzFTM1MxUvCQnOCgpBExMTEhMTE7wmEo0JCc4KCowTExO8JhITExMSjAoKzgkJCRMTExITExMSJs4KOAkJOAo5ExMTExMTJiYTgwk4Cgo4CTgTEyYmExMTExODCTgKCjgJEyUTExMTExMTEyUAAAAEAAAAAAEsASwAFwA3AEMATgAANxcVBxcHJwcjJwcnNyc1Nyc3FzczFzcXBzc1LwE3JwcvASMPAScHFw8BFR8BBxc3HwEzPwEXNy8BNjMyFhUUDgEuATYXFjMyNjQuAQ4BFvg0NB4rLAs8CywqHTQ0HSosCzwLLCsxMjIHHBErEQoZChArEh0HMjIHHRIrEAoZChErERxgCw0SGRQeGwsIGQYGCQwJDw4GBb8LPAssKh00NB4rLAs8CywrHjQ0HitsChkLECsSHQcyMgcdEisQCxkKECsSHQcyMgcdEitLBxkSDxgGDh0dLQMMEQsDBw4PAAAACQAAAAABGgEHAAMACwATABcAGwAfACcAKwAvAAATIxU7ASMnNTczFxUHIyc1NzMXFTcjFTMHMxUjJyMVMzczNzUnIwcVNyMVMwczFSNCExNyPAcHPAhmPAcHPAhBEhISEhJLExOUPAcHPAgvExMTExMBB14KEwgJE0EJEwkJE40mS3A4ODgJEgkJEqBxSyUAAwAAAAABGgEcACQARQBRAAA3LgU3NTcyPgI3Njc2FxYXFhceAzMXFRQOBAcnFRQeAx8BNjc+BD0BIyYnJi8BJicmBw4DBxc+AS4BIg4BFhcHM5sPHBoWEQoBCQoQEQ8HCwwSEwwLBgUIDxEQCgkJERcZHA9sCA8VGA0WDAsNGBUOCQsJChQRCQgKDg8JERMTCmgJCgQQFA8ECQoIJRgJExYZHiMSPAkCAwYFBwQFAwEGAwMFBgMCCTwSIx4ZFhMJ0TMQHRsXFQgPBwgJFBcbHRAzAQIECwUEAgIEAwsIBAFRBBITDQ0TEgQxAAADAAAAAAEbAQcAFQAZACMAADc1FzUnIwcVHwE3NTM3NQcVIzUvATMHJzUfATMVIxcHJzU3F88SCakJBl4MQgkSOQZEg0xLSzpdXB4OLi8N5QETKgoKygkgCRMJKhMOnAgY1BmtGS4THg0uDS8NAAAAAwAAAAABGwEHABcAGwAlAAA3FTc1JyMHFTEVHwE3NTM3NScVIzUvATMHJzUfASM1Myc3FxUHJ88SCakJBl4MQgkSOQZEg0xLS3teXR4NLi4N5R0TIgoKCcEJIAkTCSITLJwIGNQZrRlAEx4NLg4uDQAAAAAFAAAAAAEdAR0ADAAZACIAKwA4AAATPgEeAg4CLgI2Fx4BPgIuAg4CFjcUBiImNDYyFhcUBiImNDYyFgciJicHHgE+ATcnDgFNHUc/KAQgO0U/KAQeKRk8NiIEGzM7NiIEGjwLEAsLEAteCxALCxALQhAaCBAKJSojCRAHHAEDFAUfO0ZAJwQePEU/txAFGzI9NiEEGzI8NV8ICwsQCwsICAsLEAsLUxANCRIVARYTCA4RAAAHAAAAAAEaAQcACgAOABIAGgAeACIALAAAEwcVMzUzFTcXNScHMxUjByMVMycHFRczNzUnBzUzFScjFTM3IxUnBxczNycHgxIShAMPEnEmJjgmJjgTE4MTE4ODEyUlXhMWDSYNJg0WAQcTODguAw86EyYlOSVLE14SEl4TcV5eOSaWSBYOJiYOFgAAAAQAAP//AQcBLAAsADUAPgBHAAAlNC4BDgIeARcOASsBIgc1PgEuASIOARYXFQ4BHgI+ASYnPgE7ATI2Nz4BJzQ2MhYUBiImFxQGIiY0NjIWNyImNDYyFhQGAQcOGBoWCQQSDQUSCyUWEBIVAxskGwMVEhIWAxkkHAYSEgUSCyUSHQYRGM4QGBAQGBA4EBgQEBgQZwwQEBcREcUNFwwCEBkaEwQKCw9bAx0kGBgkHQNyBBwkGQIWJB4FCgsVEQIbSQwQEBcREcIMEBAXERFuERcQEBcRAAAAAAMAAAAAARoBGgAHAAsADwAAASMHFRczNzUHIzUzFyM1MwEHzxISzxKDXl5xXl4BGRLPEhLPz8/PzwAAAAMAAAAAARoBGgAHAAsADwAAASMHFRczNzUHIzUzNSM1MwEHzxISzxISz8/PzwEZEs8SEs/PXhNeAAAAAAMAAAAAARoBEgBNAJwApgAANyYjLgEjFQ4BBxUWFxYXMjEGBwYHBh0BFBYyNzMGByMOARUGFjsBFj4CJyYvAS4BNj8BMzIXFhcWNjc2NTQnJicmBwYHBgcmJzU0JicXFgcGBwYrATQ2OwE1JjY3JwYHIyIHBiY+ATsBMjY/AQYmJz4BNzMyFxYXFh8BMzUmNjc+ATc2Fx4BFxUUDgEmJyYHDgEHBhYfAR4BByYvASIGFBY+ATQmI2gBAQIPChYeBAURCAoBEAoIBAMLDwcnBQIGERcBBAR9EBwWCQEBDQIHBQMDAgMDAwYHChIFAg0MERgaEg0KBQUHDwxkAgIDDggJbgoIGAESDgwIAzwDAgUFBAoHEwQFAQYPHAoEIRUCCAcKEAgGAQMBAgEEEw4TEA0RAgUHCAQKCwcJAgMHCAIKAQYBB4MEBgYHBgYE+gEJDBkJIxcICgYEAgIHBggGBwYHCgMJCgIbEgQFAQsXHRAWEQMICwkCAQEEAgEJCQYHERYSCw0FAw4LDgcHAwsQAbkPCQ4IAwcLCg0UAREDAgECAwsIBQMYAgkKFRwBAwUVCwoBAQcXBgwTAgQJCBsMAgcFAgICBgMCCgcLFwgDDB4NDQxwBQgGAQUIBQAABQAAAAABGgEaAAkADQAPABEAGwAANycHIxcHNxcnNwczNw8CNyMHMzcXMwcXJwc3tB4eZVIfUFAfUu1SGBgQGKpSUiwODiwkDiQkDrdiYkBkPj5kQAlPTzRQhBEtLRwtHBwtAAEAAAAAARoBGgAJAAA3JwcjFwc3Fyc3tB4eZVIfUFAfUrdiYkBkPj5kQAAABAAAAAABGgEaAAkADwAQABIAAD8BFzMHFycHNycfASc3Iyc1FyN4Hh5lUh9QUB9SgyQOJCwOalK3YmJAZD4+ZEBHHC0cLTNPAAAAAAMAAAAAARYBGwADABkALAAANzMVIzceARcWFRQHDgEHBicuAzc2Nz4BFzY3Nic0JicmJyYGBw4BFhceAXFLSzAWKRAmHg8mFjAnFB4QAwcPJhIrISYZGQIRDx0mEyYPIBchIhAmvEuoARQQKTcrJxIXBAkWCyIqLhUuGQwM9AkfIiUXKhAdAwEJCxhOSBMKBgAAAAACAAAAAAEaAQcACQATAAATBxUXMzUjNTM1Fzc1JyMVMxUjFRwJCS8lJcUJCS8mJgEHCs4JErwT4QnOChO8EgAAAgAAAAABGgD0AAcAHwAAPwEzFxUHIyc3IxUjNycHFRc3JzM1Myc3FxUHJzcjFTMTCfQJCfQJ9HFMJw04OA0oTUknDTc3DSdJceoKCqgKCp9BJw03DjcNKBIoDTcONw0nQQAAAAQAAAAAARQBGgAgACQAKAAsAAA3Mzc1JyMHIzU3NScjBxUXMzcVFzMVFzM3NScjByM1MxU3FwcnHwEHLwI3F9UNMhkNIl4jJg1LJQ4VCVgYDjIZDSNeTzgMJQwlDCUMkBg9GXYyDRkiGCIOJUsNJhZtCQoZMg4ZI0sJKgsmDDgMJgx4GT0YAAAHAAAAAAEaARoAGQA1AD4ARwBQAFkAYgAAEyIOAh0BHgE+AR4CDgEWFzMyPgE0LgEjByMuATUmNzY0JiIHBiciJj0BND4BMh4BFA4BIzcUBiImNDYyFhcUBiImPgEyFicyNi4BIgYUFjcUBiImPgEyFhcUBiImNDYyFpYaMCUUARMaFBwUARQDDg8LIz0jIz0jAQoEBQIIDx8sEAcKAgQfMz00Hh40HhILEAsLEAs4CxALAQoQC4MICwEKEAsLiwsQCwEKEAsTCxALCxALARkUJTAaCA4NBBMBFBsVHBUBJDxHPCT1AQQEDAgQKyAQCAIEAwcfMx8fMz00HrwICwsQCwuLCAsLDwsLVgsQCwsQCxMICwsQCwtACAsLEAsLAAAEAAAAAAEaAPQAAwAHAA8AEwAANzMVIxcjFTMnNzMXFQcjJzcVMzVLlpaWlpbOE+ESEuETE+G8EyYScBMTlhMTlpaWAAYAAAAAARoBBwAMABUAGQAeACIAJgAAPwEzFxUHIzUzNSMVIxc1JyMHFRczNycVIzU3JzUzFSczFSMHIxUzgxNxEhJLS3ETJhNwExNwExNwiwhLS0tLJktL9BMTXhMTXjg5ExMTXhISXl5eEwgLEzgTXRMABwAAAAABGgEHAAwAEQAaAB4AIgAmACoAAAEjBxUzNTMVIxUzNzUHMxUjJwcjBxUXMzc1JxUjNTMHMxUjFTMVIzczFSMBB3ETE3FLSxJwS0QHJl0TE3ATE3BwXktLS0txS0sBBxM4OF4TE144EwcHE14SEl4TcV4TEhMTlhMAAAACAAAAAADvARoACwASAAATNzMXBzMXByc3IycXBzcjNyMHixE+DykhDoYeKBcRRzaFRT4+QAEPCh1AIIkWSBsJY4lehAAAAAAEAAAAAAEaAQcACwAPABMAFwAAJScjDwEVHwEzPwE1Byc1FzcnNx8BBzU3AQ9eEYMKCl4RgwqgVFQJV31XB3p62C9CEVQRL0IRVJEqRiYQJz8sVz1JOQAAAwAAAAABBwEaAAkADAATAAAlLwEjBxUXMzc1ByM1BzUzFRczFQEEPgaRCQnOChM4hHEJQtk+Agn0CQm2BDnh4UIJlgACAAAAAAEbAOIAFwAhAAA3IgYHIy4BDgEUHgE2NzMeAj4CLgIHIiY0NjIWFAYj2BklAzoEFx0SEh0XBDoCFR8iHA8CEh0RFBsbJxsbE+EgGA0QAxUdFQQQDhEbDgQTHiMcEXAbJxsbJxwAAAAFAAAAAAEaAOsAEgAlAD8ASgBlAAA3Fj4BNzYnNicuASMiBzUjFTM1NzYXNhcWFRYHDgEnBiY3NSY3NicOAQ8BFTc2NzIWFQcOARQWMzI/ARUzNTYmFxQGIyImNDc2PwEXFjcWPwE1BwYiJjQ2FzIfATUnJiIGBwYUFxaHChQSBg0BAQwGEAkQDBMTEAUGCwYHAQkDCQYLDwEBCARQCREHAggLDwcJFw4VEw4LCQYRARMBDwsGCQQIChOcCAoODAMJCRcQEg0KCAgDChYTBw8OBl8GAQgIERYUDwcHCzSPBkwDAQEJCg0PDQQGAQERCwsMCgQWAQUFARcHCgEMCAQBEhoSBgUJPxAXOQ0RCAwEBQEDLwQBAQgBFgYHFBwWAQUFFgEFCAcRKhAHAAAIAAAAAAEaAQcAAwAHAAsADwATABcAGwAfAAAlIzUzByMVMycjFTMXIxUzJyMVMzcjFTMnFSM1FyMVMwEZXV0SJiZLqaklzs5ecHCWXV2Dg3BdXeETSxMTE14SSxMTE6k5ORMTAAAAAAQAAAAAAQcBGgALAA8AEwAXAAA3JyMPARUfATM/ATUHJzUXJzcXBxcHNTf9XRNeCQleE10KelVVUFlZWV5UVOE4OBBxEDg4EHGjMmEuQTU1MUMyZS4AAAAFAAAAAAEcARoACAAMABAAHQApAAATMxUWFzUjFTcXJwczJz8BFzc+AR4CDgIuAjYXHgE+AiYnJg4BFkuWCgm8EygVS5Z2IAsrKg8jIBQCEB4iHxQCDxkKGRcOAgwKECYWCAEHSwEEYp8hKiWDEzgTS3gKAg8eIyATAhAdIiBUBwILFRoWBwsIICYAAAIAAAAAAQcBBwBGAI0AADc1IyIOAQcxBgcxBhcVFAcxBgcGKwEVMzIXFRYXFRYXMRYdAQYXFRYXMR4CFzM1IyIuAj0BNCYnJic2Nz4BPQE0Njc2MxcVMzI+ATcxNjcxNic1NDcxNjc2OwE1IyInNSYnNSYnMSY9ATYnNSYnMS4CByMVMzIeAh0BFBYXFhcGBw4BHQEUBw4BI3ECCREMAwMBAQECBAoFBgEBBgUFAwQCAgEBAQMDDRAJAgIGCgcEAgIFCQkFAgIJBwUGTQEJEA0DAwEBAQIECgUGAgIGBQUDBAICAQEBAwMMEQkBAQYKBwQCAgUJCQUCAggDCgb0EwcNCAgICAgQBgUKBQISAgECAwEDBQUGEAgIAQcICA0GARMECAoGGQYMBQsHBwsFDAYZCQ0EArwSBg0IBwkICBAGBQoFAhICAQIDAQMFBQYQCAgBBwgIDQcBEgQICgYZBgwFCwcHCwUMBhkMCAQEAAAAAgAAAAABGgEaABsAHwAAExUzFSMVMxUjFSM1IxUjNSM1MzUjNTM1MxUzNQcVMzXOS0tLSxJLE0tLS0sTS0tLARlLEksTS0tLSxNLEktLS11LSwAACAAAAAABGgEcAA4AGQAdACkANQBCAE8AUwAAExYXFhQOASMiJjU0Njc2FzY3NC4BDgEUHgE3Bxc3FzMVMxUjFSM1IzUzJxcHFwcnByc3JzcXNy4BIg4BHgM+AgcGBwYnLgE+AhYXFjcjFTM2CgQCBgwICg8IBwoEBgEFBgYEBQZMZA1jUxIvLxIvL2wNISENISENISENIToDDBANBQEHCw0MBwERAQQGBQICAQUGBQEFjUtLARcECQUMCwgPCwcNAwQlAwcDBgIDBQcFAiJkDGOHLxIvLxIlDSEhDSEhDSEhDSFwBwkJDQ0KBgEHCg0IBAEDBQEFBgUBAgIFNBMAAAMAAAAAARkA4QAbACIAKQAANyM1NCYrARUUFjsBFSM1MzI2PQEjIgYHFSM1MxcnNxcVBycjJzcnBxUXzhIGBBMFBAo5CgQFEgQFARJwNxwOIiEOpxwbDiEivAkEBWcEBRMTBQRnBQQJJUwcDSIOIQ4bGw0hDiIAAAIAAAAAARoBGwAfAEMAADciLgE3NjcmNDc2Nz4BHwEHFzcXFhQGBwYHDgEnBgcGNyIHBgcOAR8BBwYHBh4CMjc2PwEXFjY3Njc+ATU0JwcnNyY1DhMCCCNABQYKFREpEgw2FzgFBgwLBggQJRJEIAmJEhAGBQ4HCAMERCMDAQcGCAMeSQUFDyAOBgUJCQExMDAGExMZCiY+Dh4OGA0LBAgFOBc2DA8gHgsGBQsEB0UeCPULAwUOJhIGBEIlBQsHAgMbSwQCBwMJAwUJFw0GBjAwMQEAAgAAAAAA9AEaAAcAGwAAEwcVFzM3NScHNTMVIzUzNSM1MzUjNTM1IzUzNUsTE5YTE5aWliYmS0smJksBGRLhExPhEiUT4RITJhImEyUTAAAIAAAAAAEaARoACQANABEAFQAZAB0AIQAlAAATBxUzNTMVMzUnAzUzFTcjFTM3MxUjNyMVMzczFSMzNSMVJzMVIy8JEs8SCeoSJhMTExISOBMTExISXRImExMBGQnYz8/YCf76ExMTExMTExMTExMTExMAAAcAAAAAARoBBwAHAAsAHwApADYAQABSAAATBxUXMzc1Jwc1MxUnMzU0IyIGBxU2MhUHBhUUFjMyPwEVFAYiJjU0PwEXIxUjNTMXNjIWFAYiJxUUFjI2NCYiBhcyNzUGIiY0NjIXNSYHJgYUFiYTE+ESEuHhow0SBAkDBw8MDgcGCAQBBQYDBgcrAQsLAQQOCAkOBAQHBAMHBUUJBQULBwcMBAQICw4NAQcTqRMTqRO8qak6IBcDAgwFCQEDEAcJCRIEBAcEAgcBARQGSh8JDhgPHAUEBwgOBwghAw4ECA4JBA4DAQEQGg8AAAAABgAAAAABGgEHAAcACwATABgAIAAlAAATBxUXMzc1JwczFSMHNzMXFQcjJzcjFTM1MzczFxUHIyc3IxUzNSYTE+ESEuHh4RMTOBMTOBMlEjheEjkSEjkSJRM5AQcTOBMTOBMTOEsSEjkSEjk5ORISORISOTk5AAAABgAAAAABGgDhAAkAEwAfACMAJwArAAA3MzUjBxUXMzUjNyMVMxUjFTM3NQcXFQ8BIy8BNT8BMwcXNSc3FzcnBzc1ByYlLwkJLyXqLyYmLwk8BAZUCS4FBlQJUBwcCxs/GxtCQs4TCZYKE5YTgxMKlicILwklHAgvCCZXERkRDxAcEFcdGh0AAAMAAAAAASsBCAARACMAJwAANyc+AR4BFzcXByMnNxcuAgYfAQYuAicHJzczFwcnHgMnNxcHZw8aPTYgARcOJw8nDxcBGiwxQA8aOjIeARcPJw4oDxYCGCcukg3fDecNEQMcMx8WDicoDhcYKhgBsw0OAR0xHRcOJygOFhcnFwO+DdAOAAIAAAAAASsBDQARACMAADcHJzczFwcnHgI2NxcOAS4BNycHFzM3JwcuAgYHFz4BHgEmFw8nDigPFgMpPTkPDxNFSTDNFw8nDycOFwEuSEUUDxA6PCeRFw4nKA4WHy8NGhwLIR4ROi8XDignDhYlOhMbIAsbGBAwAAsAAAAAAQcBBwAHAAsADwATABcAGwAfACMAJwArAC8AABMjBxUXMzc1BzMVIxcjNTMdASM1JzMVIxUzFSMVNTMVMzUzFTMjNTM1IzUzJzUzFf3hCQnhCuHOzoM4ODhLODg4ODgTOEs4ODg4ODgBBwrOCQnOCRM4JTglJTglEyU5JiYmJiYTJRMlJQAAAwAAAAABJwEHABEAIwAwAAATIw8BFRczNxYyPgE/ATQmJzUHJiMiBhQWMzIXFQcGDwEnNzMXHgEVBhUOAyc/AfhiBn1hDSoSKiUXAgEUERMODgQFBQQPDUkDAiVUc1QTCQoBAhEbHg5FAwEHA30NYioKFCIVChUlDCohBQUIBgYoSgEDJlR0OQoXDQUFDxkPAgZFBwAAAAAFAAAAAAEaARoACAAVAB4AKwA4AAA3MjY0JiIGFBY3FA4BIi4BND4BMh4BBzI2NCYiBhQWNxQOASIuATQ+ATIeAQcyPgE0LgEiDgEUHgGWCAsLEAsLUxQjKCMUFCMoIxRLFyEhLiEhmiM8SDwjIzxIPCODHzMfHzM+Mx4eM4MLEAsLEAsTFCMUFCMoIxQUI0whLiEhLiE4JDwjIzxIPCMjPJQeMz4zHx8zPjMeAAAAAAQAAAAAARoBGgAGAAoADgASAAA/AScHJwcXNyM3MwczFSMXIxUzQ2sNZBwOIuSZK26oqKioqKiuXQ5WIgwqHyZLJiUmAAAAAAUAAAAAAQYBGgATABcAGwAgACoAABMfAQ8BLwEHLwEHLwE/ASc/ASc3Bxc3JzcXNyc3FzcnDwEXIycVIzUHIzfTCycEPgsDQwoDMAsOBS8DBEMDBWcGKgcKFTgUCiMrIS4FORYjEyMVIAEZBF0LGgQIHAQHFAUfCxQICh0IC2IQERAXLhgtGE0TTRNzWzhLYU5JAAAEAAAAAAESASMAFwBHAFEAbgAAJScmIg8BDgEdARQWHwEWMj8BPgE9ATQmBxUUDwEGPQEGJyI1NzQ3MxY3NjQiJjU0NzU0PwEyHQE2FzIPARQHMSYGFRQWMzIUNxQjByM1ND8BMTcHDgEdARQXIyIvAS4BPQE0Nj8BNjIfARYXLgEHAQBZCBIIWQgJCQhZCBIIWQgJCU0BBQEFBQECAQEFBAcNBgoBBQEEBAIBAgEFCgQEDCQBFgEBFhBUCQkIBQcHWQYICAZZBw8GWQsCAgkG6TUFBTUFEAlqCRAFNQUFNQUQCWoJEJ8IAQEDAQIIAwIBBwEBAQIDDQQHDQgIAQEDAQgCAQIGAQEBBQcCAhoEAQ4GAQENfDQFDAlnCwMDNQQOB2oHDgQ1AwM1Bw0EAgMABwAAAAABLAEaAAMAIAAkACgAMAA0ADgAADcXIycHIg4CFB4CMjcXBiMGIi4CND4CMhYXBy4BFzMVIxUzFSM3IQcVFyE3NQchNSE1ITUhzCYOJVMIDAoFBQkMEgkCBAUHEBAMBwcMEhIKAgIECSUTExMTjf7mCQkBGgkT/voBBv76AQapXl4LBQkPEA0JBQMJAgIGDBEUEQwHAgIJAgIIExITuwn0CQn06qgTJgAAAAAP//8AAADyAS0ABAEXARoBLQE1ATsBSgFQAVIBVwFeAWMBZAFuAXQAABMiKwE3FzY1BzY9ASMuAScuAQc+AScOAQcGBwYzNzAHIw4BBxQ2MQcmBwYHMwYHMQYVBwYVFBcHFyMeAxcmJxQWFwcWHwEmFxYfATcGFzMeATMHFhczFhcnFx4CFyMmJy4CNyY3NCc1Njc1MRY/ATY3MzY3NjcxNjcVNjc2PwEGMzcHNhcxMjMHBjEWNzE2FycXFhcyNzE2FxUWFzInMR4BFyYxFRYjFhc1JicUIzEmBhcWNzE0MRcWHwEiJzEmFR4BFTEiFRQWNzMHBhcnFBUxFgc2NAcWBzEGFScGFgc2NTE0NyIPAQ4BJzQnJicmNzY3Njc+AhYXLgEOARc3MjUUHgE3FTY/AQcGNj8BNjUxJj8BBzA5ARQWFxY3Bi4BJzIXMRYXJicWFzciIzIWIzAnFzQiBxcUBwYHNCY2NxQHMQYUPwE2By4BNxY3Jw8CFxYXJxYfAScmJzcHBgc2JxUwMzEyFA8BNTYHFAc1NDeFBAMCDkgDAgIBARsQDSMJAQYBBwgDBgYBAQYDBQUIBQQCCA8NBQMCBAUBAgQBAwECBAUFBAQCBQMCAgMBBAMCBgMCAQgFAQgDAwUCAQMGAwYFDQ4FBBQHHDIcAgEBAQcHAgMDAwECAQUEBwcCBwwHDQgBAQ8HBQQEBQUCBQUGBgELCgoCAgQFAQgBBQ8aBQMBAQQCBgYDAgECAQECAQEBAQECAQMBAgEBAgMBAwECAQIBBQQDBAEDAQEBBQcQJhQCEgYJAwICAwUEEhYSBQkaGA4BAQEVHw4FAwkBAwUOAwEBAgRUBgMLEgkbGAYBBQgEBAYJCwMBAQYCAgQ2AgECAwIEBAEEAgIEAQMZBQYEBwUaAScBAwQDBQICAQEDAYwBAgYH4AIBAQQCBgIDASsBkAgGBQgQChMmBwYCBAEBAQECAgQCAQECAQMGAQIDAQ8MCQUHCQQMEQgNBQcHCQQBBQkBBAIJBQIDAgECBgMIBAIFCQMHBAECAwIEBQYFAgIBAggtQCEGDA8CAhYOAQIFBQcEBAYEBwYCAwYHAwYDAQIEAQEBAQECAQIDBAMFAQECAQMEBQgeEQQEBQsKARQJAgEDBQIBAQQCBgUCAwEEBgEDBQMBBAkHCAMEBQYGCQMHCggDBAcFBAIBAQIFBw0FBwECDgsPFwEGCwMHDAEKBwgECxkOAQIRGwsHAQECCAIDAQ0DAgICAwMpAQQCBAEEBhAKBQoBAwgKBbsBAXoGBAMBCwcGAQEEBQICBAECAQQTAQIBAQGZAZ8EBAYDFwQCBQIGAxgCDw0OVwEBAwMBAxUEBAIEBAAABQAAAAABEgEtAFoAsQDPARkBPgAANx4BHwEWHwEeARQOAQ8BDgIHDgEjIiYnJi8CIg8BIg8BDgEiJicmLwEuAjQ2NSc0Njc2PwMnND4CNz4BNSc0NTQ+AjMyHgIdARYXFh8BHgIVFCcyFh8BFQ8BBg8BBhQXFh8BHgE7ATI/AzQvAi4BLwE9ATQ+ATMyFhQGFBczMjY1Jy4CIyIGBxcnJgcjIj0BLgIiDgEVBxQfARYyNjUjIi8BJjYHMj4DJi8CLgIGDwEOAhUXFAYUFh8CFhc3Mjc2NzY3NT8BND4BNzU0PwE2PwEvASYvASY1JyYvAiYiDwEGIiYvASYiHQEHBgcXFBcHDgEdAjIfARYfARYfARQGBx4DFzI+ATc2PwI2PQEvAiYjIg8BBiImLwEHBgcGFQcGDwIUFvkEBQECAQMDAgMDBgQHBgkKBgQHBAgLBAIBBB0HBg0BAQQDCAsKBQkJGQMFAwMBBwcDAgUHAQEHCgwGCAkBBQsSDQ4SCQMBAwMEDgcMCH4CAwEBAQQBAgYCAgMBBAEGBgEGBQ4LAQECBQMHAwECAwIFBAIBAgMDAQEDBgQIBgEBBQICAgIBAgQGAwMBAgEBAgIBAQECAQQdBAYGAwECAg0KAgQFBgMKAwgFAQIFBBAIAwVDBAUJCQQEAgUDBgMBAgECAwUCAgIHAQECAwMDAgUFFAUJBwMFAwIIAwEBAQUGBAMDBwQEBgQBAgUDAggICkADBwgDCAoKAwEFAwUDBgMCCgMFBQEEAgIBAgIBAwEBCVsCBwUGBAUEAgYHBQQBBAMHCgQCAwYIAgEBAQECAgUCBAIDBAIEAQMGCAgFDQcHAgECBAkCBwoUExIIChgOCwYGDBIOBwwTFwwNCgkEBhIJFBYNCo8CAQQEAgUBAQUCAwECBAYDBQMICAQCAQIBAQQBAQIHAgMCBwUEAgEDAwcECAQHCAkBAQEBBgMGBQMEAwUEAwUBAgEBBQQG5AIDBgcFAhIQBAYEAQIKAwMEBAwEBwcDAQMBAQMOAQIEAgMBCB8EBgUCAQECAwEBAhcGBAIKAgIEBwcHBQMDDQIFBAYDAgcNBwgEAgIHCBMJCgQCBAMECAMEBgQFAQQGBAIVAgUECQUFAgICAggFDwQBBgEDAgoDAgIFBREICAUFBwoAAAAABAAAAAABKwEaAAcACwAPABUAABMfAQ8BLwE3Bxc3JxcHFzcvAQcXBxcv9AgiC/QIIg7hIOFNA14CPUUNMj0JARkDCfIJAwrx6APfAp0SAhMvNw8nJw8AAAQAAAAAAQcBGgAHAAwAEAAUAAATIwcVFzM3NQcVIzUzFyM1MzUjNTP94QkJ4QqEXV1xXl5eXgEZCfQJCfRxZ8/PXhNeAAAAAAYAAAAAARQBIQAIABEAHQAxAEQAVwAANxQGIiY0NjIWFx4BPgEuAQ4BNz4BLgEiBgcGHgE2BzIeARczLgEnBiYnJicmIyIHFzYHNDY3Jw4BBx4BFAYHHgEXNy4BFyInBxYzMjc2Nz4BFz4BNyMOAT0PFQ8PFQ+SBhQTBQsUEwUyAwEHDA4MBAUGEhRREiEUAiUBEQ4IEAcPAw4PGhcTDjkQDxMRGAUHBwcHBRgREg4RShAPExcaDw4DDwcQCA4RASUDKZYLDw8WDw+ICQYLFRIGCxXXBg4MBwcGCRQLBRERHxIUJQ4DAQQJEQQMIAdJEiAKIAshFAUPEA8FFCELIAogNwchCwMRCQQCAw4lFBwmAAAAAAMAAAAAARoBGgAHAAsAEgAAEwcVFzM3NScHNTMVJxc3NScHFyYTE+ESEuHhmw1CQg06ARkS4RMT4RLz4eEyDkILQg07AAAAAAQAAAAAARoA4QAHAAoAEgAYAAA3BzM3MxczJwc3FzcjBzM3MxczJzc2Nx8BPywZCSsKGSwbDw6FHj0eDj8OHWQWAgECF6lxHBxxQigoeqkrK0JDBgULQwADAAAAAAEHAPQAAwAHAAsAACUjNTMVIzUzBzM1IwEH4eHh4eHh4c4mcSZxJgAAAAACAAAAAAEaAQcAGwA2AAA3Ii4BPwEjBi4CNzY3PgE3Mx4BHQEUBisBBwYnIgcGBwYWNzMXFQcGHgEyPwIzMjY9ATQmI2YIDgUEEjQHDAcBAyMIAw0IpwsPDwsZbggYBQILIAIEBT4JFAEBBAUCcgkZAwUFAyMLEQkpAQYLDgZKFwcJAQEPC0IKD2cH0QUfQwQHAQwJLgIFAwJoAwQDQgMFAAAAAAIAAAAAARoBBwAbADYAABMeAg8BMzYeAgcGBw4BKwEuAT0BNDY7ATc2FzI3Njc2JgcjJzU3Ni4BIg8CIyIGFxUGFjPGCA4FBBI0BwwHAQMjCAMNCKcLDw8LGm0IGAUCCyEBBAU9ChQBAQQFAnIJGQMFAQEFAwEHAQoRCSkBBwsNBkoXBwoBDwtCCg9nBtAFH0MEBwEMCS4CBQMCaAMEA0IDBQAABgAAAAABGQEaACAALwBBAE0AUgBoAAAlJwcnNycmIg4CFBcGBwYWFx4BMzI3Njc2NxYyPgI0BwYrASIuAjc2Nx4BFwY3FgYiJy4BNz4COwEHFRczNwczFzcnNy8BDwIXJxcVIycXNxcWFAcOAScmLwE3Fx4BPgI0JicBFQ8nFycDDRsaFAsFOjkGAQgECQUJBxUkIhoNHBoUC+IBAgICAgMCASpGAwYESakBICwPDAYGBA8UCgUiIw0iyhwODAwBBDYLDwIjCisUHIoNOggIBg8IBQM7DToCBQUCAQEB6wMnFygPBAsUGx0NOjsIFQcEBQcTJSEbBgsVGhy3AQEEBgIsRgQHA0uFFx8PDCAPChAIIw0jIicODQ0fCCQCDww2QB0VLH0NPAgWCAYDAwIEPA08AgICAwMEAwEAAAYAAAAAAPQBGgATABcAGwAfACMAJwAANzMVIxUHIyc1IzUzNTQ2OwEyFhUrARUzBzM1IxcjFTM3MxUjNzMVI7w4ExODExI4Cwg4CAsTODheg4MmExMSExMmExP0E6kSEqkTEwcLCwcTvKkTg4ODg4MAAAAAAQAAAAABBwDPAAUAAD8BMxcHIyYH0ghqEMQKCmYAAAABAAAAAADPAQcABQAAExcVByc1xAoKZgEHCNIIahAAAAEAAAAAAM8BBwAFAAA3JzU3FxVoCgpmJgfSCGoQAAAAAQAAAAABBwDPAAUAACUHIyc3MwEHCNIHaRBoCgpmAAABAAAAAAEaAP8APgAAJQ4BBxcUBgcOAyImJxY2NyImJyYnFxY3LgEnJjUxFjMmJyYnJjc2NxYXFhcWFyc1NDc2NzYyFhc2NwYHNgEZBQ4IAQcHCR0kKy0qEhUqEAwXBwUDBQoJCRAGDAwNCwcDAgMEAQQKDRkfEBABBAgVChYUCBIQBhIQ5QgOBgcQHw8VIhgMDAwCCw4MCgcIAQEDAgkIDhQGBwwGBg4NBwYMChUIBAEGBgwJFQgECQgECRMKAQAEAAAAAAEHARoAHgAiACYAKgAANyMnMzc1JyMHFRczByMHFRczNzUnIzcXIwcVFzM3NSc1MxUHFSM1FyM1M/0gPxQKCksJCRQ+IQkJOAoKATo5AQkJOAqWOF4lziYmXl4JSwkJSwleCjgJCTgKVlYKOAkJOHo5OYMlJSUlAAAAAAQAAAAAAQcBGgAeACIAJgAqAAATIwcVFzMHJzM3NScjBxUXMxcjBxUXMzc1JyM3Mzc1BzUzFRcVIzU3IzUz/TgJCQE5OgEKCjgJCSE+FAkJSwoKFD8gCuElXjiDJiYBGQk4ClZWCjgJCTgKXQpLCQlLCl0KOC8mJoM4OIMmAAAABQAAAAABBwEaACMAJwArAC8AMwAANyMnNScjNTM3NScjBxUXMxUjBxUHIwcVFzM3NTczFxUXMzc1JzMVIwczFSMHIzUzFyM1M/0hIAocCQoKJQkJCRwJICIJCSYJIEMgCiUKhBMTEjg4ORISvBMTSyBHCiUJJgkJJgklCkcgCSYJCSIgICIJCSbFE0s4SxISEgAAAAMAAAAAAQcBGgAJABMALQAANzUHJzczFwcnFQcVJwcXMzcnBzU3FwcXByM1MycjBzMVIyc3JzczFSMXMzcjNY0TDSIOIg0TEhMNIg4iDRNiBkVFBk44ODg6OU8FRUUFTzk4ODo4sksTDiEiDRNLOEsTDSIiDRNLZxM3ORMTLS0TEzc5ExMtLRMAAAAADAAAAAABGgEaAAkAEwAbAB8AJwArADMANwA/AEMARwBLAAATFwcnFSM1Byc3FzUjFScHFzM3JzcjJzU3MxcVJzM1IxcjJzU3MxcVJzM1IwcjJzU3MxcVJzM1IxcjJzU3MxcVJzM1KwIVMzUjFTM2KA8XEhcNJw8SFw0nDSgNTiUJCSUKJhMTjTgKCjgJOCYmQiUJCSUKJhMTjTgKCjgJOCYmEyUlJSUBGScNFlJUGA0n6FJSFg0nJw1iCSYJCSYKEiUJOAoKOAollgkmCQkmChM5CjgJCTgJJhNwEgAAAAACAAAAAAEHAR0AFQAaAAA3NTQ+ARYXMy4BDgEdASMHFRczNzUnBzMVIzVeGikjBxQILjgmExISvBMTJia8qSUVHwcVExsgByodJRNwExNwExNwcAAFAAAAAAEaARoACQARAB4AJwAvAAA3MzcXFQcnIyc1HwE1DwEjFTM3FAYHJz4BJzYnNx4BBxQHJzY0JzcWBxQHJzYnNxYcNEkQEEk0CUg7OwcuLsUPDg4MDQEBGQ4ODyUTDQ0NDRMmCA4HBw4I0UgG9AZICV5XO8Y6A0slFyoSDQ8kEycfDRErFx8ZDRQvEw0ZHxANDg8QDQ0AAAAEAAAAAAEVARQAFwAvAFsAXwAANzM3Mzc1NzUnNScjJyMHIwcVBxUXFRczNyM1LwE/ATUzPwEfATMVHwEPARUjDwEnNwYPASM1Njc+AzMyHgIUDgEPAQ4BHQEjNTQ2PwE+ATQnMS4BJzEmIgYXIzUzkA0gLQogIAkuIA0fLwofHwovAykCHRwDKQYcHQYoAx0dAygHHBwVAgEBEQEDAgQHCQUICwgDBAUDBgIEEQQDCwMDAQEDAgMGBg8QEBggCi0gDiAuCSAgCi0gDiAtChMoBxwcBygDHBwDKAccHAcoAxwccQMDBgEJBwMGBAMFCAsMCQgEBwMGAwkKBQgDDgMIBwMCBAECBF0QAAAABgAAAAABLAEaAEIATgBaAGIAZgBqAAA3NDYfARYyNj8CJy4CIgc1NxYfATc+AxYVFCMiJiIGBwYHFxYfARYyNzY/ARcOAyIuAS8BJicPAQ4CIiYXPgE0JiczFhUUBgcjLgE1NDczDgEVFBc3IQcVFyE3NQchNSE1ITUhZQcEBQEDBQMLBgcBBQYHAxsGAwUFAwkJCQYIAwUGBgMFBAgBAQIBBAEFAwMDAQYHCAYFAwEEAQEJBgMIBwgGcwcJCQcNEgkJngkJEg0ICBDP/uYJCQEaCRP++gEG/voBBlQEBQIEAQUDEA0bAwUDAQQFBggQCAYJBgEEBAgDBgQGCCIEAwMBAQQFBAIDCAcGBAYDFAQDDwkFBgUFBQoYGhgKFRoOFwoJGQ0aFQoZDBsUzgn0CQn06qgTJgAAAgAAAAABFQEUABcAHgAANyMnIyc1JzU3NTczNzMXMxcVFxUHFQcjJzM3JwcnB50NHy8KHx8KLx8NIC4JICAKLT8ORg1AGg0YIAotIA4gLQogIAkuIA4gLQowRg5BGg0AAwAAAAABFQEUABcALwA2AAA3MzczNzU3NSc1JyMnIwcjBxUHFRcVFzM3IzUvAT8BNTM/AR8BMxUfAQ8BFSMPASc3MzcnBycHkA0gLQogIAkuIA0fLwofHwovAykCHRwDKQYcHQYoAx0dAygHHBwEDkYNQBoNGCAKLSAOIC4JICAKLSAOIC0KEygHHBwHKAMcHAMoBxwcBygDHBwgRg5BGg0AAAAEAAAAAAEaAPQABwALABYAIQAANwcVFzM3NScVIzUzBzUzNSMHFRczNSMnNTM1IwcVFzM1I5YTE3ESEnFxqRMdCQkdEzgSHAkJHBL0E5YTE5YTqZZeSxMJhAkTOCYSCV4JEwAAAwAA//8BLgEHABIAHwAmAAATMxcVJic1IxUzFBcjNTM1Iyc1Fz4BHgIOAi4CNhc3JwcnBxcc9AkIC+BdE0s4ZwmkESgkFwISISgkFgMSOC0PJxgMIAEHCmcHBFOpHxkTEgq7dAwCESIoJBcCEiEoJFI7DDQTDhoABQAAAAABLAEHABIAHwArADEANwAAEzMXFSYnNSMVMxQXIzUzNSMnNRciDgEUHgEyPgE0LgEHIi4BND4BMzIWFAYnFzcnNycHJzcXBycc9AkIC+BdE0s4ZwnOFCMUFCMoIxQUIxQPGg8PGg8XISEVGwkTEwkwEggbGwgBBwpnBwRTqR8ZExIKu2cUIygjFBQjKCMUgw8aHhoPIS4hQxsIExIILhIIGhsIAAAAAAMAAAAAASwBBwASAB8AKwAAEzMXFSYnNSMVMxQXIzUzNSMnNRciDgEUHgEyPgE0LgEHIi4BND4BMzIWFAYc9AkIC+BdE0s4ZwnOFCMUFCMoIxQUIxQPGg8PGg8XISEBBwpnBwRTqR8ZExIKu2cUIygjFBQjKCMUgw8aHhoPIS4hAAAAAAMAAP/+AS4BBwASAC4AMQAAEzMXFSYnNSMVMxQXIzUzNSMnNRcyHgIXHgEHDgIHDgEnLgInLgE3PgI3NhcnFRz0CQgL4F0TSzhnCc4KExEOBQcEBAIKDggNHg8JEQ4FBwQEAgoOCBI6OQEHCmcHBFOpHxkTEgq7ZwUKDggNHg8JEQ4FBwQEAgoOCA0eDwkRDgUKSyZLAAAAAgAAAAABGgEHAA8AEwAAASMHFRczFSMVMzUjNTM3NQcjNTMBEPQJCWc4ljhnCRLh4QEHCrsKEhMTEgq7sqkAAAYAAAAAARoBGgALABcAIwAwADgAQAAANzM1MzUjNSMVIxUzFyMVIxUzFTM1MzUjNzUjFSMVMxUzNTM1ByYiDwEGFBYyPwE2NAcGIiY0PwEXNwcnNzYyFhRSExMTExMTlhMSEhMTEx8TExMTEkoIFwmMCBAYCIwIogIIBgN5DhMGDQYCCAbOExMTExNeEhMTExOWEhITExMTLggIjQgXEQmMCBeeAwYHA3kNEwYOBgIFCAAAAAQAAAAAARkBGgAFAAgADAAQAAATMxcHIyc3BzMnNSMVPQEzFY4Qewj2CINr1l8YGAEZ5g0NzskTExMmS0sAAAADAAAAAAD0ARoABgAaACcAADczNSM1IxUnDgEUFhcVFzM3NT4BNCYnNScjBxcUDgEiLgE0PgEyHgGNJRwTHBYZGRYKSwkWGRkWCUsKehQjKCMUFCMoIxSDEy84WgwsMiwMKQkJKQwsMiwMKQkJehQjFBQjKCMUFCMAAAAAAwAAAAAA4QEaABEAGQAdAAATNSMiDgEUHgE7ARUjFTM1IzUHIyImNDY7ARcjNTPhZxIeEhIeEhwTXhM4HBQbGxQcJhMTAQcSER8jHhJeEhLPXhsnHM/PAAUAAAAAASwA9wAHABwAJwA3AEMAADUzFSE1MxUhNyM1IwYjIiY1ND8BNCMiBzU2MzIVDwEOARUUFjMyNjUXMRUjNTMVMTYzMhYVFAYiJxUUFjMyNjU0JiIGEwEGE/7UgBABChUQESIfFhIPDxQkEBkMCwoJDRA/EREMGBQWGSoLEA0PERAcEV4mJjg4EBMRDR0FBBoMEQkmDwQBCAsHChEOGw+YQxQbGBofOw4NEhcVERMUAAMAAAAAARoBBwAHAAsADwAAASMHFRczNzUHIzUzNSM1MwEQ9AkJ9AkS4eHh4QEHCs4JCc7FhBImAAAAAAYAAAAAARoBGgAfAC8ARQBaAHoAigAANyYnJgcGDwEVNz4BMhYXBw4CBwYWFxYzMjcVMzU0JgcVFAcOAScuAj0BND4BMzcuAiIHBgc1IxUzNRYXFjMyPgI0BxQOAQcGJy4CPQE+Axc2Fx4BBz4BMhYfATUnJg4DFB4CMjY/ATUPAQYnLgI0NjcjNTMXFQcjFwcnNTcXBzNJBAUJCwcGBgQECwsFARIHCQYBAwYJBQULBxMDDwECCgUCAgEDBANrAQYLDgUDAhISAwYCBAcLBwQSAgQCBgUCBAIBAgMFAwYEAQJeAwYIBgMHAggSDgoFBQkNDgoEAgYKBgYDBQME3EtUCQl8Jw42Ng4mcusFAgMCAQMDFAMDBQYGAgEFBwQKEgQCCQcxBwsfBQMDBgUCAQIDAgQBAwIWBgsHBAIDLnQFBQEBBgwQEAcHCgYBAwICBAYECgQIBQMBAQYCCWADAwICBRUBBQEGDA8RDgoGAwIBEQIEAQICBggLCU0SCXEJJw02DTcOJQAAAwAAAAABJQEtACQAPwBMAAATMh4CFxYXFhcWMxUUDgQPAScuBT0BMj4CNz4BFy4BJy4BIgYHDgEHFRQeBBc+BTUvAQ8BLwEPAR8CPwGXCA0NDAcKCxUXDAsLExkfIREEBREiHhoTCgsYFhUKDBqIFSkSCRYWFQkSKRYKERgaHg8QHRsXEgk0CAhRHAgIAiQECQRbASwCBAYEBgUIAgFKFiYjHhsXCgMDChcbHiMnFEwBBQkGCAg4AQwMBgYGBgwMATkSIiAbGBUJCRQZGyAiEhkHAWAnAgcHMwIBAmsAAAAEAAAAAAElAS0AJAA/AGkAcQAAEzIeAhcWFxYXMhcVFA4EDwEnLgU9ARY+Ajc+ARcuAScuASIGBw4BBxUUHgQXPgU1Jx4BFA4BDwEOAR0BByMnNTQ+AT8BPgE0JicmIgcOARUHIyc0PgE3NhcWBzczFxUHIyeXCA0NDAcKCxUWDQsLExkfIREFBBEiHhoTCgsYFhUKDBqIFSkSCRYWFQkSKRYKERgaHg8QHRsXEQpgBQYFBgQGAwMDDQMFBgQGAwMDAgUPBQIDAw0DBgoGDg8GHgMNAwMNAwEsAgQGBAYFCAIBShYmIx4bFwoDAwoXGx4jJxRMAQIFCQYICDgBDAwGBgYGDAwBORIiIBsYFQkJFBkbICISGQYMDgsIAwYDBgQGAwMGBwsHAwYEBgcGAwUFAwYEAgIIDQoCBgYDYQMDDQMDAAADAAAAAAElAS0AJAA/AFMAABMyHgIXFhcWFzIXFRQOBA8BJy4FPQEWPgI3PgEXLgEnLgEiBgcOAQcVFB4EFz4FNS8BIwcnIwcVFwcVFzM3FzM3NSc3lwgNDQwHCgsVFg0LCxMZHyERBQQRIh4aEwoLGBYVCgwaiBUpEgkWFhUJEikWChEYGh4PEB0bFxEKRwcEJSUECCUlCAQlJQQHJSUBLAIEBgQGBQgCAUoWJiMeGxcKAwMKFxseIycUTAECBQkGCAg4AQwMBgYGBgwMATkSIiAbGBUJCRQZGyAiEgsIJiYIBCUlBAgmJggEJSUAAAADAAAAAAEaAR4ADgAfACsAADcWBgcXBycOAS4BPgEeAQcyNjcHPgE1NC4BIg4BFB4BNzUjNSMVIxUzFTM14gENDFAOTxxIORMcP0cwZBEfDAEMDhcnLiYXFyZFJRMmJhO5FCYQTw5QFwIrRUIjDDWADQwBDB8RFycXFyctJxdLEyUlEyUlAAAAAwAAAAABGgEeAA4AHwAjAAA3FgYHFwcnDgEuAT4BHgEHMjY3Bz4BNTQuASIOARQeASczFSPiAQ0MUA5PHEg5Exw/RzBkER8MAQwOFycuJhcXJhhdXbkUJhBPDlAXAitFQiMMNYANDAEMHxEXJxcXJy0nF10SAAAAAAAQAMYAAQAAAAAAAQAHAAAAAQAAAAAAAgAHAAcAAQAAAAAAAwAHAA4AAQAAAAAABAAHABUAAQAAAAAABQALABwAAQAAAAAABgAHACcAAQAAAAAACgAkAC4AAQAAAAAACwATAFIAAwABBAkAAQAOAGUAAwABBAkAAgAOAHMAAwABBAkAAwAOAIEAAwABBAkABAAOAI8AAwABBAkABQAWAJ0AAwABBAkABgAOALMAAwABBAkACgBIAMEAAwABBAkACwAmAQljb2RpY29uUmVndWxhcmNvZGljb25jb2RpY29uVmVyc2lvbiAxLjljb2RpY29uVGhlIGljb24gZm9udCBmb3IgVmlzdWFsIFN0dWRpbyBDb2RlaHR0cDovL2ZvbnRlbGxvLmNvbQBjAG8AZABpAGMAbwBuAFIAZQBnAHUAbABhAHIAYwBvAGQAaQBjAG8AbgBjAG8AZABpAGMAbwBuAFYAZQByAHMAaQBvAG4AIAAxAC4AOQBjAG8AZABpAGMAbwBuAFQAaABlACAAaQBjAG8AbgAgAGYAbwBuAHQAIABmAG8AcgAgAFYAaQBzAHUAYQBsACAAUwB0AHUAZABpAG8AIABDAG8AZABlAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGlAQIBAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETARQBFQEWARcBGAEZARoBGwEcAR0BHgEfASABIQEiASMBJAElASYBJwEoASkBKgErASwBLQEuAS8BMAExATIBMwE0ATUBNgE3ATgBOQE6ATsBPAE9AT4BPwFAAUEBQgFDAUQBRQFGAUcBSAFJAUoBSwFMAU0BTgFPAVABUQFSAVMBVAFVAVYBVwFYAVkBWgFbAVwBXQFeAV8BYAFhAWIBYwFkAWUBZgFnAWgBaQFqAWsBbAFtAW4BbwFwAXEBcgFzAXQBdQF2AXcBeAF5AXoBewF8AX0BfgF/AYABgQGCAYMBhAGFAYYBhwGIAYkBigGLAYwBjQGOAY8BkAGRAZIBkwGUAZUBlgGXAZgBmQGaAZsBnAGdAZ4BnwGgAaEBogGjAaQBpQGmAacBqAGpAaoBqwGsAa0BrgGvAbABsQGyAbMBtAG1AbYBtwG4AbkBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgHHAcgByQHKAcsBzAHNAc4BzwHQAdEB0gHTAdQB1QHWAdcB2AHZAdoB2wHcAd0B3gHfAeAB4QHiAeMB5AHlAeYB5wHoAekB6gHrAewB7QHuAe8B8AHxAfIB8wH0AfUB9gH3AfgB+QH6AfsB/AH9Af4B/wIAAgECAgIDAgQCBQIGAgcCCAIJAgoCCwIMAg0CDgIPAhACEQISAhMCFAIVAhYCFwIYAhkCGgIbAhwCHQIeAh8CIAIhAiICIwIkAiUCJgInAigCKQIqAisCLAItAi4CLwIwAjECMgIzAjQCNQI2AjcCOAI5AjoCOwI8Aj0CPgI/AkACQQJCAkMCRAJFAkYCRwJIAkkCSgJLAkwCTQJOAk8CUAJRAlICUwJUAlUCVgJXAlgCWQJaAlsCXAJdAl4CXwJgAmECYgJjAmQCZQJmAmcCaAJpAmoCawJsAm0CbgJvAnACcQJyAnMCdAJ1AnYCdwJ4AnkCegJ7AnwCfQJ+An8CgAKBAoICgwKEAoUChgKHAogCiQKKAosCjAKNAo4CjwKQApECkgKTApQClQKWApcCmAKZApoCmwKcAp0CngKfAqACoQKiAqMCpAKlAqYAB2FjY291bnQUYWN0aXZhdGUtYnJlYWtwb2ludHMDYWRkB2FyY2hpdmUKYXJyb3ctYm90aBFhcnJvdy1jaXJjbGUtZG93bhFhcnJvdy1jaXJjbGUtbGVmdBJhcnJvdy1jaXJjbGUtcmlnaHQPYXJyb3ctY2lyY2xlLXVwCmFycm93LWRvd24KYXJyb3ctbGVmdAthcnJvdy1yaWdodBBhcnJvdy1zbWFsbC1kb3duEGFycm93LXNtYWxsLWxlZnQRYXJyb3ctc21hbGwtcmlnaHQOYXJyb3ctc21hbGwtdXAKYXJyb3ctc3dhcAhhcnJvdy11cAxhenVyZS1kZXZvcHMFYXp1cmULYmVha2VyLXN0b3AGYmVha2VyCGJlbGwtZG90DmJlbGwtc2xhc2gtZG90CmJlbGwtc2xhc2gEYmVsbAVibGFuawRib2xkBGJvb2sIYm9va21hcmsLYnJhY2tldC1kb3QNYnJhY2tldC1lcnJvcglicmllZmNhc2UJYnJvYWRjYXN0B2Jyb3dzZXIDYnVnCGNhbGVuZGFyDWNhbGwtaW5jb21pbmcNY2FsbC1vdXRnb2luZw5jYXNlLXNlbnNpdGl2ZQljaGVjay1hbGwFY2hlY2sJY2hlY2tsaXN0DGNoZXZyb24tZG93bgxjaGV2cm9uLWxlZnQNY2hldnJvbi1yaWdodApjaGV2cm9uLXVwDGNocm9tZS1jbG9zZQ9jaHJvbWUtbWF4aW1pemUPY2hyb21lLW1pbmltaXplDmNocm9tZS1yZXN0b3JlDWNpcmNsZS1maWxsZWQTY2lyY2xlLWxhcmdlLWZpbGxlZBRjaXJjbGUtbGFyZ2Utb3V0bGluZQ5jaXJjbGUtb3V0bGluZQxjaXJjbGUtc2xhc2gTY2lyY2xlLXNtYWxsLWZpbGxlZAxjaXJjbGUtc21hbGwNY2lyY3VpdC1ib2FyZAljbGVhci1hbGwGY2xpcHB5CWNsb3NlLWFsbAVjbG9zZQ5jbG91ZC1kb3dubG9hZAxjbG91ZC11cGxvYWQFY2xvdWQEY29kZQxjb2xsYXBzZS1hbGwKY29sb3ItbW9kZQdjb21iaW5lEmNvbW1lbnQtZGlzY3Vzc2lvbhJjb21tZW50LXVucmVzb2x2ZWQHY29tbWVudA5jb21wYXNzLWFjdGl2ZQtjb21wYXNzLWRvdAdjb21wYXNzBGNvcHkLY3JlZGl0LWNhcmQEZGFzaAlkYXNoYm9hcmQIZGF0YWJhc2UJZGVidWctYWxsD2RlYnVnLWFsdC1zbWFsbAlkZWJ1Zy1hbHQnZGVidWctYnJlYWtwb2ludC1jb25kaXRpb25hbC11bnZlcmlmaWVkHGRlYnVnLWJyZWFrcG9pbnQtY29uZGl0aW9uYWwgZGVidWctYnJlYWtwb2ludC1kYXRhLXVudmVyaWZpZWQVZGVidWctYnJlYWtwb2ludC1kYXRhJGRlYnVnLWJyZWFrcG9pbnQtZnVuY3Rpb24tdW52ZXJpZmllZBlkZWJ1Zy1icmVha3BvaW50LWZ1bmN0aW9uH2RlYnVnLWJyZWFrcG9pbnQtbG9nLXVudmVyaWZpZWQUZGVidWctYnJlYWtwb2ludC1sb2ccZGVidWctYnJlYWtwb2ludC11bnN1cHBvcnRlZA1kZWJ1Zy1jb25zb2xlFGRlYnVnLWNvbnRpbnVlLXNtYWxsDmRlYnVnLWNvbnRpbnVlDmRlYnVnLWNvdmVyYWdlEGRlYnVnLWRpc2Nvbm5lY3QSZGVidWctbGluZS1ieS1saW5lC2RlYnVnLXBhdXNlC2RlYnVnLXJlcnVuE2RlYnVnLXJlc3RhcnQtZnJhbWUNZGVidWctcmVzdGFydBZkZWJ1Zy1yZXZlcnNlLWNvbnRpbnVlF2RlYnVnLXN0YWNrZnJhbWUtYWN0aXZlEGRlYnVnLXN0YWNrZnJhbWULZGVidWctc3RhcnQPZGVidWctc3RlcC1iYWNrD2RlYnVnLXN0ZXAtaW50bw5kZWJ1Zy1zdGVwLW91dA9kZWJ1Zy1zdGVwLW92ZXIKZGVidWctc3RvcAVkZWJ1ZxBkZXNrdG9wLWRvd25sb2FkE2RldmljZS1jYW1lcmEtdmlkZW8NZGV2aWNlLWNhbWVyYQ1kZXZpY2UtbW9iaWxlCmRpZmYtYWRkZWQMZGlmZi1pZ25vcmVkDWRpZmYtbW9kaWZpZWQMZGlmZi1yZW1vdmVkDGRpZmYtcmVuYW1lZARkaWZmB2Rpc2NhcmQEZWRpdA1lZGl0b3ItbGF5b3V0CGVsbGlwc2lzDGVtcHR5LXdpbmRvdwtlcnJvci1zbWFsbAVlcnJvcgdleGNsdWRlCmV4cGFuZC1hbGwGZXhwb3J0CmV4dGVuc2lvbnMKZXllLWNsb3NlZANleWUIZmVlZGJhY2sLZmlsZS1iaW5hcnkJZmlsZS1jb2RlCmZpbGUtbWVkaWEIZmlsZS1wZGYOZmlsZS1zdWJtb2R1bGUWZmlsZS1zeW1saW5rLWRpcmVjdG9yeRFmaWxlLXN5bWxpbmstZmlsZQhmaWxlLXppcARmaWxlBWZpbGVzDWZpbHRlci1maWxsZWQGZmlsdGVyBWZsYW1lCWZvbGQtZG93bgdmb2xkLXVwBGZvbGQNZm9sZGVyLWFjdGl2ZQ5mb2xkZXItbGlicmFyeQ1mb2xkZXItb3BlbmVkBmZvbGRlcgRnZWFyBGdpZnQLZ2lzdC1zZWNyZXQKZ2l0LWNvbW1pdAtnaXQtY29tcGFyZQlnaXQtbWVyZ2UXZ2l0LXB1bGwtcmVxdWVzdC1jbG9zZWQXZ2l0LXB1bGwtcmVxdWVzdC1jcmVhdGUWZ2l0LXB1bGwtcmVxdWVzdC1kcmFmdB5naXQtcHVsbC1yZXF1ZXN0LWdvLXRvLWNoYW5nZXMcZ2l0LXB1bGwtcmVxdWVzdC1uZXctY2hhbmdlcxBnaXQtcHVsbC1yZXF1ZXN0DWdpdGh1Yi1hY3Rpb24KZ2l0aHViLWFsdA9naXRodWItaW52ZXJ0ZWQGZ2l0aHViBWdsb2JlCmdvLXRvLWZpbGUHZ3JhYmJlcgpncmFwaC1sZWZ0CmdyYXBoLWxpbmUNZ3JhcGgtc2NhdHRlcgVncmFwaAdncmlwcGVyEWdyb3VwLWJ5LXJlZi10eXBlDGhlYXJ0LWZpbGxlZAVoZWFydAdoaXN0b3J5BGhvbWUPaG9yaXpvbnRhbC1ydWxlBWh1Ym90BWluYm94BmluZGVudARpbmZvB2luc3BlY3QLaXNzdWUtZHJhZnQOaXNzdWUtcmVvcGVuZWQGaXNzdWVzBml0YWxpYwZqZXJzZXkEanNvbg5rZWJhYi12ZXJ0aWNhbANrZXkDbGF3DWxheWVycy1hY3RpdmUKbGF5ZXJzLWRvdAZsYXllcnMXbGF5b3V0LWFjdGl2aXR5YmFyLWxlZnQYbGF5b3V0LWFjdGl2aXR5YmFyLXJpZ2h0D2xheW91dC1jZW50ZXJlZA5sYXlvdXQtbWVudWJhchNsYXlvdXQtcGFuZWwtY2VudGVyFGxheW91dC1wYW5lbC1qdXN0aWZ5EWxheW91dC1wYW5lbC1sZWZ0EGxheW91dC1wYW5lbC1vZmYSbGF5b3V0LXBhbmVsLXJpZ2h0DGxheW91dC1wYW5lbBdsYXlvdXQtc2lkZWJhci1sZWZ0LW9mZhNsYXlvdXQtc2lkZWJhci1sZWZ0GGxheW91dC1zaWRlYmFyLXJpZ2h0LW9mZhRsYXlvdXQtc2lkZWJhci1yaWdodBBsYXlvdXQtc3RhdHVzYmFyBmxheW91dAdsaWJyYXJ5EWxpZ2h0YnVsYi1hdXRvZml4CWxpZ2h0YnVsYg1saW5rLWV4dGVybmFsBGxpbmsLbGlzdC1maWx0ZXIJbGlzdC1mbGF0DGxpc3Qtb3JkZXJlZA5saXN0LXNlbGVjdGlvbglsaXN0LXRyZWUObGlzdC11bm9yZGVyZWQKbGl2ZS1zaGFyZQdsb2FkaW5nCGxvY2F0aW9uCmxvY2stc21hbGwEbG9jawZtYWduZXQJbWFpbC1yZWFkBG1haWwKbWFwLWZpbGxlZANtYXAIbWFya2Rvd24JbWVnYXBob25lB21lbnRpb24EbWVudQVtZXJnZQltaWxlc3RvbmUGbWlycm9yDG1vcnRhci1ib2FyZARtb3ZlEG11bHRpcGxlLXdpbmRvd3MEbXV0ZQhuZXctZmlsZQpuZXctZm9sZGVyB25ld2xpbmUKbm8tbmV3bGluZQRub3RlEW5vdGVib29rLXRlbXBsYXRlCG5vdGVib29rCG9jdG9mYWNlDG9wZW4tcHJldmlldwxvcmdhbml6YXRpb24Gb3V0cHV0B3BhY2thZ2UIcGFpbnRjYW4LcGFzcy1maWxsZWQEcGFzcwpwZXJzb24tYWRkBnBlcnNvbglwaWUtY2hhcnQDcGluDHBpbm5lZC1kaXJ0eQZwaW5uZWQLcGxheS1jaXJjbGUEcGxheQRwbHVnDXByZXNlcnZlLWNhc2UHcHJldmlldxBwcmltaXRpdmUtc3F1YXJlB3Byb2plY3QFcHVsc2UIcXVlc3Rpb24FcXVvdGULcmFkaW8tdG93ZXIJcmVhY3Rpb25zC3JlY29yZC1rZXlzDHJlY29yZC1zbWFsbAZyZWNvcmQEcmVkbwpyZWZlcmVuY2VzB3JlZnJlc2gFcmVnZXgPcmVtb3RlLWV4cGxvcmVyBnJlbW90ZQZyZW1vdmULcmVwbGFjZS1hbGwHcmVwbGFjZQVyZXBseQpyZXBvLWNsb25lD3JlcG8tZm9yY2UtcHVzaAtyZXBvLWZvcmtlZAlyZXBvLXB1bGwJcmVwby1wdXNoBHJlcG8GcmVwb3J0D3JlcXVlc3QtY2hhbmdlcwZyb2NrZXQScm9vdC1mb2xkZXItb3BlbmVkC3Jvb3QtZm9sZGVyA3JzcwRydWJ5CXJ1bi1hYm92ZQdydW4tYWxsCXJ1bi1iZWxvdwpydW4tZXJyb3JzCHNhdmUtYWxsB3NhdmUtYXMEc2F2ZQtzY3JlZW4tZnVsbA1zY3JlZW4tbm9ybWFsC3NlYXJjaC1zdG9wBnNlYXJjaBJzZXJ2ZXItZW52aXJvbm1lbnQOc2VydmVyLXByb2Nlc3MGc2VydmVyDXNldHRpbmdzLWdlYXIIc2V0dGluZ3MGc2hpZWxkB3NpZ24taW4Ic2lnbi1vdXQGc21pbGV5D3NvcnQtcHJlY2VkZW5jZQ5zb3VyY2UtY29udHJvbBBzcGxpdC1ob3Jpem9udGFsDnNwbGl0LXZlcnRpY2FsCHNxdWlycmVsCnN0YXItZW1wdHkJc3Rhci1mdWxsCXN0YXItaGFsZgtzdG9wLWNpcmNsZQxzeW1ib2wtYXJyYXkOc3ltYm9sLWJvb2xlYW4Mc3ltYm9sLWNsYXNzDHN5bWJvbC1jb2xvcg9zeW1ib2wtY29uc3RhbnQSc3ltYm9sLWVudW0tbWVtYmVyC3N5bWJvbC1lbnVtDHN5bWJvbC1ldmVudAxzeW1ib2wtZmllbGQLc3ltYm9sLWZpbGUQc3ltYm9sLWludGVyZmFjZQpzeW1ib2wta2V5DnN5bWJvbC1rZXl3b3JkDXN5bWJvbC1tZXRob2QLc3ltYm9sLW1pc2MQc3ltYm9sLW5hbWVzcGFjZQ5zeW1ib2wtbnVtZXJpYw9zeW1ib2wtb3BlcmF0b3IQc3ltYm9sLXBhcmFtZXRlcg9zeW1ib2wtcHJvcGVydHkMc3ltYm9sLXJ1bGVyDnN5bWJvbC1zbmlwcGV0DXN5bWJvbC1zdHJpbmcQc3ltYm9sLXN0cnVjdHVyZQ9zeW1ib2wtdmFyaWFibGUMc3luYy1pZ25vcmVkBHN5bmMFdGFibGUDdGFnBnRhcmdldAh0YXNrbGlzdAl0ZWxlc2NvcGUNdGVybWluYWwtYmFzaAx0ZXJtaW5hbC1jbWQPdGVybWluYWwtZGViaWFuDnRlcm1pbmFsLWxpbnV4E3Rlcm1pbmFsLXBvd2Vyc2hlbGwNdGVybWluYWwtdG11eA90ZXJtaW5hbC11YnVudHUIdGVybWluYWwJdGV4dC1zaXplCnRocmVlLWJhcnMKdGh1bWJzZG93bgh0aHVtYnN1cAV0b29scwV0cmFzaA10cmlhbmdsZS1kb3duDXRyaWFuZ2xlLWxlZnQOdHJpYW5nbGUtcmlnaHQLdHJpYW5nbGUtdXAHdHdpdHRlchJ0eXBlLWhpZXJhcmNoeS1zdWIUdHlwZS1oaWVyYXJjaHktc3VwZXIOdHlwZS1oaWVyYXJjaHkGdW5mb2xkE3VuZ3JvdXAtYnktcmVmLXR5cGUGdW5sb2NrBnVubXV0ZQp1bnZlcmlmaWVkDnZhcmlhYmxlLWdyb3VwD3ZlcmlmaWVkLWZpbGxlZAh2ZXJpZmllZAh2ZXJzaW9ucwl2bS1hY3RpdmUKdm0tY29ubmVjdAp2bS1vdXRsaW5lCnZtLXJ1bm5pbmcCdm0Ed2FuZAd3YXJuaW5nBXdhdGNoCndoaXRlc3BhY2UKd2hvbGUtd29yZAZ3aW5kb3cJd29yZC13cmFwEXdvcmtzcGFjZS10cnVzdGVkEXdvcmtzcGFjZS11bmtub3duE3dvcmtzcGFjZS11bnRydXN0ZWQHem9vbS1pbgh6b29tLW91dAAA) format("truetype")}.codicon[class*=codicon-]{font:normal normal normal 16px/1 codicon;display:inline-block;text-decoration:none;text-rendering:auto;text-align:center;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;user-select:none;-webkit-user-select:none;-ms-user-select:none}.codicon-wrench-subaction{opacity:.5}@keyframes codicon-spin{to{transform:rotate(1turn)}}.codicon-gear.codicon-modifier-spin,.codicon-loading.codicon-modifier-spin,.codicon-notebook-state-executing.codicon-modifier-spin,.codicon-sync.codicon-modifier-spin{animation:codicon-spin 1.5s steps(30) infinite}.codicon-modifier-disabled{opacity:.4}.codicon-loading,.codicon-tree-item-loading:before{animation-duration:1s!important;animation-timing-function:cubic-bezier(.53,.21,.29,.67)!important}.context-view{position:absolute}.context-view.fixed{all:initial;font-family:inherit;font-size:13px;position:fixed;color:inherit}.monaco-count-badge{padding:3px 6px;border-radius:11px;font-size:11px;min-width:18px;min-height:18px;line-height:11px;font-weight:400;text-align:center;display:inline-block;box-sizing:border-box}.monaco-count-badge.long{padding:2px 3px;border-radius:2px;min-height:auto;line-height:normal}.monaco-dropdown{height:100%;padding:0}.monaco-dropdown>.dropdown-label{cursor:pointer;height:100%;display:flex;align-items:center;justify-content:center}.monaco-dropdown>.dropdown-label>.action-label.disabled{cursor:default}.monaco-dropdown-with-primary{display:flex!important;flex-direction:row;border-radius:5px}.monaco-dropdown-with-primary>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{font-size:12px;padding-left:0;padding-right:0;line-height:16px;margin-left:-3px}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{display:block;background-size:16px;background-position:50%;background-repeat:no-repeat}.monaco-findInput{position:relative}.monaco-findInput .monaco-inputbox{font-size:13px;width:100%}.monaco-findInput>.controls{position:absolute;top:3px;right:2px}.vs .monaco-findInput.disabled{background-color:#e1e1e1}.vs-dark .monaco-findInput.disabled{background-color:#333}.hc-light .monaco-findInput.highlight-0 .controls,.monaco-findInput.highlight-0 .controls{animation:monaco-findInput-highlight-0 .1s linear 0s}.hc-light .monaco-findInput.highlight-1 .controls,.monaco-findInput.highlight-1 .controls{animation:monaco-findInput-highlight-1 .1s linear 0s}.hc-black .monaco-findInput.highlight-0 .controls,.vs-dark .monaco-findInput.highlight-0 .controls{animation:monaco-findInput-highlight-dark-0 .1s linear 0s}.hc-black .monaco-findInput.highlight-1 .controls,.vs-dark .monaco-findInput.highlight-1 .controls{animation:monaco-findInput-highlight-dark-1 .1s linear 0s}@keyframes monaco-findInput-highlight-0{0%{background:rgba(253,255,0,.8)}to{background:transparent}}@keyframes monaco-findInput-highlight-1{0%{background:rgba(253,255,0,.8)}99%{background:transparent}}@keyframes monaco-findInput-highlight-dark-0{0%{background:hsla(0,0%,100%,.44)}to{background:transparent}}@keyframes monaco-findInput-highlight-dark-1{0%{background:hsla(0,0%,100%,.44)}99%{background:transparent}}.monaco-hover{cursor:default;position:absolute;overflow:hidden;z-index:50;user-select:text;-webkit-user-select:text;-ms-user-select:text;box-sizing:initial;animation:fadein .1s linear;line-height:1.5em}.monaco-hover.hidden{display:none}.monaco-hover a:hover{cursor:pointer}.monaco-hover .hover-contents:not(.html-hover-contents){padding:4px 8px}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents){max-width:500px;word-wrap:break-word}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents) hr{min-width:100%}.monaco-hover .code,.monaco-hover p,.monaco-hover ul{margin:8px 0}.monaco-hover code{font-family:var(--monaco-monospace-font)}.monaco-hover hr{box-sizing:border-box;border-left:0;border-right:0;margin:4px -8px -4px;height:1px}.monaco-hover .code:first-child,.monaco-hover p:first-child,.monaco-hover ul:first-child{margin-top:0}.monaco-hover .code:last-child,.monaco-hover p:last-child,.monaco-hover ul:last-child{margin-bottom:0}.monaco-hover ol,.monaco-hover ul{padding-left:20px}.monaco-hover li>p{margin-bottom:0}.monaco-hover li>ul{margin-top:0}.monaco-hover code{border-radius:3px;padding:0 .4em}.monaco-hover .monaco-tokenized-source{white-space:pre-wrap}.monaco-hover .hover-row.status-bar{font-size:12px;line-height:22px}.monaco-hover .hover-row.status-bar .actions{display:flex;padding:0 8px}.monaco-hover .hover-row.status-bar .actions .action-container{margin-right:16px;cursor:pointer}.monaco-hover .hover-row.status-bar .actions .action-container .action .icon{padding-right:4px}.monaco-hover .markdown-hover .hover-contents .codicon{color:inherit;font-size:inherit;vertical-align:middle}.monaco-hover .hover-contents a.code-link,.monaco-hover .hover-contents a.code-link:hover{color:inherit}.monaco-hover .hover-contents a.code-link:before{content:"("}.monaco-hover .hover-contents a.code-link:after{content:")"}.monaco-hover .hover-contents a.code-link>span{text-decoration:underline;border-bottom:1px solid transparent;text-underline-position:under}.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span{margin-bottom:4px;display:inline-block}.monaco-hover-content .action-container a{-webkit-user-select:none;user-select:none}.monaco-hover-content .action-container.disabled{pointer-events:none;opacity:.4;cursor:default}.monaco-icon-label{display:flex;overflow:hidden;text-overflow:ellipsis}.monaco-icon-label:before{background-size:16px;background-position:0;background-repeat:no-repeat;padding-right:6px;width:16px;height:22px;line-height:inherit!important;display:inline-block;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:top;flex-shrink:0}.monaco-icon-label>.monaco-icon-label-container{min-width:0;overflow:hidden;text-overflow:ellipsis;flex:1}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{color:inherit;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name>.label-separator{margin:0 2px;opacity:.5}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:.7;margin-left:.5em;font-size:.9em;white-space:pre}.monaco-icon-label.nowrap>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{white-space:nowrap}.vs .monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:.95}.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-description-container>.label-description,.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{font-style:italic}.monaco-icon-label.deprecated{text-decoration:line-through;opacity:.66}.monaco-icon-label.italic:after{font-style:italic}.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-description-container>.label-description,.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{text-decoration:line-through}.monaco-icon-label:after{opacity:.75;font-size:90%;font-weight:600;margin:auto 16px 0 5px;text-align:center}.monaco-list:focus .selected .monaco-icon-label,.monaco-list:focus .selected .monaco-icon-label:after{color:inherit!important}.monaco-list-row.focused.selected .label-description,.monaco-list-row.selected .label-description{opacity:.8}.monaco-inputbox{position:relative;display:block;padding:0;box-sizing:border-box;font-size:inherit}.monaco-inputbox.idle{border:1px solid transparent}.monaco-inputbox>.ibwrapper>.input,.monaco-inputbox>.ibwrapper>.mirror{padding:4px}.monaco-inputbox>.ibwrapper{position:relative;width:100%;height:100%}.monaco-inputbox>.ibwrapper>.input{display:inline-block;box-sizing:border-box;width:100%;height:100%;line-height:inherit;border:none;font-family:inherit;font-size:inherit;resize:none;color:inherit}.monaco-inputbox>.ibwrapper>input{text-overflow:ellipsis}.monaco-inputbox>.ibwrapper>textarea.input{display:block;-ms-overflow-style:none;scrollbar-width:none;outline:none}.monaco-inputbox>.ibwrapper>textarea.input::-webkit-scrollbar{display:none}.monaco-inputbox>.ibwrapper>textarea.input.empty{white-space:nowrap}.monaco-inputbox>.ibwrapper>.mirror{position:absolute;display:inline-block;width:100%;top:0;left:0;box-sizing:border-box;white-space:pre-wrap;visibility:hidden;word-wrap:break-word}.monaco-inputbox-container{text-align:right}.monaco-inputbox-container .monaco-inputbox-message{display:inline-block;overflow:hidden;text-align:left;width:100%;box-sizing:border-box;padding:.4em;font-size:12px;line-height:17px;margin-top:-1px;word-wrap:break-word}.monaco-inputbox .monaco-action-bar{position:absolute;right:2px;top:4px}.monaco-inputbox .monaco-action-bar .action-item{margin-left:2px}.monaco-inputbox .monaco-action-bar .action-item .codicon{background-repeat:no-repeat;width:16px;height:16px}.monaco-keybinding{display:flex;align-items:center;line-height:10px}.monaco-keybinding>.monaco-keybinding-key{display:inline-block;border-style:solid;border-width:1px;border-radius:3px;vertical-align:middle;font-size:11px;padding:3px 5px;margin:0 2px}.monaco-keybinding>.monaco-keybinding-key:first-child{margin-left:0}.monaco-keybinding>.monaco-keybinding-key:last-child{margin-right:0}.monaco-keybinding>.monaco-keybinding-key-separator{display:inline-block}.monaco-keybinding>.monaco-keybinding-key-chord-separator{width:6px}.monaco-list{position:relative;height:100%;width:100%;white-space:nowrap}.monaco-list.mouse-support{user-select:none;-webkit-user-select:none;-ms-user-select:none}.monaco-list>.monaco-scrollable-element{height:100%}.monaco-list-rows{position:relative;width:100%;height:100%}.monaco-list.horizontal-scrolling .monaco-list-rows{width:auto;min-width:100%}.monaco-list-row{position:absolute;box-sizing:border-box;overflow:hidden;width:100%}.monaco-list.mouse-support .monaco-list-row{cursor:pointer;touch-action:none}.monaco-list-row.scrolling{display:none!important}.monaco-list.element-focused,.monaco-list.selection-multiple,.monaco-list.selection-single{outline:0!important}.monaco-drag-image{display:inline-block;padding:1px 7px;border-radius:10px;font-size:12px;position:absolute;z-index:1000}.monaco-list-type-filter-message{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;padding:40px 1em 1em;text-align:center;white-space:normal;opacity:.7;pointer-events:none}.monaco-list-type-filter-message:empty{display:none}.monaco-mouse-cursor-text{cursor:text}.monaco-progress-container{width:100%;height:5px;overflow:hidden}.monaco-progress-container .progress-bit{width:2%;height:5px;position:absolute;left:0;display:none}.monaco-progress-container.active .progress-bit{display:inherit}.monaco-progress-container.discrete .progress-bit{left:0;transition:width .1s linear}.monaco-progress-container.discrete.done .progress-bit{width:100%}.monaco-progress-container.infinite .progress-bit{animation-name:progress;animation-duration:4s;animation-iteration-count:infinite;transform:translateZ(0);animation-timing-function:linear}.monaco-progress-container.infinite.infinite-long-running .progress-bit{animation-timing-function:steps(100)}@keyframes progress{0%{transform:translateX(0) scaleX(1)}50%{transform:translateX(2500%) scaleX(3)}to{transform:translateX(4900%) scaleX(1)}}:root{--sash-size:4px}.monaco-sash{position:absolute;z-index:35;touch-action:none}.monaco-sash.disabled{pointer-events:none}.monaco-sash.mac.vertical{cursor:col-resize}.monaco-sash.vertical.minimum{cursor:e-resize}.monaco-sash.vertical.maximum{cursor:w-resize}.monaco-sash.mac.horizontal{cursor:row-resize}.monaco-sash.horizontal.minimum{cursor:s-resize}.monaco-sash.horizontal.maximum{cursor:n-resize}.monaco-sash.disabled{cursor:default!important;pointer-events:none!important}.monaco-sash.vertical{cursor:ew-resize;top:0;width:var(--sash-size);height:100%}.monaco-sash.horizontal{cursor:ns-resize;left:0;width:100%;height:var(--sash-size)}.monaco-sash:not(.disabled)>.orthogonal-drag-handle{content:" ";height:calc(var(--sash-size)*2);width:calc(var(--sash-size)*2);z-index:100;display:block;cursor:all-scroll;position:absolute}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.start,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.end{cursor:nwse-resize}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.end,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.start{cursor:nesw-resize}.monaco-sash.vertical>.orthogonal-drag-handle.start{left:calc(var(--sash-size)*-0.5);top:calc(var(--sash-size)*-1)}.monaco-sash.vertical>.orthogonal-drag-handle.end{left:calc(var(--sash-size)*-0.5);bottom:calc(var(--sash-size)*-1)}.monaco-sash.horizontal>.orthogonal-drag-handle.start{top:calc(var(--sash-size)*-0.5);left:calc(var(--sash-size)*-1)}.monaco-sash.horizontal>.orthogonal-drag-handle.end{top:calc(var(--sash-size)*-0.5);right:calc(var(--sash-size)*-1)}.monaco-sash:before{content:"";pointer-events:none;position:absolute;width:100%;height:100%;transition:background-color .1s ease-out;background:transparent}.monaco-sash.vertical:before{width:var(--sash-hover-size);left:calc(50% - var(--sash-hover-size)/2)}.monaco-sash.horizontal:before{height:var(--sash-hover-size);top:calc(50% - var(--sash-hover-size)/2)}.pointer-events-disabled{pointer-events:none!important}.monaco-sash.debug{background:#0ff}.monaco-sash.debug.disabled{background:rgba(0,255,255,.2)}.monaco-sash.debug:not(.disabled)>.orthogonal-drag-handle{background:red}.monaco-scrollable-element>.scrollbar>.scra{cursor:pointer;font-size:11px!important}.monaco-scrollable-element>.visible{opacity:1;background:transparent;transition:opacity .1s linear}.monaco-scrollable-element>.invisible{opacity:0;pointer-events:none}.monaco-scrollable-element>.invisible.fade{transition:opacity .8s linear}.monaco-scrollable-element>.shadow{position:absolute;display:none}.monaco-scrollable-element>.shadow.top{display:block;top:0;left:3px;height:3px;width:100%}.monaco-scrollable-element>.shadow.left{display:block;top:3px;left:0;height:100%;width:3px}.monaco-scrollable-element>.shadow.top-left-corner{display:block;top:0;left:0;height:3px;width:3px}.monaco-split-view2{position:relative;width:100%;height:100%}.monaco-split-view2>.sash-container{position:absolute;width:100%;height:100%;pointer-events:none}.monaco-split-view2>.sash-container>.monaco-sash{pointer-events:auto}.monaco-split-view2>.monaco-scrollable-element{width:100%;height:100%}.monaco-split-view2>.monaco-scrollable-element>.split-view-container{width:100%;height:100%;white-space:nowrap;position:relative}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view{white-space:normal;position:absolute}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view:not(.visible){display:none}.monaco-split-view2.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view{width:100%}.monaco-split-view2.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view{height:100%}.monaco-split-view2.separator-border>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{content:" ";position:absolute;top:0;left:0;z-index:5;pointer-events:none;background-color:var(--separator-border)}.monaco-split-view2.separator-border.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{height:100%;width:1px}.monaco-split-view2.separator-border.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{height:1px;width:100%}.monaco-table{display:flex;flex-direction:column;position:relative;height:100%;width:100%;white-space:nowrap}.monaco-table>.monaco-split-view2{border-bottom:1px solid transparent}.monaco-table>.monaco-list{flex:1}.monaco-table-tr{display:flex;height:100%}.monaco-table-th{width:100%;height:100%;font-weight:700;overflow:hidden;text-overflow:ellipsis}.monaco-table-td,.monaco-table-th{box-sizing:border-box;flex-shrink:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{content:"";position:absolute;left:calc(var(--sash-size)/2);width:0;border-left:1px solid transparent}.monaco-table>.monaco-split-view2,.monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{transition:border-color .2s ease-out}.monaco-custom-toggle{margin-left:2px;float:left;cursor:pointer;overflow:hidden;width:20px;height:20px;border-radius:3px;border:1px solid transparent;padding:1px;box-sizing:border-box;user-select:none;-webkit-user-select:none;-ms-user-select:none}.monaco-custom-toggle:hover{background-color:var(--vscode-inputOption-hoverBackground)}.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle:hover{border:1px dashed var(--vscode-focusBorder)}.hc-black .monaco-custom-toggle,.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle,.hc-light .monaco-custom-toggle:hover{background:none}.monaco-custom-toggle.monaco-checkbox{height:18px;width:18px;border:1px solid transparent;border-radius:3px;margin-right:9px;margin-left:0;padding:0;opacity:1;background-size:16px!important}.monaco-custom-toggle.monaco-checkbox:not(.checked):before{visibility:hidden}.monaco-tl-row{display:flex;height:100%;align-items:center;position:relative}.monaco-tl-indent{height:100%;position:absolute;top:0;left:16px;pointer-events:none}.hide-arrows .monaco-tl-indent{left:12px}.monaco-tl-indent>.indent-guide{display:inline-block;box-sizing:border-box;height:100%;border-left:1px solid transparent;transition:border-color .1s linear}.monaco-tl-contents,.monaco-tl-twistie{height:100%}.monaco-tl-twistie{font-size:10px;text-align:right;padding-right:6px;flex-shrink:0;width:16px;display:flex!important;align-items:center;justify-content:center;transform:translateX(3px)}.monaco-tl-contents{flex:1;overflow:hidden}.monaco-tl-twistie:before{border-radius:20px}.monaco-tl-twistie.collapsed:before{transform:rotate(-90deg)}.monaco-tl-twistie.codicon-tree-item-loading:before{animation:codicon-spin 1.25s steps(30) infinite}.monaco-tree-type-filter{position:absolute;top:0;display:flex;padding:3px;transition:top .3s;max-width:200px;z-index:100;margin:0 6px}.monaco-tree-type-filter.disabled{top:-40px}.monaco-tree-type-filter-grab{display:flex!important;align-items:center;justify-content:center;cursor:grab;margin-right:2px}.monaco-tree-type-filter-grab.grabbing{cursor:grabbing}.monaco-tree-type-filter-input{flex:1}.monaco-tree-type-filter-input .monaco-inputbox{height:23px}.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.input,.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.mirror{padding:2px 4px}.monaco-tree-type-filter-input .monaco-findInput>.controls{top:2px}.monaco-tree-type-filter-actionbar{margin-left:4px}.monaco-tree-type-filter-actionbar .monaco-action-bar .action-label{padding:2px}.quick-input-widget{position:absolute;width:600px;z-index:2550;left:50%;margin-left:-300px;-webkit-app-region:no-drag}.quick-input-titlebar{display:flex;align-items:center}.quick-input-left-action-bar{display:flex;margin-left:4px;flex:1}.quick-input-title{padding:3px 0;text-align:center;text-overflow:ellipsis;overflow:hidden}.quick-input-right-action-bar{display:flex;margin-right:4px;flex:1}.quick-input-right-action-bar>.actions-container{justify-content:flex-end}.quick-input-titlebar .monaco-action-bar .action-label.codicon{background-position:50%;background-repeat:no-repeat;padding:2px}.quick-input-description{margin:6px}.quick-input-header .quick-input-description{margin:4px 2px}.quick-input-header{display:flex;padding:6px 6px 0;margin-bottom:-2px}.quick-input-widget.hidden-input .quick-input-header{padding:0;margin-bottom:0}.quick-input-and-message{display:flex;flex-direction:column;flex-grow:1;min-width:0;position:relative}.quick-input-check-all{align-self:center;margin:0}.quick-input-filter{flex-grow:1;display:flex;position:relative}.quick-input-box{flex-grow:1}.quick-input-widget.show-checkboxes .quick-input-box,.quick-input-widget.show-checkboxes .quick-input-message{margin-left:5px}.quick-input-visible-count{position:absolute;left:-10000px}.quick-input-count{align-self:center;position:absolute;right:4px;display:flex;align-items:center}.quick-input-count .monaco-count-badge{vertical-align:middle;padding:2px 4px;border-radius:2px;min-height:auto;line-height:normal}.quick-input-action{margin-left:6px}.quick-input-action .monaco-text-button{font-size:11px;padding:0 6px;display:flex;height:27.5px;align-items:center}.quick-input-message{margin-top:-1px;padding:5px;overflow-wrap:break-word}.quick-input-message>.codicon{margin:0 .2em;vertical-align:text-bottom}.quick-input-progress.monaco-progress-container{position:relative}.quick-input-progress.monaco-progress-container,.quick-input-progress.monaco-progress-container .progress-bit{height:2px}.quick-input-list{line-height:22px;margin-top:6px;padding:0 1px 1px}.quick-input-widget.hidden-input .quick-input-list{margin-top:0}.quick-input-list .monaco-list{overflow:hidden;max-height:440px}.quick-input-list .quick-input-list-entry{box-sizing:border-box;overflow:hidden;display:flex;height:100%;padding:0 6px}.quick-input-list .quick-input-list-entry.quick-input-list-separator-border{border-top-width:1px;border-top-style:solid}.quick-input-list .monaco-list-row[data-index="0"] .quick-input-list-entry.quick-input-list-separator-border{border-top-style:none}.quick-input-list .quick-input-list-label{overflow:hidden;display:flex;height:100%;flex:1}.quick-input-list .quick-input-list-checkbox{align-self:center;margin:0}.quick-input-list .quick-input-list-rows{overflow:hidden;text-overflow:ellipsis;display:flex;flex-direction:column;height:100%;flex:1;margin-left:5px}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-rows{margin-left:10px}.quick-input-widget .quick-input-list .quick-input-list-checkbox{display:none}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-checkbox{display:inline}.quick-input-list .quick-input-list-rows>.quick-input-list-row{display:flex;align-items:center}.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label,.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.quick-input-list .quick-input-list-rows>.quick-input-list-row .codicon[class*=codicon-]{vertical-align:text-bottom}.quick-input-list .quick-input-list-rows .monaco-highlighted-label span{opacity:1}.quick-input-list .quick-input-list-entry .quick-input-list-entry-keybinding{margin-right:8px}.quick-input-list .quick-input-list-label-meta{opacity:.7;line-height:normal;text-overflow:ellipsis;overflow:hidden}.quick-input-list .monaco-highlighted-label .highlight{font-weight:700}.quick-input-list .quick-input-list-entry .quick-input-list-separator{margin-right:8px}.quick-input-list .quick-input-list-entry-action-bar{display:flex;flex:0;overflow:visible}.quick-input-list .quick-input-list-entry-action-bar .action-label{display:none}.quick-input-list .quick-input-list-entry-action-bar .action-label.codicon{margin-right:4px;padding:0 2px 2px}.quick-input-list .quick-input-list-entry-action-bar{margin-top:1px;margin-right:4px}.quick-input-list .monaco-list-row.focused .quick-input-list-entry-action-bar .action-label,.quick-input-list .quick-input-list-entry .quick-input-list-entry-action-bar .action-label.always-visible,.quick-input-list .quick-input-list-entry:hover .quick-input-list-entry-action-bar .action-label{display:flex}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key,.quick-input-list .monaco-list-row.focused .quick-input-list-entry .quick-input-list-separator{color:inherit}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key{background:none}.monaco-editor .inputarea{min-width:0;min-height:0;margin:0;padding:0;position:absolute;outline:none!important;resize:none;border:none;overflow:hidden;color:transparent;background-color:transparent}.monaco-editor .inputarea.ime-input{z-index:10}.monaco-editor .blockDecorations-container{position:absolute;top:0}.monaco-editor .blockDecorations-block{position:absolute;box-sizing:border-box}.monaco-editor .margin-view-overlays .current-line,.monaco-editor .view-overlays .current-line{display:block;position:absolute;left:0;top:0;box-sizing:border-box}.monaco-editor .margin-view-overlays .current-line.current-line-margin.current-line-margin-both{border-right:0}.monaco-editor .lines-content .cdr{position:absolute}.monaco-editor .glyph-margin{position:absolute;top:0}.monaco-editor .margin-view-overlays .cgmr{position:absolute;display:flex;align-items:center;justify-content:center}.monaco-editor .lines-content .core-guide{position:absolute;box-sizing:border-box}.monaco-editor .margin-view-overlays .line-numbers{font-variant-numeric:tabular-nums;position:absolute;text-align:right;display:inline-block;vertical-align:middle;box-sizing:border-box;cursor:default;height:100%}.monaco-editor .relative-current-line-number{text-align:left;display:inline-block;width:100%}.monaco-editor .margin-view-overlays .line-numbers.lh-odd{margin-top:1px}.mtkcontrol{color:#fff!important;background:#960000!important}.monaco-editor.no-user-select .lines-content,.monaco-editor.no-user-select .view-line,.monaco-editor.no-user-select .view-lines{user-select:none;-webkit-user-select:none;-ms-user-select:none}.monaco-editor.enable-user-select{user-select:initial;-webkit-user-select:initial;-ms-user-select:initial}.monaco-editor .view-lines{white-space:nowrap}.monaco-editor .view-line{position:absolute;width:100%}.monaco-editor .mtkz{display:inline-block}.monaco-editor .lines-decorations{position:absolute;top:0;background:#fff}.monaco-editor .margin-view-overlays .cldr{position:absolute;height:100%}.monaco-editor .margin-view-overlays .cmdr{position:absolute;left:0;width:100%;height:100%}.monaco-editor .minimap.slider-mouseover .minimap-slider{opacity:0;transition:opacity .1s linear}.monaco-editor .minimap.slider-mouseover .minimap-slider.active,.monaco-editor .minimap.slider-mouseover:hover .minimap-slider{opacity:1}.monaco-editor .minimap-shadow-hidden{position:absolute;width:0}.monaco-editor .minimap-shadow-visible{position:absolute;left:-6px;width:6px}.monaco-editor.no-minimap-shadow .minimap-shadow-visible{position:absolute;left:-1px;width:1px}.minimap.autohide{opacity:0;transition:opacity .5s}.minimap.autohide:hover{opacity:1}.monaco-editor .overlayWidgets{position:absolute;top:0;left:0}.monaco-editor .view-ruler{position:absolute;top:0}.monaco-editor .scroll-decoration{position:absolute;top:0;left:0;height:6px}.monaco-editor .lines-content .cslr{position:absolute}.monaco-editor .top-left-radius{border-top-left-radius:3px}.monaco-editor .bottom-left-radius{border-bottom-left-radius:3px}.monaco-editor .top-right-radius{border-top-right-radius:3px}.monaco-editor .bottom-right-radius{border-bottom-right-radius:3px}.monaco-editor.hc-black .top-left-radius{border-top-left-radius:0}.monaco-editor.hc-black .bottom-left-radius{border-bottom-left-radius:0}.monaco-editor.hc-black .top-right-radius{border-top-right-radius:0}.monaco-editor.hc-black .bottom-right-radius{border-bottom-right-radius:0}.monaco-editor.hc-light .top-left-radius{border-top-left-radius:0}.monaco-editor.hc-light .bottom-left-radius{border-bottom-left-radius:0}.monaco-editor.hc-light .top-right-radius{border-top-right-radius:0}.monaco-editor.hc-light .bottom-right-radius{border-bottom-right-radius:0}.monaco-editor .cursors-layer{position:absolute;top:0}.monaco-editor .cursors-layer>.cursor{position:absolute;overflow:hidden}.monaco-editor .cursors-layer.cursor-smooth-caret-animation>.cursor{transition:all 80ms}.monaco-editor .cursors-layer.cursor-block-outline-style>.cursor{box-sizing:border-box;background:transparent!important;border-style:solid;border-width:1px}.monaco-editor .cursors-layer.cursor-underline-style>.cursor{border-bottom-width:2px;border-bottom-style:solid;background:transparent!important;box-sizing:border-box}.monaco-editor .cursors-layer.cursor-underline-thin-style>.cursor{border-bottom-width:1px;border-bottom-style:solid;background:transparent!important;box-sizing:border-box}@keyframes monaco-cursor-smooth{0%,20%{opacity:1}60%,to{opacity:0}}@keyframes monaco-cursor-phase{0%,20%{opacity:1}90%,to{opacity:0}}@keyframes monaco-cursor-expand{0%,20%{transform:scaleY(1)}80%,to{transform:scaleY(0)}}.cursor-smooth{animation:monaco-cursor-smooth .5s ease-in-out 0s 20 alternate}.cursor-phase{animation:monaco-cursor-phase .5s ease-in-out 0s 20 alternate}.cursor-expand>.cursor{animation:monaco-cursor-expand .5s ease-in-out 0s 20 alternate}.monaco-diff-editor .diffOverview{z-index:9}.monaco-diff-editor .diffOverview .diffViewport{z-index:10}.monaco-diff-editor.vs .diffOverview{background:rgba(0,0,0,.03)}.monaco-diff-editor.vs-dark .diffOverview{background:hsla(0,0%,100%,.01)}.monaco-scrollable-element.modified-in-monaco-diff-editor.vs-dark .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.vs .scrollbar{background:transparent}.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-black .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-light .scrollbar{background:none}.monaco-scrollable-element.modified-in-monaco-diff-editor .slider{z-index:10}.modified-in-monaco-diff-editor .slider.active{background:hsla(0,0%,67.1%,.4)}.modified-in-monaco-diff-editor.hc-black .slider.active,.modified-in-monaco-diff-editor.hc-light .slider.active{background:none}.monaco-diff-editor .delete-sign,.monaco-diff-editor .insert-sign,.monaco-editor .delete-sign,.monaco-editor .insert-sign{font-size:11px!important;opacity:.7!important;display:flex!important;align-items:center}.monaco-diff-editor.hc-black .delete-sign,.monaco-diff-editor.hc-black .insert-sign,.monaco-diff-editor.hc-light .delete-sign,.monaco-diff-editor.hc-light .insert-sign,.monaco-editor.hc-black .delete-sign,.monaco-editor.hc-black .insert-sign,.monaco-editor.hc-light .delete-sign,.monaco-editor.hc-light .insert-sign{opacity:1}.monaco-editor .inline-added-margin-view-zone,.monaco-editor .inline-deleted-margin-view-zone{text-align:right}.monaco-editor .arrow-revert-change{z-index:10;position:absolute}.monaco-editor .arrow-revert-change:hover{cursor:pointer}.monaco-editor .view-zones .view-lines .view-line span{display:inline-block}.monaco-editor .margin-view-zones .lightbulb-glyph:hover{cursor:pointer}.monaco-diff-editor .diff-review-line-number{text-align:right;display:inline-block}.monaco-diff-editor .diff-review{position:absolute;user-select:none;-webkit-user-select:none;-ms-user-select:none}.monaco-diff-editor .diff-review-summary{padding-left:10px}.monaco-diff-editor .diff-review-shadow{position:absolute}.monaco-diff-editor .diff-review-row{white-space:pre}.monaco-diff-editor .diff-review-table{display:table;min-width:100%}.monaco-diff-editor .diff-review-row{display:table-row;width:100%}.monaco-diff-editor .diff-review-spacer{display:inline-block;width:10px;vertical-align:middle}.monaco-diff-editor .diff-review-spacer>.codicon{font-size:9px!important}.monaco-diff-editor .diff-review-actions{display:inline-block;position:absolute;right:10px;top:2px}.monaco-diff-editor .diff-review-actions .action-label{width:16px;height:16px;margin:2px 0}::-ms-clear{display:none}.monaco-editor .editor-widget input{color:inherit}.monaco-editor{position:relative;overflow:visible;-webkit-text-size-adjust:100%}.monaco-editor .overflow-guard{position:relative;overflow:hidden}.monaco-editor .view-overlays{position:absolute;top:0}.monaco-editor .selection-anchor{background-color:#007acc;width:2px!important}.monaco-editor .bracket-match{box-sizing:border-box}.monaco-editor .contentWidgets .codicon-light-bulb,.monaco-editor .contentWidgets .codicon-lightbulb-autofix{display:flex;align-items:center;justify-content:center}.monaco-editor .contentWidgets .codicon-light-bulb:hover,.monaco-editor .contentWidgets .codicon-lightbulb-autofix:hover{cursor:pointer}.codeActionMenuWidget{padding:8px 0;overflow:auto;font-size:13px;border-radius:5px;min-width:160px;z-index:40;display:block;width:100%;border-width:0;border-color:none;background-color:var(--vscode-menu-background);color:var(--vscode-menu-foreground);box-shadow:0 2px 8px rgb(0,0,0,16%)}.codeActionMenuWidget .monaco-list:not(.element-focused):focus:before{position:absolute;top:0;left:0;width:100%;height:100%;z-index:5;content:"";pointer-events:none;outline:0 solid!important;outline-width:0!important;outline-style:none!important;outline-offset:0!important}.codeActionMenuWidget .monaco-list{user-select:none;-webkit-user-select:none;-ms-user-select:none;border:0!important}.codeActionMenuWidget .monaco-list .monaco-scrollable-element .monaco-list-rows{height:100%!important}.codeActionMenuWidget .monaco-list .monaco-scrollable-element{overflow:visible}.codeActionMenuWidget .monaco-list .monaco-list-row:not(.separator){display:flex;-mox-box-sizing:border-box;box-sizing:border-box;padding:0 26px;background-repeat:no-repeat;background-position:2px 2px;white-space:nowrap;cursor:pointer;touch-action:none;width:100%}.codeActionMenuWidget .monaco-list .monaco-list-row:hover:not(.option-disabled),.codeActionMenuWidget .monaco-list .moncao-list-row.focused:not(.option-disabled){color:var(--vscode-menu-selectionForeground)!important;background-color:var(--vscode-menu-selectionBackground)!important}.codeActionMenuWidget .monaco-list .option-disabled,.codeActionMenuWidget .monaco-list .option-disabled .focused{pointer-events:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--vscode-disabledForeground)!important}.codeActionMenuWidget .monaco-list .separator{border-bottom:1px solid var(--vscode-menu-separatorBackground);padding-top:0!important;width:100%;height:0!important;opacity:1;font-size:inherit;margin:5px 0!important;border-radius:0;display:flex;-mox-box-sizing:border-box;box-sizing:border-box;background-repeat:no-repeat;background-position:2px 2px;white-space:nowrap;cursor:pointer;touch-action:none}.monaco-editor .codelens-decoration{overflow:hidden;display:inline-block;text-overflow:ellipsis;white-space:nowrap;color:var(--vscode-editorCodeLens-foreground)}.monaco-editor .codelens-decoration>a,.monaco-editor .codelens-decoration>span{user-select:none;-webkit-user-select:none;-ms-user-select:none;white-space:nowrap;vertical-align:sub}.monaco-editor .codelens-decoration>a{text-decoration:none}.monaco-editor .codelens-decoration>a:hover{cursor:pointer}.monaco-editor .codelens-decoration>a:hover,.monaco-editor .codelens-decoration>a:hover .codicon{color:var(--vscode-editorLink-activeForeground)!important}.monaco-editor .codelens-decoration .codicon{vertical-align:middle;color:currentColor!important;color:var(--vscode-editorCodeLens-foreground)}.monaco-editor .codelens-decoration>a:hover .codicon:before{cursor:pointer}@keyframes fadein{0%{opacity:0;visibility:visible}to{opacity:1}}.monaco-editor .codelens-decoration.fadein{animation:fadein .1s linear}.colorpicker-widget{height:190px;user-select:none;-webkit-user-select:none;-ms-user-select:none}.colorpicker-color-decoration,.hc-light .colorpicker-color-decoration{border:.1em solid #000;box-sizing:border-box;margin:.1em .2em 0;width:.8em;height:.8em;line-height:.8em;display:inline-block;cursor:pointer}.hc-black .colorpicker-color-decoration,.vs-dark .colorpicker-color-decoration{border:.1em solid #eee}.colorpicker-header{display:flex;height:24px;position:relative;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=);background-size:9px 9px;image-rendering:pixelated}.colorpicker-header .picked-color{width:216px;display:flex;align-items:center;justify-content:center;line-height:24px;cursor:pointer;color:#fff;flex:1}.colorpicker-header .picked-color .codicon{color:inherit;font-size:14px;position:absolute;left:8px}.colorpicker-header .picked-color.light{color:#000}.colorpicker-header .original-color{width:74px;z-index:inherit;cursor:pointer}.colorpicker-body{display:flex;padding:8px;position:relative}.colorpicker-body .saturation-wrap{overflow:hidden;height:150px;position:relative;min-width:220px;flex:1}.colorpicker-body .saturation-box{height:150px;position:absolute}.colorpicker-body .saturation-selection{width:9px;height:9px;margin:-5px 0 0 -5px;border:1px solid #fff;border-radius:100%;box-shadow:0 0 2px rgba(0,0,0,.8);position:absolute}.colorpicker-body .strip{width:25px;height:150px}.colorpicker-body .hue-strip{position:relative;margin-left:8px;cursor:grab;background:linear-gradient(180deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.colorpicker-body .opacity-strip{position:relative;margin-left:8px;cursor:grab;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=);background-size:9px 9px;image-rendering:pixelated}.colorpicker-body .strip.grabbing{cursor:grabbing}.colorpicker-body .slider{position:absolute;top:0;left:-2px;width:calc(100% + 4px);height:4px;box-sizing:border-box;border:1px solid hsla(0,0%,100%,.71);box-shadow:0 0 1px rgba(0,0,0,.85)}.colorpicker-body .strip .overlay{height:150px;pointer-events:none}.monaco-editor.hc-light .dnd-target,.monaco-editor.vs .dnd-target{border-right:2px dotted #000;color:#fff}.monaco-editor.vs-dark .dnd-target{border-right:2px dotted #aeafad;color:#51504f}.monaco-editor.hc-black .dnd-target{border-right:2px dotted #fff;color:#000}.monaco-editor.hc-black.mac.mouse-default .view-lines,.monaco-editor.hc-light.mac.mouse-default .view-lines,.monaco-editor.mouse-default .view-lines,.monaco-editor.vs-dark.mac.mouse-default .view-lines{cursor:default}.monaco-editor.hc-black.mac.mouse-copy .view-lines,.monaco-editor.hc-light.mac.mouse-copy .view-lines,.monaco-editor.mouse-copy .view-lines,.monaco-editor.vs-dark.mac.mouse-copy .view-lines{cursor:copy}.monaco-editor .find-widget{position:absolute;z-index:35;height:33px;overflow:hidden;line-height:19px;transition:transform .2s linear;padding:0 4px;box-sizing:border-box;transform:translateY(calc(-100% - 10px))}.monaco-workbench.reduce-motion .monaco-editor .find-widget{transition:transform 0ms linear}.monaco-editor .find-widget textarea{margin:0}.monaco-editor .find-widget.hiddenEditor{display:none}.monaco-editor .find-widget.replaceToggled>.replace-part{display:flex}.monaco-editor .find-widget.visible{transform:translateY(0)}.monaco-editor .find-widget .monaco-inputbox.synthetic-focus{outline:1px solid -webkit-focus-ring-color;outline-offset:-1px}.monaco-editor .find-widget .monaco-inputbox .input{background-color:transparent;min-height:0}.monaco-editor .find-widget .monaco-findInput .input{font-size:13px}.monaco-editor .find-widget>.find-part,.monaco-editor .find-widget>.replace-part{margin:4px 0 0 17px;font-size:12px;display:flex}.monaco-editor .find-widget>.find-part .monaco-inputbox,.monaco-editor .find-widget>.replace-part .monaco-inputbox{min-height:25px}.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.mirror{padding-right:22px}.monaco-editor .find-widget>.find-part .monaco-inputbox>.ibwrapper>.input,.monaco-editor .find-widget>.find-part .monaco-inputbox>.ibwrapper>.mirror,.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.input,.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.mirror{padding-top:2px;padding-bottom:2px}.monaco-editor .find-widget>.find-part .find-actions,.monaco-editor .find-widget>.replace-part .replace-actions{height:25px;display:flex;align-items:center}.monaco-editor .find-widget .monaco-findInput{vertical-align:middle;display:flex;flex:1}.monaco-editor .find-widget .monaco-findInput .monaco-scrollable-element{width:100%}.monaco-editor .find-widget .monaco-findInput .monaco-scrollable-element .scrollbar.vertical{opacity:0}.monaco-editor .find-widget .matchesCount{display:flex;flex:initial;margin:0 0 0 3px;padding:2px 0 0 2px;height:25px;vertical-align:middle;box-sizing:border-box;text-align:center;line-height:23px}.monaco-editor .find-widget .button{width:16px;height:16px;padding:3px;border-radius:5px;flex:initial;margin-left:3px;background-position:50%;background-repeat:no-repeat;cursor:pointer;display:flex;align-items:center;justify-content:center}.monaco-editor .find-widget .codicon-find-selection{width:22px;height:22px;padding:3px;border-radius:5px}.monaco-editor .find-widget .button.left{margin-left:0;margin-right:3px}.monaco-editor .find-widget .button.wide{width:auto;padding:1px 6px;top:-1px}.monaco-editor .find-widget .button.toggle{position:absolute;top:0;left:3px;width:18px;height:100%;border-radius:0;box-sizing:border-box}.monaco-editor .find-widget .button.toggle.disabled{display:none}.monaco-editor .find-widget .disabled{color:var(--vscode-disabledForeground);cursor:default}.monaco-editor .find-widget>.replace-part{display:none}.monaco-editor .find-widget>.replace-part>.monaco-findInput{position:relative;display:flex;vertical-align:middle;flex:auto;flex-grow:0;flex-shrink:0}.monaco-editor .find-widget>.replace-part>.monaco-findInput>.controls{position:absolute;top:3px;right:2px}.monaco-editor .find-widget.reduced-find-widget .matchesCount{display:none}.monaco-editor .find-widget.narrow-find-widget{max-width:257px!important}.monaco-editor .find-widget.collapsed-find-widget{max-width:170px!important}.monaco-editor .find-widget.collapsed-find-widget .button.next,.monaco-editor .find-widget.collapsed-find-widget .button.previous,.monaco-editor .find-widget.collapsed-find-widget .button.replace,.monaco-editor .find-widget.collapsed-find-widget .button.replace-all,.monaco-editor .find-widget.collapsed-find-widget>.find-part .monaco-findInput .controls{display:none}.monaco-editor .findMatch{animation-duration:0;animation-name:inherit!important}.monaco-editor .find-widget .monaco-sash{left:0!important}.monaco-editor.hc-black .find-widget .button:before{position:relative;top:1px;left:2px}.monaco-editor .margin-view-overlays .codicon-folding-collapsed,.monaco-editor .margin-view-overlays .codicon-folding-expanded,.monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,.monaco-editor .margin-view-overlays .codicon-folding-manual-expanded{cursor:pointer;opacity:0;transition:opacity .5s;display:flex;align-items:center;justify-content:center;font-size:140%;margin-left:2px}.monaco-editor .margin-view-overlays .codicon.alwaysShowFoldIcons,.monaco-editor .margin-view-overlays .codicon.codicon-folding-collapsed,.monaco-editor .margin-view-overlays .codicon.codicon-folding-manual-collapsed,.monaco-editor .margin-view-overlays:hover .codicon{opacity:1}.monaco-editor .inline-folded:after{color:grey;margin:.1em .2em 0;content:"\u22EF";display:inline;line-height:1em;cursor:pointer}.monaco-editor .peekview-widget .head .peekview-title .severity-icon{display:inline-block;vertical-align:text-top;margin-right:4px}.monaco-editor .marker-widget{text-overflow:ellipsis;white-space:nowrap}.monaco-editor .marker-widget>.stale{opacity:.6;font-style:italic}.monaco-editor .marker-widget .title{display:inline-block;padding-right:5px}.monaco-editor .marker-widget .descriptioncontainer{position:absolute;white-space:pre;user-select:text;-webkit-user-select:text;-ms-user-select:text;padding:8px 12px 0 20px}.monaco-editor .marker-widget .descriptioncontainer .message{display:flex;flex-direction:column}.monaco-editor .marker-widget .descriptioncontainer .message .details{padding-left:6px}.monaco-editor .marker-widget .descriptioncontainer .message .source,.monaco-editor .marker-widget .descriptioncontainer .message span.code{opacity:.6}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link{opacity:.6;color:inherit}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:before{content:"("}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:after{content:")"}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link>span{text-decoration:underline;border-bottom:1px solid transparent;text-underline-position:under;color:var(--vscode-textLink-foreground);color:var(--vscode-textLink-activeForeground)}.monaco-editor .marker-widget .descriptioncontainer .filename{cursor:pointer}.monaco-editor .goto-definition-link{text-decoration:underline;cursor:pointer}.monaco-editor .zone-widget .zone-widget-container.reference-zone-widget{border-top-width:1px;border-bottom-width:1px}.monaco-editor .reference-zone-widget .inline{display:inline-block;vertical-align:top}.monaco-editor .reference-zone-widget .messages{height:100%;width:100%;text-align:center;padding:3em 0}.monaco-editor .reference-zone-widget .ref-tree{line-height:23px;background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-lineForeground)}.monaco-editor .reference-zone-widget .ref-tree .reference{text-overflow:ellipsis;overflow:hidden}.monaco-editor .reference-zone-widget .ref-tree .reference-file{display:inline-flex;width:100%;height:100%;color:var(--vscode-peekViewResult-fileForeground)}.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .selected .reference-file{color:inherit!important}.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-editor .reference-zone-widget .ref-tree .reference-file .count{margin-right:12px;margin-left:auto}.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight{background-color:var(--vscode-peekViewResult-matchHighlightBackground)}.monaco-editor .reference-zone-widget .preview .reference-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input,.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .reference-zone-widget .preview .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}.monaco-editor.hc-black .reference-zone-widget .ref-tree .reference-file,.monaco-editor.hc-light .reference-zone-widget .ref-tree .reference-file{font-weight:700}.monaco-editor.hc-black .reference-zone-widget .ref-tree .referenceMatch .highlight,.monaco-editor.hc-light .reference-zone-widget .ref-tree .referenceMatch .highlight{border:1px dotted var(--vscode-contrastActiveBorder,transparent);box-sizing:border-box}.monaco-editor .suggest-preview-additional-widget{white-space:nowrap}.monaco-editor .suggest-preview-additional-widget .content-spacer{color:transparent;white-space:pre}.monaco-editor .suggest-preview-additional-widget .button{display:inline-block;cursor:pointer;text-decoration:underline;text-underline-position:under}.monaco-editor .ghost-text-hidden{opacity:0;font-size:0}.monaco-editor .ghost-text-decoration,.monaco-editor .suggest-preview-text{font-style:italic}.monaco-editor .detected-link,.monaco-editor .detected-link-active,.monaco-editor .inline-completion-text-to-replace{text-decoration:underline;text-underline-position:under}.monaco-editor .detected-link-active{cursor:pointer}.monaco-editor .monaco-editor-overlaymessage{padding-bottom:8px;z-index:10000}.monaco-editor .monaco-editor-overlaymessage.below{padding-bottom:0;padding-top:8px;z-index:10000}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.monaco-editor .monaco-editor-overlaymessage.fadeIn{animation:fadeIn .15s ease-out}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.monaco-editor .monaco-editor-overlaymessage.fadeOut{animation:fadeOut .1s ease-out}.monaco-editor .monaco-editor-overlaymessage .message{padding:1px 4px;color:var(--vscode-inputValidation-infoForeground);background-color:var(--vscode-inputValidation-infoBackground);border:1px solid var(--vscode-inputValidation-infoBorder)}.monaco-editor.hc-black .monaco-editor-overlaymessage .message,.monaco-editor.hc-light .monaco-editor-overlaymessage .message{border-width:2px}.monaco-editor .monaco-editor-overlaymessage .anchor{width:0!important;height:0!important;z-index:1000;border:8px solid transparent;position:absolute}.monaco-editor .monaco-editor-overlaymessage .anchor.top{border-bottom-color:var(--vscode-inputValidation-infoBorder)}.monaco-editor .monaco-editor-overlaymessage .anchor.below{border-top-color:var(--vscode-inputValidation-infoBorder)}.monaco-editor .monaco-editor-overlaymessage.below .anchor.below,.monaco-editor .monaco-editor-overlaymessage:not(.below) .anchor.top{display:none}.monaco-editor .monaco-editor-overlaymessage.below .anchor.top{display:inherit;top:-8px}.monaco-editor .parameter-hints-widget{z-index:39;display:flex;flex-direction:column;line-height:1.5em;cursor:default}.monaco-editor .parameter-hints-widget>.phwrapper{max-width:440px;display:flex;flex-direction:row}.monaco-editor .parameter-hints-widget.multiple{min-height:3.3em;padding:0}.monaco-editor .parameter-hints-widget.visible{transition:left .05s ease-in-out}.monaco-editor .parameter-hints-widget p,.monaco-editor .parameter-hints-widget ul{margin:8px 0}.monaco-editor .parameter-hints-widget .body,.monaco-editor .parameter-hints-widget .monaco-scrollable-element{display:flex;flex:1;flex-direction:column;min-height:100%}.monaco-editor .parameter-hints-widget .signature{padding:4px 5px}.monaco-editor .parameter-hints-widget .docs{padding:0 10px 0 5px;white-space:pre-wrap}.monaco-editor .parameter-hints-widget .docs.empty{display:none}.monaco-editor .parameter-hints-widget .docs .markdown-docs{white-space:normal}.monaco-editor .parameter-hints-widget .docs .markdown-docs a:hover{cursor:pointer}.monaco-editor .parameter-hints-widget .docs .markdown-docs code{font-family:var(--monaco-monospace-font)}.monaco-editor .parameter-hints-widget .docs .code,.monaco-editor .parameter-hints-widget .docs .monaco-tokenized-source{white-space:pre-wrap}.monaco-editor .parameter-hints-widget .docs code{border-radius:3px;padding:0 .4em}.monaco-editor .parameter-hints-widget .controls{display:none;flex-direction:column;align-items:center;min-width:22px;justify-content:flex-end}.monaco-editor .parameter-hints-widget.multiple .controls{display:flex;padding:0 2px}.monaco-editor .parameter-hints-widget.multiple .button{width:16px;height:16px;background-repeat:no-repeat;cursor:pointer}.monaco-editor .parameter-hints-widget .button.previous{bottom:24px}.monaco-editor .parameter-hints-widget .overloads{text-align:center;height:12px;line-height:12px;font-family:var(--monaco-monospace-font)}.monaco-editor .parameter-hints-widget .signature .parameter.active{font-weight:700}.monaco-editor .parameter-hints-widget .documentation-parameter>.parameter{font-weight:700;margin-right:.5em}.monaco-editor .peekview-widget .head{box-sizing:border-box;display:flex;justify-content:space-between;flex-wrap:nowrap}.monaco-editor .peekview-widget .head .peekview-title{display:flex;align-items:center;font-size:13px;margin-left:20px;min-width:0;text-overflow:ellipsis;overflow:hidden}.monaco-editor .peekview-widget .head .peekview-title.clickable{cursor:pointer}.monaco-editor .peekview-widget .head .peekview-title .dirname:not(:empty){font-size:.9em;margin-left:.5em;text-overflow:ellipsis;overflow:hidden}.monaco-editor .peekview-widget .head .peekview-title .meta{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.monaco-editor .peekview-widget .head .peekview-title .dirname{white-space:nowrap}.monaco-editor .peekview-widget .head .peekview-title .filename{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-editor .peekview-widget .head .peekview-title .meta:not(:empty):before{content:"-";padding:0 .3em}.monaco-editor .peekview-widget .head .peekview-actions{flex:1;text-align:right;padding-right:2px}.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar{display:inline-block}.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar,.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar>.actions-container{height:100%}.monaco-editor .peekview-widget>.body{border-top:1px solid;position:relative}.monaco-editor .peekview-widget .head .peekview-title .codicon{margin-right:4px}.monaco-editor .peekview-widget .monaco-list .monaco-list-row.focused .codicon{color:inherit!important}.monaco-editor .rename-box{z-index:100;color:inherit}.monaco-editor .rename-box.preview{padding:3px 3px 0}.monaco-editor .rename-box .rename-input{padding:3px;width:calc(100% - 6px)}.monaco-editor .rename-box .rename-label{display:none;opacity:.8}.monaco-editor .rename-box.preview .rename-label{display:inherit}.monaco-editor .snippet-placeholder{min-width:2px;outline-style:solid;outline-width:1px;background-color:var(--vscode-editor-snippetTabstopHighlightBackground,transparent);outline-color:var(--vscode-editor-snippetTabstopHighlightBorder,transparent)}.monaco-editor .finish-snippet-placeholder{outline-style:solid;outline-width:1px;background-color:var(--vscode-editor-snippetFinalTabstopHighlightBackground,transparent);outline-color:var(--vscode-editor-snippetFinalTabstopHighlightBorder,transparent)}.monaco-editor .suggest-widget{width:430px;z-index:40;display:flex;flex-direction:column}.monaco-editor .suggest-widget.message{flex-direction:row;align-items:center}.monaco-editor .suggest-details,.monaco-editor .suggest-widget{flex:0 1 auto;width:100%;border:1px solid var(--vscode-editorSuggestWidget-border);background-color:var(--vscode-editorSuggestWidget-background)}.monaco-editor.hc-black .suggest-details,.monaco-editor.hc-black .suggest-widget,.monaco-editor.hc-light .suggest-details,.monaco-editor.hc-light .suggest-widget{border-width:2px}.monaco-editor .suggest-widget .suggest-status-bar{box-sizing:border-box;display:none;flex-flow:row nowrap;justify-content:space-between;width:100%;font-size:80%;padding:0 4px;border-top:1px solid var(--vscode-editorSuggestWidget-border);overflow:hidden}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar{display:flex}.monaco-editor .suggest-widget .suggest-status-bar .left{padding-right:8px}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-label{color:var(--vscode-editorSuggestWidgetStatus-foreground)}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label{margin-right:0}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label:after{content:", ";margin-right:.3em}.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore,.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{display:none}.monaco-editor .suggest-widget.with-status-bar:not(.docs-side) .monaco-list .monaco-list-row:hover>.contents>.main>.right.can-expand-details>.details-label{width:100%}.monaco-editor .suggest-widget>.message{padding-left:22px}.monaco-editor .suggest-widget>.tree{height:100%;width:100%}.monaco-editor .suggest-widget .monaco-list{user-select:none;-webkit-user-select:none;-ms-user-select:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row{display:flex;-mox-box-sizing:border-box;box-sizing:border-box;padding-right:10px;background-repeat:no-repeat;background-position:2px 2px;white-space:nowrap;cursor:pointer;touch-action:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused{color:var(--vscode-editorSuggestWidget-selectedForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon{color:var(--vscode-editorSuggestWidget-selectedIconForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents{flex:1;height:100%;overflow:hidden;padding-left:2px}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main{display:flex;overflow:hidden;text-overflow:ellipsis;white-space:pre;justify-content:space-between}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right{display:flex}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.focused)>.contents>.main .monaco-icon-label{color:var(--vscode-editorSuggestWidget-foreground)}.monaco-editor .suggest-widget:not(.frozen) .monaco-highlighted-label .highlight{font-weight:700}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main .monaco-highlighted-label .highlight{color:var(--vscode-editorSuggestWidget-highlightForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused>.contents>.main .monaco-highlighted-label .highlight{color:var(--vscode-editorSuggestWidget-focusHighlightForeground)}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:before{color:inherit;opacity:1;font-size:14px;cursor:pointer}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close{position:absolute;top:6px;right:2px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close:hover,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:hover{opacity:1}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{opacity:.7}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.signature-label{overflow:hidden;text-overflow:ellipsis;opacity:.6}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.qualifier-label{margin-left:12px;opacity:.4;font-size:85%;line-height:normal;text-overflow:ellipsis;overflow:hidden;align-self:center}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{font-size:85%;margin-left:1.1em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label>.monaco-tokenized-source{display:inline}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{display:none}.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row.focused:not(.string-label)>.contents>.main>.right>.details-label,.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.right>.details-label,.monaco-editor .suggest-widget:not(.shows-details) .monaco-list .monaco-list-row.focused>.contents>.main>.right>.details-label{display:inline}.monaco-editor .suggest-widget:not(.docs-side) .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right.can-expand-details>.details-label{width:calc(100% - 26px)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left{flex-shrink:1;flex-grow:1;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.monaco-icon-label{flex-shrink:0}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.left>.monaco-icon-label{max-width:100%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.left>.monaco-icon-label{flex-shrink:1}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right{overflow:hidden;flex-shrink:4;max-width:70%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{display:inline-block;position:absolute;right:10px;width:18px;height:18px;visibility:hidden}.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{display:none!important}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.right>.readMore{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore{display:inline-block}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right>.readMore{visibility:visible}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated{opacity:.66;text-decoration:unset}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated>.monaco-icon-label-container>.monaco-icon-name-container{text-decoration:line-through}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label:before{height:100%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon{display:block;height:16px;width:16px;margin-left:2px;background-repeat:no-repeat;background-size:80%;background-position:50%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.hide{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .suggest-icon{display:flex;align-items:center;margin-right:4px}.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .icon,.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .suggest-icon:before{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.customcolor .colorspan{margin:0 0 0 .3em;border:.1em solid #000;width:.7em;height:.7em;display:inline-block}.monaco-editor .suggest-details-container{z-index:41}.monaco-editor .suggest-details{display:flex;flex-direction:column;cursor:default;color:var(--vscode-editorSuggestWidget-foreground)}.monaco-editor .suggest-details.focused{border-color:var(--vscode-focusBorder)}.monaco-editor .suggest-details a{color:var(--vscode-textLink-foreground)}.monaco-editor .suggest-details a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor .suggest-details code{background-color:var(--vscode-textCodeBlock-background)}.monaco-editor .suggest-details.no-docs{display:none}.monaco-editor .suggest-details>.monaco-scrollable-element{flex:1}.monaco-editor .suggest-details>.monaco-scrollable-element>.body{box-sizing:border-box;height:100%;width:100%}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type{flex:2;overflow:hidden;text-overflow:ellipsis;opacity:.7;white-space:pre;margin:0 24px 0 0;padding:4px 0 12px 5px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type.auto-wrap{white-space:normal;word-break:break-all}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs{margin:0;padding:4px 5px;white-space:pre-wrap}.monaco-editor .suggest-details.no-type>.monaco-scrollable-element>.body>.docs{margin-right:24px;overflow:hidden}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs{padding:0;white-space:normal;min-height:calc(1rem + 8px)}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div,.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>span:not(:empty){padding:4px 5px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:first-child{margin-top:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:last-child{margin-bottom:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .monaco-tokenized-source{white-space:pre}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs .code{white-space:pre-wrap;word-wrap:break-word}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .codicon{vertical-align:sub}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>p:empty{display:none}.monaco-editor .suggest-details code{border-radius:3px;padding:0 .4em}.monaco-editor .suggest-details ol,.monaco-editor .suggest-details ul{padding-left:20px}.monaco-editor .suggest-details p code{font-family:var(--monaco-monospace-font)}.editor-banner{box-sizing:border-box;cursor:default;width:100%;font-size:12px;display:flex;overflow:visible;height:26px;background:var(--vscode-banner-background)}.editor-banner .icon-container{display:flex;flex-shrink:0;align-items:center;padding:0 6px 0 10px}.editor-banner .icon-container.custom-icon{background-repeat:no-repeat;background-position:50%;background-size:16px;width:16px;padding:0;margin:0 6px 0 10px}.editor-banner .message-container{display:flex;align-items:center;line-height:26px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.editor-banner .message-container p{margin-block-start:0;margin-block-end:0}.editor-banner .message-actions-container{flex-grow:1;flex-shrink:0;line-height:26px;margin:0 4px}.editor-banner .message-actions-container a.monaco-button{width:inherit;margin:2px 8px;padding:0 12px}.editor-banner .message-actions-container a{padding:3px;margin-left:12px;text-decoration:underline}.editor-banner .action-container{padding:0 10px 0 6px}.editor-banner{background-color:var(--vscode-banner-background)}.editor-banner,.editor-banner .action-container .codicon,.editor-banner .message-actions-container .monaco-link{color:var(--vscode-banner-foreground)}.editor-banner .icon-container .codicon{color:var(--vscode-banner-iconForeground)}.monaco-editor .unicode-highlight{border:1px solid var(--vscode-editorUnicodeHighlight-border);background-color:var(--vscode-editorUnicodeHighlight-background);box-sizing:border-box}.monaco-editor .zone-widget{position:absolute;z-index:10}.monaco-editor .zone-widget .zone-widget-container{border-top-style:solid;border-bottom-style:solid;border-top-width:0;border-bottom-width:0;position:relative}.monaco-editor .accessibilityHelpWidget{padding:10px;vertical-align:middle;overflow:scroll}.monaco-editor .iPadShowKeyboard{width:58px;min-width:0;height:36px;min-height:0;margin:0;padding:0;position:absolute;resize:none;overflow:hidden;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC4wMzYgNC4wMUg0LjAwOFYzMi4wM2g0NC4wMjhWNC4wMXpNNC4wMDguMDA4QTQuMDAzIDQuMDAzIDAgMDAuMDA1IDQuMDFWMzIuMDNhNC4wMDMgNC4wMDMgMCAwMDQuMDAzIDQuMDAyaDQ0LjAyOGE0LjAwMyA0LjAwMyAwIDAwNC4wMDMtNC4wMDJWNC4wMUE0LjAwMyA0LjAwMyAwIDAwNDguMDM2LjAwOEg0LjAwOHpNOC4wMSA4LjAxM2g0LjAwM3Y0LjAwM0g4LjAxVjguMDEzem0xMi4wMDggMGgtNC4wMDJ2NC4wMDNoNC4wMDJWOC4wMTN6bTQuMDAzIDBoNC4wMDJ2NC4wMDNoLTQuMDAyVjguMDEzem0xMi4wMDggMGgtNC4wMDN2NC4wMDNoNC4wMDNWOC4wMTN6bTQuMDAyIDBoNC4wMDN2NC4wMDNINDAuMDNWOC4wMTN6bS0yNC4wMTUgOC4wMDVIOC4wMXY0LjAwM2g4LjAwNnYtNC4wMDN6bTQuMDAyIDBoNC4wMDN2NC4wMDNoLTQuMDAzdi00LjAwM3ptMTIuMDA4IDBoLTQuMDAzdjQuMDAzaDQuMDAzdi00LjAwM3ptMTIuMDA4IDB2NC4wMDNoLTguMDA1di00LjAwM2g4LjAwNXptLTMyLjAyMSA4LjAwNUg4LjAxdjQuMDAzaDQuMDAzdi00LjAwM3ptNC4wMDMgMGgyMC4wMTN2NC4wMDNIMTYuMDE2di00LjAwM3ptMjguMDE4IDBINDAuMDN2NC4wMDNoNC4wMDN2LTQuMDAzeiIgZmlsbD0iIzQyNDI0MiIvPjwvZz48ZGVmcz48Y2xpcFBhdGggaWQ9ImNsaXAwIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDUzdjM2SDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+) 50% no-repeat;border:4px solid #f6f6f6;border-radius:4px}.monaco-editor.vs-dark .iPadShowKeyboard{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC4wMzYgNC4wMUg0LjAwOFYzMi4wM2g0NC4wMjhWNC4wMXpNNC4wMDguMDA4QTQuMDAzIDQuMDAzIDAgMDAuMDA1IDQuMDFWMzIuMDNhNC4wMDMgNC4wMDMgMCAwMDQuMDAzIDQuMDAyaDQ0LjAyOGE0LjAwMyA0LjAwMyAwIDAwNC4wMDMtNC4wMDJWNC4wMUE0LjAwMyA0LjAwMyAwIDAwNDguMDM2LjAwOEg0LjAwOHpNOC4wMSA4LjAxM2g0LjAwM3Y0LjAwM0g4LjAxVjguMDEzem0xMi4wMDggMGgtNC4wMDJ2NC4wMDNoNC4wMDJWOC4wMTN6bTQuMDAzIDBoNC4wMDJ2NC4wMDNoLTQuMDAyVjguMDEzem0xMi4wMDggMGgtNC4wMDN2NC4wMDNoNC4wMDNWOC4wMTN6bTQuMDAyIDBoNC4wMDN2NC4wMDNINDAuMDNWOC4wMTN6bS0yNC4wMTUgOC4wMDVIOC4wMXY0LjAwM2g4LjAwNnYtNC4wMDN6bTQuMDAyIDBoNC4wMDN2NC4wMDNoLTQuMDAzdi00LjAwM3ptMTIuMDA4IDBoLTQuMDAzdjQuMDAzaDQuMDAzdi00LjAwM3ptMTIuMDA4IDB2NC4wMDNoLTguMDA1di00LjAwM2g4LjAwNXptLTMyLjAyMSA4LjAwNUg4LjAxdjQuMDAzaDQuMDAzdi00LjAwM3ptNC4wMDMgMGgyMC4wMTN2NC4wMDNIMTYuMDE2di00LjAwM3ptMjguMDE4IDBINDAuMDN2NC4wMDNoNC4wMDN2LTQuMDAzeiIgZmlsbD0iI0M1QzVDNSIvPjwvZz48ZGVmcz48Y2xpcFBhdGggaWQ9ImNsaXAwIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDUzdjM2SDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+) 50% no-repeat;border:4px solid #252526}.monaco-editor .tokens-inspect-widget{z-index:50;user-select:text;-webkit-user-select:text;-ms-user-select:text;padding:10px}.tokens-inspect-separator{height:1px;border:0}.monaco-editor .tokens-inspect-widget .tm-token{font-family:var(--monaco-monospace-font)}.monaco-editor .tokens-inspect-widget .tm-token-length{font-weight:400;font-size:60%;float:right}.monaco-editor .tokens-inspect-widget .tm-metadata-table{width:100%}.monaco-editor .tokens-inspect-widget .tm-metadata-value{font-family:var(--monaco-monospace-font);text-align:right}.monaco-editor .tokens-inspect-widget .tm-token-type{font-family:var(--monaco-monospace-font)}.quick-input-widget{font-size:13px}.quick-input-widget .monaco-highlighted-label .highlight{color:#0066bf}.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight{color:#9dddff}.vs-dark .quick-input-widget .monaco-highlighted-label .highlight{color:#0097fb}.hc-black .quick-input-widget .monaco-highlighted-label .highlight{color:#f38518}.hc-light .quick-input-widget .monaco-highlighted-label .highlight{color:#0f4a85}.monaco-keybinding>.monaco-keybinding-key{background-color:hsla(0,0%,86.7%,.4);border:1px solid hsla(0,0%,80%,.4);border-bottom-color:hsla(0,0%,73.3%,.4);box-shadow:inset 0 -1px 0 hsla(0,0%,73.3%,.4);color:#555}.hc-black .monaco-keybinding>.monaco-keybinding-key{background-color:transparent;border:1px solid #6fc3df;box-shadow:none;color:#fff}.hc-light .monaco-keybinding>.monaco-keybinding-key{background-color:transparent;border:1px solid #0f4a85;box-shadow:none;color:#292929}.vs-dark .monaco-keybinding>.monaco-keybinding-key{background-color:hsla(0,0%,50.2%,.17);border:1px solid rgba(51,51,51,.6);border-bottom-color:rgba(68,68,68,.6);box-shadow:inset 0 -1px 0 rgba(68,68,68,.6);color:#ccc}.monaco-editor{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,HelveticaNeue-Light,system-ui,Ubuntu,Droid Sans,sans-serif;--monaco-monospace-font:"SF Mono",Monaco,Menlo,Consolas,"Ubuntu Mono","Liberation Mono","DejaVu Sans Mono","Courier New",monospace}.monaco-editor.hc-black .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.hc-light .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.vs-dark .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-menu .monaco-action-bar.vertical .action-item .action-menu-item:focus .action-label{stroke-width:1.2px}.monaco-hover p{margin:0}.monaco-aria-container{position:absolute!important;top:0;height:1px;width:1px;margin:-1px;overflow:hidden;padding:0;clip:rect(1px,1px,1px,1px);clip-path:inset(50%)}.monaco-editor.hc-black,.monaco-editor.hc-light{-ms-high-contrast-adjust:none}@media screen and (-ms-high-contrast:active){.monaco-editor.vs-dark .view-overlays .current-line,.monaco-editor.vs .view-overlays .current-line{border-color:windowtext!important;border-left:0;border-right:0}.monaco-editor.vs-dark .cursor,.monaco-editor.vs .cursor{background-color:windowtext!important}.monaco-editor.vs-dark .dnd-target,.monaco-editor.vs .dnd-target{border-color:windowtext!important}.monaco-editor.vs-dark .selected-text,.monaco-editor.vs .selected-text{background-color:highlight!important}.monaco-editor.vs-dark .view-line,.monaco-editor.vs .view-line{-ms-high-contrast-adjust:none}.monaco-editor.vs-dark .view-line span,.monaco-editor.vs .view-line span{color:windowtext!important}.monaco-editor.vs-dark .view-line span.inline-selected-text,.monaco-editor.vs .view-line span.inline-selected-text{color:highlighttext!important}.monaco-editor.vs-dark .view-overlays,.monaco-editor.vs .view-overlays{-ms-high-contrast-adjust:none}.monaco-editor.vs-dark .reference-decoration,.monaco-editor.vs-dark .selectionHighlight,.monaco-editor.vs-dark .wordHighlight,.monaco-editor.vs-dark .wordHighlightStrong,.monaco-editor.vs .reference-decoration,.monaco-editor.vs .selectionHighlight,.monaco-editor.vs .wordHighlight,.monaco-editor.vs .wordHighlightStrong{border:2px dotted highlight!important;background:transparent!important;box-sizing:border-box}.monaco-editor.vs-dark .rangeHighlight,.monaco-editor.vs .rangeHighlight{background:transparent!important;border:1px dotted activeborder!important;box-sizing:border-box}.monaco-editor.vs-dark .bracket-match,.monaco-editor.vs .bracket-match{border-color:windowtext!important;background:transparent!important}.monaco-editor.vs-dark .currentFindMatch,.monaco-editor.vs-dark .findMatch,.monaco-editor.vs .currentFindMatch,.monaco-editor.vs .findMatch{border:2px dotted activeborder!important;background:transparent!important;box-sizing:border-box}.monaco-editor.vs-dark .find-widget,.monaco-editor.vs .find-widget{border:1px solid windowtext}.monaco-editor.vs-dark .monaco-list .monaco-list-row,.monaco-editor.vs .monaco-list .monaco-list-row{-ms-high-contrast-adjust:none;color:windowtext!important}.monaco-editor.vs-dark .monaco-list .monaco-list-row.focused,.monaco-editor.vs .monaco-list .monaco-list-row.focused{color:highlighttext!important;background-color:highlight!important}.monaco-editor.vs-dark .monaco-list .monaco-list-row:hover,.monaco-editor.vs .monaco-list .monaco-list-row:hover{background:transparent!important;border:1px solid highlight;box-sizing:border-box}.monaco-editor.vs-dark .monaco-scrollable-element>.scrollbar,.monaco-editor.vs .monaco-scrollable-element>.scrollbar{-ms-high-contrast-adjust:none;background:background!important;border:1px solid windowtext;box-sizing:border-box}.monaco-editor.vs-dark .monaco-scrollable-element>.scrollbar>.slider,.monaco-editor.vs .monaco-scrollable-element>.scrollbar>.slider{background:windowtext!important}.monaco-editor.vs-dark .monaco-scrollable-element>.scrollbar>.slider.active,.monaco-editor.vs-dark .monaco-scrollable-element>.scrollbar>.slider:hover,.monaco-editor.vs .monaco-scrollable-element>.scrollbar>.slider.active,.monaco-editor.vs .monaco-scrollable-element>.scrollbar>.slider:hover{background:highlight!important}.monaco-editor.vs-dark .decorationsOverviewRuler,.monaco-editor.vs .decorationsOverviewRuler{opacity:0}.monaco-editor.vs-dark .minimap,.monaco-editor.vs .minimap{display:none}.monaco-editor.vs-dark .squiggly-d-error,.monaco-editor.vs .squiggly-d-error{background:transparent!important;border-bottom:4px double #e47777}.monaco-editor.vs-dark .squiggly-b-info,.monaco-editor.vs-dark .squiggly-c-warning,.monaco-editor.vs .squiggly-b-info,.monaco-editor.vs .squiggly-c-warning{border-bottom:4px double #71b771}.monaco-editor.vs-dark .squiggly-a-hint,.monaco-editor.vs .squiggly-a-hint{border-bottom:4px double #6c6c6c}.monaco-editor.vs-dark .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.vs .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label{-ms-high-contrast-adjust:none;color:highlighttext!important;background-color:highlight!important}.monaco-editor.vs-dark .monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .action-label,.monaco-editor.vs .monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .action-label{-ms-high-contrast-adjust:none;background:transparent!important;border:1px solid highlight;box-sizing:border-box}.monaco-diff-editor.vs-dark .diffOverviewRuler,.monaco-diff-editor.vs .diffOverviewRuler{display:none}.monaco-editor.vs-dark .line-delete,.monaco-editor.vs-dark .line-insert,.monaco-editor.vs .line-delete,.monaco-editor.vs .line-insert{background:transparent!important;border:1px solid highlight!important;box-sizing:border-box}.monaco-editor.vs-dark .char-delete,.monaco-editor.vs-dark .char-insert,.monaco-editor.vs .char-delete,.monaco-editor.vs .char-insert{background:transparent!important}}.monaco-action-bar .action-item.menu-entry .action-label.icon{width:16px;height:16px;background-repeat:no-repeat;background-position:50%;background-size:16px}.monaco-dropdown-with-default{display:flex!important;flex-direction:row;border-radius:5px}.monaco-dropdown-with-default>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-default>.action-container.menu-entry>.action-label.icon{width:16px;height:16px;background-repeat:no-repeat;background-position:50%;background-size:16px}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{font-size:12px;padding-left:0;padding-right:0;line-height:16px;margin-left:-3px}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{display:block;background-size:16px;background-position:50%;background-repeat:no-repeat}`}var ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aX(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var r=Function.bind.apply(e,o);return new r}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var o=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return i[n]}})}),t}var ZT={},Ht=aX(wMe),$t={},eM={},yMe={get exports(){return eM},set exports(i){eM=i}},fm={},lX={},_c={};Object.defineProperty(_c,"__esModule",{value:!0});var kq;function Eq(){if(kq===void 0)throw new Error("No runtime abstraction layer installed");return kq}(function(i){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");kq=t}i.install=e})(Eq||(Eq={}));_c.default=Eq;var cX={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Disposable=void 0,function(e){function t(n){return{dispose:n}}e.create=t}(i.Disposable||(i.Disposable={}))})(cX);var _m={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Emitter=i.Event=void 0;let e=_c;(function(o){let r={dispose(){}};o.None=function(){return r}})(i.Event||(i.Event={}));class t{add(r,s=null,a){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(r),this._contexts.push(s),Array.isArray(a)&&a.push({dispose:()=>this.remove(r,s)})}remove(r,s=null){if(!this._callbacks)return;let a=!1;for(let l=0,c=this._callbacks.length;l<c;l++)if(this._callbacks[l]===r)if(this._contexts[l]===s){this._callbacks.splice(l,1),this._contexts.splice(l,1);return}else a=!0;if(a)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...r){if(!this._callbacks)return[];let s=[],a=this._callbacks.slice(0),l=this._contexts.slice(0);for(let c=0,d=a.length;c<d;c++)try{s.push(a[c].apply(l[c],r))}catch(h){(0,e.default)().console.error(h)}return s}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class n{constructor(r){this._options=r}get event(){return this._event||(this._event=(r,s,a)=>{this._callbacks||(this._callbacks=new t),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(r,s);let l={dispose:()=>{this._callbacks&&(this._callbacks.remove(r,s),l.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(a)&&a.push(l),l}),this._event}fire(r){this._callbacks&&this._callbacks.invoke.call(this._callbacks,r)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}i.Emitter=n,n._noop=function(){}})(_m);var MN={};Object.defineProperty(MN,"__esModule",{value:!0});MN.AbstractMessageBuffer=void 0;var SMe=13,DMe=10,xMe=`\r
`,Lq=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,t=0,n=0,o=0;e:for(;t<this._chunks.length;){let l=this._chunks[t];for(n=0;n<l.length;){switch(l[n]){case SMe:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case DMe:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}o+=l.byteLength,t++}if(e!==4)return;let r=this._read(o+n),s=new Map,a=this.toString(r,"ascii").split(xMe);if(a.length<2)return s;for(let l=0;l<a.length-2;l++){let c=a[l],d=c.indexOf(":");if(d===-1)throw new Error("Message header must separate key and value using :");let h=c.substr(0,d),u=c.substr(d+1).trim();s.set(h,u)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let r=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(r)}if(this._chunks[0].byteLength>e){let r=this._chunks[0],s=this.asNative(r,e);return this._chunks[0]=r.slice(e),this._totalLength-=e,s}let t=this.allocNative(e),n=0,o=0;for(;e>0;){let r=this._chunks[o];if(r.byteLength>e){let s=r.slice(0,e);t.set(s,n),n+=e,this._chunks[o]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}};MN.AbstractMessageBuffer=Lq;Object.defineProperty(lX,"__esModule",{value:!0});var Rce=_c,f_=cX,kMe=_m,EMe=MN,tM=class i extends EMe.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return i.emptyBuffer}fromString(e,t){return new TextEncoder().encode(e)}toString(e,t){return t==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}};tM.emptyBuffer=new Uint8Array(0);var Iq=class{constructor(e){this.socket=e,this._onData=new kMe.Emitter,this._messageListener=t=>{t.data.arrayBuffer().then(n=>{this._onData.fire(new Uint8Array(n))},()=>{(0,Rce.default)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),f_.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),f_.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),f_.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}},Tq=class{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),f_.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),f_.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),f_.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,t){if(typeof e=="string"){if(t!==void 0&&t!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}},LMe=new TextEncoder,Fce=Object.freeze({messageBuffer:Object.freeze({create:i=>new tM(i)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(i,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${e.charset}`);return Promise.resolve(LMe.encode(JSON.stringify(i,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(i,e)=>{if(!(i instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(i)))}})}),stream:Object.freeze({asReadableStream:i=>new Iq(i),asWritableStream:i=>new Tq(i)}),console,timer:Object.freeze({setTimeout(i,e,...t){let n=setTimeout(i,e,...t);return{dispose:()=>clearTimeout(n)}},setImmediate(i,...e){let t=setTimeout(i,0,...e);return{dispose:()=>clearTimeout(t)}},setInterval(i,e,...t){let n=setInterval(i,e,...t);return{dispose:()=>clearInterval(n)}}})});function Mq(){return Fce}(function(i){function e(){Rce.default.install(Fce)}i.install=e})(Mq||(Mq={}));lX.default=Mq;var Nq={},dX={},ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.stringArray=ao.array=ao.func=ao.error=ao.number=ao.string=ao.boolean=void 0;function IMe(i){return i===!0||i===!1}ao.boolean=IMe;function Bce(i){return typeof i=="string"||i instanceof String}ao.string=Bce;function TMe(i){return typeof i=="number"||i instanceof Number}ao.number=TMe;function MMe(i){return i instanceof Error}ao.error=MMe;function NMe(i){return typeof i=="function"}ao.func=NMe;function Pce(i){return Array.isArray(i)}ao.array=Pce;function RMe(i){return Pce(i)&&i.every(e=>Bce(e))}ao.stringArray=RMe;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Message=i.NotificationType9=i.NotificationType8=i.NotificationType7=i.NotificationType6=i.NotificationType5=i.NotificationType4=i.NotificationType3=i.NotificationType2=i.NotificationType1=i.NotificationType0=i.NotificationType=i.RequestType9=i.RequestType8=i.RequestType7=i.RequestType6=i.RequestType5=i.RequestType4=i.RequestType3=i.RequestType2=i.RequestType1=i.RequestType=i.RequestType0=i.AbstractMessageSignature=i.ParameterStructures=i.ResponseError=i.ErrorCodes=void 0;let e=ao;var t;(function(D){D.ParseError=-32700,D.InvalidRequest=-32600,D.MethodNotFound=-32601,D.InvalidParams=-32602,D.InternalError=-32603,D.jsonrpcReservedErrorRangeStart=-32099,D.serverErrorStart=-32099,D.MessageWriteError=-32099,D.MessageReadError=-32098,D.PendingResponseRejected=-32097,D.ConnectionInactive=-32096,D.ServerNotInitialized=-32002,D.UnknownErrorCode=-32001,D.jsonrpcReservedErrorRangeEnd=-32e3,D.serverErrorEnd=-32e3})(t=i.ErrorCodes||(i.ErrorCodes={}));class n extends Error{constructor(K,oe,ie){super(oe),this.code=e.number(K)?K:t.UnknownErrorCode,this.data=ie,Object.setPrototypeOf(this,n.prototype)}toJson(){let K={code:this.code,message:this.message};return this.data!==void 0&&(K.data=this.data),K}}i.ResponseError=n;class o{constructor(K){this.kind=K}static is(K){return K===o.auto||K===o.byName||K===o.byPosition}toString(){return this.kind}}i.ParameterStructures=o,o.auto=new o("auto"),o.byPosition=new o("byPosition"),o.byName=new o("byName");class r{constructor(K,oe){this.method=K,this.numberOfParams=oe}get parameterStructures(){return o.auto}}i.AbstractMessageSignature=r;class s extends r{constructor(K){super(K,0)}}i.RequestType0=s;class a extends r{constructor(K,oe=o.auto){super(K,1),this._parameterStructures=oe}get parameterStructures(){return this._parameterStructures}}i.RequestType=a;class l extends r{constructor(K,oe=o.auto){super(K,1),this._parameterStructures=oe}get parameterStructures(){return this._parameterStructures}}i.RequestType1=l;class c extends r{constructor(K){super(K,2)}}i.RequestType2=c;class d extends r{constructor(K){super(K,3)}}i.RequestType3=d;class h extends r{constructor(K){super(K,4)}}i.RequestType4=h;class u extends r{constructor(K){super(K,5)}}i.RequestType5=u;class g extends r{constructor(K){super(K,6)}}i.RequestType6=g;class p extends r{constructor(K){super(K,7)}}i.RequestType7=p;class f extends r{constructor(K){super(K,8)}}i.RequestType8=f;class v extends r{constructor(K){super(K,9)}}i.RequestType9=v;class b extends r{constructor(K,oe=o.auto){super(K,1),this._parameterStructures=oe}get parameterStructures(){return this._parameterStructures}}i.NotificationType=b;class A extends r{constructor(K){super(K,0)}}i.NotificationType0=A;class w extends r{constructor(K,oe=o.auto){super(K,1),this._parameterStructures=oe}get parameterStructures(){return this._parameterStructures}}i.NotificationType1=w;class C extends r{constructor(K){super(K,2)}}i.NotificationType2=C;class k extends r{constructor(K){super(K,3)}}i.NotificationType3=k;class L extends r{constructor(K){super(K,4)}}i.NotificationType4=L;class S extends r{constructor(K){super(K,5)}}i.NotificationType5=S;class y extends r{constructor(K){super(K,6)}}i.NotificationType6=y;class M extends r{constructor(K){super(K,7)}}i.NotificationType7=M;class O extends r{constructor(K){super(K,8)}}i.NotificationType8=O;class H extends r{constructor(K){super(K,9)}}i.NotificationType9=H,function(D){function K(ce){let se=ce;return se&&e.string(se.method)&&(e.string(se.id)||e.number(se.id))}D.isRequest=K;function oe(ce){let se=ce;return se&&e.string(se.method)&&ce.id===void 0}D.isNotification=oe;function ie(ce){let se=ce;return se&&(se.result!==void 0||!!se.error)&&(e.string(se.id)||e.number(se.id)||se.id===null)}D.isResponse=ie}(i.Message||(i.Message={}))})(dX);var hX={};(function(i){var e;Object.defineProperty(i,"__esModule",{value:!0}),i.LRUCache=i.LinkedMap=i.Touch=void 0;var t;(function(r){r.None=0,r.First=1,r.AsOld=r.First,r.Last=2,r.AsNew=r.Last})(t=i.Touch||(i.Touch={}));class n{constructor(){this[e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var s;return(s=this._head)==null?void 0:s.value}get last(){var s;return(s=this._tail)==null?void 0:s.value}has(s){return this._map.has(s)}get(s,a=t.None){let l=this._map.get(s);if(l)return a!==t.None&&this.touch(l,a),l.value}set(s,a,l=t.None){let c=this._map.get(s);if(c)c.value=a,l!==t.None&&this.touch(c,l);else{switch(c={key:s,value:a,next:void 0,previous:void 0},l){case t.None:this.addItemLast(c);break;case t.First:this.addItemFirst(c);break;case t.Last:this.addItemLast(c);break;default:this.addItemLast(c);break}this._map.set(s,c),this._size++}return this}delete(s){return!!this.remove(s)}remove(s){let a=this._map.get(s);if(a)return this._map.delete(s),this.removeItem(a),this._size--,a.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let s=this._head;return this._map.delete(s.key),this.removeItem(s),this._size--,s.value}forEach(s,a){let l=this._state,c=this._head;for(;c;){if(a?s.bind(a)(c.value,c.key,this):s(c.value,c.key,this),this._state!==l)throw new Error("LinkedMap got modified during iteration.");c=c.next}}keys(){let s=this._state,a=this._head,l={[Symbol.iterator]:()=>l,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){let c={value:a.key,done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return l}values(){let s=this._state,a=this._head,l={[Symbol.iterator]:()=>l,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){let c={value:a.value,done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return l}entries(){let s=this._state,a=this._head,l={[Symbol.iterator]:()=>l,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){let c={value:[a.key,a.value],done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return l}[(e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(s){if(s>=this.size)return;if(s===0){this.clear();return}let a=this._head,l=this.size;for(;a&&l>s;)this._map.delete(a.key),a=a.next,l--;this._head=a,this._size=l,a&&(a.previous=void 0),this._state++}addItemFirst(s){if(!this._head&&!this._tail)this._tail=s;else if(this._head)s.next=this._head,this._head.previous=s;else throw new Error("Invalid list");this._head=s,this._state++}addItemLast(s){if(!this._head&&!this._tail)this._head=s;else if(this._tail)s.previous=this._tail,this._tail.next=s;else throw new Error("Invalid list");this._tail=s,this._state++}removeItem(s){if(s===this._head&&s===this._tail)this._head=void 0,this._tail=void 0;else if(s===this._head){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this._head=s.next}else if(s===this._tail){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this._tail=s.previous}else{let a=s.next,l=s.previous;if(!a||!l)throw new Error("Invalid list");a.previous=l,l.next=a}s.next=void 0,s.previous=void 0,this._state++}touch(s,a){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(a!==t.First&&a!==t.Last)){if(a===t.First){if(s===this._head)return;let l=s.next,c=s.previous;s===this._tail?(c.next=void 0,this._tail=c):(l.previous=c,c.next=l),s.previous=void 0,s.next=this._head,this._head.previous=s,this._head=s,this._state++}else if(a===t.Last){if(s===this._tail)return;let l=s.next,c=s.previous;s===this._head?(l.previous=void 0,this._head=l):(l.previous=c,c.next=l),s.next=void 0,s.previous=this._tail,this._tail.next=s,this._tail=s,this._state++}}}toJSON(){let s=[];return this.forEach((a,l)=>{s.push([l,a])}),s}fromJSON(s){this.clear();for(let[a,l]of s)this.set(a,l)}}i.LinkedMap=n;class o extends n{constructor(s,a=1){super(),this._limit=s,this._ratio=Math.min(Math.max(0,a),1)}get limit(){return this._limit}set limit(s){this._limit=s,this.checkTrim()}get ratio(){return this._ratio}set ratio(s){this._ratio=Math.min(Math.max(0,s),1),this.checkTrim()}get(s,a=t.AsNew){return super.get(s,a)}peek(s){return super.get(s,t.None)}set(s,a){return super.set(s,a,t.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}i.LRUCache=o})(hX);var uX={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CancellationTokenSource=i.CancellationToken=void 0;let e=_c,t=ao,n=_m;var o;(function(l){l.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Event.None}),l.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n.Event.None});function c(d){let h=d;return h&&(h===l.None||h===l.Cancelled||t.boolean(h.isCancellationRequested)&&!!h.onCancellationRequested)}l.is=c})(o=i.CancellationToken||(i.CancellationToken={}));let r=Object.freeze(function(l,c){let d=(0,e.default)().timer.setTimeout(l.bind(c),0);return{dispose(){d.dispose()}}});class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?r:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class a{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=o.None}}i.CancellationTokenSource=a})(uX);var gX={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ReadableStreamMessageReader=i.AbstractMessageReader=i.MessageReader=void 0;let e=_c,t=ao,n=_m;(function(a){function l(c){let d=c;return d&&t.func(d.listen)&&t.func(d.dispose)&&t.func(d.onError)&&t.func(d.onClose)&&t.func(d.onPartialMessage)}a.is=l})(i.MessageReader||(i.MessageReader={}));class o{constructor(){this.errorEmitter=new n.Emitter,this.closeEmitter=new n.Emitter,this.partialMessageEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(l){this.errorEmitter.fire(this.asError(l))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(l){this.partialMessageEmitter.fire(l)}asError(l){return l instanceof Error?l:new Error(`Reader received error. Reason: ${t.string(l.message)?l.message:"unknown"}`)}}i.AbstractMessageReader=o;var r;(function(a){function l(c){let d,h,u=new Map,g,p=new Map;if(c===void 0||typeof c=="string")d=c??"utf-8";else{if(d=c.charset??"utf-8",c.contentDecoder!==void 0&&(h=c.contentDecoder,u.set(h.name,h)),c.contentDecoders!==void 0)for(let f of c.contentDecoders)u.set(f.name,f);if(c.contentTypeDecoder!==void 0&&(g=c.contentTypeDecoder,p.set(g.name,g)),c.contentTypeDecoders!==void 0)for(let f of c.contentTypeDecoders)p.set(f.name,f)}return g===void 0&&(g=(0,e.default)().applicationJson.decoder,p.set(g.name,g)),{charset:d,contentDecoder:h,contentDecoders:u,contentTypeDecoder:g,contentTypeDecoders:p}}a.fromOptions=l})(r||(r={}));class s extends o{constructor(l,c){super(),this.readable=l,this.options=r.fromOptions(c),this.buffer=(0,e.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(l){this._partialMessageTimeout=l}get partialMessageTimeout(){return this._partialMessageTimeout}listen(l){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=l;let c=this.readable.onData(d=>{this.onData(d)});return this.readable.onError(d=>this.fireError(d)),this.readable.onClose(()=>this.fireClose()),c}onData(l){for(this.buffer.append(l);;){if(this.nextMessageLength===-1){let h=this.buffer.tryReadHeaders();if(!h)return;let u=h.get("Content-Length");if(!u)throw new Error("Header must provide a Content-Length property.");let g=parseInt(u);if(isNaN(g))throw new Error("Content-Length value must be a number.");this.nextMessageLength=g}let c=this.buffer.tryReadBody(this.nextMessageLength);if(c===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let d;this.options.contentDecoder!==void 0?d=this.options.contentDecoder.decode(c):d=Promise.resolve(c),d.then(h=>{this.options.contentTypeDecoder.decode(h,this.options).then(u=>{this.callback(u)},u=>{this.fireError(u)})},h=>{this.fireError(h)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,e.default)().timer.setTimeout((l,c)=>{this.partialMessageTimer=void 0,l===this.messageToken&&(this.firePartialMessage({messageToken:l,waitingTime:c}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}i.ReadableStreamMessageReader=s})(gX);var pX={},NN={};Object.defineProperty(NN,"__esModule",{value:!0});NN.Semaphore=void 0;var FMe=_c,BMe=class{constructor(i=1){if(i<=0)throw new Error("Capacity must be greater than 0");this._capacity=i,this._active=0,this._waiting=[]}lock(i){return new Promise((e,t)=>{this._waiting.push({thunk:i,resolve:e,reject:t}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,FMe.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let i=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let e=i.thunk();e instanceof Promise?e.then(t=>{this._active--,i.resolve(t),this.runNext()},t=>{this._active--,i.reject(t),this.runNext()}):(this._active--,i.resolve(e),this.runNext())}catch(e){this._active--,i.reject(e),this.runNext()}}};NN.Semaphore=BMe;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WriteableStreamMessageWriter=i.AbstractMessageWriter=i.MessageWriter=void 0;let e=_c,t=ao,n=NN,o=_m,r="Content-Length: ",s=`\r
`;(function(d){function h(u){let g=u;return g&&t.func(g.dispose)&&t.func(g.onClose)&&t.func(g.onError)&&t.func(g.write)}d.is=h})(i.MessageWriter||(i.MessageWriter={}));class a{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(h,u,g){this.errorEmitter.fire([this.asError(h),u,g])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(h){return h instanceof Error?h:new Error(`Writer received error. Reason: ${t.string(h.message)?h.message:"unknown"}`)}}i.AbstractMessageWriter=a;var l;(function(d){function h(u){return u===void 0||typeof u=="string"?{charset:u??"utf-8",contentTypeEncoder:(0,e.default)().applicationJson.encoder}:{charset:u.charset??"utf-8",contentEncoder:u.contentEncoder,contentTypeEncoder:u.contentTypeEncoder??(0,e.default)().applicationJson.encoder}}d.fromOptions=h})(l||(l={}));class c extends a{constructor(h,u){super(),this.writable=h,this.options=l.fromOptions(u),this.errorCount=0,this.writeSemaphore=new n.Semaphore(1),this.writable.onError(g=>this.fireError(g)),this.writable.onClose(()=>this.fireClose())}async write(h){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(h,this.options).then(u=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(u):u).then(u=>{let g=[];return g.push(r,u.byteLength.toString(),s),g.push(s),this.doWrite(h,g,u)},u=>{throw this.fireError(u),u}))}async doWrite(h,u,g){try{return await this.writable.write(u.join(""),"ascii"),this.writable.write(g)}catch(p){return this.handleError(p,h),Promise.reject(p)}}handleError(h,u){this.errorCount++,this.fireError(h,u,this.errorCount)}end(){this.writable.end()}}i.WriteableStreamMessageWriter=c})(pX);var Oce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createMessageConnection=i.ConnectionOptions=i.CancellationStrategy=i.CancellationSenderStrategy=i.CancellationReceiverStrategy=i.ConnectionStrategy=i.ConnectionError=i.ConnectionErrors=i.LogTraceNotification=i.SetTraceNotification=i.TraceFormat=i.TraceValues=i.Trace=i.NullLogger=i.ProgressType=i.ProgressToken=void 0;let e=_c,t=ao,n=dX,o=hX,r=_m,s=uX;var a;(function(y){y.type=new n.NotificationType("$/cancelRequest")})(a||(a={}));var l;(function(y){function M(O){return typeof O=="string"||typeof O=="number"}y.is=M})(l=i.ProgressToken||(i.ProgressToken={}));var c;(function(y){y.type=new n.NotificationType("$/progress")})(c||(c={}));class d{constructor(){}}i.ProgressType=d;var h;(function(y){function M(O){return t.func(O)}y.is=M})(h||(h={})),i.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var u;(function(y){y[y.Off=0]="Off",y[y.Messages=1]="Messages",y[y.Compact=2]="Compact",y[y.Verbose=3]="Verbose"})(u=i.Trace||(i.Trace={})),function(y){y.Off="off",y.Messages="messages",y.Compact="compact",y.Verbose="verbose"}(i.TraceValues||(i.TraceValues={})),function(y){function M(H){if(!t.string(H))return y.Off;switch(H=H.toLowerCase(),H){case"off":return y.Off;case"messages":return y.Messages;case"compact":return y.Compact;case"verbose":return y.Verbose;default:return y.Off}}y.fromString=M;function O(H){switch(H){case y.Off:return"off";case y.Messages:return"messages";case y.Compact:return"compact";case y.Verbose:return"verbose";default:return"off"}}y.toString=O}(u=i.Trace||(i.Trace={}));var g;(function(y){y.Text="text",y.JSON="json"})(g=i.TraceFormat||(i.TraceFormat={})),function(y){function M(O){return t.string(O)?(O=O.toLowerCase(),O==="json"?y.JSON:y.Text):y.Text}y.fromString=M}(g=i.TraceFormat||(i.TraceFormat={}));var p;(function(y){y.type=new n.NotificationType("$/setTrace")})(p=i.SetTraceNotification||(i.SetTraceNotification={}));var f;(function(y){y.type=new n.NotificationType("$/logTrace")})(f=i.LogTraceNotification||(i.LogTraceNotification={}));var v;(function(y){y[y.Closed=1]="Closed",y[y.Disposed=2]="Disposed",y[y.AlreadyListening=3]="AlreadyListening"})(v=i.ConnectionErrors||(i.ConnectionErrors={}));class b extends Error{constructor(M,O){super(O),this.code=M,Object.setPrototypeOf(this,b.prototype)}}i.ConnectionError=b;var A;(function(y){function M(O){let H=O;return H&&t.func(H.cancelUndispatched)}y.is=M})(A=i.ConnectionStrategy||(i.ConnectionStrategy={}));var w;(function(y){y.Message=Object.freeze({createCancellationTokenSource(O){return new s.CancellationTokenSource}});function M(O){let H=O;return H&&t.func(H.createCancellationTokenSource)}y.is=M})(w=i.CancellationReceiverStrategy||(i.CancellationReceiverStrategy={}));var C;(function(y){y.Message=Object.freeze({sendCancellation(O,H){return O.sendNotification(a.type,{id:H})},cleanup(O){}});function M(O){let H=O;return H&&t.func(H.sendCancellation)&&t.func(H.cleanup)}y.is=M})(C=i.CancellationSenderStrategy||(i.CancellationSenderStrategy={}));var k;(function(y){y.Message=Object.freeze({receiver:w.Message,sender:C.Message});function M(O){let H=O;return H&&w.is(H.receiver)&&C.is(H.sender)}y.is=M})(k=i.CancellationStrategy||(i.CancellationStrategy={})),function(y){function M(O){let H=O;return H&&(k.is(H.cancellationStrategy)||A.is(H.connectionStrategy))}y.is=M}(i.ConnectionOptions||(i.ConnectionOptions={}));var L;(function(y){y[y.New=1]="New",y[y.Listening=2]="Listening",y[y.Closed=3]="Closed",y[y.Disposed=4]="Disposed"})(L||(L={}));function S(y,M,O,H){let D=O!==void 0?O:i.NullLogger,K=0,oe=0,ie=0,ce="2.0",se,_e=new Map,Ve,Qe=new Map,pt=new Map,ke,xe=new o.LinkedMap,Et=new Map,Ri=new Set,ci=new Map,Dt=u.Off,Fi=g.Text,Kt,Ei=L.New,Ue=new r.Emitter,Yn=new r.Emitter,ht=new r.Emitter,Pn=new r.Emitter,oo=new r.Emitter,fn=H&&H.cancellationStrategy?H.cancellationStrategy:k.Message;function Bo(G){if(G===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+G.toString()}function $e(G){return G===null?"res-unknown-"+(++ie).toString():"res-"+G.toString()}function X(){return"not-"+(++oe).toString()}function W(G,U){n.Message.isRequest(U)?G.set(Bo(U.id),U):n.Message.isResponse(U)?G.set($e(U.id),U):G.set(X(),U)}function R(G){}function I(){return Ei===L.Listening}function T(){return Ei===L.Closed}function F(){return Ei===L.Disposed}function V(){(Ei===L.New||Ei===L.Listening)&&(Ei=L.Closed,Yn.fire(void 0))}function ee(G){Ue.fire([G,void 0,void 0])}function Ce(G){Ue.fire(G)}y.onClose(V),y.onError(ee),M.onClose(V),M.onError(Ce);function ve(){ke||xe.size===0||(ke=(0,e.default)().timer.setImmediate(()=>{ke=void 0,Me()}))}function Me(){if(xe.size===0)return;let G=xe.shift();try{n.Message.isRequest(G)?Je(G):n.Message.isNotification(G)?Lt(G):n.Message.isResponse(G)?Ut(G):Pe(G)}finally{ve()}}let at=G=>{try{if(n.Message.isNotification(G)&&G.method===a.type.method){let U=G.params.id,he=Bo(U),Ae=xe.get(he);if(n.Message.isRequest(Ae)){let bt=H?.connectionStrategy,Jt=bt&&bt.cancelUndispatched?bt.cancelUndispatched(Ae,R):void 0;if(Jt&&(Jt.error!==void 0||Jt.result!==void 0)){xe.delete(he),ci.delete(U),Jt.id=Ae.id,N(Jt,G.method,Date.now()),M.write(Jt).catch(()=>D.error("Sending response for canceled message failed."));return}}let ut=ci.get(U);if(ut!==void 0){ut.cancel(),He(G);return}else Ri.add(U)}W(xe,G)}finally{ve()}};function Je(G){if(F())return;function U(ui,ri,x){let Y={jsonrpc:ce,id:G.id};ui instanceof n.ResponseError?Y.error=ui.toJson():Y.result=ui===void 0?null:ui,N(Y,ri,x),M.write(Y).catch(()=>D.error("Sending response failed."))}function he(ui,ri,x){let Y={jsonrpc:ce,id:G.id,error:ui.toJson()};N(Y,ri,x),M.write(Y).catch(()=>D.error("Sending response failed."))}function Ae(ui,ri,x){ui===void 0&&(ui=null);let Y={jsonrpc:ce,id:G.id,result:ui};N(Y,ri,x),M.write(Y).catch(()=>D.error("Sending response failed."))}de(G);let ut=_e.get(G.method),bt,Jt;ut&&(bt=ut.type,Jt=ut.handler);let _t=Date.now();if(Jt||se){let ui=G.id??String(Date.now()),ri=fn.receiver.createCancellationTokenSource(ui);G.id!==null&&Ri.has(G.id)&&ri.cancel(),G.id!==null&&ci.set(ui,ri);try{let x;if(Jt)if(G.params===void 0){if(bt!==void 0&&bt.numberOfParams!==0){he(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${G.method} defines ${bt.numberOfParams} params but received none.`),G.method,_t);return}x=Jt(ri.token)}else if(Array.isArray(G.params)){if(bt!==void 0&&bt.parameterStructures===n.ParameterStructures.byName){he(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${G.method} defines parameters by name but received parameters by position`),G.method,_t);return}x=Jt(...G.params,ri.token)}else{if(bt!==void 0&&bt.parameterStructures===n.ParameterStructures.byPosition){he(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${G.method} defines parameters by position but received parameters by name`),G.method,_t);return}x=Jt(G.params,ri.token)}else se&&(x=se(G.method,G.params,ri.token));let Y=x;x?Y.then?Y.then(be=>{ci.delete(ui),U(be,G.method,_t)},be=>{ci.delete(ui),be instanceof n.ResponseError?he(be,G.method,_t):be&&t.string(be.message)?he(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${G.method} failed with message: ${be.message}`),G.method,_t):he(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${G.method} failed unexpectedly without providing any details.`),G.method,_t)}):(ci.delete(ui),U(x,G.method,_t)):(ci.delete(ui),Ae(x,G.method,_t))}catch(x){ci.delete(ui),x instanceof n.ResponseError?U(x,G.method,_t):x&&t.string(x.message)?he(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${G.method} failed with message: ${x.message}`),G.method,_t):he(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${G.method} failed unexpectedly without providing any details.`),G.method,_t)}}else he(new n.ResponseError(n.ErrorCodes.MethodNotFound,`Unhandled method ${G.method}`),G.method,_t)}function Ut(G){if(!F())if(G.id===null)G.error?D.error(`Received response message without id: Error is: 
${JSON.stringify(G.error,void 0,4)}`):D.error("Received response message without id. No further error information provided.");else{let U=G.id,he=Et.get(U);if(ei(G,he),he!==void 0){Et.delete(U);try{if(G.error){let Ae=G.error;he.reject(new n.ResponseError(Ae.code,Ae.message,Ae.data))}else if(G.result!==void 0)he.resolve(G.result);else throw new Error("Should never happen.")}catch(Ae){Ae.message?D.error(`Response handler '${he.method}' failed with message: ${Ae.message}`):D.error(`Response handler '${he.method}' failed unexpectedly.`)}}}}function Lt(G){if(F())return;let U,he;if(G.method===a.type.method){let Ae=G.params.id;Ri.delete(Ae),He(G);return}else{let Ae=Qe.get(G.method);Ae&&(he=Ae.handler,U=Ae.type)}if(he||Ve)try{if(He(G),he)if(G.params===void 0)U!==void 0&&U.numberOfParams!==0&&U.parameterStructures!==n.ParameterStructures.byName&&D.error(`Notification ${G.method} defines ${U.numberOfParams} params but received none.`),he();else if(Array.isArray(G.params)){let Ae=G.params;G.method===c.type.method&&Ae.length===2&&l.is(Ae[0])?he({token:Ae[0],value:Ae[1]}):(U!==void 0&&(U.parameterStructures===n.ParameterStructures.byName&&D.error(`Notification ${G.method} defines parameters by name but received parameters by position`),U.numberOfParams!==G.params.length&&D.error(`Notification ${G.method} defines ${U.numberOfParams} params but received ${Ae.length} arguments`)),he(...Ae))}else U!==void 0&&U.parameterStructures===n.ParameterStructures.byPosition&&D.error(`Notification ${G.method} defines parameters by position but received parameters by name`),he(G.params);else Ve&&Ve(G.method,G.params)}catch(Ae){Ae.message?D.error(`Notification handler '${G.method}' failed with message: ${Ae.message}`):D.error(`Notification handler '${G.method}' failed unexpectedly.`)}else ht.fire(G)}function Pe(G){if(!G){D.error("Received empty message.");return}D.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(G,null,4)}`);let U=G;if(t.string(U.id)||t.number(U.id)){let he=U.id,Ae=Et.get(he);Ae&&Ae.reject(new Error("The received response has neither a result nor an error property."))}}function fi(G){if(G!=null)switch(Dt){case u.Verbose:return JSON.stringify(G,null,4);case u.Compact:return JSON.stringify(G);default:return}}function _i(G){if(!(Dt===u.Off||!Kt))if(Fi===g.Text){let U;(Dt===u.Verbose||Dt===u.Compact)&&G.params&&(U=`Params: ${fi(G.params)}

`),Kt.log(`Sending request '${G.method} - (${G.id})'.`,U)}else It("send-request",G)}function Jn(G){if(!(Dt===u.Off||!Kt))if(Fi===g.Text){let U;(Dt===u.Verbose||Dt===u.Compact)&&(G.params?U=`Params: ${fi(G.params)}

`:U=`No parameters provided.

`),Kt.log(`Sending notification '${G.method}'.`,U)}else It("send-notification",G)}function N(G,U,he){if(!(Dt===u.Off||!Kt))if(Fi===g.Text){let Ae;(Dt===u.Verbose||Dt===u.Compact)&&(G.error&&G.error.data?Ae=`Error data: ${fi(G.error.data)}

`:G.result?Ae=`Result: ${fi(G.result)}

`:G.error===void 0&&(Ae=`No result returned.

`)),Kt.log(`Sending response '${U} - (${G.id})'. Processing request took ${Date.now()-he}ms`,Ae)}else It("send-response",G)}function de(G){if(!(Dt===u.Off||!Kt))if(Fi===g.Text){let U;(Dt===u.Verbose||Dt===u.Compact)&&G.params&&(U=`Params: ${fi(G.params)}

`),Kt.log(`Received request '${G.method} - (${G.id})'.`,U)}else It("receive-request",G)}function He(G){if(!(Dt===u.Off||!Kt||G.method===f.type.method))if(Fi===g.Text){let U;(Dt===u.Verbose||Dt===u.Compact)&&(G.params?U=`Params: ${fi(G.params)}

`:U=`No parameters provided.

`),Kt.log(`Received notification '${G.method}'.`,U)}else It("receive-notification",G)}function ei(G,U){if(!(Dt===u.Off||!Kt))if(Fi===g.Text){let he;if((Dt===u.Verbose||Dt===u.Compact)&&(G.error&&G.error.data?he=`Error data: ${fi(G.error.data)}

`:G.result?he=`Result: ${fi(G.result)}

`:G.error===void 0&&(he=`No result returned.

`)),U){let Ae=G.error?` Request failed: ${G.error.message} (${G.error.code}).`:"";Kt.log(`Received response '${U.method} - (${G.id})' in ${Date.now()-U.timerStart}ms.${Ae}`,he)}else Kt.log(`Received response ${G.id} without active response promise.`,he)}else It("receive-response",G)}function It(G,U){if(!Kt||Dt===u.Off)return;let he={isLSPMessage:!0,type:G,message:U,timestamp:Date.now()};Kt.log(he)}function Li(){if(T())throw new b(v.Closed,"Connection is closed.");if(F())throw new b(v.Disposed,"Connection is disposed.")}function fo(){if(I())throw new b(v.AlreadyListening,"Connection is already listening")}function qo(){if(!I())throw new Error("Call listen() first.")}function La(G){return G===void 0?null:G}function cr(G){if(G!==null)return G}function dr(G){return G!=null&&!Array.isArray(G)&&typeof G=="object"}function qs(G,U){switch(G){case n.ParameterStructures.auto:return dr(U)?cr(U):[La(U)];case n.ParameterStructures.byName:if(!dr(U))throw new Error("Received parameters by name but param is not an object literal.");return cr(U);case n.ParameterStructures.byPosition:return[La(U)];default:throw new Error(`Unknown parameter structure ${G.toString()}`)}}function vc(G,U){let he,Ae=G.numberOfParams;switch(Ae){case 0:he=void 0;break;case 1:he=qs(G.parameterStructures,U[0]);break;default:he=[];for(let ut=0;ut<U.length&&ut<Ae;ut++)he.push(La(U[ut]));if(U.length<Ae)for(let ut=U.length;ut<Ae;ut++)he.push(null);break}return he}let $s={sendNotification:(G,...U)=>{Li();let he,Ae;if(t.string(G)){he=G;let bt=U[0],Jt=0,_t=n.ParameterStructures.auto;n.ParameterStructures.is(bt)&&(Jt=1,_t=bt);let ui=U.length,ri=ui-Jt;switch(ri){case 0:Ae=void 0;break;case 1:Ae=qs(_t,U[Jt]);break;default:if(_t===n.ParameterStructures.byName)throw new Error(`Received ${ri} parameters for 'by Name' notification parameter structure.`);Ae=U.slice(Jt,ui).map(x=>La(x));break}}else{let bt=U;he=G.method,Ae=vc(G,bt)}let ut={jsonrpc:ce,method:he,params:Ae};return Jn(ut),M.write(ut).catch(()=>D.error("Sending notification failed."))},onNotification:(G,U)=>{Li();let he;return t.func(G)?Ve=G:U&&(t.string(G)?(he=G,Qe.set(G,{type:void 0,handler:U})):(he=G.method,Qe.set(G.method,{type:G,handler:U}))),{dispose:()=>{he!==void 0?Qe.delete(he):Ve=void 0}}},onProgress:(G,U,he)=>{if(pt.has(U))throw new Error(`Progress handler for token ${U} already registered`);return pt.set(U,he),{dispose:()=>{pt.delete(U)}}},sendProgress:(G,U,he)=>$s.sendNotification(c.type,{token:U,value:he}),onUnhandledProgress:Pn.event,sendRequest:(G,...U)=>{Li(),qo();let he,Ae,ut;if(t.string(G)){he=G;let _t=U[0],ui=U[U.length-1],ri=0,x=n.ParameterStructures.auto;n.ParameterStructures.is(_t)&&(ri=1,x=_t);let Y=U.length;s.CancellationToken.is(ui)&&(Y=Y-1,ut=ui);let be=Y-ri;switch(be){case 0:Ae=void 0;break;case 1:Ae=qs(x,U[ri]);break;default:if(x===n.ParameterStructures.byName)throw new Error(`Received ${be} parameters for 'by Name' request parameter structure.`);Ae=U.slice(ri,Y).map(Xe=>La(Xe));break}}else{let _t=U;he=G.method,Ae=vc(G,_t);let ui=G.numberOfParams;ut=s.CancellationToken.is(_t[ui])?_t[ui]:void 0}let bt=K++,Jt;return ut&&(Jt=ut.onCancellationRequested(()=>{let _t=fn.sender.sendCancellation($s,bt);return _t===void 0?(D.log(`Received no promise from cancellation strategy when cancelling id ${bt}`),Promise.resolve()):_t.catch(()=>{D.log(`Sending cancellation messages for id ${bt} failed`)})})),new Promise((_t,ui)=>{let ri={jsonrpc:ce,id:bt,method:he,params:Ae},x=Xe=>{_t(Xe),fn.sender.cleanup(bt),Jt?.dispose()},Y=Xe=>{ui(Xe),fn.sender.cleanup(bt),Jt?.dispose()},be={method:he,timerStart:Date.now(),resolve:x,reject:Y};_i(ri);try{M.write(ri).catch(()=>D.error("Sending request failed."))}catch(Xe){be.reject(new n.ResponseError(n.ErrorCodes.MessageWriteError,Xe.message?Xe.message:"Unknown reason")),be=null}be&&Et.set(bt,be)})},onRequest:(G,U)=>{Li();let he=null;return h.is(G)?(he=void 0,se=G):t.string(G)?(he=null,U!==void 0&&(he=G,_e.set(G,{handler:U,type:void 0}))):U!==void 0&&(he=G.method,_e.set(G.method,{type:G,handler:U})),{dispose:()=>{he!==null&&(he!==void 0?_e.delete(he):se=void 0)}}},hasPendingResponse:()=>Et.size>0,trace:async(G,U,he)=>{let Ae=!1,ut=g.Text;he!==void 0&&(t.boolean(he)?Ae=he:(Ae=he.sendNotification||!1,ut=he.traceFormat||g.Text)),Dt=G,Fi=ut,Dt===u.Off?Kt=void 0:Kt=U,Ae&&!T()&&!F()&&await $s.sendNotification(p.type,{value:u.toString(G)})},onError:Ue.event,onClose:Yn.event,onUnhandledNotification:ht.event,onDispose:oo.event,end:()=>{M.end()},dispose:()=>{if(F())return;Ei=L.Disposed,oo.fire(void 0);let G=new n.ResponseError(n.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let U of Et.values())U.reject(G);Et=new Map,ci=new Map,Ri=new Set,xe=new o.LinkedMap,t.func(M.dispose)&&M.dispose(),t.func(y.dispose)&&y.dispose()},listen:()=>{Li(),fo(),Ei=L.Listening,y.listen(at)},inspect:()=>{(0,e.default)().console.log("inspect")}};return $s.onNotification(f.type,G=>{if(Dt===u.Off||!Kt)return;let U=Dt===u.Verbose||Dt===u.Compact;Kt.log(G.message,U?G.verbose:void 0)}),$s.onNotification(c.type,G=>{let U=pt.get(G.token);U?U(G.value):Pn.fire(G)}),$s}i.createMessageConnection=S})(Oce);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.TraceFormat=i.TraceValues=i.Trace=i.ProgressType=i.ProgressToken=i.createMessageConnection=i.NullLogger=i.ConnectionOptions=i.ConnectionStrategy=i.WriteableStreamMessageWriter=i.AbstractMessageWriter=i.MessageWriter=i.ReadableStreamMessageReader=i.AbstractMessageReader=i.MessageReader=i.CancellationToken=i.CancellationTokenSource=i.Emitter=i.Event=i.Disposable=i.LRUCache=i.Touch=i.LinkedMap=i.ParameterStructures=i.NotificationType9=i.NotificationType8=i.NotificationType7=i.NotificationType6=i.NotificationType5=i.NotificationType4=i.NotificationType3=i.NotificationType2=i.NotificationType1=i.NotificationType0=i.NotificationType=i.ErrorCodes=i.ResponseError=i.RequestType9=i.RequestType8=i.RequestType7=i.RequestType6=i.RequestType5=i.RequestType4=i.RequestType3=i.RequestType2=i.RequestType1=i.RequestType0=i.RequestType=i.Message=i.RAL=void 0,i.CancellationStrategy=i.CancellationSenderStrategy=i.CancellationReceiverStrategy=i.ConnectionError=i.ConnectionErrors=i.LogTraceNotification=i.SetTraceNotification=void 0;let e=dX;Object.defineProperty(i,"Message",{enumerable:!0,get:function(){return e.Message}}),Object.defineProperty(i,"RequestType",{enumerable:!0,get:function(){return e.RequestType}}),Object.defineProperty(i,"RequestType0",{enumerable:!0,get:function(){return e.RequestType0}}),Object.defineProperty(i,"RequestType1",{enumerable:!0,get:function(){return e.RequestType1}}),Object.defineProperty(i,"RequestType2",{enumerable:!0,get:function(){return e.RequestType2}}),Object.defineProperty(i,"RequestType3",{enumerable:!0,get:function(){return e.RequestType3}}),Object.defineProperty(i,"RequestType4",{enumerable:!0,get:function(){return e.RequestType4}}),Object.defineProperty(i,"RequestType5",{enumerable:!0,get:function(){return e.RequestType5}}),Object.defineProperty(i,"RequestType6",{enumerable:!0,get:function(){return e.RequestType6}}),Object.defineProperty(i,"RequestType7",{enumerable:!0,get:function(){return e.RequestType7}}),Object.defineProperty(i,"RequestType8",{enumerable:!0,get:function(){return e.RequestType8}}),Object.defineProperty(i,"RequestType9",{enumerable:!0,get:function(){return e.RequestType9}}),Object.defineProperty(i,"ResponseError",{enumerable:!0,get:function(){return e.ResponseError}}),Object.defineProperty(i,"ErrorCodes",{enumerable:!0,get:function(){return e.ErrorCodes}}),Object.defineProperty(i,"NotificationType",{enumerable:!0,get:function(){return e.NotificationType}}),Object.defineProperty(i,"NotificationType0",{enumerable:!0,get:function(){return e.NotificationType0}}),Object.defineProperty(i,"NotificationType1",{enumerable:!0,get:function(){return e.NotificationType1}}),Object.defineProperty(i,"NotificationType2",{enumerable:!0,get:function(){return e.NotificationType2}}),Object.defineProperty(i,"NotificationType3",{enumerable:!0,get:function(){return e.NotificationType3}}),Object.defineProperty(i,"NotificationType4",{enumerable:!0,get:function(){return e.NotificationType4}}),Object.defineProperty(i,"NotificationType5",{enumerable:!0,get:function(){return e.NotificationType5}}),Object.defineProperty(i,"NotificationType6",{enumerable:!0,get:function(){return e.NotificationType6}}),Object.defineProperty(i,"NotificationType7",{enumerable:!0,get:function(){return e.NotificationType7}}),Object.defineProperty(i,"NotificationType8",{enumerable:!0,get:function(){return e.NotificationType8}}),Object.defineProperty(i,"NotificationType9",{enumerable:!0,get:function(){return e.NotificationType9}}),Object.defineProperty(i,"ParameterStructures",{enumerable:!0,get:function(){return e.ParameterStructures}});let t=hX;Object.defineProperty(i,"LinkedMap",{enumerable:!0,get:function(){return t.LinkedMap}}),Object.defineProperty(i,"LRUCache",{enumerable:!0,get:function(){return t.LRUCache}}),Object.defineProperty(i,"Touch",{enumerable:!0,get:function(){return t.Touch}});let n=cX;Object.defineProperty(i,"Disposable",{enumerable:!0,get:function(){return n.Disposable}});let o=_m;Object.defineProperty(i,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(i,"Emitter",{enumerable:!0,get:function(){return o.Emitter}});let r=uX;Object.defineProperty(i,"CancellationTokenSource",{enumerable:!0,get:function(){return r.CancellationTokenSource}}),Object.defineProperty(i,"CancellationToken",{enumerable:!0,get:function(){return r.CancellationToken}});let s=gX;Object.defineProperty(i,"MessageReader",{enumerable:!0,get:function(){return s.MessageReader}}),Object.defineProperty(i,"AbstractMessageReader",{enumerable:!0,get:function(){return s.AbstractMessageReader}}),Object.defineProperty(i,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return s.ReadableStreamMessageReader}});let a=pX;Object.defineProperty(i,"MessageWriter",{enumerable:!0,get:function(){return a.MessageWriter}}),Object.defineProperty(i,"AbstractMessageWriter",{enumerable:!0,get:function(){return a.AbstractMessageWriter}}),Object.defineProperty(i,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return a.WriteableStreamMessageWriter}});let l=Oce;Object.defineProperty(i,"ConnectionStrategy",{enumerable:!0,get:function(){return l.ConnectionStrategy}}),Object.defineProperty(i,"ConnectionOptions",{enumerable:!0,get:function(){return l.ConnectionOptions}}),Object.defineProperty(i,"NullLogger",{enumerable:!0,get:function(){return l.NullLogger}}),Object.defineProperty(i,"createMessageConnection",{enumerable:!0,get:function(){return l.createMessageConnection}}),Object.defineProperty(i,"ProgressToken",{enumerable:!0,get:function(){return l.ProgressToken}}),Object.defineProperty(i,"ProgressType",{enumerable:!0,get:function(){return l.ProgressType}}),Object.defineProperty(i,"Trace",{enumerable:!0,get:function(){return l.Trace}}),Object.defineProperty(i,"TraceValues",{enumerable:!0,get:function(){return l.TraceValues}}),Object.defineProperty(i,"TraceFormat",{enumerable:!0,get:function(){return l.TraceFormat}}),Object.defineProperty(i,"SetTraceNotification",{enumerable:!0,get:function(){return l.SetTraceNotification}}),Object.defineProperty(i,"LogTraceNotification",{enumerable:!0,get:function(){return l.LogTraceNotification}}),Object.defineProperty(i,"ConnectionErrors",{enumerable:!0,get:function(){return l.ConnectionErrors}}),Object.defineProperty(i,"ConnectionError",{enumerable:!0,get:function(){return l.ConnectionError}}),Object.defineProperty(i,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return l.CancellationReceiverStrategy}}),Object.defineProperty(i,"CancellationSenderStrategy",{enumerable:!0,get:function(){return l.CancellationSenderStrategy}}),Object.defineProperty(i,"CancellationStrategy",{enumerable:!0,get:function(){return l.CancellationStrategy}});let c=_c;i.RAL=c.default})(Nq);(function(i){var e=ga&&ga.__createBinding||(Object.create?function(a,l,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(l,c);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(a,d,h)}:function(a,l,c,d){d===void 0&&(d=c),a[d]=l[c]}),t=ga&&ga.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,a,c)};Object.defineProperty(i,"__esModule",{value:!0}),i.createMessageConnection=i.BrowserMessageWriter=i.BrowserMessageReader=void 0,lX.default.install();let n=Nq;t(Nq,i);class o extends n.AbstractMessageReader{constructor(l){super(),this._onData=new n.Emitter,this._messageListener=c=>{this._onData.fire(c.data)},l.addEventListener("error",c=>this.fireError(c)),l.onmessage=this._messageListener}listen(l){return this._onData.event(l)}}i.BrowserMessageReader=o;class r extends n.AbstractMessageWriter{constructor(l){super(),this.context=l,this.errorCount=0,l.addEventListener("error",c=>this.fireError(c))}write(l){try{return this.context.postMessage(l),Promise.resolve()}catch(c){return this.handleError(c,l),Promise.reject(c)}}handleError(l,c){this.errorCount++,this.fireError(l,c,this.errorCount)}end(){}}i.BrowserMessageWriter=r;function s(a,l,c,d){return c===void 0&&(c=n.NullLogger),n.ConnectionStrategy.is(d)&&(d={connectionStrategy:d}),(0,n.createMessageConnection)(a,l,c,d)}i.createMessageConnection=s})(fm);(function(i){i.exports=fm})(yMe);var Hce={},Rq;(function(i){function e(t){return typeof t=="string"}i.is=e})(Rq||(Rq={}));var iM;(function(i){function e(t){return typeof t=="string"}i.is=e})(iM||(iM={}));var Fq;(function(i){i.MIN_VALUE=-2147483648,i.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&i.MIN_VALUE<=t&&t<=i.MAX_VALUE}i.is=e})(Fq||(Fq={}));var bC;(function(i){i.MIN_VALUE=0,i.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&i.MIN_VALUE<=t&&t<=i.MAX_VALUE}i.is=e})(bC||(bC={}));var na;(function(i){function e(n,o){return n===Number.MAX_VALUE&&(n=bC.MAX_VALUE),o===Number.MAX_VALUE&&(o=bC.MAX_VALUE),{line:n,character:o}}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&re.uinteger(o.line)&&re.uinteger(o.character)}i.is=t})(na||(na={}));var qn;(function(i){function e(n,o,r,s){if(re.uinteger(n)&&re.uinteger(o)&&re.uinteger(r)&&re.uinteger(s))return{start:na.create(n,o),end:na.create(r,s)};if(na.is(n)&&na.is(o))return{start:n,end:o};throw new Error("Range#create called with invalid arguments[".concat(n,", ").concat(o,", ").concat(r,", ").concat(s,"]"))}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&na.is(o.start)&&na.is(o.end)}i.is=t})(qn||(qn={}));var wC;(function(i){function e(n,o){return{uri:n,range:o}}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&qn.is(o.range)&&(re.string(o.uri)||re.undefined(o.uri))}i.is=t})(wC||(wC={}));var Bq;(function(i){function e(n,o,r,s){return{targetUri:n,targetRange:o,targetSelectionRange:r,originSelectionRange:s}}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&qn.is(o.targetRange)&&re.string(o.targetUri)&&qn.is(o.targetSelectionRange)&&(qn.is(o.originSelectionRange)||re.undefined(o.originSelectionRange))}i.is=t})(Bq||(Bq={}));var nM;(function(i){function e(n,o,r,s){return{red:n,green:o,blue:r,alpha:s}}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&re.numberRange(o.red,0,1)&&re.numberRange(o.green,0,1)&&re.numberRange(o.blue,0,1)&&re.numberRange(o.alpha,0,1)}i.is=t})(nM||(nM={}));var Pq;(function(i){function e(n,o){return{range:n,color:o}}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&qn.is(o.range)&&nM.is(o.color)}i.is=t})(Pq||(Pq={}));var Oq;(function(i){function e(n,o,r){return{label:n,textEdit:o,additionalTextEdits:r}}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&re.string(o.label)&&(re.undefined(o.textEdit)||Ul.is(o))&&(re.undefined(o.additionalTextEdits)||re.typedArray(o.additionalTextEdits,Ul.is))}i.is=t})(Oq||(Oq={}));var Hq;(function(i){i.Comment="comment",i.Imports="imports",i.Region="region"})(Hq||(Hq={}));var Wq;(function(i){function e(n,o,r,s,a,l){var c={startLine:n,endLine:o};return re.defined(r)&&(c.startCharacter=r),re.defined(s)&&(c.endCharacter=s),re.defined(a)&&(c.kind=a),re.defined(l)&&(c.collapsedText=l),c}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&re.uinteger(o.startLine)&&re.uinteger(o.startLine)&&(re.undefined(o.startCharacter)||re.uinteger(o.startCharacter))&&(re.undefined(o.endCharacter)||re.uinteger(o.endCharacter))&&(re.undefined(o.kind)||re.string(o.kind))}i.is=t})(Wq||(Wq={}));var oM;(function(i){function e(n,o){return{location:n,message:o}}i.create=e;function t(n){var o=n;return re.defined(o)&&wC.is(o.location)&&re.string(o.message)}i.is=t})(oM||(oM={}));var zq;(function(i){i.Error=1,i.Warning=2,i.Information=3,i.Hint=4})(zq||(zq={}));var Vq;(function(i){i.Unnecessary=1,i.Deprecated=2})(Vq||(Vq={}));var Uq;(function(i){function e(t){var n=t;return re.objectLiteral(n)&&re.string(n.href)}i.is=e})(Uq||(Uq={}));var CC;(function(i){function e(n,o,r,s,a,l){var c={range:n,message:o};return re.defined(r)&&(c.severity=r),re.defined(s)&&(c.code=s),re.defined(a)&&(c.source=a),re.defined(l)&&(c.relatedInformation=l),c}i.create=e;function t(n){var o,r=n;return re.defined(r)&&qn.is(r.range)&&re.string(r.message)&&(re.number(r.severity)||re.undefined(r.severity))&&(re.integer(r.code)||re.string(r.code)||re.undefined(r.code))&&(re.undefined(r.codeDescription)||re.string((o=r.codeDescription)===null||o===void 0?void 0:o.href))&&(re.string(r.source)||re.undefined(r.source))&&(re.undefined(r.relatedInformation)||re.typedArray(r.relatedInformation,oM.is))}i.is=t})(CC||(CC={}));var Yp;(function(i){function e(n,o){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];var a={title:n,command:o};return re.defined(r)&&r.length>0&&(a.arguments=r),a}i.create=e;function t(n){var o=n;return re.defined(o)&&re.string(o.title)&&re.string(o.command)}i.is=t})(Yp||(Yp={}));var Ul;(function(i){function e(r,s){return{range:r,newText:s}}i.replace=e;function t(r,s){return{range:{start:r,end:r},newText:s}}i.insert=t;function n(r){return{range:r,newText:""}}i.del=n;function o(r){var s=r;return re.objectLiteral(s)&&re.string(s.newText)&&qn.is(s.range)}i.is=o})(Ul||(Ul={}));var qg;(function(i){function e(n,o,r){var s={label:n};return o!==void 0&&(s.needsConfirmation=o),r!==void 0&&(s.description=r),s}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&re.string(o.label)&&(re.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(re.string(o.description)||o.description===void 0)}i.is=t})(qg||(qg={}));var er;(function(i){function e(t){var n=t;return re.string(n)}i.is=e})(er||(er={}));var jc;(function(i){function e(r,s,a){return{range:r,newText:s,annotationId:a}}i.replace=e;function t(r,s,a){return{range:{start:r,end:r},newText:s,annotationId:a}}i.insert=t;function n(r,s){return{range:r,newText:"",annotationId:s}}i.del=n;function o(r){var s=r;return Ul.is(s)&&(qg.is(s.annotationId)||er.is(s.annotationId))}i.is=o})(jc||(jc={}));var yC;(function(i){function e(n,o){return{textDocument:n,edits:o}}i.create=e;function t(n){var o=n;return re.defined(o)&&SC.is(o.textDocument)&&Array.isArray(o.edits)}i.is=t})(yC||(yC={}));var $0;(function(i){function e(n,o,r){var s={kind:"create",uri:n};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(s.options=o),r!==void 0&&(s.annotationId=r),s}i.create=e;function t(n){var o=n;return o&&o.kind==="create"&&re.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||re.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||re.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||er.is(o.annotationId))}i.is=t})($0||($0={}));var G0;(function(i){function e(n,o,r,s){var a={kind:"rename",oldUri:n,newUri:o};return r!==void 0&&(r.overwrite!==void 0||r.ignoreIfExists!==void 0)&&(a.options=r),s!==void 0&&(a.annotationId=s),a}i.create=e;function t(n){var o=n;return o&&o.kind==="rename"&&re.string(o.oldUri)&&re.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||re.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||re.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||er.is(o.annotationId))}i.is=t})(G0||(G0={}));var Y0;(function(i){function e(n,o,r){var s={kind:"delete",uri:n};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(s.options=o),r!==void 0&&(s.annotationId=r),s}i.create=e;function t(n){var o=n;return o&&o.kind==="delete"&&re.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||re.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||re.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||er.is(o.annotationId))}i.is=t})(Y0||(Y0={}));var rM;(function(i){function e(t){var n=t;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(function(o){return re.string(o.kind)?$0.is(o)||G0.is(o)||Y0.is(o):yC.is(o)}))}i.is=e})(rM||(rM={}));var _S=function(){function i(e,t){this.edits=e,this.changeAnnotations=t}return i.prototype.insert=function(e,t,n){var o,r;if(n===void 0?o=Ul.insert(e,t):er.is(n)?(r=n,o=jc.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),o=jc.insert(e,t,r)),this.edits.push(o),r!==void 0)return r},i.prototype.replace=function(e,t,n){var o,r;if(n===void 0?o=Ul.replace(e,t):er.is(n)?(r=n,o=jc.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),o=jc.replace(e,t,r)),this.edits.push(o),r!==void 0)return r},i.prototype.delete=function(e,t){var n,o;if(t===void 0?n=Ul.del(e):er.is(t)?(o=t,n=jc.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(t),n=jc.del(e,o)),this.edits.push(n),o!==void 0)return o},i.prototype.add=function(e){this.edits.push(e)},i.prototype.all=function(){return this.edits},i.prototype.clear=function(){this.edits.splice(0,this.edits.length)},i.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},i}(),Yie=function(){function i(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return i.prototype.all=function(){return this._annotations},Object.defineProperty(i.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),i.prototype.manage=function(e,t){var n;if(er.is(e)?n=e:(n=this.nextId(),t=e),this._annotations[n]!==void 0)throw new Error("Id ".concat(n," is already in use."));if(t===void 0)throw new Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},i.prototype.nextId=function(){return this._counter++,this._counter.toString()},i}(),PMe=function(){function i(e){var t=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Yie(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(n){if(yC.is(n)){var o=new _S(n.edits,t._changeAnnotations);t._textEditChanges[n.textDocument.uri]=o}})):e.changes&&Object.keys(e.changes).forEach(function(n){var o=new _S(e.changes[n]);t._textEditChanges[n]=o})):this._workspaceEdit={}}return Object.defineProperty(i.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),i.prototype.getTextEditChange=function(e){if(SC.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version},n=this._textEditChanges[t.uri];if(!n){var o=[],r={textDocument:t,edits:o};this._workspaceEdit.documentChanges.push(r),n=new _S(o,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[e];if(!n){var o=[];this._workspaceEdit.changes[e]=o,n=new _S(o),this._textEditChanges[e]=n}return n}},i.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Yie,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},i.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},i.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;qg.is(t)||er.is(t)?o=t:n=t;var r,s;if(o===void 0?r=$0.create(e,n):(s=er.is(o)?o:this._changeAnnotations.manage(o),r=$0.create(e,n,s)),this._workspaceEdit.documentChanges.push(r),s!==void 0)return s},i.prototype.renameFile=function(e,t,n,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;qg.is(n)||er.is(n)?r=n:o=n;var s,a;if(r===void 0?s=G0.create(e,t,o):(a=er.is(r)?r:this._changeAnnotations.manage(r),s=G0.create(e,t,o,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},i.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;qg.is(t)||er.is(t)?o=t:n=t;var r,s;if(o===void 0?r=Y0.create(e,n):(s=er.is(o)?o:this._changeAnnotations.manage(o),r=Y0.create(e,n,s)),this._workspaceEdit.documentChanges.push(r),s!==void 0)return s},i}(),Qq;(function(i){function e(n){return{uri:n}}i.create=e;function t(n){var o=n;return re.defined(o)&&re.string(o.uri)}i.is=t})(Qq||(Qq={}));var jq;(function(i){function e(n,o){return{uri:n,version:o}}i.create=e;function t(n){var o=n;return re.defined(o)&&re.string(o.uri)&&re.integer(o.version)}i.is=t})(jq||(jq={}));var SC;(function(i){function e(n,o){return{uri:n,version:o}}i.create=e;function t(n){var o=n;return re.defined(o)&&re.string(o.uri)&&(o.version===null||re.integer(o.version))}i.is=t})(SC||(SC={}));var Kq;(function(i){function e(n,o,r,s){return{uri:n,languageId:o,version:r,text:s}}i.create=e;function t(n){var o=n;return re.defined(o)&&re.string(o.uri)&&re.string(o.languageId)&&re.integer(o.version)&&re.string(o.text)}i.is=t})(Kq||(Kq={}));var sM;(function(i){i.PlainText="plaintext",i.Markdown="markdown";function e(t){var n=t;return n===i.PlainText||n===i.Markdown}i.is=e})(sM||(sM={}));var J0;(function(i){function e(t){var n=t;return re.objectLiteral(t)&&sM.is(n.kind)&&re.string(n.value)}i.is=e})(J0||(J0={}));var qq;(function(i){i.Text=1,i.Method=2,i.Function=3,i.Constructor=4,i.Field=5,i.Variable=6,i.Class=7,i.Interface=8,i.Module=9,i.Property=10,i.Unit=11,i.Value=12,i.Enum=13,i.Keyword=14,i.Snippet=15,i.Color=16,i.File=17,i.Reference=18,i.Folder=19,i.EnumMember=20,i.Constant=21,i.Struct=22,i.Event=23,i.Operator=24,i.TypeParameter=25})(qq||(qq={}));var $q;(function(i){i.PlainText=1,i.Snippet=2})($q||($q={}));var Gq;(function(i){i.Deprecated=1})(Gq||(Gq={}));var Yq;(function(i){function e(n,o,r){return{newText:n,insert:o,replace:r}}i.create=e;function t(n){var o=n;return o&&re.string(o.newText)&&qn.is(o.insert)&&qn.is(o.replace)}i.is=t})(Yq||(Yq={}));var Jq;(function(i){i.asIs=1,i.adjustIndentation=2})(Jq||(Jq={}));var Xq;(function(i){function e(t){var n=t;return n&&(re.string(n.detail)||n.detail===void 0)&&(re.string(n.description)||n.description===void 0)}i.is=e})(Xq||(Xq={}));var Zq;(function(i){function e(t){return{label:t}}i.create=e})(Zq||(Zq={}));var e$;(function(i){function e(t,n){return{items:t||[],isIncomplete:!!n}}i.create=e})(e$||(e$={}));var DC;(function(i){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}i.fromPlainText=e;function t(n){var o=n;return re.string(o)||re.objectLiteral(o)&&re.string(o.language)&&re.string(o.value)}i.is=t})(DC||(DC={}));var t$;(function(i){function e(t){var n=t;return!!n&&re.objectLiteral(n)&&(J0.is(n.contents)||DC.is(n.contents)||re.typedArray(n.contents,DC.is))&&(t.range===void 0||qn.is(t.range))}i.is=e})(t$||(t$={}));var i$;(function(i){function e(t,n){return n?{label:t,documentation:n}:{label:t}}i.create=e})(i$||(i$={}));var n$;(function(i){function e(t,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var s={label:t};return re.defined(n)&&(s.documentation=n),re.defined(o)?s.parameters=o:s.parameters=[],s}i.create=e})(n$||(n$={}));var o$;(function(i){i.Text=1,i.Read=2,i.Write=3})(o$||(o$={}));var r$;(function(i){function e(t,n){var o={range:t};return re.number(n)&&(o.kind=n),o}i.create=e})(r$||(r$={}));var s$;(function(i){i.File=1,i.Module=2,i.Namespace=3,i.Package=4,i.Class=5,i.Method=6,i.Property=7,i.Field=8,i.Constructor=9,i.Enum=10,i.Interface=11,i.Function=12,i.Variable=13,i.Constant=14,i.String=15,i.Number=16,i.Boolean=17,i.Array=18,i.Object=19,i.Key=20,i.Null=21,i.EnumMember=22,i.Struct=23,i.Event=24,i.Operator=25,i.TypeParameter=26})(s$||(s$={}));var a$;(function(i){i.Deprecated=1})(a$||(a$={}));var l$;(function(i){function e(t,n,o,r,s){var a={name:t,kind:n,location:{uri:r,range:o}};return s&&(a.containerName=s),a}i.create=e})(l$||(l$={}));var c$;(function(i){function e(t,n,o,r){return r!==void 0?{name:t,kind:n,location:{uri:o,range:r}}:{name:t,kind:n,location:{uri:o}}}i.create=e})(c$||(c$={}));var d$;(function(i){function e(n,o,r,s,a,l){var c={name:n,detail:o,kind:r,range:s,selectionRange:a};return l!==void 0&&(c.children=l),c}i.create=e;function t(n){var o=n;return o&&re.string(o.name)&&re.number(o.kind)&&qn.is(o.range)&&qn.is(o.selectionRange)&&(o.detail===void 0||re.string(o.detail))&&(o.deprecated===void 0||re.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}i.is=t})(d$||(d$={}));var h$;(function(i){i.Empty="",i.QuickFix="quickfix",i.Refactor="refactor",i.RefactorExtract="refactor.extract",i.RefactorInline="refactor.inline",i.RefactorRewrite="refactor.rewrite",i.Source="source",i.SourceOrganizeImports="source.organizeImports",i.SourceFixAll="source.fixAll"})(h$||(h$={}));var xC;(function(i){i.Invoked=1,i.Automatic=2})(xC||(xC={}));var u$;(function(i){function e(n,o,r){var s={diagnostics:n};return o!=null&&(s.only=o),r!=null&&(s.triggerKind=r),s}i.create=e;function t(n){var o=n;return re.defined(o)&&re.typedArray(o.diagnostics,CC.is)&&(o.only===void 0||re.typedArray(o.only,re.string))&&(o.triggerKind===void 0||o.triggerKind===xC.Invoked||o.triggerKind===xC.Automatic)}i.is=t})(u$||(u$={}));var g$;(function(i){function e(n,o,r){var s={title:n},a=!0;return typeof o=="string"?(a=!1,s.kind=o):Yp.is(o)?s.command=o:s.edit=o,a&&r!==void 0&&(s.kind=r),s}i.create=e;function t(n){var o=n;return o&&re.string(o.title)&&(o.diagnostics===void 0||re.typedArray(o.diagnostics,CC.is))&&(o.kind===void 0||re.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||Yp.is(o.command))&&(o.isPreferred===void 0||re.boolean(o.isPreferred))&&(o.edit===void 0||rM.is(o.edit))}i.is=t})(g$||(g$={}));var p$;(function(i){function e(n,o){var r={range:n};return re.defined(o)&&(r.data=o),r}i.create=e;function t(n){var o=n;return re.defined(o)&&qn.is(o.range)&&(re.undefined(o.command)||Yp.is(o.command))}i.is=t})(p$||(p$={}));var m$;(function(i){function e(n,o){return{tabSize:n,insertSpaces:o}}i.create=e;function t(n){var o=n;return re.defined(o)&&re.uinteger(o.tabSize)&&re.boolean(o.insertSpaces)}i.is=t})(m$||(m$={}));var f$;(function(i){function e(n,o,r){return{range:n,target:o,data:r}}i.create=e;function t(n){var o=n;return re.defined(o)&&qn.is(o.range)&&(re.undefined(o.target)||re.string(o.target))}i.is=t})(f$||(f$={}));var _$;(function(i){function e(n,o){return{range:n,parent:o}}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&qn.is(o.range)&&(o.parent===void 0||i.is(o.parent))}i.is=t})(_$||(_$={}));var v$;(function(i){i.namespace="namespace",i.type="type",i.class="class",i.enum="enum",i.interface="interface",i.struct="struct",i.typeParameter="typeParameter",i.parameter="parameter",i.variable="variable",i.property="property",i.enumMember="enumMember",i.event="event",i.function="function",i.method="method",i.macro="macro",i.keyword="keyword",i.modifier="modifier",i.comment="comment",i.string="string",i.number="number",i.regexp="regexp",i.operator="operator",i.decorator="decorator"})(v$||(v$={}));var A$;(function(i){i.declaration="declaration",i.definition="definition",i.readonly="readonly",i.static="static",i.deprecated="deprecated",i.abstract="abstract",i.async="async",i.modification="modification",i.documentation="documentation",i.defaultLibrary="defaultLibrary"})(A$||(A$={}));var b$;(function(i){function e(t){var n=t;return re.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}i.is=e})(b$||(b$={}));var w$;(function(i){function e(n,o){return{range:n,text:o}}i.create=e;function t(n){var o=n;return o!=null&&qn.is(o.range)&&re.string(o.text)}i.is=t})(w$||(w$={}));var C$;(function(i){function e(n,o,r){return{range:n,variableName:o,caseSensitiveLookup:r}}i.create=e;function t(n){var o=n;return o!=null&&qn.is(o.range)&&re.boolean(o.caseSensitiveLookup)&&(re.string(o.variableName)||o.variableName===void 0)}i.is=t})(C$||(C$={}));var y$;(function(i){function e(n,o){return{range:n,expression:o}}i.create=e;function t(n){var o=n;return o!=null&&qn.is(o.range)&&(re.string(o.expression)||o.expression===void 0)}i.is=t})(y$||(y$={}));var S$;(function(i){function e(n,o){return{frameId:n,stoppedLocation:o}}i.create=e;function t(n){var o=n;return re.defined(o)&&qn.is(n.stoppedLocation)}i.is=t})(S$||(S$={}));var aM;(function(i){i.Type=1,i.Parameter=2;function e(t){return t===1||t===2}i.is=e})(aM||(aM={}));var lM;(function(i){function e(n){return{value:n}}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&(o.tooltip===void 0||re.string(o.tooltip)||J0.is(o.tooltip))&&(o.location===void 0||wC.is(o.location))&&(o.command===void 0||Yp.is(o.command))}i.is=t})(lM||(lM={}));var D$;(function(i){function e(n,o,r){var s={position:n,label:o};return r!==void 0&&(s.kind=r),s}i.create=e;function t(n){var o=n;return re.objectLiteral(o)&&na.is(o.position)&&(re.string(o.label)||re.typedArray(o.label,lM.is))&&(o.kind===void 0||aM.is(o.kind))&&o.textEdits===void 0||re.typedArray(o.textEdits,Ul.is)&&(o.tooltip===void 0||re.string(o.tooltip)||J0.is(o.tooltip))&&(o.paddingLeft===void 0||re.boolean(o.paddingLeft))&&(o.paddingRight===void 0||re.boolean(o.paddingRight))}i.is=t})(D$||(D$={}));var x$;(function(i){function e(t){var n=t;return re.objectLiteral(n)&&iM.is(n.uri)&&re.string(n.name)}i.is=e})(x$||(x$={}));var OMe=[`
`,`\r
`,"\r"],k$;(function(i){function e(r,s,a,l){return new HMe(r,s,a,l)}i.create=e;function t(r){var s=r;return!!(re.defined(s)&&re.string(s.uri)&&(re.undefined(s.languageId)||re.string(s.languageId))&&re.uinteger(s.lineCount)&&re.func(s.getText)&&re.func(s.positionAt)&&re.func(s.offsetAt))}i.is=t;function n(r,s){for(var a=r.getText(),l=o(s,function(p,f){var v=p.range.start.line-f.range.start.line;return v===0?p.range.start.character-f.range.start.character:v}),c=a.length,d=l.length-1;d>=0;d--){var h=l[d],u=r.offsetAt(h.range.start),g=r.offsetAt(h.range.end);if(g<=c)a=a.substring(0,u)+h.newText+a.substring(g,a.length);else throw new Error("Overlapping edit");c=u}return a}i.applyEdits=n;function o(r,s){if(r.length<=1)return r;var a=r.length/2|0,l=r.slice(0,a),c=r.slice(a);o(l,s),o(c,s);for(var d=0,h=0,u=0;d<l.length&&h<c.length;){var g=s(l[d],c[h]);g<=0?r[u++]=l[d++]:r[u++]=c[h++]}for(;d<l.length;)r[u++]=l[d++];for(;h<c.length;)r[u++]=c[h++];return r}})(k$||(k$={}));var HMe=function(){function i(e,t,n,o){this._uri=e,this._languageId=t,this._version=n,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(i.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),i.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},i.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},i.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],t=this._content,n=!0,o=0;o<t.length;o++){n&&(e.push(o),n=!1);var r=t.charAt(o);n=r==="\r"||r===`
`,r==="\r"&&o+1<t.length&&t.charAt(o+1)===`
`&&o++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},i.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,o=t.length;if(o===0)return na.create(0,e);for(;n<o;){var r=Math.floor((n+o)/2);t[r]>e?o=r:n=r+1}var s=n-1;return na.create(s,e-t[s])},i.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],o=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,o),n)},Object.defineProperty(i.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),i}(),re;(function(i){var e=Object.prototype.toString;function t(g){return typeof g<"u"}i.defined=t;function n(g){return typeof g>"u"}i.undefined=n;function o(g){return g===!0||g===!1}i.boolean=o;function r(g){return e.call(g)==="[object String]"}i.string=r;function s(g){return e.call(g)==="[object Number]"}i.number=s;function a(g,p,f){return e.call(g)==="[object Number]"&&p<=g&&g<=f}i.numberRange=a;function l(g){return e.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}i.integer=l;function c(g){return e.call(g)==="[object Number]"&&0<=g&&g<=2147483647}i.uinteger=c;function d(g){return e.call(g)==="[object Function]"}i.func=d;function h(g){return g!==null&&typeof g=="object"}i.objectLiteral=h;function u(g,p){return Array.isArray(g)&&g.every(p)}i.typedArray=u})(re||(re={}));var WMe=Object.freeze(Object.defineProperty({__proto__:null,get DocumentUri(){return Rq},get URI(){return iM},get integer(){return Fq},get uinteger(){return bC},get Position(){return na},get Range(){return qn},get Location(){return wC},get LocationLink(){return Bq},get Color(){return nM},get ColorInformation(){return Pq},get ColorPresentation(){return Oq},get FoldingRangeKind(){return Hq},get FoldingRange(){return Wq},get DiagnosticRelatedInformation(){return oM},get DiagnosticSeverity(){return zq},get DiagnosticTag(){return Vq},get CodeDescription(){return Uq},get Diagnostic(){return CC},get Command(){return Yp},get TextEdit(){return Ul},get ChangeAnnotation(){return qg},get ChangeAnnotationIdentifier(){return er},get AnnotatedTextEdit(){return jc},get TextDocumentEdit(){return yC},get CreateFile(){return $0},get RenameFile(){return G0},get DeleteFile(){return Y0},get WorkspaceEdit(){return rM},WorkspaceChange:PMe,get TextDocumentIdentifier(){return Qq},get VersionedTextDocumentIdentifier(){return jq},get OptionalVersionedTextDocumentIdentifier(){return SC},get TextDocumentItem(){return Kq},get MarkupKind(){return sM},get MarkupContent(){return J0},get CompletionItemKind(){return qq},get InsertTextFormat(){return $q},get CompletionItemTag(){return Gq},get InsertReplaceEdit(){return Yq},get InsertTextMode(){return Jq},get CompletionItemLabelDetails(){return Xq},get CompletionItem(){return Zq},get CompletionList(){return e$},get MarkedString(){return DC},get Hover(){return t$},get ParameterInformation(){return i$},get SignatureInformation(){return n$},get DocumentHighlightKind(){return o$},get DocumentHighlight(){return r$},get SymbolKind(){return s$},get SymbolTag(){return a$},get SymbolInformation(){return l$},get WorkspaceSymbol(){return c$},get DocumentSymbol(){return d$},get CodeActionKind(){return h$},get CodeActionTriggerKind(){return xC},get CodeActionContext(){return u$},get CodeAction(){return g$},get CodeLens(){return p$},get FormattingOptions(){return m$},get DocumentLink(){return f$},get SelectionRange(){return _$},get SemanticTokenTypes(){return v$},get SemanticTokenModifiers(){return A$},get SemanticTokens(){return b$},get InlineValueText(){return w$},get InlineValueVariableLookup(){return C$},get InlineValueEvaluatableExpression(){return y$},get InlineValueContext(){return S$},get InlayHintKind(){return aM},get InlayHintLabelPart(){return lM},get InlayHint(){return D$},get WorkspaceFolder(){return x$},EOL:OMe,get TextDocument(){return k$}},Symbol.toStringTag,{value:"Module"})),mX=aX(WMe),Bn={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ProtocolNotificationType=i.ProtocolNotificationType0=i.ProtocolRequestType=i.ProtocolRequestType0=i.RegistrationType=i.MessageDirection=void 0;let e=fm;(function(a){a.clientToServer="clientToServer",a.serverToClient="serverToClient",a.both="both"})(i.MessageDirection||(i.MessageDirection={}));class t{constructor(l){this.method=l}}i.RegistrationType=t;class n extends e.RequestType0{constructor(l){super(l)}}i.ProtocolRequestType0=n;class o extends e.RequestType{constructor(l){super(l,e.ParameterStructures.byName)}}i.ProtocolRequestType=o;class r extends e.NotificationType0{constructor(l){super(l)}}i.ProtocolNotificationType0=r;class s extends e.NotificationType{constructor(l){super(l,e.ParameterStructures.byName)}}i.ProtocolNotificationType=s})(Bn);var Wce={},Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.objectLiteral=Un.typedArray=Un.stringArray=Un.array=Un.func=Un.error=Un.number=Un.string=Un.boolean=void 0;function zMe(i){return i===!0||i===!1}Un.boolean=zMe;function zce(i){return typeof i=="string"||i instanceof String}Un.string=zce;function VMe(i){return typeof i=="number"||i instanceof Number}Un.number=VMe;function UMe(i){return i instanceof Error}Un.error=UMe;function QMe(i){return typeof i=="function"}Un.func=QMe;function Vce(i){return Array.isArray(i)}Un.array=Vce;function jMe(i){return Vce(i)&&i.every(e=>zce(e))}Un.stringArray=jMe;function KMe(i,e){return Array.isArray(i)&&i.every(e)}Un.typedArray=KMe;function qMe(i){return i!==null&&typeof i=="object"}Un.objectLiteral=qMe;var Uce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ImplementationRequest=void 0;let e=Bn;(function(t){t.method="textDocument/implementation",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.ImplementationRequest||(i.ImplementationRequest={}))})(Uce);var Qce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.TypeDefinitionRequest=void 0;let e=Bn;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.TypeDefinitionRequest||(i.TypeDefinitionRequest={}))})(Qce);var jce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DidChangeWorkspaceFoldersNotification=i.WorkspaceFoldersRequest=void 0;let e=Bn;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=e.MessageDirection.serverToClient,t.type=new e.ProtocolRequestType0(t.method)})(i.WorkspaceFoldersRequest||(i.WorkspaceFoldersRequest={})),function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolNotificationType(t.method)}(i.DidChangeWorkspaceFoldersNotification||(i.DidChangeWorkspaceFoldersNotification={}))})(jce);var Kce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ConfigurationRequest=void 0;let e=Bn;(function(t){t.method="workspace/configuration",t.messageDirection=e.MessageDirection.serverToClient,t.type=new e.ProtocolRequestType(t.method)})(i.ConfigurationRequest||(i.ConfigurationRequest={}))})(Kce);var qce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ColorPresentationRequest=i.DocumentColorRequest=void 0;let e=Bn;(function(t){t.method="textDocument/documentColor",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.DocumentColorRequest||(i.DocumentColorRequest={})),function(t){t.method="textDocument/colorPresentation",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.ColorPresentationRequest||(i.ColorPresentationRequest={}))})(qce);var $ce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.FoldingRangeRequest=void 0;let e=Bn;(function(t){t.method="textDocument/foldingRange",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.FoldingRangeRequest||(i.FoldingRangeRequest={}))})($ce);var Gce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DeclarationRequest=void 0;let e=Bn;(function(t){t.method="textDocument/declaration",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.DeclarationRequest||(i.DeclarationRequest={}))})(Gce);var Yce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRangeRequest=void 0;let e=Bn;(function(t){t.method="textDocument/selectionRange",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.SelectionRangeRequest||(i.SelectionRangeRequest={}))})(Yce);var Jce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WorkDoneProgressCancelNotification=i.WorkDoneProgressCreateRequest=i.WorkDoneProgress=void 0;let e=fm,t=Bn;(function(n){n.type=new e.ProgressType;function o(r){return r===n.type}n.is=o})(i.WorkDoneProgress||(i.WorkDoneProgress={})),function(n){n.method="window/workDoneProgress/create",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)}(i.WorkDoneProgressCreateRequest||(i.WorkDoneProgressCreateRequest={})),function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(i.WorkDoneProgressCancelNotification||(i.WorkDoneProgressCancelNotification={}))})(Jce);var Xce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CallHierarchyOutgoingCallsRequest=i.CallHierarchyIncomingCallsRequest=i.CallHierarchyPrepareRequest=void 0;let e=Bn;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.CallHierarchyPrepareRequest||(i.CallHierarchyPrepareRequest={})),function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.CallHierarchyIncomingCallsRequest||(i.CallHierarchyIncomingCallsRequest={})),function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.CallHierarchyOutgoingCallsRequest||(i.CallHierarchyOutgoingCallsRequest={}))})(Xce);var Zce={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SemanticTokensRefreshRequest=i.SemanticTokensRangeRequest=i.SemanticTokensDeltaRequest=i.SemanticTokensRequest=i.SemanticTokensRegistrationType=i.TokenFormat=void 0;let e=Bn;(function(n){n.Relative="relative"})(i.TokenFormat||(i.TokenFormat={}));var t;(function(n){n.method="textDocument/semanticTokens",n.type=new e.RegistrationType(n.method)})(t=i.SemanticTokensRegistrationType||(i.SemanticTokensRegistrationType={})),function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method),n.registrationMethod=t.method}(i.SemanticTokensRequest||(i.SemanticTokensRequest={})),function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method),n.registrationMethod=t.method}(i.SemanticTokensDeltaRequest||(i.SemanticTokensDeltaRequest={})),function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method),n.registrationMethod=t.method}(i.SemanticTokensRangeRequest||(i.SemanticTokensRangeRequest={})),function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType0(n.method)}(i.SemanticTokensRefreshRequest||(i.SemanticTokensRefreshRequest={}))})(Zce);var ede={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ShowDocumentRequest=void 0;let e=Bn;(function(t){t.method="window/showDocument",t.messageDirection=e.MessageDirection.serverToClient,t.type=new e.ProtocolRequestType(t.method)})(i.ShowDocumentRequest||(i.ShowDocumentRequest={}))})(ede);var tde={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.LinkedEditingRangeRequest=void 0;let e=Bn;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.LinkedEditingRangeRequest||(i.LinkedEditingRangeRequest={}))})(tde);var ide={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WillDeleteFilesRequest=i.DidDeleteFilesNotification=i.DidRenameFilesNotification=i.WillRenameFilesRequest=i.DidCreateFilesNotification=i.WillCreateFilesRequest=i.FileOperationPatternKind=void 0;let e=Bn;(function(t){t.file="file",t.folder="folder"})(i.FileOperationPatternKind||(i.FileOperationPatternKind={})),function(t){t.method="workspace/willCreateFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.WillCreateFilesRequest||(i.WillCreateFilesRequest={})),function(t){t.method="workspace/didCreateFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolNotificationType(t.method)}(i.DidCreateFilesNotification||(i.DidCreateFilesNotification={})),function(t){t.method="workspace/willRenameFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.WillRenameFilesRequest||(i.WillRenameFilesRequest={})),function(t){t.method="workspace/didRenameFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolNotificationType(t.method)}(i.DidRenameFilesNotification||(i.DidRenameFilesNotification={})),function(t){t.method="workspace/didDeleteFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolNotificationType(t.method)}(i.DidDeleteFilesNotification||(i.DidDeleteFilesNotification={})),function(t){t.method="workspace/willDeleteFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.WillDeleteFilesRequest||(i.WillDeleteFilesRequest={}))})(ide);var nde={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.MonikerRequest=i.MonikerKind=i.UniquenessLevel=void 0;let e=Bn;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(i.UniquenessLevel||(i.UniquenessLevel={})),function(t){t.$import="import",t.$export="export",t.local="local"}(i.MonikerKind||(i.MonikerKind={})),function(t){t.method="textDocument/moniker",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.MonikerRequest||(i.MonikerRequest={}))})(nde);var ode={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.TypeHierarchySubtypesRequest=i.TypeHierarchySupertypesRequest=i.TypeHierarchyPrepareRequest=void 0;let e=Bn;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.TypeHierarchyPrepareRequest||(i.TypeHierarchyPrepareRequest={})),function(t){t.method="typeHierarchy/supertypes",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.TypeHierarchySupertypesRequest||(i.TypeHierarchySupertypesRequest={})),function(t){t.method="typeHierarchy/subtypes",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.TypeHierarchySubtypesRequest||(i.TypeHierarchySubtypesRequest={}))})(ode);var rde={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.InlineValueRefreshRequest=i.InlineValueRequest=void 0;let e=Bn;(function(t){t.method="textDocument/inlineValue",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.InlineValueRequest||(i.InlineValueRequest={})),function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType0(t.method)}(i.InlineValueRefreshRequest||(i.InlineValueRefreshRequest={}))})(rde);var sde={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.InlayHintRefreshRequest=i.InlayHintResolveRequest=i.InlayHintRequest=void 0;let e=Bn;(function(t){t.method="textDocument/inlayHint",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.InlayHintRequest||(i.InlayHintRequest={})),function(t){t.method="inlayHint/resolve",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.InlayHintResolveRequest||(i.InlayHintResolveRequest={})),function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType0(t.method)}(i.InlayHintRefreshRequest||(i.InlayHintRefreshRequest={}))})(sde);var ade={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DiagnosticRefreshRequest=i.WorkspaceDiagnosticRequest=i.DocumentDiagnosticRequest=i.DocumentDiagnosticReportKind=i.DiagnosticServerCancellationData=void 0;let e=fm,t=Un,n=Bn;(function(o){function r(s){let a=s;return a&&t.boolean(a.retriggerRequest)}o.is=r})(i.DiagnosticServerCancellationData||(i.DiagnosticServerCancellationData={})),function(o){o.Full="full",o.Unchanged="unchanged"}(i.DocumentDiagnosticReportKind||(i.DocumentDiagnosticReportKind={})),function(o){o.method="textDocument/diagnostic",o.messageDirection=n.MessageDirection.clientToServer,o.type=new n.ProtocolRequestType(o.method),o.partialResult=new e.ProgressType}(i.DocumentDiagnosticRequest||(i.DocumentDiagnosticRequest={})),function(o){o.method="workspace/diagnostic",o.messageDirection=n.MessageDirection.clientToServer,o.type=new n.ProtocolRequestType(o.method),o.partialResult=new e.ProgressType}(i.WorkspaceDiagnosticRequest||(i.WorkspaceDiagnosticRequest={})),function(o){o.method="workspace/diagnostic/refresh",o.messageDirection=n.MessageDirection.clientToServer,o.type=new n.ProtocolRequestType0(o.method)}(i.DiagnosticRefreshRequest||(i.DiagnosticRefreshRequest={}))})(ade);var lde={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DidCloseNotebookDocumentNotification=i.DidSaveNotebookDocumentNotification=i.DidChangeNotebookDocumentNotification=i.NotebookCellArrayChange=i.DidOpenNotebookDocumentNotification=i.NotebookDocumentSyncRegistrationType=i.NotebookDocument=i.NotebookCell=i.ExecutionSummary=i.NotebookCellKind=void 0;let e=mX,t=Un,n=Bn;var o;(function(l){l.Markup=1,l.Code=2;function c(d){return d===1||d===2}l.is=c})(o=i.NotebookCellKind||(i.NotebookCellKind={}));var r;(function(l){function c(u,g){let p={executionOrder:u};return(g===!0||g===!1)&&(p.success=g),p}l.create=c;function d(u){let g=u;return t.objectLiteral(g)&&e.uinteger.is(g.executionOrder)&&(g.success===void 0||t.boolean(g.success))}l.is=d;function h(u,g){return u===g?!0:u==null||g===null||g===void 0?!1:u.executionOrder===g.executionOrder&&u.success===g.success}l.equals=h})(r=i.ExecutionSummary||(i.ExecutionSummary={}));var s;(function(l){function c(g,p){return{kind:g,document:p}}l.create=c;function d(g){let p=g;return t.objectLiteral(p)&&o.is(p.kind)&&e.DocumentUri.is(p.document)&&(p.metadata===void 0||t.objectLiteral(p.metadata))}l.is=d;function h(g,p){let f=new Set;return g.document!==p.document&&f.add("document"),g.kind!==p.kind&&f.add("kind"),g.executionSummary!==p.executionSummary&&f.add("executionSummary"),(g.metadata!==void 0||p.metadata!==void 0)&&!u(g.metadata,p.metadata)&&f.add("metadata"),(g.executionSummary!==void 0||p.executionSummary!==void 0)&&!r.equals(g.executionSummary,p.executionSummary)&&f.add("executionSummary"),f}l.diff=h;function u(g,p){if(g===p)return!0;if(g==null||p===null||p===void 0||typeof g!=typeof p||typeof g!="object")return!1;let f=Array.isArray(g),v=Array.isArray(p);if(f!==v)return!1;if(f&&v){if(g.length!==p.length)return!1;for(let b=0;b<g.length;b++)if(!u(g[b],p[b]))return!1}if(t.objectLiteral(g)&&t.objectLiteral(p)){let b=Object.keys(g),A=Object.keys(p);if(b.length!==A.length||(b.sort(),A.sort(),!u(b,A)))return!1;for(let w=0;w<b.length;w++){let C=b[w];if(!u(g[C],p[C]))return!1}}return!0}})(s=i.NotebookCell||(i.NotebookCell={})),function(l){function c(h,u,g,p){return{uri:h,notebookType:u,version:g,cells:p}}l.create=c;function d(h){let u=h;return t.objectLiteral(u)&&t.string(u.uri)&&e.integer.is(u.version)&&t.typedArray(u.cells,s.is)}l.is=d}(i.NotebookDocument||(i.NotebookDocument={}));var a;(function(l){l.method="notebookDocument/sync",l.messageDirection=n.MessageDirection.clientToServer,l.type=new n.RegistrationType(l.method)})(a=i.NotebookDocumentSyncRegistrationType||(i.NotebookDocumentSyncRegistrationType={})),function(l){l.method="notebookDocument/didOpen",l.messageDirection=n.MessageDirection.clientToServer,l.type=new n.ProtocolNotificationType(l.method),l.registrationMethod=a.method}(i.DidOpenNotebookDocumentNotification||(i.DidOpenNotebookDocumentNotification={})),function(l){function c(h){let u=h;return t.objectLiteral(u)&&e.uinteger.is(u.start)&&e.uinteger.is(u.deleteCount)&&(u.cells===void 0||t.typedArray(u.cells,s.is))}l.is=c;function d(h,u,g){let p={start:h,deleteCount:u};return g!==void 0&&(p.cells=g),p}l.create=d}(i.NotebookCellArrayChange||(i.NotebookCellArrayChange={})),function(l){l.method="notebookDocument/didChange",l.messageDirection=n.MessageDirection.clientToServer,l.type=new n.ProtocolNotificationType(l.method),l.registrationMethod=a.method}(i.DidChangeNotebookDocumentNotification||(i.DidChangeNotebookDocumentNotification={})),function(l){l.method="notebookDocument/didSave",l.messageDirection=n.MessageDirection.clientToServer,l.type=new n.ProtocolNotificationType(l.method),l.registrationMethod=a.method}(i.DidSaveNotebookDocumentNotification||(i.DidSaveNotebookDocumentNotification={})),function(l){l.method="notebookDocument/didClose",l.messageDirection=n.MessageDirection.clientToServer,l.type=new n.ProtocolNotificationType(l.method),l.registrationMethod=a.method}(i.DidCloseNotebookDocumentNotification||(i.DidCloseNotebookDocumentNotification={}))})(lde);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WorkspaceSymbolRequest=i.CodeActionResolveRequest=i.CodeActionRequest=i.DocumentSymbolRequest=i.DocumentHighlightRequest=i.ReferencesRequest=i.DefinitionRequest=i.SignatureHelpRequest=i.SignatureHelpTriggerKind=i.HoverRequest=i.CompletionResolveRequest=i.CompletionRequest=i.CompletionTriggerKind=i.PublishDiagnosticsNotification=i.WatchKind=i.RelativePattern=i.FileChangeType=i.DidChangeWatchedFilesNotification=i.WillSaveTextDocumentWaitUntilRequest=i.WillSaveTextDocumentNotification=i.TextDocumentSaveReason=i.DidSaveTextDocumentNotification=i.DidCloseTextDocumentNotification=i.DidChangeTextDocumentNotification=i.TextDocumentContentChangeEvent=i.DidOpenTextDocumentNotification=i.TextDocumentSyncKind=i.TelemetryEventNotification=i.LogMessageNotification=i.ShowMessageRequest=i.ShowMessageNotification=i.MessageType=i.DidChangeConfigurationNotification=i.ExitNotification=i.ShutdownRequest=i.InitializedNotification=i.InitializeErrorCodes=i.InitializeRequest=i.WorkDoneProgressOptions=i.TextDocumentRegistrationOptions=i.StaticRegistrationOptions=i.PositionEncodingKind=i.FailureHandlingKind=i.ResourceOperationKind=i.UnregistrationRequest=i.RegistrationRequest=i.DocumentSelector=i.NotebookCellTextDocumentFilter=i.NotebookDocumentFilter=i.TextDocumentFilter=void 0,i.TypeHierarchySubtypesRequest=i.TypeHierarchyPrepareRequest=i.MonikerRequest=i.MonikerKind=i.UniquenessLevel=i.WillDeleteFilesRequest=i.DidDeleteFilesNotification=i.WillRenameFilesRequest=i.DidRenameFilesNotification=i.WillCreateFilesRequest=i.DidCreateFilesNotification=i.FileOperationPatternKind=i.LinkedEditingRangeRequest=i.ShowDocumentRequest=i.SemanticTokensRegistrationType=i.SemanticTokensRefreshRequest=i.SemanticTokensRangeRequest=i.SemanticTokensDeltaRequest=i.SemanticTokensRequest=i.TokenFormat=i.CallHierarchyPrepareRequest=i.CallHierarchyOutgoingCallsRequest=i.CallHierarchyIncomingCallsRequest=i.WorkDoneProgressCancelNotification=i.WorkDoneProgressCreateRequest=i.WorkDoneProgress=i.SelectionRangeRequest=i.DeclarationRequest=i.FoldingRangeRequest=i.ColorPresentationRequest=i.DocumentColorRequest=i.ConfigurationRequest=i.DidChangeWorkspaceFoldersNotification=i.WorkspaceFoldersRequest=i.TypeDefinitionRequest=i.ImplementationRequest=i.ApplyWorkspaceEditRequest=i.ExecuteCommandRequest=i.PrepareRenameRequest=i.RenameRequest=i.PrepareSupportDefaultBehavior=i.DocumentOnTypeFormattingRequest=i.DocumentRangeFormattingRequest=i.DocumentFormattingRequest=i.DocumentLinkResolveRequest=i.DocumentLinkRequest=i.CodeLensRefreshRequest=i.CodeLensResolveRequest=i.CodeLensRequest=i.WorkspaceSymbolResolveRequest=void 0,i.DidCloseNotebookDocumentNotification=i.DidSaveNotebookDocumentNotification=i.DidChangeNotebookDocumentNotification=i.NotebookCellArrayChange=i.DidOpenNotebookDocumentNotification=i.NotebookDocumentSyncRegistrationType=i.NotebookDocument=i.NotebookCell=i.ExecutionSummary=i.NotebookCellKind=i.DiagnosticRefreshRequest=i.WorkspaceDiagnosticRequest=i.DocumentDiagnosticRequest=i.DocumentDiagnosticReportKind=i.DiagnosticServerCancellationData=i.InlayHintRefreshRequest=i.InlayHintResolveRequest=i.InlayHintRequest=i.InlineValueRefreshRequest=i.InlineValueRequest=i.TypeHierarchySupertypesRequest=void 0;let e=Bn,t=mX,n=Un,o=Uce;Object.defineProperty(i,"ImplementationRequest",{enumerable:!0,get:function(){return o.ImplementationRequest}});let r=Qce;Object.defineProperty(i,"TypeDefinitionRequest",{enumerable:!0,get:function(){return r.TypeDefinitionRequest}});let s=jce;Object.defineProperty(i,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return s.WorkspaceFoldersRequest}}),Object.defineProperty(i,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return s.DidChangeWorkspaceFoldersNotification}});let a=Kce;Object.defineProperty(i,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});let l=qce;Object.defineProperty(i,"DocumentColorRequest",{enumerable:!0,get:function(){return l.DocumentColorRequest}}),Object.defineProperty(i,"ColorPresentationRequest",{enumerable:!0,get:function(){return l.ColorPresentationRequest}});let c=$ce;Object.defineProperty(i,"FoldingRangeRequest",{enumerable:!0,get:function(){return c.FoldingRangeRequest}});let d=Gce;Object.defineProperty(i,"DeclarationRequest",{enumerable:!0,get:function(){return d.DeclarationRequest}});let h=Yce;Object.defineProperty(i,"SelectionRangeRequest",{enumerable:!0,get:function(){return h.SelectionRangeRequest}});let u=Jce;Object.defineProperty(i,"WorkDoneProgress",{enumerable:!0,get:function(){return u.WorkDoneProgress}}),Object.defineProperty(i,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return u.WorkDoneProgressCreateRequest}}),Object.defineProperty(i,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return u.WorkDoneProgressCancelNotification}});let g=Xce;Object.defineProperty(i,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(i,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(i,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return g.CallHierarchyPrepareRequest}});let p=Zce;Object.defineProperty(i,"TokenFormat",{enumerable:!0,get:function(){return p.TokenFormat}}),Object.defineProperty(i,"SemanticTokensRequest",{enumerable:!0,get:function(){return p.SemanticTokensRequest}}),Object.defineProperty(i,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return p.SemanticTokensDeltaRequest}}),Object.defineProperty(i,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return p.SemanticTokensRangeRequest}}),Object.defineProperty(i,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return p.SemanticTokensRefreshRequest}}),Object.defineProperty(i,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return p.SemanticTokensRegistrationType}});let f=ede;Object.defineProperty(i,"ShowDocumentRequest",{enumerable:!0,get:function(){return f.ShowDocumentRequest}});let v=tde;Object.defineProperty(i,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return v.LinkedEditingRangeRequest}});let b=ide;Object.defineProperty(i,"FileOperationPatternKind",{enumerable:!0,get:function(){return b.FileOperationPatternKind}}),Object.defineProperty(i,"DidCreateFilesNotification",{enumerable:!0,get:function(){return b.DidCreateFilesNotification}}),Object.defineProperty(i,"WillCreateFilesRequest",{enumerable:!0,get:function(){return b.WillCreateFilesRequest}}),Object.defineProperty(i,"DidRenameFilesNotification",{enumerable:!0,get:function(){return b.DidRenameFilesNotification}}),Object.defineProperty(i,"WillRenameFilesRequest",{enumerable:!0,get:function(){return b.WillRenameFilesRequest}}),Object.defineProperty(i,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return b.DidDeleteFilesNotification}}),Object.defineProperty(i,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return b.WillDeleteFilesRequest}});let A=nde;Object.defineProperty(i,"UniquenessLevel",{enumerable:!0,get:function(){return A.UniquenessLevel}}),Object.defineProperty(i,"MonikerKind",{enumerable:!0,get:function(){return A.MonikerKind}}),Object.defineProperty(i,"MonikerRequest",{enumerable:!0,get:function(){return A.MonikerRequest}});let w=ode;Object.defineProperty(i,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return w.TypeHierarchyPrepareRequest}}),Object.defineProperty(i,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return w.TypeHierarchySubtypesRequest}}),Object.defineProperty(i,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return w.TypeHierarchySupertypesRequest}});let C=rde;Object.defineProperty(i,"InlineValueRequest",{enumerable:!0,get:function(){return C.InlineValueRequest}}),Object.defineProperty(i,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return C.InlineValueRefreshRequest}});let k=sde;Object.defineProperty(i,"InlayHintRequest",{enumerable:!0,get:function(){return k.InlayHintRequest}}),Object.defineProperty(i,"InlayHintResolveRequest",{enumerable:!0,get:function(){return k.InlayHintResolveRequest}}),Object.defineProperty(i,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return k.InlayHintRefreshRequest}});let L=ade;Object.defineProperty(i,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return L.DiagnosticServerCancellationData}}),Object.defineProperty(i,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return L.DocumentDiagnosticReportKind}}),Object.defineProperty(i,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return L.DocumentDiagnosticRequest}}),Object.defineProperty(i,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return L.WorkspaceDiagnosticRequest}}),Object.defineProperty(i,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return L.DiagnosticRefreshRequest}});let S=lde;Object.defineProperty(i,"NotebookCellKind",{enumerable:!0,get:function(){return S.NotebookCellKind}}),Object.defineProperty(i,"ExecutionSummary",{enumerable:!0,get:function(){return S.ExecutionSummary}}),Object.defineProperty(i,"NotebookCell",{enumerable:!0,get:function(){return S.NotebookCell}}),Object.defineProperty(i,"NotebookDocument",{enumerable:!0,get:function(){return S.NotebookDocument}}),Object.defineProperty(i,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return S.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(i,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return S.DidOpenNotebookDocumentNotification}}),Object.defineProperty(i,"NotebookCellArrayChange",{enumerable:!0,get:function(){return S.NotebookCellArrayChange}}),Object.defineProperty(i,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return S.DidChangeNotebookDocumentNotification}}),Object.defineProperty(i,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return S.DidSaveNotebookDocumentNotification}}),Object.defineProperty(i,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return S.DidCloseNotebookDocumentNotification}});var y;(function(D){function K(oe){let ie=oe;return n.string(ie.language)||n.string(ie.scheme)||n.string(ie.pattern)}D.is=K})(y=i.TextDocumentFilter||(i.TextDocumentFilter={}));var M;(function(D){function K(oe){let ie=oe;return n.objectLiteral(ie)&&(n.string(ie.notebookType)||n.string(ie.scheme)||n.string(ie.pattern))}D.is=K})(M=i.NotebookDocumentFilter||(i.NotebookDocumentFilter={}));var O;(function(D){function K(oe){let ie=oe;return n.objectLiteral(ie)&&(n.string(ie.notebook)||M.is(ie.notebook))&&(ie.language===void 0||n.string(ie.language))}D.is=K})(O=i.NotebookCellTextDocumentFilter||(i.NotebookCellTextDocumentFilter={}));var H;(function(D){function K(oe){if(!Array.isArray(oe))return!1;for(let ie of oe)if(!n.string(ie)&&!y.is(ie)&&!O.is(ie))return!1;return!0}D.is=K})(H=i.DocumentSelector||(i.DocumentSelector={})),function(D){D.method="client/registerCapability",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolRequestType(D.method)}(i.RegistrationRequest||(i.RegistrationRequest={})),function(D){D.method="client/unregisterCapability",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolRequestType(D.method)}(i.UnregistrationRequest||(i.UnregistrationRequest={})),function(D){D.Create="create",D.Rename="rename",D.Delete="delete"}(i.ResourceOperationKind||(i.ResourceOperationKind={})),function(D){D.Abort="abort",D.Transactional="transactional",D.TextOnlyTransactional="textOnlyTransactional",D.Undo="undo"}(i.FailureHandlingKind||(i.FailureHandlingKind={})),function(D){D.UTF8="utf-8",D.UTF16="utf-16",D.UTF32="utf-32"}(i.PositionEncodingKind||(i.PositionEncodingKind={})),function(D){function K(oe){let ie=oe;return ie&&n.string(ie.id)&&ie.id.length>0}D.hasId=K}(i.StaticRegistrationOptions||(i.StaticRegistrationOptions={})),function(D){function K(oe){let ie=oe;return ie&&(ie.documentSelector===null||H.is(ie.documentSelector))}D.is=K}(i.TextDocumentRegistrationOptions||(i.TextDocumentRegistrationOptions={})),function(D){function K(ie){let ce=ie;return n.objectLiteral(ce)&&(ce.workDoneProgress===void 0||n.boolean(ce.workDoneProgress))}D.is=K;function oe(ie){let ce=ie;return ce&&n.boolean(ce.workDoneProgress)}D.hasWorkDoneProgress=oe}(i.WorkDoneProgressOptions||(i.WorkDoneProgressOptions={})),function(D){D.method="initialize",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.InitializeRequest||(i.InitializeRequest={})),function(D){D.unknownProtocolVersion=1}(i.InitializeErrorCodes||(i.InitializeErrorCodes={})),function(D){D.method="initialized",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType(D.method)}(i.InitializedNotification||(i.InitializedNotification={})),function(D){D.method="shutdown",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType0(D.method)}(i.ShutdownRequest||(i.ShutdownRequest={})),function(D){D.method="exit",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType0(D.method)}(i.ExitNotification||(i.ExitNotification={})),function(D){D.method="workspace/didChangeConfiguration",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType(D.method)}(i.DidChangeConfigurationNotification||(i.DidChangeConfigurationNotification={})),function(D){D.Error=1,D.Warning=2,D.Info=3,D.Log=4}(i.MessageType||(i.MessageType={})),function(D){D.method="window/showMessage",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolNotificationType(D.method)}(i.ShowMessageNotification||(i.ShowMessageNotification={})),function(D){D.method="window/showMessageRequest",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolRequestType(D.method)}(i.ShowMessageRequest||(i.ShowMessageRequest={})),function(D){D.method="window/logMessage",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolNotificationType(D.method)}(i.LogMessageNotification||(i.LogMessageNotification={})),function(D){D.method="telemetry/event",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolNotificationType(D.method)}(i.TelemetryEventNotification||(i.TelemetryEventNotification={})),function(D){D.None=0,D.Full=1,D.Incremental=2}(i.TextDocumentSyncKind||(i.TextDocumentSyncKind={})),function(D){D.method="textDocument/didOpen",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType(D.method)}(i.DidOpenTextDocumentNotification||(i.DidOpenTextDocumentNotification={})),function(D){function K(ie){let ce=ie;return ce!=null&&typeof ce.text=="string"&&ce.range!==void 0&&(ce.rangeLength===void 0||typeof ce.rangeLength=="number")}D.isIncremental=K;function oe(ie){let ce=ie;return ce!=null&&typeof ce.text=="string"&&ce.range===void 0&&ce.rangeLength===void 0}D.isFull=oe}(i.TextDocumentContentChangeEvent||(i.TextDocumentContentChangeEvent={})),function(D){D.method="textDocument/didChange",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType(D.method)}(i.DidChangeTextDocumentNotification||(i.DidChangeTextDocumentNotification={})),function(D){D.method="textDocument/didClose",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType(D.method)}(i.DidCloseTextDocumentNotification||(i.DidCloseTextDocumentNotification={})),function(D){D.method="textDocument/didSave",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType(D.method)}(i.DidSaveTextDocumentNotification||(i.DidSaveTextDocumentNotification={})),function(D){D.Manual=1,D.AfterDelay=2,D.FocusOut=3}(i.TextDocumentSaveReason||(i.TextDocumentSaveReason={})),function(D){D.method="textDocument/willSave",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType(D.method)}(i.WillSaveTextDocumentNotification||(i.WillSaveTextDocumentNotification={})),function(D){D.method="textDocument/willSaveWaitUntil",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.WillSaveTextDocumentWaitUntilRequest||(i.WillSaveTextDocumentWaitUntilRequest={})),function(D){D.method="workspace/didChangeWatchedFiles",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolNotificationType(D.method)}(i.DidChangeWatchedFilesNotification||(i.DidChangeWatchedFilesNotification={})),function(D){D.Created=1,D.Changed=2,D.Deleted=3}(i.FileChangeType||(i.FileChangeType={})),function(D){function K(oe){let ie=oe;return n.objectLiteral(ie)&&(t.URI.is(ie.baseUri)||t.WorkspaceFolder.is(ie.baseUri))&&n.string(ie.pattern)}D.is=K}(i.RelativePattern||(i.RelativePattern={})),function(D){D.Create=1,D.Change=2,D.Delete=4}(i.WatchKind||(i.WatchKind={})),function(D){D.method="textDocument/publishDiagnostics",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolNotificationType(D.method)}(i.PublishDiagnosticsNotification||(i.PublishDiagnosticsNotification={})),function(D){D.Invoked=1,D.TriggerCharacter=2,D.TriggerForIncompleteCompletions=3}(i.CompletionTriggerKind||(i.CompletionTriggerKind={})),function(D){D.method="textDocument/completion",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.CompletionRequest||(i.CompletionRequest={})),function(D){D.method="completionItem/resolve",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.CompletionResolveRequest||(i.CompletionResolveRequest={})),function(D){D.method="textDocument/hover",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.HoverRequest||(i.HoverRequest={})),function(D){D.Invoked=1,D.TriggerCharacter=2,D.ContentChange=3}(i.SignatureHelpTriggerKind||(i.SignatureHelpTriggerKind={})),function(D){D.method="textDocument/signatureHelp",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.SignatureHelpRequest||(i.SignatureHelpRequest={})),function(D){D.method="textDocument/definition",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.DefinitionRequest||(i.DefinitionRequest={})),function(D){D.method="textDocument/references",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.ReferencesRequest||(i.ReferencesRequest={})),function(D){D.method="textDocument/documentHighlight",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.DocumentHighlightRequest||(i.DocumentHighlightRequest={})),function(D){D.method="textDocument/documentSymbol",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.DocumentSymbolRequest||(i.DocumentSymbolRequest={})),function(D){D.method="textDocument/codeAction",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.CodeActionRequest||(i.CodeActionRequest={})),function(D){D.method="codeAction/resolve",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.CodeActionResolveRequest||(i.CodeActionResolveRequest={})),function(D){D.method="workspace/symbol",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.WorkspaceSymbolRequest||(i.WorkspaceSymbolRequest={})),function(D){D.method="workspaceSymbol/resolve",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.WorkspaceSymbolResolveRequest||(i.WorkspaceSymbolResolveRequest={})),function(D){D.method="textDocument/codeLens",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.CodeLensRequest||(i.CodeLensRequest={})),function(D){D.method="codeLens/resolve",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.CodeLensResolveRequest||(i.CodeLensResolveRequest={})),function(D){D.method="workspace/codeLens/refresh",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolRequestType0(D.method)}(i.CodeLensRefreshRequest||(i.CodeLensRefreshRequest={})),function(D){D.method="textDocument/documentLink",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.DocumentLinkRequest||(i.DocumentLinkRequest={})),function(D){D.method="documentLink/resolve",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.DocumentLinkResolveRequest||(i.DocumentLinkResolveRequest={})),function(D){D.method="textDocument/formatting",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.DocumentFormattingRequest||(i.DocumentFormattingRequest={})),function(D){D.method="textDocument/rangeFormatting",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.DocumentRangeFormattingRequest||(i.DocumentRangeFormattingRequest={})),function(D){D.method="textDocument/onTypeFormatting",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.DocumentOnTypeFormattingRequest||(i.DocumentOnTypeFormattingRequest={})),function(D){D.Identifier=1}(i.PrepareSupportDefaultBehavior||(i.PrepareSupportDefaultBehavior={})),function(D){D.method="textDocument/rename",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.RenameRequest||(i.RenameRequest={})),function(D){D.method="textDocument/prepareRename",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.PrepareRenameRequest||(i.PrepareRenameRequest={})),function(D){D.method="workspace/executeCommand",D.messageDirection=e.MessageDirection.clientToServer,D.type=new e.ProtocolRequestType(D.method)}(i.ExecuteCommandRequest||(i.ExecuteCommandRequest={})),function(D){D.method="workspace/applyEdit",D.messageDirection=e.MessageDirection.serverToClient,D.type=new e.ProtocolRequestType("workspace/applyEdit")}(i.ApplyWorkspaceEditRequest||(i.ApplyWorkspaceEditRequest={}))})(Wce);var RN={};Object.defineProperty(RN,"__esModule",{value:!0});RN.createProtocolConnection=void 0;var Jie=fm;function $Me(i,e,t,n){return Jie.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Jie.createMessageConnection)(i,e,t,n)}RN.createProtocolConnection=$Me;(function(i){var e=ga&&ga.__createBinding||(Object.create?function(o,r,s,a){a===void 0&&(a=s);var l=Object.getOwnPropertyDescriptor(r,s);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(o,a,l)}:function(o,r,s,a){a===void 0&&(a=s),o[a]=r[s]}),t=ga&&ga.__exportStar||function(o,r){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,o,s)};Object.defineProperty(i,"__esModule",{value:!0}),i.LSPErrorCodes=i.createProtocolConnection=void 0,t(fm,i),t(mX,i),t(Bn,i),t(Wce,i);var n=RN;Object.defineProperty(i,"createProtocolConnection",{enumerable:!0,get:function(){return n.createProtocolConnection}}),function(o){o.lspReservedErrorRangeStart=-32899,o.RequestFailed=-32803,o.ServerCancelled=-32802,o.ContentModified=-32801,o.RequestCancelled=-32800,o.lspReservedErrorRangeEnd=-32800}(i.LSPErrorCodes||(i.LSPErrorCodes={}))})(Hce);(function(i){var e=ga&&ga.__createBinding||(Object.create?function(r,s,a,l){l===void 0&&(l=a);var c=Object.getOwnPropertyDescriptor(s,a);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(r,l,c)}:function(r,s,a,l){l===void 0&&(l=a),r[l]=s[a]}),t=ga&&ga.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,r,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.createProtocolConnection=void 0;let n=eM;t(eM,i),t(Hce,i);function o(r,s,a,l){return(0,n.createMessageConnection)(r,s,a,l)}i.createProtocolConnection=o})($t);var FN={},Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.asPromise=Vi.thenable=Vi.typedArray=Vi.stringArray=Vi.array=Vi.func=Vi.error=Vi.number=Vi.string=Vi.boolean=void 0;function GMe(i){return i===!0||i===!1}Vi.boolean=GMe;function cde(i){return typeof i=="string"||i instanceof String}Vi.string=cde;function YMe(i){return typeof i=="number"||i instanceof Number}Vi.number=YMe;function JMe(i){return i instanceof Error}Vi.error=JMe;function dde(i){return typeof i=="function"}Vi.func=dde;function hde(i){return Array.isArray(i)}Vi.array=hde;function XMe(i){return hde(i)&&i.every(e=>cde(e))}Vi.stringArray=XMe;function ZMe(i,e){return Array.isArray(i)&&i.every(e)}Vi.typedArray=ZMe;function ude(i){return i&&dde(i.then)}Vi.thenable=ude;function eNe(i){return i instanceof Promise?i:ude(i)?new Promise((e,t)=>{i.then(n=>e(n),n=>t(n))}):Promise.resolve(i)}Vi.asPromise=eNe;var Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.forEach=Do.mapAsync=Do.map=Do.clearTestMode=Do.setTestMode=Do.Semaphore=Do.Delayer=void 0;var iy=$t,E$=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,iy.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Do.Delayer=E$;var L$=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,iy.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Do.Semaphore=L$;var fX=!1;function tNe(){fX=!0}Do.setTestMode=tNe;function iNe(){fX=!1}Do.clearTestMode=iNe;var Xie=15,kC=class{constructor(e=Xie){this.yieldAfter=fX===!0?Math.max(e,2):Math.max(e,Xie),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function nNe(i,e,t,n){if(i.length===0)return[];let o=new Array(i.length),r=new kC(n?.yieldAfter);function s(l){r.start();for(let c=l;c<i.length;c++)if(o[c]=e(i[c]),r.shouldYield())return n!=null&&n.yieldCallback&&n.yieldCallback(),c+1;return-1}let a=s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(l=>{(0,iy.RAL)().timer.setImmediate(()=>{l(s(a))})});return o}Do.map=nNe;async function oNe(i,e,t,n){if(i.length===0)return[];let o=new Array(i.length),r=new kC(n?.yieldAfter);async function s(l){r.start();for(let c=l;c<i.length;c++)if(o[c]=await e(i[c],t),r.shouldYield())return n!=null&&n.yieldCallback&&n.yieldCallback(),c+1;return-1}let a=await s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(l=>{(0,iy.RAL)().timer.setImmediate(()=>{l(s(a))})});return o}Do.mapAsync=oNe;async function rNe(i,e,t,n){if(i.length===0)return;let o=new kC(n?.yieldAfter);function r(a){o.start();for(let l=a;l<i.length;l++)if(e(i[l]),o.shouldYield())return n!=null&&n.yieldCallback&&n.yieldCallback(),l+1;return-1}let s=r(0);for(;s!==-1&&!(t!==void 0&&t.isCancellationRequested);)s=await new Promise(a=>{(0,iy.RAL)().timer.setImmediate(()=>{a(r(s))})})}Do.forEach=rNe;var BN={};Object.defineProperty(BN,"__esModule",{value:!0});var sNe=Ht,I$=class extends sNe.CompletionItem{constructor(e){super(e)}};BN.default=I$;var PN={};Object.defineProperty(PN,"__esModule",{value:!0});var aNe=Ht,T$=class extends aNe.CodeLens{constructor(e){super(e)}};PN.default=T$;var ON={};Object.defineProperty(ON,"__esModule",{value:!0});var lNe=Ht,M$=class extends lNe.DocumentLink{constructor(e,t){super(e,t)}};ON.default=M$;var HN={};Object.defineProperty(HN,"__esModule",{value:!0});var cNe=Ht,N$=class extends cNe.CodeAction{constructor(e,t){super(e),this.data=t}};HN.default=N$;var _X={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ProtocolDiagnostic=i.DiagnosticCode=void 0;let e=Ht,t=Vi;(function(o){function r(s){let a=s;return a!=null&&(t.number(a.value)||t.string(a.value))&&t.string(a.target)}o.is=r})(i.DiagnosticCode||(i.DiagnosticCode={}));class n extends e.Diagnostic{constructor(r,s,a,l){super(r,s,a),this.data=l,this.hasDiagnosticCode=!1}}i.ProtocolDiagnostic=n})(_X);var WN={};Object.defineProperty(WN,"__esModule",{value:!0});var dNe=Ht,R$=class extends dNe.CallHierarchyItem{constructor(e,t,n,o,r,s,a){super(e,t,n,o,r,s),a!==void 0&&(this.data=a)}};WN.default=R$;var zN={};Object.defineProperty(zN,"__esModule",{value:!0});var hNe=Ht,F$=class extends hNe.TypeHierarchyItem{constructor(e,t,n,o,r,s,a){super(e,t,n,o,r,s),a!==void 0&&(this.data=a)}};zN.default=F$;var VN={};Object.defineProperty(VN,"__esModule",{value:!0});var vS=Ht,B$=class extends vS.SymbolInformation{constructor(e,t,n,o,r){let s=!(o instanceof vS.Uri);super(e,t,n,s?o:new vS.Location(o,new vS.Range(0,0,0,0))),this.hasRange=s,r!==void 0&&(this.data=r)}};VN.default=B$;var UN={};Object.defineProperty(UN,"__esModule",{value:!0});var uNe=Ht,P$=class extends uNe.InlayHint{constructor(e,t,n){super(e,t,n)}};UN.default=P$;Object.defineProperty(FN,"__esModule",{value:!0});FN.createConverter=void 0;var so=Ht,Yt=$t,Pm=Vi,Zie=Do,gNe=BN,pNe=PN,mNe=ON,fNe=HN,ene=_X,_Ne=WN,vNe=zN,ANe=VN,bNe=UN,O$;(function(i){function e(t){let n=t;return n&&!!n.inserting&&!!n.replacing}i.is=e})(O$||(O$={}));function wNe(i){let e=i||(N=>N.toString());function t(N){return e(N)}function n(N){return{uri:e(N.uri)}}function o(N){return{uri:e(N.uri),languageId:N.languageId,version:N.version,text:N.getText()}}function r(N){return{uri:e(N.uri),version:N.version}}function s(N){return{textDocument:o(N)}}function a(N){let de=N;return!!de.document&&!!de.contentChanges}function l(N){let de=N;return!!de.uri&&!!de.version}function c(N){if(l(N))return{textDocument:{uri:e(N.uri),version:N.version},contentChanges:[{text:N.getText()}]};if(a(N)){let de=N.document;return{textDocument:{uri:e(de.uri),version:de.version},contentChanges:N.contentChanges.map(He=>{let ei=He.range;return{range:{start:{line:ei.start.line,character:ei.start.character},end:{line:ei.end.line,character:ei.end.character}},rangeLength:He.rangeLength,text:He.text}})}}else throw Error("Unsupported text document change parameter")}function d(N){return{textDocument:n(N)}}function h(N,de=!1){let He={textDocument:n(N)};return de&&(He.text=N.getText()),He}function u(N){switch(N){case so.TextDocumentSaveReason.Manual:return Yt.TextDocumentSaveReason.Manual;case so.TextDocumentSaveReason.AfterDelay:return Yt.TextDocumentSaveReason.AfterDelay;case so.TextDocumentSaveReason.FocusOut:return Yt.TextDocumentSaveReason.FocusOut}return Yt.TextDocumentSaveReason.Manual}function g(N){return{textDocument:n(N.document),reason:u(N.reason)}}function p(N){return{files:N.files.map(de=>({uri:e(de)}))}}function f(N){return{files:N.files.map(de=>({oldUri:e(de.oldUri),newUri:e(de.newUri)}))}}function v(N){return{files:N.files.map(de=>({uri:e(de)}))}}function b(N){return{files:N.files.map(de=>({uri:e(de)}))}}function A(N){return{files:N.files.map(de=>({oldUri:e(de.oldUri),newUri:e(de.newUri)}))}}function w(N){return{files:N.files.map(de=>({uri:e(de)}))}}function C(N,de){return{textDocument:n(N),position:oe(de)}}function k(N){switch(N){case so.CompletionTriggerKind.TriggerCharacter:return Yt.CompletionTriggerKind.TriggerCharacter;case so.CompletionTriggerKind.TriggerForIncompleteCompletions:return Yt.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return Yt.CompletionTriggerKind.Invoked}}function L(N,de,He){return{textDocument:n(N),position:oe(de),context:{triggerKind:k(He.triggerKind),triggerCharacter:He.triggerCharacter}}}function S(N){switch(N){case so.SignatureHelpTriggerKind.Invoke:return Yt.SignatureHelpTriggerKind.Invoked;case so.SignatureHelpTriggerKind.TriggerCharacter:return Yt.SignatureHelpTriggerKind.TriggerCharacter;case so.SignatureHelpTriggerKind.ContentChange:return Yt.SignatureHelpTriggerKind.ContentChange}}function y(N){return{label:N.label}}function M(N){return N.map(y)}function O(N){return{label:N.label,parameters:M(N.parameters)}}function H(N){return N.map(O)}function D(N){return N===void 0?N:{signatures:H(N.signatures),activeSignature:N.activeSignature,activeParameter:N.activeParameter}}function K(N,de,He){return{textDocument:n(N),position:oe(de),context:{isRetrigger:He.isRetrigger,triggerCharacter:He.triggerCharacter,triggerKind:S(He.triggerKind),activeSignatureHelp:D(He.activeSignatureHelp)}}}function oe(N){return{line:N.line,character:N.character}}function ie(N){return N==null?N:{line:N.line>Yt.uinteger.MAX_VALUE?Yt.uinteger.MAX_VALUE:N.line,character:N.character>Yt.uinteger.MAX_VALUE?Yt.uinteger.MAX_VALUE:N.character}}function ce(N,de){return Zie.map(N,ie,de)}function se(N){return N==null?N:{start:ie(N.start),end:ie(N.end)}}function _e(N){return N==null?N:Yt.Location.create(t(N.uri),se(N.range))}function Ve(N){switch(N){case so.DiagnosticSeverity.Error:return Yt.DiagnosticSeverity.Error;case so.DiagnosticSeverity.Warning:return Yt.DiagnosticSeverity.Warning;case so.DiagnosticSeverity.Information:return Yt.DiagnosticSeverity.Information;case so.DiagnosticSeverity.Hint:return Yt.DiagnosticSeverity.Hint}}function Qe(N){if(!N)return;let de=[];for(let He of N){let ei=pt(He);ei!==void 0&&de.push(ei)}return de.length>0?de:void 0}function pt(N){switch(N){case so.DiagnosticTag.Unnecessary:return Yt.DiagnosticTag.Unnecessary;case so.DiagnosticTag.Deprecated:return Yt.DiagnosticTag.Deprecated;default:return}}function ke(N){return{message:N.message,location:_e(N.location)}}function xe(N){return N.map(ke)}function Et(N){if(N!=null)return Pm.number(N)||Pm.string(N)?N:{value:N.value,target:t(N.target)}}function Ri(N){let de=Yt.Diagnostic.create(se(N.range),N.message),He=N instanceof ene.ProtocolDiagnostic?N:void 0;He!==void 0&&He.data!==void 0&&(de.data=He.data);let ei=Et(N.code);return ene.DiagnosticCode.is(ei)?He!==void 0&&He.hasDiagnosticCode?de.code=ei:(de.code=ei.value,de.codeDescription={href:ei.target}):de.code=ei,Pm.number(N.severity)&&(de.severity=Ve(N.severity)),Array.isArray(N.tags)&&(de.tags=Qe(N.tags)),N.relatedInformation&&(de.relatedInformation=xe(N.relatedInformation)),N.source&&(de.source=N.source),de}function ci(N,de){return N==null?N:Zie.map(N,Ri,de)}function Dt(N,de){switch(N){case"$string":return de;case Yt.MarkupKind.PlainText:return{kind:N,value:de};case Yt.MarkupKind.Markdown:return{kind:N,value:de.value};default:return`Unsupported Markup content received. Kind is: ${N}`}}function Fi(N){switch(N){case so.CompletionItemTag.Deprecated:return Yt.CompletionItemTag.Deprecated}}function Kt(N){if(N===void 0)return N;let de=[];for(let He of N){let ei=Fi(He);ei!==void 0&&de.push(ei)}return de}function Ei(N,de){return de!==void 0?de:N+1}function Ue(N,de=!1){let He,ei;Pm.string(N.label)?He=N.label:(He=N.label.label,de&&(N.label.detail!==void 0||N.label.description!==void 0)&&(ei={detail:N.label.detail,description:N.label.description}));let It={label:He};ei!==void 0&&(It.labelDetails=ei);let Li=N instanceof gNe.default?N:void 0;N.detail&&(It.detail=N.detail),N.documentation&&(!Li||Li.documentationFormat==="$string"?It.documentation=N.documentation:It.documentation=Dt(Li.documentationFormat,N.documentation)),N.filterText&&(It.filterText=N.filterText),Yn(It,N),Pm.number(N.kind)&&(It.kind=Ei(N.kind,Li&&Li.originalItemKind)),N.sortText&&(It.sortText=N.sortText),N.additionalTextEdits&&(It.additionalTextEdits=oo(N.additionalTextEdits)),N.commitCharacters&&(It.commitCharacters=N.commitCharacters.slice()),N.command&&(It.command=V(N.command)),(N.preselect===!0||N.preselect===!1)&&(It.preselect=N.preselect);let fo=Kt(N.tags);if(Li){if(Li.data!==void 0&&(It.data=Li.data),Li.deprecated===!0||Li.deprecated===!1){if(Li.deprecated===!0&&fo!==void 0&&fo.length>0){let qo=fo.indexOf(so.CompletionItemTag.Deprecated);qo!==-1&&fo.splice(qo,1)}It.deprecated=Li.deprecated}Li.insertTextMode!==void 0&&(It.insertTextMode=Li.insertTextMode)}return fo!==void 0&&fo.length>0&&(It.tags=fo),It.insertTextMode===void 0&&N.keepWhitespace===!0&&(It.insertTextMode=Yt.InsertTextMode.adjustIndentation),It}function Yn(N,de){let He=Yt.InsertTextFormat.PlainText,ei,It;de.textEdit?(ei=de.textEdit.newText,It=de.textEdit.range):de.insertText instanceof so.SnippetString?(He=Yt.InsertTextFormat.Snippet,ei=de.insertText.value):ei=de.insertText,de.range&&(It=de.range),N.insertTextFormat=He,de.fromEdit&&ei!==void 0&&It!==void 0?N.textEdit=ht(ei,It):N.insertText=ei}function ht(N,de){return O$.is(de)?Yt.InsertReplaceEdit.create(N,se(de.inserting),se(de.replacing)):{newText:N,range:se(de)}}function Pn(N){return{range:se(N.range),newText:N.newText}}function oo(N){return N==null?N:N.map(Pn)}function fn(N){return N<=so.SymbolKind.TypeParameter?N+1:Yt.SymbolKind.Property}function Bo(N){return N}function $e(N){return N.map(Bo)}function X(N,de,He){return{textDocument:n(N),position:oe(de),context:{includeDeclaration:He.includeDeclaration}}}async function W(N,de){let He=Yt.CodeAction.create(N.title);if(N instanceof fNe.default&&N.data!==void 0&&(He.data=N.data),N.kind!==void 0&&(He.kind=T(N.kind)),N.diagnostics!==void 0&&(He.diagnostics=await ci(N.diagnostics,de)),N.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return N.command!==void 0&&(He.command=V(N.command)),N.isPreferred!==void 0&&(He.isPreferred=N.isPreferred),N.disabled!==void 0&&(He.disabled={reason:N.disabled.reason}),He}async function R(N,de){if(N==null)return N;let He;return N.only&&Pm.string(N.only.value)&&(He=[N.only.value]),Yt.CodeActionContext.create(await ci(N.diagnostics,de),He,I(N.triggerKind))}function I(N){switch(N){case so.CodeActionTriggerKind.Invoke:return Yt.CodeActionTriggerKind.Invoked;case so.CodeActionTriggerKind.Automatic:return Yt.CodeActionTriggerKind.Automatic;default:return}}function T(N){if(N!=null)return N.value}function F(N){return N==null?N:Yt.InlineValueContext.create(N.frameId,se(N.stoppedLocation))}function V(N){let de=Yt.Command.create(N.title,N.command);return N.arguments&&(de.arguments=N.arguments),de}function ee(N){let de=Yt.CodeLens.create(se(N.range));return N.command&&(de.command=V(N.command)),N instanceof pNe.default&&N.data&&(de.data=N.data),de}function Ce(N,de){let He={tabSize:N.tabSize,insertSpaces:N.insertSpaces};return de.trimTrailingWhitespace&&(He.trimTrailingWhitespace=!0),de.trimFinalNewlines&&(He.trimFinalNewlines=!0),de.insertFinalNewline&&(He.insertFinalNewline=!0),He}function ve(N){return{textDocument:n(N)}}function Me(N){return{textDocument:n(N)}}function at(N){let de=Yt.DocumentLink.create(se(N.range));N.target&&(de.target=t(N.target)),N.tooltip!==void 0&&(de.tooltip=N.tooltip);let He=N instanceof mNe.default?N:void 0;return He&&He.data&&(de.data=He.data),de}function Je(N){return{textDocument:n(N)}}function Ut(N){let de={name:N.name,kind:fn(N.kind),uri:t(N.uri),range:se(N.range),selectionRange:se(N.selectionRange)};return N.detail!==void 0&&N.detail.length>0&&(de.detail=N.detail),N.tags!==void 0&&(de.tags=$e(N.tags)),N instanceof _Ne.default&&N.data!==void 0&&(de.data=N.data),de}function Lt(N){let de={name:N.name,kind:fn(N.kind),uri:t(N.uri),range:se(N.range),selectionRange:se(N.selectionRange)};return N.detail!==void 0&&N.detail.length>0&&(de.detail=N.detail),N.tags!==void 0&&(de.tags=$e(N.tags)),N instanceof vNe.default&&N.data!==void 0&&(de.data=N.data),de}function Pe(N){let de=N instanceof ANe.default?{name:N.name,kind:fn(N.kind),location:N.hasRange?_e(N.location):{uri:e(N.location.uri)},data:N.data}:{name:N.name,kind:fn(N.kind),location:_e(N.location)};return N.tags!==void 0&&(de.tags=$e(N.tags)),N.containerName!==""&&(de.containerName=N.containerName),de}function fi(N){let de=typeof N.label=="string"?N.label:N.label.map(_i),He=Yt.InlayHint.create(ie(N.position),de);return N.kind!==void 0&&(He.kind=N.kind),N.textEdits!==void 0&&(He.textEdits=oo(N.textEdits)),N.tooltip!==void 0&&(He.tooltip=Jn(N.tooltip)),N.paddingLeft!==void 0&&(He.paddingLeft=N.paddingLeft),N.paddingRight!==void 0&&(He.paddingRight=N.paddingRight),N instanceof bNe.default&&N.data!==void 0&&(He.data=N.data),He}function _i(N){let de=Yt.InlayHintLabelPart.create(N.value);return N.location!==void 0&&(de.location=_e(N.location)),N.command!==void 0&&(de.command=V(N.command)),N.tooltip!==void 0&&(de.tooltip=Jn(N.tooltip)),de}function Jn(N){return typeof N=="string"?N:{kind:Yt.MarkupKind.Markdown,value:N.value}}return{asUri:t,asTextDocumentIdentifier:n,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:r,asOpenTextDocumentParams:s,asChangeTextDocumentParams:c,asCloseTextDocumentParams:d,asSaveTextDocumentParams:h,asWillSaveTextDocumentParams:g,asDidCreateFilesParams:p,asDidRenameFilesParams:f,asDidDeleteFilesParams:v,asWillCreateFilesParams:b,asWillRenameFilesParams:A,asWillDeleteFilesParams:w,asTextDocumentPositionParams:C,asCompletionParams:L,asSignatureHelpParams:K,asWorkerPosition:oe,asRange:se,asPosition:ie,asPositions:ce,asLocation:_e,asDiagnosticSeverity:Ve,asDiagnosticTag:pt,asDiagnostic:Ri,asDiagnostics:ci,asCompletionItem:Ue,asTextEdit:Pn,asSymbolKind:fn,asSymbolTag:Bo,asSymbolTags:$e,asReferenceParams:X,asCodeAction:W,asCodeActionContext:R,asInlineValueContext:F,asCommand:V,asCodeLens:ee,asFormattingOptions:Ce,asDocumentSymbolParams:ve,asCodeLensParams:Me,asDocumentLink:at,asDocumentLinkParams:Je,asCallHierarchyItem:Ut,asTypeHierarchyItem:Lt,asInlayHint:fi,asWorkspaceSymbol:Pe}}FN.createConverter=wNe;var QN={};Object.defineProperty(QN,"__esModule",{value:!0});QN.createConverter=void 0;var je=Ht,xt=$t,Js=Vi,Wi=Do,CNe=BN,yNe=PN,SNe=ON,DNe=HN,tne=_X,xNe=WN,kNe=zN,ENe=VN,LNe=UN,ine=$t,cM;(function(i){function e(t){let n=t;return n&&Js.string(n.language)&&Js.string(n.value)}i.is=e})(cM||(cM={}));function INe(i,e,t){let n=i||(x=>je.Uri.parse(x));function o(x){return n(x)}function r(x){let Y=[];for(let be of x)if(typeof be=="string")Y.push(be);else if(ine.NotebookCellTextDocumentFilter.is(be))if(typeof be.notebook=="string")Y.push({notebookType:be.notebook,language:be.language});else{let Xe=be.notebook.notebookType??"*";Y.push({notebookType:Xe,scheme:be.notebook.scheme,pattern:be.notebook.pattern,language:be.language})}else ine.TextDocumentFilter.is(be)&&Y.push({language:be.language,scheme:be.scheme,pattern:be.pattern});return Y}async function s(x,Y){return Wi.map(x,l,Y)}function a(x){let Y=new Array(x.length);for(let be=0;be<x.length;be++)Y[be]=l(x[be]);return Y}function l(x){let Y=new tne.ProtocolDiagnostic(g(x.range),x.message,f(x.severity),x.data);if(x.code!==void 0){if(typeof x.code=="string"||typeof x.code=="number")xt.CodeDescription.is(x.codeDescription)?Y.code={value:x.code,target:o(x.codeDescription.href)}:Y.code=x.code;else if(tne.DiagnosticCode.is(x.code)){Y.hasDiagnosticCode=!0;let be=x.code;Y.code={value:be.value,target:o(be.target)}}}return x.source&&(Y.source=x.source),x.relatedInformation&&(Y.relatedInformation=c(x.relatedInformation)),Array.isArray(x.tags)&&(Y.tags=d(x.tags)),Y}function c(x){let Y=new Array(x.length);for(let be=0;be<x.length;be++){let Xe=x[be];Y[be]=new je.DiagnosticRelatedInformation(pt(Xe.location),Xe.message)}return Y}function d(x){if(!x)return;let Y=[];for(let be of x){let Xe=h(be);Xe!==void 0&&Y.push(Xe)}return Y.length>0?Y:void 0}function h(x){switch(x){case xt.DiagnosticTag.Unnecessary:return je.DiagnosticTag.Unnecessary;case xt.DiagnosticTag.Deprecated:return je.DiagnosticTag.Deprecated;default:return}}function u(x){return x?new je.Position(x.line,x.character):void 0}function g(x){return x?new je.Range(x.start.line,x.start.character,x.end.line,x.end.character):void 0}async function p(x,Y){return Wi.map(x,be=>new je.Range(be.start.line,be.start.character,be.end.line,be.end.character),Y)}function f(x){if(x==null)return je.DiagnosticSeverity.Error;switch(x){case xt.DiagnosticSeverity.Error:return je.DiagnosticSeverity.Error;case xt.DiagnosticSeverity.Warning:return je.DiagnosticSeverity.Warning;case xt.DiagnosticSeverity.Information:return je.DiagnosticSeverity.Information;case xt.DiagnosticSeverity.Hint:return je.DiagnosticSeverity.Hint}return je.DiagnosticSeverity.Error}function v(x){if(Js.string(x))return A(x);if(cM.is(x))return A().appendCodeblock(x.value,x.language);if(Array.isArray(x)){let Y=[];for(let be of x){let Xe=A();cM.is(be)?Xe.appendCodeblock(be.value,be.language):Xe.appendMarkdown(be),Y.push(Xe)}return Y}else return A(x)}function b(x){if(Js.string(x))return x;switch(x.kind){case xt.MarkupKind.Markdown:return A(x.value);case xt.MarkupKind.PlainText:return x.value;default:return`Unsupported Markup content received. Kind is: ${x.kind}`}}function A(x){let Y;if(x===void 0||typeof x=="string")Y=new je.MarkdownString(x);else switch(x.kind){case xt.MarkupKind.Markdown:Y=new je.MarkdownString(x.value);break;case xt.MarkupKind.PlainText:Y=new je.MarkdownString,Y.appendText(x.value);break;default:Y=new je.MarkdownString,Y.appendText(`Unsupported Markup content received. Kind is: ${x.kind}`);break}return Y.isTrusted=e,Y.supportHtml=t,Y}function w(x){if(x)return new je.Hover(v(x.contents),g(x.range))}async function C(x,Y,be){if(!x)return;if(Array.isArray(x))return Wi.map(x,gl=>M(gl,Y),be);let Xe=x,{defaultRange:ro,commitCharacters:Xn}=k(Xe,Y),Ki=await Wi.map(Xe.items,gl=>{var Qi,Du,pv;return M(gl,Xn,ro,(Qi=Xe.itemDefaults)==null?void 0:Qi.insertTextMode,(Du=Xe.itemDefaults)==null?void 0:Du.insertTextFormat,(pv=Xe.itemDefaults)==null?void 0:pv.data)},be);return new je.CompletionList(Ki,Xe.isIncomplete)}function k(x,Y){var be,Xe;let ro=(be=x.itemDefaults)==null?void 0:be.editRange,Xn=((Xe=x.itemDefaults)==null?void 0:Xe.commitCharacters)??Y;return xt.Range.is(ro)?{defaultRange:g(ro),commitCharacters:Xn}:ro!==void 0?{defaultRange:{inserting:g(ro.insert),replacing:g(ro.replace)},commitCharacters:Xn}:{defaultRange:void 0,commitCharacters:Xn}}function L(x){return xt.CompletionItemKind.Text<=x&&x<=xt.CompletionItemKind.TypeParameter?[x-1,void 0]:[je.CompletionItemKind.Text,x]}function S(x){switch(x){case xt.CompletionItemTag.Deprecated:return je.CompletionItemTag.Deprecated}}function y(x){if(x==null)return[];let Y=[];for(let be of x){let Xe=S(be);Xe!==void 0&&Y.push(Xe)}return Y}function M(x,Y,be,Xe,ro,Xn){let Ki=y(x.tags),gl=O(x),Qi=new CNe.default(gl);x.detail&&(Qi.detail=x.detail),x.documentation&&(Qi.documentation=b(x.documentation),Qi.documentationFormat=Js.string(x.documentation)?"$string":x.documentation.kind),x.filterText&&(Qi.filterText=x.filterText);let Du=H(x,be,ro);if(Du&&(Qi.insertText=Du.text,Qi.range=Du.range,Qi.fromEdit=Du.fromEdit),Js.number(x.kind)){let[ahe,xX]=L(x.kind);Qi.kind=ahe,xX&&(Qi.originalItemKind=xX)}x.sortText&&(Qi.sortText=x.sortText),x.additionalTextEdits&&(Qi.additionalTextEdits=ie(x.additionalTextEdits));let pv=x.commitCharacters!==void 0?Js.stringArray(x.commitCharacters)?x.commitCharacters:void 0:Y;pv&&(Qi.commitCharacters=pv.slice()),x.command&&(Qi.command=$e(x.command)),(x.deprecated===!0||x.deprecated===!1)&&(Qi.deprecated=x.deprecated,x.deprecated===!0&&Ki.push(je.CompletionItemTag.Deprecated)),(x.preselect===!0||x.preselect===!1)&&(Qi.preselect=x.preselect);let DX=x.data??Xn;DX!==void 0&&(Qi.data=DX),Ki.length>0&&(Qi.tags=Ki);let w2=x.insertTextMode??Xe;return w2!==void 0&&(Qi.insertTextMode=w2,w2===xt.InsertTextMode.asIs&&(Qi.keepWhitespace=!0)),Qi}function O(x){return xt.CompletionItemLabelDetails.is(x.labelDetails)?{label:x.label,detail:x.labelDetails.detail,description:x.labelDetails.description}:x.label}function H(x,Y,be){let Xe=x.insertTextFormat??be;if(x.textEdit!==void 0||Y!==void 0){let[ro,Xn]=x.textEdit!==void 0?D(x.textEdit):[Y,x.textEditText??x.label];return Xe===xt.InsertTextFormat.Snippet?{text:new je.SnippetString(Xn),range:ro,fromEdit:!0}:{text:Xn,range:ro,fromEdit:!0}}else return x.insertText?Xe===xt.InsertTextFormat.Snippet?{text:new je.SnippetString(x.insertText),fromEdit:!1}:{text:x.insertText,fromEdit:!1}:void 0}function D(x){return xt.InsertReplaceEdit.is(x)?[{inserting:g(x.insert),replacing:g(x.replace)},x.newText]:[g(x.range),x.newText]}function K(x){if(x)return new je.TextEdit(g(x.range),x.newText)}async function oe(x,Y){if(x)return Wi.map(x,K,Y)}function ie(x){if(!x)return;let Y=new Array(x.length);for(let be=0;be<x.length;be++)Y[be]=K(x[be]);return Y}async function ce(x,Y){if(!x)return;let be=new je.SignatureHelp;return Js.number(x.activeSignature)?be.activeSignature=x.activeSignature:be.activeSignature=0,Js.number(x.activeParameter)?be.activeParameter=x.activeParameter:be.activeParameter=0,x.signatures&&(be.signatures=await se(x.signatures,Y)),be}async function se(x,Y){return Wi.mapAsync(x,_e,Y)}async function _e(x,Y){let be=new je.SignatureInformation(x.label);return x.documentation!==void 0&&(be.documentation=b(x.documentation)),x.parameters!==void 0&&(be.parameters=await Ve(x.parameters,Y)),x.activeParameter!==void 0&&(be.activeParameter=x.activeParameter),be}function Ve(x,Y){return Wi.map(x,Qe,Y)}function Qe(x){let Y=new je.ParameterInformation(x.label);return x.documentation&&(Y.documentation=b(x.documentation)),Y}function pt(x){return x?new je.Location(n(x.uri),g(x.range)):void 0}async function ke(x,Y){if(x)return Ri(x,Y)}async function xe(x,Y){if(x)return Ri(x,Y)}function Et(x){if(!x)return;let Y={targetUri:n(x.targetUri),targetRange:g(x.targetRange),originSelectionRange:g(x.originSelectionRange),targetSelectionRange:g(x.targetSelectionRange)};if(!Y.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return Y}async function Ri(x,Y){if(x)if(Js.array(x)){if(x.length===0)return[];if(xt.LocationLink.is(x[0])){let be=x;return Wi.map(be,Et,Y)}else{let be=x;return Wi.map(be,pt,Y)}}else return xt.LocationLink.is(x)?[Et(x)]:pt(x)}async function ci(x,Y){if(x)return Wi.map(x,pt,Y)}async function Dt(x,Y){if(x)return Wi.map(x,Fi,Y)}function Fi(x){let Y=new je.DocumentHighlight(g(x.range));return Js.number(x.kind)&&(Y.kind=Kt(x.kind)),Y}function Kt(x){switch(x){case xt.DocumentHighlightKind.Text:return je.DocumentHighlightKind.Text;case xt.DocumentHighlightKind.Read:return je.DocumentHighlightKind.Read;case xt.DocumentHighlightKind.Write:return je.DocumentHighlightKind.Write}return je.DocumentHighlightKind.Text}async function Ei(x,Y){if(x)return Wi.map(x,Pn,Y)}function Ue(x){return x<=xt.SymbolKind.TypeParameter?x-1:je.SymbolKind.Property}function Yn(x){switch(x){case xt.SymbolTag.Deprecated:return je.SymbolTag.Deprecated;default:return}}function ht(x){if(x==null)return;let Y=[];for(let be of x){let Xe=Yn(be);Xe!==void 0&&Y.push(Xe)}return Y.length===0?void 0:Y}function Pn(x){let Y=x.data,be=x.location,Xe=be.range===void 0||Y!==void 0?new ENe.default(x.name,Ue(x.kind),x.containerName??"",be.range===void 0?n(be.uri):new je.Location(n(x.location.uri),g(be.range)),Y):new je.SymbolInformation(x.name,Ue(x.kind),x.containerName??"",new je.Location(n(x.location.uri),g(be.range)));return Bo(Xe,x),Xe}async function oo(x,Y){if(x!=null)return Wi.map(x,fn,Y)}function fn(x){let Y=new je.DocumentSymbol(x.name,x.detail||"",Ue(x.kind),g(x.range),g(x.selectionRange));if(Bo(Y,x),x.children!==void 0&&x.children.length>0){let be=[];for(let Xe of x.children)be.push(fn(Xe));Y.children=be}return Y}function Bo(x,Y){x.tags=ht(Y.tags),Y.deprecated&&(x.tags?x.tags.includes(je.SymbolTag.Deprecated)||(x.tags=x.tags.concat(je.SymbolTag.Deprecated)):x.tags=[je.SymbolTag.Deprecated])}function $e(x){let Y={title:x.title,command:x.command};return x.arguments&&(Y.arguments=x.arguments),Y}async function X(x,Y){if(x)return Wi.map(x,$e,Y)}let W=new Map;W.set(xt.CodeActionKind.Empty,je.CodeActionKind.Empty),W.set(xt.CodeActionKind.QuickFix,je.CodeActionKind.QuickFix),W.set(xt.CodeActionKind.Refactor,je.CodeActionKind.Refactor),W.set(xt.CodeActionKind.RefactorExtract,je.CodeActionKind.RefactorExtract),W.set(xt.CodeActionKind.RefactorInline,je.CodeActionKind.RefactorInline),W.set(xt.CodeActionKind.RefactorRewrite,je.CodeActionKind.RefactorRewrite),W.set(xt.CodeActionKind.Source,je.CodeActionKind.Source),W.set(xt.CodeActionKind.SourceOrganizeImports,je.CodeActionKind.SourceOrganizeImports);function R(x){if(x==null)return;let Y=W.get(x);if(Y)return Y;let be=x.split(".");Y=je.CodeActionKind.Empty;for(let Xe of be)Y=Y.append(Xe);return Y}function I(x){if(x!=null)return x.map(Y=>R(Y))}async function T(x,Y){if(x==null)return;let be=new DNe.default(x.title,x.data);return x.kind!==void 0&&(be.kind=R(x.kind)),x.diagnostics!==void 0&&(be.diagnostics=a(x.diagnostics)),x.edit!==void 0&&(be.edit=await Ce(x.edit,Y)),x.command!==void 0&&(be.command=$e(x.command)),x.isPreferred!==void 0&&(be.isPreferred=x.isPreferred),x.disabled!==void 0&&(be.disabled={reason:x.disabled.reason}),be}function F(x,Y){return Wi.mapAsync(x,async be=>xt.Command.is(be)?$e(be):T(be,Y),Y)}function V(x){if(!x)return;let Y=new yNe.default(g(x.range));return x.command&&(Y.command=$e(x.command)),x.data!==void 0&&x.data!==null&&(Y.data=x.data),Y}async function ee(x,Y){if(x)return Wi.map(x,V,Y)}async function Ce(x,Y){if(!x)return;let be=new Map;if(x.changeAnnotations!==void 0){let Xn=x.changeAnnotations;await Wi.forEach(Object.keys(Xn),Ki=>{let gl=ve(Xn[Ki]);be.set(Ki,gl)},Y)}let Xe=Xn=>{if(Xn!==void 0)return be.get(Xn)},ro=new je.WorkspaceEdit;if(x.documentChanges){let Xn=x.documentChanges;await Wi.forEach(Xn,Ki=>{if(xt.CreateFile.is(Ki))ro.createFile(n(Ki.uri),Ki.options,Xe(Ki.annotationId));else if(xt.RenameFile.is(Ki))ro.renameFile(n(Ki.oldUri),n(Ki.newUri),Ki.options,Xe(Ki.annotationId));else if(xt.DeleteFile.is(Ki))ro.deleteFile(n(Ki.uri),Ki.options,Xe(Ki.annotationId));else if(xt.TextDocumentEdit.is(Ki)){let gl=n(Ki.textDocument.uri);for(let Qi of Ki.edits)xt.AnnotatedTextEdit.is(Qi)?ro.replace(gl,g(Qi.range),Qi.newText,Xe(Qi.annotationId)):ro.replace(gl,g(Qi.range),Qi.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Ki,void 0,4)}`)},Y)}else if(x.changes){let Xn=x.changes;await Wi.forEach(Object.keys(Xn),Ki=>{ro.set(n(Ki),ie(Xn[Ki]))},Y)}return ro}function ve(x){if(x!==void 0)return{label:x.label,needsConfirmation:!!x.needsConfirmation,description:x.description}}function Me(x){let Y=g(x.range),be=x.target?o(x.target):void 0,Xe=new SNe.default(Y,be);return x.tooltip!==void 0&&(Xe.tooltip=x.tooltip),x.data!==void 0&&x.data!==null&&(Xe.data=x.data),Xe}async function at(x,Y){if(x)return Wi.map(x,Me,Y)}function Je(x){return new je.Color(x.red,x.green,x.blue,x.alpha)}function Ut(x){return new je.ColorInformation(g(x.range),Je(x.color))}async function Lt(x,Y){if(x)return Wi.map(x,Ut,Y)}function Pe(x){let Y=new je.ColorPresentation(x.label);return Y.additionalTextEdits=ie(x.additionalTextEdits),x.textEdit&&(Y.textEdit=K(x.textEdit)),Y}async function fi(x,Y){if(x)return Wi.map(x,Pe,Y)}function _i(x){if(x)switch(x){case xt.FoldingRangeKind.Comment:return je.FoldingRangeKind.Comment;case xt.FoldingRangeKind.Imports:return je.FoldingRangeKind.Imports;case xt.FoldingRangeKind.Region:return je.FoldingRangeKind.Region}}function Jn(x){return new je.FoldingRange(x.startLine,x.endLine,_i(x.kind))}async function N(x,Y){if(x)return Wi.map(x,Jn,Y)}function de(x){return new je.SelectionRange(g(x.range),x.parent?de(x.parent):void 0)}async function He(x,Y){return Array.isArray(x)?Wi.map(x,de,Y):[]}function ei(x){return xt.InlineValueText.is(x)?new je.InlineValueText(g(x.range),x.text):xt.InlineValueVariableLookup.is(x)?new je.InlineValueVariableLookup(g(x.range),x.variableName,x.caseSensitiveLookup):new je.InlineValueEvaluatableExpression(g(x.range),x.expression)}async function It(x,Y){return Array.isArray(x)?Wi.map(x,ei,Y):[]}async function Li(x,Y){let be=typeof x.label=="string"?x.label:await Wi.map(x.label,fo,Y),Xe=new LNe.default(u(x.position),be);return x.kind!==void 0&&(Xe.kind=x.kind),x.textEdits!==void 0&&(Xe.textEdits=await oe(x.textEdits,Y)),x.tooltip!==void 0&&(Xe.tooltip=qo(x.tooltip)),x.paddingLeft!==void 0&&(Xe.paddingLeft=x.paddingLeft),x.paddingRight!==void 0&&(Xe.paddingRight=x.paddingRight),x.data!==void 0&&(Xe.data=x.data),Xe}function fo(x){let Y=new je.InlayHintLabelPart(x.value);return x.location!==void 0&&(Y.location=pt(x.location)),x.tooltip!==void 0&&(Y.tooltip=qo(x.tooltip)),x.command!==void 0&&(Y.command=$e(x.command)),Y}function qo(x){return typeof x=="string"?x:A(x)}async function La(x,Y){if(Array.isArray(x))return Wi.mapAsync(x,Li,Y)}function cr(x){if(x===null)return;let Y=new xNe.default(Ue(x.kind),x.name,x.detail||"",o(x.uri),g(x.range),g(x.selectionRange),x.data);return x.tags!==void 0&&(Y.tags=ht(x.tags)),Y}async function dr(x,Y){if(x!==null)return Wi.map(x,cr,Y)}async function qs(x,Y){return new je.CallHierarchyIncomingCall(cr(x.from),await p(x.fromRanges,Y))}async function vc(x,Y){if(x!==null)return Wi.mapAsync(x,qs,Y)}async function $s(x,Y){return new je.CallHierarchyOutgoingCall(cr(x.to),await p(x.fromRanges,Y))}async function G(x,Y){if(x!==null)return Wi.mapAsync(x,$s,Y)}async function U(x,Y){if(x!=null)return new je.SemanticTokens(new Uint32Array(x.data),x.resultId)}function he(x){return new je.SemanticTokensEdit(x.start,x.deleteCount,x.data!==void 0?new Uint32Array(x.data):void 0)}async function Ae(x,Y){if(x!=null)return new je.SemanticTokensEdits(x.edits.map(he),x.resultId)}function ut(x){return x}async function bt(x,Y){if(x!=null)return new je.LinkedEditingRanges(await p(x.ranges,Y),Jt(x.wordPattern))}function Jt(x){if(x!=null)return new RegExp(x)}function _t(x){if(x===null)return;let Y=new kNe.default(Ue(x.kind),x.name,x.detail||"",o(x.uri),g(x.range),g(x.selectionRange),x.data);return x.tags!==void 0&&(Y.tags=ht(x.tags)),Y}async function ui(x,Y){if(x!==null)return Wi.map(x,_t,Y)}function ri(x){if(Js.string(x))return x;if(xt.RelativePattern.is(x)){if(xt.URI.is(x.baseUri))return new je.RelativePattern(o(x.baseUri),x.pattern);if(xt.WorkspaceFolder.is(x.baseUri)){let Y=je.workspace.getWorkspaceFolder(o(x.baseUri.uri));return Y!==void 0?new je.RelativePattern(Y,x.pattern):void 0}}}return{asUri:o,asDocumentSelector:r,asDiagnostics:s,asDiagnostic:l,asRange:g,asRanges:p,asPosition:u,asDiagnosticSeverity:f,asDiagnosticTag:h,asHover:w,asCompletionResult:C,asCompletionItem:M,asTextEdit:K,asTextEdits:oe,asSignatureHelp:ce,asSignatureInformations:se,asSignatureInformation:_e,asParameterInformations:Ve,asParameterInformation:Qe,asDeclarationResult:ke,asDefinitionResult:xe,asLocation:pt,asReferences:ci,asDocumentHighlights:Dt,asDocumentHighlight:Fi,asDocumentHighlightKind:Kt,asSymbolKind:Ue,asSymbolTag:Yn,asSymbolTags:ht,asSymbolInformations:Ei,asSymbolInformation:Pn,asDocumentSymbols:oo,asDocumentSymbol:fn,asCommand:$e,asCommands:X,asCodeAction:T,asCodeActionKind:R,asCodeActionKinds:I,asCodeActionResult:F,asCodeLens:V,asCodeLenses:ee,asWorkspaceEdit:Ce,asDocumentLink:Me,asDocumentLinks:at,asFoldingRangeKind:_i,asFoldingRange:Jn,asFoldingRanges:N,asColor:Je,asColorInformation:Ut,asColorInformations:Lt,asColorPresentation:Pe,asColorPresentations:fi,asSelectionRange:de,asSelectionRanges:He,asInlineValue:ei,asInlineValues:It,asInlayHint:Li,asInlayHints:La,asSemanticTokensLegend:ut,asSemanticTokens:U,asSemanticTokensEdit:he,asSemanticTokensEdits:Ae,asCallHierarchyItem:cr,asCallHierarchyItems:dr,asCallHierarchyIncomingCall:qs,asCallHierarchyIncomingCalls:vc,asCallHierarchyOutgoingCall:$s,asCallHierarchyOutgoingCalls:G,asLinkedEditingRanges:bt,asTypeHierarchyItem:_t,asTypeHierarchyItems:ui,asGlobPattern:ri}}QN.createConverter=INe;var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.generateUuid=Ni.parse=Ni.isUUID=Ni.v4=Ni.empty=void 0;var EC=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},LC=class i extends EC{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}};LC._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];LC._timeHighBits=["8","9","a","b"];Ni.empty=new EC("00000000-0000-0000-0000-000000000000");function gde(){return new LC}Ni.v4=gde;var TNe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function pde(i){return TNe.test(i)}Ni.isUUID=pde;function MNe(i){if(!pde(i))throw new Error("invalid uuid");return new EC(i)}Ni.parse=MNe;function NNe(){return gde().asHex()}Ni.generateUuid=NNe;var ny={};Object.defineProperty(ny,"__esModule",{value:!0});ny.ProgressPart=void 0;var nne=Ht,one=$t,rne=Vi,H$=class{constructor(e,t,n){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(one.WorkDoneProgress.type,this._token,o=>{switch(o.kind){case"begin":this.begin(o);break;case"report":this.report(o);break;case"end":this.done(),n&&n(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&nne.window.withProgress({location:nne.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,n)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=n,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(one.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((o,r)=>{this._resolve=o,this._reject=r})})}report(e){if(this._infinite&&rne.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(rne.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._reported+=n,this._progress!==void 0&&this._progress.report({message:e.message,increment:n})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};ny.ProgressPart=H$;var Hi={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WorkspaceFeature=i.TextDocumentLanguageFeature=i.TextDocumentEventFeature=i.DynamicDocumentFeature=i.DynamicFeature=i.StaticFeature=i.ensure=i.LSPCancellationError=void 0;let e=Ht,t=$t,n=Vi,o=Ni;class r extends e.CancellationError{constructor(u){super(),this.data=u}}i.LSPCancellationError=r;function s(h,u){return h[u]===void 0&&(h[u]={}),h[u]}i.ensure=s,function(h){function u(g){let p=g;return p!=null&&n.func(p.fillClientCapabilities)&&n.func(p.initialize)&&n.func(p.getState)&&n.func(p.dispose)&&(p.fillInitializeParams===void 0||n.func(p.fillInitializeParams))}h.is=u}(i.StaticFeature||(i.StaticFeature={})),function(h){function u(g){let p=g;return p!=null&&n.func(p.fillClientCapabilities)&&n.func(p.initialize)&&n.func(p.getState)&&n.func(p.dispose)&&(p.fillInitializeParams===void 0||n.func(p.fillInitializeParams))&&n.func(p.register)&&n.func(p.unregister)&&p.registrationType!==void 0}h.is=u}(i.DynamicFeature||(i.DynamicFeature={}));class a{constructor(u){this._client=u}getState(){let u=this.getDocumentSelectors(),g=0;for(let f of u){g++;for(let v of e.workspace.textDocuments)if(e.languages.match(f,v)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let p=g>0;return{kind:"document",id:this.registrationType.method,registrations:p,matches:!1}}}i.DynamicDocumentFeature=a;class l extends a{constructor(u,g,p,f,v,b,A){super(u),this._event=g,this._type=p,this._middleware=f,this._createParams=v,this._textDocument=b,this._selectorFilter=A,this._selectors=new Map,this._onNotificationSent=new e.EventEmitter}static textDocumentFilter(u,g){for(let p of u)if(e.languages.match(p,g)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(u){u.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(g=>{this.callback(g).catch(p=>{this._client.error(`Sending document notification ${this._type.method} failed.`,p)})})),this._selectors.set(u.id,this._client.protocol2CodeConverter.asDocumentSelector(u.registerOptions.documentSelector)))}async callback(u){let g=async p=>{let f=this._createParams(p);await this._client.sendNotification(this._type,f).catch(),this.notificationSent(p,this._type,f)};if(this.matches(u)){let p=this._middleware();return p?p(u,f=>g(f)):g(u)}}matches(u){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(u))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),u)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(u,g,p){this._onNotificationSent.fire({original:u,type:g,params:p})}unregister(u){this._selectors.delete(u),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(u){for(let g of this._selectors.values())if(e.languages.match(g,u)>0)return{send:p=>this.callback(p)}}}i.TextDocumentEventFeature=l;class c extends a{constructor(u,g){super(u),this._registrationType=g,this._registrations=new Map}*getDocumentSelectors(){for(let u of this._registrations.values()){let g=u.data.registerOptions.documentSelector;g!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(g))}}get registrationType(){return this._registrationType}register(u){if(!u.registerOptions.documentSelector)return;let g=this.registerLanguageProvider(u.registerOptions,u.id);this._registrations.set(u.id,{disposable:g[0],data:u,provider:g[1]})}unregister(u){let g=this._registrations.get(u);g!==void 0&&g.disposable.dispose()}dispose(){this._registrations.forEach(u=>{u.disposable.dispose()}),this._registrations.clear()}getRegistration(u,g){if(g){if(t.TextDocumentRegistrationOptions.is(g)){let p=t.StaticRegistrationOptions.hasId(g)?g.id:o.generateUuid(),f=g.documentSelector||u;if(f)return[p,Object.assign({},g,{documentSelector:f})]}else if(n.boolean(g)&&g===!0||t.WorkDoneProgressOptions.is(g)){if(!u)return[void 0,void 0];let p=n.boolean(g)&&g===!0?{documentSelector:u}:Object.assign({},g,{documentSelector:u});return[o.generateUuid(),p]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(u,g){if(!(!u||!g))return n.boolean(g)&&g===!0?{documentSelector:u}:Object.assign({},g,{documentSelector:u})}getProvider(u){for(let g of this._registrations.values()){let p=g.data.registerOptions.documentSelector;if(p!==null&&e.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(p),u)>0)return g.provider}}getAllProviders(){let u=[];for(let g of this._registrations.values())u.push(g.provider);return u}}i.TextDocumentLanguageFeature=c;class d{constructor(u,g){this._client=u,this._registrationType=g,this._registrations=new Map}getState(){let u=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:u}}get registrationType(){return this._registrationType}register(u){let g=this.registerLanguageProvider(u.registerOptions);this._registrations.set(u.id,{disposable:g[0],provider:g[1]})}unregister(u){let g=this._registrations.get(u);g!==void 0&&g.disposable.dispose()}dispose(){this._registrations.forEach(u=>{u.disposable.dispose()}),this._registrations.clear()}getProviders(){let u=[];for(let g of this._registrations.values())u.push(g.provider);return u}}i.WorkspaceFeature=d})(Hi);var vX={},RNe={},FNe=Object.freeze(Object.defineProperty({__proto__:null,default:RNe},Symbol.toStringTag,{value:"Module"})),BNe=aX(FNe),PNe=function(i,e){for(var t=[],n=0;n<i.length;n++){var o=e(i[n],n);ONe(o)?t.push.apply(t,o):t.push(o)}return t},ONe=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},HNe=mde;function mde(i,e,t){i instanceof RegExp&&(i=sne(i,t)),e instanceof RegExp&&(e=sne(e,t));var n=fde(i,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+i.length,n[1]),post:t.slice(n[1]+e.length)}}function sne(i,e){var t=e.match(i);return t?t[0]:null}mde.range=fde;function fde(i,e,t){var n,o,r,s,a,l=t.indexOf(i),c=t.indexOf(e,l+1),d=l;if(l>=0&&c>0){if(i===e)return[l,c];for(n=[],r=t.length;d>=0&&!a;)d==l?(n.push(d),l=t.indexOf(i,d+1)):n.length==1?a=[n.pop(),c]:(o=n.pop(),o<r&&(r=o,s=c),c=t.indexOf(e,d+1)),d=l<c&&l>=0?l:c;n.length&&(a=[r,s])}return a}var WNe=PNe,_de=HNe,zNe=QNe,vde="\0SLASH"+Math.random()+"\0",Ade="\0OPEN"+Math.random()+"\0",AX="\0CLOSE"+Math.random()+"\0",bde="\0COMMA"+Math.random()+"\0",wde="\0PERIOD"+Math.random()+"\0";function uF(i){return parseInt(i,10)==i?parseInt(i,10):i.charCodeAt(0)}function VNe(i){return i.split("\\\\").join(vde).split("\\{").join(Ade).split("\\}").join(AX).split("\\,").join(bde).split("\\.").join(wde)}function UNe(i){return i.split(vde).join("\\").split(Ade).join("{").split(AX).join("}").split(bde).join(",").split(wde).join(".")}function Cde(i){if(!i)return[""];var e=[],t=_de("{","}",i);if(!t)return i.split(",");var n=t.pre,o=t.body,r=t.post,s=n.split(",");s[s.length-1]+="{"+o+"}";var a=Cde(r);return r.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function QNe(i){return i?(i.substr(0,2)==="{}"&&(i="\\{\\}"+i.substr(2)),Ym(VNe(i),!0).map(UNe)):[]}function jNe(i){return"{"+i+"}"}function KNe(i){return/^-?0\d/.test(i)}function qNe(i,e){return i<=e}function $Ne(i,e){return i>=e}function Ym(i,e){var t=[],n=_de("{","}",i);if(!n||/\$$/.test(n.pre))return[i];var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),r=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=o||r,a=n.body.indexOf(",")>=0;if(!s&&!a)return n.post.match(/,.*\}/)?(i=n.pre+"{"+n.body+AX+n.post,Ym(i)):[i];var l;if(s)l=n.body.split(/\.\./);else if(l=Cde(n.body),l.length===1&&(l=Ym(l[0],!1).map(jNe),l.length===1)){var d=n.post.length?Ym(n.post,!1):[""];return d.map(function(H){return n.pre+l[0]+H})}var c=n.pre,d=n.post.length?Ym(n.post,!1):[""],h;if(s){var u=uF(l[0]),g=uF(l[1]),p=Math.max(l[0].length,l[1].length),f=l.length==3?Math.abs(uF(l[2])):1,v=qNe,b=g<u;b&&(f*=-1,v=$Ne);var A=l.some(KNe);h=[];for(var w=u;v(w,g);w+=f){var C;if(r)C=String.fromCharCode(w),C==="\\"&&(C="");else if(C=String(w),A){var k=p-C.length;if(k>0){var L=new Array(k+1).join("0");w<0?C="-"+L+C.slice(1):C=L+C}}h.push(C)}}else h=WNe(l,function(O){return Ym(O,!1)});for(var S=0;S<h.length;S++)for(var y=0;y<d.length;y++){var M=c+h[S]+d[y];(!e||s||M)&&t.push(M)}return t}var bX=Es;Es.Minimatch=ar;var IC=function(){try{return BNe}catch{}}()||{sep:"/"};Es.sep=IC.sep;var wX=Es.GLOBSTAR=ar.GLOBSTAR={},GNe=zNe,ane={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},W$="[^/]",z$=W$+"*?",YNe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",JNe="(?:(?!(?:\\/|^)\\.).)*?",lne=XNe("().*{}+?[]^$\\!");function XNe(i){return i.split("").reduce(function(e,t){return e[t]=!0,e},{})}var yde=/\/+/;Es.filter=ZNe;function ZNe(i,e){return e=e||{},function(t,n,o){return Es(t,i,e)}}function jd(i,e){e=e||{};var t={};return Object.keys(i).forEach(function(n){t[n]=i[n]}),Object.keys(e).forEach(function(n){t[n]=e[n]}),t}Es.defaults=function(i){if(!i||typeof i!="object"||!Object.keys(i).length)return Es;var e=Es,t=function(n,o,r){return e(n,o,jd(i,r))};return t.Minimatch=function(n,o){return new e.Minimatch(n,jd(i,o))},t.Minimatch.defaults=function(n){return e.defaults(jd(i,n)).Minimatch},t.filter=function(n,o){return e.filter(n,jd(i,o))},t.defaults=function(n){return e.defaults(jd(i,n))},t.makeRe=function(n,o){return e.makeRe(n,jd(i,o))},t.braceExpand=function(n,o){return e.braceExpand(n,jd(i,o))},t.match=function(n,o,r){return e.match(n,o,jd(i,r))},t};ar.defaults=function(i){return Es.defaults(i).Minimatch};function Es(i,e,t){return jN(e),t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:new ar(e,t).match(i)}function ar(i,e){if(!(this instanceof ar))return new ar(i,e);jN(i),e||(e={}),i=i.trim(),!e.allowWindowsEscape&&IC.sep!=="/"&&(i=i.split(IC.sep).join("/")),this.options=e,this.set=[],this.pattern=i,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}ar.prototype.debug=function(){};ar.prototype.make=e2e;function e2e(){var i=this.pattern,e=this.options;if(!e.nocomment&&i.charAt(0)==="#"){this.comment=!0;return}if(!i){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,t),t=this.globParts=t.map(function(n){return n.split(yde)}),this.debug(this.pattern,t),t=t.map(function(n,o,r){return n.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}ar.prototype.parseNegate=t2e;function t2e(){var i=this.pattern,e=!1,t=this.options,n=0;if(!t.nonegate){for(var o=0,r=i.length;o<r&&i.charAt(o)==="!";o++)e=!e,n++;n&&(this.pattern=i.substr(n)),this.negate=e}}Es.braceExpand=function(i,e){return Sde(i,e)};ar.prototype.braceExpand=Sde;function Sde(i,e){return e||(this instanceof ar?e=this.options:e={}),i=typeof i>"u"?this.pattern:i,jN(i),e.nobrace||!/\{(?:(?!\{).)*\}/.test(i)?[i]:GNe(i)}var i2e=1024*64,jN=function(i){if(typeof i!="string")throw new TypeError("invalid pattern");if(i.length>i2e)throw new TypeError("pattern is too long")};ar.prototype.parse=n2e;var AS={};function n2e(i,e){jN(i);var t=this.options;if(i==="**")if(t.noglobstar)i="*";else return wX;if(i==="")return"";var n="",o=!!t.nocase,r=!1,s=[],a=[],l,c=!1,d=-1,h=-1,u=i.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",g=this;function p(){if(l){switch(l){case"*":n+=z$,o=!0;break;case"?":n+=W$,o=!0;break;default:n+="\\"+l;break}g.debug("clearStateChar %j %j",l,n),l=!1}}for(var f=0,v=i.length,b;f<v&&(b=i.charAt(f));f++){if(this.debug("%s	%s %s %j",i,f,n,b),r&&lne[b]){n+="\\"+b,r=!1;continue}switch(b){case"/":return!1;case"\\":p(),r=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",i,f,n,b),c){this.debug("  in class"),b==="!"&&f===h+1&&(b="^"),n+=b;continue}g.debug("call clearStateChar %j",l),p(),l=b,t.noext&&p();continue;case"(":if(c){n+="(";continue}if(!l){n+="\\(";continue}s.push({type:l,start:f-1,reStart:n.length,open:ane[l].open,close:ane[l].close}),n+=l==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",l,n),l=!1;continue;case")":if(c||!s.length){n+="\\)";continue}p(),o=!0;var A=s.pop();n+=A.close,A.type==="!"&&a.push(A),A.reEnd=n.length;continue;case"|":if(c||!s.length||r){n+="\\|",r=!1;continue}p(),n+="|";continue;case"[":if(p(),c){n+="\\"+b;continue}c=!0,h=f,d=n.length,n+=b;continue;case"]":if(f===h+1||!c){n+="\\"+b,r=!1;continue}var w=i.substring(h+1,f);try{RegExp("["+w+"]")}catch{var C=this.parse(w,AS);n=n.substr(0,d)+"\\["+C[0]+"\\]",o=o||C[1],c=!1;continue}o=!0,c=!1,n+=b;continue;default:p(),r?r=!1:lne[b]&&!(b==="^"&&c)&&(n+="\\"),n+=b}}for(c&&(w=i.substr(h+1),C=this.parse(w,AS),n=n.substr(0,d)+"\\["+C[0],o=o||C[1]),A=s.pop();A;A=s.pop()){var k=n.slice(A.reStart+A.open.length);this.debug("setting tail",n,A),k=k.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Qe,pt,ke){return ke||(ke="\\"),pt+pt+ke+"|"}),this.debug(`tail=%j
   %s`,k,k,A,n);var L=A.type==="*"?z$:A.type==="?"?W$:"\\"+A.type;o=!0,n=n.slice(0,A.reStart)+L+"\\("+k}p(),r&&(n+="\\\\");var S=!1;switch(n.charAt(0)){case"[":case".":case"(":S=!0}for(var y=a.length-1;y>-1;y--){var M=a[y],O=n.slice(0,M.reStart),H=n.slice(M.reStart,M.reEnd-8),D=n.slice(M.reEnd-8,M.reEnd),K=n.slice(M.reEnd);D+=K;var oe=O.split("(").length-1,ie=K;for(f=0;f<oe;f++)ie=ie.replace(/\)[+*?]?/,"");K=ie;var ce="";K===""&&e!==AS&&(ce="$");var se=O+H+K+ce+D;n=se}if(n!==""&&o&&(n="(?=.)"+n),S&&(n=u+n),e===AS)return[n,o];if(!o)return r2e(i);var _e=t.nocase?"i":"";try{var Ve=new RegExp("^"+n+"$",_e)}catch{return new RegExp("$.")}return Ve._glob=i,Ve._src=n,Ve}Es.makeRe=function(i,e){return new ar(i,e||{}).makeRe()};ar.prototype.makeRe=o2e;function o2e(){if(this.regexp||this.regexp===!1)return this.regexp;var i=this.set;if(!i.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?z$:e.dot?YNe:JNe,n=e.nocase?"i":"",o=i.map(function(r){return r.map(function(s){return s===wX?t:typeof s=="string"?s2e(s):s._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch{this.regexp=!1}return this.regexp}Es.match=function(i,e,t){t=t||{};var n=new ar(e,t);return i=i.filter(function(o){return n.match(o)}),n.options.nonull&&!i.length&&i.push(e),i};ar.prototype.match=function(i,e){if(typeof e>"u"&&(e=this.partial),this.debug("match",i,this.pattern),this.comment)return!1;if(this.empty)return i==="";if(i==="/"&&e)return!0;var t=this.options;IC.sep!=="/"&&(i=i.split(IC.sep).join("/")),i=i.split(yde),this.debug(this.pattern,"split",i);var n=this.set;this.debug(this.pattern,"set",n);var o,r;for(r=i.length-1;r>=0&&(o=i[r],!o);r--);for(r=0;r<n.length;r++){var s=n[r],a=i;t.matchBase&&s.length===1&&(a=[o]);var l=this.matchOne(a,s,e);if(l)return t.flipNegate?!0:!this.negate}return t.flipNegate?!1:this.negate};ar.prototype.matchOne=function(i,e,t){var n=this.options;this.debug("matchOne",{this:this,file:i,pattern:e}),this.debug("matchOne",i.length,e.length);for(var o=0,r=0,s=i.length,a=e.length;o<s&&r<a;o++,r++){this.debug("matchOne loop");var l=e[r],c=i[o];if(this.debug(e,l,c),l===!1)return!1;if(l===wX){this.debug("GLOBSTAR",[e,l,c]);var d=o,h=r+1;if(h===a){for(this.debug("** at the end");o<s;o++)if(i[o]==="."||i[o]===".."||!n.dot&&i[o].charAt(0)===".")return!1;return!0}for(;d<s;){var u=i[d];if(this.debug(`
globstar while`,i,d,e,h,u),this.matchOne(i.slice(d),e.slice(h),t))return this.debug("globstar found match!",d,s,u),!0;if(u==="."||u===".."||!n.dot&&u.charAt(0)==="."){this.debug("dot detected!",i,d,e,h);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(t&&(this.debug(`
>>> no match, partial?`,i,d,e,h),d===s))}var g;if(typeof l=="string"?(g=c===l,this.debug("string match",l,c,g)):(g=c.match(l),this.debug("pattern match",l,c,g)),!g)return!1}if(o===s&&r===a)return!0;if(o===s)return t;if(r===a)return o===s-1&&i[o]==="";throw new Error("wtf?")};function r2e(i){return i.replace(/\\(.)/g,"$1")}function s2e(i){return i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DiagnosticFeature=i.DiagnosticPullMode=i.vsdiag=void 0;let e=bX,t=Ht,n=$t,o=Ni,r=Hi;function s(b,A){return b[A]===void 0&&(b[A]={}),b[A]}var a;(function(b){(function(A){A.full="full",A.unChanged="unChanged"})(b.DocumentDiagnosticReportKind||(b.DocumentDiagnosticReportKind={}))})(a=i.vsdiag||(i.vsdiag={}));var l;(function(b){b.onType="onType",b.onSave="onSave"})(l=i.DiagnosticPullMode||(i.DiagnosticPullMode={}));var c;(function(b){b.active="open",b.reschedule="reschedule",b.outDated="drop"})(c||(c={}));class d{constructor(){this.open=new Set,this._onOpen=new t.EventEmitter,this._onClose=new t.EventEmitter,d.fillTabResources(this.open);let A=w=>{if(w.closed.length===0&&w.opened.length===0)return;let C=this.open,k=new Set;d.fillTabResources(k);let L=new Set,S=new Set(k);for(let y of C.values())k.has(y)?S.delete(y):L.add(y);if(this.open=k,L.size>0){let y=new Set;for(let M of L)y.add(t.Uri.parse(M));this._onClose.fire(y)}if(S.size>0){let y=new Set;for(let M of S)y.add(t.Uri.parse(M));this._onOpen.fire(y)}};t.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=t.window.tabGroups.onDidChangeTabs(A):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(A){var w,C;return A instanceof t.Uri?((w=t.window.activeTextEditor)==null?void 0:w.document.uri)===A:((C=t.window.activeTextEditor)==null?void 0:C.document)===A}isVisible(A){let w=A instanceof t.Uri?A:A.uri;return this.open.has(w.toString())}getTabResources(){let A=new Set;return d.fillTabResources(new Set,A),A}static fillTabResources(A,w){let C=A??new Set;for(let k of t.window.tabGroups.all)for(let L of k.tabs){let S=L.input,y;S instanceof t.TabInputText?y=S.uri:S instanceof t.TabInputTextDiff&&(y=S.modified),y!==void 0&&!C.has(y.toString())&&(C.add(y.toString()),w!==void 0&&w.add(y))}}}var h;(function(b){b[b.document=1]="document",b[b.workspace=2]="workspace"})(h||(h={}));class u{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(A,w,C){let k=A===h.document?this.documentPullStates:this.workspacePullStates,[L,S,y]=w instanceof t.Uri?[w.toString(),w,C]:[w.uri.toString(),w.uri,w.version],M=k.get(L);return M===void 0&&(M={document:S,pulledVersion:y,resultId:void 0},k.set(L,M)),M}update(A,w,C,k){let L=A===h.document?this.documentPullStates:this.workspacePullStates,[S,y,M,O]=w instanceof t.Uri?[w.toString(),w,C,k]:[w.uri.toString(),w.uri,w.version,C],H=L.get(S);H===void 0?(H={document:y,pulledVersion:M,resultId:O},L.set(S,H)):(H.pulledVersion=M,H.resultId=O)}unTrack(A,w){let C=w instanceof t.Uri?w.toString():w.uri.toString();(A===h.document?this.documentPullStates:this.workspacePullStates).delete(C)}tracks(A,w){let C=w instanceof t.Uri?w.toString():w.uri.toString();return(A===h.document?this.documentPullStates:this.workspacePullStates).has(C)}getResultId(A,w){var C;let k=w instanceof t.Uri?w.toString():w.uri.toString();return(C=(A===h.document?this.documentPullStates:this.workspacePullStates).get(k))==null?void 0:C.resultId}getAllResultIds(){let A=[];for(let[w,C]of this.workspacePullStates)this.documentPullStates.has(w)&&(C=this.documentPullStates.get(w)),C.resultId!==void 0&&A.push({uri:w,value:C.resultId});return A}}class g{constructor(A,w,C){this.client=A,this.tabs=w,this.options=C,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new t.EventEmitter,this.provider=this.createProvider(),this.diagnostics=t.languages.createDiagnosticCollection(C.identifier),this.openRequests=new Map,this.documentStates=new u,this.workspaceErrorCounter=0}knows(A,w){return this.documentStates.tracks(A,w)}forget(A,w){this.documentStates.unTrack(A,w)}pull(A,w){if(this.isDisposed)return;let C=A instanceof t.Uri?A:A.uri;this.pullAsync(A).then(()=>{w&&w()},k=>{this.client.error(`Document pull failed for text document ${C.toString()}`,k,!1)})}async pullAsync(A,w){if(this.isDisposed)return;let C=A instanceof t.Uri,k=C?A:A.uri,L=k.toString();w=C?w:A.version;let S=this.openRequests.get(L),y=C?this.documentStates.track(h.document,A,w):this.documentStates.track(h.document,A);if(S===void 0){let M=new t.CancellationTokenSource;this.openRequests.set(L,{state:c.active,document:A,version:w,tokenSource:M});let O,H;try{O=await this.provider.provideDiagnostics(A,y.resultId,M.token)??{kind:a.DocumentDiagnosticReportKind.full,items:[]}}catch(D){if(D instanceof r.LSPCancellationError&&n.DiagnosticServerCancellationData.is(D.data)&&D.data.retriggerRequest===!1&&(H={state:c.outDated,document:A}),H===void 0&&D instanceof t.CancellationError)H={state:c.reschedule,document:A};else throw D}if(H=H??this.openRequests.get(L),H===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${L}`),this.diagnostics.delete(k);return}if(this.openRequests.delete(L),!this.tabs.isVisible(A)){this.documentStates.unTrack(h.document,A);return}if(H.state===c.outDated)return;O!==void 0&&(O.kind===a.DocumentDiagnosticReportKind.full&&this.diagnostics.set(k,O.items),y.pulledVersion=w,y.resultId=O.resultId),H.state===c.reschedule&&this.pull(A)}else S.state===c.active?(S.tokenSource.cancel(),this.openRequests.set(L,{state:c.reschedule,document:S.document})):S.state===c.outDated&&this.openRequests.set(L,{state:c.reschedule,document:S.document})}forgetDocument(A){let w=A instanceof t.Uri?A:A.uri,C=w.toString(),k=this.openRequests.get(C);this.options.workspaceDiagnostics?k!==void 0?this.openRequests.set(C,{state:c.reschedule,document:A}):this.pull(A,()=>{this.forget(h.document,A)}):(k!==void 0&&(k.state===c.active&&k.tokenSource.cancel(),this.openRequests.set(C,{state:c.outDated,document:A})),this.diagnostics.delete(w),this.forget(h.document,A))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,n.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},A=>{!(A instanceof r.LSPCancellationError)&&!n.DiagnosticServerCancellationData.is(A.data)&&(this.client.error("Workspace diagnostic pull failed.",A,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,n.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new t.CancellationTokenSource;let A=this.documentStates.getAllResultIds().map(w=>({uri:this.client.protocol2CodeConverter.asUri(w.uri),value:w.value}));await this.provider.provideWorkspaceDiagnostics(A,this.workspaceCancellation.token,w=>{if(!(!w||this.isDisposed))for(let C of w.items)C.kind===a.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(h.document,C.uri)||this.diagnostics.set(C.uri,C.items)),this.documentStates.update(h.workspace,C.uri,C.version??void 0,C.resultId)})}createProvider(){let A={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(w,C,k)=>{let L=(y,M,O)=>{let H={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(y instanceof t.Uri?y:y.uri)},previousResultId:M};return this.isDisposed===!0||!this.client.isRunning()?{kind:a.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(n.DocumentDiagnosticRequest.type,H,O).then(async D=>D==null||this.isDisposed||O.isCancellationRequested?{kind:a.DocumentDiagnosticReportKind.full,items:[]}:D.kind===n.DocumentDiagnosticReportKind.Full?{kind:a.DocumentDiagnosticReportKind.full,resultId:D.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(D.items,O)}:{kind:a.DocumentDiagnosticReportKind.unChanged,resultId:D.resultId},D=>this.client.handleFailedRequest(n.DocumentDiagnosticRequest.type,O,D,{kind:a.DocumentDiagnosticReportKind.full,items:[]}))},S=this.client.middleware;return S.provideDiagnostics?S.provideDiagnostics(w,C,k,L):L(w,C,k)}};return this.options.workspaceDiagnostics&&(A.provideWorkspaceDiagnostics=(w,C,k)=>{let L=async O=>O.kind===n.DocumentDiagnosticReportKind.Full?{kind:a.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(O.uri),resultId:O.resultId,version:O.version,items:await this.client.protocol2CodeConverter.asDiagnostics(O.items,C)}:{kind:a.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(O.uri),resultId:O.resultId,version:O.version},S=O=>{let H=[];for(let D of O)H.push({uri:this.client.code2ProtocolConverter.asUri(D.uri),value:D.value});return H},y=(O,H)=>{let D=(0,o.generateUuid)(),K=this.client.onProgress(n.WorkspaceDiagnosticRequest.partialResult,D,async ie=>{if(ie==null){k(null);return}let ce={items:[]};for(let se of ie.items)try{ce.items.push(await L(se))}catch(_e){this.client.error("Converting workspace diagnostics failed.",_e)}k(ce)}),oe={identifier:this.options.identifier,previousResultIds:S(O),partialResultToken:D};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(n.WorkspaceDiagnosticRequest.type,oe,H).then(async ie=>{if(H.isCancellationRequested)return{items:[]};let ce={items:[]};for(let se of ie.items)ce.items.push(await L(se));return K.dispose(),k(ce),{items:[]}},ie=>(K.dispose(),this.client.handleFailedRequest(n.DocumentDiagnosticRequest.type,H,ie,{items:[]})))},M=this.client.middleware;return M.provideWorkspaceDiagnostics?M.provideWorkspaceDiagnostics(w,C,k,y):y(w,C)}),A}dispose(){var A,w;this.isDisposed=!0,(A=this.workspaceCancellation)==null||A.cancel(),(w=this.workspaceTimeout)==null||w.dispose();for(let[C,k]of this.openRequests)k.state===c.active&&k.tokenSource.cancel(),this.openRequests.set(C,{state:c.outDated,document:k.document});this.diagnostics.dispose()}}class p{constructor(A){this.diagnosticRequestor=A,this.documents=new n.LinkedMap,this.isDisposed=!1}add(A){if(this.isDisposed===!0)return;let w=A instanceof t.Uri?A.toString():A.uri.toString();this.documents.has(w)||(this.documents.set(w,A,n.Touch.Last),this.trigger())}remove(A){let w=A instanceof t.Uri?A.toString():A.uri.toString();this.documents.has(w)&&(this.documents.delete(w),this.diagnosticRequestor.pull(A)),this.documents.size===0?this.stop():A===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,n.RAL)().timer.setInterval(()=>{let A=this.documents.first;if(A!==void 0){let w=A instanceof t.Uri?A.toString():A.uri.toString();this.diagnosticRequestor.pull(A),this.documents.set(w,A,n.Touch.Last),A===this.endDocument&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){var A;(A=this.intervalHandle)==null||A.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}}class f{constructor(A,w,C){var k;let L=A.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},S=A.protocol2CodeConverter.asDocumentSelector(C.documentSelector),y=[],M=ce=>{let se=C.documentSelector;if(L.match!==void 0)return L.match(se,ce);for(let _e of se)if(n.TextDocumentFilter.is(_e)){if(typeof _e=="string"||_e.language!==void 0&&_e.language!=="*"||_e.scheme!==void 0&&_e.scheme!=="*"&&_e.scheme!==ce.scheme)return!1;if(_e.pattern!==void 0){let Ve=new e.Minimatch(_e.pattern,{noext:!0});if(!Ve.makeRe()||!Ve.match(ce.fsPath))return!1}}return!0},O=ce=>ce instanceof t.Uri?M(ce):t.languages.match(S,ce)>0&&w.isVisible(ce),H=ce=>{var se;return ce instanceof t.Uri?((se=this.activeTextDocument)==null?void 0:se.uri.toString())===ce.toString():this.activeTextDocument===ce};this.diagnosticRequestor=new g(A,w,C),this.backgroundScheduler=new p(this.diagnosticRequestor);let D=ce=>{!O(ce)||!C.interFileDependencies||H(ce)||this.backgroundScheduler.add(ce)};this.activeTextDocument=(k=t.window.activeTextEditor)==null?void 0:k.document,t.window.onDidChangeActiveTextEditor(ce=>{let se=this.activeTextDocument;this.activeTextDocument=ce?.document,se!==void 0&&D(se),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let K=A.getFeature(n.DidOpenTextDocumentNotification.method);y.push(K.onNotificationSent(ce=>{let se=ce.original;O(se)&&this.diagnosticRequestor.pull(se,()=>{D(se)})}));let oe=new Set;for(let ce of t.workspace.textDocuments)O(ce)&&(this.diagnosticRequestor.pull(ce,()=>{D(ce)}),oe.add(ce.uri.toString()));if(L.onTabs===!0)for(let ce of w.getTabResources())!oe.has(ce.toString())&&O(ce)&&this.diagnosticRequestor.pull(ce,()=>{D(ce)});if(w.onOpen(ce=>{for(let se of ce)O(se)&&!this.diagnosticRequestor.knows(h.document,se)&&this.diagnosticRequestor.pull(se,()=>{D(se)})}),L.onChange===!0){let ce=A.getFeature(n.DidChangeTextDocumentNotification.method);y.push(ce.onNotificationSent(async se=>{let _e=se.original.document;(L.filter===void 0||!L.filter(_e,l.onType))&&this.diagnosticRequestor.knows(h.document,_e)&&se.original.contentChanges.length>0&&this.diagnosticRequestor.pull(_e,()=>{this.backgroundScheduler.trigger()})}))}if(L.onSave===!0){let ce=A.getFeature(n.DidSaveTextDocumentNotification.method);y.push(ce.onNotificationSent(se=>{let _e=se.original;(L.filter===void 0||!L.filter(_e,l.onSave))&&this.diagnosticRequestor.knows(h.document,_e)&&this.diagnosticRequestor.pull(se.original,()=>{this.backgroundScheduler.trigger()})}))}let ie=A.getFeature(n.DidCloseTextDocumentNotification.method);y.push(ie.onNotificationSent(ce=>{this.cleanUpDocument(ce.original)})),w.onClose(ce=>{for(let se of ce)this.cleanUpDocument(se)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let ce of t.workspace.textDocuments)O(ce)&&this.diagnosticRequestor.pull(ce)}),C.workspaceDiagnostics===!0&&C.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=t.Disposable.from(...y,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(A){this.diagnosticRequestor.knows(h.document,A)&&(this.diagnosticRequestor.forgetDocument(A),this.backgroundScheduler.remove(A))}}class v extends r.TextDocumentLanguageFeature{constructor(A){super(A,n.DocumentDiagnosticRequest.type)}fillClientCapabilities(A){let w=s(s(A,"textDocument"),"diagnostic");w.dynamicRegistration=!0,w.relatedDocumentSupport=!1,s(s(A,"workspace"),"diagnostics").refreshSupport=!0}initialize(A,w){this._client.onRequest(n.DiagnosticRefreshRequest.type,async()=>{for(let L of this.getAllProviders())L.onDidChangeDiagnosticsEmitter.fire()});let[C,k]=this.getRegistration(w,A.diagnosticProvider);!C||!k||this.register({id:C,registerOptions:k})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(A){this.tabs===void 0&&(this.tabs=new d);let w=new f(this._client,this.tabs,A);return[w.disposable,w]}}i.DiagnosticFeature=v})(vX);var KN={};Object.defineProperty(KN,"__esModule",{value:!0});KN.NotebookDocumentSyncFeature=void 0;var gr=Ht,a2e=bX,cd=$t,l2e=Ni,cne=Vi;function dne(i,e){return i[e]===void 0&&(i[e]={}),i[e]}var Ff;(function(i){(function(e){function t(h,u){return{version:h.version,uri:u.asUri(h.uri)}}e.asVersionedNotebookDocumentIdentifier=t;function n(h,u,g){let p=cd.NotebookDocument.create(g.asUri(h.uri),h.notebookType,h.version,o(u,g));return Object.keys(h.metadata).length>0&&(p.metadata=r(h.metadata)),p}e.asNotebookDocument=n;function o(h,u){return h.map(g=>s(g,u))}e.asNotebookCells=o;function r(h){return l(new Set,h)}e.asMetadata=r;function s(h,u){let g=cd.NotebookCell.create(a(h.kind),u.asUri(h.document.uri));return Object.keys(h.metadata).length>0&&(g.metadata=r(h.metadata)),h.executionSummary!==void 0&&cne.number(h.executionSummary.executionOrder)&&cne.boolean(h.executionSummary.success)&&(g.executionSummary={executionOrder:h.executionSummary.executionOrder,success:h.executionSummary.success}),g}e.asNotebookCell=s;function a(h){switch(h){case gr.NotebookCellKind.Markup:return cd.NotebookCellKind.Markup;case gr.NotebookCellKind.Code:return cd.NotebookCellKind.Code}}function l(h,u){if(h.has(u))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(u)){let g=[];for(let p of u)if(p!==null&&typeof p=="object"||Array.isArray(p))g.push(l(h,p));else{if(p instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");g.push(p)}return g}else{let g=Object.keys(u),p=Object.create(null);for(let f of g){let v=u[f];if(v!==null&&typeof v=="object"||Array.isArray(v))p[f]=l(h,v);else{if(v instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");p[f]=v}}return p}}function c(h,u){let g=u.asChangeTextDocumentParams(h);return{document:g.textDocument,changes:g.contentChanges}}e.asTextContentChange=c;function d(h,u){let g=Object.create(null);if(h.metadata&&(g.metadata=i.c2p.asMetadata(h.metadata)),h.cells!==void 0){let p=Object.create(null),f=h.cells;f.structure&&(p.structure={array:{start:f.structure.array.start,deleteCount:f.structure.array.deleteCount,cells:f.structure.array.cells!==void 0?f.structure.array.cells.map(v=>i.c2p.asNotebookCell(v,u)):void 0},didOpen:f.structure.didOpen!==void 0?f.structure.didOpen.map(v=>u.asOpenTextDocumentParams(v.document).textDocument):void 0,didClose:f.structure.didClose!==void 0?f.structure.didClose.map(v=>u.asCloseTextDocumentParams(v.document).textDocument):void 0}),f.data!==void 0&&(p.data=f.data.map(v=>i.c2p.asNotebookCell(v,u))),f.textContent!==void 0&&(p.textContent=f.textContent.map(v=>i.c2p.asTextContentChange(v,u))),Object.keys(p).length>0&&(g.cells=p)}return g}e.asNotebookDocumentChangeEvent=d})(i.c2p||(i.c2p={}))})(Ff||(Ff={}));var V$;(function(i){function e(a,l,c){let d=a.length,h=l.length,u=0;for(;u<h&&u<d&&t(a[u],l[u],c);)u++;if(u<h&&u<d){let g=d-1,p=h-1;for(;g>=0&&p>=0&&t(a[g],l[p],c);)g--,p--;let f=g+1-u,v=u===p+1?void 0:l.slice(u,p+1);return v!==void 0?{start:u,deleteCount:f,cells:v}:{start:u,deleteCount:f}}else return u<h?{start:u,deleteCount:0,cells:l.slice(u)}:u<d?{start:u,deleteCount:d-u}:void 0}i.computeDiff=e;function t(a,l,c=!0){return a.kind!==l.kind||a.document.uri.toString()!==l.document.uri.toString()||a.document.languageId!==l.document.languageId||!n(a.executionSummary,l.executionSummary)?!1:!c||c&&r(a.metadata,l.metadata)}function n(a,l){return a===l?!0:a===void 0||l===void 0?!1:a.executionOrder===l.executionOrder&&a.success===l.success&&o(a.timing,l.timing)}function o(a,l){return a===l?!0:a===void 0||l===void 0?!1:a.startTime===l.startTime&&a.endTime===l.endTime}function r(a,l){if(a===l)return!0;if(a==null||l===null||l===void 0||typeof a!=typeof l||typeof a!="object")return!1;let c=Array.isArray(a),d=Array.isArray(l);if(c!==d)return!1;if(c&&d){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++)if(!r(a[h],l[h]))return!1}if(s(a)&&s(l)){let h=Object.keys(a),u=Object.keys(l);if(h.length!==u.length||(h.sort(),u.sort(),!r(h,u)))return!1;for(let g=0;g<h.length;g++){let p=h[g];if(!r(a[p],l[p]))return!1}return!0}return!1}function s(a){return a!==null&&typeof a=="object"}i.isObjectLiteral=s})(V$||(V$={}));var U$;(function(i){function e(t,n){if(typeof t=="string")return t==="*"||n.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&n.notebookType!==t.notebookType)return!1;let o=n.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&o.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let r=new a2e.Minimatch(t.pattern,{noext:!0});if(!r.makeRe()||!r.match(o.fsPath))return!1}return!0}i.matchNotebook=e})(U$||(U$={}));var dM;(function(i){function e(n){var o,r,s;let a=n.notebookSelector,l=[];for(let c of a){let d=(typeof c.notebook=="string"?c.notebook:(o=c.notebook)==null?void 0:o.notebookType)??"*",h=typeof c.notebook=="string"||(r=c.notebook)==null?void 0:r.scheme,u=typeof c.notebook=="string"||(s=c.notebook)==null?void 0:s.pattern;if(c.cells!==void 0)for(let g of c.cells)l.push(t(d,h,u,g.language));else l.push(t(d,h,u,void 0))}return l}i.asDocumentSelector=e;function t(n,o,r,s){return o===void 0&&r===void 0?{notebook:n,language:s}:{notebook:{notebookType:n,scheme:o,pattern:r},language:s}}})(dM||(dM={}));var hM;(function(i){function e(t){return{cells:t,uris:new Set(t.map(n=>n.document.uri.toString()))}}i.create=e})(hM||(hM={}));var Bf=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(dM.asDocumentSelector(t)),gr.workspace.onDidOpenNotebookDocument(n=>{this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n)},void 0,this.disposables);for(let n of gr.workspace.notebookDocuments)this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n);gr.workspace.onDidChangeNotebookDocument(n=>this.didChangeNotebookDocument(n),void 0,this.disposables),this.options.save===!0&&gr.workspace.onDidSaveNotebookDocument(n=>this.didSave(n),void 0,this.disposables),gr.workspace.onDidCloseNotebookDocument(n=>{this.didClose(n),this.notebookDidOpen.delete(n.uri.toString())},void 0,this.disposables)}getState(){for(let e of gr.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return gr.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(gr.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let n=this.notebookSyncInfo.get(e.uri.toString()),o=this.cellMatches(e,t);if(n!==void 0){let r=n.uris.has(t.document.uri.toString());if(o&&r||!o&&!r)return;if(o){let s=this.getMatchingCells(e);if(s!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,n,s);a!==void 0&&this.doSendChange(a,s).catch(()=>{})}}}else o&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){gr.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let n=this.notebookSyncInfo.get(e.uri.toString());if(n===void 0)return;let o=t.document.uri,r=n.cells.findIndex(s=>s.document.uri.toString()===o.toString());if(r!==-1)if(r===0&&n.cells.length===1)this.doSendClose(e,n.cells).catch(()=>{});else{let s=n.cells.slice(),a=s.splice(r,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:r,deleteCount:1},didClose:a}}},s).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),n=this.notebookSyncInfo.get(e.uri.toString())){if(n!==void 0)if(t!==void 0){let o=this.asNotebookDocumentChangeEvent(e,void 0,n,t);o!==void 0&&this.doSendChange(o,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,n=this.notebookSyncInfo.get(t.uri.toString());if(n===void 0){if(e.contentChanges.length===0)return;let o=this.getMatchingCells(t);if(o===void 0)return;this.didOpen(t,o,n)}else{let o=this.getMatchingCells(t);if(o===void 0){this.didClose(t,n);return}let r=this.asNotebookDocumentChangeEvent(e.notebook,e,n,o);r!==void 0&&this.doSendChange(r,o).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let n=e.getCells().filter(o=>t.uris.has(o.document.uri.toString()));this.doSendClose(e,n).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){var n;let o=async(s,a)=>{let l=Ff.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),c=a.map(d=>this.client.code2ProtocolConverter.asTextDocumentItem(d.document));try{await this.client.sendNotification(cd.DidOpenNotebookDocumentNotification.type,{notebookDocument:l,cellTextDocuments:c})}catch(d){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",d),d}},r=(n=this.client.middleware)==null?void 0:n.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),hM.create(t)),r?.didOpen!==void 0?r.didOpen(e,t,o):o(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){var n,o;let r=async a=>{try{await this.client.sendNotification(cd.DidChangeNotebookDocumentNotification.type,{notebookDocument:Ff.c2p.asVersionedNotebookDocumentIdentifier(a.notebook,this.client.code2ProtocolConverter),change:Ff.c2p.asNotebookDocumentChangeEvent(a,this.client.code2ProtocolConverter)})}catch(l){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",l),l}},s=(n=this.client.middleware)==null?void 0:n.notebooks;return((o=e.cells)==null?void 0:o.structure)!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),hM.create(t??[])),s?.didChange!==void 0?s?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){var t;let n=async r=>{try{await this.client.sendNotification(cd.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(r.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},o=(t=this.client.middleware)==null?void 0:t.notebooks;return o?.didSave!==void 0?o.didSave(e,n):n(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){var n;let o=async(s,a)=>{try{await this.client.sendNotification(cd.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:a.map(l=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(l.document))})}catch(l){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",l),l}},r=(n=this.client.middleware)==null?void 0:n.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),r?.didClose!==void 0?r.didClose(e,t,o):o(e,t)}asNotebookDocumentChangeEvent(e,t,n,o){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let r={notebook:e};t?.metadata!==void 0&&(r.metadata=Ff.c2p.asMetadata(t.metadata));let s;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let a=[];s=new Set(o.map(l=>l.document.uri.toString()));for(let l of t.cellChanges)s.has(l.cell.document.uri.toString())&&(l.executionSummary!==void 0||l.metadata!==void 0)&&a.push(l.cell);a.length>0&&(r.cells=r.cells??{},r.cells.data=a)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&n!==void 0&&o!==void 0){let a=n.cells,l=o,c=V$.computeDiff(a,l,!1),d,h;if(c!==void 0){d=c.cells===void 0?new Map:new Map(c.cells.map(p=>[p.document.uri.toString(),p])),h=c.deleteCount===0?new Map:new Map(a.slice(c.start,c.start+c.deleteCount).map(p=>[p.document.uri.toString(),p]));for(let p of Array.from(h.keys()))d.has(p)&&(h.delete(p),d.delete(p));r.cells=r.cells??{};let u=[],g=[];if(d.size>0||h.size>0){for(let p of d.values())u.push(p);for(let p of h.values())g.push(p)}r.cells.structure={array:c,didOpen:u,didClose:g}}}return Object.keys(r).length>1?r:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let n of this.options.notebookSelector)if(n.notebook===void 0||U$.matchNotebook(n.notebook,e)){let o=this.filterCells(e,t,n.cells);return o.length===0?void 0:o}}}cellMatches(e,t){let n=this.getMatchingCells(e,[t]);return n!==void 0&&n[0]===t}filterCells(e,t,n){var o;let r=n!==void 0?t.filter(s=>{let a=s.document.languageId;return n.some(l=>l.language==="*"||a===l.language)}):t;return typeof((o=this.client.clientOptions.notebookDocumentOptions)==null?void 0:o.filterCells)=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,r):r}},uM=class i{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=cd.NotebookDocumentSyncRegistrationType.type,gr.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==i.CellScheme)return;let[n,o]=this.findNotebookDocumentAndCell(t);if(!(n===void 0||o===void 0))for(let r of this.registrations.values())r instanceof Bf&&r.didOpenNotebookCellTextDocument(n,o)}),gr.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let n=t.document;if(n.uri.scheme!==i.CellScheme)return;let[o]=this.findNotebookDocumentAndCell(n);if(o!==void 0)for(let r of this.registrations.values())r instanceof Bf&&r.didChangeNotebookCellTextDocument(o,t)}),gr.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==i.CellScheme)return;let[n,o]=this.findNotebookDocumentAndCell(t);if(!(n===void 0||o===void 0))for(let r of this.registrations.values())r instanceof Bf&&r.didCloseNotebookCellTextDocument(n,o)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=dne(dne(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(dM.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let n=t.id??l2e.generateUuid();this.register({id:n,registerOptions:t})}register(e){let t=new Bf(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==i.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&gr.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let n of gr.workspace.notebookDocuments)for(let o of n.getCells())if(o.document.uri.toString()===t)return[n,o];return[void 0,void 0]}};KN.NotebookDocumentSyncFeature=uM;uM.CellScheme="vscode-notebook-cell";var Rh={};Object.defineProperty(Rh,"__esModule",{value:!0});var Dde=Rh.SyncConfigurationFeature=Rh.toJSONObject=xde=Rh.ConfigurationFeature=void 0,__=Ht,A1=$t,c2e=Vi,d2e=Ni,hne=Hi,Q$=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(A1.ConfigurationRequest.type,(t,n)=>{let o=s=>{let a=[];for(let l of s.items){let c=l.scopeUri!==void 0&&l.scopeUri!==null?this._client.protocol2CodeConverter.asUri(l.scopeUri):void 0;a.push(this.getConfiguration(c,l.section!==null?l.section:void 0))}return a},r=e.middleware.workspace;return r&&r.configuration?r.configuration(t,n,o):o(t)})}getConfiguration(e,t){let n=null;if(t){let o=t.lastIndexOf(".");if(o===-1)n=$g(__.workspace.getConfiguration(void 0,e).get(t));else{let r=__.workspace.getConfiguration(t.substr(0,o),e);r&&(n=$g(r.get(t.substr(o+1))))}}else{let o=__.workspace.getConfiguration(void 0,e);n={};for(let r of Object.keys(o))o.has(r)&&(n[r]=$g(o.get(r)))}return n===void 0&&(n=null),n}dispose(){}},xde=Rh.ConfigurationFeature=Q$;function $g(i){if(i){if(Array.isArray(i))return i.map($g);if(typeof i=="object"){let e=Object.create(null);for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=$g(i[t]));return e}}return i}Rh.toJSONObject=$g;var j$=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return A1.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,hne.ensure)((0,hne.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){var e;let t=(e=this._client.clientOptions.synchronize)==null?void 0:e.configurationSection;t!==void 0&&this.register({id:d2e.generateUuid(),registerOptions:{section:t}})}register(e){let t=__.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){var n;let o;if(c2e.string(e)?o=[e]:o=e,o!==void 0&&t!==void 0&&!o.some(a=>t.affectsConfiguration(a)))return;let r=async a=>a===void 0?this._client.sendNotification(A1.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(A1.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(a)}),s=(n=this._client.middleware.workspace)==null?void 0:n.didChangeConfiguration;(s?s(o,r):r(o)).catch(a=>{this._client.error(`Sending notification ${A1.DidChangeConfigurationNotification.type.method} failed`,a)})}extractSettingsInformation(e){function t(r,s){let a=r;for(let l=0;l<s.length-1;l++){let c=a[s[l]];c||(c=Object.create(null),a[s[l]]=c),a=c}return a}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,o=Object.create(null);for(let r=0;r<e.length;r++){let s=e[r],a=s.indexOf("."),l=null;if(a>=0?l=__.workspace.getConfiguration(s.substr(0,a),n).get(s.substr(a+1)):l=__.workspace.getConfiguration(void 0,n).get(s),l){let c=e[r].split(".");t(o,c)[c[c.length-1]]=$g(l)}}return o}};Dde=Rh.SyncConfigurationFeature=j$;var es={};Object.defineProperty(es,"__esModule",{value:!0});var kde=es.DidSaveTextDocumentFeature=Mde=es.WillSaveWaitUntilFeature=Tde=es.WillSaveFeature=Ide=es.DidChangeTextDocumentFeature=Lde=es.DidCloseTextDocumentFeature=Ede=es.DidOpenTextDocumentFeature=void 0,pa=Ht,wo=$t,In=Hi,h2e=Do,uv=Ni,K$=class extends In.TextDocumentEventFeature{constructor(e,t){super(e,pa.workspace.onDidOpenTextDocument,wo.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),n=>n,In.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,In.ensure)((0,In.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:uv.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return wo.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);pa.workspace.textDocuments.forEach(n=>{let o=n.uri.toString();if(!this._syncedDocuments.has(o)&&pa.languages.match(t,n)>0&&!this._client.hasDedicatedTextSynchronizationFeature(n)){let r=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));(r.didOpen?r.didOpen(n,s):s(n)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(o,n)}})}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.set(e.uri.toString(),e)}},Ede=es.DidOpenTextDocumentFeature=K$,q$=class extends In.TextDocumentEventFeature{constructor(e,t){super(e,pa.workspace.onDidCloseTextDocument,wo.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),n=>n,In.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get registrationType(){return wo.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,In.ensure)((0,In.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:uv.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(o=>{if(pa.languages.match(t,o)>0&&!this._selectorFilter(n,o)&&!this._client.hasDedicatedTextSynchronizationFeature(o)){let r=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(o.uri.toString()),(r.didClose?r.didClose(o,s):s(o)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}},Lde=es.DidCloseTextDocumentFeature=q$,$$=class extends In.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new pa.EventEmitter}get registrationType(){return wo.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,In.ensure)((0,In.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.change!==void 0&&n.change!==wo.TextDocumentSyncKind.None&&this.register({id:uv.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=pa.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=[];for(let n of this._changeData.values())if(pa.languages.match(n.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let o=this._client.middleware;if(n.syncKind===wo.TextDocumentSyncKind.Incremental){let r=async s=>{let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(s);await this._client.sendNotification(wo.DidChangeTextDocumentNotification.type,a),this.notificationSent(s,wo.DidChangeTextDocumentNotification.type,a)};t.push(o.didChange?o.didChange(e,s=>r(s)):r(e))}else if(n.syncKind===wo.TextDocumentSyncKind.Full){let r=async s=>{let a=async l=>{let c=this._client.code2ProtocolConverter.asChangeTextDocumentParams(l.document);await this._client.sendNotification(wo.DidChangeTextDocumentNotification.type,c),this.notificationSent(l,wo.DidChangeTextDocumentNotification.type,c)};return this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>a(s))):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new h2e.Delayer(200)},this._changeDelayer.delayer.trigger(()=>a(s),-1))};t.push(o.didChange?o.didChange(e,s=>r(s)):r(e))}}return Promise.all(t).then(void 0,n=>{throw this._client.error(`Sending document notification ${wo.DidChangeTextDocumentNotification.type.method} failed`,n),n})}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer!==void 0&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let t of this._changeData.values())if(pa.languages.match(t.documentSelector,e)>0)return{send:n=>this.callback(n)}}},Ide=es.DidChangeTextDocumentFeature=$$,G$=class extends In.TextDocumentEventFeature{constructor(e){super(e,pa.workspace.onWillSaveTextDocument,wo.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,n)=>In.TextDocumentEventFeature.textDocumentFilter(t,n.document))}get registrationType(){return wo.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,In.ensure)((0,In.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register({id:uv.generateUuid(),registerOptions:{documentSelector:t}})}},Tde=es.WillSaveFeature=G$,Y$=class extends In.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return wo.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,In.ensure)((0,In.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register({id:uv.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=pa.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(In.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,n=o=>this._client.sendRequest(wo.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(o)).then(async r=>{let s=await this._client.protocol2CodeConverter.asTextEdits(r);return s===void 0?[]:s});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},Mde=es.WillSaveWaitUntilFeature=Y$,J$=class extends In.TextDocumentEventFeature{constructor(e){super(e,pa.workspace.onDidSaveTextDocument,wo.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,In.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return wo.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,In.ensure)((0,In.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;if(t&&n&&n.save){let o=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:uv.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},o)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}};kde=es.DidSaveTextDocumentFeature=J$;var qN={};Object.defineProperty(qN,"__esModule",{value:!0});var Nde=qN.CompletionItemFeature=void 0,u2e=Ht,pi=$t,gF=Hi,g2e=Ni,p2e=[pi.CompletionItemKind.Text,pi.CompletionItemKind.Method,pi.CompletionItemKind.Function,pi.CompletionItemKind.Constructor,pi.CompletionItemKind.Field,pi.CompletionItemKind.Variable,pi.CompletionItemKind.Class,pi.CompletionItemKind.Interface,pi.CompletionItemKind.Module,pi.CompletionItemKind.Property,pi.CompletionItemKind.Unit,pi.CompletionItemKind.Value,pi.CompletionItemKind.Enum,pi.CompletionItemKind.Keyword,pi.CompletionItemKind.Snippet,pi.CompletionItemKind.Color,pi.CompletionItemKind.File,pi.CompletionItemKind.Reference,pi.CompletionItemKind.Folder,pi.CompletionItemKind.EnumMember,pi.CompletionItemKind.Constant,pi.CompletionItemKind.Struct,pi.CompletionItemKind.Event,pi.CompletionItemKind.Operator,pi.CompletionItemKind.TypeParameter],X$=class extends gF.TextDocumentLanguageFeature{constructor(e){super(e,pi.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,gF.ensure)((0,gF.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[pi.MarkupKind.Markdown,pi.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[pi.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[pi.InsertTextMode.asIs,pi.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=pi.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:p2e},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){let n=this.getRegistrationOptions(t,e.completionProvider);n&&this.register({id:g2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e,t){var n;this.labelDetailsSupport.set(t,!!((n=e.completionItem)!=null&&n.labelDetailsSupport));let o=e.triggerCharacters??[],r=e.allCommitCharacters,s=e.documentSelector,a={provideCompletionItems:(l,c,d,h)=>{let u=this._client,g=this._client.middleware,p=(f,v,b,A)=>u.sendRequest(pi.CompletionRequest.type,u.code2ProtocolConverter.asCompletionParams(f,v,b),A).then(w=>A.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionResult(w,r,A),w=>u.handleFailedRequest(pi.CompletionRequest.type,A,w,null));return g.provideCompletionItem?g.provideCompletionItem(l,c,h,d,p):p(l,c,h,d)},resolveCompletionItem:e.resolveProvider?(l,c)=>{let d=this._client,h=this._client.middleware,u=(g,p)=>d.sendRequest(pi.CompletionResolveRequest.type,d.code2ProtocolConverter.asCompletionItem(g,!!this.labelDetailsSupport.get(t)),p).then(f=>p.isCancellationRequested?null:d.protocol2CodeConverter.asCompletionItem(f),f=>d.handleFailedRequest(pi.CompletionResolveRequest.type,p,f,g));return h.resolveCompletionItem?h.resolveCompletionItem(l,c,u):u(l,c)}:void 0};return[u2e.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),a,...o),a]}};Nde=qN.CompletionItemFeature=X$;var $N={};Object.defineProperty($N,"__esModule",{value:!0});var Rde=$N.HoverFeature=void 0,m2e=Ht,zv=$t,pF=Hi,f2e=Ni,Z$=class extends pF.TextDocumentLanguageFeature{constructor(e){super(e,zv.HoverRequest.type)}fillClientCapabilities(e){let t=(0,pF.ensure)((0,pF.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[zv.MarkupKind.Markdown,zv.MarkupKind.PlainText]}initialize(e,t){let n=this.getRegistrationOptions(t,e.hoverProvider);n&&this.register({id:f2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideHover:(o,r,s)=>{let a=this._client,l=(d,h,u)=>a.sendRequest(zv.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),u).then(g=>u.isCancellationRequested?null:a.protocol2CodeConverter.asHover(g),g=>a.handleFailedRequest(zv.HoverRequest.type,u,g,null)),c=a.middleware;return c.provideHover?c.provideHover(o,r,s,l):l(o,r,s)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return m2e.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Rde=$N.HoverFeature=Z$;var GN={};Object.defineProperty(GN,"__esModule",{value:!0});var Fde=GN.DefinitionFeature=void 0,_2e=Ht,mF=$t,fF=Hi,v2e=Ni,eG=class extends fF.TextDocumentLanguageFeature{constructor(e){super(e,mF.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,fF.ensure)((0,fF.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.definitionProvider);n&&this.register({id:v2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDefinition:(o,r,s)=>{let a=this._client,l=(d,h,u)=>a.sendRequest(mF.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),u).then(g=>u.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,u),g=>a.handleFailedRequest(mF.DefinitionRequest.type,u,g,null)),c=a.middleware;return c.provideDefinition?c.provideDefinition(o,r,s,l):l(o,r,s)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return _2e.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Fde=GN.DefinitionFeature=eG;var YN={};Object.defineProperty(YN,"__esModule",{value:!0});var Bde=YN.SignatureHelpFeature=void 0,une=Ht,Vv=$t,_F=Hi,A2e=Ni,tG=class extends _F.TextDocumentLanguageFeature{constructor(e){super(e,Vv.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,_F.ensure)((0,_F.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Vv.MarkupKind.Markdown,Vv.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.signatureHelpProvider);n&&this.register({id:A2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideSignatureHelp:(n,o,r,s)=>{let a=this._client,l=(d,h,u,g)=>a.sendRequest(Vv.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(d,h,u),g).then(p=>g.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(p,g),p=>a.handleFailedRequest(Vv.SignatureHelpRequest.type,g,p,null)),c=a.middleware;return c.provideSignatureHelp?c.provideSignatureHelp(n,o,s,r,l):l(n,o,s,r)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let n=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let o=e.triggerCharacters||[];return une.languages.registerSignatureHelpProvider(n,t,...o)}else{let o={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return une.languages.registerSignatureHelpProvider(n,t,o)}}};Bde=YN.SignatureHelpFeature=tG;var JN={};Object.defineProperty(JN,"__esModule",{value:!0});var Pde=JN.DocumentHighlightFeature=void 0,b2e=Ht,vF=$t,AF=Hi,w2e=Ni,iG=class extends AF.TextDocumentLanguageFeature{constructor(e){super(e,vF.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,AF.ensure)((0,AF.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentHighlightProvider);n&&this.register({id:w2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentHighlights:(o,r,s)=>{let a=this._client,l=(d,h,u)=>a.sendRequest(vF.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),u).then(g=>u.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(g,u),g=>a.handleFailedRequest(vF.DocumentHighlightRequest.type,u,g,null)),c=a.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(o,r,s,l):l(o,r,s)}};return[b2e.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};Pde=JN.DocumentHighlightFeature=iG;var XN={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DocumentSymbolFeature=i.SupportedSymbolTags=i.SupportedSymbolKinds=void 0;let e=Ht,t=$t,n=Hi,o=Ni;i.SupportedSymbolKinds=[t.SymbolKind.File,t.SymbolKind.Module,t.SymbolKind.Namespace,t.SymbolKind.Package,t.SymbolKind.Class,t.SymbolKind.Method,t.SymbolKind.Property,t.SymbolKind.Field,t.SymbolKind.Constructor,t.SymbolKind.Enum,t.SymbolKind.Interface,t.SymbolKind.Function,t.SymbolKind.Variable,t.SymbolKind.Constant,t.SymbolKind.String,t.SymbolKind.Number,t.SymbolKind.Boolean,t.SymbolKind.Array,t.SymbolKind.Object,t.SymbolKind.Key,t.SymbolKind.Null,t.SymbolKind.EnumMember,t.SymbolKind.Struct,t.SymbolKind.Event,t.SymbolKind.Operator,t.SymbolKind.TypeParameter],i.SupportedSymbolTags=[t.SymbolTag.Deprecated];class r extends n.TextDocumentLanguageFeature{constructor(a){super(a,t.DocumentSymbolRequest.type)}fillClientCapabilities(a){let l=(0,n.ensure)((0,n.ensure)(a,"textDocument"),"documentSymbol");l.dynamicRegistration=!0,l.symbolKind={valueSet:i.SupportedSymbolKinds},l.hierarchicalDocumentSymbolSupport=!0,l.tagSupport={valueSet:i.SupportedSymbolTags},l.labelSupport=!0}initialize(a,l){let c=this.getRegistrationOptions(l,a.documentSymbolProvider);c&&this.register({id:o.generateUuid(),registerOptions:c})}registerLanguageProvider(a){let l=a.documentSelector,c={provideDocumentSymbols:(h,u)=>{let g=this._client,p=(v,b)=>g.sendRequest(t.DocumentSymbolRequest.type,g.code2ProtocolConverter.asDocumentSymbolParams(v),b).then(async A=>{if(b.isCancellationRequested||A===void 0||A===null)return null;if(A.length===0)return[];{let w=A[0];return t.DocumentSymbol.is(w)?await g.protocol2CodeConverter.asDocumentSymbols(A,b):await g.protocol2CodeConverter.asSymbolInformations(A,b)}},A=>g.handleFailedRequest(t.DocumentSymbolRequest.type,b,A,null)),f=g.middleware;return f.provideDocumentSymbols?f.provideDocumentSymbols(h,u,p):p(h,u)}},d=a.label!==void 0?{label:a.label}:void 0;return[e.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(l),c,d),c]}}i.DocumentSymbolFeature=r})(XN);var ZN={};Object.defineProperty(ZN,"__esModule",{value:!0});ZN.WorkspaceSymbolFeature=void 0;var C2e=Ht,Uv=$t,bF=Hi,gne=XN,y2e=Ni,nG=class extends bF.WorkspaceFeature{constructor(e){super(e,Uv.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,bF.ensure)((0,bF.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:gne.SupportedSymbolKinds},t.tagSupport={valueSet:gne.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:y2e.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(n,o)=>{let r=this._client,s=(l,c)=>r.sendRequest(Uv.WorkspaceSymbolRequest.type,{query:l},c).then(d=>c.isCancellationRequested?null:r.protocol2CodeConverter.asSymbolInformations(d,c),d=>r.handleFailedRequest(Uv.WorkspaceSymbolRequest.type,c,d,null)),a=r.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(n,o,s):s(n,o)},resolveWorkspaceSymbol:e.resolveProvider===!0?(n,o)=>{let r=this._client,s=(l,c)=>r.sendRequest(Uv.WorkspaceSymbolResolveRequest.type,r.code2ProtocolConverter.asWorkspaceSymbol(l),c).then(d=>c.isCancellationRequested?null:r.protocol2CodeConverter.asSymbolInformation(d),d=>r.handleFailedRequest(Uv.WorkspaceSymbolResolveRequest.type,c,d,null)),a=r.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(n,o,s):s(n,o)}:void 0};return[C2e.languages.registerWorkspaceSymbolProvider(t),t]}};ZN.WorkspaceSymbolFeature=nG;var e2={};Object.defineProperty(e2,"__esModule",{value:!0});var Ode=e2.ReferencesFeature=void 0,S2e=Ht,wF=$t,CF=Hi,D2e=Ni,oG=class extends CF.TextDocumentLanguageFeature{constructor(e){super(e,wF.ReferencesRequest.type)}fillClientCapabilities(e){(0,CF.ensure)((0,CF.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.referencesProvider);n&&this.register({id:D2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideReferences:(o,r,s,a)=>{let l=this._client,c=(h,u,g,p)=>l.sendRequest(wF.ReferencesRequest.type,l.code2ProtocolConverter.asReferenceParams(h,u,g),p).then(f=>p.isCancellationRequested?null:l.protocol2CodeConverter.asReferences(f,p),f=>l.handleFailedRequest(wF.ReferencesRequest.type,p,f,null)),d=l.middleware;return d.provideReferences?d.provideReferences(o,r,s,a,c):c(o,r,s,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return S2e.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Ode=e2.ReferencesFeature=oG;var t2={};Object.defineProperty(t2,"__esModule",{value:!0});var Hde=t2.CodeActionFeature=void 0,x2e=Ht,fs=$t,k2e=Ni,yF=Hi,rG=class extends yF.TextDocumentLanguageFeature{constructor(e){super(e,fs.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,yF.ensure)((0,yF.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[fs.CodeActionKind.Empty,fs.CodeActionKind.QuickFix,fs.CodeActionKind.Refactor,fs.CodeActionKind.RefactorExtract,fs.CodeActionKind.RefactorInline,fs.CodeActionKind.RefactorRewrite,fs.CodeActionKind.Source,fs.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let n=this.getRegistrationOptions(t,e.codeActionProvider);n&&this.register({id:k2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideCodeActions:(o,r,s,a)=>{let l=this._client,c=async(h,u,g,p)=>{let f={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(h),range:l.code2ProtocolConverter.asRange(u),context:await l.code2ProtocolConverter.asCodeActionContext(g,p)};return l.sendRequest(fs.CodeActionRequest.type,f,p).then(v=>p.isCancellationRequested||v===null||v===void 0?null:l.protocol2CodeConverter.asCodeActionResult(v,p),v=>l.handleFailedRequest(fs.CodeActionRequest.type,p,v,null))},d=l.middleware;return d.provideCodeActions?d.provideCodeActions(o,r,s,a,c):c(o,r,s,a)},resolveCodeAction:e.resolveProvider?(o,r)=>{let s=this._client,a=this._client.middleware,l=async(c,d)=>s.sendRequest(fs.CodeActionResolveRequest.type,await s.code2ProtocolConverter.asCodeAction(c,d),d).then(h=>d.isCancellationRequested?c:s.protocol2CodeConverter.asCodeAction(h,d),h=>s.handleFailedRequest(fs.CodeActionResolveRequest.type,d,h,c));return a.resolveCodeAction?a.resolveCodeAction(o,r,l):l(o,r)}:void 0};return[x2e.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}};Hde=t2.CodeActionFeature=rG;var i2={};Object.defineProperty(i2,"__esModule",{value:!0});var Wde=i2.CodeLensFeature=void 0,pne=Ht,Om=$t,E2e=Ni,Qv=Hi,sG=class extends Qv.TextDocumentLanguageFeature{constructor(e){super(e,Om.CodeLensRequest.type)}fillClientCapabilities(e){(0,Qv.ensure)((0,Qv.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Qv.ensure)((0,Qv.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Om.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let n=this.getRegistrationOptions(t,e.codeLensProvider);n&&this.register({id:E2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n=new pne.EventEmitter,o={onDidChangeCodeLenses:n.event,provideCodeLenses:(r,s)=>{let a=this._client,l=(d,h)=>a.sendRequest(Om.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(d),h).then(u=>h.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(u,h),u=>a.handleFailedRequest(Om.CodeLensRequest.type,h,u,null)),c=a.middleware;return c.provideCodeLenses?c.provideCodeLenses(r,s,l):l(r,s)},resolveCodeLens:e.resolveProvider?(r,s)=>{let a=this._client,l=(d,h)=>a.sendRequest(Om.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(d),h).then(u=>h.isCancellationRequested?d:a.protocol2CodeConverter.asCodeLens(u),u=>a.handleFailedRequest(Om.CodeLensResolveRequest.type,h,u,d)),c=a.middleware;return c.resolveCodeLens?c.resolveCodeLens(r,s,l):l(r,s)}:void 0};return[pne.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),o),{provider:o,onDidChangeCodeLensEmitter:n}]}};Wde=i2.CodeLensFeature=sG;var Fh={};Object.defineProperty(Fh,"__esModule",{value:!0});var zde=Fh.DocumentOnTypeFormattingFeature=Ude=Fh.DocumentRangeFormattingFeature=Vde=Fh.DocumentFormattingFeature=void 0,n2=Ht,_d=$t,CX=Ni,vd=Hi,TC;(function(i){function e(t){let n=n2.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}i.fromConfiguration=e})(TC||(TC={}));var aG=class extends vd.TextDocumentLanguageFeature{constructor(e){super(e,_d.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,vd.ensure)((0,vd.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentFormattingProvider);n&&this.register({id:CX.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentFormattingEdits:(o,r,s)=>{let a=this._client,l=(d,h,u)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),options:a.code2ProtocolConverter.asFormattingOptions(h,TC.fromConfiguration(d))};return a.sendRequest(_d.DocumentFormattingRequest.type,g,u).then(p=>u.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(p,u),p=>a.handleFailedRequest(_d.DocumentFormattingRequest.type,u,p,null))},c=a.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(o,r,s,l):l(o,r,s)}};return[n2.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}},Vde=Fh.DocumentFormattingFeature=aG,lG=class extends vd.TextDocumentLanguageFeature{constructor(e){super(e,_d.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,vd.ensure)((0,vd.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);n&&this.register({id:CX.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentRangeFormattingEdits:(o,r,s,a)=>{let l=this._client,c=(h,u,g,p)=>{let f={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(h),range:l.code2ProtocolConverter.asRange(u),options:l.code2ProtocolConverter.asFormattingOptions(g,TC.fromConfiguration(h))};return l.sendRequest(_d.DocumentRangeFormattingRequest.type,f,p).then(v=>p.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(v,p),v=>l.handleFailedRequest(_d.DocumentRangeFormattingRequest.type,p,v,null))},d=l.middleware;return d.provideDocumentRangeFormattingEdits?d.provideDocumentRangeFormattingEdits(o,r,s,a,c):c(o,r,s,a)}};return[n2.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}},Ude=Fh.DocumentRangeFormattingFeature=lG,cG=class extends vd.TextDocumentLanguageFeature{constructor(e){super(e,_d.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,vd.ensure)((0,vd.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);n&&this.register({id:CX.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideOnTypeFormattingEdits:(r,s,a,l,c)=>{let d=this._client,h=(g,p,f,v,b)=>{let A={textDocument:d.code2ProtocolConverter.asTextDocumentIdentifier(g),position:d.code2ProtocolConverter.asPosition(p),ch:f,options:d.code2ProtocolConverter.asFormattingOptions(v,TC.fromConfiguration(g))};return d.sendRequest(_d.DocumentOnTypeFormattingRequest.type,A,b).then(w=>b.isCancellationRequested?null:d.protocol2CodeConverter.asTextEdits(w,b),w=>d.handleFailedRequest(_d.DocumentOnTypeFormattingRequest.type,b,w,null))},u=d.middleware;return u.provideOnTypeFormattingEdits?u.provideOnTypeFormattingEdits(r,s,a,l,c,h):h(r,s,a,l,c)}},o=e.moreTriggerCharacter||[];return[n2.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.firstTriggerCharacter,...o),n]}};zde=Fh.DocumentOnTypeFormattingFeature=cG;var o2={};Object.defineProperty(o2,"__esModule",{value:!0});var Qde=o2.RenameFeature=void 0,L2e=Ht,Bu=$t,I2e=Ni,mne=Vi,SF=Hi,dG=class extends SF.TextDocumentLanguageFeature{constructor(e){super(e,Bu.RenameRequest.type)}fillClientCapabilities(e){let t=(0,SF.ensure)((0,SF.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=Bu.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.renameProvider);n&&(mne.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:I2e.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let t=e.documentSelector,n={provideRenameEdits:(o,r,s,a)=>{let l=this._client,c=(h,u,g,p)=>{let f={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(h),position:l.code2ProtocolConverter.asPosition(u),newName:g};return l.sendRequest(Bu.RenameRequest.type,f,p).then(v=>p.isCancellationRequested?null:l.protocol2CodeConverter.asWorkspaceEdit(v,p),v=>l.handleFailedRequest(Bu.RenameRequest.type,p,v,null,!1))},d=l.middleware;return d.provideRenameEdits?d.provideRenameEdits(o,r,s,a,c):c(o,r,s,a)},prepareRename:e.prepareProvider?(o,r,s)=>{let a=this._client,l=(d,h,u)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),position:a.code2ProtocolConverter.asPosition(h)};return a.sendRequest(Bu.PrepareRenameRequest.type,g,u).then(p=>u.isCancellationRequested?null:Bu.Range.is(p)?a.protocol2CodeConverter.asRange(p):this.isDefaultBehavior(p)?p.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):p&&Bu.Range.is(p.range)?{range:a.protocol2CodeConverter.asRange(p.range),placeholder:p.placeholder}:Promise.reject(new Error("The element can't be renamed.")),p=>{throw typeof p.message=="string"?new Error(p.message):new Error("The element can't be renamed.")})},c=a.middleware;return c.prepareRename?c.prepareRename(o,r,s,l):l(o,r,s)}:void 0};return[this.registerProvider(t,n),n]}registerProvider(e,t){return L2e.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&mne.boolean(t.defaultBehavior)}};Qde=o2.RenameFeature=dG;var r2={};Object.defineProperty(r2,"__esModule",{value:!0});var jde=r2.DocumentLinkFeature=void 0,T2e=Ht,jv=$t,DF=Hi,M2e=Ni,hG=class extends DF.TextDocumentLanguageFeature{constructor(e){super(e,jv.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,DF.ensure)((0,DF.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentLinkProvider);n&&this.register({id:M2e.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDocumentLinks:(o,r)=>{let s=this._client,a=(c,d)=>s.sendRequest(jv.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(c),d).then(h=>d.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(h,d),h=>s.handleFailedRequest(jv.DocumentLinkRequest.type,d,h,null)),l=s.middleware;return l.provideDocumentLinks?l.provideDocumentLinks(o,r,a):a(o,r)},resolveDocumentLink:e.resolveProvider?(o,r)=>{let s=this._client,a=(c,d)=>s.sendRequest(jv.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(c),d).then(h=>d.isCancellationRequested?c:s.protocol2CodeConverter.asDocumentLink(h),h=>s.handleFailedRequest(jv.DocumentLinkResolveRequest.type,d,h,c)),l=s.middleware;return l.resolveDocumentLink?l.resolveDocumentLink(o,r,a):a(o,r)}:void 0};return[T2e.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};jde=r2.DocumentLinkFeature=hG;var s2={};Object.defineProperty(s2,"__esModule",{value:!0});var Kde=s2.ExecuteCommandFeature=void 0,N2e=Ht,xF=$t,R2e=Ni,fne=Hi,uG=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return xF.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,fne.ensure)((0,fne.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:R2e.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,n=t.middleware,o=(r,s)=>{let a={command:r,arguments:s};return t.sendRequest(xF.ExecuteCommandRequest.type,a).then(void 0,l=>t.handleFailedRequest(xF.ExecuteCommandRequest.type,void 0,l,void 0))};if(e.registerOptions.commands){let r=[];for(let s of e.registerOptions.commands)r.push(N2e.commands.registerCommand(s,(...a)=>n.executeCommand?n.executeCommand(s,a,o):o(s,a)));this._commands.set(e.id,r)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};Kde=s2.ExecuteCommandFeature=uG;var a2={};Object.defineProperty(a2,"__esModule",{value:!0});a2.FileSystemWatcherFeature=void 0;var F2e=Ht,Pu=$t,bS=Hi,gG=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Pu.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,bS.ensure)((0,bS.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,bS.ensure)((0,bS.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let n of e.registerOptions.watchers){let o=this._client.protocol2CodeConverter.asGlobPattern(n.globPattern);if(o===void 0)continue;let r=!0,s=!0,a=!0;n.kind!==void 0&&n.kind!==null&&(r=(n.kind&Pu.WatchKind.Create)!==0,s=(n.kind&Pu.WatchKind.Change)!==0,a=(n.kind&Pu.WatchKind.Delete)!==0);let l=F2e.workspace.createFileSystemWatcher(o,!r,!s,!a);this.hookListeners(l,r,s,a,t),t.push(l)}this._watchers.set(e.id,t)}registerRaw(e,t){let n=[];for(let o of t)this.hookListeners(o,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,o,r){t&&e.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:Pu.FileChangeType.Created}),null,r),n&&e.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:Pu.FileChangeType.Changed}),null,r),o&&e.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:Pu.FileChangeType.Deleted}),null,r)}unregister(e){let t=this._watchers.get(e);if(t)for(let n of t)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};a2.FileSystemWatcherFeature=gG;var l2={};Object.defineProperty(l2,"__esModule",{value:!0});var qde=l2.ColorProviderFeature=void 0,B2e=Ht,Kv=$t,kF=Hi,pG=class extends kF.TextDocumentLanguageFeature{constructor(e){super(e,Kv.DocumentColorRequest.type)}fillClientCapabilities(e){(0,kF.ensure)((0,kF.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,o]=this.getRegistration(t,e.colorProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n={provideColorPresentations:(o,r,s)=>{let a=this._client,l=(d,h,u)=>{let g={color:d,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h.document),range:a.code2ProtocolConverter.asRange(h.range)};return a.sendRequest(Kv.ColorPresentationRequest.type,g,u).then(p=>u.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(p,u),p=>a.handleFailedRequest(Kv.ColorPresentationRequest.type,u,p,null))},c=a.middleware;return c.provideColorPresentations?c.provideColorPresentations(o,r,s,l):l(o,r,s)},provideDocumentColors:(o,r)=>{let s=this._client,a=(c,d)=>{let h={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(c)};return s.sendRequest(Kv.DocumentColorRequest.type,h,d).then(u=>d.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(u,d),u=>s.handleFailedRequest(Kv.DocumentColorRequest.type,d,u,null))},l=s.middleware;return l.provideDocumentColors?l.provideDocumentColors(o,r,a):a(o,r)}};return[B2e.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};qde=l2.ColorProviderFeature=pG;var c2={};Object.defineProperty(c2,"__esModule",{value:!0});var $de=c2.ImplementationFeature=void 0,P2e=Ht,EF=$t,LF=Hi,mG=class extends LF.TextDocumentLanguageFeature{constructor(e){super(e,EF.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,LF.ensure)((0,LF.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,o]=this.getRegistration(t,e.implementationProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n={provideImplementation:(o,r,s)=>{let a=this._client,l=(d,h,u)=>a.sendRequest(EF.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),u).then(g=>u.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,u),g=>a.handleFailedRequest(EF.ImplementationRequest.type,u,g,null)),c=a.middleware;return c.provideImplementation?c.provideImplementation(o,r,s,l):l(o,r,s)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return P2e.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};$de=c2.ImplementationFeature=mG;var d2={};Object.defineProperty(d2,"__esModule",{value:!0});var Gde=d2.TypeDefinitionFeature=void 0,O2e=Ht,IF=$t,qv=Hi,fG=class extends qv.TextDocumentLanguageFeature{constructor(e){super(e,IF.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,qv.ensure)((0,qv.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,qv.ensure)((0,qv.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,o]=this.getRegistration(t,e.typeDefinitionProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n={provideTypeDefinition:(o,r,s)=>{let a=this._client,l=(d,h,u)=>a.sendRequest(IF.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),u).then(g=>u.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,u),g=>a.handleFailedRequest(IF.TypeDefinitionRequest.type,u,g,null)),c=a.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(o,r,s,l):l(o,r,s)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return O2e.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Gde=d2.TypeDefinitionFeature=fG;var X0={};Object.defineProperty(X0,"__esModule",{value:!0});var Yde=X0.WorkspaceFoldersFeature=X0.arrayDiff=void 0,H2e=Ni,wS=Ht,$v=$t;function TF(i,e){if(i!==void 0)return i[e]}function _G(i,e){return i.filter(t=>e.indexOf(t)<0)}X0.arrayDiff=_G;var vG=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return $v.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=wS.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest($v.WorkspaceFoldersRequest.type,r=>{let s=()=>{let l=wS.workspace.workspaceFolders;return l===void 0?null:l.map(c=>this.asProtocol(c))},a=t.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(r,s):s()});let n=TF(TF(TF(e,"workspace"),"workspaceFolders"),"changeNotifications"),o;typeof n=="string"?o=n:n===!0&&(o=H2e.generateUuid()),o&&this.register({id:o,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let n=_G(this._initialFolders,e),o=_G(e,this._initialFolders);(o.length>0||n.length>0)&&(t=this.doSendEvent(o,n))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(n=>{this._client.error(`Sending notification ${$v.DidChangeWorkspaceFoldersNotification.type.method} failed`,n)})}doSendEvent(e,t){let n={event:{added:e.map(o=>this.asProtocol(o)),removed:t.map(o=>this.asProtocol(o))}};return this._client.sendNotification($v.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id,n=this._client,o=wS.workspace.onDidChangeWorkspaceFolders(r=>{let s=l=>this.doSendEvent(l.added,l.removed),a=n.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(r,s):s(r)).catch(l=>{this._client.error(`Sending notification ${$v.DidChangeWorkspaceFoldersNotification.type.method} failed`,l)})});this._listeners.set(t,o),this.sendInitialEvent(wS.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Yde=X0.WorkspaceFoldersFeature=vG;var h2={};Object.defineProperty(h2,"__esModule",{value:!0});var Jde=h2.FoldingRangeFeature=void 0,W2e=Ht,Hm=$t,MF=Hi,AG=class extends MF.TextDocumentLanguageFeature{constructor(e){super(e,Hm.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,MF.ensure)((0,MF.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[Hm.FoldingRangeKind.Comment,Hm.FoldingRangeKind.Imports,Hm.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[n,o]=this.getRegistration(t,e.foldingRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n={provideFoldingRanges:(o,r,s)=>{let a=this._client,l=(d,h,u)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d)};return a.sendRequest(Hm.FoldingRangeRequest.type,g,u).then(p=>u.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(p,u),p=>a.handleFailedRequest(Hm.FoldingRangeRequest.type,u,p,null))},c=a.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(o,r,s,l):l(o,r,s)}};return[W2e.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}};Jde=h2.FoldingRangeFeature=AG;var u2={};Object.defineProperty(u2,"__esModule",{value:!0});var Xde=u2.DeclarationFeature=void 0,z2e=Ht,NF=$t,RF=Hi,bG=class extends RF.TextDocumentLanguageFeature{constructor(e){super(e,NF.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,RF.ensure)((0,RF.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,o]=this.getRegistration(t,e.declarationProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n={provideDeclaration:(o,r,s)=>{let a=this._client,l=(d,h,u)=>a.sendRequest(NF.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),u).then(g=>u.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(g,u),g=>a.handleFailedRequest(NF.DeclarationRequest.type,u,g,null)),c=a.middleware;return c.provideDeclaration?c.provideDeclaration(o,r,s,l):l(o,r,s)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return z2e.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Xde=u2.DeclarationFeature=bG;var g2={};Object.defineProperty(g2,"__esModule",{value:!0});var Zde=g2.SelectionRangeFeature=void 0,V2e=Ht,FF=$t,BF=Hi,wG=class extends BF.TextDocumentLanguageFeature{constructor(e){super(e,FF.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,BF.ensure)((0,BF.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[n,o]=this.getRegistration(t,e.selectionRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n={provideSelectionRanges:(o,r,s)=>{let a=this._client,l=async(d,h,u)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),positions:await a.code2ProtocolConverter.asPositions(h,u)};return a.sendRequest(FF.SelectionRangeRequest.type,g,u).then(p=>u.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(p,u),p=>a.handleFailedRequest(FF.SelectionRangeRequest.type,u,p,null))},c=a.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(o,r,s,l):l(o,r,s)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return V2e.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Zde=g2.SelectionRangeFeature=wG;var p2={};Object.defineProperty(p2,"__esModule",{value:!0});var ehe=p2.ProgressFeature=void 0,_ne=$t,U2e=ny;function Q2e(i,e){return i[e]===void 0&&(i[e]=Object.create(null)),i[e]}var CG=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:_ne.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){Q2e(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=o=>{this.activeParts.delete(o)},n=o=>{this.activeParts.add(new U2e.ProgressPart(this._client,o.token,t))};e.onRequest(_ne.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};ehe=p2.ProgressFeature=CG;var m2={};Object.defineProperty(m2,"__esModule",{value:!0});m2.CallHierarchyFeature=void 0;var j2e=Ht,Qu=$t,PF=Hi,yG=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,n){let o=this.client,r=this.middleware,s=(a,l,c)=>{let d=o.code2ProtocolConverter.asTextDocumentPositionParams(a,l);return o.sendRequest(Qu.CallHierarchyPrepareRequest.type,d,c).then(h=>c.isCancellationRequested?null:o.protocol2CodeConverter.asCallHierarchyItems(h,c),h=>o.handleFailedRequest(Qu.CallHierarchyPrepareRequest.type,c,h,null))};return r.prepareCallHierarchy?r.prepareCallHierarchy(e,t,n,s):s(e,t,n)}provideCallHierarchyIncomingCalls(e,t){let n=this.client,o=this.middleware,r=(s,a)=>{let l={item:n.code2ProtocolConverter.asCallHierarchyItem(s)};return n.sendRequest(Qu.CallHierarchyIncomingCallsRequest.type,l,a).then(c=>a.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyIncomingCalls(c,a),c=>n.handleFailedRequest(Qu.CallHierarchyIncomingCallsRequest.type,a,c,null))};return o.provideCallHierarchyIncomingCalls?o.provideCallHierarchyIncomingCalls(e,t,r):r(e,t)}provideCallHierarchyOutgoingCalls(e,t){let n=this.client,o=this.middleware,r=(s,a)=>{let l={item:n.code2ProtocolConverter.asCallHierarchyItem(s)};return n.sendRequest(Qu.CallHierarchyOutgoingCallsRequest.type,l,a).then(c=>a.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(c,a),c=>n.handleFailedRequest(Qu.CallHierarchyOutgoingCallsRequest.type,a,c,null))};return o.provideCallHierarchyOutgoingCalls?o.provideCallHierarchyOutgoingCalls(e,t,r):r(e,t)}},SG=class extends PF.TextDocumentLanguageFeature{constructor(e){super(e,Qu.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,n=(0,PF.ensure)((0,PF.ensure)(t,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,t){let[n,o]=this.getRegistration(t,e.callHierarchyProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=this._client,n=new yG(t);return[j2e.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}};m2.CallHierarchyFeature=SG;var f2={};Object.defineProperty(f2,"__esModule",{value:!0});var the=f2.SemanticTokensFeature=void 0,CS=Ht,qt=$t,Gv=Hi,K2e=Vi,DG=class extends Gv.TextDocumentLanguageFeature{constructor(e){super(e,qt.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,Gv.ensure)((0,Gv.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[qt.SemanticTokenTypes.namespace,qt.SemanticTokenTypes.type,qt.SemanticTokenTypes.class,qt.SemanticTokenTypes.enum,qt.SemanticTokenTypes.interface,qt.SemanticTokenTypes.struct,qt.SemanticTokenTypes.typeParameter,qt.SemanticTokenTypes.parameter,qt.SemanticTokenTypes.variable,qt.SemanticTokenTypes.property,qt.SemanticTokenTypes.enumMember,qt.SemanticTokenTypes.event,qt.SemanticTokenTypes.function,qt.SemanticTokenTypes.method,qt.SemanticTokenTypes.macro,qt.SemanticTokenTypes.keyword,qt.SemanticTokenTypes.modifier,qt.SemanticTokenTypes.comment,qt.SemanticTokenTypes.string,qt.SemanticTokenTypes.number,qt.SemanticTokenTypes.regexp,qt.SemanticTokenTypes.operator,qt.SemanticTokenTypes.decorator],t.tokenModifiers=[qt.SemanticTokenModifiers.declaration,qt.SemanticTokenModifiers.definition,qt.SemanticTokenModifiers.readonly,qt.SemanticTokenModifiers.static,qt.SemanticTokenModifiers.deprecated,qt.SemanticTokenModifiers.abstract,qt.SemanticTokenModifiers.async,qt.SemanticTokenModifiers.modification,qt.SemanticTokenModifiers.documentation,qt.SemanticTokenModifiers.defaultLibrary],t.formats=[qt.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,Gv.ensure)((0,Gv.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(qt.SemanticTokensRefreshRequest.type,async()=>{for(let r of this.getAllProviders())r.onDidChangeSemanticTokensEmitter.fire()});let[n,o]=this.getRegistration(t,e.semanticTokensProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n=K2e.boolean(e.full)?e.full:e.full!==void 0,o=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,r=new CS.EventEmitter,s=n?{onDidChangeSemanticTokens:r.event,provideDocumentSemanticTokens:(u,g)=>{let p=this._client,f=p.middleware,v=(b,A)=>{let w={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(b)};return p.sendRequest(qt.SemanticTokensRequest.type,w,A).then(C=>A.isCancellationRequested?null:p.protocol2CodeConverter.asSemanticTokens(C,A),C=>p.handleFailedRequest(qt.SemanticTokensRequest.type,A,C,null))};return f.provideDocumentSemanticTokens?f.provideDocumentSemanticTokens(u,g,v):v(u,g)},provideDocumentSemanticTokensEdits:o?(u,g,p)=>{let f=this._client,v=f.middleware,b=(A,w,C)=>{let k={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(A),previousResultId:w};return f.sendRequest(qt.SemanticTokensDeltaRequest.type,k,C).then(async L=>C.isCancellationRequested?null:qt.SemanticTokens.is(L)?await f.protocol2CodeConverter.asSemanticTokens(L,C):await f.protocol2CodeConverter.asSemanticTokensEdits(L,C),L=>f.handleFailedRequest(qt.SemanticTokensDeltaRequest.type,C,L,null))};return v.provideDocumentSemanticTokensEdits?v.provideDocumentSemanticTokensEdits(u,g,p,b):b(u,g,p)}:void 0}:void 0,a=e.range===!0?{provideDocumentRangeSemanticTokens:(u,g,p)=>{let f=this._client,v=f.middleware,b=(A,w,C)=>{let k={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(A),range:f.code2ProtocolConverter.asRange(w)};return f.sendRequest(qt.SemanticTokensRangeRequest.type,k,C).then(L=>C.isCancellationRequested?null:f.protocol2CodeConverter.asSemanticTokens(L,C),L=>f.handleFailedRequest(qt.SemanticTokensRangeRequest.type,C,L,null))};return v.provideDocumentRangeSemanticTokens?v.provideDocumentRangeSemanticTokens(u,g,p,b):b(u,g,p)}}:void 0,l=[],c=this._client,d=c.protocol2CodeConverter.asSemanticTokensLegend(e.legend),h=c.protocol2CodeConverter.asDocumentSelector(t);return s!==void 0&&l.push(CS.languages.registerDocumentSemanticTokensProvider(h,s,d)),a!==void 0&&l.push(CS.languages.registerDocumentRangeSemanticTokensProvider(h,a,d)),[new CS.Disposable(()=>l.forEach(u=>u.dispose())),{range:a,full:s,onDidChangeSemanticTokensEmitter:r}]}};the=f2.SemanticTokensFeature=DG;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.WillDeleteFilesFeature=ts.WillRenameFilesFeature=ts.WillCreateFilesFeature=ts.DidDeleteFilesFeature=ts.DidRenameFilesFeature=ts.DidCreateFilesFeature=void 0;var ma=Ht,q2e=bX,Ad=$t,$2e=Ni;function vne(i,e){return i[e]===void 0&&(i[e]={}),i[e]}function G2e(i,e){return i[e]}function Ane(i,e,t){i[e]=t}var MC=class i{constructor(e,t,n,o,r){this._client=e,this._event=t,this._registrationType=n,this._clientCapability=o,this._serverCapability=r,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=vne(vne(e,"workspace"),"fileOperations");Ane(t,"dynamicRegistration",!0),Ane(t,this._clientCapability,!0)}initialize(e){var t;let n=(t=e.workspace)==null?void 0:t.fileOperations,o=n!==void 0?G2e(n,this._serverCapability):void 0;if(o?.filters!==void 0)try{this.register({id:$2e.generateUuid(),registerOptions:{filters:o.filters}})}catch(r){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${r}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(n=>{let o=new q2e.Minimatch(n.pattern.glob,i.asMinimatchOptions(n.pattern.options));if(!o.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:o,kind:n.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return i.getFileType(e)}async filter(e,t){let n=await Promise.all(e.files.map(async r=>{let s=t(r),a=s.fsPath.replace(/\\/g,"/");for(let l of this._filters.values())for(let c of l)if(!(c.scheme!==void 0&&c.scheme!==s.scheme)){if(c.matcher.match(a)){if(c.kind===void 0)return!0;let d=await this.getFileType(s);if(d===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(d===ma.FileType.File&&c.kind===Ad.FileOperationPatternKind.file||d===ma.FileType.Directory&&c.kind===Ad.FileOperationPatternKind.folder)return!0}else if(c.kind===Ad.FileOperationPatternKind.folder&&await i.getFileType(s)===ma.FileType.Directory&&c.matcher.match(`${a}/`))return!0}return!1})),o=e.files.filter((r,s)=>n[s]);return{...e,files:o}}static async getFileType(e){try{return(await ma.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},gM=class extends MC{constructor(e,t,n,o,r,s,a){super(e,t,n,o,r),this._notificationType=n,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let n=async o=>this._client.sendNotification(this._notificationType,this._createParams(o));return this.doSend(t,n)}}},pM=class extends gM{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let n=await MC.getFileType(e);return n&&this._fsPathFileTypes.set(t,n),n}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},xG=class extends gM{constructor(e){super(e,ma.workspace.onDidCreateFiles,Ad.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let n=this._client.middleware.workspace;return n!=null&&n.didCreateFiles?n.didCreateFiles(e,t):t(e)}};ts.DidCreateFilesFeature=xG;var kG=class extends pM{constructor(e){super(e,ma.workspace.onDidRenameFiles,Ad.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=ma.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let n=this._client.middleware.workspace;return n!=null&&n.didRenameFiles?n.didRenameFiles(e,t):t(e)}};ts.DidRenameFilesFeature=kG;var EG=class extends pM{constructor(e){super(e,ma.workspace.onDidDeleteFiles,Ad.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=ma.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let n=this._client.middleware.workspace;return n!=null&&n.didDeleteFiles?n.didDeleteFiles(e,t):t(e)}};ts.DidDeleteFilesFeature=EG;var NC=class extends MC{constructor(e,t,n,o,r,s,a){super(e,t,n,o,r),this._requestType=n,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let n=o=>this._client.sendRequest(this._requestType,this._createParams(o),o.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,n)}else return}},LG=class extends NC{constructor(e){super(e,ma.workspace.onWillCreateFiles,Ad.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let n=this._client.middleware.workspace;return n!=null&&n.willCreateFiles?n.willCreateFiles(e,t):t(e)}};ts.WillCreateFilesFeature=LG;var IG=class extends NC{constructor(e){super(e,ma.workspace.onWillRenameFiles,Ad.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let n=this._client.middleware.workspace;return n!=null&&n.willRenameFiles?n.willRenameFiles(e,t):t(e)}};ts.WillRenameFilesFeature=IG;var TG=class extends NC{constructor(e){super(e,ma.workspace.onWillDeleteFiles,Ad.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let n=this._client.middleware.workspace;return n!=null&&n.willDeleteFiles?n.willDeleteFiles(e,t):t(e)}};ts.WillDeleteFilesFeature=TG;var _2={};Object.defineProperty(_2,"__esModule",{value:!0});var ihe=_2.LinkedEditingFeature=void 0,Y2e=Ht,OF=$t,HF=Hi,MG=class extends HF.TextDocumentLanguageFeature{constructor(e){super(e,OF.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,HF.ensure)((0,HF.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[n,o]=this.getRegistration(t,e.linkedEditingRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n={provideLinkedEditingRanges:(o,r,s)=>{let a=this._client,l=(d,h,u)=>a.sendRequest(OF.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,h),u).then(g=>u.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(g,u),g=>a.handleFailedRequest(OF.LinkedEditingRangeRequest.type,u,g,null)),c=a.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(o,r,s,l):l(o,r,s)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return Y2e.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ihe=_2.LinkedEditingFeature=MG;var v2={};Object.defineProperty(v2,"__esModule",{value:!0});v2.TypeHierarchyFeature=void 0;var J2e=Ht,ju=$t,WF=Hi,NG=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,n){let o=this.client,r=this.middleware,s=(a,l,c)=>{let d=o.code2ProtocolConverter.asTextDocumentPositionParams(a,l);return o.sendRequest(ju.TypeHierarchyPrepareRequest.type,d,c).then(h=>c.isCancellationRequested?null:o.protocol2CodeConverter.asTypeHierarchyItems(h,c),h=>o.handleFailedRequest(ju.TypeHierarchyPrepareRequest.type,c,h,null))};return r.prepareTypeHierarchy?r.prepareTypeHierarchy(e,t,n,s):s(e,t,n)}provideTypeHierarchySupertypes(e,t){let n=this.client,o=this.middleware,r=(s,a)=>{let l={item:n.code2ProtocolConverter.asTypeHierarchyItem(s)};return n.sendRequest(ju.TypeHierarchySupertypesRequest.type,l,a).then(c=>a.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(c,a),c=>n.handleFailedRequest(ju.TypeHierarchySupertypesRequest.type,a,c,null))};return o.provideTypeHierarchySupertypes?o.provideTypeHierarchySupertypes(e,t,r):r(e,t)}provideTypeHierarchySubtypes(e,t){let n=this.client,o=this.middleware,r=(s,a)=>{let l={item:n.code2ProtocolConverter.asTypeHierarchyItem(s)};return n.sendRequest(ju.TypeHierarchySubtypesRequest.type,l,a).then(c=>a.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(c,a),c=>n.handleFailedRequest(ju.TypeHierarchySubtypesRequest.type,a,c,null))};return o.provideTypeHierarchySubtypes?o.provideTypeHierarchySubtypes(e,t,r):r(e,t)}},RG=class extends WF.TextDocumentLanguageFeature{constructor(e){super(e,ju.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,WF.ensure)((0,WF.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[n,o]=this.getRegistration(t,e.typeHierarchyProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=this._client,n=new NG(t);return[J2e.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}};v2.TypeHierarchyFeature=RG;var A2={};Object.defineProperty(A2,"__esModule",{value:!0});A2.InlineValueFeature=void 0;var bne=Ht,yS=$t,Yv=Hi,FG=class extends Yv.TextDocumentLanguageFeature{constructor(e){super(e,yS.InlineValueRequest.type)}fillClientCapabilities(e){(0,Yv.ensure)((0,Yv.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Yv.ensure)((0,Yv.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(yS.InlineValueRefreshRequest.type,async()=>{for(let r of this.getAllProviders())r.onDidChangeInlineValues.fire()});let[n,o]=this.getRegistration(t,e.inlineValueProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n=new bne.EventEmitter,o={onDidChangeInlineValues:n.event,provideInlineValues:(r,s,a,l)=>{let c=this._client,d=(u,g,p,f)=>{let v={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(u),range:c.code2ProtocolConverter.asRange(g),context:c.code2ProtocolConverter.asInlineValueContext(p)};return c.sendRequest(yS.InlineValueRequest.type,v,f).then(b=>f.isCancellationRequested?null:c.protocol2CodeConverter.asInlineValues(b,f),b=>c.handleFailedRequest(yS.InlineValueRequest.type,f,b,null))},h=c.middleware;return h.provideInlineValues?h.provideInlineValues(r,s,a,l,d):d(r,s,a,l)}};return[this.registerProvider(t,o),{provider:o,onDidChangeInlineValues:n}]}registerProvider(e,t){return bne.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};A2.InlineValueFeature=FG;var b2={};Object.defineProperty(b2,"__esModule",{value:!0});var nhe=b2.InlayHintsFeature=void 0,wne=Ht,Wm=$t,Jv=Hi,BG=class extends Jv.TextDocumentLanguageFeature{constructor(e){super(e,Wm.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,Jv.ensure)((0,Jv.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Jv.ensure)((0,Jv.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(Wm.InlayHintRefreshRequest.type,async()=>{for(let r of this.getAllProviders())r.onDidChangeInlayHints.fire()});let[n,o]=this.getRegistration(t,e.inlayHintProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,n=new wne.EventEmitter,o={onDidChangeInlayHints:n.event,provideInlayHints:(r,s,a)=>{let l=this._client,c=async(h,u,g)=>{let p={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(h),range:l.code2ProtocolConverter.asRange(u)};try{let f=await l.sendRequest(Wm.InlayHintRequest.type,p,g);return g.isCancellationRequested?null:l.protocol2CodeConverter.asInlayHints(f,g)}catch(f){return l.handleFailedRequest(Wm.InlayHintRequest.type,g,f,null)}},d=l.middleware;return d.provideInlayHints?d.provideInlayHints(r,s,a,c):c(r,s,a)}};return o.resolveInlayHint=e.resolveProvider===!0?(r,s)=>{let a=this._client,l=async(d,h)=>{try{let u=await a.sendRequest(Wm.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(d),h);if(h.isCancellationRequested)return null;let g=a.protocol2CodeConverter.asInlayHint(u,h);return h.isCancellationRequested?null:g}catch(u){return a.handleFailedRequest(Wm.InlayHintResolveRequest.type,h,u,null)}},c=a.middleware;return c.resolveInlayHint?c.resolveInlayHint(r,s,l):l(r,s)}:void 0,[this.registerProvider(t,o),{provider:o,onDidChangeInlayHints:n}]}registerProvider(e,t){return wne.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};nhe=b2.InlayHintsFeature=BG;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ProposedFeatures=i.BaseLanguageClient=i.MessageTransports=i.SuspendMode=i.State=i.CloseAction=i.ErrorAction=i.RevealOutputChannelOn=void 0;let e=Ht,t=$t,n=FN,o=QN,r=Vi,s=Do,a=Ni,l=ny,c=Hi,d=vX,h=KN,u=Rh,g=es,p=qN,f=$N,v=GN,b=YN,A=JN,w=XN,C=ZN,k=e2,L=t2,S=i2,y=Fh,M=o2,O=r2,H=s2,D=a2,K=l2,oe=c2,ie=d2,ce=X0,se=h2,_e=u2,Ve=g2,Qe=p2,pt=m2,ke=f2,xe=ts,Et=_2,Ri=v2,ci=A2,Dt=b2;var Fi;(function($e){$e[$e.Info=1]="Info",$e[$e.Warn=2]="Warn",$e[$e.Error=3]="Error",$e[$e.Never=4]="Never"})(Fi=i.RevealOutputChannelOn||(i.RevealOutputChannelOn={}));var Kt;(function($e){$e[$e.Continue=1]="Continue",$e[$e.Shutdown=2]="Shutdown"})(Kt=i.ErrorAction||(i.ErrorAction={}));var Ei;(function($e){$e[$e.DoNotRestart=1]="DoNotRestart",$e[$e.Restart=2]="Restart"})(Ei=i.CloseAction||(i.CloseAction={}));var Ue;(function($e){$e[$e.Stopped=1]="Stopped",$e[$e.Starting=3]="Starting",$e[$e.Running=2]="Running"})(Ue=i.State||(i.State={})),function($e){$e.off="off",$e.on="on"}(i.SuspendMode||(i.SuspendMode={}));class Yn{constructor(X,W){this.client=X,this.maxRestartCount=W,this.restarts=[]}error(X,W,R){return R&&R<=3?{action:Kt.Continue}:{action:Kt.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Ei.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Ei.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Ei.Restart})}}var ht;(function($e){$e.Initial="initial",$e.Starting="starting",$e.StartFailed="startFailed",$e.Running="running",$e.Stopping="stopping",$e.Stopped="stopped"})(ht||(ht={})),function($e){function X(W){return W&&t.MessageReader.is(W.reader)&&t.MessageWriter.is(W.writer)}$e.is=X}(i.MessageTransports||(i.MessageTransports={}));class Pn{constructor(X,W,R){var I;this._traceFormat=t.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new s.Semaphore(1),this._id=X,this._name=W,R=R||{};let T={isTrusted:!1,supportHtml:!1};R.markdown!==void 0&&(T.isTrusted=R.markdown.isTrusted===!0,T.supportHtml=R.markdown.supportHtml===!0),this._clientOptions={documentSelector:R.documentSelector??[],synchronize:R.synchronize??{},diagnosticCollectionName:R.diagnosticCollectionName,outputChannelName:R.outputChannelName??this._name,revealOutputChannelOn:R.revealOutputChannelOn??Fi.Error,stdioEncoding:R.stdioEncoding??"utf8",initializationOptions:R.initializationOptions,initializationFailedHandler:R.initializationFailedHandler,progressOnInitialization:!!R.progressOnInitialization,errorHandler:R.errorHandler??this.createDefaultErrorHandler((I=R.connectionOptions)==null?void 0:I.maxRestartCount),middleware:R.middleware??{},uriConverters:R.uriConverters,workspaceFolder:R.workspaceFolder,connectionOptions:R.connectionOptions,markdown:T,diagnosticPullOptions:R.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:R.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=ht.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,R.outputChannel?(this._outputChannel=R.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=R.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new s.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new t.Emitter,this._stateChangeEmitter=new t.Emitter,this._trace=t.Trace.Off,this._tracer={log:(F,V)=>{r.string(F)?this.logTrace(F,V):this.logObjectTrace(F)}},this._c2p=n.createConverter(R.uriConverters?R.uriConverters.code2Protocol:void 0),this._p2c=o.createConverter(R.uriConverters?R.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=e.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(X){let W=this.getPublicState();this._state=X;let R=this.getPublicState();R!==W&&this._stateChangeEmitter.fire({oldState:W,newState:R})}getPublicState(){switch(this.$state){case ht.Starting:return Ue.Starting;case ht.Running:return Ue.Running;default:return Ue.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(X,...W){if(this.$state===ht.StartFailed||this.$state===ht.Stopping||this.$state===ht.Stopped)return Promise.reject(new t.ResponseError(t.ErrorCodes.ConnectionInactive,"Client is not running"));try{let R=await this.$start();return await this.forceDocumentSync(),R.sendRequest(X,...W)}catch(R){throw this.error(`Sending request ${r.string(X)?X:X.method} failed.`,R),R}}onRequest(X,W){let R=typeof X=="string"?X:X.method;this._requestHandlers.set(R,W);let I=this.activeConnection(),T;return I!==void 0?(this._requestDisposables.set(R,I.onRequest(X,W)),T={dispose:()=>{let F=this._requestDisposables.get(R);F!==void 0&&(F.dispose(),this._requestDisposables.delete(R))}}):(this._pendingRequestHandlers.set(R,W),T={dispose:()=>{this._pendingRequestHandlers.delete(R);let F=this._requestDisposables.get(R);F!==void 0&&(F.dispose(),this._requestDisposables.delete(R))}}),{dispose:()=>{this._requestHandlers.delete(R),T.dispose()}}}async sendNotification(X,W){if(this.$state===ht.StartFailed||this.$state===ht.Stopping||this.$state===ht.Stopped)return Promise.reject(new t.ResponseError(t.ErrorCodes.ConnectionInactive,"Client is not running"));try{let R=await this.$start();return await this.forceDocumentSync(),R.sendNotification(X,W)}catch(R){throw this.error(`Sending notification ${r.string(X)?X:X.method} failed.`,R),R}}onNotification(X,W){let R=typeof X=="string"?X:X.method;this._notificationHandlers.set(R,W);let I=this.activeConnection(),T;return I!==void 0?(this._notificationDisposables.set(R,I.onNotification(X,W)),T={dispose:()=>{let F=this._notificationDisposables.get(R);F!==void 0&&(F.dispose(),this._notificationDisposables.delete(R))}}):(this._pendingNotificationHandlers.set(R,W),T={dispose:()=>{this._pendingNotificationHandlers.delete(R);let F=this._notificationDisposables.get(R);F!==void 0&&(F.dispose(),this._notificationDisposables.delete(R))}}),{dispose:()=>{this._notificationHandlers.delete(R),T.dispose()}}}async sendProgress(X,W,R){if(this.$state===ht.StartFailed||this.$state===ht.Stopping||this.$state===ht.Stopped)return Promise.reject(new t.ResponseError(t.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(X,W,R)}catch(I){throw this.error(`Sending progress for token ${W} failed.`,I),I}}onProgress(X,W,R){var I;this._progressHandlers.set(W,{type:X,handler:R});let T=this.activeConnection(),F,V=(I=this._clientOptions.middleware)==null?void 0:I.handleWorkDoneProgress,ee=t.WorkDoneProgress.is(X)&&V!==void 0?Ce=>{V(W,Ce,()=>R(Ce))}:R;return T!==void 0?(this._progressDisposables.set(W,T.onProgress(X,W,ee)),F={dispose:()=>{let Ce=this._progressDisposables.get(W);Ce!==void 0&&(Ce.dispose(),this._progressDisposables.delete(W))}}):(this._pendingProgressHandlers.set(W,{type:X,handler:R}),F={dispose:()=>{this._pendingProgressHandlers.delete(W);let Ce=this._progressDisposables.get(W);Ce!==void 0&&(Ce.dispose(),this._progressDisposables.delete(W))}}),{dispose:()=>{this._progressHandlers.delete(W),F.dispose()}}}createDefaultErrorHandler(X){if(X!==void 0&&X<0)throw new Error(`Invalid maxRestartCount: ${X}`);return new Yn(this,X??4)}async setTrace(X){this._trace=X;let W=this.activeConnection();W!==void 0&&await W.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(X){if(X instanceof t.ResponseError){let W=X;return`  Message: ${W.message}
  Code: ${W.code} ${W.data?`
`+W.data.toString():""}`}return X instanceof Error?r.string(X.stack)?X.stack:X.message:r.string(X)?X:X.toString()}info(X,W,R=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${X}`),W!=null&&this.outputChannel.appendLine(this.data2String(W)),R&&this._clientOptions.revealOutputChannelOn<=Fi.Info&&this.showNotificationMessage(t.MessageType.Info,X)}warn(X,W,R=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${X}`),W!=null&&this.outputChannel.appendLine(this.data2String(W)),R&&this._clientOptions.revealOutputChannelOn<=Fi.Warn&&this.showNotificationMessage(t.MessageType.Warning,X)}error(X,W,R=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${X}`),W!=null&&this.outputChannel.appendLine(this.data2String(W)),(R==="force"||R&&this._clientOptions.revealOutputChannelOn<=Fi.Error)&&this.showNotificationMessage(t.MessageType.Error,X)}showNotificationMessage(X,W){W=W??"A request has failed. See the output for more information.",(X===t.MessageType.Error?e.window.showErrorMessage:X===t.MessageType.Warning?e.window.showWarningMessage:e.window.showInformationMessage)(W,"Go to output").then(R=>{R!==void 0&&this.outputChannel.show(!0)})}logTrace(X,W){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${X}`),W&&this.traceOutputChannel.appendLine(this.data2String(W))}logObjectTrace(X){X.isLSPMessage&&X.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),X&&this.traceOutputChannel.appendLine(`${JSON.stringify(X)}`)}needsStart(){return this.$state===ht.Initial||this.$state===ht.Stopping||this.$state===ht.Stopped}needsStop(){return this.$state===ht.Starting||this.$state===ht.Running}activeConnection(){return this.$state===ht.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===ht.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===ht.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[X,W,R]=this.createOnStartPromise();this._onStart=X,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?e.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):e.languages.createDiagnosticCollection());for(let[I,T]of this._notificationHandlers)this._pendingNotificationHandlers.has(I)||this._pendingNotificationHandlers.set(I,T);for(let[I,T]of this._requestHandlers)this._pendingRequestHandlers.has(I)||this._pendingRequestHandlers.set(I,T);for(let[I,T]of this._progressHandlers)this._pendingProgressHandlers.has(I)||this._pendingProgressHandlers.set(I,T);this.$state=ht.Starting;try{let I=await this.createConnection();I.onNotification(t.LogMessageNotification.type,T=>{switch(T.type){case t.MessageType.Error:this.error(T.message,void 0,!1);break;case t.MessageType.Warning:this.warn(T.message,void 0,!1);break;case t.MessageType.Info:this.info(T.message,void 0,!1);break;default:this.outputChannel.appendLine(T.message)}}),I.onNotification(t.ShowMessageNotification.type,T=>{switch(T.type){case t.MessageType.Error:e.window.showErrorMessage(T.message);break;case t.MessageType.Warning:e.window.showWarningMessage(T.message);break;case t.MessageType.Info:e.window.showInformationMessage(T.message);break;default:e.window.showInformationMessage(T.message)}}),I.onRequest(t.ShowMessageRequest.type,T=>{let F;switch(T.type){case t.MessageType.Error:F=e.window.showErrorMessage;break;case t.MessageType.Warning:F=e.window.showWarningMessage;break;case t.MessageType.Info:F=e.window.showInformationMessage;break;default:F=e.window.showInformationMessage}let V=T.actions||[];return F(T.message,...V)}),I.onNotification(t.TelemetryEventNotification.type,T=>{this._telemetryEmitter.fire(T)}),I.onRequest(t.ShowDocumentRequest.type,async T=>{var F;let V=async Ce=>{let ve=this.protocol2CodeConverter.asUri(Ce.uri);try{if(Ce.external===!0)return{success:await e.env.openExternal(ve)};{let Me={};return Ce.selection!==void 0&&(Me.selection=this.protocol2CodeConverter.asRange(Ce.selection)),Ce.takeFocus===void 0||Ce.takeFocus===!1?Me.preserveFocus=!0:Ce.takeFocus===!0&&(Me.preserveFocus=!1),await e.window.showTextDocument(ve,Me),{success:!0}}}catch{return{success:!1}}},ee=(F=this._clientOptions.middleware.window)==null?void 0:F.showDocument;return ee!==void 0?ee(T,V):V(T)}),I.listen(),await this.initialize(I),W()}catch(I){this.$state=ht.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,I,"force"),R(I)}return this._onStart}createOnStartPromise(){let X,W;return[new Promise((R,I)=>{X=R,W=I}),X,W]}async initialize(X){this.refreshTrace(X,!1);let W=this._clientOptions.initializationOptions,[R,I]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],T={processId:null,clientInfo:{name:e.env.appName,version:e.version},locale:this.getLocale(),rootPath:R||null,rootUri:R?this._c2p.asUri(e.Uri.file(R)):null,capabilities:this.computeClientCapabilities(),initializationOptions:r.func(W)?W():W,trace:t.Trace.toString(this._trace),workspaceFolders:I};if(this.fillInitializeParams(T),this._clientOptions.progressOnInitialization){let F=a.generateUuid(),V=new l.ProgressPart(X,F);T.workDoneToken=F;try{let ee=await this.doInitialize(X,T);return V.done(),ee}catch(ee){throw V.cancel(),ee}}else return this.doInitialize(X,T)}async doInitialize(X,W){try{let R=await X.initialize(W);if(R.capabilities.positionEncoding!==void 0&&R.capabilities.positionEncoding!==t.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${R.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=R,this.$state=ht.Running;let I;r.number(R.capabilities.textDocumentSync)?R.capabilities.textDocumentSync===t.TextDocumentSyncKind.None?I={openClose:!1,change:t.TextDocumentSyncKind.None,save:void 0}:I={openClose:!0,change:R.capabilities.textDocumentSync,save:{includeText:!1}}:R.capabilities.textDocumentSync!==void 0&&R.capabilities.textDocumentSync!==null&&(I=R.capabilities.textDocumentSync),this._capabilities=Object.assign({},R.capabilities,{resolvedTextDocumentSync:I}),X.onNotification(t.PublishDiagnosticsNotification.type,T=>this.handleDiagnostics(T)),X.onRequest(t.RegistrationRequest.type,T=>this.handleRegistrationRequest(T)),X.onRequest("client/registerFeature",T=>this.handleRegistrationRequest(T)),X.onRequest(t.UnregistrationRequest.type,T=>this.handleUnregistrationRequest(T)),X.onRequest("client/unregisterFeature",T=>this.handleUnregistrationRequest(T)),X.onRequest(t.ApplyWorkspaceEditRequest.type,T=>this.handleApplyWorkspaceEdit(T));for(let[T,F]of this._pendingNotificationHandlers)this._notificationDisposables.set(T,X.onNotification(T,F));this._pendingNotificationHandlers.clear();for(let[T,F]of this._pendingRequestHandlers)this._requestDisposables.set(T,X.onRequest(T,F));this._pendingRequestHandlers.clear();for(let[T,F]of this._pendingProgressHandlers)this._progressDisposables.set(T,X.onProgress(F.type,T,F.handler));return this._pendingProgressHandlers.clear(),await X.sendNotification(t.InitializedNotification.type,{}),this.hookFileEvents(X),this.hookConfigurationChanged(X),this.initializeFeatures(X),R}catch(R){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(R)?this.initialize(X):this.stop():R instanceof t.ResponseError&&R.data&&R.data.retry?e.window.showErrorMessage(R.message,{title:"Retry",id:"retry"}).then(I=>{I&&I.id==="retry"?this.initialize(X):this.stop()}):(R&&R.message&&e.window.showErrorMessage(R.message),this.error("Server initialization failed.",R),this.stop()),R}}_clientGetRootPath(){let X=e.workspace.workspaceFolders;if(!X||X.length===0)return;let W=X[0];if(W.uri.scheme==="file")return W.uri.fsPath}stop(X=2e3){return this.shutdown("stop",X)}dispose(X=2e3){try{return this._disposed="disposing",this.stop(X)}finally{this._disposed="disposed"}}async shutdown(X,W){if(this.$state===ht.Stopped||this.$state===ht.Initial)return;if(this.$state===ht.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let R=this.activeConnection();if(R===void 0||this.$state!==ht.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=ht.Stopping,this.cleanUp(X);let I=new Promise(F=>{(0,t.RAL)().timer.setTimeout(F,W)}),T=(async F=>(await F.shutdown(),await F.exit(),F))(R);return this._onStop=Promise.race([I,T]).then(F=>{if(F!==void 0)F.end(),F.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},F=>{throw this.error("Stopping server failed",F,!1),F}).finally(()=>{this.$state=ht.Stopped,X==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(X){this._fileEvents=[],this._fileEventDelayer.cancel();let W=this._listeners.splice(0,this._listeners.length);for(let R of W)R.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let R of Array.from(this._features.entries()).map(I=>I[1]).reverse())R.dispose();X==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(X){var W;let R=this;async function I(F){return R._fileEvents.push(F),R._fileEventDelayer.trigger(async()=>{let V=await R.$start();await R.forceDocumentSync();let ee=V.sendNotification(t.DidChangeWatchedFilesNotification.type,{changes:R._fileEvents});return R._fileEvents=[],ee})}let T=(W=this.clientOptions.middleware)==null?void 0:W.workspace;(T!=null&&T.didChangeWatchedFile?T.didChangeWatchedFile(X,I):I(X)).catch(F=>{R.error("Notify file events failed.",F)})}async forceDocumentSync(){return this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(t.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(X){if(!this._diagnostics)return;let W=X.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===W&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(X.uri,X.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,t.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let X=this._diagnosticQueue.entries().next();if(X.done===!0)return;let[W,R]=X.value;this._diagnosticQueue.delete(W);let I=new e.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:W,tokenSource:I},this._p2c.asDiagnostics(R,I.token).then(T=>{if(!I.token.isCancellationRequested){let F=this._p2c.asUri(W),V=this.clientOptions.middleware;V.handleDiagnostics?V.handleDiagnostics(F,T,(ee,Ce)=>this.setDiagnostics(ee,Ce)):this.setDiagnostics(F,T)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(X,W){this._diagnostics&&this._diagnostics.set(X,W)}async $start(){if(this.$state===ht.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let X=this.activeConnection();if(X===void 0)throw new Error("Starting server failed");return X}async createConnection(){let X=(I,T,F)=>{this.handleConnectionError(I,T,F)},W=()=>{this.handleConnectionClosed()},R=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=fn(R.reader,R.writer,X,W,this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===ht.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let X={action:Ei.DoNotRestart};if(this.$state!==ht.Stopping)try{X=this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,X.action===Ei.DoNotRestart?(this.error(X.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===ht.Starting?this.$state=ht.StartFailed:this.$state=ht.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):X.action===Ei.Restart&&(this.info(X.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=ht.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(W=>this.error("Restarting server failed",W,"force")))}handleConnectionError(X,W,R){let I=this._clientOptions.errorHandler.error(X,W,R);I.action===Kt.Shutdown&&(this.error(I.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch(T=>{this.error("Stopping server failed",T,!1)}))}hookConfigurationChanged(X){this._listeners.push(e.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(X,!0)}))}refreshTrace(X,W=!1){let R=e.workspace.getConfiguration(this._id),I=t.Trace.Off,T=t.TraceFormat.Text;if(R){let F=R.get("trace.server","off");typeof F=="string"?I=t.Trace.fromString(F):(I=t.Trace.fromString(R.get("trace.server.verbosity","off")),T=t.TraceFormat.fromString(R.get("trace.server.format","text")))}this._trace=I,this._traceFormat=T,X.trace(this._trace,this._tracer,{sendNotification:W,traceFormat:this._traceFormat}).catch(F=>{this.error("Updating trace failed with error",F,!1)})}hookFileEvents(X){let W=this._clientOptions.synchronize.fileEvents;if(!W)return;let R;r.array(W)?R=W:R=[W],R&&this._dynamicFeatures.get(t.DidChangeWatchedFilesNotification.type.method).registerRaw(a.generateUuid(),R)}registerFeatures(X){for(let W of X)this.registerFeature(W)}registerFeature(X){if(this._features.push(X),c.DynamicFeature.is(X)){let W=X.registrationType;this._dynamicFeatures.set(W.method,X)}}getFeature(X){return this._dynamicFeatures.get(X)}hasDedicatedTextSynchronizationFeature(X){let W=this.getFeature(t.NotebookDocumentSyncRegistrationType.method);return W===void 0||!(W instanceof h.NotebookDocumentSyncFeature)?!1:W.handles(X)}registerBuiltinFeatures(){this.registerFeature(new u.ConfigurationFeature(this)),this.registerFeature(new g.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new g.DidChangeTextDocumentFeature(this)),this.registerFeature(new g.WillSaveFeature(this)),this.registerFeature(new g.WillSaveWaitUntilFeature(this)),this.registerFeature(new g.DidSaveTextDocumentFeature(this)),this.registerFeature(new g.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new D.FileSystemWatcherFeature(this,X=>this.notifyFileEvent(X))),this.registerFeature(new p.CompletionItemFeature(this)),this.registerFeature(new f.HoverFeature(this)),this.registerFeature(new b.SignatureHelpFeature(this)),this.registerFeature(new v.DefinitionFeature(this)),this.registerFeature(new k.ReferencesFeature(this)),this.registerFeature(new A.DocumentHighlightFeature(this)),this.registerFeature(new w.DocumentSymbolFeature(this)),this.registerFeature(new C.WorkspaceSymbolFeature(this)),this.registerFeature(new L.CodeActionFeature(this)),this.registerFeature(new S.CodeLensFeature(this)),this.registerFeature(new y.DocumentFormattingFeature(this)),this.registerFeature(new y.DocumentRangeFormattingFeature(this)),this.registerFeature(new y.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new M.RenameFeature(this)),this.registerFeature(new O.DocumentLinkFeature(this)),this.registerFeature(new H.ExecuteCommandFeature(this)),this.registerFeature(new u.SyncConfigurationFeature(this)),this.registerFeature(new ie.TypeDefinitionFeature(this)),this.registerFeature(new oe.ImplementationFeature(this)),this.registerFeature(new K.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new ce.WorkspaceFoldersFeature(this)),this.registerFeature(new se.FoldingRangeFeature(this)),this.registerFeature(new _e.DeclarationFeature(this)),this.registerFeature(new Ve.SelectionRangeFeature(this)),this.registerFeature(new Qe.ProgressFeature(this)),this.registerFeature(new pt.CallHierarchyFeature(this)),this.registerFeature(new ke.SemanticTokensFeature(this)),this.registerFeature(new Et.LinkedEditingFeature(this)),this.registerFeature(new xe.DidCreateFilesFeature(this)),this.registerFeature(new xe.DidRenameFilesFeature(this)),this.registerFeature(new xe.DidDeleteFilesFeature(this)),this.registerFeature(new xe.WillCreateFilesFeature(this)),this.registerFeature(new xe.WillRenameFilesFeature(this)),this.registerFeature(new xe.WillDeleteFilesFeature(this)),this.registerFeature(new Ri.TypeHierarchyFeature(this)),this.registerFeature(new ci.InlineValueFeature(this)),this.registerFeature(new Dt.InlayHintsFeature(this)),this.registerFeature(new d.DiagnosticFeature(this)),this.registerFeature(new h.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Bo.createAll(this))}fillInitializeParams(X){for(let W of this._features)r.func(W.fillInitializeParams)&&W.fillInitializeParams(X)}computeClientCapabilities(){let X={};(0,c.ensure)(X,"workspace").applyEdit=!0;let W=(0,c.ensure)((0,c.ensure)(X,"workspace"),"workspaceEdit");W.documentChanges=!0,W.resourceOperations=[t.ResourceOperationKind.Create,t.ResourceOperationKind.Rename,t.ResourceOperationKind.Delete],W.failureHandling=t.FailureHandlingKind.TextOnlyTransactional,W.normalizesLineEndings=!0,W.changeAnnotationSupport={groupsOnLabel:!0};let R=(0,c.ensure)((0,c.ensure)(X,"textDocument"),"publishDiagnostics");R.relatedInformation=!0,R.versionSupport=!1,R.tagSupport={valueSet:[t.DiagnosticTag.Unnecessary,t.DiagnosticTag.Deprecated]},R.codeDescriptionSupport=!0,R.dataSupport=!0;let I=(0,c.ensure)(X,"window"),T=(0,c.ensure)(I,"showMessage");T.messageActionItem={additionalPropertiesSupport:!0};let F=(0,c.ensure)(I,"showDocument");F.support=!0;let V=(0,c.ensure)(X,"general");V.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(Pn.RequestsToCancelOnContentModified)},V.regularExpressions={engine:"ECMAScript",version:"ES2020"},V.markdown={parser:"marked",version:"1.1.0"},V.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(V.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let ee of this._features)ee.fillClientCapabilities(X);return X}initializeFeatures(X){let W=this._clientOptions.documentSelector;for(let R of this._features)r.func(R.preInitialize)&&R.preInitialize(this._capabilities,W);for(let R of this._features)R.initialize(this._capabilities,W)}async handleRegistrationRequest(X){if(!this.isRunning()){for(let W of X.registrations)this._ignoredRegistrations.add(W.id);return}for(let W of X.registrations){let R=this._dynamicFeatures.get(W.method);if(R===void 0)return Promise.reject(new Error(`No feature implementation for ${W.method} found. Registration failed.`));let I=W.registerOptions??{};I.documentSelector=I.documentSelector??this._clientOptions.documentSelector;let T={id:W.id,registerOptions:I};try{R.register(T)}catch(F){return Promise.reject(F)}}}async handleUnregistrationRequest(X){for(let W of X.unregisterations){if(this._ignoredRegistrations.has(W.id))continue;let R=this._dynamicFeatures.get(W.method);if(!R)return Promise.reject(new Error(`No feature implementation for ${W.method} found. Unregistration failed.`));R.unregister(W.id)}}async handleApplyWorkspaceEdit(X){let W=X.edit,R=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(W)),I=new Map;e.workspace.textDocuments.forEach(F=>I.set(F.uri.toString(),F));let T=!1;if(W.documentChanges){for(let F of W.documentChanges)if(t.TextDocumentEdit.is(F)&&F.textDocument.version&&F.textDocument.version>=0){let V=I.get(F.textDocument.uri);if(V&&V.version!==F.textDocument.version){T=!0;break}}}return T?Promise.resolve({applied:!1}):r.asPromise(e.workspace.applyEdit(R).then(F=>({applied:F})))}handleFailedRequest(X,W,R,I,T=!0){if(R instanceof t.ResponseError){if(R.code===t.ErrorCodes.PendingResponseRejected||R.code===t.ErrorCodes.ConnectionInactive)return I;if(R.code===t.LSPErrorCodes.RequestCancelled||R.code===t.LSPErrorCodes.ServerCancelled){if(W!==void 0&&W.isCancellationRequested)return I;throw R.data!==void 0?new c.LSPCancellationError(R.data):new e.CancellationError}else if(R.code===t.LSPErrorCodes.ContentModified){if(Pn.RequestsToCancelOnContentModified.has(X.method))throw new e.CancellationError;return I}}throw this.error(`Request ${X.method} failed.`,R,T),R}}i.BaseLanguageClient=Pn,Pn.RequestsToCancelOnContentModified=new Set([t.SemanticTokensRequest.method,t.SemanticTokensRangeRequest.method,t.SemanticTokensDeltaRequest.method]);class oo{error(X){(0,t.RAL)().console.error(X)}warn(X){(0,t.RAL)().console.warn(X)}info(X){(0,t.RAL)().console.info(X)}log(X){(0,t.RAL)().console.log(X)}}function fn($e,X,W,R,I){let T=-1,F=new oo,V=(0,t.createProtocolConnection)($e,X,F,I);return V.onError(ee=>{W(ee[0],ee[1],ee[2])}),V.onClose(R),{get lastUsed(){return T},resetLastUsed:()=>{T=-1},listen:()=>V.listen(),sendRequest:(ee,...Ce)=>(T=Date.now(),V.sendRequest(ee,...Ce)),onRequest:(ee,Ce)=>V.onRequest(ee,Ce),hasPendingResponse:()=>V.hasPendingResponse(),sendNotification:(ee,Ce)=>(T=Date.now(),V.sendNotification(ee,Ce)),onNotification:(ee,Ce)=>V.onNotification(ee,Ce),onProgress:V.onProgress,sendProgress:V.sendProgress,trace:(ee,Ce,ve)=>{let Me={sendNotification:!1,traceFormat:t.TraceFormat.Text};return ve===void 0?V.trace(ee,Ce,Me):(r.boolean(ve),V.trace(ee,Ce,ve))},initialize:ee=>(T=Date.now(),V.sendRequest(t.InitializeRequest.type,ee)),shutdown:()=>(T=Date.now(),V.sendRequest(t.ShutdownRequest.type,void 0)),exit:()=>(T=Date.now(),V.sendNotification(t.ExitNotification.type)),end:()=>V.end(),dispose:()=>V.dispose()}}var Bo;(function($e){function X(W){return[]}$e.createAll=X})(Bo=i.ProposedFeatures||(i.ProposedFeatures={}))})(ZT);var PG=class extends ZT.BaseLanguageClient{constructor({id:e,name:t,clientOptions:n,connectionProvider:o}){super(e||t.toLowerCase(),t,n),Ml(this,"connectionProvider"),this.connectionProvider=o;let r=this.handleRegistrationRequest.bind(this);this.handleRegistrationRequest=a=>{r({...a,registrations:a.registrations.filter(l=>this.getFeature(l.method)!=null)})};let s=this.handleUnregistrationRequest.bind(this);this.handleUnregistrationRequest=a=>{s({...a,unregisterations:a.unregisterations.filter(l=>this.getFeature(l.method)!=null)})}}createMessageTransports(e){return this.connectionProvider.get(e)}getLocale(){return navigator.language||"en-US"}registerBuiltinFeatures(){this.registerFeature(new Ede(this,this._syncedDocuments)),this.registerFeature(new Ide(this)),this.registerFeature(new Lde(this,this._syncedDocuments)),this.registerFeature(new Nde(this)),this.registerFeature(new Rde(this)),this.registerFeature(new Bde(this)),this.registerFeature(new Fde(this)),this.registerFeature(new Ode(this)),this.registerFeature(new Pde(this)),this.registerFeature(new XN.DocumentSymbolFeature(this)),this.registerFeature(new Hde(this)),this.registerFeature(new Wde(this)),this.registerFeature(new Vde(this)),this.registerFeature(new Ude(this)),this.registerFeature(new zde(this)),this.registerFeature(new Qde(this)),this.registerFeature(new jde(this)),this.registerFeature(new Kde(this)),this.registerFeature(new Gde(this)),this.registerFeature(new $de(this)),this.registerFeature(new qde(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new Yde(this)),this.registerFeature(new Jde(this)),this.registerFeature(new Xde(this)),this.registerFeature(new Zde(this)),this.registerFeature(new the(this)),this.registerFeature(new ihe(this)),this.registerFeature(new nhe(this)),this.registerFeature(new vX.DiagnosticFeature(this))}registerTextDocumentSaveFeatures(){this.registerFeature(new Tde(this)),this.registerFeature(new Mde(this)),this.registerFeature(new kde(this))}registerConfigurationFeatures(){this.registerFeature(new xde(this)),this.registerFeature(new Dde(this))}registerProgressFeatures(){this.registerFeature(new ehe(this))}},OG=class{constructor(){Ml(this,"channels",new Map)}showMessage(e,t,...n){return e===Mt.Error&&console.error(t),e===Mt.Warning&&console.warn(t),e===Mt.Info&&console.info(t),e===Mt.Ignore&&console.debug(t),Promise.resolve(void 0)}createOutputChannel(e){let t=this.channels.get(e);if(t)return t;let n={name:"default",append(o){console.log(e+": "+o)},appendLine(o){console.log(e+": "+o)},show(){},dispose(){},replace:function(o){},clear:function(){},hide:function(){}};return this.channels.set(e,n),n}},HG=class{constructor(e,t){Ml(this,"workspaceFolders"),Ml(this,"rootPath"),this.workspaceFolders=e,this.rootPath=t}},mM;(function(i){function e(o={}){return{workspace:new HG(o.workspaceFolders,o.rootPath),window:new OG}}i.create=e;function t(o={}){let r=e(o);return ot.install(r)}i.install=t;function n(){return ot.get()}i.get=n})(mM||(mM={}));var WG=class extends gX.AbstractMessageReader{constructor(e){super(),Ml(this,"socket"),Ml(this,"state","initial"),Ml(this,"callback"),Ml(this,"events",[]),this.socket=e,this.socket.onMessage(t=>this.readMessage(t)),this.socket.onError(t=>this.fireError(t)),this.socket.onClose((t,n)=>{if(t!==1e3){let o={name:""+t,message:`Error during socket reconnect: code = ${t}, reason = ${n}`};this.fireError(o)}this.fireClose()})}listen(e){if(this.state==="initial")for(this.state="listening",this.callback=e;this.events.length!==0;){let t=this.events.pop();t.message?this.readMessage(t.message):t.error?this.fireError(t.error):this.fireClose()}return{dispose:()=>{this.callback===e&&(this.callback=void 0)}}}readMessage(e){if(this.state==="initial")this.events.splice(0,0,{message:e});else if(this.state==="listening"){let t=JSON.parse(e);this.callback(t)}}fireError(e){this.state==="initial"?this.events.splice(0,0,{error:e}):this.state==="listening"&&super.fireError(e)}fireClose(){this.state==="initial"?this.events.splice(0,0,{}):this.state==="listening"&&super.fireClose(),this.state="closed"}},zG=class extends pX.AbstractMessageWriter{constructor(e){super(),Ml(this,"socket"),Ml(this,"errorCount",0),this.socket=e}end(){}async write(e){try{let t=JSON.stringify(e);this.socket.send(t)}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};function X2e(i){return{send:e=>i.send(e),onMessage:e=>{i.onmessage=t=>e(t.data)},onError:e=>{i.onerror=t=>{"message"in t&&e(t.message)}},onClose:e=>{i.onclose=t=>e(t.code,t.reason)},dispose:()=>i.close()}}var fM={},Z2e={get exports(){return fM},set exports(i){fM=i}};(function(i){i.exports=$t})(Z2e);var eRe="text/plain",tRe="us-ascii",zF=(i,e)=>e.some(t=>t instanceof RegExp?t.test(i):t===i),iRe=new Set(["https:","http:","file:"]),nRe=i=>{try{let{protocol:e}=new URL(i);return e.endsWith(":")&&!iRe.has(e)}catch{return!1}},oRe=(i,{stripHash:e})=>{var t;let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(i);if(!n)throw new Error(`Invalid URL: ${i}`);let{type:o,data:r,hash:s}=n.groups,a=o.split(";");s=e?"":s;let l=!1;a[a.length-1]==="base64"&&(a.pop(),l=!0);let c=((t=a.shift())==null?void 0:t.toLowerCase())??"",d=[...a.map(h=>{let[u,g=""]=h.split("=").map(p=>p.trim());return u==="charset"&&(g=g.toLowerCase(),g===tRe)?"":`${u}${g?`=${g}`:""}`}).filter(Boolean)];return l&&d.push("base64"),(d.length>0||c&&c!==eRe)&&d.unshift(c),`data:${d.join(";")},${l?r.trim():r}${s?`#${s}`:""}`};function rRe(i,e){if(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...e},typeof e.defaultProtocol=="string"&&!e.defaultProtocol.endsWith(":")&&(e.defaultProtocol=`${e.defaultProtocol}:`),i=i.trim(),/^data:/i.test(i))return oRe(i,e);if(nRe(i))return i;let t=i.startsWith("//");!t&&/^\.*\//.test(i)||(i=i.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let n=new URL(i);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),e.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),e.stripAuthentication&&(n.username="",n.password=""),e.stripHash?n.hash="":e.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){let r=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,s=0,a="";for(;;){let c=r.exec(n.pathname);if(!c)break;let d=c[0],h=c.index,u=n.pathname.slice(s,h);a+=u.replace(/\/{2,}/g,"/"),a+=d,s=h+d.length}let l=n.pathname.slice(s,n.pathname.length);a+=l.replace(/\/{2,}/g,"/"),n.pathname=a}if(n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let r=n.pathname.split("/"),s=r[r.length-1];zF(s,e.removeDirectoryIndex)&&(r=r.slice(0,-1),n.pathname=r.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let r of[...n.searchParams.keys()])zF(r,e.removeQueryParameters)&&n.searchParams.delete(r);if(!Array.isArray(e.keepQueryParameters)&&e.removeQueryParameters===!0&&(n.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(let r of[...n.searchParams.keys()])zF(r,e.keepQueryParameters)||n.searchParams.delete(r);if(e.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}e.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,"")),e.removeExplicitPort&&n.port&&(n.port="");let o=i;return i=n.toString(),!e.removeSingleSlash&&n.pathname==="/"&&!o.endsWith("/")&&n.hash===""&&(i=i.replace(/\/$/,"")),(e.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&e.removeSingleSlash&&(i=i.replace(/\/$/,"")),t&&!e.normalizeProtocol&&(i=i.replace(/^http:\/\//,"//")),e.stripProtocol&&(i=i.replace(/^(?:https?:)?\/\//,"")),i}var VG=class{constructor(){this.useDiffEditor=!1,this.codeOriginal={code:"",languageId:"javascript"},this.codeModified={code:"",languageId:"javascript"},this.theme="vs-light",this.automaticLayout=!0,this.monacoEditorOptions={},this.monacoDiffEditorOptions={},this.useLanguageClient=!1,this.initializationOptions=void 0,this.useWebSocket=!0,this.lcConfigOptions=this.useWebSocket?this.getDefaultWebSocketConfig():this.getDefaultWorkerConfig(),this.languageDef=void 0,this.themeData=void 0}isUseDiffEditor(){return this.useDiffEditor}setUseDiffEditor(e){this.useDiffEditor=e}isUseLanguageClient(){return this.useLanguageClient}setUseLanguageClient(e){this.useLanguageClient=e}isUseWebSocket(){return this.useWebSocket}setUseWebSocket(e){this.useWebSocket=e}getTheme(){return this.theme}setTheme(e){this.theme=e}getMainLanguageId(){return this.codeOriginal.languageId}setMainLanguageId(e){this.codeOriginal.languageId=e}getMainCode(){return this.codeOriginal.code}setMainCode(e){this.codeOriginal.code=e}getDiffLanguageId(){return this.codeModified.languageId}setDiffLanguageId(e){this.codeModified.languageId=e}getDiffCode(){return this.codeModified.code}setDiffCode(e){this.codeModified.code=e}setLanguageExtensionConfig(e){this.languageExtensionConfig=e}getLanguageExtensionConfig(){return this.languageExtensionConfig}isAutomaticLayout(){return this.automaticLayout}setAutomaticLayout(e){this.automaticLayout=e}getMonacoEditorOptions(){return this.monacoEditorOptions}setMonacoEditorOptions(e){this.monacoEditorOptions=e}getMonacoDiffEditorOptions(){return this.monacoDiffEditorOptions}setMonacoDiffEditorOptions(e){this.monacoDiffEditorOptions=e}getMonarchTokensProvider(){return this.languageDef}setMonarchTokensProvider(e){this.languageDef=e}setEditorThemeData(e){this.themeData=e}getEditorThemeData(){return this.themeData}getLanguageClientConfigOptions(){return this.lcConfigOptions}setLanguageClientConfigOptions(e){this.lcConfigOptions=e}getInitializationOptions(){return this.initializationOptions}setInitializationOptions(e){this.initializationOptions=e}getDefaultWebSocketConfig(){return{wsSecured:!1,wsHost:"localhost",wsPort:8080,wsPath:""}}getDefaultWorkerConfig(){return{workerURL:"",workerType:"classic",workerName:"WrapperWorker"}}},RC=class{constructor(e){this.editorConfig=new VG,this.id=e??Math.floor(Math.random()*101).toString()}getEditorConfig(){return this.editorConfig}getEditor(){return this.editor}getDiffEditor(){return this.diffEditor}getLanguageClient(){return this.languageClient}getMainCode(){var e,t;return this.editor?(e=this.editor)==null?void 0:e.getValue():(t=this.diffEditor)==null?void 0:t.getOriginalEditor().getValue()}getDiffCode(){var e;return(e=this.diffEditor)==null?void 0:e.getModifiedEditor().getValue()}updateTheme(){Na.setTheme(this.editorConfig.getTheme())}setWorker(e,t){this.worker=e,t&&(this.messageTransports=t)}getMessageTransports(){return this.messageTransports}isStarted(){let e=this.editor!==void 0||this.diffEditor!==void 0;return this.editorConfig.isUseLanguageClient()?e&&this.languageClient!==void 0&&this.languageClient.isRunning():e}startEditor(e,t){if(console.log(`Starting monaco-editor (${this.id})`),this.dispatchEvent=t,this.updateMonacoConfig(),this.disposeEditor(),this.disposeDiffEditor(),this.editorConfig.isUseDiffEditor()){let n=this.editorConfig.getMonacoDiffEditorOptions();n.automaticLayout===void 0&&(n.automaticLayout=this.editorConfig.isAutomaticLayout()),this.diffEditor=Na.createDiffEditor(e,n),this.updateDiffModels()}else{let n=this.editorConfig.getMonacoEditorOptions();n.automaticLayout===void 0&&(n.automaticLayout=this.editorConfig.isAutomaticLayout()),this.editor=Na.create(e,n),this.updateMainModel()}return this.editorConfig.isUseLanguageClient()?(console.log("Enabling monaco-languageclient"),this.installMonaco(),this.startLanguageClientConnection(this.editorConfig.getLanguageClientConfigOptions())):Promise.resolve("All fine. monaco-languageclient is not used.")}dispose(){return this.disposeEditor(),this.disposeDiffEditor(),this.editorConfig.isUseLanguageClient()?this.disposeLanguageClient():Promise.resolve("Monaco editor has been disposed")}async restartLanguageClient(){return await this.disposeLanguageClient(),this.startLanguageClientConnection(this.editorConfig.getLanguageClientConfigOptions())}disposeEditor(){if(this.editor){let e=this.editor.getModel();e?.dispose(),this.editor.dispose(),this.editor=void 0}}disposeDiffEditor(){var e,t;if(this.diffEditor){let n=this.diffEditor.getModel();(e=n?.modified)==null||e.dispose(),(t=n?.original)==null||t.dispose(),this.diffEditor.dispose(),this.diffEditor=void 0}}reportStatus(){let e=[];return e.push("Wrapper status:"),e.push(`Editor: ${this.editor}`),e.push(`DiffEditor: ${this.diffEditor}`),e.push(`LanguageClient: ${this.languageClient}`),e.push(`Worker: ${this.worker}`),e}async disposeLanguageClient(){return this.languageClient&&this.languageClient.isRunning()?await this.languageClient.dispose().then(()=>{var e;return(e=this.worker)==null||e.terminate(),this.worker=void 0,this.languageClient=void 0,"monaco-languageclient and monaco-editor were successfully disposed"}).catch(e=>`Disposing the monaco-languageclient resulted in error: ${e}`):Promise.reject("Unable to dispose monaco-languageclient: It is not yet started.")}updateMainModel(){if(this.editor){let e=this.editorConfig.getMainLanguageId(),t=XS.parse(`inmemory:///model${this.id}.${e}`),n=Na.getModel(t);n===null&&(n=Na.createModel(this.editorConfig.getMainCode(),e,t)),this.editor.getModel()!==n&&this.editor.setModel(n),this.editor.getModel().onDidChangeContent(()=>{this.dispatchEvent&&this.dispatchEvent(new CustomEvent("ChangeContent",{detail:{}}))})}}updateMonacoConfig(){let e=this.editorConfig.getMainLanguageId();this.editorConfig.getLanguageExtensionConfig()&&Sf.register(this.editorConfig.getLanguageExtensionConfig()),Sf.getLanguages().filter(o=>o.id===e).length===0&&Sf.register({id:e});let t=this.editorConfig.getMonarchTokensProvider();t&&Sf.setMonarchTokensProvider(e,t);let n=this.editorConfig.getEditorThemeData();n&&Na.defineTheme(this.editorConfig.getTheme(),n),this.updateTheme()}updateDiffModels(){if(this.diffEditor){let e=XS.parse(`inmemory:///model${this.id}.${this.editorConfig.getMainLanguageId()}`),t=XS.parse(`inmemory:///modelDiff${this.id}.${this.editorConfig.getMainLanguageId()}`),n=Na.getModel(e);n===null&&(n=Na.createModel(this.editorConfig.getMainCode(),this.editorConfig.getMainLanguageId(),e));let o=Na.getModel(t);o===null&&(o=Na.createModel(this.editorConfig.getDiffCode(),this.editorConfig.getDiffLanguageId(),t)),this.diffEditor.setModel({original:n,modified:o})}}updateLayout(){var e,t;this.editorConfig.isUseDiffEditor()?(e=this.diffEditor)==null||e.layout():(t=this.editor)==null||t.layout()}installMonaco(){if(xke)try{mM.get()}catch{mM.install(),console.log(`Component (${this.id}): Installed MonacoServices`)}}startLanguageClientConnection(e){return this.languageClient&&this.languageClient.isRunning()?Promise.resolve("monaco-languageclient already running!"):new Promise((t,n)=>{if(this.editorConfig.isUseWebSocket()){let o=e,r=this.createUrl(o),s=new WebSocket(r);s.onopen=()=>{let a=X2e(s);this.messageTransports={reader:new WG(a),writer:new zG(a)},this.handleLanguageClientStart(this.messageTransports,t,n)}}else{let o=e;this.worker||(this.worker=new Worker(new URL(o.workerURL,window.location.href).href,{type:o.workerType,name:o.workerName})),this.messageTransports||(this.messageTransports={reader:new fM.BrowserMessageReader(this.worker),writer:new fM.BrowserMessageWriter(this.worker)}),this.handleLanguageClientStart(this.messageTransports,t,n)}})}async handleLanguageClientStart(e,t,n){this.languageClient=this.createLanguageClient(e),e.reader.onClose(()=>{var o;return(o=this.languageClient)==null?void 0:o.stop()}),await this.languageClient.start().then(()=>{t("monaco-languageclient was successfully started.")}).catch(o=>{let r=`monaco-languageclient start was unsuccessful: ${o.message}`;n(r)})}createLanguageClient(e){return new PG({name:"Monaco Wrapper Language Client",clientOptions:{documentSelector:[this.editorConfig.getMainLanguageId()],errorHandler:{error:()=>({action:ZT.ErrorAction.Continue}),closed:()=>({action:ZT.CloseAction.DoNotRestart})},initializationOptions:this.editorConfig.getInitializationOptions()},connectionProvider:{get:()=>Promise.resolve(e)}})}createUrl(e){let t=e.wsSecured?"wss":"ws";return rRe(`${t}://${e.wsHost}:${e.wsPort}/${e.wsPath}`)}static addMonacoStyles(e){let t=document.createElement("style");t.id=e,t.innerHTML=CMe(),document.head.appendChild(t)}};function ohe(i,e,t){let n=self,o={basePath:e,workerPath:i,workerOptions:{type:t?"module":"classic"}};n.MonacoEnvironment||(n.MonacoEnvironment={workerOverrideGlobals:o});let r=(s,a)=>{console.log("getWorker: workerId: "+s+" label: "+a);let l=(c,d,h,u)=>{c.workerOptions.name=d;let g=c.workerOptions.type==="module"?`${h}-es.js`:`${h}-iife.js`,p=`${c.workerPath}/${g}`,f=new URL(p,c.basePath);return console.log(`${u}: url: ${f.href} created from basePath: ${c.basePath} and file: ${p}`),new Worker(f.href,c.workerOptions)};switch(a){case"typescript":case"javascript":return l(o,a,"tsWorker","TS Worker");case"html":case"handlebars":case"razor":return l(o,a,"htmlWorker","HTML Worker");case"css":case"scss":case"less":return l(o,a,"cssWorker","CSS Worker");case"json":return l(o,a,"jsonWorker","JSON Worker");default:return l(o,a,"editorWorker","Editor Worker")}};n.MonacoEnvironment.getWorker=r}var rhe={keywords:["Backward","Clock","Forward","bool","cm","else","for","getDistance","getTimestamp","if","in","let","loop","mm","number","return","setSpeed","string","var","void"],operators:["!=","&&","*","+",",","-","/",";","<","<=","=","==",">",">=","||"],symbols:/!=|&&|\(|\)|\*|\+|,|-|\/|;|<|<=|=|==|>|>=|\{|\|\||\}/,tokenizer:{initial:[{regex:/(true|false)/,action:{token:"boolean"}},{regex:/[_a-zA-Z][\w_]*/,action:{cases:{"@keywords":{token:"keyword"},"@default":{token:"ID"}}}},{regex:/(?:(?:-?[0-9]+)?\.[0-9]+)|-?[0-9]+/,action:{token:"number"}},{include:"@whitespace"},{regex:/@symbols/,action:{cases:{"@operators":{token:"operator"},"@default":{token:""}}}}],whitespace:[{regex:/\s+/,action:{token:"white"}},{regex:/\/\*/,action:{token:"comment",next:"@comment"}},{regex:/\/\/[^\n\r]*/,action:{token:"comment"}}],comment:[{regex:/[^/\*]+/,action:{token:"comment"}},{regex:/\*\//,action:{token:"comment",next:"@pop"}},{regex:/[/\*]/,action:{token:"comment"}}]}};var pRe={};ohe("../../public/monaco-editor-workers/workers",new URL("",window.location.href).href,!1);RC.addMonacoStyles("monaco-editor-styles");var vm=new RC,gv=vm.getEditorConfig();gv.setMainLanguageId("robot-language");gv.setMonarchTokensProvider(rhe);var sRe=`let void entry () {
    var number count = 0
    loop count < 5
    {	
        setSpeed(500 * (count + 1))
        count = count + 1
        square(count)
    }
}

let void square(number factor){
    Forward 500 * factor
    Clock 90
    Forward 500 * factor
    Clock 90
    Forward 500 * factor
    Clock 90
    Forward 500 * factor
    Clock 90
}`;gv.setMainCode(sRe);gv.theme="vs-dark";gv.useLanguageClient=!0;gv.useWebSocket=!1;var aRe=async()=>{if(console.info("typechecking current code..."),errors.length>0){let i=document.getElementById("errorModal");i.style.display="block"}else{let i=document.getElementById("validModal");i.style.display="block"}},lRe=async()=>{console.info("validating current code...")},cRe=async()=>{console.info("running 2 current code..."),vm.getLanguageClient().sendNotification("browser/execute",{content:vm.getEditor().getModel().getValue(),uri:vm.getEditor().getModel().uri.toString()})},dRe=i=>{let t=1e3/max(i.size.x,i.size.y);window.scene=i,i.entities.forEach(n=>{n.type==="Wall"&&window.entities.push(new Wall(n.pos.x*t,n.pos.y*t,n.size.x*t,n.size.y*t)),n.type==="Block"&&window.entities.push(new Wall(n.pos.x*t,n.pos.y*t,n.size.x*t,n.size.y*t))}),window.p5robot=new Robot(t,i.robot.pos.x,i.robot.pos.y,i.robot.size.x*t,i.robot.size.y*t,i.robot.rad)};window.execute=cRe;window.typecheck=aRe;window.parseAndValidate=lRe;window.setupSimulator=dRe;var yX=document.getElementById("errorModal"),SX=document.getElementById("validModal"),hRe=document.querySelector("#errorModal .close"),uRe=document.querySelector("#validModal .close");hRe.onclick=function(){yX.style.display="none"};uRe.onclick=function(){SX.style.display="none"};window.onclick=function(i){i.target==SX&&(SX.style.display="none"),i.target==yX&&(yX.style.display="none")};var she=new URL("./robo-language-server-worker.js",pRe.url);console.log(she.href);var gRe=new Worker(she.href,{type:"classic",name:"RoboMl Language Server"});vm.setWorker(gRe);var v3e=vm.startEditor(document.getElementById("monaco-editor-root"));vm.getLanguageClient().onNotification("backend/execute",i=>{console.log(i),console.log("backend/execute")});})();
/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */
//# sourceMappingURL=robot-language.js.map
